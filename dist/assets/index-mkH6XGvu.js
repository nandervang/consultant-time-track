var jae=Object.defineProperty;var Oae=(e,t,n)=>t in e?jae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ra=(e,t,n)=>Oae(e,typeof t!="symbol"?t+"":t,n);function Pae(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Zr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ii(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Iae(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var C7={exports:{}},vw={},k7={exports:{}},pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0=Symbol.for("react.element"),Dae=Symbol.for("react.portal"),Mae=Symbol.for("react.fragment"),Rae=Symbol.for("react.strict_mode"),Lae=Symbol.for("react.profiler"),Fae=Symbol.for("react.provider"),Bae=Symbol.for("react.context"),$ae=Symbol.for("react.forward_ref"),Uae=Symbol.for("react.suspense"),zae=Symbol.for("react.memo"),Hae=Symbol.for("react.lazy"),g3=Symbol.iterator;function Vae(e){return e===null||typeof e!="object"?null:(e=g3&&e[g3]||e["@@iterator"],typeof e=="function"?e:null)}var A7={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j7=Object.assign,O7={};function Bh(e,t,n){this.props=e,this.context=t,this.refs=O7,this.updater=n||A7}Bh.prototype.isReactComponent={};Bh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Bh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function P7(){}P7.prototype=Bh.prototype;function YA(e,t,n){this.props=e,this.context=t,this.refs=O7,this.updater=n||A7}var XA=YA.prototype=new P7;XA.constructor=YA;j7(XA,Bh.prototype);XA.isPureReactComponent=!0;var y3=Array.isArray,I7=Object.prototype.hasOwnProperty,QA={current:null},D7={key:!0,ref:!0,__self:!0,__source:!0};function M7(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)I7.call(t,r)&&!D7.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:m0,type:e,key:s,ref:a,props:i,_owner:QA.current}}function Wae(e,t){return{$$typeof:m0,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function JA(e){return typeof e=="object"&&e!==null&&e.$$typeof===m0}function qae(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var v3=/\/+/g;function t_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?qae(""+e.key):t.toString(36)}function Xv(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case m0:case Dae:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+t_(a,0):r,y3(i)?(n="",e!=null&&(n=e.replace(v3,"$&/")+"/"),Xv(i,t,n,"",function(u){return u})):i!=null&&(JA(i)&&(i=Wae(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(v3,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",y3(e))for(var o=0;o<e.length;o++){s=e[o];var l=r+t_(s,o);a+=Xv(s,t,n,l,i)}else if(l=Vae(e),typeof l=="function")for(e=l.call(e),o=0;!(s=e.next()).done;)s=s.value,l=r+t_(s,o++),a+=Xv(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Ny(e,t,n){if(e==null)return e;var r=[],i=0;return Xv(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Kae(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ei={current:null},Qv={transition:null},Gae={ReactCurrentDispatcher:Ei,ReactCurrentBatchConfig:Qv,ReactCurrentOwner:QA};function R7(){throw Error("act(...) is not supported in production builds of React.")}pt.Children={map:Ny,forEach:function(e,t,n){Ny(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ny(e,function(){t++}),t},toArray:function(e){return Ny(e,function(t){return t})||[]},only:function(e){if(!JA(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};pt.Component=Bh;pt.Fragment=Mae;pt.Profiler=Lae;pt.PureComponent=YA;pt.StrictMode=Rae;pt.Suspense=Uae;pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gae;pt.act=R7;pt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=j7({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=QA.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)I7.call(t,l)&&!D7.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:m0,type:e.type,key:i,ref:s,props:r,_owner:a}};pt.createContext=function(e){return e={$$typeof:Bae,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Fae,_context:e},e.Consumer=e};pt.createElement=M7;pt.createFactory=function(e){var t=M7.bind(null,e);return t.type=e,t};pt.createRef=function(){return{current:null}};pt.forwardRef=function(e){return{$$typeof:$ae,render:e}};pt.isValidElement=JA;pt.lazy=function(e){return{$$typeof:Hae,_payload:{_status:-1,_result:e},_init:Kae}};pt.memo=function(e,t){return{$$typeof:zae,type:e,compare:t===void 0?null:t}};pt.startTransition=function(e){var t=Qv.transition;Qv.transition={};try{e()}finally{Qv.transition=t}};pt.unstable_act=R7;pt.useCallback=function(e,t){return Ei.current.useCallback(e,t)};pt.useContext=function(e){return Ei.current.useContext(e)};pt.useDebugValue=function(){};pt.useDeferredValue=function(e){return Ei.current.useDeferredValue(e)};pt.useEffect=function(e,t){return Ei.current.useEffect(e,t)};pt.useId=function(){return Ei.current.useId()};pt.useImperativeHandle=function(e,t,n){return Ei.current.useImperativeHandle(e,t,n)};pt.useInsertionEffect=function(e,t){return Ei.current.useInsertionEffect(e,t)};pt.useLayoutEffect=function(e,t){return Ei.current.useLayoutEffect(e,t)};pt.useMemo=function(e,t){return Ei.current.useMemo(e,t)};pt.useReducer=function(e,t,n){return Ei.current.useReducer(e,t,n)};pt.useRef=function(e){return Ei.current.useRef(e)};pt.useState=function(e){return Ei.current.useState(e)};pt.useSyncExternalStore=function(e,t,n){return Ei.current.useSyncExternalStore(e,t,n)};pt.useTransition=function(){return Ei.current.useTransition()};pt.version="18.3.1";k7.exports=pt;var w=k7.exports;const at=ii(w),xw=Pae({__proto__:null,default:at},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yae=w,Xae=Symbol.for("react.element"),Qae=Symbol.for("react.fragment"),Jae=Object.prototype.hasOwnProperty,Zae=Yae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eoe={key:!0,ref:!0,__self:!0,__source:!0};function L7(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Jae.call(t,r)&&!eoe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Xae,type:e,key:s,ref:a,props:i,_owner:Zae.current}}vw.Fragment=Qae;vw.jsx=L7;vw.jsxs=L7;C7.exports=vw;var c=C7.exports,F7={exports:{}},ms={},B7={exports:{}},$7={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,F){var I=R.length;R.push(F);e:for(;0<I;){var X=I-1>>>1,G=R[X];if(0<i(G,F))R[X]=F,R[I]=G,I=X;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var F=R[0],I=R.pop();if(I!==F){R[0]=I;e:for(var X=0,G=R.length,$=G>>>1;X<$;){var be=2*(X+1)-1,je=R[be],Q=be+1,K=R[Q];if(0>i(je,I))Q<G&&0>i(K,je)?(R[X]=K,R[Q]=I,X=Q):(R[X]=je,R[be]=I,X=be);else if(Q<G&&0>i(K,I))R[X]=K,R[Q]=I,X=Q;else break e}}return F}function i(R,F){var I=R.sortIndex-F.sortIndex;return I!==0?I:R.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],u=[],d=1,f=null,h=3,p=!1,m=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(R){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=R)r(u),F.sortIndex=F.expirationTime,t(l,F);else break;F=n(u)}}function S(R){if(g=!1,x(R),!m)if(n(l)!==null)m=!0,O(E);else{var F=n(u);F!==null&&B(S,F.startTime-R)}}function E(R,F){m=!1,g&&(g=!1,y(C),C=-1),p=!0;var I=h;try{for(x(F),f=n(l);f!==null&&(!(f.expirationTime>F)||R&&!j());){var X=f.callback;if(typeof X=="function"){f.callback=null,h=f.priorityLevel;var G=X(f.expirationTime<=F);F=e.unstable_now(),typeof G=="function"?f.callback=G:f===n(l)&&r(l),x(F)}else r(l);f=n(l)}if(f!==null)var $=!0;else{var be=n(u);be!==null&&B(S,be.startTime-F),$=!1}return $}finally{f=null,h=I,p=!1}}var _=!1,T=null,C=-1,k=5,A=-1;function j(){return!(e.unstable_now()-A<k)}function D(){if(T!==null){var R=e.unstable_now();A=R;var F=!0;try{F=T(!0,R)}finally{F?P():(_=!1,T=null)}}else _=!1}var P;if(typeof b=="function")P=function(){b(D)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,L=M.port2;M.port1.onmessage=D,P=function(){L.postMessage(null)}}else P=function(){v(D,0)};function O(R){T=R,_||(_=!0,P())}function B(R,F){C=v(function(){R(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,O(E))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(R){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var I=h;h=F;try{return R()}finally{h=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,F){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var I=h;h=R;try{return F()}finally{h=I}},e.unstable_scheduleCallback=function(R,F,I){var X=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?X+I:X):I=X,R){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=I+G,R={id:d++,callback:F,priorityLevel:R,startTime:I,expirationTime:G,sortIndex:-1},I>X?(R.sortIndex=I,t(u,R),n(l)===null&&R===n(u)&&(g?(y(C),C=-1):g=!0,B(S,I-X))):(R.sortIndex=G,t(l,R),m||p||(m=!0,O(E))),R},e.unstable_shouldYield=j,e.unstable_wrapCallback=function(R){var F=h;return function(){var I=h;h=F;try{return R.apply(this,arguments)}finally{h=I}}}})($7);B7.exports=$7;var toe=B7.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var noe=w,fs=toe;function Ne(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var U7=new Set,ng={};function Ad(e,t){nh(e,t),nh(e+"Capture",t)}function nh(e,t){for(ng[e]=t,e=0;e<t.length;e++)U7.add(t[e])}var Ko=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),KT=Object.prototype.hasOwnProperty,roe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x3={},b3={};function ioe(e){return KT.call(b3,e)?!0:KT.call(x3,e)?!1:roe.test(e)?b3[e]=!0:(x3[e]=!0,!1)}function soe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function aoe(e,t,n,r){if(t===null||typeof t>"u"||soe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Si(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var Ur={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ur[e]=new Si(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ur[t]=new Si(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ur[e]=new Si(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ur[e]=new Si(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ur[e]=new Si(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ur[e]=new Si(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ur[e]=new Si(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ur[e]=new Si(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ur[e]=new Si(e,5,!1,e.toLowerCase(),null,!1,!1)});var ZA=/[\-:]([a-z])/g;function ej(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ZA,ej);Ur[t]=new Si(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ZA,ej);Ur[t]=new Si(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ZA,ej);Ur[t]=new Si(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ur[e]=new Si(e,1,!1,e.toLowerCase(),null,!1,!1)});Ur.xlinkHref=new Si("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ur[e]=new Si(e,1,!1,e.toLowerCase(),null,!0,!0)});function tj(e,t,n,r){var i=Ur.hasOwnProperty(t)?Ur[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(aoe(t,n,i,r)&&(n=null),r||i===null?ioe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ll=noe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ty=Symbol.for("react.element"),gf=Symbol.for("react.portal"),yf=Symbol.for("react.fragment"),nj=Symbol.for("react.strict_mode"),GT=Symbol.for("react.profiler"),z7=Symbol.for("react.provider"),H7=Symbol.for("react.context"),rj=Symbol.for("react.forward_ref"),YT=Symbol.for("react.suspense"),XT=Symbol.for("react.suspense_list"),ij=Symbol.for("react.memo"),Il=Symbol.for("react.lazy"),V7=Symbol.for("react.offscreen"),w3=Symbol.iterator;function Sp(e){return e===null||typeof e!="object"?null:(e=w3&&e[w3]||e["@@iterator"],typeof e=="function"?e:null)}var wn=Object.assign,n_;function nm(e){if(n_===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);n_=t&&t[1]||""}return`
`+n_+e}var r_=!1;function i_(e,t){if(!e||r_)return"";r_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=o);break}}}finally{r_=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?nm(e):""}function ooe(e){switch(e.tag){case 5:return nm(e.type);case 16:return nm("Lazy");case 13:return nm("Suspense");case 19:return nm("SuspenseList");case 0:case 2:case 15:return e=i_(e.type,!1),e;case 11:return e=i_(e.type.render,!1),e;case 1:return e=i_(e.type,!0),e;default:return""}}function QT(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case yf:return"Fragment";case gf:return"Portal";case GT:return"Profiler";case nj:return"StrictMode";case YT:return"Suspense";case XT:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case H7:return(e.displayName||"Context")+".Consumer";case z7:return(e._context.displayName||"Context")+".Provider";case rj:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ij:return t=e.displayName||null,t!==null?t:QT(e.type)||"Memo";case Il:t=e._payload,e=e._init;try{return QT(e(t))}catch{}}return null}function loe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return QT(t);case 8:return t===nj?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function bc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function W7(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function coe(e){var t=W7(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Cy(e){e._valueTracker||(e._valueTracker=coe(e))}function q7(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W7(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ox(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function JT(e,t){var n=t.checked;return wn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function E3(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=bc(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function K7(e,t){t=t.checked,t!=null&&tj(e,"checked",t,!1)}function ZT(e,t){K7(e,t);var n=bc(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?eC(e,t.type,n):t.hasOwnProperty("defaultValue")&&eC(e,t.type,bc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function S3(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function eC(e,t,n){(t!=="number"||Ox(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var rm=Array.isArray;function Lf(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+bc(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function tC(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ne(91));return wn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _3(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ne(92));if(rm(n)){if(1<n.length)throw Error(Ne(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:bc(n)}}function G7(e,t){var n=bc(t.value),r=bc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function N3(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Y7(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nC(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Y7(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ky,X7=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ky=ky||document.createElement("div"),ky.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ky.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function rg(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var gm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uoe=["Webkit","ms","Moz","O"];Object.keys(gm).forEach(function(e){uoe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gm[t]=gm[e]})});function Q7(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||gm.hasOwnProperty(e)&&gm[e]?(""+t).trim():t+"px"}function J7(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Q7(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var doe=wn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rC(e,t){if(t){if(doe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ne(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ne(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ne(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ne(62))}}function iC(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sC=null;function sj(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var aC=null,Ff=null,Bf=null;function T3(e){if(e=v0(e)){if(typeof aC!="function")throw Error(Ne(280));var t=e.stateNode;t&&(t=_w(t),aC(e.stateNode,e.type,t))}}function Z7(e){Ff?Bf?Bf.push(e):Bf=[e]:Ff=e}function eU(){if(Ff){var e=Ff,t=Bf;if(Bf=Ff=null,T3(e),t)for(e=0;e<t.length;e++)T3(t[e])}}function tU(e,t){return e(t)}function nU(){}var s_=!1;function rU(e,t,n){if(s_)return e(t,n);s_=!0;try{return tU(e,t,n)}finally{s_=!1,(Ff!==null||Bf!==null)&&(nU(),eU())}}function ig(e,t){var n=e.stateNode;if(n===null)return null;var r=_w(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ne(231,t,typeof n));return n}var oC=!1;if(Ko)try{var _p={};Object.defineProperty(_p,"passive",{get:function(){oC=!0}}),window.addEventListener("test",_p,_p),window.removeEventListener("test",_p,_p)}catch{oC=!1}function foe(e,t,n,r,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var ym=!1,Px=null,Ix=!1,lC=null,hoe={onError:function(e){ym=!0,Px=e}};function poe(e,t,n,r,i,s,a,o,l){ym=!1,Px=null,foe.apply(hoe,arguments)}function moe(e,t,n,r,i,s,a,o,l){if(poe.apply(this,arguments),ym){if(ym){var u=Px;ym=!1,Px=null}else throw Error(Ne(198));Ix||(Ix=!0,lC=u)}}function jd(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function iU(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function C3(e){if(jd(e)!==e)throw Error(Ne(188))}function goe(e){var t=e.alternate;if(!t){if(t=jd(e),t===null)throw Error(Ne(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return C3(i),e;if(s===r)return C3(i),t;s=s.sibling}throw Error(Ne(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(Ne(189))}}if(n.alternate!==r)throw Error(Ne(190))}if(n.tag!==3)throw Error(Ne(188));return n.stateNode.current===n?e:t}function sU(e){return e=goe(e),e!==null?aU(e):null}function aU(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=aU(e);if(t!==null)return t;e=e.sibling}return null}var oU=fs.unstable_scheduleCallback,k3=fs.unstable_cancelCallback,yoe=fs.unstable_shouldYield,voe=fs.unstable_requestPaint,$n=fs.unstable_now,xoe=fs.unstable_getCurrentPriorityLevel,aj=fs.unstable_ImmediatePriority,lU=fs.unstable_UserBlockingPriority,Dx=fs.unstable_NormalPriority,boe=fs.unstable_LowPriority,cU=fs.unstable_IdlePriority,bw=null,Qa=null;function woe(e){if(Qa&&typeof Qa.onCommitFiberRoot=="function")try{Qa.onCommitFiberRoot(bw,e,void 0,(e.current.flags&128)===128)}catch{}}var ya=Math.clz32?Math.clz32:_oe,Eoe=Math.log,Soe=Math.LN2;function _oe(e){return e>>>=0,e===0?32:31-(Eoe(e)/Soe|0)|0}var Ay=64,jy=4194304;function im(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Mx(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=im(o):(s&=a,s!==0&&(r=im(s)))}else a=n&~i,a!==0?r=im(a):s!==0&&(r=im(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ya(t),i=1<<n,r|=e[n],t&=~i;return r}function Noe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Toe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-ya(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=Noe(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}function cC(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function uU(){var e=Ay;return Ay<<=1,!(Ay&4194240)&&(Ay=64),e}function a_(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function g0(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ya(t),e[t]=n}function Coe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ya(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function oj(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ya(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Mt=0;function dU(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var fU,lj,hU,pU,mU,uC=!1,Oy=[],ec=null,tc=null,nc=null,sg=new Map,ag=new Map,Bl=[],koe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function A3(e,t){switch(e){case"focusin":case"focusout":ec=null;break;case"dragenter":case"dragleave":tc=null;break;case"mouseover":case"mouseout":nc=null;break;case"pointerover":case"pointerout":sg.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ag.delete(t.pointerId)}}function Np(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=v0(t),t!==null&&lj(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Aoe(e,t,n,r,i){switch(t){case"focusin":return ec=Np(ec,e,t,n,r,i),!0;case"dragenter":return tc=Np(tc,e,t,n,r,i),!0;case"mouseover":return nc=Np(nc,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return sg.set(s,Np(sg.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ag.set(s,Np(ag.get(s)||null,e,t,n,r,i)),!0}return!1}function gU(e){var t=wu(e.target);if(t!==null){var n=jd(t);if(n!==null){if(t=n.tag,t===13){if(t=iU(n),t!==null){e.blockedOn=t,mU(e.priority,function(){hU(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Jv(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=dC(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);sC=r,n.target.dispatchEvent(r),sC=null}else return t=v0(n),t!==null&&lj(t),e.blockedOn=n,!1;t.shift()}return!0}function j3(e,t,n){Jv(e)&&n.delete(t)}function joe(){uC=!1,ec!==null&&Jv(ec)&&(ec=null),tc!==null&&Jv(tc)&&(tc=null),nc!==null&&Jv(nc)&&(nc=null),sg.forEach(j3),ag.forEach(j3)}function Tp(e,t){e.blockedOn===t&&(e.blockedOn=null,uC||(uC=!0,fs.unstable_scheduleCallback(fs.unstable_NormalPriority,joe)))}function og(e){function t(i){return Tp(i,e)}if(0<Oy.length){Tp(Oy[0],e);for(var n=1;n<Oy.length;n++){var r=Oy[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ec!==null&&Tp(ec,e),tc!==null&&Tp(tc,e),nc!==null&&Tp(nc,e),sg.forEach(t),ag.forEach(t),n=0;n<Bl.length;n++)r=Bl[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Bl.length&&(n=Bl[0],n.blockedOn===null);)gU(n),n.blockedOn===null&&Bl.shift()}var $f=ll.ReactCurrentBatchConfig,Rx=!0;function Ooe(e,t,n,r){var i=Mt,s=$f.transition;$f.transition=null;try{Mt=1,cj(e,t,n,r)}finally{Mt=i,$f.transition=s}}function Poe(e,t,n,r){var i=Mt,s=$f.transition;$f.transition=null;try{Mt=4,cj(e,t,n,r)}finally{Mt=i,$f.transition=s}}function cj(e,t,n,r){if(Rx){var i=dC(e,t,n,r);if(i===null)g_(e,t,r,Lx,n),A3(e,r);else if(Aoe(i,e,t,n,r))r.stopPropagation();else if(A3(e,r),t&4&&-1<koe.indexOf(e)){for(;i!==null;){var s=v0(i);if(s!==null&&fU(s),s=dC(e,t,n,r),s===null&&g_(e,t,r,Lx,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else g_(e,t,r,null,n)}}var Lx=null;function dC(e,t,n,r){if(Lx=null,e=sj(r),e=wu(e),e!==null)if(t=jd(e),t===null)e=null;else if(n=t.tag,n===13){if(e=iU(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Lx=e,null}function yU(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xoe()){case aj:return 1;case lU:return 4;case Dx:case boe:return 16;case cU:return 536870912;default:return 16}default:return 16}}var ql=null,uj=null,Zv=null;function vU(){if(Zv)return Zv;var e,t=uj,n=t.length,r,i="value"in ql?ql.value:ql.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return Zv=i.slice(e,1<r?1-r:void 0)}function ex(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Py(){return!0}function O3(){return!1}function gs(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Py:O3,this.isPropagationStopped=O3,this}return wn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Py)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Py)},persist:function(){},isPersistent:Py}),t}var $h={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dj=gs($h),y0=wn({},$h,{view:0,detail:0}),Ioe=gs(y0),o_,l_,Cp,ww=wn({},y0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fj,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cp&&(Cp&&e.type==="mousemove"?(o_=e.screenX-Cp.screenX,l_=e.screenY-Cp.screenY):l_=o_=0,Cp=e),o_)},movementY:function(e){return"movementY"in e?e.movementY:l_}}),P3=gs(ww),Doe=wn({},ww,{dataTransfer:0}),Moe=gs(Doe),Roe=wn({},y0,{relatedTarget:0}),c_=gs(Roe),Loe=wn({},$h,{animationName:0,elapsedTime:0,pseudoElement:0}),Foe=gs(Loe),Boe=wn({},$h,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$oe=gs(Boe),Uoe=wn({},$h,{data:0}),I3=gs(Uoe),zoe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hoe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Voe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Woe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Voe[e])?!!t[e]:!1}function fj(){return Woe}var qoe=wn({},y0,{key:function(e){if(e.key){var t=zoe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ex(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Hoe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fj,charCode:function(e){return e.type==="keypress"?ex(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ex(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Koe=gs(qoe),Goe=wn({},ww,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),D3=gs(Goe),Yoe=wn({},y0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fj}),Xoe=gs(Yoe),Qoe=wn({},$h,{propertyName:0,elapsedTime:0,pseudoElement:0}),Joe=gs(Qoe),Zoe=wn({},ww,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ele=gs(Zoe),tle=[9,13,27,32],hj=Ko&&"CompositionEvent"in window,vm=null;Ko&&"documentMode"in document&&(vm=document.documentMode);var nle=Ko&&"TextEvent"in window&&!vm,xU=Ko&&(!hj||vm&&8<vm&&11>=vm),M3=" ",R3=!1;function bU(e,t){switch(e){case"keyup":return tle.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wU(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vf=!1;function rle(e,t){switch(e){case"compositionend":return wU(t);case"keypress":return t.which!==32?null:(R3=!0,M3);case"textInput":return e=t.data,e===M3&&R3?null:e;default:return null}}function ile(e,t){if(vf)return e==="compositionend"||!hj&&bU(e,t)?(e=vU(),Zv=uj=ql=null,vf=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xU&&t.locale!=="ko"?null:t.data;default:return null}}var sle={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function L3(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!sle[e.type]:t==="textarea"}function EU(e,t,n,r){Z7(r),t=Fx(t,"onChange"),0<t.length&&(n=new dj("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var xm=null,lg=null;function ale(e){IU(e,0)}function Ew(e){var t=wf(e);if(q7(t))return e}function ole(e,t){if(e==="change")return t}var SU=!1;if(Ko){var u_;if(Ko){var d_="oninput"in document;if(!d_){var F3=document.createElement("div");F3.setAttribute("oninput","return;"),d_=typeof F3.oninput=="function"}u_=d_}else u_=!1;SU=u_&&(!document.documentMode||9<document.documentMode)}function B3(){xm&&(xm.detachEvent("onpropertychange",_U),lg=xm=null)}function _U(e){if(e.propertyName==="value"&&Ew(lg)){var t=[];EU(t,lg,e,sj(e)),rU(ale,t)}}function lle(e,t,n){e==="focusin"?(B3(),xm=t,lg=n,xm.attachEvent("onpropertychange",_U)):e==="focusout"&&B3()}function cle(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ew(lg)}function ule(e,t){if(e==="click")return Ew(t)}function dle(e,t){if(e==="input"||e==="change")return Ew(t)}function fle(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wa=typeof Object.is=="function"?Object.is:fle;function cg(e,t){if(wa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!KT.call(t,i)||!wa(e[i],t[i]))return!1}return!0}function $3(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function U3(e,t){var n=$3(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$3(n)}}function NU(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?NU(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function TU(){for(var e=window,t=Ox();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ox(e.document)}return t}function pj(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function hle(e){var t=TU(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&NU(n.ownerDocument.documentElement,n)){if(r!==null&&pj(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=U3(n,s);var a=U3(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ple=Ko&&"documentMode"in document&&11>=document.documentMode,xf=null,fC=null,bm=null,hC=!1;function z3(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hC||xf==null||xf!==Ox(r)||(r=xf,"selectionStart"in r&&pj(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),bm&&cg(bm,r)||(bm=r,r=Fx(fC,"onSelect"),0<r.length&&(t=new dj("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=xf)))}function Iy(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var bf={animationend:Iy("Animation","AnimationEnd"),animationiteration:Iy("Animation","AnimationIteration"),animationstart:Iy("Animation","AnimationStart"),transitionend:Iy("Transition","TransitionEnd")},f_={},CU={};Ko&&(CU=document.createElement("div").style,"AnimationEvent"in window||(delete bf.animationend.animation,delete bf.animationiteration.animation,delete bf.animationstart.animation),"TransitionEvent"in window||delete bf.transitionend.transition);function Sw(e){if(f_[e])return f_[e];if(!bf[e])return e;var t=bf[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in CU)return f_[e]=t[n];return e}var kU=Sw("animationend"),AU=Sw("animationiteration"),jU=Sw("animationstart"),OU=Sw("transitionend"),PU=new Map,H3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ic(e,t){PU.set(e,t),Ad(t,[e])}for(var h_=0;h_<H3.length;h_++){var p_=H3[h_],mle=p_.toLowerCase(),gle=p_[0].toUpperCase()+p_.slice(1);Ic(mle,"on"+gle)}Ic(kU,"onAnimationEnd");Ic(AU,"onAnimationIteration");Ic(jU,"onAnimationStart");Ic("dblclick","onDoubleClick");Ic("focusin","onFocus");Ic("focusout","onBlur");Ic(OU,"onTransitionEnd");nh("onMouseEnter",["mouseout","mouseover"]);nh("onMouseLeave",["mouseout","mouseover"]);nh("onPointerEnter",["pointerout","pointerover"]);nh("onPointerLeave",["pointerout","pointerover"]);Ad("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ad("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ad("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ad("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ad("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ad("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yle=new Set("cancel close invalid load scroll toggle".split(" ").concat(sm));function V3(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,moe(r,t,void 0,e),e.currentTarget=null}function IU(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;V3(i,o,u),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;V3(i,o,u),s=l}}}if(Ix)throw e=lC,Ix=!1,lC=null,e}function nn(e,t){var n=t[vC];n===void 0&&(n=t[vC]=new Set);var r=e+"__bubble";n.has(r)||(DU(t,e,2,!1),n.add(r))}function m_(e,t,n){var r=0;t&&(r|=4),DU(n,e,r,t)}var Dy="_reactListening"+Math.random().toString(36).slice(2);function ug(e){if(!e[Dy]){e[Dy]=!0,U7.forEach(function(n){n!=="selectionchange"&&(yle.has(n)||m_(n,!1,e),m_(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Dy]||(t[Dy]=!0,m_("selectionchange",!1,t))}}function DU(e,t,n,r){switch(yU(t)){case 1:var i=Ooe;break;case 4:i=Poe;break;default:i=cj}n=i.bind(null,t,n,e),i=void 0,!oC||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function g_(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=wu(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}rU(function(){var u=s,d=sj(n),f=[];e:{var h=PU.get(e);if(h!==void 0){var p=dj,m=e;switch(e){case"keypress":if(ex(n)===0)break e;case"keydown":case"keyup":p=Koe;break;case"focusin":m="focus",p=c_;break;case"focusout":m="blur",p=c_;break;case"beforeblur":case"afterblur":p=c_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=P3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Moe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Xoe;break;case kU:case AU:case jU:p=Foe;break;case OU:p=Joe;break;case"scroll":p=Ioe;break;case"wheel":p=ele;break;case"copy":case"cut":case"paste":p=$oe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=D3}var g=(t&4)!==0,v=!g&&e==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var b=u,x;b!==null;){x=b;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,y!==null&&(S=ig(b,y),S!=null&&g.push(dg(b,S,x)))),v)break;b=b.return}0<g.length&&(h=new p(h,m,null,n,d),f.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==sC&&(m=n.relatedTarget||n.fromElement)&&(wu(m)||m[Go]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=u,m=m?wu(m):null,m!==null&&(v=jd(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(g=P3,S="onMouseLeave",y="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(g=D3,S="onPointerLeave",y="onPointerEnter",b="pointer"),v=p==null?h:wf(p),x=m==null?h:wf(m),h=new g(S,b+"leave",p,n,d),h.target=v,h.relatedTarget=x,S=null,wu(d)===u&&(g=new g(y,b+"enter",m,n,d),g.target=x,g.relatedTarget=v,S=g),v=S,p&&m)t:{for(g=p,y=m,b=0,x=g;x;x=zd(x))b++;for(x=0,S=y;S;S=zd(S))x++;for(;0<b-x;)g=zd(g),b--;for(;0<x-b;)y=zd(y),x--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=zd(g),y=zd(y)}g=null}else g=null;p!==null&&W3(f,h,p,g,!1),m!==null&&v!==null&&W3(f,v,m,g,!0)}}e:{if(h=u?wf(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var E=ole;else if(L3(h))if(SU)E=dle;else{E=cle;var _=lle}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=ule);if(E&&(E=E(e,u))){EU(f,E,n,d);break e}_&&_(e,h,u),e==="focusout"&&(_=h._wrapperState)&&_.controlled&&h.type==="number"&&eC(h,"number",h.value)}switch(_=u?wf(u):window,e){case"focusin":(L3(_)||_.contentEditable==="true")&&(xf=_,fC=u,bm=null);break;case"focusout":bm=fC=xf=null;break;case"mousedown":hC=!0;break;case"contextmenu":case"mouseup":case"dragend":hC=!1,z3(f,n,d);break;case"selectionchange":if(ple)break;case"keydown":case"keyup":z3(f,n,d)}var T;if(hj)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else vf?bU(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(xU&&n.locale!=="ko"&&(vf||C!=="onCompositionStart"?C==="onCompositionEnd"&&vf&&(T=vU()):(ql=d,uj="value"in ql?ql.value:ql.textContent,vf=!0)),_=Fx(u,C),0<_.length&&(C=new I3(C,e,null,n,d),f.push({event:C,listeners:_}),T?C.data=T:(T=wU(n),T!==null&&(C.data=T)))),(T=nle?rle(e,n):ile(e,n))&&(u=Fx(u,"onBeforeInput"),0<u.length&&(d=new I3("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=T))}IU(f,t)})}function dg(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fx(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ig(e,n),s!=null&&r.unshift(dg(e,s,i)),s=ig(e,t),s!=null&&r.push(dg(e,s,i))),e=e.return}return r}function zd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function W3(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=ig(n,s),l!=null&&a.unshift(dg(n,l,o))):i||(l=ig(n,s),l!=null&&a.push(dg(n,l,o)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var vle=/\r\n?/g,xle=/\u0000|\uFFFD/g;function q3(e){return(typeof e=="string"?e:""+e).replace(vle,`
`).replace(xle,"")}function My(e,t,n){if(t=q3(t),q3(e)!==t&&n)throw Error(Ne(425))}function Bx(){}var pC=null,mC=null;function gC(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var yC=typeof setTimeout=="function"?setTimeout:void 0,ble=typeof clearTimeout=="function"?clearTimeout:void 0,K3=typeof Promise=="function"?Promise:void 0,wle=typeof queueMicrotask=="function"?queueMicrotask:typeof K3<"u"?function(e){return K3.resolve(null).then(e).catch(Ele)}:yC;function Ele(e){setTimeout(function(){throw e})}function y_(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),og(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);og(t)}function rc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function G3(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Uh=Math.random().toString(36).slice(2),qa="__reactFiber$"+Uh,fg="__reactProps$"+Uh,Go="__reactContainer$"+Uh,vC="__reactEvents$"+Uh,Sle="__reactListeners$"+Uh,_le="__reactHandles$"+Uh;function wu(e){var t=e[qa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Go]||n[qa]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=G3(e);e!==null;){if(n=e[qa])return n;e=G3(e)}return t}e=n,n=e.parentNode}return null}function v0(e){return e=e[qa]||e[Go],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function wf(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ne(33))}function _w(e){return e[fg]||null}var xC=[],Ef=-1;function Dc(e){return{current:e}}function an(e){0>Ef||(e.current=xC[Ef],xC[Ef]=null,Ef--)}function Qt(e,t){Ef++,xC[Ef]=e.current,e.current=t}var wc={},ei=Dc(wc),Ri=Dc(!1),rd=wc;function rh(e,t){var n=e.type.contextTypes;if(!n)return wc;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Li(e){return e=e.childContextTypes,e!=null}function $x(){an(Ri),an(ei)}function Y3(e,t,n){if(ei.current!==wc)throw Error(Ne(168));Qt(ei,t),Qt(Ri,n)}function MU(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Ne(108,loe(e)||"Unknown",i));return wn({},n,r)}function Ux(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wc,rd=ei.current,Qt(ei,e),Qt(Ri,Ri.current),!0}function X3(e,t,n){var r=e.stateNode;if(!r)throw Error(Ne(169));n?(e=MU(e,t,rd),r.__reactInternalMemoizedMergedChildContext=e,an(Ri),an(ei),Qt(ei,e)):an(Ri),Qt(Ri,n)}var Oo=null,Nw=!1,v_=!1;function RU(e){Oo===null?Oo=[e]:Oo.push(e)}function Nle(e){Nw=!0,RU(e)}function Mc(){if(!v_&&Oo!==null){v_=!0;var e=0,t=Mt;try{var n=Oo;for(Mt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Oo=null,Nw=!1}catch(i){throw Oo!==null&&(Oo=Oo.slice(e+1)),oU(aj,Mc),i}finally{Mt=t,v_=!1}}return null}var Sf=[],_f=0,zx=null,Hx=0,js=[],Os=0,id=null,Mo=1,Ro="";function cu(e,t){Sf[_f++]=Hx,Sf[_f++]=zx,zx=e,Hx=t}function LU(e,t,n){js[Os++]=Mo,js[Os++]=Ro,js[Os++]=id,id=e;var r=Mo;e=Ro;var i=32-ya(r)-1;r&=~(1<<i),n+=1;var s=32-ya(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Mo=1<<32-ya(t)+i|n<<i|r,Ro=s+e}else Mo=1<<s|n<<i|r,Ro=e}function mj(e){e.return!==null&&(cu(e,1),LU(e,1,0))}function gj(e){for(;e===zx;)zx=Sf[--_f],Sf[_f]=null,Hx=Sf[--_f],Sf[_f]=null;for(;e===id;)id=js[--Os],js[Os]=null,Ro=js[--Os],js[Os]=null,Mo=js[--Os],js[Os]=null}var is=null,ns=null,fn=!1,ca=null;function FU(e,t){var n=Rs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Q3(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,is=e,ns=rc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,is=e,ns=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=id!==null?{id:Mo,overflow:Ro}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Rs(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,is=e,ns=null,!0):!1;default:return!1}}function bC(e){return(e.mode&1)!==0&&(e.flags&128)===0}function wC(e){if(fn){var t=ns;if(t){var n=t;if(!Q3(e,t)){if(bC(e))throw Error(Ne(418));t=rc(n.nextSibling);var r=is;t&&Q3(e,t)?FU(r,n):(e.flags=e.flags&-4097|2,fn=!1,is=e)}}else{if(bC(e))throw Error(Ne(418));e.flags=e.flags&-4097|2,fn=!1,is=e}}}function J3(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;is=e}function Ry(e){if(e!==is)return!1;if(!fn)return J3(e),fn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!gC(e.type,e.memoizedProps)),t&&(t=ns)){if(bC(e))throw BU(),Error(Ne(418));for(;t;)FU(e,t),t=rc(t.nextSibling)}if(J3(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ne(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ns=rc(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ns=null}}else ns=is?rc(e.stateNode.nextSibling):null;return!0}function BU(){for(var e=ns;e;)e=rc(e.nextSibling)}function ih(){ns=is=null,fn=!1}function yj(e){ca===null?ca=[e]:ca.push(e)}var Tle=ll.ReactCurrentBatchConfig;function kp(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ne(309));var r=n.stateNode}if(!r)throw Error(Ne(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(Ne(284));if(!n._owner)throw Error(Ne(290,e))}return e}function Ly(e,t){throw e=Object.prototype.toString.call(t),Error(Ne(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Z3(e){var t=e._init;return t(e._payload)}function $U(e){function t(y,b){if(e){var x=y.deletions;x===null?(y.deletions=[b],y.flags|=16):x.push(b)}}function n(y,b){if(!e)return null;for(;b!==null;)t(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function i(y,b){return y=oc(y,b),y.index=0,y.sibling=null,y}function s(y,b,x){return y.index=x,e?(x=y.alternate,x!==null?(x=x.index,x<b?(y.flags|=2,b):x):(y.flags|=2,b)):(y.flags|=1048576,b)}function a(y){return e&&y.alternate===null&&(y.flags|=2),y}function o(y,b,x,S){return b===null||b.tag!==6?(b=N_(x,y.mode,S),b.return=y,b):(b=i(b,x),b.return=y,b)}function l(y,b,x,S){var E=x.type;return E===yf?d(y,b,x.props.children,S,x.key):b!==null&&(b.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Il&&Z3(E)===b.type)?(S=i(b,x.props),S.ref=kp(y,b,x),S.return=y,S):(S=ox(x.type,x.key,x.props,null,y.mode,S),S.ref=kp(y,b,x),S.return=y,S)}function u(y,b,x,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==x.containerInfo||b.stateNode.implementation!==x.implementation?(b=T_(x,y.mode,S),b.return=y,b):(b=i(b,x.children||[]),b.return=y,b)}function d(y,b,x,S,E){return b===null||b.tag!==7?(b=Bu(x,y.mode,S,E),b.return=y,b):(b=i(b,x),b.return=y,b)}function f(y,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return b=N_(""+b,y.mode,x),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ty:return x=ox(b.type,b.key,b.props,null,y.mode,x),x.ref=kp(y,null,b),x.return=y,x;case gf:return b=T_(b,y.mode,x),b.return=y,b;case Il:var S=b._init;return f(y,S(b._payload),x)}if(rm(b)||Sp(b))return b=Bu(b,y.mode,x,null),b.return=y,b;Ly(y,b)}return null}function h(y,b,x,S){var E=b!==null?b.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return E!==null?null:o(y,b,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ty:return x.key===E?l(y,b,x,S):null;case gf:return x.key===E?u(y,b,x,S):null;case Il:return E=x._init,h(y,b,E(x._payload),S)}if(rm(x)||Sp(x))return E!==null?null:d(y,b,x,S,null);Ly(y,x)}return null}function p(y,b,x,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(x)||null,o(b,y,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ty:return y=y.get(S.key===null?x:S.key)||null,l(b,y,S,E);case gf:return y=y.get(S.key===null?x:S.key)||null,u(b,y,S,E);case Il:var _=S._init;return p(y,b,x,_(S._payload),E)}if(rm(S)||Sp(S))return y=y.get(x)||null,d(b,y,S,E,null);Ly(b,S)}return null}function m(y,b,x,S){for(var E=null,_=null,T=b,C=b=0,k=null;T!==null&&C<x.length;C++){T.index>C?(k=T,T=null):k=T.sibling;var A=h(y,T,x[C],S);if(A===null){T===null&&(T=k);break}e&&T&&A.alternate===null&&t(y,T),b=s(A,b,C),_===null?E=A:_.sibling=A,_=A,T=k}if(C===x.length)return n(y,T),fn&&cu(y,C),E;if(T===null){for(;C<x.length;C++)T=f(y,x[C],S),T!==null&&(b=s(T,b,C),_===null?E=T:_.sibling=T,_=T);return fn&&cu(y,C),E}for(T=r(y,T);C<x.length;C++)k=p(T,y,C,x[C],S),k!==null&&(e&&k.alternate!==null&&T.delete(k.key===null?C:k.key),b=s(k,b,C),_===null?E=k:_.sibling=k,_=k);return e&&T.forEach(function(j){return t(y,j)}),fn&&cu(y,C),E}function g(y,b,x,S){var E=Sp(x);if(typeof E!="function")throw Error(Ne(150));if(x=E.call(x),x==null)throw Error(Ne(151));for(var _=E=null,T=b,C=b=0,k=null,A=x.next();T!==null&&!A.done;C++,A=x.next()){T.index>C?(k=T,T=null):k=T.sibling;var j=h(y,T,A.value,S);if(j===null){T===null&&(T=k);break}e&&T&&j.alternate===null&&t(y,T),b=s(j,b,C),_===null?E=j:_.sibling=j,_=j,T=k}if(A.done)return n(y,T),fn&&cu(y,C),E;if(T===null){for(;!A.done;C++,A=x.next())A=f(y,A.value,S),A!==null&&(b=s(A,b,C),_===null?E=A:_.sibling=A,_=A);return fn&&cu(y,C),E}for(T=r(y,T);!A.done;C++,A=x.next())A=p(T,y,C,A.value,S),A!==null&&(e&&A.alternate!==null&&T.delete(A.key===null?C:A.key),b=s(A,b,C),_===null?E=A:_.sibling=A,_=A);return e&&T.forEach(function(D){return t(y,D)}),fn&&cu(y,C),E}function v(y,b,x,S){if(typeof x=="object"&&x!==null&&x.type===yf&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ty:e:{for(var E=x.key,_=b;_!==null;){if(_.key===E){if(E=x.type,E===yf){if(_.tag===7){n(y,_.sibling),b=i(_,x.props.children),b.return=y,y=b;break e}}else if(_.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Il&&Z3(E)===_.type){n(y,_.sibling),b=i(_,x.props),b.ref=kp(y,_,x),b.return=y,y=b;break e}n(y,_);break}else t(y,_);_=_.sibling}x.type===yf?(b=Bu(x.props.children,y.mode,S,x.key),b.return=y,y=b):(S=ox(x.type,x.key,x.props,null,y.mode,S),S.ref=kp(y,b,x),S.return=y,y=S)}return a(y);case gf:e:{for(_=x.key;b!==null;){if(b.key===_)if(b.tag===4&&b.stateNode.containerInfo===x.containerInfo&&b.stateNode.implementation===x.implementation){n(y,b.sibling),b=i(b,x.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else t(y,b);b=b.sibling}b=T_(x,y.mode,S),b.return=y,y=b}return a(y);case Il:return _=x._init,v(y,b,_(x._payload),S)}if(rm(x))return m(y,b,x,S);if(Sp(x))return g(y,b,x,S);Ly(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,b!==null&&b.tag===6?(n(y,b.sibling),b=i(b,x),b.return=y,y=b):(n(y,b),b=N_(x,y.mode,S),b.return=y,y=b),a(y)):n(y,b)}return v}var sh=$U(!0),UU=$U(!1),Vx=Dc(null),Wx=null,Nf=null,vj=null;function xj(){vj=Nf=Wx=null}function bj(e){var t=Vx.current;an(Vx),e._currentValue=t}function EC(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Uf(e,t){Wx=e,vj=Nf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Pi=!0),e.firstContext=null)}function Ws(e){var t=e._currentValue;if(vj!==e)if(e={context:e,memoizedValue:t,next:null},Nf===null){if(Wx===null)throw Error(Ne(308));Nf=e,Wx.dependencies={lanes:0,firstContext:e}}else Nf=Nf.next=e;return t}var Eu=null;function wj(e){Eu===null?Eu=[e]:Eu.push(e)}function zU(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,wj(t)):(n.next=i.next,i.next=n),t.interleaved=n,Yo(e,r)}function Yo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Dl=!1;function Ej(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function HU(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $o(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ic(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,xt&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Yo(e,n)}return i=r.interleaved,i===null?(t.next=t,wj(r)):(t.next=i.next,i.next=t),r.interleaved=t,Yo(e,n)}function tx(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,oj(e,n)}}function eR(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qx(e,t,n,r){var i=e.updateQueue;Dl=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;a=0,d=u=l=null,o=s;do{var h=o.lane,p=o.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,g=o;switch(h=t,p=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){f=m.call(p,f,h);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,h=typeof m=="function"?m.call(p,f,h):m,h==null)break e;f=wn({},f,h);break e;case 2:Dl=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=p,l=f):d=d.next=p,a|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);ad|=a,e.lanes=a,e.memoizedState=f}}function tR(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ne(191,i));i.call(r)}}}var x0={},Ja=Dc(x0),hg=Dc(x0),pg=Dc(x0);function Su(e){if(e===x0)throw Error(Ne(174));return e}function Sj(e,t){switch(Qt(pg,t),Qt(hg,e),Qt(Ja,x0),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:nC(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=nC(t,e)}an(Ja),Qt(Ja,t)}function ah(){an(Ja),an(hg),an(pg)}function VU(e){Su(pg.current);var t=Su(Ja.current),n=nC(t,e.type);t!==n&&(Qt(hg,e),Qt(Ja,n))}function _j(e){hg.current===e&&(an(Ja),an(hg))}var yn=Dc(0);function Kx(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var x_=[];function Nj(){for(var e=0;e<x_.length;e++)x_[e]._workInProgressVersionPrimary=null;x_.length=0}var nx=ll.ReactCurrentDispatcher,b_=ll.ReactCurrentBatchConfig,sd=0,xn=null,rr=null,pr=null,Gx=!1,wm=!1,mg=0,Cle=0;function Hr(){throw Error(Ne(321))}function Tj(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!wa(e[n],t[n]))return!1;return!0}function Cj(e,t,n,r,i,s){if(sd=s,xn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,nx.current=e===null||e.memoizedState===null?Ole:Ple,e=n(r,i),wm){s=0;do{if(wm=!1,mg=0,25<=s)throw Error(Ne(301));s+=1,pr=rr=null,t.updateQueue=null,nx.current=Ile,e=n(r,i)}while(wm)}if(nx.current=Yx,t=rr!==null&&rr.next!==null,sd=0,pr=rr=xn=null,Gx=!1,t)throw Error(Ne(300));return e}function kj(){var e=mg!==0;return mg=0,e}function Ba(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pr===null?xn.memoizedState=pr=e:pr=pr.next=e,pr}function qs(){if(rr===null){var e=xn.alternate;e=e!==null?e.memoizedState:null}else e=rr.next;var t=pr===null?xn.memoizedState:pr.next;if(t!==null)pr=t,rr=e;else{if(e===null)throw Error(Ne(310));rr=e,e={memoizedState:rr.memoizedState,baseState:rr.baseState,baseQueue:rr.baseQueue,queue:rr.queue,next:null},pr===null?xn.memoizedState=pr=e:pr=pr.next=e}return pr}function gg(e,t){return typeof t=="function"?t(e):t}function w_(e){var t=qs(),n=t.queue;if(n===null)throw Error(Ne(311));n.lastRenderedReducer=e;var r=rr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,u=s;do{var d=u.lane;if((sd&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=f,a=r):l=l.next=f,xn.lanes|=d,ad|=d}u=u.next}while(u!==null&&u!==s);l===null?a=r:l.next=o,wa(r,t.memoizedState)||(Pi=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,xn.lanes|=s,ad|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function E_(e){var t=qs(),n=t.queue;if(n===null)throw Error(Ne(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);wa(s,t.memoizedState)||(Pi=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function WU(){}function qU(e,t){var n=xn,r=qs(),i=t(),s=!wa(r.memoizedState,i);if(s&&(r.memoizedState=i,Pi=!0),r=r.queue,Aj(YU.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||pr!==null&&pr.memoizedState.tag&1){if(n.flags|=2048,yg(9,GU.bind(null,n,r,i,t),void 0,null),br===null)throw Error(Ne(349));sd&30||KU(n,t,i)}return i}function KU(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=xn.updateQueue,t===null?(t={lastEffect:null,stores:null},xn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function GU(e,t,n,r){t.value=n,t.getSnapshot=r,XU(t)&&QU(e)}function YU(e,t,n){return n(function(){XU(t)&&QU(e)})}function XU(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wa(e,n)}catch{return!0}}function QU(e){var t=Yo(e,1);t!==null&&va(t,e,1,-1)}function nR(e){var t=Ba();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gg,lastRenderedState:e},t.queue=e,e=e.dispatch=jle.bind(null,xn,e),[t.memoizedState,e]}function yg(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=xn.updateQueue,t===null?(t={lastEffect:null,stores:null},xn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function JU(){return qs().memoizedState}function rx(e,t,n,r){var i=Ba();xn.flags|=e,i.memoizedState=yg(1|t,n,void 0,r===void 0?null:r)}function Tw(e,t,n,r){var i=qs();r=r===void 0?null:r;var s=void 0;if(rr!==null){var a=rr.memoizedState;if(s=a.destroy,r!==null&&Tj(r,a.deps)){i.memoizedState=yg(t,n,s,r);return}}xn.flags|=e,i.memoizedState=yg(1|t,n,s,r)}function rR(e,t){return rx(8390656,8,e,t)}function Aj(e,t){return Tw(2048,8,e,t)}function ZU(e,t){return Tw(4,2,e,t)}function ez(e,t){return Tw(4,4,e,t)}function tz(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nz(e,t,n){return n=n!=null?n.concat([e]):null,Tw(4,4,tz.bind(null,t,e),n)}function jj(){}function rz(e,t){var n=qs();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Tj(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function iz(e,t){var n=qs();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Tj(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function sz(e,t,n){return sd&21?(wa(n,t)||(n=uU(),xn.lanes|=n,ad|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Pi=!0),e.memoizedState=n)}function kle(e,t){var n=Mt;Mt=n!==0&&4>n?n:4,e(!0);var r=b_.transition;b_.transition={};try{e(!1),t()}finally{Mt=n,b_.transition=r}}function az(){return qs().memoizedState}function Ale(e,t,n){var r=ac(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},oz(e))lz(t,n);else if(n=zU(e,t,n,r),n!==null){var i=yi();va(n,e,r,i),cz(n,t,r)}}function jle(e,t,n){var r=ac(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(oz(e))lz(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,wa(o,a)){var l=t.interleaved;l===null?(i.next=i,wj(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=zU(e,t,i,r),n!==null&&(i=yi(),va(n,e,r,i),cz(n,t,r))}}function oz(e){var t=e.alternate;return e===xn||t!==null&&t===xn}function lz(e,t){wm=Gx=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function cz(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,oj(e,n)}}var Yx={readContext:Ws,useCallback:Hr,useContext:Hr,useEffect:Hr,useImperativeHandle:Hr,useInsertionEffect:Hr,useLayoutEffect:Hr,useMemo:Hr,useReducer:Hr,useRef:Hr,useState:Hr,useDebugValue:Hr,useDeferredValue:Hr,useTransition:Hr,useMutableSource:Hr,useSyncExternalStore:Hr,useId:Hr,unstable_isNewReconciler:!1},Ole={readContext:Ws,useCallback:function(e,t){return Ba().memoizedState=[e,t===void 0?null:t],e},useContext:Ws,useEffect:rR,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,rx(4194308,4,tz.bind(null,t,e),n)},useLayoutEffect:function(e,t){return rx(4194308,4,e,t)},useInsertionEffect:function(e,t){return rx(4,2,e,t)},useMemo:function(e,t){var n=Ba();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ba();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ale.bind(null,xn,e),[r.memoizedState,e]},useRef:function(e){var t=Ba();return e={current:e},t.memoizedState=e},useState:nR,useDebugValue:jj,useDeferredValue:function(e){return Ba().memoizedState=e},useTransition:function(){var e=nR(!1),t=e[0];return e=kle.bind(null,e[1]),Ba().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=xn,i=Ba();if(fn){if(n===void 0)throw Error(Ne(407));n=n()}else{if(n=t(),br===null)throw Error(Ne(349));sd&30||KU(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,rR(YU.bind(null,r,s,e),[e]),r.flags|=2048,yg(9,GU.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Ba(),t=br.identifierPrefix;if(fn){var n=Ro,r=Mo;n=(r&~(1<<32-ya(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=mg++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Cle++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ple={readContext:Ws,useCallback:rz,useContext:Ws,useEffect:Aj,useImperativeHandle:nz,useInsertionEffect:ZU,useLayoutEffect:ez,useMemo:iz,useReducer:w_,useRef:JU,useState:function(){return w_(gg)},useDebugValue:jj,useDeferredValue:function(e){var t=qs();return sz(t,rr.memoizedState,e)},useTransition:function(){var e=w_(gg)[0],t=qs().memoizedState;return[e,t]},useMutableSource:WU,useSyncExternalStore:qU,useId:az,unstable_isNewReconciler:!1},Ile={readContext:Ws,useCallback:rz,useContext:Ws,useEffect:Aj,useImperativeHandle:nz,useInsertionEffect:ZU,useLayoutEffect:ez,useMemo:iz,useReducer:E_,useRef:JU,useState:function(){return E_(gg)},useDebugValue:jj,useDeferredValue:function(e){var t=qs();return rr===null?t.memoizedState=e:sz(t,rr.memoizedState,e)},useTransition:function(){var e=E_(gg)[0],t=qs().memoizedState;return[e,t]},useMutableSource:WU,useSyncExternalStore:qU,useId:az,unstable_isNewReconciler:!1};function aa(e,t){if(e&&e.defaultProps){t=wn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function SC(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:wn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Cw={isMounted:function(e){return(e=e._reactInternals)?jd(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=yi(),i=ac(e),s=$o(r,i);s.payload=t,n!=null&&(s.callback=n),t=ic(e,s,i),t!==null&&(va(t,e,i,r),tx(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=yi(),i=ac(e),s=$o(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=ic(e,s,i),t!==null&&(va(t,e,i,r),tx(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=yi(),r=ac(e),i=$o(n,r);i.tag=2,t!=null&&(i.callback=t),t=ic(e,i,r),t!==null&&(va(t,e,r,n),tx(t,e,r))}};function iR(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!cg(n,r)||!cg(i,s):!0}function uz(e,t,n){var r=!1,i=wc,s=t.contextType;return typeof s=="object"&&s!==null?s=Ws(s):(i=Li(t)?rd:ei.current,r=t.contextTypes,s=(r=r!=null)?rh(e,i):wc),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Cw,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function sR(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Cw.enqueueReplaceState(t,t.state,null)}function _C(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ej(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Ws(s):(s=Li(t)?rd:ei.current,i.context=rh(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(SC(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Cw.enqueueReplaceState(i,i.state,null),qx(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function oh(e,t){try{var n="",r=t;do n+=ooe(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function S_(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function NC(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Dle=typeof WeakMap=="function"?WeakMap:Map;function dz(e,t,n){n=$o(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Qx||(Qx=!0,MC=r),NC(e,t)},n}function fz(e,t,n){n=$o(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){NC(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){NC(e,t),typeof r!="function"&&(sc===null?sc=new Set([this]):sc.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function aR(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Dle;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Gle.bind(null,e,t,n),t.then(e,e))}function oR(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function lR(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=$o(-1,1),t.tag=2,ic(n,t,1))),n.lanes|=1),e)}var Mle=ll.ReactCurrentOwner,Pi=!1;function hi(e,t,n,r){t.child=e===null?UU(t,null,n,r):sh(t,e.child,n,r)}function cR(e,t,n,r,i){n=n.render;var s=t.ref;return Uf(t,i),r=Cj(e,t,n,r,s,i),n=kj(),e!==null&&!Pi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xo(e,t,i)):(fn&&n&&mj(t),t.flags|=1,hi(e,t,r,i),t.child)}function uR(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!Fj(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,hz(e,t,s,r,i)):(e=ox(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:cg,n(a,r)&&e.ref===t.ref)return Xo(e,t,i)}return t.flags|=1,e=oc(s,r),e.ref=t.ref,e.return=t,t.child=e}function hz(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(cg(s,r)&&e.ref===t.ref)if(Pi=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Pi=!0);else return t.lanes=e.lanes,Xo(e,t,i)}return TC(e,t,n,r,i)}function pz(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qt(Cf,Yi),Yi|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Qt(Cf,Yi),Yi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Qt(Cf,Yi),Yi|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Qt(Cf,Yi),Yi|=r;return hi(e,t,i,n),t.child}function mz(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function TC(e,t,n,r,i){var s=Li(n)?rd:ei.current;return s=rh(t,s),Uf(t,i),n=Cj(e,t,n,r,s,i),r=kj(),e!==null&&!Pi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xo(e,t,i)):(fn&&r&&mj(t),t.flags|=1,hi(e,t,n,i),t.child)}function dR(e,t,n,r,i){if(Li(n)){var s=!0;Ux(t)}else s=!1;if(Uf(t,i),t.stateNode===null)ix(e,t),uz(t,n,r),_C(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ws(u):(u=Li(n)?rd:ei.current,u=rh(t,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==u)&&sR(t,a,r,u),Dl=!1;var h=t.memoizedState;a.state=h,qx(t,r,a,i),l=t.memoizedState,o!==r||h!==l||Ri.current||Dl?(typeof d=="function"&&(SC(t,n,d,r),l=t.memoizedState),(o=Dl||iR(t,n,o,r,h,l,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,HU(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:aa(t.type,o),a.props=u,f=t.pendingProps,h=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ws(l):(l=Li(n)?rd:ei.current,l=rh(t,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||h!==l)&&sR(t,a,r,l),Dl=!1,h=t.memoizedState,a.state=h,qx(t,r,a,i);var m=t.memoizedState;o!==f||h!==m||Ri.current||Dl?(typeof p=="function"&&(SC(t,n,p,r),m=t.memoizedState),(u=Dl||iR(t,n,u,r,h,m,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,m,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return CC(e,t,n,r,s,i)}function CC(e,t,n,r,i,s){mz(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&X3(t,n,!1),Xo(e,t,s);r=t.stateNode,Mle.current=t;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=sh(t,e.child,null,s),t.child=sh(t,null,o,s)):hi(e,t,o,s),t.memoizedState=r.state,i&&X3(t,n,!0),t.child}function gz(e){var t=e.stateNode;t.pendingContext?Y3(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Y3(e,t.context,!1),Sj(e,t.containerInfo)}function fR(e,t,n,r,i){return ih(),yj(i),t.flags|=256,hi(e,t,n,r),t.child}var kC={dehydrated:null,treeContext:null,retryLane:0};function AC(e){return{baseLanes:e,cachePool:null,transitions:null}}function yz(e,t,n){var r=t.pendingProps,i=yn.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Qt(yn,i&1),e===null)return wC(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=jw(a,r,0,null),e=Bu(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=AC(n),t.memoizedState=kC,e):Oj(t,a));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Rle(e,t,a,r,o,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=oc(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=oc(o,s):(s=Bu(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?AC(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=kC,r}return s=e.child,e=s.sibling,r=oc(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Oj(e,t){return t=jw({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Fy(e,t,n,r){return r!==null&&yj(r),sh(t,e.child,null,n),e=Oj(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rle(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=S_(Error(Ne(422))),Fy(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=jw({mode:"visible",children:r.children},i,0,null),s=Bu(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&sh(t,e.child,null,a),t.child.memoizedState=AC(a),t.memoizedState=kC,s);if(!(t.mode&1))return Fy(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(Ne(419)),r=S_(s,r,void 0),Fy(e,t,a,r)}if(o=(a&e.childLanes)!==0,Pi||o){if(r=br,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Yo(e,i),va(r,e,i,-1))}return Lj(),r=S_(Error(Ne(421))),Fy(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Yle.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ns=rc(i.nextSibling),is=t,fn=!0,ca=null,e!==null&&(js[Os++]=Mo,js[Os++]=Ro,js[Os++]=id,Mo=e.id,Ro=e.overflow,id=t),t=Oj(t,r.children),t.flags|=4096,t)}function hR(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),EC(e.return,t,n)}function __(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function vz(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(hi(e,t,r.children,n),r=yn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hR(e,n,t);else if(e.tag===19)hR(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Qt(yn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Kx(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),__(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Kx(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}__(t,!0,n,null,s);break;case"together":__(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ix(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ad|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ne(153));if(t.child!==null){for(e=t.child,n=oc(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=oc(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Lle(e,t,n){switch(t.tag){case 3:gz(t),ih();break;case 5:VU(t);break;case 1:Li(t.type)&&Ux(t);break;case 4:Sj(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Qt(Vx,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Qt(yn,yn.current&1),t.flags|=128,null):n&t.child.childLanes?yz(e,t,n):(Qt(yn,yn.current&1),e=Xo(e,t,n),e!==null?e.sibling:null);Qt(yn,yn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return vz(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Qt(yn,yn.current),r)break;return null;case 22:case 23:return t.lanes=0,pz(e,t,n)}return Xo(e,t,n)}var xz,jC,bz,wz;xz=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jC=function(){};bz=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Su(Ja.current);var s=null;switch(n){case"input":i=JT(e,i),r=JT(e,r),s=[];break;case"select":i=wn({},i,{value:void 0}),r=wn({},r,{value:void 0}),s=[];break;case"textarea":i=tC(e,i),r=tC(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Bx)}rC(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ng.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ng.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&nn("scroll",e),s||o===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};wz=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ap(e,t){if(!fn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Vr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Fle(e,t,n){var r=t.pendingProps;switch(gj(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vr(t),null;case 1:return Li(t.type)&&$x(),Vr(t),null;case 3:return r=t.stateNode,ah(),an(Ri),an(ei),Nj(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ry(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ca!==null&&(FC(ca),ca=null))),jC(e,t),Vr(t),null;case 5:_j(t);var i=Su(pg.current);if(n=t.type,e!==null&&t.stateNode!=null)bz(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Ne(166));return Vr(t),null}if(e=Su(Ja.current),Ry(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[qa]=t,r[fg]=s,e=(t.mode&1)!==0,n){case"dialog":nn("cancel",r),nn("close",r);break;case"iframe":case"object":case"embed":nn("load",r);break;case"video":case"audio":for(i=0;i<sm.length;i++)nn(sm[i],r);break;case"source":nn("error",r);break;case"img":case"image":case"link":nn("error",r),nn("load",r);break;case"details":nn("toggle",r);break;case"input":E3(r,s),nn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},nn("invalid",r);break;case"textarea":_3(r,s),nn("invalid",r)}rC(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&My(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&My(r.textContent,o,e),i=["children",""+o]):ng.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&nn("scroll",r)}switch(n){case"input":Cy(r),S3(r,s,!0);break;case"textarea":Cy(r),N3(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Bx)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Y7(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[qa]=t,e[fg]=r,xz(e,t,!1,!1),t.stateNode=e;e:{switch(a=iC(n,r),n){case"dialog":nn("cancel",e),nn("close",e),i=r;break;case"iframe":case"object":case"embed":nn("load",e),i=r;break;case"video":case"audio":for(i=0;i<sm.length;i++)nn(sm[i],e);i=r;break;case"source":nn("error",e),i=r;break;case"img":case"image":case"link":nn("error",e),nn("load",e),i=r;break;case"details":nn("toggle",e),i=r;break;case"input":E3(e,r),i=JT(e,r),nn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=wn({},r,{value:void 0}),nn("invalid",e);break;case"textarea":_3(e,r),i=tC(e,r),nn("invalid",e);break;default:i=r}rC(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?J7(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&X7(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&rg(e,l):typeof l=="number"&&rg(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ng.hasOwnProperty(s)?l!=null&&s==="onScroll"&&nn("scroll",e):l!=null&&tj(e,s,l,a))}switch(n){case"input":Cy(e),S3(e,r,!1);break;case"textarea":Cy(e),N3(e);break;case"option":r.value!=null&&e.setAttribute("value",""+bc(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Lf(e,!!r.multiple,s,!1):r.defaultValue!=null&&Lf(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Bx)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Vr(t),null;case 6:if(e&&t.stateNode!=null)wz(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Ne(166));if(n=Su(pg.current),Su(Ja.current),Ry(t)){if(r=t.stateNode,n=t.memoizedProps,r[qa]=t,(s=r.nodeValue!==n)&&(e=is,e!==null))switch(e.tag){case 3:My(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&My(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qa]=t,t.stateNode=r}return Vr(t),null;case 13:if(an(yn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(fn&&ns!==null&&t.mode&1&&!(t.flags&128))BU(),ih(),t.flags|=98560,s=!1;else if(s=Ry(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(Ne(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ne(317));s[qa]=t}else ih(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Vr(t),s=!1}else ca!==null&&(FC(ca),ca=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||yn.current&1?sr===0&&(sr=3):Lj())),t.updateQueue!==null&&(t.flags|=4),Vr(t),null);case 4:return ah(),jC(e,t),e===null&&ug(t.stateNode.containerInfo),Vr(t),null;case 10:return bj(t.type._context),Vr(t),null;case 17:return Li(t.type)&&$x(),Vr(t),null;case 19:if(an(yn),s=t.memoizedState,s===null)return Vr(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)Ap(s,!1);else{if(sr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Kx(e),a!==null){for(t.flags|=128,Ap(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Qt(yn,yn.current&1|2),t.child}e=e.sibling}s.tail!==null&&$n()>lh&&(t.flags|=128,r=!0,Ap(s,!1),t.lanes=4194304)}else{if(!r)if(e=Kx(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ap(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!fn)return Vr(t),null}else 2*$n()-s.renderingStartTime>lh&&n!==1073741824&&(t.flags|=128,r=!0,Ap(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=$n(),t.sibling=null,n=yn.current,Qt(yn,r?n&1|2:n&1),t):(Vr(t),null);case 22:case 23:return Rj(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Yi&1073741824&&(Vr(t),t.subtreeFlags&6&&(t.flags|=8192)):Vr(t),null;case 24:return null;case 25:return null}throw Error(Ne(156,t.tag))}function Ble(e,t){switch(gj(t),t.tag){case 1:return Li(t.type)&&$x(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ah(),an(Ri),an(ei),Nj(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _j(t),null;case 13:if(an(yn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ne(340));ih()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return an(yn),null;case 4:return ah(),null;case 10:return bj(t.type._context),null;case 22:case 23:return Rj(),null;case 24:return null;default:return null}}var By=!1,Kr=!1,$le=typeof WeakSet=="function"?WeakSet:Set,Re=null;function Tf(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){kn(e,t,r)}else n.current=null}function OC(e,t,n){try{n()}catch(r){kn(e,t,r)}}var pR=!1;function Ule(e,t){if(pC=Rx,e=TU(),pj(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==n||i!==0&&f.nodeType!==3||(o=a+i),f!==s||r!==0&&f.nodeType!==3||(l=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++u===i&&(o=a),h===s&&++d===r&&(l=a),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(mC={focusedElem:e,selectionRange:n},Rx=!1,Re=t;Re!==null;)if(t=Re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Re=e;else for(;Re!==null;){t=Re;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:aa(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ne(163))}}catch(S){kn(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Re=e;break}Re=t.return}return m=pR,pR=!1,m}function Em(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&OC(t,n,s)}i=i.next}while(i!==r)}}function kw(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function PC(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ez(e){var t=e.alternate;t!==null&&(e.alternate=null,Ez(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[qa],delete t[fg],delete t[vC],delete t[Sle],delete t[_le])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Sz(e){return e.tag===5||e.tag===3||e.tag===4}function mR(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Sz(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function IC(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Bx));else if(r!==4&&(e=e.child,e!==null))for(IC(e,t,n),e=e.sibling;e!==null;)IC(e,t,n),e=e.sibling}function DC(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(DC(e,t,n),e=e.sibling;e!==null;)DC(e,t,n),e=e.sibling}var Pr=null,oa=!1;function xl(e,t,n){for(n=n.child;n!==null;)_z(e,t,n),n=n.sibling}function _z(e,t,n){if(Qa&&typeof Qa.onCommitFiberUnmount=="function")try{Qa.onCommitFiberUnmount(bw,n)}catch{}switch(n.tag){case 5:Kr||Tf(n,t);case 6:var r=Pr,i=oa;Pr=null,xl(e,t,n),Pr=r,oa=i,Pr!==null&&(oa?(e=Pr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Pr.removeChild(n.stateNode));break;case 18:Pr!==null&&(oa?(e=Pr,n=n.stateNode,e.nodeType===8?y_(e.parentNode,n):e.nodeType===1&&y_(e,n),og(e)):y_(Pr,n.stateNode));break;case 4:r=Pr,i=oa,Pr=n.stateNode.containerInfo,oa=!0,xl(e,t,n),Pr=r,oa=i;break;case 0:case 11:case 14:case 15:if(!Kr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&OC(n,t,a),i=i.next}while(i!==r)}xl(e,t,n);break;case 1:if(!Kr&&(Tf(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){kn(n,t,o)}xl(e,t,n);break;case 21:xl(e,t,n);break;case 22:n.mode&1?(Kr=(r=Kr)||n.memoizedState!==null,xl(e,t,n),Kr=r):xl(e,t,n);break;default:xl(e,t,n)}}function gR(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new $le),t.forEach(function(r){var i=Xle.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function na(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:Pr=o.stateNode,oa=!1;break e;case 3:Pr=o.stateNode.containerInfo,oa=!0;break e;case 4:Pr=o.stateNode.containerInfo,oa=!0;break e}o=o.return}if(Pr===null)throw Error(Ne(160));_z(s,a,i),Pr=null,oa=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){kn(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Nz(t,e),t=t.sibling}function Nz(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(na(t,e),La(e),r&4){try{Em(3,e,e.return),kw(3,e)}catch(g){kn(e,e.return,g)}try{Em(5,e,e.return)}catch(g){kn(e,e.return,g)}}break;case 1:na(t,e),La(e),r&512&&n!==null&&Tf(n,n.return);break;case 5:if(na(t,e),La(e),r&512&&n!==null&&Tf(n,n.return),e.flags&32){var i=e.stateNode;try{rg(i,"")}catch(g){kn(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&K7(i,s),iC(o,a);var u=iC(o,s);for(a=0;a<l.length;a+=2){var d=l[a],f=l[a+1];d==="style"?J7(i,f):d==="dangerouslySetInnerHTML"?X7(i,f):d==="children"?rg(i,f):tj(i,d,f,u)}switch(o){case"input":ZT(i,s);break;case"textarea":G7(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Lf(i,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?Lf(i,!!s.multiple,s.defaultValue,!0):Lf(i,!!s.multiple,s.multiple?[]:"",!1))}i[fg]=s}catch(g){kn(e,e.return,g)}}break;case 6:if(na(t,e),La(e),r&4){if(e.stateNode===null)throw Error(Ne(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){kn(e,e.return,g)}}break;case 3:if(na(t,e),La(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{og(t.containerInfo)}catch(g){kn(e,e.return,g)}break;case 4:na(t,e),La(e);break;case 13:na(t,e),La(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Dj=$n())),r&4&&gR(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Kr=(u=Kr)||d,na(t,e),Kr=u):na(t,e),La(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Re=e,d=e.child;d!==null;){for(f=Re=d;Re!==null;){switch(h=Re,p=h.child,h.tag){case 0:case 11:case 14:case 15:Em(4,h,h.return);break;case 1:Tf(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){kn(r,n,g)}}break;case 5:Tf(h,h.return);break;case 22:if(h.memoizedState!==null){vR(f);continue}}p!==null?(p.return=h,Re=p):vR(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=f.stateNode,l=f.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=Q7("display",a))}catch(g){kn(e,e.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){kn(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:na(t,e),La(e),r&4&&gR(e);break;case 21:break;default:na(t,e),La(e)}}function La(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Sz(n)){var r=n;break e}n=n.return}throw Error(Ne(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(rg(i,""),r.flags&=-33);var s=mR(e);DC(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=mR(e);IC(e,o,a);break;default:throw Error(Ne(161))}}catch(l){kn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zle(e,t,n){Re=e,Tz(e)}function Tz(e,t,n){for(var r=(e.mode&1)!==0;Re!==null;){var i=Re,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||By;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Kr;o=By;var u=Kr;if(By=a,(Kr=l)&&!u)for(Re=i;Re!==null;)a=Re,l=a.child,a.tag===22&&a.memoizedState!==null?xR(i):l!==null?(l.return=a,Re=l):xR(i);for(;s!==null;)Re=s,Tz(s),s=s.sibling;Re=i,By=o,Kr=u}yR(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Re=s):yR(e)}}function yR(e){for(;Re!==null;){var t=Re;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Kr||kw(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Kr)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:aa(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&tR(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}tR(t,a,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&og(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ne(163))}Kr||t.flags&512&&PC(t)}catch(h){kn(t,t.return,h)}}if(t===e){Re=null;break}if(n=t.sibling,n!==null){n.return=t.return,Re=n;break}Re=t.return}}function vR(e){for(;Re!==null;){var t=Re;if(t===e){Re=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Re=n;break}Re=t.return}}function xR(e){for(;Re!==null;){var t=Re;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{kw(4,t)}catch(l){kn(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){kn(t,i,l)}}var s=t.return;try{PC(t)}catch(l){kn(t,s,l)}break;case 5:var a=t.return;try{PC(t)}catch(l){kn(t,a,l)}}}catch(l){kn(t,t.return,l)}if(t===e){Re=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Re=o;break}Re=t.return}}var Hle=Math.ceil,Xx=ll.ReactCurrentDispatcher,Pj=ll.ReactCurrentOwner,Us=ll.ReactCurrentBatchConfig,xt=0,br=null,Kn=null,$r=0,Yi=0,Cf=Dc(0),sr=0,vg=null,ad=0,Aw=0,Ij=0,Sm=null,Ai=null,Dj=0,lh=1/0,ko=null,Qx=!1,MC=null,sc=null,$y=!1,Kl=null,Jx=0,_m=0,RC=null,sx=-1,ax=0;function yi(){return xt&6?$n():sx!==-1?sx:sx=$n()}function ac(e){return e.mode&1?xt&2&&$r!==0?$r&-$r:Tle.transition!==null?(ax===0&&(ax=uU()),ax):(e=Mt,e!==0||(e=window.event,e=e===void 0?16:yU(e.type)),e):1}function va(e,t,n,r){if(50<_m)throw _m=0,RC=null,Error(Ne(185));g0(e,n,r),(!(xt&2)||e!==br)&&(e===br&&(!(xt&2)&&(Aw|=n),sr===4&&$l(e,$r)),Fi(e,r),n===1&&xt===0&&!(t.mode&1)&&(lh=$n()+500,Nw&&Mc()))}function Fi(e,t){var n=e.callbackNode;Toe(e,t);var r=Mx(e,e===br?$r:0);if(r===0)n!==null&&k3(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&k3(n),t===1)e.tag===0?Nle(bR.bind(null,e)):RU(bR.bind(null,e)),wle(function(){!(xt&6)&&Mc()}),n=null;else{switch(dU(r)){case 1:n=aj;break;case 4:n=lU;break;case 16:n=Dx;break;case 536870912:n=cU;break;default:n=Dx}n=Dz(n,Cz.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Cz(e,t){if(sx=-1,ax=0,xt&6)throw Error(Ne(327));var n=e.callbackNode;if(zf()&&e.callbackNode!==n)return null;var r=Mx(e,e===br?$r:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Zx(e,r);else{t=r;var i=xt;xt|=2;var s=Az();(br!==e||$r!==t)&&(ko=null,lh=$n()+500,Fu(e,t));do try{qle();break}catch(o){kz(e,o)}while(!0);xj(),Xx.current=s,xt=i,Kn!==null?t=0:(br=null,$r=0,t=sr)}if(t!==0){if(t===2&&(i=cC(e),i!==0&&(r=i,t=LC(e,i))),t===1)throw n=vg,Fu(e,0),$l(e,r),Fi(e,$n()),n;if(t===6)$l(e,r);else{if(i=e.current.alternate,!(r&30)&&!Vle(i)&&(t=Zx(e,r),t===2&&(s=cC(e),s!==0&&(r=s,t=LC(e,s))),t===1))throw n=vg,Fu(e,0),$l(e,r),Fi(e,$n()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Ne(345));case 2:uu(e,Ai,ko);break;case 3:if($l(e,r),(r&130023424)===r&&(t=Dj+500-$n(),10<t)){if(Mx(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){yi(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=yC(uu.bind(null,e,Ai,ko),t);break}uu(e,Ai,ko);break;case 4:if($l(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ya(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=$n()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Hle(r/1960))-r,10<r){e.timeoutHandle=yC(uu.bind(null,e,Ai,ko),r);break}uu(e,Ai,ko);break;case 5:uu(e,Ai,ko);break;default:throw Error(Ne(329))}}}return Fi(e,$n()),e.callbackNode===n?Cz.bind(null,e):null}function LC(e,t){var n=Sm;return e.current.memoizedState.isDehydrated&&(Fu(e,t).flags|=256),e=Zx(e,t),e!==2&&(t=Ai,Ai=n,t!==null&&FC(t)),e}function FC(e){Ai===null?Ai=e:Ai.push.apply(Ai,e)}function Vle(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!wa(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $l(e,t){for(t&=~Ij,t&=~Aw,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ya(t),r=1<<n;e[n]=-1,t&=~r}}function bR(e){if(xt&6)throw Error(Ne(327));zf();var t=Mx(e,0);if(!(t&1))return Fi(e,$n()),null;var n=Zx(e,t);if(e.tag!==0&&n===2){var r=cC(e);r!==0&&(t=r,n=LC(e,r))}if(n===1)throw n=vg,Fu(e,0),$l(e,t),Fi(e,$n()),n;if(n===6)throw Error(Ne(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,uu(e,Ai,ko),Fi(e,$n()),null}function Mj(e,t){var n=xt;xt|=1;try{return e(t)}finally{xt=n,xt===0&&(lh=$n()+500,Nw&&Mc())}}function od(e){Kl!==null&&Kl.tag===0&&!(xt&6)&&zf();var t=xt;xt|=1;var n=Us.transition,r=Mt;try{if(Us.transition=null,Mt=1,e)return e()}finally{Mt=r,Us.transition=n,xt=t,!(xt&6)&&Mc()}}function Rj(){Yi=Cf.current,an(Cf)}function Fu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,ble(n)),Kn!==null)for(n=Kn.return;n!==null;){var r=n;switch(gj(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$x();break;case 3:ah(),an(Ri),an(ei),Nj();break;case 5:_j(r);break;case 4:ah();break;case 13:an(yn);break;case 19:an(yn);break;case 10:bj(r.type._context);break;case 22:case 23:Rj()}n=n.return}if(br=e,Kn=e=oc(e.current,null),$r=Yi=t,sr=0,vg=null,Ij=Aw=ad=0,Ai=Sm=null,Eu!==null){for(t=0;t<Eu.length;t++)if(n=Eu[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Eu=null}return e}function kz(e,t){do{var n=Kn;try{if(xj(),nx.current=Yx,Gx){for(var r=xn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Gx=!1}if(sd=0,pr=rr=xn=null,wm=!1,mg=0,Pj.current=null,n===null||n.return===null){sr=1,vg=t,Kn=null;break}e:{var s=e,a=n.return,o=n,l=t;if(t=$r,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=oR(a);if(p!==null){p.flags&=-257,lR(p,a,o,s,t),p.mode&1&&aR(s,u,t),t=p,l=u;var m=t.updateQueue;if(m===null){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}else{if(!(t&1)){aR(s,u,t),Lj();break e}l=Error(Ne(426))}}else if(fn&&o.mode&1){var v=oR(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),lR(v,a,o,s,t),yj(oh(l,o));break e}}s=l=oh(l,o),sr!==4&&(sr=2),Sm===null?Sm=[s]:Sm.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=dz(s,l,t);eR(s,y);break e;case 1:o=l;var b=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(sc===null||!sc.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t;var S=fz(s,o,t);eR(s,S);break e}}s=s.return}while(s!==null)}Oz(n)}catch(E){t=E,Kn===n&&n!==null&&(Kn=n=n.return);continue}break}while(!0)}function Az(){var e=Xx.current;return Xx.current=Yx,e===null?Yx:e}function Lj(){(sr===0||sr===3||sr===2)&&(sr=4),br===null||!(ad&268435455)&&!(Aw&268435455)||$l(br,$r)}function Zx(e,t){var n=xt;xt|=2;var r=Az();(br!==e||$r!==t)&&(ko=null,Fu(e,t));do try{Wle();break}catch(i){kz(e,i)}while(!0);if(xj(),xt=n,Xx.current=r,Kn!==null)throw Error(Ne(261));return br=null,$r=0,sr}function Wle(){for(;Kn!==null;)jz(Kn)}function qle(){for(;Kn!==null&&!yoe();)jz(Kn)}function jz(e){var t=Iz(e.alternate,e,Yi);e.memoizedProps=e.pendingProps,t===null?Oz(e):Kn=t,Pj.current=null}function Oz(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ble(n,t),n!==null){n.flags&=32767,Kn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{sr=6,Kn=null;return}}else if(n=Fle(n,t,Yi),n!==null){Kn=n;return}if(t=t.sibling,t!==null){Kn=t;return}Kn=t=e}while(t!==null);sr===0&&(sr=5)}function uu(e,t,n){var r=Mt,i=Us.transition;try{Us.transition=null,Mt=1,Kle(e,t,n,r)}finally{Us.transition=i,Mt=r}return null}function Kle(e,t,n,r){do zf();while(Kl!==null);if(xt&6)throw Error(Ne(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ne(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Coe(e,s),e===br&&(Kn=br=null,$r=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$y||($y=!0,Dz(Dx,function(){return zf(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Us.transition,Us.transition=null;var a=Mt;Mt=1;var o=xt;xt|=4,Pj.current=null,Ule(e,n),Nz(n,e),hle(mC),Rx=!!pC,mC=pC=null,e.current=n,zle(n),voe(),xt=o,Mt=a,Us.transition=s}else e.current=n;if($y&&($y=!1,Kl=e,Jx=i),s=e.pendingLanes,s===0&&(sc=null),woe(n.stateNode),Fi(e,$n()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Qx)throw Qx=!1,e=MC,MC=null,e;return Jx&1&&e.tag!==0&&zf(),s=e.pendingLanes,s&1?e===RC?_m++:(_m=0,RC=e):_m=0,Mc(),null}function zf(){if(Kl!==null){var e=dU(Jx),t=Us.transition,n=Mt;try{if(Us.transition=null,Mt=16>e?16:e,Kl===null)var r=!1;else{if(e=Kl,Kl=null,Jx=0,xt&6)throw Error(Ne(331));var i=xt;for(xt|=4,Re=e.current;Re!==null;){var s=Re,a=s.child;if(Re.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(Re=u;Re!==null;){var d=Re;switch(d.tag){case 0:case 11:case 15:Em(8,d,s)}var f=d.child;if(f!==null)f.return=d,Re=f;else for(;Re!==null;){d=Re;var h=d.sibling,p=d.return;if(Ez(d),d===u){Re=null;break}if(h!==null){h.return=p,Re=h;break}Re=p}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}Re=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Re=a;else e:for(;Re!==null;){if(s=Re,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Em(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Re=y;break e}Re=s.return}}var b=e.current;for(Re=b;Re!==null;){a=Re;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,Re=x;else e:for(a=b;Re!==null;){if(o=Re,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:kw(9,o)}}catch(E){kn(o,o.return,E)}if(o===a){Re=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,Re=S;break e}Re=o.return}}if(xt=i,Mc(),Qa&&typeof Qa.onPostCommitFiberRoot=="function")try{Qa.onPostCommitFiberRoot(bw,e)}catch{}r=!0}return r}finally{Mt=n,Us.transition=t}}return!1}function wR(e,t,n){t=oh(n,t),t=dz(e,t,1),e=ic(e,t,1),t=yi(),e!==null&&(g0(e,1,t),Fi(e,t))}function kn(e,t,n){if(e.tag===3)wR(e,e,n);else for(;t!==null;){if(t.tag===3){wR(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(sc===null||!sc.has(r))){e=oh(n,e),e=fz(t,e,1),t=ic(t,e,1),e=yi(),t!==null&&(g0(t,1,e),Fi(t,e));break}}t=t.return}}function Gle(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=yi(),e.pingedLanes|=e.suspendedLanes&n,br===e&&($r&n)===n&&(sr===4||sr===3&&($r&130023424)===$r&&500>$n()-Dj?Fu(e,0):Ij|=n),Fi(e,t)}function Pz(e,t){t===0&&(e.mode&1?(t=jy,jy<<=1,!(jy&130023424)&&(jy=4194304)):t=1);var n=yi();e=Yo(e,t),e!==null&&(g0(e,t,n),Fi(e,n))}function Yle(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Pz(e,n)}function Xle(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Ne(314))}r!==null&&r.delete(t),Pz(e,n)}var Iz;Iz=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ri.current)Pi=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Pi=!1,Lle(e,t,n);Pi=!!(e.flags&131072)}else Pi=!1,fn&&t.flags&1048576&&LU(t,Hx,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ix(e,t),e=t.pendingProps;var i=rh(t,ei.current);Uf(t,n),i=Cj(null,t,r,e,i,n);var s=kj();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Li(r)?(s=!0,Ux(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ej(t),i.updater=Cw,t.stateNode=i,i._reactInternals=t,_C(t,r,e,n),t=CC(null,t,r,!0,s,n)):(t.tag=0,fn&&s&&mj(t),hi(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ix(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Jle(r),e=aa(r,e),i){case 0:t=TC(null,t,r,e,n);break e;case 1:t=dR(null,t,r,e,n);break e;case 11:t=cR(null,t,r,e,n);break e;case 14:t=uR(null,t,r,aa(r.type,e),n);break e}throw Error(Ne(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:aa(r,i),TC(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:aa(r,i),dR(e,t,r,i,n);case 3:e:{if(gz(t),e===null)throw Error(Ne(387));r=t.pendingProps,s=t.memoizedState,i=s.element,HU(e,t),qx(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=oh(Error(Ne(423)),t),t=fR(e,t,r,n,i);break e}else if(r!==i){i=oh(Error(Ne(424)),t),t=fR(e,t,r,n,i);break e}else for(ns=rc(t.stateNode.containerInfo.firstChild),is=t,fn=!0,ca=null,n=UU(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ih(),r===i){t=Xo(e,t,n);break e}hi(e,t,r,n)}t=t.child}return t;case 5:return VU(t),e===null&&wC(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,gC(r,i)?a=null:s!==null&&gC(r,s)&&(t.flags|=32),mz(e,t),hi(e,t,a,n),t.child;case 6:return e===null&&wC(t),null;case 13:return yz(e,t,n);case 4:return Sj(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=sh(t,null,r,n):hi(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:aa(r,i),cR(e,t,r,i,n);case 7:return hi(e,t,t.pendingProps,n),t.child;case 8:return hi(e,t,t.pendingProps.children,n),t.child;case 12:return hi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Qt(Vx,r._currentValue),r._currentValue=a,s!==null)if(wa(s.value,a)){if(s.children===i.children&&!Ri.current){t=Xo(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=$o(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),EC(s.return,n,t),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Ne(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),EC(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}hi(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Uf(t,n),i=Ws(i),r=r(i),t.flags|=1,hi(e,t,r,n),t.child;case 14:return r=t.type,i=aa(r,t.pendingProps),i=aa(r.type,i),uR(e,t,r,i,n);case 15:return hz(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:aa(r,i),ix(e,t),t.tag=1,Li(r)?(e=!0,Ux(t)):e=!1,Uf(t,n),uz(t,r,i),_C(t,r,i,n),CC(null,t,r,!0,e,n);case 19:return vz(e,t,n);case 22:return pz(e,t,n)}throw Error(Ne(156,t.tag))};function Dz(e,t){return oU(e,t)}function Qle(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rs(e,t,n,r){return new Qle(e,t,n,r)}function Fj(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Jle(e){if(typeof e=="function")return Fj(e)?1:0;if(e!=null){if(e=e.$$typeof,e===rj)return 11;if(e===ij)return 14}return 2}function oc(e,t){var n=e.alternate;return n===null?(n=Rs(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ox(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")Fj(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case yf:return Bu(n.children,i,s,t);case nj:a=8,i|=8;break;case GT:return e=Rs(12,n,t,i|2),e.elementType=GT,e.lanes=s,e;case YT:return e=Rs(13,n,t,i),e.elementType=YT,e.lanes=s,e;case XT:return e=Rs(19,n,t,i),e.elementType=XT,e.lanes=s,e;case V7:return jw(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case z7:a=10;break e;case H7:a=9;break e;case rj:a=11;break e;case ij:a=14;break e;case Il:a=16,r=null;break e}throw Error(Ne(130,e==null?e:typeof e,""))}return t=Rs(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Bu(e,t,n,r){return e=Rs(7,e,r,t),e.lanes=n,e}function jw(e,t,n,r){return e=Rs(22,e,r,t),e.elementType=V7,e.lanes=n,e.stateNode={isHidden:!1},e}function N_(e,t,n){return e=Rs(6,e,null,t),e.lanes=n,e}function T_(e,t,n){return t=Rs(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zle(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=a_(0),this.expirationTimes=a_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=a_(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bj(e,t,n,r,i,s,a,o,l){return e=new Zle(e,t,n,o,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Rs(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ej(s),e}function ece(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gf,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Mz(e){if(!e)return wc;e=e._reactInternals;e:{if(jd(e)!==e||e.tag!==1)throw Error(Ne(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Li(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ne(171))}if(e.tag===1){var n=e.type;if(Li(n))return MU(e,n,t)}return t}function Rz(e,t,n,r,i,s,a,o,l){return e=Bj(n,r,!0,e,i,s,a,o,l),e.context=Mz(null),n=e.current,r=yi(),i=ac(n),s=$o(r,i),s.callback=t??null,ic(n,s,i),e.current.lanes=i,g0(e,i,r),Fi(e,r),e}function Ow(e,t,n,r){var i=t.current,s=yi(),a=ac(i);return n=Mz(n),t.context===null?t.context=n:t.pendingContext=n,t=$o(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ic(i,t,a),e!==null&&(va(e,i,a,s),tx(e,i,a)),a}function eb(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ER(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function $j(e,t){ER(e,t),(e=e.alternate)&&ER(e,t)}function tce(){return null}var Lz=typeof reportError=="function"?reportError:function(e){console.error(e)};function Uj(e){this._internalRoot=e}Pw.prototype.render=Uj.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ne(409));Ow(e,t,null,null)};Pw.prototype.unmount=Uj.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;od(function(){Ow(null,e,null,null)}),t[Go]=null}};function Pw(e){this._internalRoot=e}Pw.prototype.unstable_scheduleHydration=function(e){if(e){var t=pU();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Bl.length&&t!==0&&t<Bl[n].priority;n++);Bl.splice(n,0,e),n===0&&gU(e)}};function zj(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Iw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function SR(){}function nce(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=eb(a);s.call(u)}}var a=Rz(t,r,e,0,null,!1,!1,"",SR);return e._reactRootContainer=a,e[Go]=a.current,ug(e.nodeType===8?e.parentNode:e),od(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=eb(l);o.call(u)}}var l=Bj(e,0,!1,null,null,!1,!1,"",SR);return e._reactRootContainer=l,e[Go]=l.current,ug(e.nodeType===8?e.parentNode:e),od(function(){Ow(t,l,n,r)}),l}function Dw(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=eb(a);o.call(l)}}Ow(t,a,e,i)}else a=nce(n,t,e,i,r);return eb(a)}fU=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=im(t.pendingLanes);n!==0&&(oj(t,n|1),Fi(t,$n()),!(xt&6)&&(lh=$n()+500,Mc()))}break;case 13:od(function(){var r=Yo(e,1);if(r!==null){var i=yi();va(r,e,1,i)}}),$j(e,1)}};lj=function(e){if(e.tag===13){var t=Yo(e,134217728);if(t!==null){var n=yi();va(t,e,134217728,n)}$j(e,134217728)}};hU=function(e){if(e.tag===13){var t=ac(e),n=Yo(e,t);if(n!==null){var r=yi();va(n,e,t,r)}$j(e,t)}};pU=function(){return Mt};mU=function(e,t){var n=Mt;try{return Mt=e,t()}finally{Mt=n}};aC=function(e,t,n){switch(t){case"input":if(ZT(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_w(r);if(!i)throw Error(Ne(90));q7(r),ZT(r,i)}}}break;case"textarea":G7(e,n);break;case"select":t=n.value,t!=null&&Lf(e,!!n.multiple,t,!1)}};tU=Mj;nU=od;var rce={usingClientEntryPoint:!1,Events:[v0,wf,_w,Z7,eU,Mj]},jp={findFiberByHostInstance:wu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ice={bundleType:jp.bundleType,version:jp.version,rendererPackageName:jp.rendererPackageName,rendererConfig:jp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ll.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=sU(e),e===null?null:e.stateNode},findFiberByHostInstance:jp.findFiberByHostInstance||tce,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uy.isDisabled&&Uy.supportsFiber)try{bw=Uy.inject(ice),Qa=Uy}catch{}}ms.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rce;ms.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zj(t))throw Error(Ne(200));return ece(e,t,null,n)};ms.createRoot=function(e,t){if(!zj(e))throw Error(Ne(299));var n=!1,r="",i=Lz;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Bj(e,1,!1,null,null,n,!1,r,i),e[Go]=t.current,ug(e.nodeType===8?e.parentNode:e),new Uj(t)};ms.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ne(188)):(e=Object.keys(e).join(","),Error(Ne(268,e)));return e=sU(t),e=e===null?null:e.stateNode,e};ms.flushSync=function(e){return od(e)};ms.hydrate=function(e,t,n){if(!Iw(t))throw Error(Ne(200));return Dw(null,e,t,!0,n)};ms.hydrateRoot=function(e,t,n){if(!zj(e))throw Error(Ne(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=Lz;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Rz(t,null,e,1,n??null,i,!1,s,a),e[Go]=t.current,ug(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Pw(t)};ms.render=function(e,t,n){if(!Iw(t))throw Error(Ne(200));return Dw(null,e,t,!1,n)};ms.unmountComponentAtNode=function(e){if(!Iw(e))throw Error(Ne(40));return e._reactRootContainer?(od(function(){Dw(null,null,e,!1,function(){e._reactRootContainer=null,e[Go]=null})}),!0):!1};ms.unstable_batchedUpdates=Mj;ms.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Iw(n))throw Error(Ne(200));if(e==null||e._reactInternals===void 0)throw Error(Ne(38));return Dw(e,t,n,!1,r)};ms.version="18.3.1-next-f1338f8080-20240426";function Fz(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fz)}catch(e){console.error(e)}}Fz(),F7.exports=ms;var cl=F7.exports;const Hj=ii(cl);var Bz,_R=cl;Bz=_R.createRoot,_R.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xg(){return xg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xg.apply(this,arguments)}var Gl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Gl||(Gl={}));const NR="popstate";function sce(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:a,hash:o}=r.location;return BC("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:tb(i)}return oce(t,n,null,e)}function Dn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function $z(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ace(){return Math.random().toString(36).substr(2,8)}function TR(e,t){return{usr:e.state,key:e.key,idx:t}}function BC(e,t,n,r){return n===void 0&&(n=null),xg({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?zh(t):t,{state:n,key:t&&t.key||r||ace()})}function tb(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function zh(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function oce(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=Gl.Pop,l=null,u=d();u==null&&(u=0,a.replaceState(xg({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function f(){o=Gl.Pop;let v=d(),y=v==null?null:v-u;u=v,l&&l({action:o,location:g.location,delta:y})}function h(v,y){o=Gl.Push;let b=BC(g.location,v,y);u=d()+1;let x=TR(b,u),S=g.createHref(b);try{a.pushState(x,"",S)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(S)}s&&l&&l({action:o,location:g.location,delta:1})}function p(v,y){o=Gl.Replace;let b=BC(g.location,v,y);u=d();let x=TR(b,u),S=g.createHref(b);a.replaceState(x,"",S),s&&l&&l({action:o,location:g.location,delta:0})}function m(v){let y=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof v=="string"?v:tb(v);return b=b.replace(/ $/,"%20"),Dn(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let g={get action(){return o},get location(){return e(i,a)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(NR,f),l=v,()=>{i.removeEventListener(NR,f),l=null}},createHref(v){return t(i,v)},createURL:m,encodeLocation(v){let y=m(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:p,go(v){return a.go(v)}};return g}var CR;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(CR||(CR={}));function lce(e,t,n){return n===void 0&&(n="/"),cce(e,t,n)}function cce(e,t,n,r){let i=typeof t=="string"?zh(t):t,s=ch(i.pathname||"/",n);if(s==null)return null;let a=Uz(e);uce(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=wce(s);o=xce(a[l],u)}return o}function Uz(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(Dn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=lc([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(Dn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Uz(s.children,t,d,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:yce(u,s.index),routesMeta:d})};return e.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of zz(s.path))i(s,a,l)}),t}function zz(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=zz(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function uce(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:vce(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const dce=/^:[\w-]+$/,fce=3,hce=2,pce=1,mce=10,gce=-2,kR=e=>e==="*";function yce(e,t){let n=e.split("/"),r=n.length;return n.some(kR)&&(r+=gce),t&&(r+=hce),n.filter(i=>!kR(i)).reduce((i,s)=>i+(dce.test(s)?fce:s===""?pce:mce),r)}function vce(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function xce(e,t,n){let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,d=s==="/"?t:t.slice(s.length)||"/",f=$C({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),h=l.route;if(!f)return null;Object.assign(i,f.params),a.push({params:i,pathname:lc([s,f.pathname]),pathnameBase:Nce(lc([s,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(s=lc([s,f.pathnameBase]))}return a}function $C(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=bce(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,d,f)=>{let{paramName:h,isOptional:p}=d;if(h==="*"){let g=o[f]||"";a=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=o[f];return p&&!m?u[h]=void 0:u[h]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:e}}function bce(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),$z(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function wce(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return $z(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ch(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Ece(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?zh(e):e;return{pathname:n?n.startsWith("/")?n:Sce(n,t):t,search:Tce(r),hash:Cce(i)}}function Sce(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function C_(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _ce(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Hz(e,t){let n=_ce(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Vz(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=zh(e):(i=xg({},e),Dn(!i.pathname||!i.pathname.includes("?"),C_("?","pathname","search",i)),Dn(!i.pathname||!i.pathname.includes("#"),C_("#","pathname","hash",i)),Dn(!i.search||!i.search.includes("#"),C_("#","search","hash",i)));let s=e===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=n;else{let f=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}o=f>=0?t[f]:"/"}let l=Ece(i,o),u=a&&a!=="/"&&a.endsWith("/"),d=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const lc=e=>e.join("/").replace(/\/\/+/g,"/"),Nce=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Tce=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Cce=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function kce(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Wz=["post","put","patch","delete"];new Set(Wz);const Ace=["get",...Wz];new Set(Ace);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bg(){return bg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bg.apply(this,arguments)}const Mw=w.createContext(null),qz=w.createContext(null),Rc=w.createContext(null),Rw=w.createContext(null),Lc=w.createContext({outlet:null,matches:[],isDataRoute:!1}),Kz=w.createContext(null);function jce(e,t){let{relative:n}=t===void 0?{}:t;b0()||Dn(!1);let{basename:r,navigator:i}=w.useContext(Rc),{hash:s,pathname:a,search:o}=Lw(e,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:lc([r,a])),i.createHref({pathname:l,search:o,hash:s})}function b0(){return w.useContext(Rw)!=null}function w0(){return b0()||Dn(!1),w.useContext(Rw).location}function Gz(e){w.useContext(Rc).static||w.useLayoutEffect(e)}function Yz(){let{isDataRoute:e}=w.useContext(Lc);return e?Wce():Oce()}function Oce(){b0()||Dn(!1);let e=w.useContext(Mw),{basename:t,future:n,navigator:r}=w.useContext(Rc),{matches:i}=w.useContext(Lc),{pathname:s}=w0(),a=JSON.stringify(Hz(i,n.v7_relativeSplatPath)),o=w.useRef(!1);return Gz(()=>{o.current=!0}),w.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){r.go(u);return}let f=Vz(u,JSON.parse(a),s,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:lc([t,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[t,r,a,s,e])}const Pce=w.createContext(null);function Ice(e){let t=w.useContext(Lc).outlet;return t&&w.createElement(Pce.Provider,{value:e},t)}function Lw(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=w.useContext(Rc),{matches:i}=w.useContext(Lc),{pathname:s}=w0(),a=JSON.stringify(Hz(i,r.v7_relativeSplatPath));return w.useMemo(()=>Vz(e,JSON.parse(a),s,n==="path"),[e,a,s,n])}function Dce(e,t){return Mce(e,t)}function Mce(e,t,n,r){b0()||Dn(!1);let{navigator:i}=w.useContext(Rc),{matches:s}=w.useContext(Lc),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=w0(),d;if(t){var f;let v=typeof t=="string"?zh(t):t;l==="/"||(f=v.pathname)!=null&&f.startsWith(l)||Dn(!1),d=v}else d=u;let h=d.pathname||"/",p=h;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=lce(e,{pathname:p}),g=$ce(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:lc([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:lc([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n,r);return t&&g?w.createElement(Rw.Provider,{value:{location:bg({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Gl.Pop}},g):g}function Rce(){let e=Vce(),t=kce(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),n?w.createElement("pre",{style:i},n):null,null)}const Lce=w.createElement(Rce,null);class Fce extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?w.createElement(Lc.Provider,{value:this.props.routeContext},w.createElement(Kz.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Bce(e){let{routeContext:t,match:n,children:r}=e,i=w.useContext(Mw);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(Lc.Provider,{value:t},r)}function $ce(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=(i=n)==null?void 0:i.errors;if(o!=null){let d=a.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);d>=0||Dn(!1),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:p}=n,m=f.route.loader&&h[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||m){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,f,h)=>{let p,m=!1,g=null,v=null;n&&(p=o&&f.route.id?o[f.route.id]:void 0,g=f.route.errorElement||Lce,l&&(u<0&&h===0?(qce("route-fallback"),m=!0,v=null):u===h&&(m=!0,v=f.route.hydrateFallbackElement||null)));let y=t.concat(a.slice(0,h+1)),b=()=>{let x;return p?x=g:m?x=v:f.route.Component?x=w.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=d,w.createElement(Bce,{match:f,routeContext:{outlet:d,matches:y,isDataRoute:n!=null},children:x})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?w.createElement(Fce,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var Xz=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Xz||{}),Qz=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Qz||{});function Uce(e){let t=w.useContext(Mw);return t||Dn(!1),t}function zce(e){let t=w.useContext(qz);return t||Dn(!1),t}function Hce(e){let t=w.useContext(Lc);return t||Dn(!1),t}function Jz(e){let t=Hce(),n=t.matches[t.matches.length-1];return n.route.id||Dn(!1),n.route.id}function Vce(){var e;let t=w.useContext(Kz),n=zce(),r=Jz();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Wce(){let{router:e}=Uce(Xz.UseNavigateStable),t=Jz(Qz.UseNavigateStable),n=w.useRef(!1);return Gz(()=>{n.current=!0}),w.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,bg({fromRouteId:t},s)))},[e,t])}const AR={};function qce(e,t,n){AR[e]||(AR[e]=!0)}function Kce(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Gce(e){return Ice(e.context)}function Vi(e){Dn(!1)}function Yce(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Gl.Pop,navigator:s,static:a=!1,future:o}=e;b0()&&Dn(!1);let l=t.replace(/^\/*/,"/"),u=w.useMemo(()=>({basename:l,navigator:s,static:a,future:bg({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof r=="string"&&(r=zh(r));let{pathname:d="/",search:f="",hash:h="",state:p=null,key:m="default"}=r,g=w.useMemo(()=>{let v=ch(d,l);return v==null?null:{location:{pathname:v,search:f,hash:h,state:p,key:m},navigationType:i}},[l,d,f,h,p,m,i]);return g==null?null:w.createElement(Rc.Provider,{value:u},w.createElement(Rw.Provider,{children:n,value:g}))}function Xce(e){let{children:t,location:n}=e;return Dce(UC(t),n)}new Promise(()=>{});function UC(e,t){t===void 0&&(t=[]);let n=[];return w.Children.forEach(e,(r,i)=>{if(!w.isValidElement(r))return;let s=[...t,i];if(r.type===w.Fragment){n.push.apply(n,UC(r.props.children,s));return}r.type!==Vi&&Dn(!1),!r.props.index||!r.props.children||Dn(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=UC(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nb(){return nb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nb.apply(this,arguments)}function Zz(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Qce(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Jce(e,t){return e.button===0&&(!t||t==="_self")&&!Qce(e)}const Zce=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],eue=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],tue="6";try{window.__reactRouterVersion=tue}catch{}const nue=w.createContext({isTransitioning:!1}),rue="startTransition",jR=xw[rue];function iue(e){let{basename:t,children:n,future:r,window:i}=e,s=w.useRef();s.current==null&&(s.current=sce({window:i,v5Compat:!0}));let a=s.current,[o,l]=w.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},d=w.useCallback(f=>{u&&jR?jR(()=>l(f)):l(f)},[l,u]);return w.useLayoutEffect(()=>a.listen(d),[a,d]),w.useEffect(()=>Kce(r),[r]),w.createElement(Yce,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const sue=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",aue=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eH=w.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:u,preventScrollReset:d,viewTransition:f}=t,h=Zz(t,Zce),{basename:p}=w.useContext(Rc),m,g=!1;if(typeof u=="string"&&aue.test(u)&&(m=u,sue))try{let x=new URL(window.location.href),S=u.startsWith("//")?new URL(x.protocol+u):new URL(u),E=ch(S.pathname,p);S.origin===x.origin&&E!=null?u=E+S.search+S.hash:g=!0}catch{}let v=jce(u,{relative:i}),y=cue(u,{replace:a,state:o,target:l,preventScrollReset:d,relative:i,viewTransition:f});function b(x){r&&r(x),x.defaultPrevented||y(x)}return w.createElement("a",nb({},h,{href:m||v,onClick:g||s?r:b,ref:n,target:l}))}),oue=w.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:a=!1,style:o,to:l,viewTransition:u,children:d}=t,f=Zz(t,eue),h=Lw(l,{relative:f.relative}),p=w0(),m=w.useContext(qz),{navigator:g,basename:v}=w.useContext(Rc),y=m!=null&&uue(h)&&u===!0,b=g.encodeLocation?g.encodeLocation(h).pathname:h.pathname,x=p.pathname,S=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(x=x.toLowerCase(),S=S?S.toLowerCase():null,b=b.toLowerCase()),S&&v&&(S=ch(S,v)||S);const E=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let _=x===b||!a&&x.startsWith(b)&&x.charAt(E)==="/",T=S!=null&&(S===b||!a&&S.startsWith(b)&&S.charAt(b.length)==="/"),C={isActive:_,isPending:T,isTransitioning:y},k=_?r:void 0,A;typeof s=="function"?A=s(C):A=[s,_?"active":null,T?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let j=typeof o=="function"?o(C):o;return w.createElement(eH,nb({},f,{"aria-current":k,className:A,ref:n,style:j,to:l,viewTransition:u}),typeof d=="function"?d(C):d)});var zC;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(zC||(zC={}));var OR;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(OR||(OR={}));function lue(e){let t=w.useContext(Mw);return t||Dn(!1),t}function cue(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}=t===void 0?{}:t,l=Yz(),u=w0(),d=Lw(e,{relative:a});return w.useCallback(f=>{if(Jce(f,n)){f.preventDefault();let h=r!==void 0?r:tb(u)===tb(d);l(e,{replace:h,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[u,l,d,r,i,n,e,s,a,o])}function uue(e,t){t===void 0&&(t={});let n=w.useContext(nue);n==null&&Dn(!1);let{basename:r}=lue(zC.useViewTransitionState),i=Lw(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=ch(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=ch(n.nextLocation.pathname,r)||n.nextLocation.pathname;return $C(i.pathname,a)!=null||$C(i.pathname,s)!=null}const due="modulepreload",fue=function(e){return"/"+e},PR={},E0=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=fue(l),l in PR)return;PR[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":due,u||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),u)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})},hue=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>E0(async()=>{const{default:r}=await Promise.resolve().then(()=>Hh);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Vj extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class pue extends Vj{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class IR extends Vj{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class DR extends Vj{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var HC;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(HC||(HC={}));var mue=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function l(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):i(d.value).then(o,l)}u((r=r.apply(e,t||[])).next())})};class gue{constructor(t,{headers:n={},customFetch:r,region:i=HC.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=hue(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return mue(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:a}=n;let o={},{region:l}=n;l||(l=this.region);const u=new URL(`${this.url}/${t}`);l&&l!=="any"&&(o["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let d;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(o["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(o["Content-Type"]="application/json",d=JSON.stringify(a)));const f=yield this.fetch(u.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:d}).catch(g=>{throw new pue(g)}),h=f.headers.get("x-relay-error");if(h&&h==="true")throw new IR(f);if(!f.ok)throw new DR(f);let p=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),m;return p==="application/json"?m=yield f.json():p==="application/octet-stream"?m=yield f.blob():p==="text/event-stream"?m=f:p==="multipart/form-data"?m=yield f.formData():m=yield f.text(),{data:m,error:null,response:f}}catch(i){return{data:null,error:i,response:i instanceof DR||i instanceof IR?i.context:void 0}}})}}var ji={},Wj={},Fw={},S0={},Bw={},$w={},yue=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},uh=yue();const vue=uh.fetch,tH=uh.fetch.bind(uh),nH=uh.Headers,xue=uh.Request,bue=uh.Response,Hh=Object.freeze(Object.defineProperty({__proto__:null,Headers:nH,Request:xue,Response:bue,default:tH,fetch:vue},Symbol.toStringTag,{value:"Module"})),wue=Iae(Hh);var Uw={};Object.defineProperty(Uw,"__esModule",{value:!0});let Eue=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Uw.default=Eue;var rH=Zr&&Zr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($w,"__esModule",{value:!0});const Sue=rH(wue),_ue=rH(Uw);let Nue=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Sue.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,o,l,u;let d=null,f=null,h=null,p=s.status,m=s.statusText;if(s.ok){if(this.method!=="HEAD"){const b=await s.text();b===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?f=b:f=JSON.parse(b))}const v=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&y&&y.length>1&&(h=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,h=null,p=406,m="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const v=await s.text();try{d=JSON.parse(v),Array.isArray(d)&&s.status===404&&(f=[],d=null,p=200,m="OK")}catch{s.status===404&&v===""?(p=204,m="No Content"):d={message:v}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,p=200,m="OK"),d&&this.shouldThrowOnError)throw new _ue.default(d)}return{error:d,data:f,count:h,status:p,statusText:m}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,o,l;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(o=s==null?void 0:s.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,n)}returns(){return this}overrideTypes(){return this}};$w.default=Nue;var Tue=Zr&&Zr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bw,"__esModule",{value:!0});const Cue=Tue($w);let kue=class extends Cue.default{select(t){let n=!1;const r=(t??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const a=s?`${s}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(a,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){var o;const l=[t?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${u}"; options=${l};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Bw.default=kue;var Aue=Zr&&Zr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(S0,"__esModule",{value:!0});const jue=Aue(Bw);let Oue=class extends jue.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${a}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};S0.default=Oue;var Pue=Zr&&Zr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fw,"__esModule",{value:!0});const Op=Pue(S0);let Iue=class{constructor(t,{headers:n={},schema:r,fetch:i}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=i}select(t,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const a=(t??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new Op.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var i;const s="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Op.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){var a;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Op.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(t,{count:n}={}){var r;const i="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new Op.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Op.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Fw.default=Iue;var iH=Zr&&Zr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wj,"__esModule",{value:!0});const Due=iH(Fw),Mue=iH(S0);let Rue=class sH{constructor(t,{headers:n={},schema:r,fetch:i}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(t){const n=new URL(`${this.url}/${t}`);return new Due.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new sH(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:i=!1,count:s}={}){var a;let o;const l=new URL(`${this.url}/rpc/${t}`);let u;r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([f,h])=>h!==void 0).map(([f,h])=>[f,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([f,h])=>{l.searchParams.append(f,h)})):(o="POST",u=n);const d=new Headers(this.headers);return s&&d.set("Prefer",`count=${s}`),new Mue.default({method:o,url:l,headers:d,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};Wj.default=Rue;var Vh=Zr&&Zr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ji,"__esModule",{value:!0});ji.PostgrestError=ji.PostgrestBuilder=ji.PostgrestTransformBuilder=ji.PostgrestFilterBuilder=ji.PostgrestQueryBuilder=ji.PostgrestClient=void 0;const aH=Vh(Wj);ji.PostgrestClient=aH.default;const oH=Vh(Fw);ji.PostgrestQueryBuilder=oH.default;const lH=Vh(S0);ji.PostgrestFilterBuilder=lH.default;const cH=Vh(Bw);ji.PostgrestTransformBuilder=cH.default;const uH=Vh($w);ji.PostgrestBuilder=uH.default;const dH=Vh(Uw);ji.PostgrestError=dH.default;var Lue=ji.default={PostgrestClient:aH.default,PostgrestQueryBuilder:oH.default,PostgrestFilterBuilder:lH.default,PostgrestTransformBuilder:cH.default,PostgrestBuilder:uH.default,PostgrestError:dH.default};const{PostgrestClient:Fue,PostgrestQueryBuilder:slt,PostgrestFilterBuilder:alt,PostgrestTransformBuilder:olt,PostgrestBuilder:llt,PostgrestError:clt}=Lue;class Bue{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const $ue="2.15.1",Uue=`realtime-js/${$ue}`,zue="1.0.0",VC=1e4,Hue=1e3,Vue=100;var Nm;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Nm||(Nm={}));var tr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(tr||(tr={}));var la;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(la||(la={}));var WC;(function(e){e.websocket="websocket"})(WC||(WC={}));var vu;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(vu||(vu={}));class Wue{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(t.slice(a,a+i));a=a+i;const l=r.decode(t.slice(a,a+s));a=a+s;const u=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class fH{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Kt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Kt||(Kt={}));const MR=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((s,a)=>(s[a]=que(a,e,t,i),s),{})},que=(e,t,n,r)=>{const i=t.find(o=>o.name===e),s=i==null?void 0:i.type,a=n[e];return s&&!r.includes(s)?hH(s,a):qC(a)},hH=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Xue(t,n)}switch(e){case Kt.bool:return Kue(t);case Kt.float4:case Kt.float8:case Kt.int2:case Kt.int4:case Kt.int8:case Kt.numeric:case Kt.oid:return Gue(t);case Kt.json:case Kt.jsonb:return Yue(t);case Kt.timestamp:return Que(t);case Kt.abstime:case Kt.date:case Kt.daterange:case Kt.int4range:case Kt.int8range:case Kt.money:case Kt.reltime:case Kt.text:case Kt.time:case Kt.timestamptz:case Kt.timetz:case Kt.tsrange:case Kt.tstzrange:return qC(t);default:return qC(t)}},qC=e=>e,Kue=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Gue=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Yue=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Xue=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const a=e.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>hH(t,o))}return e},Que=e=>typeof e=="string"?e.replace(" ","T"):e,pH=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class k_{constructor(t,n,r={},i=VC){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var RR;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(RR||(RR={}));class Tm{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Tm.syncState(this.state,i,s,a),this.pendingDiffs.forEach(l=>{this.state=Tm.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Tm.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),a=this.transformState(n),o={},l={};return this.map(s,(u,d)=>{a[u]||(l[u]=d)}),this.map(a,(u,d)=>{const f=s[u];if(f){const h=d.map(v=>v.presence_ref),p=f.map(v=>v.presence_ref),m=d.filter(v=>p.indexOf(v.presence_ref)<0),g=f.filter(v=>h.indexOf(v.presence_ref)<0);m.length>0&&(o[u]=m),g.length>0&&(l[u]=g)}else o[u]=d}),this.syncDiff(s,{joins:o,leaves:l},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(o,l)=>{var u;const d=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(l),d.length>0){const f=t[o].map(p=>p.presence_ref),h=d.filter(p=>f.indexOf(p.presence_ref)<0);t[o].unshift(...h)}r(o,d,l)}),this.map(a,(o,l)=>{let u=t[o];if(!u)return;const d=l.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[o]=u,i(o,u,l),u.length===0&&delete t[o]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var LR;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(LR||(LR={}));var Cm;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Cm||(Cm={}));var Ao;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ao||(Ao={}));class qj{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=tr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new k_(this,la.join,this.params,this.timeout),this.rejoinTimer=new fH(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=tr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=tr.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=tr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=tr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=tr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(la.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Tm(this),this.broadcastEndpointURL=pH(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==tr.closed){const{config:{broadcast:s,presence:a,private:o}}=this.params,l=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[Cm.PRESENCE]&&this.bindings[Cm.PRESENCE].length>0,d={},f={broadcast:s,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(h=>t==null?void 0:t(Ao.CHANNEL_ERROR,h)),this._onClose(()=>t==null?void 0:t(Ao.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var p;if(this.socket.setAuth(),h===void 0){t==null||t(Ao.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,g=(p=m==null?void 0:m.length)!==null&&p!==void 0?p:0,v=[];for(let y=0;y<g;y++){const b=m[y],{filter:{event:x,schema:S,table:E,filter:_}}=b,T=h&&h[y];if(T&&T.event===x&&T.schema===S&&T.table===E&&T.filter===_)v.push(Object.assign(Object.assign({},b),{id:T.id}));else{this.unsubscribe(),this.state=tr.errored,t==null||t(Ao.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(Ao.SUBSCRIBED);return}}).receive("error",h=>{this.state=tr.errored,t==null||t(Ao.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ao.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===tr.joined&&t===Cm.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:a}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,l;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=tr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(la.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new k_(this,la.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=tr.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new k_(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Vue){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const a=t.toLocaleLowerCase(),{close:o,error:l,leave:u,join:d}=la;if(r&&[o,l,u,d].indexOf(a)>=0&&r!==this._joinRef())return;let h=this._onMessage(a,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var m,g,v;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((v=(g=p.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===a}).map(p=>p.callback(h,r)):(s=this.bindings[a])===null||s===void 0||s.filter(p=>{var m,g,v,y,b,x;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const S=p.id,E=(m=p.filter)===null||m===void 0?void 0:m.event;return S&&((g=n.ids)===null||g===void 0?void 0:g.includes(S))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const S=(b=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return S==="*"||S===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof h=="object"&&"ids"in h){const m=h.data,{schema:g,table:v,commit_timestamp:y,type:b,errors:x}=m;h=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:y,eventType:b,new:{},old:{},errors:x}),this._getPayloadRecords(m))}p.callback(h,r)})}_isClosed(){return this.state===tr.closed}_isJoined(){return this.state===tr.joined}_isJoining(){return this.state===tr.joining}_isLeaving(){return this.state===tr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&qj.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(la.close,{},t)}_onError(t){this._on(la.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=tr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=MR(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=MR(t.columns,t.old_record)),n}}const FR=()=>{},zy={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Jue=[1e3,2e3,5e3,1e4],Zue=1e4,ede=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class tde{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=VC,this.transport=null,this.heartbeatIntervalMs=zy.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=FR,this.ref=0,this.reconnectTimer=null,this.logger=FR,this.conn=null,this.sendBuffer=[],this.serializer=new Wue,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...a)=>E0(async()=>{const{default:o}=await Promise.resolve().then(()=>Hh);return{default:o}},void 0).then(({default:o})=>o(...a)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...a)=>s(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${WC.websocket}`,this.httpEndpoint=pH(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Bue.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:zue}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Nm.connecting:return vu.Connecting;case Nm.open:return vu.Open;case Nm.closing:return vu.Closing;default:return vu.Closed}}isConnected(){return this.connectionState()===vu.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new qj(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:r,payload:i,ref:s}=t,a=()=>{this.encode(t,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Hue,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},zy.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:a}=n,o=a?`(${a})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${o}`.trim(),s),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,s,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(la.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([ede],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:Uue};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(la.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new fH(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},zy.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,s,a,o,l,u;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:VC,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:zy.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(o=t==null?void 0:t.reconnectAfterMs)!==null&&o!==void 0?o:d=>Jue[d-1]||Zue,this.encode=(l=t==null?void 0:t.encode)!==null&&l!==void 0?l:(d,f)=>f(JSON.stringify(d)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Kj extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function nr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class nde extends Kj{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class KC extends Kj{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var rde=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function l(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):i(d.value).then(o,l)}u((r=r.apply(e,t||[])).next())})};const mH=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>E0(async()=>{const{default:r}=await Promise.resolve().then(()=>Hh);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},ide=()=>rde(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield E0(()=>Promise.resolve().then(()=>Hh),void 0)).Response:Response}),GC=e=>{if(Array.isArray(e))return e.map(n=>GC(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=GC(r)}),t},sde=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Od=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function l(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):i(d.value).then(o,l)}u((r=r.apply(e,t||[])).next())})};const A_=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ade=(e,t,n)=>Od(void 0,void 0,void 0,function*(){const r=yield ide();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const s=e.status||500,a=(i==null?void 0:i.statusCode)||s+"";t(new nde(A_(i),s,a))}).catch(i=>{t(new KC(A_(i),i))}):t(new KC(A_(e),e))}),ode=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(sde(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function _0(e,t,n,r,i,s){return Od(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(n,ode(t,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>ade(l,o,r))})})}function rb(e,t,n,r){return Od(this,void 0,void 0,function*(){return _0(e,"GET",t,n,r)})}function $a(e,t,n,r,i){return Od(this,void 0,void 0,function*(){return _0(e,"POST",t,r,i,n)})}function YC(e,t,n,r,i){return Od(this,void 0,void 0,function*(){return _0(e,"PUT",t,r,i,n)})}function lde(e,t,n,r){return Od(this,void 0,void 0,function*(){return _0(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function gH(e,t,n,r,i){return Od(this,void 0,void 0,function*(){return _0(e,"DELETE",t,r,i,n)})}var ui=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function l(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):i(d.value).then(o,l)}u((r=r.apply(e,t||[])).next())})};const cde={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},BR={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ude{constructor(t,n={},r,i){this.url=t,this.headers=n,this.bucketId=r,this.fetch=mH(i)}uploadOrUpdate(t,n,r,i){return ui(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},BR),i);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(o=Object.assign(Object.assign({},o),i.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),f=yield(t=="PUT"?YC:$a)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(s){if(nr(s))return{data:null,error:s};throw s}})}upload(t,n,r){return ui(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return ui(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:BR.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield YC(this.fetch,o.toString(),l,{headers:d});return{data:{path:s,fullPath:f.Key},error:null}}catch(l){if(nr(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return ui(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield $a(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),o=a.searchParams.get("token");if(!o)throw new Kj("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:o},error:null}}catch(r){if(nr(r))return{data:null,error:r};throw r}})}update(t,n,r){return ui(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return ui(this,void 0,void 0,function*(){try{return{data:yield $a(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(nr(i))return{data:null,error:i};throw i}})}copy(t,n,r){return ui(this,void 0,void 0,function*(){try{return{data:{path:(yield $a(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(nr(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return ui(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield $a(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(nr(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return ui(this,void 0,void 0,function*(){try{const i=yield $a(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(nr(i))return{data:null,error:i};throw i}})}download(t,n){return ui(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=s?`?${s}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield rb(this.fetch,`${this.url}/${i}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(nr(o))return{data:null,error:o};throw o}})}info(t){return ui(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield rb(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:GC(r),error:null}}catch(r){if(nr(r))return{data:null,error:r};throw r}})}exists(t){return ui(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield lde(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(nr(r)&&r instanceof KC){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const o=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${u}`)}}}remove(t){return ui(this,void 0,void 0,function*(){try{return{data:yield gH(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(nr(n))return{data:null,error:n};throw n}})}list(t,n,r){return ui(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},cde),n),{prefix:t||""});return{data:yield $a(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(nr(i))return{data:null,error:i};throw i}})}listV2(t,n){return ui(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield $a(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(nr(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const dde="2.11.0",fde={"X-Client-Info":`storage-js/${dde}`};var Hd=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function l(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):i(d.value).then(o,l)}u((r=r.apply(e,t||[])).next())})};class hde{constructor(t,n={},r,i){const s=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},fde),n),this.fetch=mH(r)}listBuckets(){return Hd(this,void 0,void 0,function*(){try{return{data:yield rb(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(nr(t))return{data:null,error:t};throw t}})}getBucket(t){return Hd(this,void 0,void 0,function*(){try{return{data:yield rb(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(nr(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Hd(this,void 0,void 0,function*(){try{return{data:yield $a(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(nr(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Hd(this,void 0,void 0,function*(){try{return{data:yield YC(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(nr(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Hd(this,void 0,void 0,function*(){try{return{data:yield $a(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(nr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Hd(this,void 0,void 0,function*(){try{return{data:yield gH(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(nr(n))return{data:null,error:n};throw n}})}}class pde extends hde{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new ude(this.url,this.headers,t,this.fetch)}}const mde="2.56.0";let am="";typeof Deno<"u"?am="deno":typeof document<"u"?am="web":typeof navigator<"u"&&navigator.product==="ReactNative"?am="react-native":am="node";const gde={"X-Client-Info":`supabase-js-${am}/${mde}`},yde={headers:gde},vde={schema:"public"},xde={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},bde={};var wde=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function l(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):i(d.value).then(o,l)}u((r=r.apply(e,t||[])).next())})};const Ede=e=>{let t;return e?t=e:typeof fetch>"u"?t=tH:t=fetch,(...n)=>t(...n)},Sde=()=>typeof Headers>"u"?nH:Headers,_de=(e,t,n)=>{const r=Ede(n),i=Sde();return(s,a)=>wde(void 0,void 0,void 0,function*(){var o;const l=(o=yield t())!==null&&o!==void 0?o:e;let u=new i(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},a),{headers:u}))})};var Nde=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function l(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):i(d.value).then(o,l)}u((r=r.apply(e,t||[])).next())})};function Tde(e){return e.endsWith("/")?e:e+"/"}function Cde(e,t){var n,r;const{db:i,auth:s,realtime:a,global:o}=e,{db:l,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},f),o),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Nde(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const yH="2.71.1",of=30*1e3,XC=3,j_=XC*of,kde="http://localhost:9999",Ade="supabase.auth.token",jde={"X-Client-Info":`gotrue-js/${yH}`},QC="X-Supabase-Api-Version",vH={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ode=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Pde=10*60*1e3;class Gj extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function it(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Ide extends Gj{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Dde(e){return it(e)&&e.name==="AuthApiError"}class xH extends Gj{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Fc extends Gj{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class Cl extends Fc{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Mde(e){return it(e)&&e.name==="AuthSessionMissingError"}class Hy extends Fc{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Vy extends Fc{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Wy extends Fc{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Rde(e){return it(e)&&e.name==="AuthImplicitGrantRedirectError"}class $R extends Fc{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class JC extends Fc{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function O_(e){return it(e)&&e.name==="AuthRetryableFetchError"}class UR extends Fc{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ZC extends Fc{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ib="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),zR=` 	
\r=`.split(""),Lde=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<zR.length;t+=1)e[zR[t].charCodeAt(0)]=-2;for(let t=0;t<ib.length;t+=1)e[ib[t].charCodeAt(0)]=t;return e})();function HR(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ib[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ib[r]),t.queuedBits-=6}}function bH(e,t,n){const r=Lde[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function VR(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{$de(a,r,n)};for(let a=0;a<e.length;a+=1)bH(e.charCodeAt(a),i,s);return t.join("")}function Fde(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Bde(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}Fde(r,t)}}function $de(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Ude(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)bH(e.charCodeAt(i),n,r);return new Uint8Array(t)}function zde(e){const t=[];return Bde(e,n=>t.push(n)),new Uint8Array(t)}function Hde(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>HR(i,n,r)),HR(null,n,r),t.join("")}function Vde(e){return Math.round(Date.now()/1e3)+e}function Wde(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ra=()=>typeof window<"u"&&typeof document<"u",nu={tested:!1,writable:!1},wH=()=>{if(!ra())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(nu.tested)return nu.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),nu.tested=!0,nu.writable=!0}catch{nu.tested=!0,nu.writable=!1}return nu.writable};function qde(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const EH=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>E0(async()=>{const{default:r}=await Promise.resolve().then(()=>Hh);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Kde=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",lf=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ru=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},bl=async(e,t)=>{await e.removeItem(t)};class zw{constructor(){this.promise=new zw.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}zw.promiseConstructor=Promise;function P_(e){const t=e.split(".");if(t.length!==3)throw new ZC("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Ode.test(t[r]))throw new ZC("JWT not in base64url format");return{header:JSON.parse(VR(t[0])),payload:JSON.parse(VR(t[1])),signature:Ude(t[2]),raw:{header:t[0],payload:t[1]}}}async function Gde(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Yde(e,t){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await e(s);if(!t(s,null,a)){r(a);return}}catch(a){if(!t(s,a)){i(a);return}}})()})}function Xde(e){return("0"+e.toString(16)).substr(-2)}function Qde(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,Xde).join("")}async function Jde(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function Zde(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await Jde(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vd(e,t,n=!1){const r=Qde();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await lf(e,`${t}-code-verifier`,i);const s=await Zde(r);return[s,r===s?"plain":"s256"]}const efe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function tfe(e){const t=e.headers.get(QC);if(!t||!t.match(efe))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function nfe(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function rfe(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ife=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Wd(e){if(!ife.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function I_(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function WR(e){return JSON.parse(JSON.stringify(e))}var sfe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const du=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),afe=[502,503,504];async function qR(e){var t;if(!Kde(e))throw new JC(du(e),0);if(afe.includes(e.status))throw new JC(du(e),e.status);let n;try{n=await e.json()}catch(s){throw new xH(du(s),s)}let r;const i=tfe(e);if(i&&i.getTime()>=vH["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new UR(du(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Cl}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new UR(du(n),e.status,n.weak_password.reasons);throw new Ide(du(n),e.status||500,r)}const ofe=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function dt(e,t,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[QC]||(s[QC]=vH["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await lfe(e,t,n+o,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function lfe(e,t,n,r,i,s){const a=ofe(t,r,i,s);let o;try{o=await e(n,Object.assign({},a))}catch(l){throw console.error(l),new JC(du(l),0)}if(o.ok||await qR(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await qR(l)}}function No(e){var t;let n=null;ffe(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Vde(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function KR(e){const t=No(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ul(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function cfe(e){return{data:e,error:null}}function ufe(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,a=sfe(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function dfe(e){return e}function ffe(e){return e.access_token&&e.refresh_token&&e.expires_in}const D_=["global","local","others"];var hfe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class pfe{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=EH(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=D_[0]){if(D_.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${D_.join(", ")}`);try{return await dt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await dt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ul})}catch(r){if(it(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=hfe(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await dt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:ufe,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(it(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await dt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ul})}catch(n){if(it(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,s,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},d=await dt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:dfe});if(d.error)throw d.error;const f=await d.json(),h=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(m.split(";")[1].split("=")[1]);u[`${v}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(it(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Wd(t);try{return await dt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ul})}catch(n){if(it(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Wd(t);try{return await dt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ul})}catch(r){if(it(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Wd(t);try{return await dt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ul})}catch(r){if(it(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Wd(t.userId);try{const{data:n,error:r}=await dt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(it(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Wd(t.userId),Wd(t.id);try{return{data:await dt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(it(n))return{data:null,error:n};throw n}}}function GR(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function mfe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const qd={debug:!!(globalThis&&wH()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class SH extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class gfe extends SH{}async function yfe(e,t,n){qd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),qd.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){qd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{qd.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw qd.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new gfe(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(qd.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}mfe();const vfe={url:kde,storageKey:Ade,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:jde,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function YR(e,t,n){return await n()}const Kd={};class wg{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=wg.nextInstanceID,wg.nextInstanceID+=1,this.instanceID>0&&ra()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},vfe),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new pfe({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=EH(i.fetch),this.lock=i.lock||YR,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:ra()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=yfe:this.lock=YR,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:wH()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=GR(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=GR(this.memoryStorage)),ra()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=Kd[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Kd[this.storageKey]=Object.assign(Object.assign({},Kd[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Kd[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Kd[this.storageKey]=Object.assign(Object.assign({},Kd[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${yH}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=qde(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),ra()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Rde(s)){const l=(t=s.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return it(n)?{error:n}:{error:new xH("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const s=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:No}),{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(it(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,r,i;try{let s;if("email"in t){const{email:d,password:f,options:h}=t;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Vd(this.storage,this.storageKey)),s=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:m},xform:No})}else if("phone"in t){const{phone:d,password:f,options:h}=t;s=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:No})}else throw new Vy("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(it(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:a,options:o}=t;n=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:KR})}else if("phone"in t){const{phone:s,password:a,options:o}=t;n=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:KR})}else throw new Vy("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Hy}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(it(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,i,s,a,o,l,u,d,f,h,p;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:v,wallet:y,statement:b,options:x}=t;let S;if(ra())if(typeof y=="object")S=y;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))S=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=y}const E=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const _=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),b?{statement:b}:null));let T;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")T=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)T=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)m=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),g=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${E.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(i=(r=x==null?void 0:x.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=x==null?void 0:x.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((f=(d=x==null?void 0:x.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...x.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const _=await S.signMessage(new TextEncoder().encode(m),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=_}}try{const{data:v,error:y}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Hde(g)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:No});if(y)throw y;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Hy}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:y})}catch(v){if(it(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(t){const n=await ru(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:a}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:No});if(await bl(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Hy}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(it(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=t,o=await dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:No}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Hy}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(it(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,s,a;try{if("email"in t){const{email:o,options:l}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Vd(this.storage,this.storageKey));const{error:f}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:o,options:l}=t,{data:u,error:d}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Vy("You must provide either an email or phone number.")}catch(o){if(it(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var n,r;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await dt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:No});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(it(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await Vd(this.storage,this.storageKey)),await dt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:cfe})}catch(s){if(it(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Cl;const{error:i}=await dt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(it(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:s}=t,{error:a}=await dt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:i,options:s}=t,{data:a,error:o}=await dt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new Vy("You must provide either an email or phone number and a type")}catch(n){if(it(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await ru(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<j_:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await ru(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=I_()}if(this.storage.isServer&&t.user){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:t},error:null}}const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ul}):await this._useSession(async n=>{var r,i,s;const{data:a,error:o}=n;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Cl}:await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Ul})})}catch(n){if(it(n))return Mde(n)&&(await this._removeSession(),await bl(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Cl;const a=i.session;let o=null,l=null;this.flowType==="pkce"&&t.email!=null&&([o,l]=await Vd(this.storage,this.storageKey));const{data:u,error:d}=await dt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Ul});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(it(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Cl;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:a}=P_(t.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{session:o,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:l}=await this._getUser(t.access_token);if(l)throw l;s={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(it(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:o}=n;if(o)throw o;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Cl;const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(it(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!ra())throw new Wy("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Wy(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new $R("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Wy("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new $R("No code detected.");const{data:b,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=t;if(!s||!o||!a||!u)throw new Wy("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let h=d+f;l&&(h=parseInt(l));const p=h-d;p*1e3<=of&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const m=h-f;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,h,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,h,d);const{data:g,error:v}=await this._getUser(s);if(v)throw v;const y={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:f,expires_at:h,refresh_token:a,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(r){if(it(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await ru(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,t);if(o&&!(Dde(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await bl(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=Wde(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Vd(this.storage,this.storageKey,!0));try{return await dt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(it(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(it(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,o,l,u,d;const{data:f,error:h}=s;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await dt(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return ra()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(it(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await dt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(it(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Yde(async i=>(i>0&&await Gde(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await dt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:No})),(i,s)=>{const a=200*Math.pow(2,i);return s&&O_(s)&&Date.now()+a-r<of})}catch(r){if(this._debug(n,"error",r),it(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),ra()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await ru(this.storage,this.storageKey);if(i&&this.userStorage){let a=await ru(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await lf(this.userStorage,this.storageKey+"-user",a)),i.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:I_()}else if(i&&!i.user&&!i.user){const a=await ru(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await bl(this.storage,this.storageKey+"-user"),await lf(this.storage,this.storageKey,i)):i.user=I_()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<j_;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${j_}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),O_(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(i.access_token);!o&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Cl;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new zw;const{data:s,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!s.session)throw new Cl;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={session:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(i,"error",s),it(s)){const a={session:null,error:s};return O_(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,n)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await lf(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=WR(i);await lf(this.storage,this.storageKey,s)}else{const i=WR(n);await lf(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await bl(this.storage,this.storageKey),await bl(this.storage,this.storageKey+"-code-verifier"),await bl(this.storage,this.storageKey+"-user"),this.userStorage&&await bl(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ra()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),of);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/of);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${of}ms, refresh threshold is ${XC} ticks`),i<=XC&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof SH)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ra()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await Vd(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(o.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await dt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(it(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:u}=await dt(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(it(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:a,error:o}=await dt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(n){if(it(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await dt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(it(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],i=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),s=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:s}=t;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=P_(i.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(o=>o.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(o=>o.kid===t),r&&this.jwks_cached_at+Pde>i)return r;const{data:s,error:a}=await dt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(o=>o.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:p,error:m}=await this.getSession();if(m||!p.session)return{data:null,error:m};r=p.session.access_token}const{header:i,payload:s,signature:a,raw:{header:o,payload:l}}=P_(r);n!=null&&n.allowExpired||nfe(s.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:s,header:i,signature:a},error:null}}const d=rfe(i.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,a,zde(`${o}.${l}`)))throw new ZC("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}}}wg.nextInstanceID=0;const xfe=wg;class bfe extends xfe{constructor(t){super(t)}}var wfe=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function l(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):i(d.value).then(o,l)}u((r=r.apply(e,t||[])).next())})};class Efe{constructor(t,n,r){var i,s,a;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const o=Tde(t),l=new URL(o);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:vde,realtime:bde,auth:Object.assign(Object.assign({},xde),{storageKey:u}),global:yde},f=Cde(r??{},d);this.storageKey=(i=f.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=f.global.headers)!==null&&s!==void 0?s:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=f.auth)!==null&&a!==void 0?a:{},this.headers,f.global.fetch),this.fetch=_de(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new Fue(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new pde(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new gue(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return wfe(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:a,lock:o,debug:l},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new bfe({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,flowType:a,lock:o,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new tde(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Sfe=(e,t,n)=>new Efe(e,t,n);function _fe(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}_fe()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Nfe="https://eloldmdciulxzwsnlvci.supabase.co",Tfe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVsb2xkbWRjaXVseHp3c25sdmNpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUwMDkxMDYsImV4cCI6MjA2MDU4NTEwNn0.gh9vAFWK_kmkpYYC5NOgi4rs4lSQY7KhMs6UqPuX5nI",J=Sfe(Nfe,Tfe);function Tr(){const[e,t]=w.useState(null),[n,r]=w.useState(null),[i,s]=w.useState(!0);return w.useEffect(()=>{J.auth.getSession().then(({data:{session:m}})=>{r(m),t((m==null?void 0:m.user)??null),s(!1)});const{data:{subscription:p}}=J.auth.onAuthStateChange((m,g)=>{r(g),t((g==null?void 0:g.user)??null),s(!1)});return()=>p.unsubscribe()},[]),{user:e,session:n,loading:i,signUp:async(p,m)=>{const{data:g,error:v}=await J.auth.signUp({email:p,password:m});return{data:g,error:v}},signIn:async(p,m)=>{const{data:g,error:v}=await J.auth.signInWithPassword({email:p,password:m});return{data:g,error:v}},signOut:async()=>{const{error:p}=await J.auth.signOut();return{error:p}},resetPassword:async p=>{try{const{error:m}=await J.auth.resetPasswordForEmail(p,{redirectTo:`${window.location.origin}/reset-password`});if(m)throw m;return{error:null}}catch(m){return{error:m}}},updatePassword:async p=>{try{const{error:m}=await J.auth.updateUser({password:p});if(m)throw m;return{error:null}}catch(m){return{error:m}}},getUserProfile:async()=>{if(!e)return null;try{const{data:p,error:m}=await J.from("user_profiles").select("*").eq("id",e.id).single();if(m&&m.code!=="PGRST116")throw m;return p}catch(p){return console.error("Error fetching user profile:",p),null}},updateUserProfile:async p=>{if(!e)return{error:new Error("No user logged in")};try{const{data:m,error:g}=await J.from("user_profiles").upsert({id:e.id,...p}).select().single();if(g)throw g;return{data:m,error:null}}catch(m){return{data:null,error:m}}}}}const _H=w.createContext(void 0),Wh=()=>{const e=w.useContext(_H);if(e===void 0)throw new Error("useModalContext must be used within a ModalProvider");return e},Cfe=({children:e})=>{const[t,n]=w.useState(!1),[r,i]=w.useState(!1);return c.jsx(_H.Provider,{value:{expenseModalOpen:t,setExpenseModalOpen:n,searchModalOpen:r,setSearchModalOpen:i},children:e})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kfe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Afe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ge=(e,t)=>{const n=w.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:l,...u},d)=>w.createElement("svg",{ref:d,...kfe,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${Afe(e)}`,o].join(" "),...u},[...t.map(([f,h])=>w.createElement(f,h)),...Array.isArray(l)?l:[l]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=ge("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=ge("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=ge("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jfe=ge("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ofe=ge("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pfe=ge("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NH=ge("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=ge("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=ge("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=ge("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=ge("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ife=ge("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=ge("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dfe=ge("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mfe=ge("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=ge("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=ge("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=ge("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=ge("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=ge("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=ge("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rfe=ge("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=ge("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lfe=ge("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=ge("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ffe=ge("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=ge("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TH=ge("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=ge("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=ge("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bfe=ge("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=ge("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $fe=ge("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CH=ge("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=ge("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=ge("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=ge("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=ge("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ufe=ge("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=ge("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=ge("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=ge("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=ge("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zfe=ge("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=ge("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hfe=ge("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vfe=ge("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wfe=ge("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qfe=ge("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kfe=ge("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gfe=ge("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yfe=ge("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xfe=ge("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=ge("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qfe=ge("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jfe=ge("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zfe=ge("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ehe=ge("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=ge("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=ge("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const the=ge("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nhe=ge("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rhe=ge("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ihe=ge("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const she=ge("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ahe=ge("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ohe=ge("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=ge("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lhe=ge("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kH=ge("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=ge("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AH=ge("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const che=ge("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=ge("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=ge("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uhe=ge("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=ge("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jH=ge("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=ge("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dhe=ge("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=ge("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fhe=ge("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=ge("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=ge("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=ge("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=ge("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OH=ge("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=ge("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=ge("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hhe=ge("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const phe=ge("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=ge("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=ge("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=ge("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=ge("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=ge("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=ge("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mhe=ge("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ghe=ge("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PH=ge("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yhe=ge("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vhe=ge("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=ge("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=ge("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IH=ge("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=ge("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xhe=ge("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function bhe({isDarkMode:e}){const[t,n]=w.useState(!1),[r,i]=w.useState(""),[s,a]=w.useState(""),[o,l]=w.useState(!1),[u,d]=w.useState(null),{signIn:f,signUp:h}=Tr(),p=async m=>{m.preventDefault(),l(!0),d(null);try{const{error:g}=t?await h(r,s):await f(r,s);g&&d(g.message)}catch{d("An unexpected error occurred")}finally{l(!1)}};return c.jsx("div",{className:`min-h-screen flex items-center justify-center transition-colors duration-200 ${e?"bg-slate-900":"bg-slate-50"}`,children:c.jsxs("div",{className:`max-w-md w-full mx-4 p-8 rounded-xl shadow-lg border transition-colors duration-200 ${e?"bg-slate-800 border-slate-700":"bg-white border-slate-200"}`,children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:`inline-flex p-3 rounded-full mb-4 ${e?"bg-blue-900":"bg-blue-100"}`,children:c.jsx(ht,{className:`w-8 h-8 ${e?"text-blue-400":"text-blue-600"}`})}),c.jsx("h1",{className:`text-2xl font-bold ${e?"text-white":"text-slate-900"}`,children:"Consultant Dashboard"}),c.jsx("p",{className:`text-sm mt-2 ${e?"text-slate-400":"text-slate-600"}`,children:t?"Create your account":"Sign in to your account"})]}),c.jsxs("form",{onSubmit:p,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-slate-300":"text-slate-700"}`,children:"Email"}),c.jsx("input",{type:"email",value:r,onChange:m=>i(m.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 ${e?"bg-slate-700 border-slate-600 text-white placeholder-slate-400":"bg-white border-slate-300 text-slate-900 placeholder-slate-500"}`,placeholder:"Enter your email",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-slate-300":"text-slate-700"}`,children:"Password"}),c.jsx("input",{type:"password",value:s,onChange:m=>a(m.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 ${e?"bg-slate-700 border-slate-600 text-white placeholder-slate-400":"bg-white border-slate-300 text-slate-900 placeholder-slate-500"}`,placeholder:"Enter your password",required:!0,minLength:6})]}),u&&c.jsx("div",{className:"p-3 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm",children:u}),c.jsx("button",{type:"submit",disabled:o,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2.5 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:o?c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):c.jsxs(c.Fragment,{children:[t?c.jsx(vhe,{className:"w-4 h-4"}):c.jsx(the,{className:"w-4 h-4"}),t?"Sign Up":"Sign In"]})})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsx("button",{onClick:()=>n(!t),className:`text-sm transition-colors duration-200 ${e?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"}`,children:t?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})})}function DH(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=DH(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function gt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=DH(e))&&(r&&(r+=" "),r+=t);return r}const rO="-",whe=e=>{const t=She(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:a=>{const o=a.split(rO);return o[0]===""&&o.length!==1&&o.shift(),MH(o,t)||Ehe(a)},getConflictingClassGroupIds:(a,o)=>{const l=n[a]||[];return o&&r[a]?[...l,...r[a]]:l}}},MH=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?MH(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const s=e.join(rO);return(a=t.validators.find(({validator:o})=>o(s)))==null?void 0:a.classGroupId},i4=/^\[(.+)\]$/,Ehe=e=>{if(i4.test(e)){const t=i4.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},She=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const i in n)l2(n[i],r,i,t);return r},l2=(e,t,n,r)=>{e.forEach(i=>{if(typeof i=="string"){const s=i===""?t:s4(t,i);s.classGroupId=n;return}if(typeof i=="function"){if(_he(i)){l2(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,a])=>{l2(a,s4(t,s),n,r)})})},s4=(e,t)=>{let n=e;return t.split(rO).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},_he=e=>e.isThemeGetter,Nhe=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(s,a)=>{n.set(s,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let a=n.get(s);if(a!==void 0)return a;if((a=r.get(s))!==void 0)return i(s,a),a},set(s,a){n.has(s)?n.set(s,a):i(s,a)}}},c2="!",u2=":",The=u2.length,Che=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=i=>{const s=[];let a=0,o=0,l=0,u;for(let m=0;m<i.length;m++){let g=i[m];if(a===0&&o===0){if(g===u2){s.push(i.slice(l,m)),l=m+The;continue}if(g==="/"){u=m;continue}}g==="["?a++:g==="]"?a--:g==="("?o++:g===")"&&o--}const d=s.length===0?i:i.substring(l),f=khe(d),h=f!==d,p=u&&u>l?u-l:void 0;return{modifiers:s,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}};if(t){const i=t+u2,s=r;r=a=>a.startsWith(i)?s(a.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},khe=e=>e.endsWith(c2)?e.substring(0,e.length-1):e.startsWith(c2)?e.substring(1):e,Ahe=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let s=[];return r.forEach(a=>{a[0]==="["||t[a]?(i.push(...s.sort(),a),s=[]):s.push(a)}),i.push(...s.sort()),i}},jhe=e=>({cache:Nhe(e.cacheSize),parseClassName:Che(e),sortModifiers:Ahe(e),...whe(e)}),Ohe=/\s+/,Phe=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=t,a=[],o=e.trim().split(Ohe);let l="";for(let u=o.length-1;u>=0;u-=1){const d=o[u],{isExternal:f,modifiers:h,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}=n(d);if(f){l=d+(l.length>0?" "+l:l);continue}let v=!!g,y=r(v?m.substring(0,g):m);if(!y){if(!v){l=d+(l.length>0?" "+l:l);continue}if(y=r(m),!y){l=d+(l.length>0?" "+l:l);continue}v=!1}const b=s(h).join(":"),x=p?b+c2:b,S=x+y;if(a.includes(S))continue;a.push(S);const E=i(y,v);for(let _=0;_<E.length;++_){const T=E[_];a.push(x+T)}l=d+(l.length>0?" "+l:l)}return l};function Ihe(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=RH(t))&&(r&&(r+=" "),r+=n);return r}const RH=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=RH(e[r]))&&(n&&(n+=" "),n+=t);return n};function Dhe(e,...t){let n,r,i,s=a;function a(l){const u=t.reduce((d,f)=>f(d),e());return n=jhe(u),r=n.cache.get,i=n.cache.set,s=o,o(l)}function o(l){const u=r(l);if(u)return u;const d=Phe(l,n);return i(l,d),d}return function(){return s(Ihe.apply(null,arguments))}}const Zn=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},LH=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,FH=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Mhe=/^\d+\/\d+$/,Rhe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Lhe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Fhe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Bhe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,$he=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Gd=e=>Mhe.test(e),lt=e=>!!e&&!Number.isNaN(Number(e)),wl=e=>!!e&&Number.isInteger(Number(e)),M_=e=>e.endsWith("%")&&lt(e.slice(0,-1)),wo=e=>Rhe.test(e),Uhe=()=>!0,zhe=e=>Lhe.test(e)&&!Fhe.test(e),BH=()=>!1,Hhe=e=>Bhe.test(e),Vhe=e=>$he.test(e),Whe=e=>!$e(e)&&!Ue(e),qhe=e=>Gh(e,zH,BH),$e=e=>LH.test(e),iu=e=>Gh(e,HH,zhe),R_=e=>Gh(e,Qhe,lt),a4=e=>Gh(e,$H,BH),Khe=e=>Gh(e,UH,Vhe),qy=e=>Gh(e,VH,Hhe),Ue=e=>FH.test(e),Pp=e=>Yh(e,HH),Ghe=e=>Yh(e,Jhe),o4=e=>Yh(e,$H),Yhe=e=>Yh(e,zH),Xhe=e=>Yh(e,UH),Ky=e=>Yh(e,VH,!0),Gh=(e,t,n)=>{const r=LH.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},Yh=(e,t,n=!1)=>{const r=FH.exec(e);return r?r[1]?t(r[1]):n:!1},$H=e=>e==="position"||e==="percentage",UH=e=>e==="image"||e==="url",zH=e=>e==="length"||e==="size"||e==="bg-size",HH=e=>e==="length",Qhe=e=>e==="number",Jhe=e=>e==="family-name",VH=e=>e==="shadow",Zhe=()=>{const e=Zn("color"),t=Zn("font"),n=Zn("text"),r=Zn("font-weight"),i=Zn("tracking"),s=Zn("leading"),a=Zn("breakpoint"),o=Zn("container"),l=Zn("spacing"),u=Zn("radius"),d=Zn("shadow"),f=Zn("inset-shadow"),h=Zn("text-shadow"),p=Zn("drop-shadow"),m=Zn("blur"),g=Zn("perspective"),v=Zn("aspect"),y=Zn("ease"),b=Zn("animate"),x=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],E=()=>[...S(),Ue,$e],_=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto","contain","none"],C=()=>[Ue,$e,l],k=()=>[Gd,"full","auto",...C()],A=()=>[wl,"none","subgrid",Ue,$e],j=()=>["auto",{span:["full",wl,Ue,$e]},wl,Ue,$e],D=()=>[wl,"auto",Ue,$e],P=()=>["auto","min","max","fr",Ue,$e],M=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],L=()=>["start","end","center","stretch","center-safe","end-safe"],O=()=>["auto",...C()],B=()=>[Gd,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],R=()=>[e,Ue,$e],F=()=>[...S(),o4,a4,{position:[Ue,$e]}],I=()=>["no-repeat",{repeat:["","x","y","space","round"]}],X=()=>["auto","cover","contain",Yhe,qhe,{size:[Ue,$e]}],G=()=>[M_,Pp,iu],$=()=>["","none","full",u,Ue,$e],be=()=>["",lt,Pp,iu],je=()=>["solid","dashed","dotted","double"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>[lt,M_,o4,a4],xe=()=>["","none",m,Ue,$e],ae=()=>["none",lt,Ue,$e],ue=()=>["none",lt,Ue,$e],Ee=()=>[lt,Ue,$e],re=()=>[Gd,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[wo],breakpoint:[wo],color:[Uhe],container:[wo],"drop-shadow":[wo],ease:["in","out","in-out"],font:[Whe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[wo],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[wo],shadow:[wo],spacing:["px",lt],text:[wo],"text-shadow":[wo],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Gd,$e,Ue,v]}],container:["container"],columns:[{columns:[lt,$e,Ue,o]}],"break-after":[{"break-after":x()}],"break-before":[{"break-before":x()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:E()}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:k()}],"inset-x":[{"inset-x":k()}],"inset-y":[{"inset-y":k()}],start:[{start:k()}],end:[{end:k()}],top:[{top:k()}],right:[{right:k()}],bottom:[{bottom:k()}],left:[{left:k()}],visibility:["visible","invisible","collapse"],z:[{z:[wl,"auto",Ue,$e]}],basis:[{basis:[Gd,"full","auto",o,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[lt,Gd,"auto","initial","none",$e]}],grow:[{grow:["",lt,Ue,$e]}],shrink:[{shrink:["",lt,Ue,$e]}],order:[{order:[wl,"first","last","none",Ue,$e]}],"grid-cols":[{"grid-cols":A()}],"col-start-end":[{col:j()}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":A()}],"row-start-end":[{row:j()}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":P()}],"auto-rows":[{"auto-rows":P()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...M(),"normal"]}],"justify-items":[{"justify-items":[...L(),"normal"]}],"justify-self":[{"justify-self":["auto",...L()]}],"align-content":[{content:["normal",...M()]}],"align-items":[{items:[...L(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...L(),{baseline:["","last"]}]}],"place-content":[{"place-content":M()}],"place-items":[{"place-items":[...L(),"baseline"]}],"place-self":[{"place-self":["auto",...L()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:O()}],mx:[{mx:O()}],my:[{my:O()}],ms:[{ms:O()}],me:[{me:O()}],mt:[{mt:O()}],mr:[{mr:O()}],mb:[{mb:O()}],ml:[{ml:O()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:B()}],w:[{w:[o,"screen",...B()]}],"min-w":[{"min-w":[o,"screen","none",...B()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...B()]}],h:[{h:["screen","lh",...B()]}],"min-h":[{"min-h":["screen","lh","none",...B()]}],"max-h":[{"max-h":["screen","lh",...B()]}],"font-size":[{text:["base",n,Pp,iu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ue,R_]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",M_,$e]}],"font-family":[{font:[Ghe,$e,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Ue,$e]}],"line-clamp":[{"line-clamp":[lt,"none",Ue,R_]}],leading:[{leading:[s,...C()]}],"list-image":[{"list-image":["none",Ue,$e]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ue,$e]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:R()}],"text-color":[{text:R()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...je(),"wavy"]}],"text-decoration-thickness":[{decoration:[lt,"from-font","auto",Ue,iu]}],"text-decoration-color":[{decoration:R()}],"underline-offset":[{"underline-offset":[lt,"auto",Ue,$e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ue,$e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ue,$e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:F()}],"bg-repeat":[{bg:I()}],"bg-size":[{bg:X()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},wl,Ue,$e],radial:["",Ue,$e],conic:[wl,Ue,$e]},Xhe,Khe]}],"bg-color":[{bg:R()}],"gradient-from-pos":[{from:G()}],"gradient-via-pos":[{via:G()}],"gradient-to-pos":[{to:G()}],"gradient-from":[{from:R()}],"gradient-via":[{via:R()}],"gradient-to":[{to:R()}],rounded:[{rounded:$()}],"rounded-s":[{"rounded-s":$()}],"rounded-e":[{"rounded-e":$()}],"rounded-t":[{"rounded-t":$()}],"rounded-r":[{"rounded-r":$()}],"rounded-b":[{"rounded-b":$()}],"rounded-l":[{"rounded-l":$()}],"rounded-ss":[{"rounded-ss":$()}],"rounded-se":[{"rounded-se":$()}],"rounded-ee":[{"rounded-ee":$()}],"rounded-es":[{"rounded-es":$()}],"rounded-tl":[{"rounded-tl":$()}],"rounded-tr":[{"rounded-tr":$()}],"rounded-br":[{"rounded-br":$()}],"rounded-bl":[{"rounded-bl":$()}],"border-w":[{border:be()}],"border-w-x":[{"border-x":be()}],"border-w-y":[{"border-y":be()}],"border-w-s":[{"border-s":be()}],"border-w-e":[{"border-e":be()}],"border-w-t":[{"border-t":be()}],"border-w-r":[{"border-r":be()}],"border-w-b":[{"border-b":be()}],"border-w-l":[{"border-l":be()}],"divide-x":[{"divide-x":be()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":be()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...je(),"hidden","none"]}],"divide-style":[{divide:[...je(),"hidden","none"]}],"border-color":[{border:R()}],"border-color-x":[{"border-x":R()}],"border-color-y":[{"border-y":R()}],"border-color-s":[{"border-s":R()}],"border-color-e":[{"border-e":R()}],"border-color-t":[{"border-t":R()}],"border-color-r":[{"border-r":R()}],"border-color-b":[{"border-b":R()}],"border-color-l":[{"border-l":R()}],"divide-color":[{divide:R()}],"outline-style":[{outline:[...je(),"none","hidden"]}],"outline-offset":[{"outline-offset":[lt,Ue,$e]}],"outline-w":[{outline:["",lt,Pp,iu]}],"outline-color":[{outline:R()}],shadow:[{shadow:["","none",d,Ky,qy]}],"shadow-color":[{shadow:R()}],"inset-shadow":[{"inset-shadow":["none",f,Ky,qy]}],"inset-shadow-color":[{"inset-shadow":R()}],"ring-w":[{ring:be()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:R()}],"ring-offset-w":[{"ring-offset":[lt,iu]}],"ring-offset-color":[{"ring-offset":R()}],"inset-ring-w":[{"inset-ring":be()}],"inset-ring-color":[{"inset-ring":R()}],"text-shadow":[{"text-shadow":["none",h,Ky,qy]}],"text-shadow-color":[{"text-shadow":R()}],opacity:[{opacity:[lt,Ue,$e]}],"mix-blend":[{"mix-blend":[...Q(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Q()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[lt]}],"mask-image-linear-from-pos":[{"mask-linear-from":K()}],"mask-image-linear-to-pos":[{"mask-linear-to":K()}],"mask-image-linear-from-color":[{"mask-linear-from":R()}],"mask-image-linear-to-color":[{"mask-linear-to":R()}],"mask-image-t-from-pos":[{"mask-t-from":K()}],"mask-image-t-to-pos":[{"mask-t-to":K()}],"mask-image-t-from-color":[{"mask-t-from":R()}],"mask-image-t-to-color":[{"mask-t-to":R()}],"mask-image-r-from-pos":[{"mask-r-from":K()}],"mask-image-r-to-pos":[{"mask-r-to":K()}],"mask-image-r-from-color":[{"mask-r-from":R()}],"mask-image-r-to-color":[{"mask-r-to":R()}],"mask-image-b-from-pos":[{"mask-b-from":K()}],"mask-image-b-to-pos":[{"mask-b-to":K()}],"mask-image-b-from-color":[{"mask-b-from":R()}],"mask-image-b-to-color":[{"mask-b-to":R()}],"mask-image-l-from-pos":[{"mask-l-from":K()}],"mask-image-l-to-pos":[{"mask-l-to":K()}],"mask-image-l-from-color":[{"mask-l-from":R()}],"mask-image-l-to-color":[{"mask-l-to":R()}],"mask-image-x-from-pos":[{"mask-x-from":K()}],"mask-image-x-to-pos":[{"mask-x-to":K()}],"mask-image-x-from-color":[{"mask-x-from":R()}],"mask-image-x-to-color":[{"mask-x-to":R()}],"mask-image-y-from-pos":[{"mask-y-from":K()}],"mask-image-y-to-pos":[{"mask-y-to":K()}],"mask-image-y-from-color":[{"mask-y-from":R()}],"mask-image-y-to-color":[{"mask-y-to":R()}],"mask-image-radial":[{"mask-radial":[Ue,$e]}],"mask-image-radial-from-pos":[{"mask-radial-from":K()}],"mask-image-radial-to-pos":[{"mask-radial-to":K()}],"mask-image-radial-from-color":[{"mask-radial-from":R()}],"mask-image-radial-to-color":[{"mask-radial-to":R()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[lt]}],"mask-image-conic-from-pos":[{"mask-conic-from":K()}],"mask-image-conic-to-pos":[{"mask-conic-to":K()}],"mask-image-conic-from-color":[{"mask-conic-from":R()}],"mask-image-conic-to-color":[{"mask-conic-to":R()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:F()}],"mask-repeat":[{mask:I()}],"mask-size":[{mask:X()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ue,$e]}],filter:[{filter:["","none",Ue,$e]}],blur:[{blur:xe()}],brightness:[{brightness:[lt,Ue,$e]}],contrast:[{contrast:[lt,Ue,$e]}],"drop-shadow":[{"drop-shadow":["","none",p,Ky,qy]}],"drop-shadow-color":[{"drop-shadow":R()}],grayscale:[{grayscale:["",lt,Ue,$e]}],"hue-rotate":[{"hue-rotate":[lt,Ue,$e]}],invert:[{invert:["",lt,Ue,$e]}],saturate:[{saturate:[lt,Ue,$e]}],sepia:[{sepia:["",lt,Ue,$e]}],"backdrop-filter":[{"backdrop-filter":["","none",Ue,$e]}],"backdrop-blur":[{"backdrop-blur":xe()}],"backdrop-brightness":[{"backdrop-brightness":[lt,Ue,$e]}],"backdrop-contrast":[{"backdrop-contrast":[lt,Ue,$e]}],"backdrop-grayscale":[{"backdrop-grayscale":["",lt,Ue,$e]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[lt,Ue,$e]}],"backdrop-invert":[{"backdrop-invert":["",lt,Ue,$e]}],"backdrop-opacity":[{"backdrop-opacity":[lt,Ue,$e]}],"backdrop-saturate":[{"backdrop-saturate":[lt,Ue,$e]}],"backdrop-sepia":[{"backdrop-sepia":["",lt,Ue,$e]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ue,$e]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[lt,"initial",Ue,$e]}],ease:[{ease:["linear","initial",y,Ue,$e]}],delay:[{delay:[lt,Ue,$e]}],animate:[{animate:["none",b,Ue,$e]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,Ue,$e]}],"perspective-origin":[{"perspective-origin":E()}],rotate:[{rotate:ae()}],"rotate-x":[{"rotate-x":ae()}],"rotate-y":[{"rotate-y":ae()}],"rotate-z":[{"rotate-z":ae()}],scale:[{scale:ue()}],"scale-x":[{"scale-x":ue()}],"scale-y":[{"scale-y":ue()}],"scale-z":[{"scale-z":ue()}],"scale-3d":["scale-3d"],skew:[{skew:Ee()}],"skew-x":[{"skew-x":Ee()}],"skew-y":[{"skew-y":Ee()}],transform:[{transform:[Ue,$e,"","none","gpu","cpu"]}],"transform-origin":[{origin:E()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:re()}],"translate-x":[{"translate-x":re()}],"translate-y":[{"translate-y":re()}],"translate-z":[{"translate-z":re()}],"translate-none":["translate-none"],accent:[{accent:R()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:R()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ue,$e]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ue,$e]}],fill:[{fill:["none",...R()]}],"stroke-w":[{stroke:[lt,Pp,iu,R_]}],stroke:[{stroke:["none",...R()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},epe=Dhe(Zhe);function Ve(...e){return epe(gt(e))}function l4(e){return e.hours?e.hours:e.fixed_amount&&e.fixed_amount>0?e.total_amount/e.fixed_amount:1}function tpe(e){return e.hourly_rate||e.fixed_amount||0}function npe(e){return e.hours?"hourly":"fixed"}function c4(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function WH(...e){return t=>{let n=!1;const r=e.map(i=>{const s=c4(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():c4(e[i],null)}}}}function ln(...e){return w.useCallback(WH(...e),e)}function fh(e){const t=ipe(e),n=w.forwardRef((r,i)=>{const{children:s,...a}=r,o=w.Children.toArray(s),l=o.find(ape);if(l){const u=l.props.children,d=o.map(f=>f===l?w.Children.count(u)>1?w.Children.only(null):w.isValidElement(u)?u.props.children:null:f);return c.jsx(t,{...a,ref:i,children:w.isValidElement(u)?w.cloneElement(u,void 0,d):null})}return c.jsx(t,{...a,ref:i,children:s})});return n.displayName=`${e}.Slot`,n}var rpe=fh("Slot");function ipe(e){const t=w.forwardRef((n,r)=>{const{children:i,...s}=n;if(w.isValidElement(i)){const a=lpe(i),o=ope(s,i.props);return i.type!==w.Fragment&&(o.ref=r?WH(r,a):a),w.cloneElement(i,o)}return w.Children.count(i)>1?w.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var qH=Symbol("radix.slottable");function spe(e){const t=({children:n})=>c.jsx(c.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=qH,t}function ape(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===qH}function ope(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{const l=s(...o);return i(...o),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function lpe(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const u4=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,d4=gt,iO=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return d4(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=t,a=Object.keys(i).map(u=>{const d=n==null?void 0:n[u],f=s==null?void 0:s[u];if(d===null)return null;const h=u4(d)||u4(f);return i[u][h]}),o=n&&Object.entries(n).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:f,className:h,...p}=d;return Object.entries(p).every(m=>{let[g,v]=m;return Array.isArray(v)?v.includes({...s,...o}[g]):{...s,...o}[g]===v})?[...u,f,h]:u},[]);return d4(e,a,l,n==null?void 0:n.class,n==null?void 0:n.className)},sO=iO("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),H=w.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},s)=>{const a=r?rpe:"button";return c.jsx(a,{className:Ve(sO({variant:t,size:n,className:e})),ref:s,...i})});H.displayName="Button";const cpe=[{name:"Dashboard",href:"/",icon:Qfe},{name:"Time Tracking",href:"/time-tracking",icon:ht},{name:"Budget",href:"/budget",icon:mn},{name:"Cash Flow",href:"/cash-flow",icon:ti},{name:"Projects",href:"/projects",icon:N0},{name:"Analytics",href:"/analytics",icon:eo},{name:"Clients",href:"/clients",icon:Ui},{name:"CV Manager",href:"/cv-manager",icon:yhe},{name:"Invoicing",href:"/invoicing",icon:bn},{name:"Salary",href:"/salary",icon:Ife}];function upe({collapsed:e,onToggle:t,isDarkMode:n}){return c.jsxs("div",{className:Ve("flex flex-col h-full border-r transition-all duration-300",e?"w-16":"w-64","bg-card border-border"),children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[!e&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:c.jsx(eo,{className:"w-5 h-5 text-primary-foreground"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"font-semibold text-sm",children:"ConsultantHub"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Dashboard"})]})]}),c.jsx(H,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8",children:e?c.jsx(Jj,{className:"h-4 w-4"}):c.jsx(Qj,{className:"h-4 w-4"})})]}),c.jsx("nav",{className:"flex-1 p-2",children:c.jsx("ul",{className:"space-y-1",children:cpe.map(r=>{const i=r.icon;return c.jsx("li",{children:c.jsxs(oue,{to:r.href,className:({isActive:s})=>Ve("flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors","hover:bg-accent hover:text-accent-foreground",s?"bg-primary text-primary-foreground":"text-muted-foreground",e?"justify-center":""),title:e?r.name:void 0,children:[c.jsx(i,{className:"h-4 w-4 flex-shrink-0"}),!e&&c.jsx("span",{children:r.name})]})},r.name)})})}),c.jsx("div",{className:"p-4 border-t border-border",children:!e&&c.jsxs("div",{className:"text-xs text-muted-foreground",children:[c.jsx("p",{children:" 2025 ConsultantHub"}),c.jsx("p",{children:"v1.0.0"})]})})]})}const ce=w.forwardRef(({className:e,type:t,...n},r)=>c.jsx("input",{type:t,className:Ve("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...n}));ce.displayName="Input";function dpe({className:e}){const[t,n]=w.useState(""),[r,i]=w.useState(!1),[s,a]=w.useState([]),[o,l]=w.useState(-1),u=Yz(),d=Wh(),f=w.useRef(null),h=w.useRef(null),p=w.useMemo(()=>[{id:"new-invoice",title:"Create New Invoice",description:"Start a new invoice for a client",action:()=>{u("/invoicing")},icon:c.jsx(nt,{className:"h-4 w-4"}),type:"create",keywords:["new","create","invoice","bill","charge","client","add i","new i","i","+i","ni"]},{id:"new-client",title:"Add New Client",description:"Create a new client profile",action:()=>{u("/clients")},icon:c.jsx(nt,{className:"h-4 w-4"}),type:"create",keywords:["new","add","create","client","customer","company","add c","new c","c","+c","nc"]},{id:"new-project",title:"Create New Project",description:"Start a new project",action:()=>{u("/projects")},icon:c.jsx(Yj,{className:"h-4 w-4"}),type:"create",keywords:["new","create","project","work","task","add p","new p","p","+p","np"]},{id:"log-time",title:"Log Time Entry",description:"Track time for a project",action:()=>{u("/time-tracking")},icon:c.jsx(ht,{className:"h-4 w-4"}),type:"create",keywords:["log","track","time","hours","work","timer","add t","log t","t","+t","lt"]},{id:"add-expense",title:"Add Expense",description:"Record a new expense",action:()=>{u("/budget"),setTimeout(()=>{d.setExpenseModalOpen(!0)},100)},icon:c.jsx(mn,{className:"h-4 w-4"}),type:"create",keywords:["add","new","expense","cost","spend","payment","receipt","add e","new e","e","+e","ne"]},{id:"quick-dashboard",title:"Dashboard",description:"Quick access to dashboard",action:()=>u("/"),icon:c.jsx(eo,{className:"h-4 w-4"}),type:"navigation",keywords:["d","dashboard","home","overview","main"]},{id:"quick-invoicing",title:"Invoicing",description:"Quick access to invoicing",action:()=>u("/invoicing"),icon:c.jsx(bn,{className:"h-4 w-4"}),type:"navigation",keywords:["inv","invoicing","invoices","bills","billing","payments"]},{id:"quick-clients",title:"Clients",description:"Quick access to clients",action:()=>u("/clients"),icon:c.jsx(Ui,{className:"h-4 w-4"}),type:"navigation",keywords:["cli","clients","customers","companies","contacts"]},{id:"quick-time",title:"Time Tracking",description:"Quick access to time tracking",action:()=>u("/time-tracking"),icon:c.jsx(ht,{className:"h-4 w-4"}),type:"navigation",keywords:["tt","time","tracking","hours","timesheet","work"]},{id:"quick-budget",title:"Budget & Expenses",description:"Quick access to budget",action:()=>u("/budget"),icon:c.jsx(mn,{className:"h-4 w-4"}),type:"navigation",keywords:["bud","budget","expenses","finance","money","costs"]},{id:"go-dashboard",title:"Dashboard",description:"Go to main dashboard",action:()=>u("/"),icon:c.jsx(eo,{className:"h-4 w-4"}),type:"navigation",keywords:["dashboard","home","overview","main"]},{id:"go-invoicing",title:"Invoicing",description:"Manage invoices and billing",action:()=>u("/invoicing"),icon:c.jsx(bn,{className:"h-4 w-4"}),type:"navigation",keywords:["invoicing","invoices","bills","billing","payments"]},{id:"go-clients",title:"Clients",description:"Manage client relationships",action:()=>u("/clients"),icon:c.jsx(Ui,{className:"h-4 w-4"}),type:"navigation",keywords:["clients","customers","companies","contacts"]},{id:"go-time-tracking",title:"Time Tracking",description:"Track and manage work hours",action:()=>u("/time-tracking"),icon:c.jsx(ht,{className:"h-4 w-4"}),type:"navigation",keywords:["time","tracking","hours","timesheet","work"]},{id:"go-budget",title:"Budget & Expenses",description:"Manage finances and expenses",action:()=>u("/budget"),icon:c.jsx(mn,{className:"h-4 w-4"}),type:"navigation",keywords:["budget","expenses","finance","money","costs"]},{id:"go-settings",title:"Settings",description:"Configure application settings",action:()=>u("/settings"),icon:c.jsx(Qo,{className:"h-4 w-4"}),type:"navigation",keywords:["settings","config","preferences","options","set"]},{id:"today-summary",title:"Today's Summary",description:"View today's time and revenue",action:()=>{u("/")},icon:c.jsx(eo,{className:"h-4 w-4"}),type:"navigation",keywords:["today","summary","daily","td","now"]},{id:"quick-timer",title:"Start Timer",description:"Quick time tracking",action:()=>{u("/time-tracking")},icon:c.jsx(ht,{className:"h-4 w-4"}),type:"create",keywords:["timer","start","track now","begin","st"]},{id:"help",title:"Help & Shortcuts",description:"Show all available commands",action:()=>{const v=document.querySelector('input[placeholder*="Search"]');v&&(v.value="",v.focus())},icon:c.jsx(Qo,{className:"h-4 w-4"}),type:"navigation",keywords:["help","shortcuts","commands","?","h"]}],[u,d]);w.useEffect(()=>{if(!t.trim()){a([]),l(-1);return}const v=t.toLowerCase().trim();let y=v,b=!1,x=!1;v.startsWith("/")?(y=v.substring(1),x=!0):v.startsWith("+")&&(y=v.substring(1),b=!0);const S=p.filter(E=>b&&E.type!=="create"||x&&E.type!=="navigation"?!1:y.split(" ").every(T=>E.keywords.some(C=>C.includes(T))||E.title.toLowerCase().includes(T)||E.description.toLowerCase().includes(T)));S.sort((E,_)=>{const T=E.keywords.some(P=>P===y),C=_.keywords.some(P=>P===y);if(T&&!C)return-1;if(C&&!T)return 1;if(!x&&E.type==="create"&&_.type!=="create")return-1;if(!x&&_.type==="create"&&E.type!=="create")return 1;const k=E.title.toLowerCase().startsWith(y),A=_.title.toLowerCase().startsWith(y);if(k&&!A)return-1;if(A&&!k)return 1;const j=E.keywords.some(P=>P.startsWith(y)),D=_.keywords.some(P=>P.startsWith(y));return j&&!D?-1:D&&!j?1:E.title.localeCompare(_.title)}),a(S.slice(0,8)),l(-1)},[t,p]);const m=v=>{var y;if(!(!r||s.length===0))switch(v.key){case"ArrowDown":v.preventDefault(),l(b=>b<s.length-1?b+1:0);break;case"ArrowUp":v.preventDefault(),l(b=>b>0?b-1:s.length-1);break;case"Enter":v.preventDefault(),o>=0&&s[o]&&g(s[o]);break;case"Escape":i(!1),(y=f.current)==null||y.blur();break}},g=v=>{var y;v.action(),n(""),i(!1),(y=f.current)==null||y.blur()};return w.useEffect(()=>{const v=y=>{var b;h.current&&!h.current.contains(y.target)&&!((b=f.current)!=null&&b.contains(y.target))&&i(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),w.useEffect(()=>{const v=y=>{var b;(y.ctrlKey||y.metaKey)&&y.key==="k"&&(y.preventDefault(),(b=f.current)==null||b.focus(),i(!0))};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[]),c.jsxs("div",{className:Ve("relative",e),children:[c.jsxs("div",{className:"relative",children:[c.jsx(Kh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx(ce,{ref:f,placeholder:"Search or command... (Ctrl+K to focus, try '+i', '/clients')",className:"pl-10",value:t,onChange:v=>n(v.target.value),onFocus:()=>i(!0),onKeyDown:m})]}),r&&s.length>0&&c.jsx("div",{ref:h,className:"absolute top-full left-0 right-0 mt-1 bg-popover border border-border rounded-md shadow-lg z-50 max-h-80 overflow-y-auto",children:s.map((v,y)=>c.jsxs("button",{className:Ve("w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-accent hover:text-accent-foreground transition-colors",y===o&&"bg-accent text-accent-foreground",v.type==="create"&&"border-l-2 border-l-green-500",v.type==="navigation"&&"border-l-2 border-l-blue-500"),onClick:()=>g(v),children:[c.jsx("div",{className:"flex-shrink-0",children:v.icon}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-medium text-sm",children:v.title}),c.jsx("div",{className:"text-xs text-muted-foreground truncate",children:v.description})]}),c.jsx("div",{className:"flex-shrink-0",children:c.jsx("span",{className:Ve("text-xs px-2 py-1 rounded-full",v.type==="create"&&"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",v.type==="navigation"&&"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300"),children:v.type==="create"?"Create":"Go to"})})]},v.id))}),r&&t.trim()===""&&c.jsx("div",{ref:h,className:"absolute top-full left-0 right-0 mt-1 bg-popover border border-border rounded-md shadow-lg z-50 p-4",children:c.jsxs("div",{className:"text-sm text-muted-foreground",children:[c.jsx("p",{className:"font-medium mb-3",children:"Smart Search Commands:"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-foreground mb-2",children:" Quick Create:"}),c.jsxs("div",{className:"space-y-1 text-xs",children:[c.jsxs("p",{children:[" ",c.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"add i"})," or ",c.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"+i"})," - New invoice"]}),c.jsxs("p",{children:[" ",c.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"add c"})," or ",c.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"+c"})," - New client"]}),c.jsxs("p",{children:[" ",c.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"add t"})," or ",c.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"+t"})," - Log time"]}),c.jsxs("p",{children:[" ",c.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"add e"})," or ",c.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"+e"})," - Add expense"]}),c.jsxs("p",{children:[" ",c.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"timer"})," - Start timer"]})]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-foreground mb-2",children:" Quick Navigation:"}),c.jsxs("div",{className:"space-y-1 text-xs",children:[c.jsxs("p",{children:[" ",c.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"d"})," - Dashboard"]}),c.jsxs("p",{children:[" ",c.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"inv"})," - Invoicing"]}),c.jsxs("p",{children:[" ",c.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"cli"})," - Clients"]}),c.jsxs("p",{children:[" ",c.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"tt"})," - Time tracking"]}),c.jsxs("p",{children:[" ",c.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"bud"})," - Budget"]})]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-foreground mb-2",children:" Command Prefixes:"}),c.jsxs("div",{className:"space-y-1 text-xs",children:[c.jsxs("p",{children:[" ",c.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"+command"})," - Create only"]}),c.jsxs("p",{children:[" ",c.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"/command"})," - Navigate only"]}),c.jsxs("p",{children:[" ",c.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"?"})," or ",c.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"h"})," - Help"]}),c.jsxs("p",{children:[" ",c.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"today"})," - Today's summary"]})]})]})]}),c.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:c.jsxs("p",{className:"text-xs",children:[" ",c.jsx("span",{className:"font-medium",children:"Examples:"}),' "new invoice", "+i", "/clients", "add t", "timer"']})})]})})]})}function fpe({isDarkMode:e,onToggleDarkMode:t,onSignOut:n,user:r}){var i;return c.jsxs("header",{className:Ve("flex items-center justify-between px-6 py-4 border-b","bg-background border-border"),children:[c.jsx("div",{className:"flex items-center gap-4 flex-1 max-w-md",children:c.jsx(dpe,{className:"flex-1"})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(H,{variant:"ghost",size:"icon",className:"relative",children:[c.jsx(Dfe,{className:"h-4 w-4"}),c.jsx("span",{className:"absolute top-1 right-1 h-2 w-2 bg-red-500 rounded-full"})]}),c.jsx(H,{variant:"ghost",size:"icon",onClick:t,children:e?c.jsx(phe,{className:"h-4 w-4"}):c.jsx(lhe,{className:"h-4 w-4"})}),c.jsx(H,{variant:"ghost",size:"icon",asChild:!0,children:c.jsx(eH,{to:"/settings",children:c.jsx(Qo,{className:"h-4 w-4"})})}),c.jsxs("div",{className:"flex items-center gap-3 ml-4 pl-4 border-l border-border",children:[c.jsxs("div",{className:"text-right hidden sm:block",children:[c.jsx("p",{className:"text-sm font-medium",children:((i=r==null?void 0:r.email)==null?void 0:i.split("@")[0])||"User"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:(r==null?void 0:r.email)||"user@example.com"})]}),c.jsx(H,{variant:"ghost",size:"icon",className:"rounded-full",children:c.jsx(Gs,{className:"h-4 w-4"})}),c.jsx(H,{variant:"ghost",size:"icon",onClick:n,children:c.jsx(nhe,{className:"h-4 w-4"})})]})]})]})}function hpe({isDarkMode:e,onToggleDarkMode:t,onSignOut:n,user:r,children:i}){const[s,a]=w.useState(!1);return c.jsxs("div",{className:Ve("min-h-screen flex flex-col",e?"dark":""),children:[c.jsx(fpe,{isDarkMode:e,onToggleDarkMode:t,onSignOut:n,user:r}),c.jsxs("div",{className:"flex-1 flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(upe,{collapsed:s,onToggle:()=>a(!s)})}),c.jsx("main",{className:"flex-1 overflow-auto p-6 bg-muted/30 min-w-0",children:i||c.jsx(Gce,{})})]})]})}function d2(e,t){return d2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},d2(e,t)}function KH(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,d2(e,t)}function Qe(){return Qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qe.apply(null,arguments)}function Sg(e){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sg(e)}function ppe(e,t){if(Sg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Sg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mpe(e){var t=ppe(e,"string");return Sg(t)=="symbol"?t:t+""}function gpe(e,t,n){return(t=mpe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function h4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?f4(Object(n),!0).forEach(function(r){gpe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ci(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var p4=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),m4=function(){return Math.random().toString(36).substring(7).split("").join(".")},g4={INIT:"@@redux/INIT"+m4(),REPLACE:"@@redux/REPLACE"+m4()};function ype(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function GH(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ci(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ci(1));return n(GH)(e,t)}if(typeof e!="function")throw new Error(Ci(2));var i=e,s=t,a=[],o=a,l=!1;function u(){o===a&&(o=a.slice())}function d(){if(l)throw new Error(Ci(3));return s}function f(g){if(typeof g!="function")throw new Error(Ci(4));if(l)throw new Error(Ci(5));var v=!0;return u(),o.push(g),function(){if(v){if(l)throw new Error(Ci(6));v=!1,u();var b=o.indexOf(g);o.splice(b,1),a=null}}}function h(g){if(!ype(g))throw new Error(Ci(7));if(typeof g.type>"u")throw new Error(Ci(8));if(l)throw new Error(Ci(9));try{l=!0,s=i(s,g)}finally{l=!1}for(var v=a=o,y=0;y<v.length;y++){var b=v[y];b()}return g}function p(g){if(typeof g!="function")throw new Error(Ci(10));i=g,h({type:g4.REPLACE})}function m(){var g,v=f;return g={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(Ci(11));function x(){b.next&&b.next(d())}x();var S=v(x);return{unsubscribe:S}}},g[p4]=function(){return this},g}return h({type:g4.INIT}),r={dispatch:h,subscribe:f,getState:d,replaceReducer:p},r[p4]=m,r}function y4(e,t){return function(){return t(e.apply(this,arguments))}}function v4(e,t){if(typeof e=="function")return y4(e,t);if(typeof e!="object"||e===null)throw new Error(Ci(16));var n={};for(var r in e){var i=e[r];typeof i=="function"&&(n[r]=y4(i,t))}return n}function YH(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function vpe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Ci(15))},a={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},o=t.map(function(l){return l(a)});return s=YH.apply(void 0,o)(i.dispatch),h4(h4({},i),{},{dispatch:s})}}}var XH=at.createContext(null);function xpe(e){e()}var QH=xpe,bpe=function(t){return QH=t},wpe=function(){return QH};function Epe(){var e=wpe(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e(function(){for(var i=t;i;)i.callback(),i=i.next})},get:function(){for(var i=[],s=t;s;)i.push(s),s=s.next;return i},subscribe:function(i){var s=!0,a=n={callback:i,next:null,prev:n};return a.prev?a.prev.next=a:t=a,function(){!s||t===null||(s=!1,a.next?a.next.prev=a.prev:n=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var x4={notify:function(){},get:function(){return[]}};function JH(e,t){var n,r=x4;function i(f){return l(),r.subscribe(f)}function s(){r.notify()}function a(){d.onStateChange&&d.onStateChange()}function o(){return!!n}function l(){n||(n=t?t.addNestedSub(a):e.subscribe(a),r=Epe())}function u(){n&&(n(),n=void 0,r.clear(),r=x4)}var d={addNestedSub:i,notifyNestedSubs:s,handleChangeWrapper:a,isSubscribed:o,trySubscribe:l,tryUnsubscribe:u,getListeners:function(){return r}};return d}var ZH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect;function Spe(e){var t=e.store,n=e.context,r=e.children,i=w.useMemo(function(){var o=JH(t);return{store:t,subscription:o}},[t]),s=w.useMemo(function(){return t.getState()},[t]);ZH(function(){var o=i.subscription;return o.onStateChange=o.notifyNestedSubs,o.trySubscribe(),s!==t.getState()&&o.notifyNestedSubs(),function(){o.tryUnsubscribe(),o.onStateChange=null}},[i,s]);var a=n||XH;return at.createElement(a.Provider,{value:i},r)}function lb(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var eV={exports:{}},Rt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cr=typeof Symbol=="function"&&Symbol.for,aO=Cr?Symbol.for("react.element"):60103,oO=Cr?Symbol.for("react.portal"):60106,Ww=Cr?Symbol.for("react.fragment"):60107,qw=Cr?Symbol.for("react.strict_mode"):60108,Kw=Cr?Symbol.for("react.profiler"):60114,Gw=Cr?Symbol.for("react.provider"):60109,Yw=Cr?Symbol.for("react.context"):60110,lO=Cr?Symbol.for("react.async_mode"):60111,Xw=Cr?Symbol.for("react.concurrent_mode"):60111,Qw=Cr?Symbol.for("react.forward_ref"):60112,Jw=Cr?Symbol.for("react.suspense"):60113,_pe=Cr?Symbol.for("react.suspense_list"):60120,Zw=Cr?Symbol.for("react.memo"):60115,eE=Cr?Symbol.for("react.lazy"):60116,Npe=Cr?Symbol.for("react.block"):60121,Tpe=Cr?Symbol.for("react.fundamental"):60117,Cpe=Cr?Symbol.for("react.responder"):60118,kpe=Cr?Symbol.for("react.scope"):60119;function ys(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case aO:switch(e=e.type,e){case lO:case Xw:case Ww:case Kw:case qw:case Jw:return e;default:switch(e=e&&e.$$typeof,e){case Yw:case Qw:case eE:case Zw:case Gw:return e;default:return t}}case oO:return t}}}function tV(e){return ys(e)===Xw}Rt.AsyncMode=lO;Rt.ConcurrentMode=Xw;Rt.ContextConsumer=Yw;Rt.ContextProvider=Gw;Rt.Element=aO;Rt.ForwardRef=Qw;Rt.Fragment=Ww;Rt.Lazy=eE;Rt.Memo=Zw;Rt.Portal=oO;Rt.Profiler=Kw;Rt.StrictMode=qw;Rt.Suspense=Jw;Rt.isAsyncMode=function(e){return tV(e)||ys(e)===lO};Rt.isConcurrentMode=tV;Rt.isContextConsumer=function(e){return ys(e)===Yw};Rt.isContextProvider=function(e){return ys(e)===Gw};Rt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===aO};Rt.isForwardRef=function(e){return ys(e)===Qw};Rt.isFragment=function(e){return ys(e)===Ww};Rt.isLazy=function(e){return ys(e)===eE};Rt.isMemo=function(e){return ys(e)===Zw};Rt.isPortal=function(e){return ys(e)===oO};Rt.isProfiler=function(e){return ys(e)===Kw};Rt.isStrictMode=function(e){return ys(e)===qw};Rt.isSuspense=function(e){return ys(e)===Jw};Rt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ww||e===Xw||e===Kw||e===qw||e===Jw||e===_pe||typeof e=="object"&&e!==null&&(e.$$typeof===eE||e.$$typeof===Zw||e.$$typeof===Gw||e.$$typeof===Yw||e.$$typeof===Qw||e.$$typeof===Tpe||e.$$typeof===Cpe||e.$$typeof===kpe||e.$$typeof===Npe)};Rt.typeOf=ys;eV.exports=Rt;var Ape=eV.exports,cO=Ape,jpe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Ope={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Ppe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},nV={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},uO={};uO[cO.ForwardRef]=Ppe;uO[cO.Memo]=nV;function b4(e){return cO.isMemo(e)?nV:uO[e.$$typeof]||jpe}var Ipe=Object.defineProperty,Dpe=Object.getOwnPropertyNames,w4=Object.getOwnPropertySymbols,Mpe=Object.getOwnPropertyDescriptor,Rpe=Object.getPrototypeOf,E4=Object.prototype;function rV(e,t,n){if(typeof t!="string"){if(E4){var r=Rpe(t);r&&r!==E4&&rV(e,r,n)}var i=Dpe(t);w4&&(i=i.concat(w4(t)));for(var s=b4(e),a=b4(t),o=0;o<i.length;++o){var l=i[o];if(!Ope[l]&&!(n&&n[l])&&!(a&&a[l])&&!(s&&s[l])){var u=Mpe(t,l);try{Ipe(e,l,u)}catch{}}}}return e}var Lpe=rV;const S4=ii(Lpe);var iV={exports:{}},Vt={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tE=60103,nE=60106,C0=60107,k0=60108,A0=60114,j0=60109,O0=60110,P0=60112,I0=60113,dO=60120,D0=60115,M0=60116,sV=60121,aV=60122,oV=60117,lV=60129,cV=60131;if(typeof Symbol=="function"&&Symbol.for){var jr=Symbol.for;tE=jr("react.element"),nE=jr("react.portal"),C0=jr("react.fragment"),k0=jr("react.strict_mode"),A0=jr("react.profiler"),j0=jr("react.provider"),O0=jr("react.context"),P0=jr("react.forward_ref"),I0=jr("react.suspense"),dO=jr("react.suspense_list"),D0=jr("react.memo"),M0=jr("react.lazy"),sV=jr("react.block"),aV=jr("react.server.block"),oV=jr("react.fundamental"),lV=jr("react.debug_trace_mode"),cV=jr("react.legacy_hidden")}function ja(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case tE:switch(e=e.type,e){case C0:case A0:case k0:case I0:case dO:return e;default:switch(e=e&&e.$$typeof,e){case O0:case P0:case M0:case D0:case j0:return e;default:return t}}case nE:return t}}}var Fpe=j0,Bpe=tE,$pe=P0,Upe=C0,zpe=M0,Hpe=D0,Vpe=nE,Wpe=A0,qpe=k0,Kpe=I0;Vt.ContextConsumer=O0;Vt.ContextProvider=Fpe;Vt.Element=Bpe;Vt.ForwardRef=$pe;Vt.Fragment=Upe;Vt.Lazy=zpe;Vt.Memo=Hpe;Vt.Portal=Vpe;Vt.Profiler=Wpe;Vt.StrictMode=qpe;Vt.Suspense=Kpe;Vt.isAsyncMode=function(){return!1};Vt.isConcurrentMode=function(){return!1};Vt.isContextConsumer=function(e){return ja(e)===O0};Vt.isContextProvider=function(e){return ja(e)===j0};Vt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===tE};Vt.isForwardRef=function(e){return ja(e)===P0};Vt.isFragment=function(e){return ja(e)===C0};Vt.isLazy=function(e){return ja(e)===M0};Vt.isMemo=function(e){return ja(e)===D0};Vt.isPortal=function(e){return ja(e)===nE};Vt.isProfiler=function(e){return ja(e)===A0};Vt.isStrictMode=function(e){return ja(e)===k0};Vt.isSuspense=function(e){return ja(e)===I0};Vt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===C0||e===A0||e===lV||e===k0||e===I0||e===dO||e===cV||typeof e=="object"&&e!==null&&(e.$$typeof===M0||e.$$typeof===D0||e.$$typeof===j0||e.$$typeof===O0||e.$$typeof===P0||e.$$typeof===oV||e.$$typeof===sV||e[0]===aV)};Vt.typeOf=ja;iV.exports=Vt;var Gpe=iV.exports,Ype=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Xpe=["reactReduxForwardedRef"],Qpe=[],Jpe=[null,null];function Zpe(e,t){var n=e[1];return[t.payload,n+1]}function _4(e,t,n){ZH(function(){return e.apply(void 0,t)},n)}function eme(e,t,n,r,i,s,a){e.current=r,t.current=i,n.current=!1,s.current&&(s.current=null,a())}function tme(e,t,n,r,i,s,a,o,l,u){if(e){var d=!1,f=null,h=function(){if(!d){var g=t.getState(),v,y;try{v=r(g,i.current)}catch(b){y=b,f=b}y||(f=null),v===s.current?a.current||l():(s.current=v,o.current=v,a.current=!0,u({type:"STORE_UPDATED",payload:{error:y}}))}};n.onStateChange=h,n.trySubscribe(),h();var p=function(){if(d=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f};return p}}var nme=function(){return[null,0]};function rme(e,t){t===void 0&&(t={});var n=t,r=n.getDisplayName,i=r===void 0?function(x){return"ConnectAdvanced("+x+")"}:r,s=n.methodName,a=s===void 0?"connectAdvanced":s,o=n.renderCountProp,l=o===void 0?void 0:o,u=n.shouldHandleStateChanges,d=u===void 0?!0:u,f=n.storeKey,h=f===void 0?"store":f;n.withRef;var p=n.forwardRef,m=p===void 0?!1:p,g=n.context,v=g===void 0?XH:g,y=lb(n,Ype),b=v;return function(S){var E=S.displayName||S.name||"Component",_=i(E),T=Qe({},y,{getDisplayName:i,methodName:a,renderCountProp:l,shouldHandleStateChanges:d,storeKey:h,displayName:_,wrappedComponentName:E,WrappedComponent:S}),C=y.pure;function k(M){return e(M.dispatch,T)}var A=C?w.useMemo:function(M){return M()};function j(M){var L=w.useMemo(function(){var fe=M.reactReduxForwardedRef,Fe=lb(M,Xpe);return[M.context,fe,Fe]},[M]),O=L[0],B=L[1],R=L[2],F=w.useMemo(function(){return O&&O.Consumer&&Gpe.isContextConsumer(at.createElement(O.Consumer,null))?O:b},[O,b]),I=w.useContext(F),X=!!M.store&&!!M.store.getState&&!!M.store.dispatch;I&&I.store;var G=X?M.store:I.store,$=w.useMemo(function(){return k(G)},[G]),be=w.useMemo(function(){if(!d)return Jpe;var fe=JH(G,X?null:I.subscription),Fe=fe.notifyNestedSubs.bind(fe);return[fe,Fe]},[G,X,I]),je=be[0],Q=be[1],K=w.useMemo(function(){return X?I:Qe({},I,{subscription:je})},[X,I,je]),xe=w.useReducer(Zpe,Qpe,nme),ae=xe[0],ue=ae[0],Ee=xe[1];if(ue&&ue.error)throw ue.error;var re=w.useRef(),Je=w.useRef(R),De=w.useRef(),tt=w.useRef(!1),Y=A(function(){return De.current&&R===Je.current?De.current:$(G.getState(),R)},[G,ue,R]);_4(eme,[Je,re,tt,R,Y,De,Q]),_4(tme,[d,G,je,$,Je,re,tt,De,Q,Ee],[G,je,$]);var pe=w.useMemo(function(){return at.createElement(S,Qe({},Y,{ref:B}))},[B,S,Y]),W=w.useMemo(function(){return d?at.createElement(F.Provider,{value:K},pe):pe},[F,pe,K]);return W}var D=C?at.memo(j):j;if(D.WrappedComponent=S,D.displayName=j.displayName=_,m){var P=at.forwardRef(function(L,O){return at.createElement(D,Qe({},L,{reactReduxForwardedRef:O}))});return P.displayName=_,P.WrappedComponent=S,S4(P,S)}return S4(D,S)}}function N4(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function L_(e,t){if(N4(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!N4(e[n[i]],t[n[i]]))return!1;return!0}function ime(e,t){var n={},r=function(a){var o=e[a];typeof o=="function"&&(n[a]=function(){return t(o.apply(void 0,arguments))})};for(var i in e)r(i);return n}function fO(e){return function(n,r){var i=e(n,r);function s(){return i}return s.dependsOnOwnProps=!1,s}}function T4(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function uV(e,t){return function(r,i){i.displayName;var s=function(o,l){return s.dependsOnOwnProps?s.mapToProps(o,l):s.mapToProps(o)};return s.dependsOnOwnProps=!0,s.mapToProps=function(o,l){s.mapToProps=e,s.dependsOnOwnProps=T4(e);var u=s(o,l);return typeof u=="function"&&(s.mapToProps=u,s.dependsOnOwnProps=T4(u),u=s(o,l)),u},s}}function sme(e){return typeof e=="function"?uV(e):void 0}function ame(e){return e?void 0:fO(function(t){return{dispatch:t}})}function ome(e){return e&&typeof e=="object"?fO(function(t){return ime(e,t)}):void 0}const lme=[sme,ame,ome];function cme(e){return typeof e=="function"?uV(e):void 0}function ume(e){return e?void 0:fO(function(){return{}})}const dme=[cme,ume];function fme(e,t,n){return Qe({},n,e,t)}function hme(e){return function(n,r){r.displayName;var i=r.pure,s=r.areMergedPropsEqual,a=!1,o;return function(u,d,f){var h=e(u,d,f);return a?(!i||!s(h,o))&&(o=h):(a=!0,o=h),o}}}function pme(e){return typeof e=="function"?hme(e):void 0}function mme(e){return e?void 0:function(){return fme}}const gme=[pme,mme];var yme=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function vme(e,t,n,r){return function(s,a){return n(e(s,a),t(r,a),a)}}function xme(e,t,n,r,i){var s=i.areStatesEqual,a=i.areOwnPropsEqual,o=i.areStatePropsEqual,l=!1,u,d,f,h,p;function m(x,S){return u=x,d=S,f=e(u,d),h=t(r,d),p=n(f,h,d),l=!0,p}function g(){return f=e(u,d),t.dependsOnOwnProps&&(h=t(r,d)),p=n(f,h,d),p}function v(){return e.dependsOnOwnProps&&(f=e(u,d)),t.dependsOnOwnProps&&(h=t(r,d)),p=n(f,h,d),p}function y(){var x=e(u,d),S=!o(x,f);return f=x,S&&(p=n(f,h,d)),p}function b(x,S){var E=!a(S,d),_=!s(x,u,S,d);return u=x,d=S,E&&_?g():E?v():_?y():p}return function(S,E){return l?b(S,E):m(S,E)}}function bme(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,s=lb(t,yme),a=n(e,s),o=r(e,s),l=i(e,s),u=s.pure?xme:vme;return u(a,o,l,e,s)}var wme=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function F_(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(s,a){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+a.wrappedComponentName+".")}}function Eme(e,t){return e===t}function Sme(e){var t=e===void 0?{}:e,n=t.connectHOC,r=n===void 0?rme:n,i=t.mapStateToPropsFactories,s=i===void 0?dme:i,a=t.mapDispatchToPropsFactories,o=a===void 0?lme:a,l=t.mergePropsFactories,u=l===void 0?gme:l,d=t.selectorFactory,f=d===void 0?bme:d;return function(p,m,g,v){v===void 0&&(v={});var y=v,b=y.pure,x=b===void 0?!0:b,S=y.areStatesEqual,E=S===void 0?Eme:S,_=y.areOwnPropsEqual,T=_===void 0?L_:_,C=y.areStatePropsEqual,k=C===void 0?L_:C,A=y.areMergedPropsEqual,j=A===void 0?L_:A,D=lb(y,wme),P=F_(p,s,"mapStateToProps"),M=F_(m,o,"mapDispatchToProps"),L=F_(g,u,"mergeProps");return r(f,Qe({methodName:"connect",getDisplayName:function(B){return"Connect("+B+")"},shouldHandleStateChanges:!!p,initMapStateToProps:P,initMapDispatchToProps:M,initMergeProps:L,pure:x,areStatesEqual:E,areOwnPropsEqual:T,areStatePropsEqual:k,areMergedPropsEqual:j},D))}}const dV=Sme();bpe(cl.unstable_batchedUpdates);function _me(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function fV(e,t){var n=w.useState(function(){return{inputs:t,result:e()}})[0],r=w.useRef(!0),i=w.useRef(n),s=r.current||!!(t&&i.current.inputs&&_me(t,i.current.inputs)),a=s?i.current:{inputs:t,result:e()};return w.useEffect(function(){r.current=!1,i.current=a},[a]),a.result}function Nme(e,t){return fV(function(){return e},t)}var vt=fV,Ke=Nme,Tme="Invariant failed";function hV(e,t){throw new Error(Tme)}var pa=function(t){var n=t.top,r=t.right,i=t.bottom,s=t.left,a=r-s,o=i-n,l={top:n,right:r,bottom:i,left:s,width:a,height:o,x:s,y:n,center:{x:(r+s)/2,y:(i+n)/2}};return l},hO=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},C4=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},Cme=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},B_={top:0,right:0,bottom:0,left:0},pO=function(t){var n=t.borderBox,r=t.margin,i=r===void 0?B_:r,s=t.border,a=s===void 0?B_:s,o=t.padding,l=o===void 0?B_:o,u=pa(hO(n,i)),d=pa(C4(n,a)),f=pa(C4(d,l));return{marginBox:u,borderBox:pa(n),paddingBox:d,contentBox:f,margin:i,border:a,padding:l}},bs=function(t){var n=t.slice(0,-2),r=t.slice(-2);if(r!=="px")return 0;var i=Number(n);return isNaN(i)&&hV(),i},kme=function(){return{x:window.pageXOffset,y:window.pageYOffset}},cb=function(t,n){var r=t.borderBox,i=t.border,s=t.margin,a=t.padding,o=Cme(r,n);return pO({borderBox:o,border:i,margin:s,padding:a})},ub=function(t,n){return n===void 0&&(n=kme()),cb(t,n)},pV=function(t,n){var r={top:bs(n.marginTop),right:bs(n.marginRight),bottom:bs(n.marginBottom),left:bs(n.marginLeft)},i={top:bs(n.paddingTop),right:bs(n.paddingRight),bottom:bs(n.paddingBottom),left:bs(n.paddingLeft)},s={top:bs(n.borderTopWidth),right:bs(n.borderRightWidth),bottom:bs(n.borderBottomWidth),left:bs(n.borderLeftWidth)};return pO({borderBox:t,margin:r,padding:i,border:s})},mV=function(t){var n=t.getBoundingClientRect(),r=window.getComputedStyle(t);return pV(n,r)},k4=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Ame(e,t){return!!(e===t||k4(e)&&k4(t))}function jme(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!Ame(e[n],t[n]))return!1;return!0}function Er(e,t){t===void 0&&(t=jme);var n,r=[],i,s=!1;function a(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return s&&n===this&&t(o,r)||(i=e.apply(this,o),s=!0,n=this,r=o),i}return a}var _g=function(t){var n=[],r=null,i=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];n=o,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return i.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},i};function gV(e,t){}gV.bind(null,"warn");gV.bind(null,"error");function cc(){}function Ome(e,t){return Qe({},e,{},t)}function Ls(e,t,n){var r=t.map(function(i){var s=Ome(n,i.options);return e.addEventListener(i.eventName,i.fn,s),function(){e.removeEventListener(i.eventName,i.fn,s)}});return function(){r.forEach(function(s){s()})}}var Pme="Invariant failed";function db(e){this.message=e}db.prototype.toString=function(){return this.message};function ke(e,t){throw new db(Pme)}var Ime=function(e){KH(t,e);function t(){for(var r,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s))||this,r.callbacks=null,r.unbind=cc,r.onWindowError=function(o){var l=r.getCallbacks();l.isDragging()&&l.tryAbort();var u=o.error;u instanceof db&&o.preventDefault()},r.getCallbacks=function(){if(!r.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return r.callbacks},r.setCallbacks=function(o){r.callbacks=o},r}var n=t.prototype;return n.componentDidMount=function(){this.unbind=Ls(window,[{eventName:"error",fn:this.onWindowError}])},n.componentDidCatch=function(i){if(i instanceof db){this.setState({});return}throw i},n.componentWillUnmount=function(){this.unbind()},n.render=function(){return this.props.children(this.setCallbacks)},t}(at.Component),Dme=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,fb=function(t){return t+1},Mme=function(t){return`
  You have lifted an item in position `+fb(t.source.index)+`
`},yV=function(t,n){var r=t.droppableId===n.droppableId,i=fb(t.index),s=fb(n.index);return r?`
      You have moved the item from position `+i+`
      to position `+s+`
    `:`
    You have moved the item from position `+i+`
    in list `+t.droppableId+`
    to list `+n.droppableId+`
    in position `+s+`
  `},vV=function(t,n,r){var i=n.droppableId===r.droppableId;return i?`
      The item `+t+`
      has been combined with `+r.draggableId:`
      The item `+t+`
      in list `+n.droppableId+`
      has been combined with `+r.draggableId+`
      in list `+r.droppableId+`
    `},Rme=function(t){var n=t.destination;if(n)return yV(t.source,n);var r=t.combine;return r?vV(t.draggableId,t.source,r):"You are over an area that cannot be dropped on"},A4=function(t){return`
  The item has returned to its starting position
  of `+fb(t.index)+`
`},Lme=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+A4(t.source)+`
    `;var n=t.destination,r=t.combine;return n?`
      You have dropped the item.
      `+yV(t.source,n)+`
    `:r?`
      You have dropped the item.
      `+vV(t.draggableId,t.source,r)+`
    `:`
    The item has been dropped while not over a drop area.
    `+A4(t.source)+`
  `},lx={dragHandleUsageInstructions:Dme,onDragStart:Mme,onDragUpdate:Rme,onDragEnd:Lme},Nr={x:0,y:0},Br=function(t,n){return{x:t.x+n.x,y:t.y+n.y}},rs=function(t,n){return{x:t.x-n.x,y:t.y-n.y}},uc=function(t,n){return t.x===n.x&&t.y===n.y},Xh=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},ld=function(t,n,r){var i;return r===void 0&&(r=0),i={},i[t]=n,i[t==="x"?"y":"x"]=r,i},Ng=function(t,n){return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))},j4=function(t,n){return Math.min.apply(Math,n.map(function(r){return Ng(t,r)}))},xV=function(t){return function(n){return{x:t(n.x),y:t(n.y)}}},Fme=function(e,t){var n=pa({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n},R0=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},O4=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},Bme={top:0,right:0,bottom:0,left:0},$me=function(t,n){return n?R0(t,n.scroll.diff.displacement):t},Ume=function(t,n,r){if(r&&r.increasedBy){var i;return Qe({},t,(i={},i[n.end]=t[n.end]+r.increasedBy[n.line],i))}return t},zme=function(t,n){return n&&n.shouldClipSubject?Fme(n.pageMarginBox,t):pa(t)},hh=function(e){var t=e.page,n=e.withPlaceholder,r=e.axis,i=e.frame,s=$me(t.marginBox,i),a=Ume(s,r,n),o=zme(a,i);return{page:t,withPlaceholder:n,active:o}},mO=function(e,t){e.frame||ke();var n=e.frame,r=rs(t,n.scroll.initial),i=Xh(r),s=Qe({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:i},max:n.scroll.max}}),a=hh({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:s}),o=Qe({},e,{frame:s,subject:a});return o};function hb(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function gO(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function Bc(e,t){if(e.find)return e.find(t);var n=gO(e,t);if(n!==-1)return e[n]}function bV(e){return Array.prototype.slice.call(e)}var wV=Er(function(e){return e.reduce(function(t,n){return t[n.descriptor.id]=n,t},{})}),EV=Er(function(e){return e.reduce(function(t,n){return t[n.descriptor.id]=n,t},{})}),rE=Er(function(e){return hb(e)}),Hme=Er(function(e){return hb(e)}),Qh=Er(function(e,t){var n=Hme(t).filter(function(r){return e===r.descriptor.droppableId}).sort(function(r,i){return r.descriptor.index-i.descriptor.index});return n});function yO(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function iE(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var sE=Er(function(e,t){return t.filter(function(n){return n.descriptor.id!==e.descriptor.id})}),Vme=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.insideDestination,s=e.previousImpact;if(!r.isCombineEnabled)return null;var a=yO(s);if(!a)return null;function o(g){var v={type:"COMBINE",combine:{draggableId:g,droppableId:r.descriptor.id}};return Qe({},s,{at:v})}var l=s.displaced.all,u=l.length?l[0]:null;if(t)return u?o(u):null;var d=sE(n,i);if(!u){if(!d.length)return null;var f=d[d.length-1];return o(f.descriptor.id)}var h=gO(d,function(g){return g.descriptor.id===u});h===-1&&ke();var p=h-1;if(p<0)return null;var m=d[p];return o(m.descriptor.id)},Jh=function(e,t){return e.descriptor.droppableId===t.descriptor.id},SV={point:Nr,value:0},Tg={invisible:{},visible:{},all:[]},Wme={displaced:Tg,displacedBy:SV,at:null},zs=function(e,t){return function(n){return e<=n&&n<=t}},_V=function(e){var t=zs(e.top,e.bottom),n=zs(e.left,e.right);return function(r){var i=t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right);if(i)return!0;var s=t(r.top)||t(r.bottom),a=n(r.left)||n(r.right),o=s&&a;if(o)return!0;var l=r.top<e.top&&r.bottom>e.bottom,u=r.left<e.left&&r.right>e.right,d=l&&u;if(d)return!0;var f=l&&a||u&&s;return f}},qme=function(e){var t=zs(e.top,e.bottom),n=zs(e.left,e.right);return function(r){var i=t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right);return i}},vO={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},NV={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Kme=function(e){return function(t){var n=zs(t.top,t.bottom),r=zs(t.left,t.right);return function(i){return e===vO?n(i.top)&&n(i.bottom):r(i.left)&&r(i.right)}}},Gme=function(t,n){var r=n.frame?n.frame.scroll.diff.displacement:Nr;return R0(t,r)},Yme=function(t,n,r){return n.subject.active?r(n.subject.active)(t):!1},Xme=function(t,n,r){return r(n)(t)},xO=function(t){var n=t.target,r=t.destination,i=t.viewport,s=t.withDroppableDisplacement,a=t.isVisibleThroughFrameFn,o=s?Gme(n,r):n;return Yme(o,r,a)&&Xme(o,i,a)},Qme=function(t){return xO(Qe({},t,{isVisibleThroughFrameFn:_V}))},TV=function(t){return xO(Qe({},t,{isVisibleThroughFrameFn:qme}))},Jme=function(t){return xO(Qe({},t,{isVisibleThroughFrameFn:Kme(t.destination.axis)}))},Zme=function(t,n,r){if(typeof r=="boolean")return r;if(!n)return!0;var i=n.invisible,s=n.visible;if(i[t])return!1;var a=s[t];return a?a.shouldAnimate:!0};function ege(e,t){var n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return pa(hO(n,r))}function Cg(e){var t=e.afterDragging,n=e.destination,r=e.displacedBy,i=e.viewport,s=e.forceShouldAnimate,a=e.last;return t.reduce(function(l,u){var d=ege(u,r),f=u.descriptor.id;l.all.push(f);var h=Qme({target:d,destination:n,viewport:i,withDroppableDisplacement:!0});if(!h)return l.invisible[u.descriptor.id]=!0,l;var p=Zme(f,a,s),m={draggableId:f,shouldAnimate:p};return l.visible[f]=m,l},{all:[],visible:{},invisible:{}})}function tge(e,t){if(!e.length)return 0;var n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function P4(e){var t=e.insideDestination,n=e.inHomeList,r=e.displacedBy,i=e.destination,s=tge(t,{inHomeList:n});return{displaced:Tg,displacedBy:r,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:s}}}}function pb(e){var t=e.draggable,n=e.insideDestination,r=e.destination,i=e.viewport,s=e.displacedBy,a=e.last,o=e.index,l=e.forceShouldAnimate,u=Jh(t,r);if(o==null)return P4({insideDestination:n,inHomeList:u,displacedBy:s,destination:r});var d=Bc(n,function(g){return g.descriptor.index===o});if(!d)return P4({insideDestination:n,inHomeList:u,displacedBy:s,destination:r});var f=sE(t,n),h=n.indexOf(d),p=f.slice(h),m=Cg({afterDragging:p,destination:r,displacedBy:s,last:a,viewport:i.frame,forceShouldAnimate:l});return{displaced:m,displacedBy:s,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:o}}}}function Sc(e,t){return!!t.effected[e]}var nge=function(e){var t=e.isMovingForward,n=e.destination,r=e.draggables,i=e.combine,s=e.afterCritical;if(!n.isCombineEnabled)return null;var a=i.draggableId,o=r[a],l=o.descriptor.index,u=Sc(a,s);return u?t?l:l-1:t?l+1:l},rge=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.insideDestination,i=e.location;if(!r.length)return null;var s=i.index,a=t?s+1:s-1,o=r[0].descriptor.index,l=r[r.length-1].descriptor.index,u=n?l:l+1;return a<o||a>u?null:a},ige=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.draggable,i=e.draggables,s=e.destination,a=e.insideDestination,o=e.previousImpact,l=e.viewport,u=e.afterCritical,d=o.at;if(d||ke(),d.type==="REORDER"){var f=rge({isMovingForward:t,isInHomeList:n,location:d.destination,insideDestination:a});return f==null?null:pb({draggable:r,insideDestination:a,destination:s,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:f})}var h=nge({isMovingForward:t,destination:s,displaced:o.displaced,draggables:i,combine:d.combine,afterCritical:u});return h==null?null:pb({draggable:r,insideDestination:a,destination:s,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:h})},sge=function(e){var t=e.displaced,n=e.afterCritical,r=e.combineWith,i=e.displacedBy,s=!!(t.visible[r]||t.invisible[r]);return Sc(r,n)?s?Nr:Xh(i.point):s?i.point:Nr},age=function(e){var t=e.afterCritical,n=e.impact,r=e.draggables,i=iE(n);i||ke();var s=i.draggableId,a=r[s].page.borderBox.center,o=sge({displaced:n.displaced,afterCritical:t,combineWith:s,displacedBy:n.displacedBy});return Br(a,o)},CV=function(t,n){return n.margin[t.start]+n.borderBox[t.size]/2},oge=function(t,n){return n.margin[t.end]+n.borderBox[t.size]/2},bO=function(t,n,r){return n[t.crossAxisStart]+r.margin[t.crossAxisStart]+r.borderBox[t.crossAxisSize]/2},I4=function(t){var n=t.axis,r=t.moveRelativeTo,i=t.isMoving;return ld(n.line,r.marginBox[n.end]+CV(n,i),bO(n,r.marginBox,i))},D4=function(t){var n=t.axis,r=t.moveRelativeTo,i=t.isMoving;return ld(n.line,r.marginBox[n.start]-oge(n,i),bO(n,r.marginBox,i))},lge=function(t){var n=t.axis,r=t.moveInto,i=t.isMoving;return ld(n.line,r.contentBox[n.start]+CV(n,i),bO(n,r.contentBox,i))},cge=function(e){var t=e.impact,n=e.draggable,r=e.draggables,i=e.droppable,s=e.afterCritical,a=Qh(i.descriptor.id,r),o=n.page,l=i.axis;if(!a.length)return lge({axis:l,moveInto:i.page,isMoving:o});var u=t.displaced,d=t.displacedBy,f=u.all[0];if(f){var h=r[f];if(Sc(f,s))return D4({axis:l,moveRelativeTo:h.page,isMoving:o});var p=cb(h.page,d.point);return D4({axis:l,moveRelativeTo:p,isMoving:o})}var m=a[a.length-1];if(m.descriptor.id===n.descriptor.id)return o.borderBox.center;if(Sc(m.descriptor.id,s)){var g=cb(m.page,Xh(s.displacedBy.point));return I4({axis:l,moveRelativeTo:g,isMoving:o})}return I4({axis:l,moveRelativeTo:m.page,isMoving:o})},f2=function(e,t){var n=e.frame;return n?Br(t,n.scroll.diff.displacement):t},uge=function(t){var n=t.impact,r=t.draggable,i=t.droppable,s=t.draggables,a=t.afterCritical,o=r.page.borderBox.center,l=n.at;return!i||!l?o:l.type==="REORDER"?cge({impact:n,draggable:r,draggables:s,droppable:i,afterCritical:a}):age({impact:n,draggables:s,afterCritical:a})},aE=function(e){var t=uge(e),n=e.droppable,r=n?f2(n,t):t;return r},kV=function(e,t){var n=rs(t,e.scroll.initial),r=Xh(n),i=pa({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),s={frame:i,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}};return s};function M4(e,t){return e.map(function(n){return t[n]})}function dge(e,t){for(var n=0;n<t.length;n++){var r=t[n].visible[e];if(r)return r}return null}var fge=function(e){var t=e.impact,n=e.viewport,r=e.destination,i=e.draggables,s=e.maxScrollChange,a=kV(n,Br(n.scroll.current,s)),o=r.frame?mO(r,Br(r.frame.scroll.current,s)):r,l=t.displaced,u=Cg({afterDragging:M4(l.all,i),destination:r,displacedBy:t.displacedBy,viewport:a.frame,last:l,forceShouldAnimate:!1}),d=Cg({afterDragging:M4(l.all,i),destination:o,displacedBy:t.displacedBy,viewport:n.frame,last:l,forceShouldAnimate:!1}),f={},h={},p=[l,u,d];l.all.forEach(function(g){var v=dge(g,p);if(v){h[g]=v;return}f[g]=!0});var m=Qe({},t,{displaced:{all:l.all,invisible:f,visible:h}});return m},hge=function(e,t){return Br(e.scroll.diff.displacement,t)},wO=function(e){var t=e.pageBorderBoxCenter,n=e.draggable,r=e.viewport,i=hge(r,t),s=rs(i,n.page.borderBox.center);return Br(n.client.borderBox.center,s)},AV=function(e){var t=e.draggable,n=e.destination,r=e.newPageBorderBoxCenter,i=e.viewport,s=e.withDroppableDisplacement,a=e.onlyOnMainAxis,o=a===void 0?!1:a,l=rs(r,t.page.borderBox.center),u=R0(t.page.borderBox,l),d={target:u,destination:n,withDroppableDisplacement:s,viewport:i};return o?Jme(d):TV(d)},pge=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.draggables,s=e.previousImpact,a=e.viewport,o=e.previousPageBorderBoxCenter,l=e.previousClientSelection,u=e.afterCritical;if(!r.isEnabled)return null;var d=Qh(r.descriptor.id,i),f=Jh(n,r),h=Vme({isMovingForward:t,draggable:n,destination:r,insideDestination:d,previousImpact:s})||ige({isMovingForward:t,isInHomeList:f,draggable:n,draggables:i,destination:r,insideDestination:d,previousImpact:s,viewport:a,afterCritical:u});if(!h)return null;var p=aE({impact:h,draggable:n,droppable:r,draggables:i,afterCritical:u}),m=AV({draggable:n,destination:r,newPageBorderBoxCenter:p,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(m){var g=wO({pageBorderBoxCenter:p,draggable:n,viewport:a});return{clientSelection:g,impact:h,scrollJumpRequest:null}}var v=rs(p,o),y=fge({impact:h,viewport:a,destination:r,draggables:i,maxScrollChange:v});return{clientSelection:l,impact:y,scrollJumpRequest:v}},di=function(t){var n=t.subject.active;return n||ke(),n},mge=function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,r=e.source,i=e.droppables,s=e.viewport,a=r.subject.active;if(!a)return null;var o=r.axis,l=zs(a[o.start],a[o.end]),u=rE(i).filter(function(f){return f!==r}).filter(function(f){return f.isEnabled}).filter(function(f){return!!f.subject.active}).filter(function(f){return _V(s.frame)(di(f))}).filter(function(f){var h=di(f);return t?a[o.crossAxisEnd]<h[o.crossAxisEnd]:h[o.crossAxisStart]<a[o.crossAxisStart]}).filter(function(f){var h=di(f),p=zs(h[o.start],h[o.end]);return l(h[o.start])||l(h[o.end])||p(a[o.start])||p(a[o.end])}).sort(function(f,h){var p=di(f)[o.crossAxisStart],m=di(h)[o.crossAxisStart];return t?p-m:m-p}).filter(function(f,h,p){return di(f)[o.crossAxisStart]===di(p[0])[o.crossAxisStart]});if(!u.length)return null;if(u.length===1)return u[0];var d=u.filter(function(f){var h=zs(di(f)[o.start],di(f)[o.end]);return h(n[o.line])});return d.length===1?d[0]:d.length>1?d.sort(function(f,h){return di(f)[o.start]-di(h)[o.start]})[0]:u.sort(function(f,h){var p=j4(n,O4(di(f))),m=j4(n,O4(di(h)));return p!==m?p-m:di(f)[o.start]-di(h)[o.start]})[0]},R4=function(t,n){var r=t.page.borderBox.center;return Sc(t.descriptor.id,n)?rs(r,n.displacedBy.point):r},gge=function(t,n){var r=t.page.borderBox;return Sc(t.descriptor.id,n)?R0(r,Xh(n.displacedBy.point)):r},yge=function(e){var t=e.pageBorderBoxCenter,n=e.viewport,r=e.destination,i=e.insideDestination,s=e.afterCritical,a=i.filter(function(o){return TV({target:gge(o,s),destination:r,viewport:n.frame,withDroppableDisplacement:!0})}).sort(function(o,l){var u=Ng(t,f2(r,R4(o,s))),d=Ng(t,f2(r,R4(l,s)));return u<d?-1:d<u?1:o.descriptor.index-l.descriptor.index});return a[0]||null},L0=Er(function(t,n){var r=n[t.line];return{value:r,point:ld(t.line,r)}}),vge=function(t,n,r){var i=t.axis;if(t.descriptor.mode==="virtual")return ld(i.line,n[i.line]);var s=t.subject.page.contentBox[i.size],a=Qh(t.descriptor.id,r),o=a.reduce(function(d,f){return d+f.client.marginBox[i.size]},0),l=o+n[i.line],u=l-s;return u<=0?null:ld(i.line,u)},jV=function(t,n){return Qe({},t,{scroll:Qe({},t.scroll,{max:n})})},OV=function(t,n,r){var i=t.frame;Jh(n,t)&&ke(),t.subject.withPlaceholder&&ke();var s=L0(t.axis,n.displaceBy).point,a=vge(t,s,r),o={placeholderSize:s,increasedBy:a,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!i){var l=hh({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:t.frame});return Qe({},t,{subject:l})}var u=a?Br(i.scroll.max,a):i.scroll.max,d=jV(i,u),f=hh({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:d});return Qe({},t,{subject:f,frame:d})},xge=function(t){var n=t.subject.withPlaceholder;n||ke();var r=t.frame;if(!r){var i=hh({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return Qe({},t,{subject:i})}var s=n.oldFrameMaxScroll;s||ke();var a=jV(r,s),o=hh({page:t.subject.page,axis:t.axis,frame:a,withPlaceholder:null});return Qe({},t,{subject:o,frame:a})},bge=function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,r=e.insideDestination,i=e.draggable,s=e.draggables,a=e.destination,o=e.viewport,l=e.afterCritical;if(!n){if(r.length)return null;var u={displaced:Tg,displacedBy:SV,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},d=aE({impact:u,draggable:i,droppable:a,draggables:s,afterCritical:l}),f=Jh(i,a)?a:OV(a,i,s),h=AV({draggable:i,destination:f,newPageBorderBoxCenter:d,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return h?u:null}var p=t[a.axis.line]<=n.page.borderBox.center[a.axis.line],m=function(){var v=n.descriptor.index;return n.descriptor.id===i.descriptor.id||p?v:v+1}(),g=L0(a.axis,i.displaceBy);return pb({draggable:i,insideDestination:r,destination:a,viewport:o,displacedBy:g,last:Tg,index:m})},wge=function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,r=e.draggable,i=e.isOver,s=e.draggables,a=e.droppables,o=e.viewport,l=e.afterCritical,u=mge({isMovingForward:t,pageBorderBoxCenter:n,source:i,droppables:a,viewport:o});if(!u)return null;var d=Qh(u.descriptor.id,s),f=yge({pageBorderBoxCenter:n,viewport:o,destination:u,insideDestination:d,afterCritical:l}),h=bge({previousPageBorderBoxCenter:n,destination:u,draggable:r,draggables:s,moveRelativeTo:f,insideDestination:d,viewport:o,afterCritical:l});if(!h)return null;var p=aE({impact:h,draggable:r,droppable:u,draggables:s,afterCritical:l}),m=wO({pageBorderBoxCenter:p,draggable:r,viewport:o});return{clientSelection:m,impact:h,scrollJumpRequest:null}},ss=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},Ege=function(t,n){var r=ss(t);return r?n[r]:null},Sge=function(e){var t=e.state,n=e.type,r=Ege(t.impact,t.dimensions.droppables),i=!!r,s=t.dimensions.droppables[t.critical.droppable.id],a=r||s,o=a.axis.direction,l=o==="vertical"&&(n==="MOVE_UP"||n==="MOVE_DOWN")||o==="horizontal"&&(n==="MOVE_LEFT"||n==="MOVE_RIGHT");if(l&&!i)return null;var u=n==="MOVE_DOWN"||n==="MOVE_RIGHT",d=t.dimensions.draggables[t.critical.draggable.id],f=t.current.page.borderBoxCenter,h=t.dimensions,p=h.draggables,m=h.droppables;return l?pge({isMovingForward:u,previousPageBorderBoxCenter:f,draggable:d,destination:a,draggables:p,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):wge({isMovingForward:u,previousPageBorderBoxCenter:f,draggable:d,isOver:a,draggables:p,droppables:m,viewport:t.viewport,afterCritical:t.afterCritical})};function fu(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function PV(e){var t=zs(e.top,e.bottom),n=zs(e.left,e.right);return function(i){return t(i.y)&&n(i.x)}}function _ge(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function Nge(e){var t=e.pageBorderBox,n=e.draggable,r=e.candidates,i=n.page.borderBox.center,s=r.map(function(a){var o=a.axis,l=ld(a.axis.line,t.center[o.line],a.page.borderBox.center[o.crossAxisLine]);return{id:a.descriptor.id,distance:Ng(i,l)}}).sort(function(a,o){return o.distance-a.distance});return s[0]?s[0].id:null}function Tge(e){var t=e.pageBorderBox,n=e.draggable,r=e.droppables,i=rE(r).filter(function(s){if(!s.isEnabled)return!1;var a=s.subject.active;if(!a||!_ge(t,a))return!1;if(PV(a)(t.center))return!0;var o=s.axis,l=a.center[o.crossAxisLine],u=t[o.crossAxisStart],d=t[o.crossAxisEnd],f=zs(a[o.crossAxisStart],a[o.crossAxisEnd]),h=f(u),p=f(d);return!h&&!p?!0:h?u<l:d>l});return i.length?i.length===1?i[0].descriptor.id:Nge({pageBorderBox:t,draggable:n,candidates:i}):null}var IV=function(t,n){return pa(R0(t,n))},Cge=function(e,t){var n=e.frame;return n?IV(t,n.scroll.diff.value):t};function DV(e){var t=e.displaced,n=e.id;return!!(t.visible[n]||t.invisible[n])}function kge(e){var t=e.draggable,n=e.closest,r=e.inHomeList;return n?r&&n.descriptor.index>t.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}var Age=function(e){var t=e.pageBorderBoxWithDroppableScroll,n=e.draggable,r=e.destination,i=e.insideDestination,s=e.last,a=e.viewport,o=e.afterCritical,l=r.axis,u=L0(r.axis,n.displaceBy),d=u.value,f=t[l.start],h=t[l.end],p=sE(n,i),m=Bc(p,function(v){var y=v.descriptor.id,b=v.page.borderBox.center[l.line],x=Sc(y,o),S=DV({displaced:s,id:y});return x?S?h<=b:f<b-d:S?h<=b+d:f<b}),g=kge({draggable:n,closest:m,inHomeList:Jh(n,r)});return pb({draggable:n,insideDestination:i,destination:r,viewport:a,last:s,displacedBy:u,index:g})},jge=4,Oge=function(e){var t=e.draggable,n=e.pageBorderBoxWithDroppableScroll,r=e.previousImpact,i=e.destination,s=e.insideDestination,a=e.afterCritical;if(!i.isCombineEnabled)return null;var o=i.axis,l=L0(i.axis,t.displaceBy),u=l.value,d=n[o.start],f=n[o.end],h=sE(t,s),p=Bc(h,function(g){var v=g.descriptor.id,y=g.page.borderBox,b=y[o.size],x=b/jge,S=Sc(v,a),E=DV({displaced:r.displaced,id:v});return S?E?f>y[o.start]+x&&f<y[o.end]-x:d>y[o.start]-u+x&&d<y[o.end]-u-x:E?f>y[o.start]+u+x&&f<y[o.end]+u-x:d>y[o.start]+x&&d<y[o.end]-x});if(!p)return null;var m={displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:i.descriptor.id}}};return m},MV=function(e){var t=e.pageOffset,n=e.draggable,r=e.draggables,i=e.droppables,s=e.previousImpact,a=e.viewport,o=e.afterCritical,l=IV(n.page.borderBox,t),u=Tge({pageBorderBox:l,draggable:n,droppables:i});if(!u)return Wme;var d=i[u],f=Qh(d.descriptor.id,r),h=Cge(d,l);return Oge({pageBorderBoxWithDroppableScroll:h,draggable:n,previousImpact:s,destination:d,insideDestination:f,afterCritical:o})||Age({pageBorderBoxWithDroppableScroll:h,draggable:n,destination:d,insideDestination:f,last:s.displaced,viewport:a,afterCritical:o})},EO=function(e,t){var n;return Qe({},e,(n={},n[t.descriptor.id]=t,n))},Pge=function(t){var n=t.previousImpact,r=t.impact,i=t.droppables,s=ss(n),a=ss(r);if(!s||s===a)return i;var o=i[s];if(!o.subject.withPlaceholder)return i;var l=xge(o);return EO(i,l)},Ige=function(e){var t=e.draggable,n=e.draggables,r=e.droppables,i=e.previousImpact,s=e.impact,a=Pge({previousImpact:i,impact:s,droppables:r}),o=ss(s);if(!o)return a;var l=r[o];if(Jh(t,l)||l.subject.withPlaceholder)return a;var u=OV(l,t,n);return EO(a,u)},km=function(e){var t=e.state,n=e.clientSelection,r=e.dimensions,i=e.viewport,s=e.impact,a=e.scrollJumpRequest,o=i||t.viewport,l=r||t.dimensions,u=n||t.current.client.selection,d=rs(u,t.initial.client.selection),f={offset:d,selection:u,borderBoxCenter:Br(t.initial.client.borderBoxCenter,d)},h={selection:Br(f.selection,o.scroll.current),borderBoxCenter:Br(f.borderBoxCenter,o.scroll.current),offset:Br(f.offset,o.scroll.diff.value)},p={client:f,page:h};if(t.phase==="COLLECTING")return Qe({phase:"COLLECTING"},t,{dimensions:l,viewport:o,current:p});var m=l.draggables[t.critical.draggable.id],g=s||MV({pageOffset:h.offset,draggable:m,draggables:l.draggables,droppables:l.droppables,previousImpact:t.impact,viewport:o,afterCritical:t.afterCritical}),v=Ige({draggable:m,impact:g,previousImpact:t.impact,draggables:l.draggables,droppables:l.droppables}),y=Qe({},t,{current:p,dimensions:{draggables:l.draggables,droppables:v},impact:g,viewport:o,scrollJumpRequest:a||null,forceShouldAnimate:a?!1:null});return y};function Dge(e,t){return e.map(function(n){return t[n]})}var RV=function(e){var t=e.impact,n=e.viewport,r=e.draggables,i=e.destination,s=e.forceShouldAnimate,a=t.displaced,o=Dge(a.all,r),l=Cg({afterDragging:o,destination:i,displacedBy:t.displacedBy,viewport:n.frame,forceShouldAnimate:s,last:a});return Qe({},t,{displaced:l})},LV=function(e){var t=e.impact,n=e.draggable,r=e.droppable,i=e.draggables,s=e.viewport,a=e.afterCritical,o=aE({impact:t,draggable:n,draggables:i,droppable:r,afterCritical:a});return wO({pageBorderBoxCenter:o,draggable:n,viewport:s})},FV=function(e){var t=e.state,n=e.dimensions,r=e.viewport;t.movementMode!=="SNAP"&&ke();var i=t.impact,s=r||t.viewport,a=n||t.dimensions,o=a.draggables,l=a.droppables,u=o[t.critical.draggable.id],d=ss(i);d||ke();var f=l[d],h=RV({impact:i,viewport:s,destination:f,draggables:o}),p=LV({impact:h,draggable:u,droppable:f,draggables:o,viewport:s,afterCritical:t.afterCritical});return km({impact:h,clientSelection:p,state:t,dimensions:a,viewport:s})},Mge=function(e){return{index:e.index,droppableId:e.droppableId}},BV=function(e){var t=e.draggable,n=e.home,r=e.draggables,i=e.viewport,s=L0(n.axis,t.displaceBy),a=Qh(n.descriptor.id,r),o=a.indexOf(t);o===-1&&ke();var l=a.slice(o+1),u=l.reduce(function(p,m){return p[m.descriptor.id]=!0,p},{}),d={inVirtualList:n.descriptor.mode==="virtual",displacedBy:s,effected:u},f=Cg({afterDragging:l,destination:n,displacedBy:s,last:null,viewport:i.frame,forceShouldAnimate:!1}),h={displaced:f,displacedBy:s,at:{type:"REORDER",destination:Mge(t.descriptor)}};return{impact:h,afterCritical:d}},Rge=function(e,t){return{draggables:e.draggables,droppables:EO(e.droppables,t)}},Lge=function(e){var t=e.draggable,n=e.offset,r=e.initialWindowScroll,i=cb(t.client,n),s=ub(i,r),a=Qe({},t,{placeholder:Qe({},t.placeholder,{client:i}),client:i,page:s});return a},Fge=function(e){var t=e.frame;return t||ke(),t},Bge=function(e){var t=e.additions,n=e.updatedDroppables,r=e.viewport,i=r.scroll.diff.value;return t.map(function(s){var a=s.descriptor.droppableId,o=n[a],l=Fge(o),u=l.scroll.diff.value,d=Br(i,u),f=Lge({draggable:s,offset:d,initialWindowScroll:r.scroll.initial});return f})},$ge=function(e){var t=e.state,n=e.published,r=n.modified.map(function(x){var S=t.dimensions.droppables[x.droppableId],E=mO(S,x.scroll);return E}),i=Qe({},t.dimensions.droppables,{},wV(r)),s=EV(Bge({additions:n.additions,updatedDroppables:i,viewport:t.viewport})),a=Qe({},t.dimensions.draggables,{},s);n.removals.forEach(function(x){delete a[x]});var o={droppables:i,draggables:a},l=ss(t.impact),u=l?o.droppables[l]:null,d=o.draggables[t.critical.draggable.id],f=o.droppables[t.critical.droppable.id],h=BV({draggable:d,home:f,draggables:a,viewport:t.viewport}),p=h.impact,m=h.afterCritical,g=u&&u.isCombineEnabled?t.impact:p,v=MV({pageOffset:t.current.page.offset,draggable:o.draggables[t.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:g,viewport:t.viewport,afterCritical:m}),y=Qe({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:v,onLiftImpact:p,dimensions:o,afterCritical:m,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return y;var b=Qe({phase:"DROP_PENDING"},y,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return b},h2=function(t){return t.movementMode==="SNAP"},$_=function(t,n,r){var i=Rge(t.dimensions,n);return!h2(t)||r?km({state:t,dimensions:i}):FV({state:t,dimensions:i})};function U_(e){return e.isDragging&&e.movementMode==="SNAP"?Qe({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var L4={phase:"IDLE",completed:null,shouldFlush:!1},Uge=function(e,t){if(e===void 0&&(e=L4),t.type==="FLUSH")return Qe({},L4,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&ke();var n=t.payload,r=n.critical,i=n.clientSelection,s=n.viewport,a=n.dimensions,o=n.movementMode,l=a.draggables[r.draggable.id],u=a.droppables[r.droppable.id],d={selection:i,borderBoxCenter:l.client.borderBox.center,offset:Nr},f={client:d,page:{selection:Br(d.selection,s.scroll.initial),borderBoxCenter:Br(d.selection,s.scroll.initial),offset:Br(d.selection,s.scroll.diff.value)}},h=rE(a.droppables).every(function(Ee){return!Ee.isFixedOnPage}),p=BV({draggable:l,home:u,draggables:a.draggables,viewport:s}),m=p.impact,g=p.afterCritical,v={phase:"DRAGGING",isDragging:!0,critical:r,movementMode:o,dimensions:a,initial:f,current:f,isWindowScrollAllowed:h,impact:m,afterCritical:g,onLiftImpact:m,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null};return v}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&ke();var y=Qe({phase:"COLLECTING"},e,{phase:"COLLECTING"});return y}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||ke(),$ge({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;fu(e)||ke();var b=t.payload.client;return uc(b,e.current.client.selection)?e:km({state:e,clientSelection:b,impact:h2(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return U_(e);fu(e)||ke();var x=t.payload,S=x.id,E=x.newScroll,_=e.dimensions.droppables[S];if(!_)return e;var T=mO(_,E);return $_(e,T,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;fu(e)||ke();var C=t.payload,k=C.id,A=C.isEnabled,j=e.dimensions.droppables[k];j||ke(),j.isEnabled===A&&ke();var D=Qe({},j,{isEnabled:A});return $_(e,D,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;fu(e)||ke();var P=t.payload,M=P.id,L=P.isCombineEnabled,O=e.dimensions.droppables[M];O||ke(),O.isCombineEnabled===L&&ke();var B=Qe({},O,{isCombineEnabled:L});return $_(e,B,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;fu(e)||ke(),e.isWindowScrollAllowed||ke();var R=t.payload.newScroll;if(uc(e.viewport.scroll.current,R))return U_(e);var F=kV(e.viewport,R);return h2(e)?FV({state:e,viewport:F}):km({state:e,viewport:F})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!fu(e))return e;var I=t.payload.maxScroll;if(uc(I,e.viewport.scroll.max))return e;var X=Qe({},e.viewport,{scroll:Qe({},e.viewport.scroll,{max:I})});return Qe({phase:"DRAGGING"},e,{viewport:X})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&ke();var G=Sge({state:e,type:t.type});return G?km({state:e,impact:G.impact,clientSelection:G.clientSelection,scrollJumpRequest:G.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var $=t.payload.reason;e.phase!=="COLLECTING"&&ke();var be=Qe({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:$});return be}if(t.type==="DROP_ANIMATE"){var je=t.payload,Q=je.completed,K=je.dropDuration,xe=je.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||ke();var ae={phase:"DROP_ANIMATING",completed:Q,dropDuration:K,newHomeClientOffset:xe,dimensions:e.dimensions};return ae}if(t.type==="DROP_COMPLETE"){var ue=t.payload.completed;return{phase:"IDLE",completed:ue,shouldFlush:!1}}return e},zge=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},Hge=function(t){return{type:"LIFT",payload:t}},Vge=function(t){return{type:"INITIAL_PUBLISH",payload:t}},Wge=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},qge=function(){return{type:"COLLECTION_STARTING",payload:null}},Kge=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},Gge=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},Yge=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},$V=function(t){return{type:"MOVE",payload:t}},Xge=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},Qge=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},Jge=function(){return{type:"MOVE_UP",payload:null}},Zge=function(){return{type:"MOVE_DOWN",payload:null}},e0e=function(){return{type:"MOVE_RIGHT",payload:null}},t0e=function(){return{type:"MOVE_LEFT",payload:null}},SO=function(){return{type:"FLUSH",payload:null}},n0e=function(t){return{type:"DROP_ANIMATE",payload:t}},_O=function(t){return{type:"DROP_COMPLETE",payload:t}},UV=function(t){return{type:"DROP",payload:t}},r0e=function(t){return{type:"DROP_PENDING",payload:t}},zV=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},i0e=function(e){return function(t){var n=t.getState,r=t.dispatch;return function(i){return function(s){if(s.type!=="LIFT"){i(s);return}var a=s.payload,o=a.id,l=a.clientSelection,u=a.movementMode,d=n();d.phase==="DROP_ANIMATING"&&r(_O({completed:d.completed})),n().phase!=="IDLE"&&ke(),r(SO()),r(zge({draggableId:o,movementMode:u}));var f={shouldPublishImmediately:u==="SNAP"},h={draggableId:o,scrollOptions:f},p=e.startPublishing(h),m=p.critical,g=p.dimensions,v=p.viewport;r(Vge({critical:m,dimensions:g,clientSelection:l,movementMode:u,viewport:v}))}}}},s0e=function(e){return function(){return function(t){return function(n){n.type==="INITIAL_PUBLISH"&&e.dragging(),n.type==="DROP_ANIMATE"&&e.dropping(n.payload.completed.result.reason),(n.type==="FLUSH"||n.type==="DROP_COMPLETE")&&e.resting(),t(n)}}}},NO={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},kg={opacity:{drop:0,combining:.7},scale:{drop:.75}},TO={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},su=TO.outOfTheWay+"s "+NO.outOfTheWay,Am={fluid:"opacity "+su,snap:"transform "+su+", opacity "+su,drop:function(t){var n=t+"s "+NO.drop;return"transform "+n+", opacity "+n},outOfTheWay:"transform "+su,placeholder:"height "+su+", width "+su+", margin "+su},F4=function(t){return uc(t,Nr)?null:"translate("+t.x+"px, "+t.y+"px)"},p2={moveTo:F4,drop:function(t,n){var r=F4(t);return r?n?r+" scale("+kg.scale.drop+")":r:null}},m2=TO.minDropTime,HV=TO.maxDropTime,a0e=HV-m2,B4=1500,o0e=.6,l0e=function(e){var t=e.current,n=e.destination,r=e.reason,i=Ng(t,n);if(i<=0)return m2;if(i>=B4)return HV;var s=i/B4,a=m2+a0e*s,o=r==="CANCEL"?a*o0e:a;return Number(o.toFixed(2))},c0e=function(e){var t=e.impact,n=e.draggable,r=e.dimensions,i=e.viewport,s=e.afterCritical,a=r.draggables,o=r.droppables,l=ss(t),u=l?o[l]:null,d=o[n.descriptor.droppableId],f=LV({impact:t,draggable:n,draggables:a,afterCritical:s,droppable:u||d,viewport:i}),h=rs(f,n.client.borderBox.center);return h},u0e=function(e){var t=e.draggables,n=e.reason,r=e.lastImpact,i=e.home,s=e.viewport,a=e.onLiftImpact;if(!r.at||n!=="DROP"){var o=RV({draggables:t,impact:a,destination:i,viewport:s,forceShouldAnimate:!0});return{impact:o,didDropInsideDroppable:!1}}if(r.at.type==="REORDER")return{impact:r,didDropInsideDroppable:!0};var l=Qe({},r,{displaced:Tg});return{impact:l,didDropInsideDroppable:!0}},d0e=function(e){var t=e.getState,n=e.dispatch;return function(r){return function(i){if(i.type!=="DROP"){r(i);return}var s=t(),a=i.payload.reason;if(s.phase==="COLLECTING"){n(r0e({reason:a}));return}if(s.phase!=="IDLE"){var o=s.phase==="DROP_PENDING"&&s.isWaiting;o&&ke(),s.phase==="DRAGGING"||s.phase==="DROP_PENDING"||ke();var l=s.critical,u=s.dimensions,d=u.draggables[s.critical.draggable.id],f=u0e({reason:a,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),h=f.impact,p=f.didDropInsideDroppable,m=p?yO(h):null,g=p?iE(h):null,v={index:l.draggable.index,droppableId:l.droppable.id},y={draggableId:d.descriptor.id,type:d.descriptor.type,source:v,reason:a,mode:s.movementMode,destination:m,combine:g},b=c0e({impact:h,draggable:d,dimensions:u,viewport:s.viewport,afterCritical:s.afterCritical}),x={critical:s.critical,afterCritical:s.afterCritical,result:y,impact:h},S=!uc(s.current.client.offset,b)||!!y.combine;if(!S){n(_O({completed:x}));return}var E=l0e({current:s.current.client.offset,destination:b,reason:a}),_={newHomeClientOffset:b,dropDuration:E,completed:x};n(n0e(_))}}}},VV=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function f0e(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(n){n.target!==window&&n.target!==window.document||e()}}}function h0e(e){var t=e.onWindowScroll;function n(){t(VV())}var r=_g(n),i=f0e(r),s=cc;function a(){return s!==cc}function o(){a()&&ke(),s=Ls(window,[i])}function l(){a()||ke(),r.cancel(),s(),s=cc}return{start:o,stop:l,isActive:a}}var p0e=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},m0e=function(e){var t=h0e({onWindowScroll:function(r){e.dispatch(Xge({newScroll:r}))}});return function(n){return function(r){!t.isActive()&&r.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&p0e(r)&&t.stop(),n(r)}}},g0e=function(e){var t=!1,n=!1,r=setTimeout(function(){n=!0}),i=function(a){t||n||(t=!0,e(a),clearTimeout(r))};return i.wasCalled=function(){return t},i},y0e=function(){var e=[],t=function(s){var a=gO(e,function(u){return u.timerId===s});a===-1&&ke();var o=e.splice(a,1),l=o[0];l.callback()},n=function(s){var a=setTimeout(function(){return t(a)}),o={timerId:a,callback:s};e.push(o)},r=function(){if(e.length){var s=[].concat(e);e.length=0,s.forEach(function(a){clearTimeout(a.timerId),a.callback()})}};return{add:n,flush:r}},v0e=function(t,n){return t==null&&n==null?!0:t==null||n==null?!1:t.droppableId===n.droppableId&&t.index===n.index},x0e=function(t,n){return t==null&&n==null?!0:t==null||n==null?!1:t.draggableId===n.draggableId&&t.droppableId===n.droppableId},b0e=function(t,n){if(t===n)return!0;var r=t.draggable.id===n.draggable.id&&t.draggable.droppableId===n.draggable.droppableId&&t.draggable.type===n.draggable.type&&t.draggable.index===n.draggable.index,i=t.droppable.id===n.droppable.id&&t.droppable.type===n.droppable.type;return r&&i},Ip=function(t,n){n()},Gy=function(t,n){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:n}},z_=function(t,n,r,i){if(!t){r(i(n));return}var s=g0e(r),a={announce:s};t(n,a),s.wasCalled()||r(i(n))},w0e=function(e,t){var n=y0e(),r=null,i=function(h,p){r&&ke(),Ip("onBeforeCapture",function(){var m=e().onBeforeCapture;if(m){var g={draggableId:h,mode:p};m(g)}})},s=function(h,p){r&&ke(),Ip("onBeforeDragStart",function(){var m=e().onBeforeDragStart;m&&m(Gy(h,p))})},a=function(h,p){r&&ke();var m=Gy(h,p);r={mode:p,lastCritical:h,lastLocation:m.source,lastCombine:null},n.add(function(){Ip("onDragStart",function(){return z_(e().onDragStart,m,t,lx.onDragStart)})})},o=function(h,p){var m=yO(p),g=iE(p);r||ke();var v=!b0e(h,r.lastCritical);v&&(r.lastCritical=h);var y=!v0e(r.lastLocation,m);y&&(r.lastLocation=m);var b=!x0e(r.lastCombine,g);if(b&&(r.lastCombine=g),!(!v&&!y&&!b)){var x=Qe({},Gy(h,r.mode),{combine:g,destination:m});n.add(function(){Ip("onDragUpdate",function(){return z_(e().onDragUpdate,x,t,lx.onDragUpdate)})})}},l=function(){r||ke(),n.flush()},u=function(h){r||ke(),r=null,Ip("onDragEnd",function(){return z_(e().onDragEnd,h,t,lx.onDragEnd)})},d=function(){if(r){var h=Qe({},Gy(r.lastCritical,r.mode),{combine:null,destination:null,reason:"CANCEL"});u(h)}};return{beforeCapture:i,beforeStart:s,start:a,update:o,flush:l,drop:u,abort:d}},E0e=function(e,t){var n=w0e(e,t);return function(r){return function(i){return function(s){if(s.type==="BEFORE_INITIAL_CAPTURE"){n.beforeCapture(s.payload.draggableId,s.payload.movementMode);return}if(s.type==="INITIAL_PUBLISH"){var a=s.payload.critical;n.beforeStart(a,s.payload.movementMode),i(s),n.start(a,s.payload.movementMode);return}if(s.type==="DROP_COMPLETE"){var o=s.payload.completed.result;n.flush(),i(s),n.drop(o);return}if(i(s),s.type==="FLUSH"){n.abort();return}var l=r.getState();l.phase==="DRAGGING"&&n.update(l.critical,l.impact)}}}},S0e=function(e){return function(t){return function(n){if(n.type!=="DROP_ANIMATION_FINISHED"){t(n);return}var r=e.getState();r.phase!=="DROP_ANIMATING"&&ke(),e.dispatch(_O({completed:r.completed}))}}},_0e=function(e){var t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return function(i){return function(s){if((s.type==="FLUSH"||s.type==="DROP_COMPLETE"||s.type==="DROP_ANIMATION_FINISHED")&&r(),i(s),s.type==="DROP_ANIMATE"){var a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var l=e.getState();l.phase==="DROP_ANIMATING"&&e.dispatch(zV())}};n=requestAnimationFrame(function(){n=null,t=Ls(window,[a])})}}}},N0e=function(e){return function(){return function(t){return function(n){(n.type==="DROP_COMPLETE"||n.type==="FLUSH"||n.type==="DROP_ANIMATE")&&e.stopPublishing(),t(n)}}}},T0e=function(e){var t=!1;return function(){return function(n){return function(r){if(r.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(r.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(r.type==="DROP_COMPLETE"){t=!1;var i=r.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},C0e=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},k0e=function(e){return function(t){return function(n){return function(r){if(C0e(r)){e.stop(),n(r);return}if(r.type==="INITIAL_PUBLISH"){n(r);var i=t.getState();i.phase!=="DRAGGING"&&ke(),e.start(i);return}n(r),e.scroll(t.getState())}}}},A0e=function(e){return function(t){return function(n){if(t(n),n.type==="PUBLISH_WHILE_DRAGGING"){var r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(UV({reason:r.reason})))}}}},j0e=YH,O0e=function(e){var t=e.dimensionMarshal,n=e.focusMarshal,r=e.styleMarshal,i=e.getResponders,s=e.announce,a=e.autoScroller;return GH(Uge,j0e(vpe(s0e(r),N0e(t),i0e(t),d0e,S0e,_0e,A0e,k0e(a),m0e,T0e(n),E0e(i,s))))},H_=function(){return{additions:{},removals:{},modified:{}}};function P0e(e){var t=e.registry,n=e.callbacks,r=H_(),i=null,s=function(){i||(n.collectionStarting(),i=requestAnimationFrame(function(){i=null;var d=r,f=d.additions,h=d.removals,p=d.modified,m=Object.keys(f).map(function(y){return t.draggable.getById(y).getDimension(Nr)}).sort(function(y,b){return y.descriptor.index-b.descriptor.index}),g=Object.keys(p).map(function(y){var b=t.droppable.getById(y),x=b.callbacks.getScrollWhileDragging();return{droppableId:y,scroll:x}}),v={additions:m,removals:Object.keys(h),modified:g};r=H_(),n.publish(v)}))},a=function(d){var f=d.descriptor.id;r.additions[f]=d,r.modified[d.descriptor.droppableId]=!0,r.removals[f]&&delete r.removals[f],s()},o=function(d){var f=d.descriptor;r.removals[f.id]=!0,r.modified[f.droppableId]=!0,r.additions[f.id]&&delete r.additions[f.id],s()},l=function(){i&&(cancelAnimationFrame(i),i=null,r=H_())};return{add:a,remove:o,stop:l}}var WV=function(e){var t=e.scrollHeight,n=e.scrollWidth,r=e.height,i=e.width,s=rs({x:n,y:t},{x:i,y:r}),a={x:Math.max(0,s.x),y:Math.max(0,s.y)};return a},qV=function(){var e=document.documentElement;return e||ke(),e},KV=function(){var e=qV(),t=WV({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},I0e=function(){var e=VV(),t=KV(),n=e.y,r=e.x,i=qV(),s=i.clientWidth,a=i.clientHeight,o=r+s,l=n+a,u=pa({top:n,left:r,right:o,bottom:l}),d={frame:u,scroll:{initial:e,current:e,max:t,diff:{value:Nr,displacement:Nr}}};return d},D0e=function(e){var t=e.critical,n=e.scrollOptions,r=e.registry,i=I0e(),s=i.scroll.current,a=t.droppable,o=r.droppable.getAllByType(a.type).map(function(f){return f.callbacks.getDimensionAndWatchScroll(s,n)}),l=r.draggable.getAllByType(t.draggable.type).map(function(f){return f.getDimension(s)}),u={draggables:EV(l),droppables:wV(o)},d={dimensions:u,critical:t,viewport:i};return d};function $4(e,t,n){if(n.descriptor.id===t.id||n.descriptor.type!==t.type)return!1;var r=e.droppable.getById(n.descriptor.droppableId);return r.descriptor.mode==="virtual"}var M0e=function(e,t){var n=null,r=P0e({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=function(p,m){e.droppable.exists(p)||ke(),n&&t.updateDroppableIsEnabled({id:p,isEnabled:m})},s=function(p,m){n&&(e.droppable.exists(p)||ke(),t.updateDroppableIsCombineEnabled({id:p,isCombineEnabled:m}))},a=function(p,m){n&&(e.droppable.exists(p)||ke(),t.updateDroppableScroll({id:p,newScroll:m}))},o=function(p,m){n&&e.droppable.getById(p).callbacks.scroll(m)},l=function(){if(n){r.stop();var p=n.critical.droppable;e.droppable.getAllByType(p.type).forEach(function(m){return m.callbacks.dragStopped()}),n.unsubscribe(),n=null}},u=function(p){n||ke();var m=n.critical.draggable;p.type==="ADDITION"&&$4(e,m,p.value)&&r.add(p.value),p.type==="REMOVAL"&&$4(e,m,p.value)&&r.remove(p.value)},d=function(p){n&&ke();var m=e.draggable.getById(p.draggableId),g=e.droppable.getById(m.descriptor.droppableId),v={draggable:m.descriptor,droppable:g.descriptor},y=e.subscribe(u);return n={critical:v,unsubscribe:y},D0e({critical:v,registry:e,scrollOptions:p.scrollOptions})},f={updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:s,scrollDroppable:o,updateDroppableScroll:a,startPublishing:d,stopPublishing:l};return f},GV=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},R0e=function(e){window.scrollBy(e.x,e.y)},L0e=Er(function(e){return rE(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),F0e=function(t,n){var r=Bc(L0e(n),function(i){return i.frame||ke(),PV(i.frame.pageMarginBox)(t)});return r},B0e=function(e){var t=e.center,n=e.destination,r=e.droppables;if(n){var i=r[n];return i.frame?i:null}var s=F0e(t,r);return s},dc={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},$0e=function(e,t){var n=e[t.size]*dc.startFromPercentage,r=e[t.size]*dc.maxScrollAtPercentage,i={startScrollingFrom:n,maxScrollValueAt:r};return i},YV=function(e){var t=e.startOfRange,n=e.endOfRange,r=e.current,i=n-t;if(i===0)return 0;var s=r-t,a=s/i;return a},CO=1,U0e=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return dc.maxPixelScroll;if(e===t.startScrollingFrom)return CO;var n=YV({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),r=1-n,i=dc.maxPixelScroll*dc.ease(r);return Math.ceil(i)},U4=dc.durationDampening.accelerateAt,z4=dc.durationDampening.stopDampeningAt,z0e=function(e,t){var n=t,r=z4,i=Date.now(),s=i-n;if(s>=z4)return e;if(s<U4)return CO;var a=YV({startOfRange:U4,endOfRange:r,current:s}),o=e*dc.ease(a);return Math.ceil(o)},H4=function(e){var t=e.distanceToEdge,n=e.thresholds,r=e.dragStartTime,i=e.shouldUseTimeDampening,s=U0e(t,n);return s===0?0:i?Math.max(z0e(s,r),CO):s},V4=function(e){var t=e.container,n=e.distanceToEdges,r=e.dragStartTime,i=e.axis,s=e.shouldUseTimeDampening,a=$0e(t,i),o=n[i.end]<n[i.start];return o?H4({distanceToEdge:n[i.end],thresholds:a,dragStartTime:r,shouldUseTimeDampening:s}):-1*H4({distanceToEdge:n[i.start],thresholds:a,dragStartTime:r,shouldUseTimeDampening:s})},H0e=function(e){var t=e.container,n=e.subject,r=e.proposedScroll,i=n.height>t.height,s=n.width>t.width;return!s&&!i?r:s&&i?null:{x:s?0:r.x,y:i?0:r.y}},V0e=xV(function(e){return e===0?0:e}),XV=function(e){var t=e.dragStartTime,n=e.container,r=e.subject,i=e.center,s=e.shouldUseTimeDampening,a={top:i.y-n.top,right:n.right-i.x,bottom:n.bottom-i.y,left:i.x-n.left},o=V4({container:n,distanceToEdges:a,dragStartTime:t,axis:vO,shouldUseTimeDampening:s}),l=V4({container:n,distanceToEdges:a,dragStartTime:t,axis:NV,shouldUseTimeDampening:s}),u=V0e({x:l,y:o});if(uc(u,Nr))return null;var d=H0e({container:n,subject:r,proposedScroll:u});return d?uc(d,Nr)?null:d:null},W0e=xV(function(e){return e===0?0:e>0?1:-1}),kO=function(){var e=function(n,r){return n<0?n:n>r?n-r:0};return function(t){var n=t.current,r=t.max,i=t.change,s=Br(n,i),a={x:e(s.x,r.x),y:e(s.y,r.y)};return uc(a,Nr)?null:a}}(),QV=function(t){var n=t.max,r=t.current,i=t.change,s={x:Math.max(r.x,n.x),y:Math.max(r.y,n.y)},a=W0e(i),o=kO({max:s,current:r,change:a});return!o||a.x!==0&&o.x===0||a.y!==0&&o.y===0},AO=function(t,n){return QV({current:t.scroll.current,max:t.scroll.max,change:n})},q0e=function(t,n){if(!AO(t,n))return null;var r=t.scroll.max,i=t.scroll.current;return kO({current:i,max:r,change:n})},jO=function(t,n){var r=t.frame;return r?QV({current:r.scroll.current,max:r.scroll.max,change:n}):!1},K0e=function(t,n){var r=t.frame;return!r||!jO(t,n)?null:kO({current:r.scroll.current,max:r.scroll.max,change:n})},G0e=function(e){var t=e.viewport,n=e.subject,r=e.center,i=e.dragStartTime,s=e.shouldUseTimeDampening,a=XV({dragStartTime:i,container:t.frame,subject:n,center:r,shouldUseTimeDampening:s});return a&&AO(t,a)?a:null},Y0e=function(e){var t=e.droppable,n=e.subject,r=e.center,i=e.dragStartTime,s=e.shouldUseTimeDampening,a=t.frame;if(!a)return null;var o=XV({dragStartTime:i,container:a.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:s});return o&&jO(t,o)?o:null},W4=function(e){var t=e.state,n=e.dragStartTime,r=e.shouldUseTimeDampening,i=e.scrollWindow,s=e.scrollDroppable,a=t.current.page.borderBoxCenter,o=t.dimensions.draggables[t.critical.draggable.id],l=o.page.marginBox;if(t.isWindowScrollAllowed){var u=t.viewport,d=G0e({dragStartTime:n,viewport:u,subject:l,center:a,shouldUseTimeDampening:r});if(d){i(d);return}}var f=B0e({center:a,destination:ss(t.impact),droppables:t.dimensions.droppables});if(f){var h=Y0e({dragStartTime:n,droppable:f,subject:l,center:a,shouldUseTimeDampening:r});h&&s(f.descriptor.id,h)}},X0e=function(e){var t=e.scrollWindow,n=e.scrollDroppable,r=_g(t),i=_g(n),s=null,a=function(d){s||ke();var f=s,h=f.shouldUseTimeDampening,p=f.dragStartTime;W4({state:d,scrollWindow:r,scrollDroppable:i,dragStartTime:p,shouldUseTimeDampening:h})},o=function(d){s&&ke();var f=Date.now(),h=!1,p=function(){h=!0};W4({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:p,scrollDroppable:p}),s={dragStartTime:f,shouldUseTimeDampening:h},h&&a(d)},l=function(){s&&(r.cancel(),i.cancel(),s=null)};return{start:o,stop:l,scroll:a}},Q0e=function(e){var t=e.move,n=e.scrollDroppable,r=e.scrollWindow,i=function(u,d){var f=Br(u.current.client.selection,d);t({client:f})},s=function(u,d){if(!jO(u,d))return d;var f=K0e(u,d);if(!f)return n(u.descriptor.id,d),null;var h=rs(d,f);n(u.descriptor.id,h);var p=rs(d,h);return p},a=function(u,d,f){if(!u||!AO(d,f))return f;var h=q0e(d,f);if(!h)return r(f),null;var p=rs(f,h);r(p);var m=rs(f,p);return m},o=function(u){var d=u.scrollJumpRequest;if(d){var f=ss(u.impact);f||ke();var h=s(u.dimensions.droppables[f],d);if(h){var p=u.viewport,m=a(u.isWindowScrollAllowed,p,h);m&&i(u,m)}}};return o},J0e=function(e){var t=e.scrollDroppable,n=e.scrollWindow,r=e.move,i=X0e({scrollWindow:n,scrollDroppable:t}),s=Q0e({move:r,scrollWindow:n,scrollDroppable:t}),a=function(u){if(u.phase==="DRAGGING"){if(u.movementMode==="FLUID"){i.scroll(u);return}u.scrollJumpRequest&&s(u)}},o={scroll:a,start:i.start,stop:i.stop};return o},ph="data-rbd",mh=function(){var e=ph+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),g2=function(){var e=ph+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Z0e=function(){var e=ph+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),q4={contextId:ph+"-scroll-container-context-id"},eye=function(t){return function(n){return"["+n+'="'+t+'"]'}},Dp=function(t,n){return t.map(function(r){var i=r.styles[n];return i?r.selector+" { "+i+" }":""}).join(" ")},tye="pointer-events: none;",nye=function(e){var t=eye(e),n=function(){var o=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(mh.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:o,dragging:tye,dropAnimating:o}}}(),r=function(){var o=`
      transition: `+Am.outOfTheWay+`;
    `;return{selector:t(g2.contextId),styles:{dragging:o,dropAnimating:o,userCancel:o}}}(),i={selector:t(Z0e.contextId),styles:{always:"overflow-anchor: none;"}},s={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},a=[r,n,i,s];return{always:Dp(a,"always"),resting:Dp(a,"resting"),dragging:Dp(a,"dragging"),dropAnimating:Dp(a,"dropAnimating"),userCancel:Dp(a,"userCancel")}},as=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect,V_=function(){var t=document.querySelector("head");return t||ke(),t},K4=function(t){var n=document.createElement("style");return t&&n.setAttribute("nonce",t),n.type="text/css",n};function rye(e,t){var n=vt(function(){return nye(e)},[e]),r=w.useRef(null),i=w.useRef(null),s=Ke(Er(function(f){var h=i.current;h||ke(),h.textContent=f}),[]),a=Ke(function(f){var h=r.current;h||ke(),h.textContent=f},[]);as(function(){!r.current&&!i.current||ke();var f=K4(t),h=K4(t);return r.current=f,i.current=h,f.setAttribute(ph+"-always",e),h.setAttribute(ph+"-dynamic",e),V_().appendChild(f),V_().appendChild(h),a(n.always),s(n.resting),function(){var p=function(g){var v=g.current;v||ke(),V_().removeChild(v),g.current=null};p(r),p(i)}},[t,a,s,n.always,n.resting,e]);var o=Ke(function(){return s(n.dragging)},[s,n.dragging]),l=Ke(function(f){if(f==="DROP"){s(n.dropAnimating);return}s(n.userCancel)},[s,n.dropAnimating,n.userCancel]),u=Ke(function(){i.current&&s(n.resting)},[s,n.resting]),d=vt(function(){return{dragging:o,dropping:l,resting:u}},[o,l,u]);return d}var JV=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function oE(e){return e instanceof JV(e).HTMLElement}function iye(e,t){var n="["+mh.contextId+'="'+e+'"]',r=bV(document.querySelectorAll(n));if(!r.length)return null;var i=Bc(r,function(s){return s.getAttribute(mh.draggableId)===t});return!i||!oE(i)?null:i}function sye(e){var t=w.useRef({}),n=w.useRef(null),r=w.useRef(null),i=w.useRef(!1),s=Ke(function(h,p){var m={id:h,focus:p};return t.current[h]=m,function(){var v=t.current,y=v[h];y!==m&&delete v[h]}},[]),a=Ke(function(h){var p=iye(e,h);p&&p!==document.activeElement&&p.focus()},[e]),o=Ke(function(h,p){n.current===h&&(n.current=p)},[]),l=Ke(function(){r.current||i.current&&(r.current=requestAnimationFrame(function(){r.current=null;var h=n.current;h&&a(h)}))},[a]),u=Ke(function(h){n.current=null;var p=document.activeElement;p&&p.getAttribute(mh.draggableId)===h&&(n.current=h)},[]);as(function(){return i.current=!0,function(){i.current=!1;var h=r.current;h&&cancelAnimationFrame(h)}},[]);var d=vt(function(){return{register:s,tryRecordFocus:u,tryRestoreFocusRecorded:l,tryShiftRecord:o}},[s,u,l,o]);return d}function aye(){var e={draggables:{},droppables:{}},t=[];function n(f){return t.push(f),function(){var p=t.indexOf(f);p!==-1&&t.splice(p,1)}}function r(f){t.length&&t.forEach(function(h){return h(f)})}function i(f){return e.draggables[f]||null}function s(f){var h=i(f);return h||ke(),h}var a={register:function(h){e.draggables[h.descriptor.id]=h,r({type:"ADDITION",value:h})},update:function(h,p){var m=e.draggables[p.descriptor.id];m&&m.uniqueId===h.uniqueId&&(delete e.draggables[p.descriptor.id],e.draggables[h.descriptor.id]=h)},unregister:function(h){var p=h.descriptor.id,m=i(p);m&&h.uniqueId===m.uniqueId&&(delete e.draggables[p],r({type:"REMOVAL",value:h}))},getById:s,findById:i,exists:function(h){return!!i(h)},getAllByType:function(h){return hb(e.draggables).filter(function(p){return p.descriptor.type===h})}};function o(f){return e.droppables[f]||null}function l(f){var h=o(f);return h||ke(),h}var u={register:function(h){e.droppables[h.descriptor.id]=h},unregister:function(h){var p=o(h.descriptor.id);p&&h.uniqueId===p.uniqueId&&delete e.droppables[h.descriptor.id]},getById:l,findById:o,exists:function(h){return!!o(h)},getAllByType:function(h){return hb(e.droppables).filter(function(p){return p.descriptor.type===h})}};function d(){e.draggables={},e.droppables={},t.length=0}return{draggable:a,droppable:u,subscribe:n,clean:d}}function oye(){var e=vt(aye,[]);return w.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var OO=at.createContext(null),mb=function(){var e=document.body;return e||ke(),e},lye={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},cye=function(t){return"rbd-announcement-"+t};function uye(e){var t=vt(function(){return cye(e)},[e]),n=w.useRef(null);w.useEffect(function(){var s=document.createElement("div");return n.current=s,s.id=t,s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true"),Qe(s.style,lye),mb().appendChild(s),function(){setTimeout(function(){var l=mb();l.contains(s)&&l.removeChild(s),s===n.current&&(n.current=null)})}},[t]);var r=Ke(function(i){var s=n.current;if(s){s.textContent=i;return}},[]);return r}var dye=0,fye={separator:"::"};function PO(e,t){return t===void 0&&(t=fye),vt(function(){return""+e+t.separator+dye++},[t.separator,e])}function hye(e){var t=e.contextId,n=e.uniqueId;return"rbd-hidden-text-"+t+"-"+n}function pye(e){var t=e.contextId,n=e.text,r=PO("hidden-text",{separator:"-"}),i=vt(function(){return hye({contextId:t,uniqueId:r})},[r,t]);return w.useEffect(function(){var a=document.createElement("div");return a.id=i,a.textContent=n,a.style.display="none",mb().appendChild(a),function(){var l=mb();l.contains(a)&&l.removeChild(a)}},[i,n]),i}var lE=at.createContext(null);function ZV(e){var t=w.useRef(e);return w.useEffect(function(){t.current=e}),t}function mye(){var e=null;function t(){return!!e}function n(a){return a===e}function r(a){e&&ke();var o={abandon:a};return e=o,o}function i(){e||ke(),e=null}function s(){e&&(e.abandon(),i())}return{isClaimed:t,isActive:n,claim:r,release:i,tryAbandon:s}}var gye=9,yye=13,IO=27,eW=32,vye=33,xye=34,bye=35,wye=36,Eye=37,Sye=38,_ye=39,Nye=40,Yy,Tye=(Yy={},Yy[yye]=!0,Yy[gye]=!0,Yy),tW=function(e){Tye[e.keyCode]&&e.preventDefault()},cE=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],n=Bc(t,function(r){return"on"+r in document});return n||e}(),nW=0,G4=5;function Cye(e,t){return Math.abs(t.x-e.x)>=G4||Math.abs(t.y-e.y)>=G4}var Y4={type:"IDLE"};function kye(e){var t=e.cancel,n=e.completed,r=e.getPhase,i=e.setPhase;return[{eventName:"mousemove",fn:function(a){var o=a.button,l=a.clientX,u=a.clientY;if(o===nW){var d={x:l,y:u},f=r();if(f.type==="DRAGGING"){a.preventDefault(),f.actions.move(d);return}f.type!=="PENDING"&&ke();var h=f.point;if(Cye(h,d)){a.preventDefault();var p=f.actions.fluidLift(d);i({type:"DRAGGING",actions:p})}}}},{eventName:"mouseup",fn:function(a){var o=r();if(o.type!=="DRAGGING"){t();return}a.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"mousedown",fn:function(a){r().type==="DRAGGING"&&a.preventDefault(),t()}},{eventName:"keydown",fn:function(a){var o=r();if(o.type==="PENDING"){t();return}if(a.keyCode===IO){a.preventDefault(),t();return}tW(a)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){r().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(a){var o=r();if(o.type==="IDLE"&&ke(),o.actions.shouldRespectForcePress()){t();return}a.preventDefault()}},{eventName:cE,fn:t}]}function Aye(e){var t=w.useRef(Y4),n=w.useRef(cc),r=vt(function(){return{eventName:"mousedown",fn:function(f){if(!f.defaultPrevented&&f.button===nW&&!(f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)){var h=e.findClosestDraggableId(f);if(h){var p=e.tryGetLock(h,a,{sourceEvent:f});if(p){f.preventDefault();var m={x:f.clientX,y:f.clientY};n.current(),u(p,m)}}}}}},[e]),i=vt(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(f){if(!f.defaultPrevented){var h=e.findClosestDraggableId(f);if(h){var p=e.findOptionsForDraggable(h);p&&(p.shouldRespectForcePress||e.canGetLock(h)&&f.preventDefault())}}}}},[e]),s=Ke(function(){var f={passive:!1,capture:!0};n.current=Ls(window,[i,r],f)},[i,r]),a=Ke(function(){var d=t.current;d.type!=="IDLE"&&(t.current=Y4,n.current(),s())},[s]),o=Ke(function(){var d=t.current;a(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[a]),l=Ke(function(){var f={capture:!0,passive:!1},h=kye({cancel:o,completed:a,getPhase:function(){return t.current},setPhase:function(m){t.current=m}});n.current=Ls(window,h,f)},[o,a]),u=Ke(function(f,h){t.current.type!=="IDLE"&&ke(),t.current={type:"PENDING",point:h,actions:f},l()},[l]);as(function(){return s(),function(){n.current()}},[s])}var Yd;function jye(){}var Oye=(Yd={},Yd[xye]=!0,Yd[vye]=!0,Yd[wye]=!0,Yd[bye]=!0,Yd);function Pye(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:function(s){if(s.keyCode===IO){s.preventDefault(),n();return}if(s.keyCode===eW){s.preventDefault(),r();return}if(s.keyCode===Nye){s.preventDefault(),e.moveDown();return}if(s.keyCode===Sye){s.preventDefault(),e.moveUp();return}if(s.keyCode===_ye){s.preventDefault(),e.moveRight();return}if(s.keyCode===Eye){s.preventDefault(),e.moveLeft();return}if(Oye[s.keyCode]){s.preventDefault();return}tW(s)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:cE,fn:n}]}function Iye(e){var t=w.useRef(jye),n=vt(function(){return{eventName:"keydown",fn:function(s){if(s.defaultPrevented||s.keyCode!==eW)return;var a=e.findClosestDraggableId(s);if(!a)return;var o=e.tryGetLock(a,d,{sourceEvent:s});if(!o)return;s.preventDefault();var l=!0,u=o.snapLift();t.current();function d(){l||ke(),l=!1,t.current(),r()}t.current=Ls(window,Pye(u,d),{capture:!0,passive:!1})}}},[e]),r=Ke(function(){var s={passive:!1,capture:!0};t.current=Ls(window,[n],s)},[n]);as(function(){return r(),function(){t.current()}},[r])}var W_={type:"IDLE"},Dye=120,Mye=.15;function Rye(e){var t=e.cancel,n=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(i){i.preventDefault()}},{eventName:"keydown",fn:function(i){if(n().type!=="DRAGGING"){t();return}i.keyCode===IO&&i.preventDefault(),t()}},{eventName:cE,fn:t}]}function Lye(e){var t=e.cancel,n=e.completed,r=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(s){var a=r();if(a.type!=="DRAGGING"){t();return}a.hasMoved=!0;var o=s.touches[0],l=o.clientX,u=o.clientY,d={x:l,y:u};s.preventDefault(),a.actions.move(d)}},{eventName:"touchend",fn:function(s){var a=r();if(a.type!=="DRAGGING"){t();return}s.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"touchcancel",fn:function(s){if(r().type!=="DRAGGING"){t();return}s.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(s){var a=r();a.type==="IDLE"&&ke();var o=s.touches[0];if(o){var l=o.force>=Mye;if(l){var u=a.actions.shouldRespectForcePress();if(a.type==="PENDING"){u&&t();return}if(u){if(a.hasMoved){s.preventDefault();return}t();return}s.preventDefault()}}}},{eventName:cE,fn:t}]}function Fye(e){var t=w.useRef(W_),n=w.useRef(cc),r=Ke(function(){return t.current},[]),i=Ke(function(p){t.current=p},[]),s=vt(function(){return{eventName:"touchstart",fn:function(p){if(!p.defaultPrevented){var m=e.findClosestDraggableId(p);if(m){var g=e.tryGetLock(m,o,{sourceEvent:p});if(g){var v=p.touches[0],y=v.clientX,b=v.clientY,x={x:y,y:b};n.current(),f(g,x)}}}}}},[e]),a=Ke(function(){var p={capture:!0,passive:!1};n.current=Ls(window,[s],p)},[s]),o=Ke(function(){var h=t.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),i(W_),n.current(),a())},[a,i]),l=Ke(function(){var h=t.current;o(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[o]),u=Ke(function(){var p={capture:!0,passive:!1},m={cancel:l,completed:o,getPhase:r},g=Ls(window,Lye(m),p),v=Ls(window,Rye(m),p);n.current=function(){g(),v()}},[l,r,o]),d=Ke(function(){var p=r();p.type!=="PENDING"&&ke();var m=p.actions.fluidLift(p.point);i({type:"DRAGGING",actions:m,hasMoved:!1})},[r,i]),f=Ke(function(p,m){r().type!=="IDLE"&&ke();var g=setTimeout(d,Dye);i({type:"PENDING",point:m,actions:p,longPressTimerId:g}),u()},[u,r,i,d]);as(function(){return a(),function(){n.current();var m=r();m.type==="PENDING"&&(clearTimeout(m.longPressTimerId),i(W_))}},[r,a,i]),as(function(){var p=Ls(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return p},[])}var Bye={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function rW(e,t){if(t==null)return!1;var n=!!Bye[t.tagName.toLowerCase()];if(n)return!0;var r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:rW(e,t.parentElement)}function $ye(e,t){var n=t.target;return oE(n)?rW(e,n):!1}var Uye=function(e){return pa(e.getBoundingClientRect()).center};function zye(e){return e instanceof JV(e).Element}var Hye=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],n=Bc(t,function(r){return r in Element.prototype});return n||e}();function iW(e,t){return e==null?null:e[Hye](t)?e:iW(e.parentElement,t)}function Vye(e,t){return e.closest?e.closest(t):iW(e,t)}function Wye(e){return"["+mh.contextId+'="'+e+'"]'}function qye(e,t){var n=t.target;if(!zye(n))return null;var r=Wye(e),i=Vye(n,r);return!i||!oE(i)?null:i}function Kye(e,t){var n=qye(e,t);return n?n.getAttribute(mh.draggableId):null}function Gye(e,t){var n="["+g2.contextId+'="'+e+'"]',r=bV(document.querySelectorAll(n)),i=Bc(r,function(s){return s.getAttribute(g2.id)===t});return!i||!oE(i)?null:i}function Yye(e){e.preventDefault()}function Xy(e){var t=e.expected,n=e.phase,r=e.isLockActive;return e.shouldWarn,!(!r()||t!==n)}function sW(e){var t=e.lockAPI,n=e.store,r=e.registry,i=e.draggableId;if(t.isClaimed())return!1;var s=r.draggable.findById(i);return!(!s||!s.options.isEnabled||!GV(n.getState(),i))}function Xye(e){var t=e.lockAPI,n=e.contextId,r=e.store,i=e.registry,s=e.draggableId,a=e.forceSensorStop,o=e.sourceEvent,l=sW({lockAPI:t,store:r,registry:i,draggableId:s});if(!l)return null;var u=i.draggable.getById(s),d=Gye(n,u.descriptor.id);if(!d||o&&!u.options.canDragInteractiveElements&&$ye(d,o))return null;var f=t.claim(a||cc),h="PRE_DRAG";function p(){return u.options.shouldRespectForcePress}function m(){return t.isActive(f)}function g(_,T){Xy({expected:_,phase:h,isLockActive:m,shouldWarn:!0})&&r.dispatch(T())}var v=g.bind(null,"DRAGGING");function y(_){function T(){t.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(T(),h!=="PRE_DRAG"&&ke()),r.dispatch(Hge(_.liftActionArgs)),h="DRAGGING";function C(k,A){if(A===void 0&&(A={shouldBlockNextClick:!1}),_.cleanup(),A.shouldBlockNextClick){var j=Ls(window,[{eventName:"click",fn:Yye,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(j)}T(),r.dispatch(UV({reason:k}))}return Qe({isActive:function(){return Xy({expected:"DRAGGING",phase:h,isLockActive:m,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(A){return C("DROP",A)},cancel:function(A){return C("CANCEL",A)}},_.actions)}function b(_){var T=_g(function(k){v(function(){return $V({client:k})})}),C=y({liftActionArgs:{id:s,clientSelection:_,movementMode:"FLUID"},cleanup:function(){return T.cancel()},actions:{move:T}});return Qe({},C,{move:T})}function x(){var _={moveUp:function(){return v(Jge)},moveRight:function(){return v(e0e)},moveDown:function(){return v(Zge)},moveLeft:function(){return v(t0e)}};return y({liftActionArgs:{id:s,clientSelection:Uye(d),movementMode:"SNAP"},cleanup:cc,actions:_})}function S(){var _=Xy({expected:"PRE_DRAG",phase:h,isLockActive:m,shouldWarn:!0});_&&t.release()}var E={isActive:function(){return Xy({expected:"PRE_DRAG",phase:h,isLockActive:m,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:b,snapLift:x,abort:S};return E}var Qye=[Aye,Iye,Fye];function Jye(e){var t=e.contextId,n=e.store,r=e.registry,i=e.customSensors,s=e.enableDefaultSensors,a=[].concat(s?Qye:[],i||[]),o=w.useState(function(){return mye()})[0],l=Ke(function(b,x){b.isDragging&&!x.isDragging&&o.tryAbandon()},[o]);as(function(){var b=n.getState(),x=n.subscribe(function(){var S=n.getState();l(b,S),b=S});return x},[o,n,l]),as(function(){return o.tryAbandon},[o.tryAbandon]);for(var u=Ke(function(y){return sW({lockAPI:o,registry:r,store:n,draggableId:y})},[o,r,n]),d=Ke(function(y,b,x){return Xye({lockAPI:o,registry:r,contextId:t,store:n,draggableId:y,forceSensorStop:b,sourceEvent:x&&x.sourceEvent?x.sourceEvent:null})},[t,o,r,n]),f=Ke(function(y){return Kye(t,y)},[t]),h=Ke(function(y){var b=r.draggable.findById(y);return b?b.options:null},[r.draggable]),p=Ke(function(){o.isClaimed()&&(o.tryAbandon(),n.getState().phase!=="IDLE"&&n.dispatch(SO()))},[o,n]),m=Ke(o.isClaimed,[o]),g=vt(function(){return{canGetLock:u,tryGetLock:d,findClosestDraggableId:f,findOptionsForDraggable:h,tryReleaseLock:p,isLockClaimed:m}},[u,d,f,h,p,m]),v=0;v<a.length;v++)a[v](g)}var Zye=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function Mp(e){return e.current||ke(),e.current}function eve(e){var t=e.contextId,n=e.setCallbacks,r=e.sensors,i=e.nonce,s=e.dragHandleUsageInstructions,a=w.useRef(null),o=ZV(e),l=Ke(function(){return Zye(o.current)},[o]),u=uye(t),d=pye({contextId:t,text:s}),f=rye(t,i),h=Ke(function(k){Mp(a).dispatch(k)},[]),p=vt(function(){return v4({publishWhileDragging:Wge,updateDroppableScroll:Kge,updateDroppableIsEnabled:Gge,updateDroppableIsCombineEnabled:Yge,collectionStarting:qge},h)},[h]),m=oye(),g=vt(function(){return M0e(m,p)},[m,p]),v=vt(function(){return J0e(Qe({scrollWindow:R0e,scrollDroppable:g.scrollDroppable},v4({move:$V},h)))},[g.scrollDroppable,h]),y=sye(t),b=vt(function(){return O0e({announce:u,autoScroller:v,dimensionMarshal:g,focusMarshal:y,getResponders:l,styleMarshal:f})},[u,v,g,y,l,f]);a.current=b;var x=Ke(function(){var k=Mp(a),A=k.getState();A.phase!=="IDLE"&&k.dispatch(SO())},[]),S=Ke(function(){var k=Mp(a).getState();return k.isDragging||k.phase==="DROP_ANIMATING"},[]),E=vt(function(){return{isDragging:S,tryAbort:x}},[S,x]);n(E);var _=Ke(function(k){return GV(Mp(a).getState(),k)},[]),T=Ke(function(){return fu(Mp(a).getState())},[]),C=vt(function(){return{marshal:g,focus:y,contextId:t,canLift:_,isMovementAllowed:T,dragHandleUsageInstructionsId:d,registry:m}},[t,g,d,y,_,T,m]);return Jye({contextId:t,store:b,registry:m,customSensors:r,enableDefaultSensors:e.enableDefaultSensors!==!1}),w.useEffect(function(){return x},[x]),at.createElement(lE.Provider,{value:C},at.createElement(Spe,{context:OO,store:b},e.children))}var tve=0;function nve(){return vt(function(){return""+tve++},[])}function rve(e){var t=nve(),n=e.dragHandleUsageInstructions||lx.dragHandleUsageInstructions;return at.createElement(Ime,null,function(r){return at.createElement(eve,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var aW=function(t){return function(n){return t===n}},ive=aW("scroll"),sve=aW("auto"),X4=function(t,n){return n(t.overflowX)||n(t.overflowY)},ave=function(t){var n=window.getComputedStyle(t),r={overflowX:n.overflowX,overflowY:n.overflowY};return X4(r,ive)||X4(r,sve)},ove=function(){return!1},lve=function e(t){return t==null?null:t===document.body?ove()?t:null:t===document.documentElement?null:ave(t)?t:e(t.parentElement)},y2=function(e){return{x:e.scrollLeft,y:e.scrollTop}},cve=function e(t){if(!t)return!1;var n=window.getComputedStyle(t);return n.position==="fixed"?!0:e(t.parentElement)},uve=function(e){var t=lve(e),n=cve(e);return{closestScrollable:t,isFixedOnPage:n}},dve=function(e){var t=e.descriptor,n=e.isEnabled,r=e.isCombineEnabled,i=e.isFixedOnPage,s=e.direction,a=e.client,o=e.page,l=e.closest,u=function(){if(!l)return null;var p=l.scrollSize,m=l.client,g=WV({scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth,height:m.paddingBox.height,width:m.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:m,scrollSize:p,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:g,diff:{value:Nr,displacement:Nr}}}}(),d=s==="vertical"?vO:NV,f=hh({page:o,withPlaceholder:null,axis:d,frame:u}),h={descriptor:t,isCombineEnabled:r,isFixedOnPage:i,axis:d,isEnabled:n,client:a,page:o,frame:u,subject:f};return h},fve=function(t,n){var r=mV(t);if(!n||t!==n)return r;var i=r.paddingBox.top-n.scrollTop,s=r.paddingBox.left-n.scrollLeft,a=i+n.scrollHeight,o=s+n.scrollWidth,l={top:i,right:o,bottom:a,left:s},u=hO(l,r.border),d=pO({borderBox:u,margin:r.margin,border:r.border,padding:r.padding});return d},hve=function(e){var t=e.ref,n=e.descriptor,r=e.env,i=e.windowScroll,s=e.direction,a=e.isDropDisabled,o=e.isCombineEnabled,l=e.shouldClipSubject,u=r.closestScrollable,d=fve(t,u),f=ub(d,i),h=function(){if(!u)return null;var m=mV(u),g={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:m,page:ub(m,i),scroll:y2(u),scrollSize:g,shouldClipSubject:l}}(),p=dve({descriptor:n,isEnabled:!a,isCombineEnabled:o,isFixedOnPage:r.isFixedOnPage,direction:s,client:d,page:f,closest:h});return p},pve={passive:!1},mve={passive:!0},Q4=function(e){return e.shouldPublishImmediately?pve:mve};function gb(e){var t=w.useContext(e);return t||ke(),t}var Qy=function(t){return t&&t.env.closestScrollable||null};function gve(e){var t=w.useRef(null),n=gb(lE),r=PO("droppable"),i=n.registry,s=n.marshal,a=ZV(e),o=vt(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),l=w.useRef(o),u=vt(function(){return Er(function(S,E){t.current||ke();var _={x:S,y:E};s.updateDroppableScroll(o.id,_)})},[o.id,s]),d=Ke(function(){var S=t.current;return!S||!S.env.closestScrollable?Nr:y2(S.env.closestScrollable)},[]),f=Ke(function(){var S=d();u(S.x,S.y)},[d,u]),h=vt(function(){return _g(f)},[f]),p=Ke(function(){var S=t.current,E=Qy(S);S&&E||ke();var _=S.scrollOptions;if(_.shouldPublishImmediately){f();return}h()},[h,f]),m=Ke(function(S,E){t.current&&ke();var _=a.current,T=_.getDroppableRef();T||ke();var C=uve(T),k={ref:T,descriptor:o,env:C,scrollOptions:E};t.current=k;var A=hve({ref:T,descriptor:o,env:C,windowScroll:S,direction:_.direction,isDropDisabled:_.isDropDisabled,isCombineEnabled:_.isCombineEnabled,shouldClipSubject:!_.ignoreContainerClipping}),j=C.closestScrollable;return j&&(j.setAttribute(q4.contextId,n.contextId),j.addEventListener("scroll",p,Q4(k.scrollOptions))),A},[n.contextId,o,p,a]),g=Ke(function(){var S=t.current,E=Qy(S);return S&&E||ke(),y2(E)},[]),v=Ke(function(){var S=t.current;S||ke();var E=Qy(S);t.current=null,E&&(h.cancel(),E.removeAttribute(q4.contextId),E.removeEventListener("scroll",p,Q4(S.scrollOptions)))},[p,h]),y=Ke(function(S){var E=t.current;E||ke();var _=Qy(E);_||ke(),_.scrollTop+=S.y,_.scrollLeft+=S.x},[]),b=vt(function(){return{getDimensionAndWatchScroll:m,getScrollWhileDragging:g,dragStopped:v,scroll:y}},[v,m,g,y]),x=vt(function(){return{uniqueId:r,descriptor:o,callbacks:b}},[b,o,r]);as(function(){return l.current=x.descriptor,i.droppable.register(x),function(){t.current&&v(),i.droppable.unregister(x)}},[b,o,v,x,s,i.droppable]),as(function(){t.current&&s.updateDroppableIsEnabled(l.current.id,!e.isDropDisabled)},[e.isDropDisabled,s]),as(function(){t.current&&s.updateDroppableIsCombineEnabled(l.current.id,e.isCombineEnabled)},[e.isCombineEnabled,s])}function q_(){}var J4={width:0,height:0,margin:Bme},yve=function(t){var n=t.isAnimatingOpenOnMount,r=t.placeholder,i=t.animate;return n||i==="close"?J4:{height:r.client.borderBox.height,width:r.client.borderBox.width,margin:r.client.margin}},vve=function(t){var n=t.isAnimatingOpenOnMount,r=t.placeholder,i=t.animate,s=yve({isAnimatingOpenOnMount:n,placeholder:r,animate:i});return{display:r.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:i!=="none"?Am.placeholder:null}};function xve(e){var t=w.useRef(null),n=Ke(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),r=e.animate,i=e.onTransitionEnd,s=e.onClose,a=e.contextId,o=w.useState(e.animate==="open"),l=o[0],u=o[1];w.useEffect(function(){return l?r!=="open"?(n(),u(!1),q_):t.current?q_:(t.current=setTimeout(function(){t.current=null,u(!1)}),n):q_},[r,l,n]);var d=Ke(function(h){h.propertyName==="height"&&(i(),r==="close"&&s())},[r,s,i]),f=vve({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return at.createElement(e.placeholder.tagName,{style:f,"data-rbd-placeholder-context-id":a,onTransitionEnd:d,ref:e.innerRef})}var bve=at.memo(xve),DO=at.createContext(null),wve=function(e){KH(t,e);function t(){for(var r,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s))||this,r.state={isVisible:!!r.props.on,data:r.props.on,animate:r.props.shouldAnimate&&r.props.on?"open":"none"},r.onClose=function(){r.state.animate==="close"&&r.setState({isVisible:!1})},r}t.getDerivedStateFromProps=function(i,s){return i.shouldAnimate?i.on?{isVisible:!0,data:i.on,animate:"open"}:s.isVisible?{isVisible:!0,data:s.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!i.on,data:i.on,animate:"none"}};var n=t.prototype;return n.render=function(){if(!this.state.isVisible)return null;var i={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(i)},t}(at.PureComponent),Z4={dragging:5e3,dropAnimating:4500},Eve=function(t,n){return n?Am.drop(n.duration):t?Am.snap:Am.fluid},Sve=function(t,n){return t?n?kg.opacity.drop:kg.opacity.combining:null},_ve=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function Nve(e){var t=e.dimension,n=t.client,r=e.offset,i=e.combineWith,s=e.dropping,a=!!i,o=_ve(e),l=!!s,u=l?p2.drop(r,a):p2.moveTo(r),d={position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:Eve(o,s),transform:u,opacity:Sve(a,l),zIndex:l?Z4.dropAnimating:Z4.dragging,pointerEvents:"none"};return d}function Tve(e){return{transform:p2.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function Cve(e){return e.type==="DRAGGING"?Nve(e):Tve(e)}function kve(e,t,n){n===void 0&&(n=Nr);var r=window.getComputedStyle(t),i=t.getBoundingClientRect(),s=pV(i,r),a=ub(s,n),o={client:s,tagName:t.tagName.toLowerCase(),display:r.display},l={x:s.marginBox.width,y:s.marginBox.height},u={descriptor:e,placeholder:o,displaceBy:l,client:s,page:a};return u}function Ave(e){var t=PO("draggable"),n=e.descriptor,r=e.registry,i=e.getDraggableRef,s=e.canDragInteractiveElements,a=e.shouldRespectForcePress,o=e.isEnabled,l=vt(function(){return{canDragInteractiveElements:s,shouldRespectForcePress:a,isEnabled:o}},[s,o,a]),u=Ke(function(p){var m=i();return m||ke(),kve(n,m,p)},[n,i]),d=vt(function(){return{uniqueId:t,descriptor:n,options:l,getDimension:u}},[n,u,l,t]),f=w.useRef(d),h=w.useRef(!0);as(function(){return r.draggable.register(f.current),function(){return r.draggable.unregister(f.current)}},[r.draggable]),as(function(){if(h.current){h.current=!1;return}var p=f.current;f.current=d,r.draggable.update(d,p)},[d,r.draggable])}function jve(e){e.preventDefault()}function Ove(e){var t=w.useRef(null),n=Ke(function(k){t.current=k},[]),r=Ke(function(){return t.current},[]),i=gb(lE),s=i.contextId,a=i.dragHandleUsageInstructionsId,o=i.registry,l=gb(DO),u=l.type,d=l.droppableId,f=vt(function(){return{id:e.draggableId,index:e.index,type:u,droppableId:d}},[e.draggableId,e.index,u,d]),h=e.children,p=e.draggableId,m=e.isEnabled,g=e.shouldRespectForcePress,v=e.canDragInteractiveElements,y=e.isClone,b=e.mapped,x=e.dropAnimationFinished;if(!y){var S=vt(function(){return{descriptor:f,registry:o,getDraggableRef:r,canDragInteractiveElements:v,shouldRespectForcePress:g,isEnabled:m}},[f,o,r,v,g,m]);Ave(S)}var E=vt(function(){return m?{tabIndex:0,role:"button","aria-describedby":a,"data-rbd-drag-handle-draggable-id":p,"data-rbd-drag-handle-context-id":s,draggable:!1,onDragStart:jve}:null},[s,a,p,m]),_=Ke(function(k){b.type==="DRAGGING"&&b.dropping&&k.propertyName==="transform"&&x()},[x,b]),T=vt(function(){var k=Cve(b),A=b.type==="DRAGGING"&&b.dropping?_:null,j={innerRef:n,draggableProps:{"data-rbd-draggable-context-id":s,"data-rbd-draggable-id":p,style:k,onTransitionEnd:A},dragHandleProps:E};return j},[s,E,p,b,_,n]),C=vt(function(){return{draggableId:f.id,type:f.type,source:{index:f.index,droppableId:f.droppableId}}},[f.droppableId,f.id,f.index,f.type]);return h(T,b.snapshot,C)}var oW=function(e,t){return e===t},lW=function(e){var t=e.combine,n=e.destination;return n?n.droppableId:t?t.droppableId:null},Pve=function(t){return t.combine?t.combine.draggableId:null},Ive=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function Dve(){var e=Er(function(i,s){return{x:i,y:s}}),t=Er(function(i,s,a,o,l){return{isDragging:!0,isClone:s,isDropAnimating:!!l,dropAnimation:l,mode:i,draggingOver:a,combineWith:o,combineTargetFor:null}}),n=Er(function(i,s,a,o,l,u,d){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:l,combineWith:u,mode:s,offset:i,dimension:a,forceShouldAnimate:d,snapshot:t(s,o,l,u,null)}}}),r=function(s,a){if(s.isDragging){if(s.critical.draggable.id!==a.draggableId)return null;var o=s.current.client.offset,l=s.dimensions.draggables[a.draggableId],u=ss(s.impact),d=Ive(s.impact),f=s.forceShouldAnimate;return n(e(o.x,o.y),s.movementMode,l,a.isClone,u,d,f)}if(s.phase==="DROP_ANIMATING"){var h=s.completed;if(h.result.draggableId!==a.draggableId)return null;var p=a.isClone,m=s.dimensions.draggables[a.draggableId],g=h.result,v=g.mode,y=lW(g),b=Pve(g),x=s.dropDuration,S={duration:x,curve:NO.drop,moveTo:s.newHomeClientOffset,opacity:b?kg.opacity.drop:null,scale:b?kg.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:m,dropping:S,draggingOver:y,combineWith:b,mode:v,forceShouldAnimate:null,snapshot:t(v,p,y,b,S)}}}return null};return r}function cW(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var Mve={mapped:{type:"SECONDARY",offset:Nr,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:cW(null)}};function Rve(){var e=Er(function(a,o){return{x:a,y:o}}),t=Er(cW),n=Er(function(a,o,l){return o===void 0&&(o=null),{mapped:{type:"SECONDARY",offset:a,combineTargetFor:o,shouldAnimateDisplacement:l,snapshot:t(o)}}}),r=function(o){return o?n(Nr,o,!0):null},i=function(o,l,u,d){var f=u.displaced.visible[o],h=!!(d.inVirtualList&&d.effected[o]),p=iE(u),m=p&&p.draggableId===o?l:null;if(!f){if(!h)return r(m);if(u.displaced.invisible[o])return null;var g=Xh(d.displacedBy.point),v=e(g.x,g.y);return n(v,m,!0)}if(h)return r(m);var y=u.displacedBy.point,b=e(y.x,y.y);return n(b,m,f.shouldAnimate)},s=function(o,l){if(o.isDragging)return o.critical.draggable.id===l.draggableId?null:i(l.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){var u=o.completed;return u.result.draggableId===l.draggableId?null:i(l.draggableId,u.result.draggableId,u.impact,u.afterCritical)}return null};return s}var Lve=function(){var t=Dve(),n=Rve(),r=function(s,a){return t(s,a)||n(s,a)||Mve};return r},Fve={dropAnimationFinished:zV},Bve=dV(Lve,Fve,null,{context:OO,pure:!0,areStatePropsEqual:oW})(Ove);function uW(e){var t=gb(DO),n=t.isUsingCloneFor;return n===e.draggableId&&!e.isClone?null:at.createElement(Bve,e)}function $ve(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return at.createElement(uW,Qe({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}function Uve(e){var t=w.useContext(lE);t||ke();var n=t.contextId,r=t.isMovementAllowed,i=w.useRef(null),s=w.useRef(null),a=e.children,o=e.droppableId,l=e.type,u=e.mode,d=e.direction,f=e.ignoreContainerClipping,h=e.isDropDisabled,p=e.isCombineEnabled,m=e.snapshot,g=e.useClone,v=e.updateViewportMaxScroll,y=e.getContainerForClone,b=Ke(function(){return i.current},[]),x=Ke(function(j){i.current=j},[]);Ke(function(){return s.current},[]);var S=Ke(function(j){s.current=j},[]),E=Ke(function(){r()&&v({maxScroll:KV()})},[r,v]);gve({droppableId:o,type:l,mode:u,direction:d,isDropDisabled:h,isCombineEnabled:p,ignoreContainerClipping:f,getDroppableRef:b});var _=at.createElement(wve,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(j){var D=j.onClose,P=j.data,M=j.animate;return at.createElement(bve,{placeholder:P,onClose:D,innerRef:S,animate:M,contextId:n,onTransitionEnd:E})}),T=vt(function(){return{innerRef:x,placeholder:_,droppableProps:{"data-rbd-droppable-id":o,"data-rbd-droppable-context-id":n}}},[n,o,_,x]),C=g?g.dragging.draggableId:null,k=vt(function(){return{droppableId:o,type:l,isUsingCloneFor:C}},[o,C,l]);function A(){if(!g)return null;var j=g.dragging,D=g.render,P=at.createElement(uW,{draggableId:j.draggableId,index:j.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(M,L){return D(M,L,j)});return Hj.createPortal(P,y())}return at.createElement(DO.Provider,{value:k},a(T,m),A())}var K_=function(t,n){return t===n.droppable.type},eL=function(t,n){return n.draggables[t.draggable.id]},zve=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},n=Qe({},t,{shouldAnimatePlaceholder:!1}),r=Er(function(a){return{draggableId:a.id,type:a.type,source:{index:a.index,droppableId:a.droppableId}}}),i=Er(function(a,o,l,u,d,f){var h=d.descriptor.id,p=d.descriptor.droppableId===a;if(p){var m=f?{render:f,dragging:r(d.descriptor)}:null,g={isDraggingOver:l,draggingOverWith:l?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:g,useClone:m}}if(!o)return n;if(!u)return t;var v={isDraggingOver:l,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:v,useClone:null}}),s=function(o,l){var u=l.droppableId,d=l.type,f=!l.isDropDisabled,h=l.renderClone;if(o.isDragging){var p=o.critical;if(!K_(d,p))return n;var m=eL(p,o.dimensions),g=ss(o.impact)===u;return i(u,f,g,g,m,h)}if(o.phase==="DROP_ANIMATING"){var v=o.completed;if(!K_(d,v.critical))return n;var y=eL(v.critical,o.dimensions);return i(u,f,lW(v.result)===u,ss(v.impact)===u,y,h)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){var b=o.completed;if(!K_(d,b.critical))return n;var x=ss(b.impact)===u,S=!!(b.impact.at&&b.impact.at.type==="COMBINE"),E=b.critical.droppable.id===u;return x?S?t:n:E?t:n}return n};return s},Hve={updateViewportMaxScroll:Qge};function Vve(){return document.body||ke(),document.body}var Wve={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Vve},dW=dV(zve,Hve,null,{context:OO,pure:!0,areStatePropsEqual:oW})(Uve);dW.defaultProps=Wve;const Z=w.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:Ve("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Z.displayName="Card";const de=w.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:Ve("flex flex-col space-y-1.5 p-6",e),...t}));de.displayName="CardHeader";const he=w.forwardRef(({className:e,...t},n)=>c.jsx("h3",{ref:n,className:Ve("text-2xl font-semibold leading-none tracking-tight",e),...t}));he.displayName="CardTitle";const gr=w.forwardRef(({className:e,...t},n)=>c.jsx("p",{ref:n,className:Ve("text-sm text-muted-foreground",e),...t}));gr.displayName="CardDescription";const ee=w.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:Ve("p-6 pt-0",e),...t}));ee.displayName="CardContent";const qve=w.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:Ve("flex items-center p-6 pt-0",e),...t}));qve.displayName="CardFooter";function Kve(e){const[t,n]=w.useState([]),[r,i]=w.useState(!0),[s,a]=w.useState(null),o=[{widget_type:"company-motto",title:"Company Motto",position_x:0,position_y:0,width:3,height:1,config:{motto:"Building the future, one project at a time."}},{widget_type:"monthly-expenses",title:"Monthly Expenses",position_x:0,position_y:1,width:1,height:1},{widget_type:"time-logged",title:"Time Logged",position_x:1,position_y:1,width:1,height:1},{widget_type:"quick-stats",title:"Quick Stats",position_x:2,position_y:1,width:1,height:1},{widget_type:"revenue-chart",title:"Revenue Chart",position_x:0,position_y:2,width:2,height:1},{widget_type:"recent-activities",title:"Recent Activities",position_x:2,position_y:2,width:1,height:1},{widget_type:"projects-overview",title:"Projects Overview",position_x:0,position_y:3,width:2,height:1},{widget_type:"cash-flow",title:"Cash Flow",position_x:2,position_y:3,width:1,height:1},{widget_type:"cash-flow-projections",title:"Cash Flow Projections",position_x:0,position_y:4,width:2,height:1}],l=v=>({id:v.id,type:v.widget_type,title:v.title,size:{w:v.width,h:v.height},position:{x:v.position_x,y:v.position_y,w:v.width,h:v.height},config:v.config}),u=async()=>{if(!e){i(!1);return}try{i(!0),a(null);const{data:v,error:y}=await J.from("dashboard_widgets").select("*").eq("user_id",e).eq("is_visible",!0).order("position_y",{ascending:!0}).order("position_x",{ascending:!0});if(y)throw y;if(!v||v.length===0){await d();return}const b=v.map(l);n(b)}catch(v){console.error("Error fetching widgets:",v),a(v instanceof Error?v.message:"Failed to load widgets"),f()}finally{i(!1)}},d=async()=>{if(e)try{const v=o.map(S=>({...S,user_id:e})),{data:y,error:b}=await J.from("dashboard_widgets").insert(v).select();if(b)throw b;const x=y.map(l);n(x)}catch(v){console.error("Error creating default widgets:",v),f()}},f=()=>{const v=localStorage.getItem(`widgets_${e}`);if(v)try{n(JSON.parse(v))}catch(y){console.error("Error loading widgets from localStorage:",y);const b=o.map((x,S)=>({id:(S+1).toString(),type:x.widget_type,title:x.title,size:{w:x.width,h:x.height},position:{x:x.position_x,y:x.position_y,w:x.width,h:x.height},config:x.config}));n(b)}},h=async v=>{if(n(v),e){localStorage.setItem(`widgets_${e}`,JSON.stringify(v));try{const y=v.map(b=>({id:b.id,position_x:b.position.x,position_y:b.position.y,width:b.size.w,height:b.size.h,title:b.title,config:b.config}));for(const b of y)await J.from("dashboard_widgets").update(b).eq("id",b.id).eq("user_id",e)}catch(y){console.error("Error saving widgets to Supabase:",y),a("Failed to save widget positions")}}},p=async v=>{if(e)try{const y={user_id:e,widget_type:v.type,title:v.title,position_x:v.position.x,position_y:v.position.y,width:v.size.w,height:v.size.h,config:v.config||{}},{data:b,error:x}=await J.from("dashboard_widgets").insert([y]).select().single();if(x)throw x;const S=l(b),E=[...t,S];n(E),localStorage.setItem(`widgets_${e}`,JSON.stringify(E))}catch(y){console.error("Error adding widget:",y),a("Failed to add widget");const b=[...t,v];n(b),localStorage.setItem(`widgets_${e}`,JSON.stringify(b))}},m=async v=>{if(e)try{const{error:y}=await J.from("dashboard_widgets").delete().eq("id",v).eq("user_id",e);if(y)throw y;const b=t.filter(x=>x.id!==v);n(b),localStorage.setItem(`widgets_${e}`,JSON.stringify(b))}catch(y){console.error("Error removing widget:",y),a("Failed to remove widget");const b=t.filter(x=>x.id!==v);n(b),localStorage.setItem(`widgets_${e}`,JSON.stringify(b))}},g=async(v,y)=>{if(e)try{const b={};y.title&&(b.title=y.title),y.config&&(b.config=y.config),y.position&&(b.position_x=y.position.x,b.position_y=y.position.y),y.size&&(b.width=y.size.w,b.height=y.size.h);const{error:x}=await J.from("dashboard_widgets").update(b).eq("id",v).eq("user_id",e);if(x)throw x;const S=t.map(E=>E.id===v?{...E,...y}:E);n(S),localStorage.setItem(`widgets_${e}`,JSON.stringify(S))}catch(b){console.error("Error updating widget:",b),a("Failed to update widget");const x=t.map(S=>S.id===v?{...S,...y}:S);n(x),localStorage.setItem(`widgets_${e}`,JSON.stringify(x))}};return w.useEffect(()=>{u()},[e]),{widgets:t,loading:r,error:s,updateWidgets:h,addWidget:p,removeWidget:m,updateWidget:g,refetch:u}}const mo=()=>{const[e,t]=w.useState([]),n=w.useCallback(({title:i,description:s,variant:a="default"})=>{const o=Math.random().toString(36).substr(2,9),l={id:o,title:i,description:s,variant:a};return t(u=>[...u,l]),console.log(`Toast: ${i}${s?` - ${s}`:""}`),setTimeout(()=>{t(u=>u.filter(d=>d.id!==o))},3e3),{id:o}},[]),r=w.useCallback(i=>{t(s=>s.filter(a=>a.id!==i))},[]);return{toast:n,dismiss:r,toasts:e}};function Gve(){const[e,t]=w.useState(null),[n,r]=w.useState(!0),{user:i}=Tr(),{toast:s}=mo(),a=w.useCallback(async()=>{if(!i){r(!1);return}try{const{data:d,error:f}=await J.from("user_profiles").select("*").eq("id",i.id).single();if(f)if(f.code==="PGRST116"){const{data:h,error:p}=await J.from("user_profiles").insert([{id:i.id,company_motto:"Building the future, one project at a time."}]).select().single();p?(console.error("Error creating profile:",p),s({title:"Error",description:"Failed to create user profile",variant:"destructive"})):t(h)}else console.error("Error fetching profile:",f),s({title:"Error",description:"Failed to load user profile",variant:"destructive"});else t(d)}catch(d){console.error("Error:",d),s({title:"Error",description:"An unexpected error occurred",variant:"destructive"})}finally{r(!1)}},[i,s]),o=async d=>{if(!i||!e)return!1;try{const{data:f,error:h}=await J.from("user_profiles").update({company_motto:d,updated_at:new Date().toISOString()}).eq("id",i.id).select().single();return h?(console.error("Error updating motto:",h),s({title:"Error",description:"Failed to save company motto",variant:"destructive"}),!1):(t(f),s({title:"Success",description:"Company motto updated successfully"}),!0)}catch(f){return console.error("Error:",f),s({title:"Error",description:"An unexpected error occurred",variant:"destructive"}),!1}},l=async d=>{if(!i||!e)return!1;try{const{data:f,error:h}=await J.from("user_profiles").update({...d,updated_at:new Date().toISOString()}).eq("id",i.id).select().single();return h?(console.error("Error updating profile:",h),s({title:"Error",description:"Failed to update profile",variant:"destructive"}),!1):(t(f),s({title:"Success",description:"Profile updated successfully"}),!0)}catch(f){return console.error("Error:",f),s({title:"Error",description:"An unexpected error occurred",variant:"destructive"}),!1}},u=async d=>{if(!i||!e)return!1;try{const{data:f,error:h}=await J.from("user_profiles").update({company_subtext:d,updated_at:new Date().toISOString()}).eq("id",i.id).select().single();return h?(console.error("Error updating company subtext:",h),s({title:"Error",description:"Failed to update company subtext",variant:"destructive"}),!1):(t(f),s({title:"Success",description:"Company subtext updated successfully"}),!0)}catch(f){return console.error("Error:",f),s({title:"Error",description:"An unexpected error occurred",variant:"destructive"}),!1}};return w.useEffect(()=>{a()},[a]),{profile:e,loading:n,updateCompanyMotto:o,updateCompanySubtext:u,updateProfile:l,refetch:a}}const fW=w.createContext({});function Yve(e){const t=w.useRef(null);return t.current===null&&(t.current=e()),t.current}const MO=typeof window<"u",Xve=MO?w.useLayoutEffect:w.useEffect,RO=w.createContext(null);function LO(e,t){e.indexOf(t)===-1&&e.push(t)}function FO(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Jo=(e,t,n)=>n>t?t:n<e?e:n;let BO=()=>{};const Zo={},hW=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function pW(e){return typeof e=="object"&&e!==null}const mW=e=>/^0[^.\s]+$/u.test(e);function $O(e){let t;return()=>(t===void 0&&(t=e()),t)}const Hs=e=>e,Qve=(e,t)=>n=>t(e(n)),F0=(...e)=>e.reduce(Qve),Ag=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class UO{constructor(){this.subscriptions=[]}add(t){return LO(this.subscriptions,t),()=>FO(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const to=e=>e*1e3,no=e=>e/1e3;function gW(e,t){return t?e*(1e3/t):0}const yW=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Jve=1e-7,Zve=12;function exe(e,t,n,r,i){let s,a,o=0;do a=t+(n-t)/2,s=yW(a,r,i)-e,s>0?n=a:t=a;while(Math.abs(s)>Jve&&++o<Zve);return a}function B0(e,t,n,r){if(e===t&&n===r)return Hs;const i=s=>exe(s,0,1,e,n);return s=>s===0||s===1?s:yW(i(s),t,r)}const vW=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,xW=e=>t=>1-e(1-t),bW=B0(.33,1.53,.69,.99),zO=xW(bW),wW=vW(zO),EW=e=>(e*=2)<1?.5*zO(e):.5*(2-Math.pow(2,-10*(e-1))),HO=e=>1-Math.sin(Math.acos(e)),SW=xW(HO),_W=vW(HO),txe=B0(.42,0,1,1),nxe=B0(0,0,.58,1),NW=B0(.42,0,.58,1),rxe=e=>Array.isArray(e)&&typeof e[0]!="number",TW=e=>Array.isArray(e)&&typeof e[0]=="number",ixe={linear:Hs,easeIn:txe,easeInOut:NW,easeOut:nxe,circIn:HO,circInOut:_W,circOut:SW,backIn:zO,backInOut:wW,backOut:bW,anticipate:EW},sxe=e=>typeof e=="string",tL=e=>{if(TW(e)){BO(e.length===4);const[t,n,r,i]=e;return B0(t,n,r,i)}else if(sxe(e))return ixe[e];return e},Jy=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function axe(e,t){let n=new Set,r=new Set,i=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){a.has(d)&&(u.schedule(d),e()),d(o)}const u={schedule:(d,f=!1,h=!1)=>{const m=h&&i?n:r;return f&&a.add(d),m.has(d)||m.add(d),d},cancel:d=>{r.delete(d),a.delete(d)},process:d=>{if(o=d,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),n.clear(),i=!1,s&&(s=!1,u.process(d))}};return u}const oxe=40;function CW(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=Jy.reduce((x,S)=>(x[S]=axe(s),x),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:d,update:f,preRender:h,render:p,postRender:m}=a,g=()=>{const x=Zo.useManualTiming?i.timestamp:performance.now();n=!1,Zo.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(x-i.timestamp,oxe),1)),i.timestamp=x,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),d.process(i),f.process(i),h.process(i),p.process(i),m.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(g))},v=()=>{n=!0,r=!0,i.isProcessing||e(g)};return{schedule:Jy.reduce((x,S)=>{const E=a[S];return x[S]=(_,T=!1,C=!1)=>(n||v(),E.schedule(_,T,C)),x},{}),cancel:x=>{for(let S=0;S<Jy.length;S++)a[Jy[S]].cancel(x)},state:i,steps:a}}const{schedule:hn,cancel:_c,state:Dr,steps:G_}=CW(typeof requestAnimationFrame<"u"?requestAnimationFrame:Hs,!0);let cx;function lxe(){cx=void 0}const Ii={now:()=>(cx===void 0&&Ii.set(Dr.isProcessing||Zo.useManualTiming?Dr.timestamp:performance.now()),cx),set:e=>{cx=e,queueMicrotask(lxe)}},kW=e=>t=>typeof t=="string"&&t.startsWith(e),VO=kW("--"),cxe=kW("var(--"),WO=e=>cxe(e)?uxe.test(e.split("/*")[0].trim()):!1,uxe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Zh={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},jg={...Zh,transform:e=>Jo(0,1,e)},Zy={...Zh,default:1},jm=e=>Math.round(e*1e5)/1e5,qO=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function dxe(e){return e==null}const fxe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,KO=(e,t)=>n=>!!(typeof n=="string"&&fxe.test(n)&&n.startsWith(e)||t&&!dxe(n)&&Object.prototype.hasOwnProperty.call(n,t)),AW=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(qO);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},hxe=e=>Jo(0,255,e),Y_={...Zh,transform:e=>Math.round(hxe(e))},_u={test:KO("rgb","red"),parse:AW("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Y_.transform(e)+", "+Y_.transform(t)+", "+Y_.transform(n)+", "+jm(jg.transform(r))+")"};function pxe(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const v2={test:KO("#"),parse:pxe,transform:_u.transform},$0=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),kl=$0("deg"),ro=$0("%"),et=$0("px"),mxe=$0("vh"),gxe=$0("vw"),nL={...ro,parse:e=>ro.parse(e)/100,transform:e=>ro.transform(e*100)},kf={test:KO("hsl","hue"),parse:AW("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+ro.transform(jm(t))+", "+ro.transform(jm(n))+", "+jm(jg.transform(r))+")"},qn={test:e=>_u.test(e)||v2.test(e)||kf.test(e),parse:e=>_u.test(e)?_u.parse(e):kf.test(e)?kf.parse(e):v2.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?_u.transform(e):kf.transform(e),getAnimatableNone:e=>{const t=qn.parse(e);return t.alpha=0,qn.transform(t)}},yxe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function vxe(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(qO))==null?void 0:t.length)||0)+(((n=e.match(yxe))==null?void 0:n.length)||0)>0}const jW="number",OW="color",xxe="var",bxe="var(",rL="${}",wxe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Og(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=t.replace(wxe,l=>(qn.test(l)?(r.color.push(s),i.push(OW),n.push(qn.parse(l))):l.startsWith(bxe)?(r.var.push(s),i.push(xxe),n.push(l)):(r.number.push(s),i.push(jW),n.push(parseFloat(l))),++s,rL)).split(rL);return{values:n,split:o,indexes:r,types:i}}function PW(e){return Og(e).values}function IW(e){const{split:t,types:n}=Og(e),r=t.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=t[a],i[a]!==void 0){const o=n[a];o===jW?s+=jm(i[a]):o===OW?s+=qn.transform(i[a]):s+=i[a]}return s}}const Exe=e=>typeof e=="number"?0:qn.test(e)?qn.getAnimatableNone(e):e;function Sxe(e){const t=PW(e);return IW(e)(t.map(Exe))}const Nc={test:vxe,parse:PW,createTransformer:IW,getAnimatableNone:Sxe};function X_(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function _xe({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,a=0;if(!t)i=s=a=n;else{const o=n<.5?n*(1+t):n+t-n*t,l=2*n-o;i=X_(l,o,e+1/3),s=X_(l,o,e),a=X_(l,o,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function yb(e,t){return n=>n>0?t:e}const vn=(e,t,n)=>e+(t-e)*n,Q_=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},Nxe=[v2,_u,kf],Txe=e=>Nxe.find(t=>t.test(e));function iL(e){const t=Txe(e);if(!t)return!1;let n=t.parse(e);return t===kf&&(n=_xe(n)),n}const sL=(e,t)=>{const n=iL(e),r=iL(t);if(!n||!r)return yb(e,t);const i={...n};return s=>(i.red=Q_(n.red,r.red,s),i.green=Q_(n.green,r.green,s),i.blue=Q_(n.blue,r.blue,s),i.alpha=vn(n.alpha,r.alpha,s),_u.transform(i))},x2=new Set(["none","hidden"]);function Cxe(e,t){return x2.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function kxe(e,t){return n=>vn(e,t,n)}function GO(e){return typeof e=="number"?kxe:typeof e=="string"?WO(e)?yb:qn.test(e)?sL:Oxe:Array.isArray(e)?DW:typeof e=="object"?qn.test(e)?sL:Axe:yb}function DW(e,t){const n=[...e],r=n.length,i=e.map((s,a)=>GO(s)(s,t[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}}function Axe(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=GO(e[i])(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function jxe(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],a=e.indexes[s][r[s]],o=e.values[a]??0;n[i]=o,r[s]++}return n}const Oxe=(e,t)=>{const n=Nc.createTransformer(t),r=Og(e),i=Og(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?x2.has(e)&&!i.values.length||x2.has(t)&&!r.values.length?Cxe(e,t):F0(DW(jxe(r,i),i.values),n):yb(e,t)};function MW(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?vn(e,t,n):GO(e)(e,t)}const Pxe=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>hn.update(t,n),stop:()=>_c(t),now:()=>Dr.isProcessing?Dr.timestamp:Ii.now()}},RW=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=Math.round(e(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},vb=2e4;function YO(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<vb;)t+=n,r=e.next(t);return t>=vb?1/0:t}function Ixe(e,t=100,n){const r=n({...e,keyframes:[0,t]}),i=Math.min(YO(r),vb);return{type:"keyframes",ease:s=>r.next(i*s).value/t,duration:no(i)}}const Dxe=5;function LW(e,t,n){const r=Math.max(t-Dxe,0);return gW(n-e(r),t-r)}const Cn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},J_=.001;function Mxe({duration:e=Cn.duration,bounce:t=Cn.bounce,velocity:n=Cn.velocity,mass:r=Cn.mass}){let i,s,a=1-t;a=Jo(Cn.minDamping,Cn.maxDamping,a),e=Jo(Cn.minDuration,Cn.maxDuration,no(e)),a<1?(i=u=>{const d=u*a,f=d*e,h=d-n,p=b2(u,a),m=Math.exp(-f);return J_-h/p*m},s=u=>{const f=u*a*e,h=f*n+n,p=Math.pow(a,2)*Math.pow(u,2)*e,m=Math.exp(-f),g=b2(Math.pow(u,2),a);return(-i(u)+J_>0?-1:1)*((h-p)*m)/g}):(i=u=>{const d=Math.exp(-u*e),f=(u-n)*e+1;return-J_+d*f},s=u=>{const d=Math.exp(-u*e),f=(n-u)*(e*e);return d*f});const o=5/e,l=Lxe(i,s,o);if(e=to(e),isNaN(l))return{stiffness:Cn.stiffness,damping:Cn.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:e}}}const Rxe=12;function Lxe(e,t,n){let r=n;for(let i=1;i<Rxe;i++)r=r-e(r)/t(r);return r}function b2(e,t){return e*Math.sqrt(1-t*t)}const Fxe=["duration","bounce"],Bxe=["stiffness","damping","mass"];function aL(e,t){return t.some(n=>e[n]!==void 0)}function $xe(e){let t={velocity:Cn.velocity,stiffness:Cn.stiffness,damping:Cn.damping,mass:Cn.mass,isResolvedFromDuration:!1,...e};if(!aL(e,Bxe)&&aL(e,Fxe))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Jo(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Cn.mass,stiffness:i,damping:s}}else{const n=Mxe(e);t={...t,...n,mass:Cn.mass},t.isResolvedFromDuration=!0}return t}function xb(e=Cn.visualDuration,t=Cn.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:u,mass:d,duration:f,velocity:h,isResolvedFromDuration:p}=$xe({...n,velocity:-no(n.velocity||0)}),m=h||0,g=u/(2*Math.sqrt(l*d)),v=a-s,y=no(Math.sqrt(l/d)),b=Math.abs(v)<5;r||(r=b?Cn.restSpeed.granular:Cn.restSpeed.default),i||(i=b?Cn.restDelta.granular:Cn.restDelta.default);let x;if(g<1){const E=b2(y,g);x=_=>{const T=Math.exp(-g*y*_);return a-T*((m+g*y*v)/E*Math.sin(E*_)+v*Math.cos(E*_))}}else if(g===1)x=E=>a-Math.exp(-y*E)*(v+(m+y*v)*E);else{const E=y*Math.sqrt(g*g-1);x=_=>{const T=Math.exp(-g*y*_),C=Math.min(E*_,300);return a-T*((m+g*y*v)*Math.sinh(C)+E*v*Math.cosh(C))/E}}const S={calculatedDuration:p&&f||null,next:E=>{const _=x(E);if(p)o.done=E>=f;else{let T=E===0?m:0;g<1&&(T=E===0?to(m):LW(x,E,_));const C=Math.abs(T)<=r,k=Math.abs(a-_)<=i;o.done=C&&k}return o.value=o.done?a:_,o},toString:()=>{const E=Math.min(YO(S),vb),_=RW(T=>S.next(E*T).value,E,30);return E+"ms "+_},toTransition:()=>{}};return S}xb.applyToOptions=e=>{const t=Ixe(e,100,xb);return e.ease=t.ease,e.duration=to(t.duration),e.type="keyframes",e};function w2({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:d}){const f=e[0],h={done:!1,value:f},p=C=>o!==void 0&&C<o||l!==void 0&&C>l,m=C=>o===void 0?l:l===void 0||Math.abs(o-C)<Math.abs(l-C)?o:l;let g=n*t;const v=f+g,y=a===void 0?v:a(v);y!==v&&(g=y-f);const b=C=>-g*Math.exp(-C/r),x=C=>y+b(C),S=C=>{const k=b(C),A=x(C);h.done=Math.abs(k)<=u,h.value=h.done?y:A};let E,_;const T=C=>{p(h.value)&&(E=C,_=xb({keyframes:[h.value,m(h.value)],velocity:LW(x,C,h.value),damping:i,stiffness:s,restDelta:u,restSpeed:d}))};return T(0),{calculatedDuration:null,next:C=>{let k=!1;return!_&&E===void 0&&(k=!0,S(C),T(C)),E!==void 0&&C>=E?_.next(C-E):(!k&&S(C),h)}}}function Uxe(e,t,n){const r=[],i=n||Zo.mix||MW,s=e.length-1;for(let a=0;a<s;a++){let o=i(e[a],e[a+1]);if(t){const l=Array.isArray(t)?t[a]||Hs:t;o=F0(l,o)}r.push(o)}return r}function zxe(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(BO(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=Uxe(t,r,i),l=o.length,u=d=>{if(a&&d<e[0])return t[0];let f=0;if(l>1)for(;f<e.length-2&&!(d<e[f+1]);f++);const h=Ag(e[f],e[f+1],d);return o[f](h)};return n?d=>u(Jo(e[0],e[s-1],d)):u}function Hxe(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Ag(0,t,r);e.push(vn(n,1,i))}}function Vxe(e){const t=[0];return Hxe(t,e.length-1),t}function Wxe(e,t){return e.map(n=>n*t)}function qxe(e,t){return e.map(()=>t||NW).splice(0,e.length-1)}function Om({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=rxe(r)?r.map(tL):tL(r),s={done:!1,value:t[0]},a=Wxe(n&&n.length===t.length?n:Vxe(t),e),o=zxe(a,t,{ease:Array.isArray(i)?i:qxe(t,i)});return{calculatedDuration:e,next:l=>(s.value=o(l),s.done=l>=e,s)}}const Kxe=e=>e!==null;function XO(e,{repeat:t,repeatType:n="loop"},r,i=1){const s=e.filter(Kxe),o=i<0||t&&n!=="loop"&&t%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const Gxe={decay:w2,inertia:w2,tween:Om,keyframes:Om,spring:xb};function FW(e){typeof e.type=="string"&&(e.type=Gxe[e.type])}class QO{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const Yxe=e=>e/100;class JO extends QO{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Ii.now()&&this.tick(Ii.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;FW(t);const{type:n=Om,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=t;let{keyframes:o}=t;const l=n||Om;l!==Om&&typeof o[0]!="number"&&(this.mixKeyframes=F0(Yxe,MW(o[0],o[1])),o=[0,100]);const u=l({...t,keyframes:o});s==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...o].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=YO(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:f,repeatType:h,repeatDelay:p,type:m,onUpdate:g,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const y=this.currentTime-u*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?y<0:y>i;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let x=this.currentTime,S=r;if(f){const C=Math.min(this.currentTime,i)/o;let k=Math.floor(C),A=C%1;!A&&C>=1&&(A=1),A===1&&k--,k=Math.min(k,f+1),!!(k%2)&&(h==="reverse"?(A=1-A,p&&(A-=p/o)):h==="mirror"&&(S=a)),x=Jo(0,1,A)*o}const E=b?{done:!1,value:d[0]}:S.next(x);s&&(E.value=s(E.value));let{done:_}=E;!b&&l!==null&&(_=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return T&&m!==w2&&(E.value=XO(d,this.options,v,this.speed)),g&&g(E.value),T&&this.finish(),E}then(t,n){return this.finished.then(t,n)}get duration(){return no(this.calculatedDuration)}get time(){return no(this.currentTime)}set time(t){var n;t=to(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Ii.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=no(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:t=Pxe,startTime:n}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ii.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function Xxe(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Nu=e=>e*180/Math.PI,E2=e=>{const t=Nu(Math.atan2(e[1],e[0]));return S2(t)},Qxe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:E2,rotateZ:E2,skewX:e=>Nu(Math.atan(e[1])),skewY:e=>Nu(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},S2=e=>(e=e%360,e<0&&(e+=360),e),oL=E2,lL=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),cL=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Jxe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:lL,scaleY:cL,scale:e=>(lL(e)+cL(e))/2,rotateX:e=>S2(Nu(Math.atan2(e[6],e[5]))),rotateY:e=>S2(Nu(Math.atan2(-e[2],e[0]))),rotateZ:oL,rotate:oL,skewX:e=>Nu(Math.atan(e[4])),skewY:e=>Nu(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function _2(e){return e.includes("scale")?1:0}function N2(e,t){if(!e||e==="none")return _2(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Jxe,i=n;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Qxe,i=o}if(!i)return _2(t);const s=r[t],a=i[1].split(",").map(ebe);return typeof s=="function"?s(a):a[s]}const Zxe=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return N2(n,t)};function ebe(e){return parseFloat(e.trim())}const ep=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],tp=new Set(ep),uL=e=>e===Zh||e===et,tbe=new Set(["x","y","z"]),nbe=ep.filter(e=>!tbe.has(e));function rbe(e){const t=[];return nbe.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const zu={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>N2(t,"x"),y:(e,{transform:t})=>N2(t,"y")};zu.translateX=zu.x;zu.translateY=zu.y;const Hu=new Set;let T2=!1,C2=!1,k2=!1;function BW(){if(C2){const e=Array.from(Hu).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=rbe(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))==null||o.set(a)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}C2=!1,T2=!1,Hu.forEach(e=>e.complete(k2)),Hu.clear()}function $W(){Hu.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(C2=!0)})}function ibe(){k2=!0,$W(),BW(),k2=!1}class ZO{constructor(t,n,r,i,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Hu.add(this),T2||(T2=!0,hn.read($W),hn.resolveKeyframes(BW))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;if(t[0]===null){const s=i==null?void 0:i.get(),a=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&n){const o=r.readValue(n,a);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=a),i&&s===void 0&&i.set(t[0])}Xxe(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Hu.delete(this)}cancel(){this.state==="scheduled"&&(Hu.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const sbe=e=>e.startsWith("--");function abe(e,t,n){sbe(t)?e.style.setProperty(t,n):e.style[t]=n}const obe=$O(()=>window.ScrollTimeline!==void 0),lbe={};function cbe(e,t){const n=$O(e);return()=>lbe[t]??n()}const UW=cbe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),om=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,dL={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:om([0,.65,.55,1]),circOut:om([.55,0,1,.45]),backIn:om([.31,.01,.66,-.59]),backOut:om([.33,1.53,.69,.99])};function zW(e,t){if(e)return typeof e=="function"?UW()?RW(e,t):"ease-out":TW(e)?om(e):Array.isArray(e)?e.map(n=>zW(n,t)||dL.easeOut):dL[e]}function ube(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:l}={},u=void 0){const d={[t]:n};l&&(d.offset=l);const f=zW(o,i);Array.isArray(f)&&(d.easing=f);const h={delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return u&&(h.pseudoElement=u),e.animate(d,h)}function HW(e){return typeof e=="function"&&"applyToOptions"in e}function dbe({type:e,...t}){return HW(e)&&UW()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class fbe extends QO{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=t;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=t,BO(typeof t.type!="string");const u=dbe(t);this.animation=ube(n,r,i,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=XO(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):abe(n,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return no(Number(t))}get time(){return no(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=to(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&obe()?(this.animation.timeline=t,Hs):n(this)}}const VW={anticipate:EW,backInOut:wW,circInOut:_W};function hbe(e){return e in VW}function pbe(e){typeof e.ease=="string"&&hbe(e.ease)&&(e.ease=VW[e.ease])}const fL=10;class mbe extends fbe{constructor(t){pbe(t),FW(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...a}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const o=new JO({...a,autoplay:!1}),l=to(this.finishedTime??this.time);n.setWithVelocity(o.sample(l-fL).value,o.sample(l).value,fL),o.stop()}}const hL=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Nc.test(e)||e==="0")&&!e.startsWith("url("));function gbe(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function ybe(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],a=hL(i,t),o=hL(s,t);return!a||!o?!1:gbe(e)||(n==="spring"||HW(n))&&r}function A2(e){e.duration=0,e.type}const vbe=new Set(["opacity","clipPath","filter","transform"]),xbe=$O(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function bbe(e){var d;const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:s,type:a}=e;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return xbe()&&n&&vbe.has(n)&&(n!=="transform"||!u)&&!l&&!r&&i!=="mirror"&&s!==0&&a!=="inertia"}const wbe=40;class Ebe extends QO{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:o,name:l,motionValue:u,element:d,...f}){var m;super(),this.stop=()=>{var g,v;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(v=this.keyframeResolver)==null||v.cancel()},this.createdAt=Ii.now();const h={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:a,name:l,motionValue:u,element:d,...f},p=(d==null?void 0:d.KeyframeResolver)||ZO;this.keyframeResolver=new p(o,(g,v,y)=>this.onKeyframesResolved(g,v,h,!y),l,u,d),(m=this.keyframeResolver)==null||m.scheduleResolve()}onKeyframesResolved(t,n,r,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:o,delay:l,isHandoff:u,onUpdate:d}=r;this.resolvedAt=Ii.now(),ybe(t,s,a,o)||((Zo.instantAnimations||!l)&&(d==null||d(XO(t,r,n))),t[0]=t[t.length-1],A2(r),r.repeat=0);const h={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>wbe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},p=!u&&bbe(h)?new mbe({...h,element:h.motionValue.owner.current}):new JO(h);p.finished.then(()=>this.notifyFinished()).catch(Hs),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),ibe()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const Sbe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _be(e){const t=Sbe.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function WW(e,t,n=1){const[r,i]=_be(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const a=s.trim();return hW(a)?parseFloat(a):a}return WO(i)?WW(i,t,n+1):i}function eP(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const qW=new Set(["width","height","top","left","right","bottom",...ep]),Nbe={test:e=>e==="auto",parse:e=>e},KW=e=>t=>t.test(e),GW=[Zh,et,ro,kl,gxe,mxe,Nbe],pL=e=>GW.find(KW(e));function Tbe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||mW(e):!0}const Cbe=new Set(["brightness","contrast","saturate","opacity"]);function kbe(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(qO)||[];if(!r)return e;const i=n.replace(r,"");let s=Cbe.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const Abe=/\b([a-z-]*)\(.*?\)/gu,j2={...Nc,getAnimatableNone:e=>{const t=e.match(Abe);return t?t.map(kbe).join(" "):e}},mL={...Zh,transform:Math.round},jbe={rotate:kl,rotateX:kl,rotateY:kl,rotateZ:kl,scale:Zy,scaleX:Zy,scaleY:Zy,scaleZ:Zy,skew:kl,skewX:kl,skewY:kl,distance:et,translateX:et,translateY:et,translateZ:et,x:et,y:et,z:et,perspective:et,transformPerspective:et,opacity:jg,originX:nL,originY:nL,originZ:et},tP={borderWidth:et,borderTopWidth:et,borderRightWidth:et,borderBottomWidth:et,borderLeftWidth:et,borderRadius:et,radius:et,borderTopLeftRadius:et,borderTopRightRadius:et,borderBottomRightRadius:et,borderBottomLeftRadius:et,width:et,maxWidth:et,height:et,maxHeight:et,top:et,right:et,bottom:et,left:et,padding:et,paddingTop:et,paddingRight:et,paddingBottom:et,paddingLeft:et,margin:et,marginTop:et,marginRight:et,marginBottom:et,marginLeft:et,backgroundPositionX:et,backgroundPositionY:et,...jbe,zIndex:mL,fillOpacity:jg,strokeOpacity:jg,numOctaves:mL},Obe={...tP,color:qn,backgroundColor:qn,outlineColor:qn,fill:qn,stroke:qn,borderColor:qn,borderTopColor:qn,borderRightColor:qn,borderBottomColor:qn,borderLeftColor:qn,filter:j2,WebkitFilter:j2},YW=e=>Obe[e];function XW(e,t){let n=YW(e);return n!==j2&&(n=Nc),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Pbe=new Set(["auto","none","0"]);function Ibe(e,t,n){let r=0,i;for(;r<e.length&&!i;){const s=e[r];typeof s=="string"&&!Pbe.has(s)&&Og(s).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=XW(n,i)}class Dbe extends ZO{constructor(t,n,r,i,s){super(t,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),WO(u))){const d=WW(u,n.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!qW.has(r)||t.length!==2)return;const[i,s]=t,a=pL(i),o=pL(s);if(a!==o)if(uL(a)&&uL(o))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else zu[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||Tbe(t[i]))&&r.push(i);r.length&&Ibe(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=zu[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var o;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,a=r[s];r[s]=zu[n](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function Mbe(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const i=(n==null?void 0:n[e])??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const QW=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Rbe(e){return pW(e)&&"offsetHeight"in e}const gL=30,Lbe=e=>!isNaN(parseFloat(e));class Fbe{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Ii.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Ii.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Lbe(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new UO);const r=this.events[t].add(n);return t==="change"?()=>{r(),hn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ii.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>gL)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,gL);return gW(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function gh(e,t){return new Fbe(e,t)}const{schedule:nP}=CW(queueMicrotask,!1),ia={x:!1,y:!1};function JW(){return ia.x||ia.y}function Bbe(e){return e==="x"||e==="y"?ia[e]?null:(ia[e]=!0,()=>{ia[e]=!1}):ia.x||ia.y?null:(ia.x=ia.y=!0,()=>{ia.x=ia.y=!1})}function ZW(e,t){const n=Mbe(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function yL(e){return!(e.pointerType==="touch"||JW())}function $be(e,t,n={}){const[r,i,s]=ZW(e,n),a=o=>{if(!yL(o))return;const{target:l}=o,u=t(l,o);if(typeof u!="function"||!l)return;const d=f=>{yL(f)&&(u(f),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,i)};return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const eq=(e,t)=>t?e===t?!0:eq(e,t.parentElement):!1,rP=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Ube=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zbe(e){return Ube.has(e.tagName)||e.tabIndex!==-1}const ux=new WeakSet;function vL(e){return t=>{t.key==="Enter"&&e(t)}}function Z_(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Hbe=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=vL(()=>{if(ux.has(n))return;Z_(n,"down");const i=vL(()=>{Z_(n,"up")}),s=()=>Z_(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",s,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function xL(e){return rP(e)&&!JW()}function Vbe(e,t,n={}){const[r,i,s]=ZW(e,n),a=o=>{const l=o.currentTarget;if(!xL(o))return;ux.add(l);const u=t(l,o),d=(p,m)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),ux.has(l)&&ux.delete(l),xL(p)&&typeof u=="function"&&u(p,{success:m})},f=p=>{d(p,l===window||l===document||n.useGlobalTarget||eq(l,p.target))},h=p=>{d(p,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",h,i)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),Rbe(o)&&(o.addEventListener("focus",u=>Hbe(u,i)),!zbe(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),s}function tq(e){return pW(e)&&"ownerSVGElement"in e}function Wbe(e){return tq(e)&&e.tagName==="svg"}const Xr=e=>!!(e&&e.getVelocity),qbe=[...GW,qn,Nc],Kbe=e=>qbe.find(KW(e)),nq=w.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Gbe(e=!0){const t=w.useContext(RO);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=w.useId();w.useEffect(()=>{if(e)return i(s)},[e]);const a=w.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,a]:[!0]}const rq=w.createContext({strict:!1}),bL={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yh={};for(const e in bL)yh[e]={isEnabled:t=>bL[e].some(n=>!!t[n])};function Ybe(e){for(const t in e)yh[t]={...yh[t],...e[t]}}const Xbe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function bb(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Xbe.has(e)}let iq=e=>!bb(e);function Qbe(e){typeof e=="function"&&(iq=t=>t.startsWith("on")?!bb(t):e(t))}try{Qbe(require("@emotion/is-prop-valid").default)}catch{}function Jbe(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(iq(i)||n===!0&&bb(i)||!t&&!bb(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}const uE=w.createContext({});function dE(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Pg(e){return typeof e=="string"||Array.isArray(e)}const iP=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],sP=["initial",...iP];function fE(e){return dE(e.animate)||sP.some(t=>Pg(e[t]))}function sq(e){return!!(fE(e)||e.variants)}function Zbe(e,t){if(fE(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Pg(n)?n:void 0,animate:Pg(r)?r:void 0}}return e.inherit!==!1?t:{}}function e1e(e){const{initial:t,animate:n}=Zbe(e,w.useContext(uE));return w.useMemo(()=>({initial:t,animate:n}),[wL(t),wL(n)])}function wL(e){return Array.isArray(e)?e.join(" "):e}const Ig={};function t1e(e){for(const t in e)Ig[t]=e[t],VO(t)&&(Ig[t].isCSSVariable=!0)}function aq(e,{layout:t,layoutId:n}){return tp.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Ig[e]||e==="opacity")}const n1e={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},r1e=ep.length;function i1e(e,t,n){let r="",i=!0;for(let s=0;s<r1e;s++){const a=ep[s],o=e[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=QW(o,tP[a]);if(!l){i=!1;const d=n1e[a]||a;r+=`${d}(${u}) `}n&&(t[a]=u)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function aP(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let a=!1,o=!1;for(const l in t){const u=t[l];if(tp.has(l)){a=!0;continue}else if(VO(l)){i[l]=u;continue}else{const d=QW(u,tP[l]);l.startsWith("origin")?(o=!0,s[l]=d):r[l]=d}}if(t.transform||(a||n?r.transform=i1e(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:d=0}=s;r.transformOrigin=`${l} ${u} ${d}`}}const oP=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function oq(e,t,n){for(const r in t)!Xr(t[r])&&!aq(r,n)&&(e[r]=t[r])}function s1e({transformTemplate:e},t){return w.useMemo(()=>{const n=oP();return aP(n,t,e),Object.assign({},n.vars,n.style)},[t])}function a1e(e,t){const n=e.style||{},r={};return oq(r,n,e),Object.assign(r,s1e(e,t)),r}function o1e(e,t){const n={},r=a1e(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const l1e={offset:"stroke-dashoffset",array:"stroke-dasharray"},c1e={offset:"strokeDashoffset",array:"strokeDasharray"};function u1e(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?l1e:c1e;e[s.offset]=et.transform(-r);const a=et.transform(t),o=et.transform(n);e[s.array]=`${a} ${o}`}function lq(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...o},l,u,d){if(aP(e,o,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:h}=e;f.transform&&(h.transform=f.transform,delete f.transform),(h.transform||f.transformOrigin)&&(h.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),h.transform&&(h.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),i!==void 0&&u1e(f,i,s,a,!1)}const cq=()=>({...oP(),attrs:{}}),uq=e=>typeof e=="string"&&e.toLowerCase()==="svg";function d1e(e,t,n,r){const i=w.useMemo(()=>{const s=cq();return lq(s,t,uq(r),e.transformTemplate,e.style),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};oq(s,e.style,e),i.style={...s,...i.style}}return i}const f1e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function lP(e){return typeof e!="string"||e.includes("-")?!1:!!(f1e.indexOf(e)>-1||/[A-Z]/u.test(e))}function h1e(e,t,n,{latestValues:r},i,s=!1){const o=(lP(e)?d1e:o1e)(t,r,i,e),l=Jbe(t,typeof e=="string",s),u=e!==w.Fragment?{...l,...o,ref:n}:{},{children:d}=t,f=w.useMemo(()=>Xr(d)?d.get():d,[d]);return w.createElement(e,{...u,children:f})}function EL(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function cP(e,t,n,r){if(typeof t=="function"){const[i,s]=EL(r);t=t(n!==void 0?n:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=EL(r);t=t(n!==void 0?n:e.custom,i,s)}return t}function dx(e){return Xr(e)?e.get():e}function p1e({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:m1e(n,r,i,e),renderState:t()}}function m1e(e,t,n,r){const i={},s=r(e,{});for(const h in s)i[h]=dx(s[h]);let{initial:a,animate:o}=e;const l=fE(e),u=sq(e);t&&u&&!l&&e.inherit!==!1&&(a===void 0&&(a=t.initial),o===void 0&&(o=t.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const f=d?o:a;if(f&&typeof f!="boolean"&&!dE(f)){const h=Array.isArray(f)?f:[f];for(let p=0;p<h.length;p++){const m=cP(e,h[p]);if(m){const{transitionEnd:g,transition:v,...y}=m;for(const b in y){let x=y[b];if(Array.isArray(x)){const S=d?x.length-1:0;x=x[S]}x!==null&&(i[b]=x)}for(const b in g)i[b]=g[b]}}}return i}const dq=e=>(t,n)=>{const r=w.useContext(uE),i=w.useContext(RO),s=()=>p1e(e,t,r,i);return n?s():Yve(s)};function uP(e,t,n){var s;const{style:r}=e,i={};for(const a in r)(Xr(r[a])||t.style&&Xr(t.style[a])||aq(a,e)||((s=n==null?void 0:n.getValue(a))==null?void 0:s.liveStyle)!==void 0)&&(i[a]=r[a]);return i}const g1e=dq({scrapeMotionValuesFromProps:uP,createRenderState:oP});function fq(e,t,n){const r=uP(e,t,n);for(const i in e)if(Xr(e[i])||Xr(t[i])){const s=ep.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=e[i]}return r}const y1e=dq({scrapeMotionValuesFromProps:fq,createRenderState:cq}),v1e=Symbol.for("motionComponentSymbol");function Af(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function x1e(e,t,n){return w.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Af(n)&&(n.current=r))},[t])}const dP=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),b1e="framerAppearId",hq="data-"+dP(b1e),pq=w.createContext({});function w1e(e,t,n,r,i){var g,v;const{visualElement:s}=w.useContext(uE),a=w.useContext(rq),o=w.useContext(RO),l=w.useContext(nq).reducedMotion,u=w.useRef(null);r=r||a.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=u.current,f=w.useContext(pq);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&E1e(u.current,n,i,f);const h=w.useRef(!1);w.useInsertionEffect(()=>{d&&h.current&&d.update(n,o)});const p=n[hq],m=w.useRef(!!p&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,p))&&((v=window.MotionHasOptimisedAnimation)==null?void 0:v.call(window,p)));return Xve(()=>{d&&(h.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),m.current&&d.animationState&&d.animationState.animateChanges())}),w.useEffect(()=>{d&&(!m.current&&d.animationState&&d.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,p)}),m.current=!1),d.enteringChildren=void 0)}),d}function E1e(e,t,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:mq(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&Af(o),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:u})}function mq(e){if(e)return e.options.allowProjection!==!1?e.projection:mq(e.parent)}function eN(e,{forwardMotionProps:t=!1}={},n,r){n&&Ybe(n);const i=lP(e)?y1e:g1e;function s(o,l){let u;const d={...w.useContext(nq),...o,layoutId:S1e(o)},{isStatic:f}=d,h=e1e(o),p=i(o,f);if(!f&&MO){_1e();const m=N1e(d);u=m.MeasureLayout,h.visualElement=w1e(e,p,d,r,m.ProjectionNode)}return c.jsxs(uE.Provider,{value:h,children:[u&&h.visualElement?c.jsx(u,{visualElement:h.visualElement,...d}):null,h1e(e,o,x1e(p,h.visualElement,l),p,f,t)]})}s.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const a=w.forwardRef(s);return a[v1e]=e,a}function S1e({layoutId:e}){const t=w.useContext(fW).id;return t&&e!==void 0?t+"-"+e:e}function _1e(e,t){w.useContext(rq).strict}function N1e(e){const{drag:t,layout:n}=yh;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function T1e(e,t){if(typeof Proxy>"u")return eN;const n=new Map,r=(s,a)=>eN(s,a,e,t),i=(s,a)=>r(s,a);return new Proxy(i,{get:(s,a)=>a==="create"?r:(n.has(a)||n.set(a,eN(a,void 0,e,t)),n.get(a))})}function gq({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function C1e({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function k1e(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function tN(e){return e===void 0||e===1}function O2({scale:e,scaleX:t,scaleY:n}){return!tN(e)||!tN(t)||!tN(n)}function hu(e){return O2(e)||yq(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function yq(e){return SL(e.x)||SL(e.y)}function SL(e){return e&&e!=="0%"}function wb(e,t,n){const r=e-n,i=t*r;return n+i}function _L(e,t,n,r,i){return i!==void 0&&(e=wb(e,i,r)),wb(e,n,r)+t}function P2(e,t=0,n=1,r,i){e.min=_L(e.min,t,n,r,i),e.max=_L(e.max,t,n,r,i)}function vq(e,{x:t,y:n}){P2(e.x,t.translate,t.scale,t.originPoint),P2(e.y,n.translate,n.scale,n.originPoint)}const NL=.999999999999,TL=1.0000000000001;function A1e(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,a;for(let o=0;o<i;o++){s=n[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Of(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,vq(e,a)),r&&hu(s.latestValues)&&Of(e,s.latestValues))}t.x<TL&&t.x>NL&&(t.x=1),t.y<TL&&t.y>NL&&(t.y=1)}function jf(e,t){e.min=e.min+t,e.max=e.max+t}function CL(e,t,n,r,i=.5){const s=vn(e.min,e.max,i);P2(e,t,n,s,r)}function Of(e,t){CL(e.x,t.x,t.scaleX,t.scale,t.originX),CL(e.y,t.y,t.scaleY,t.scale,t.originY)}function xq(e,t){return gq(k1e(e.getBoundingClientRect(),t))}function j1e(e,t,n){const r=xq(e,n),{scroll:i}=t;return i&&(jf(r.x,i.offset.x),jf(r.y,i.offset.y)),r}const kL=()=>({translate:0,scale:1,origin:0,originPoint:0}),Pf=()=>({x:kL(),y:kL()}),AL=()=>({min:0,max:0}),Ln=()=>({x:AL(),y:AL()}),I2={current:null},bq={current:!1};function O1e(){if(bq.current=!0,!!MO)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>I2.current=e.matches;e.addEventListener("change",t),t()}else I2.current=!1}const P1e=new WeakMap;function I1e(e,t,n){for(const r in t){const i=t[r],s=n[r];if(Xr(i))e.addValue(r,i);else if(Xr(s))e.addValue(r,gh(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const a=e.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=e.getStaticValue(r);e.addValue(r,gh(a!==void 0?a:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const jL=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class D1e{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ZO,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Ii.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,hn.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=fE(n),this.isVariantNode=sq(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in f){const p=f[h];l[h]!==void 0&&Xr(p)&&p.set(l[h])}}mount(t){var n;this.current=t,P1e.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),bq.current||O1e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:I2.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),_c(this.notifyUpdate),_c(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=tp.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&hn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in yh){const n=yh[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ln()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<jL.length;r++){const i=jL[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=t[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=I1e(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=gh(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(hW(r)||mW(r))?r=parseFloat(r):!Kbe(r)&&Nc.test(n)&&(r=XW(t,n)),this.setBaseTarget(t,Xr(r)?r.get():r)),Xr(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=cP(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);a&&(r=a[t])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Xr(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new UO),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){nP.render(this.render)}}class wq extends D1e{constructor(){super(...arguments),this.KeyframeResolver=Dbe}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Xr(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Eq(e,{style:t,vars:n},r,i){const s=e.style;let a;for(a in t)s[a]=t[a];i==null||i.applyProjectionStyles(s,r);for(a in n)s.setProperty(a,n[a])}function M1e(e){return window.getComputedStyle(e)}class R1e extends wq{constructor(){super(...arguments),this.type="html",this.renderInstance=Eq}readValueFromInstance(t,n){var r;if(tp.has(n))return(r=this.projection)!=null&&r.isProjecting?_2(n):Zxe(t,n);{const i=M1e(t),s=(VO(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return xq(t,n)}build(t,n,r){aP(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return uP(t,n,r)}}const Sq=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function L1e(e,t,n,r){Eq(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(Sq.has(i)?i:dP(i),t.attrs[i])}class F1e extends wq{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ln}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(tp.has(n)){const r=YW(n);return r&&r.default||0}return n=Sq.has(n)?n:dP(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return fq(t,n,r)}build(t,n,r){lq(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,i){L1e(t,n,r,i)}mount(t){this.isSVGTag=uq(t.tagName),super.mount(t)}}const B1e=(e,t)=>lP(e)?new F1e(t):new R1e(t,{allowProjection:e!==w.Fragment});function Hf(e,t,n){const r=e.getProps();return cP(r,t,n!==void 0?n:r.custom,e)}const D2=e=>Array.isArray(e);function $1e(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,gh(n))}function U1e(e){return D2(e)?e[e.length-1]||0:e}function z1e(e,t){const n=Hf(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s){const o=U1e(s[a]);$1e(e,a,o)}}function H1e(e){return!!(Xr(e)&&e.add)}function M2(e,t){const n=e.getValue("willChange");if(H1e(n))return n.add(t);if(!n&&Zo.WillChange){const r=new Zo.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function _q(e){return e.props[hq]}const V1e=e=>e!==null;function W1e(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(V1e),s=t&&n!=="loop"&&t%2===1?0:i.length-1;return i[s]}const q1e={type:"spring",stiffness:500,damping:25,restSpeed:10},K1e=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),G1e={type:"keyframes",duration:.8},Y1e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},X1e=(e,{keyframes:t})=>t.length>2?G1e:tp.has(e)?e.startsWith("scale")?K1e(t[1]):q1e:Y1e;function Q1e({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:u,...d}){return!!Object.keys(d).length}const fP=(e,t,n,r={},i,s)=>a=>{const o=eP(r,e)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-to(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:h=>{t.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:s?void 0:i};Q1e(o)||Object.assign(d,X1e(e,d)),d.duration&&(d.duration=to(d.duration)),d.repeatDelay&&(d.repeatDelay=to(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(A2(d),d.delay===0&&(f=!0)),(Zo.instantAnimations||Zo.skipAnimations)&&(f=!0,A2(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,f&&!s&&t.get()!==void 0){const h=W1e(d.keyframes,o);if(h!==void 0){hn.update(()=>{d.onUpdate(h),d.onComplete()});return}}return o.isSync?new JO(d):new Ebe(d)};function J1e({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Nq(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:a,...o}=t;r&&(s=r);const l=[],u=i&&e.animationState&&e.animationState.getState()[i];for(const d in o){const f=e.getValue(d,e.latestValues[d]??null),h=o[d];if(h===void 0||u&&J1e(u,d))continue;const p={delay:n,...eP(s||{},d)},m=f.get();if(m!==void 0&&!f.isAnimating&&!Array.isArray(h)&&h===m&&!p.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const y=_q(e);if(y){const b=window.MotionHandoffAnimation(y,d,hn);b!==null&&(p.startTime=b,g=!0)}}M2(e,d),f.start(fP(d,f,h,e.shouldReduceMotion&&qW.has(d)?{type:!1}:p,e,g));const v=f.animation;v&&l.push(v)}return a&&Promise.all(l).then(()=>{hn.update(()=>{a&&z1e(e,a)})}),l}function Tq(e,t,n,r=0,i=1){const s=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),a=e.size,o=(a-1)*r;return typeof n=="function"?n(s,a):i===1?s*r:o-s*r}function R2(e,t,n={}){var l;const r=Hf(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(Nq(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:h}=i;return Z1e(e,t,u,d,f,h,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[u,d]=o==="beforeChildren"?[s,a]:[a,s];return u().then(()=>d())}else return Promise.all([s(),a(n.delay)])}function Z1e(e,t,n=0,r=0,i=0,s=1,a){const o=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),o.push(R2(l,t,{...a,delay:n+(typeof r=="function"?0:r)+Tq(e.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}function ewe(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>R2(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=R2(e,t,n);else{const i=typeof t=="function"?Hf(e,t,n.custom):t;r=Promise.all(Nq(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function Cq(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const twe=sP.length;function kq(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?kq(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<twe;n++){const r=sP[n],i=e.props[r];(Pg(i)||i===!1)&&(t[r]=i)}return t}const nwe=[...iP].reverse(),rwe=iP.length;function iwe(e){return t=>Promise.all(t.map(({animation:n,options:r})=>ewe(e,n,r)))}function swe(e){let t=iwe(e),n=OL(),r=!0;const i=l=>(u,d)=>{var h;const f=Hf(e,d,l==="exit"?(h=e.presenceContext)==null?void 0:h.custom:void 0);if(f){const{transition:p,transitionEnd:m,...g}=f;u={...u,...g,...m}}return u};function s(l){t=l(e)}function a(l){const{props:u}=e,d=kq(e.parent)||{},f=[],h=new Set;let p={},m=1/0;for(let v=0;v<rwe;v++){const y=nwe[v],b=n[y],x=u[y]!==void 0?u[y]:d[y],S=Pg(x),E=y===l?b.isActive:null;E===!1&&(m=v);let _=x===d[y]&&x!==u[y]&&S;if(_&&r&&e.manuallyAnimateOnMount&&(_=!1),b.protectedKeys={...p},!b.isActive&&E===null||!x&&!b.prevProp||dE(x)||typeof x=="boolean")continue;const T=awe(b.prevProp,x);let C=T||y===l&&b.isActive&&!_&&S||v>m&&S,k=!1;const A=Array.isArray(x)?x:[x];let j=A.reduce(i(y),{});E===!1&&(j={});const{prevResolvedValues:D={}}=b,P={...D,...j},M=B=>{C=!0,h.has(B)&&(k=!0,h.delete(B)),b.needsAnimating[B]=!0;const R=e.getValue(B);R&&(R.liveStyle=!1)};for(const B in P){const R=j[B],F=D[B];if(p.hasOwnProperty(B))continue;let I=!1;D2(R)&&D2(F)?I=!Cq(R,F):I=R!==F,I?R!=null?M(B):h.add(B):R!==void 0&&h.has(B)?M(B):b.protectedKeys[B]=!0}b.prevProp=x,b.prevResolvedValues=j,b.isActive&&(p={...p,...j}),r&&e.blockInitialAnimation&&(C=!1);const L=_&&T;C&&(!L||k)&&f.push(...A.map(B=>{const R={type:y};if(typeof B=="string"&&r&&!L&&e.manuallyAnimateOnMount&&e.parent){const{parent:F}=e,I=Hf(F,B);if(F.enteringChildren&&I){const{delayChildren:X}=I.transition||{};R.delay=Tq(F.enteringChildren,e,X)}}return{animation:B,options:R}}))}if(h.size){const v={};if(typeof u.initial!="boolean"){const y=Hf(e,Array.isArray(u.initial)?u.initial[0]:u.initial);y&&y.transition&&(v.transition=y.transition)}h.forEach(y=>{const b=e.getBaseTarget(y),x=e.getValue(y);x&&(x.liveStyle=!0),v[y]=b??null}),f.push({animation:v})}let g=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(g=!1),r=!1,g?t(f):Promise.resolve()}function o(l,u){var f;if(n[l].isActive===u)return Promise.resolve();(f=e.variantChildren)==null||f.forEach(h=>{var p;return(p=h.animationState)==null?void 0:p.setActive(l,u)}),n[l].isActive=u;const d=a(l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n,reset:()=>{n=OL(),r=!0}}}function awe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Cq(t,e):!1}function au(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function OL(){return{animate:au(!0),whileInView:au(),whileHover:au(),whileTap:au(),whileDrag:au(),whileFocus:au(),exit:au()}}class $c{constructor(t){this.isMounted=!1,this.node=t}update(){}}class owe extends $c{constructor(t){super(t),t.animationState||(t.animationState=swe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();dE(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let lwe=0;class cwe extends $c{constructor(){super(...arguments),this.id=lwe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const uwe={animation:{Feature:owe},exit:{Feature:cwe}};function Dg(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function U0(e){return{point:{x:e.pageX,y:e.pageY}}}const dwe=e=>t=>rP(t)&&e(t,U0(t));function Pm(e,t,n,r){return Dg(e,t,dwe(n),r)}const Aq=1e-4,fwe=1-Aq,hwe=1+Aq,jq=.01,pwe=0-jq,mwe=0+jq;function mi(e){return e.max-e.min}function gwe(e,t,n){return Math.abs(e-t)<=n}function PL(e,t,n,r=.5){e.origin=r,e.originPoint=vn(t.min,t.max,e.origin),e.scale=mi(n)/mi(t),e.translate=vn(n.min,n.max,e.origin)-e.originPoint,(e.scale>=fwe&&e.scale<=hwe||isNaN(e.scale))&&(e.scale=1),(e.translate>=pwe&&e.translate<=mwe||isNaN(e.translate))&&(e.translate=0)}function Im(e,t,n,r){PL(e.x,t.x,n.x,r?r.originX:void 0),PL(e.y,t.y,n.y,r?r.originY:void 0)}function IL(e,t,n){e.min=n.min+t.min,e.max=e.min+mi(t)}function ywe(e,t,n){IL(e.x,t.x,n.x),IL(e.y,t.y,n.y)}function DL(e,t,n){e.min=t.min-n.min,e.max=e.min+mi(t)}function Dm(e,t,n){DL(e.x,t.x,n.x),DL(e.y,t.y,n.y)}function Cs(e){return[e("x"),e("y")]}const Oq=({current:e})=>e?e.ownerDocument.defaultView:null,ML=(e,t)=>Math.abs(e-t);function vwe(e,t){const n=ML(e.x,t.x),r=ML(e.y,t.y);return Math.sqrt(n**2+r**2)}class Pq{constructor(t,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=rN(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=vwe(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!m)return;const{point:g}=h,{timestamp:v}=Dr;this.history.push({...g,timestamp:v});const{onStart:y,onMove:b}=this.handlers;p||(y&&y(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=nN(p,this.transformPagePoint),hn.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=rN(h.type==="pointercancel"?this.lastMoveEventInfo:nN(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,y),g&&g(h,y)},!rP(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=i||window;const o=U0(t),l=nN(o,this.transformPagePoint),{point:u}=l,{timestamp:d}=Dr;this.history=[{...u,timestamp:d}];const{onSessionStart:f}=n;f&&f(t,rN(l,this.history)),this.removeListeners=F0(Pm(this.contextWindow,"pointermove",this.handlePointerMove),Pm(this.contextWindow,"pointerup",this.handlePointerUp),Pm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),_c(this.updatePoint)}}function nN(e,t){return t?{point:t(e.point)}:e}function RL(e,t){return{x:e.x-t.x,y:e.y-t.y}}function rN({point:e},t){return{point:e,delta:RL(e,Iq(t)),offset:RL(e,xwe(t)),velocity:bwe(t,.1)}}function xwe(e){return e[0]}function Iq(e){return e[e.length-1]}function bwe(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=Iq(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>to(t)));)n--;if(!r)return{x:0,y:0};const s=no(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function wwe(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?vn(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?vn(n,e,r.max):Math.min(e,n)),e}function LL(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Ewe(e,{top:t,left:n,bottom:r,right:i}){return{x:LL(e.x,n,i),y:LL(e.y,t,r)}}function FL(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function Swe(e,t){return{x:FL(e.x,t.x),y:FL(e.y,t.y)}}function _we(e,t){let n=.5;const r=mi(e),i=mi(t);return i>r?n=Ag(t.min,t.max-r,e.min):r>i&&(n=Ag(e.min,e.max-i,t.min)),Jo(0,1,n)}function Nwe(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const L2=.35;function Twe(e=L2){return e===!1?e=0:e===!0&&(e=L2),{x:BL(e,"left","right"),y:BL(e,"top","bottom")}}function BL(e,t,n){return{min:$L(e,t),max:$L(e,n)}}function $L(e,t){return typeof e=="number"?e:e[t]||0}const Cwe=new WeakMap;class kwe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ln(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(U0(f).point)},a=(f,h)=>{const{drag:p,dragPropagation:m,onDragStart:g}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Bbe(p),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Cs(y=>{let b=this.getAxisMotionValue(y).get()||0;if(ro.test(b)){const{projection:x}=this.visualElement;if(x&&x.layout){const S=x.layout.layoutBox[y];S&&(b=mi(S)*(parseFloat(b)/100))}}this.originPoint[y]=b}),g&&hn.postRender(()=>g(f,h)),M2(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h;const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:g,onDrag:v}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:y}=h;if(m&&this.currentDirection===null){this.currentDirection=Awe(y),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,y),this.updateAxis("y",h.point,y),this.visualElement.render(),v&&v(f,h)},l=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h,this.stop(f,h),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Cs(f=>{var h;return this.getAnimationState(f)==="paused"&&((h=this.getAxisMotionValue(f).animation)==null?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Pq(t,{onSessionStart:s,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:Oq(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&hn.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!ev(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=wwe(a,this.constraints[t],this.elastic[t])),s.set(a)}resolveConstraints(){var s;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;t&&Af(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=Ewe(r.layoutBox,t):this.constraints=!1,this.elastic=Twe(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Cs(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Nwe(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Af(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=j1e(r,i.root,this.visualElement.getTransformPagePoint());let a=Swe(i.layout.layoutBox,s);if(n){const o=n(C1e(a));this.hasMutatedConstraints=!!o,o&&(a=gq(o))}return a}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=Cs(d=>{if(!ev(d,n,this.currentDirection))return;let f=l&&l[d]||{};a&&(f={min:0,max:0});const h=i?200:1e6,p=i?40:1e7,m={type:"inertia",velocity:r?t[d]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(d,m)});return Promise.all(u).then(o)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return M2(this.visualElement,t),r.start(fP(t,r,0,n,this.visualElement,!1))}stopAnimation(){Cs(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Cs(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Cs(n=>{const{drag:r}=this.getProps();if(!ev(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[n];s.set(t[n]-vn(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Af(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Cs(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=_we({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Cs(a=>{if(!ev(a,t,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(vn(l,u,i[a]))})}addListeners(){if(!this.visualElement.current)return;Cwe.set(this.visualElement,this);const t=this.visualElement.current,n=Pm(t,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Af(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),hn.read(r);const a=Dg(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Cs(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=l[d].translate,f.set(f.get()+l[d].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=L2,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function ev(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Awe(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class jwe extends $c{constructor(t){super(t),this.removeGroupControls=Hs,this.removeListeners=Hs,this.controls=new kwe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Hs}unmount(){this.removeGroupControls(),this.removeListeners()}}const UL=e=>(t,n)=>{e&&hn.postRender(()=>e(t,n))};class Owe extends $c{constructor(){super(...arguments),this.removePointerDownListener=Hs}onPointerDown(t){this.session=new Pq(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Oq(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:UL(t),onStart:UL(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&hn.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=Pm(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const fx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function zL(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Rp={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(et.test(e))e=parseFloat(e);else return e;const n=zL(e,t.target.x),r=zL(e,t.target.y);return`${n}% ${r}%`}},Pwe={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=Nc.parse(e);if(i.length>5)return r;const s=Nc.createTransformer(e),a=typeof i[0]!="number"?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;i[0+a]/=o,i[1+a]/=l;const u=vn(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=u),typeof i[3+a]=="number"&&(i[3+a]/=u),s(i)}};let iN=!1;class Iwe extends w.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;t1e(Dwe),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),iN&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),fx.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:a}=r;return a&&(a.isPresent=s,iN=!0,i||t.layoutDependency!==n||n===void 0||t.isPresent!==s?a.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?a.promote():a.relegate()||hn.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),nP.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;iN=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Dq(e){const[t,n]=Gbe(),r=w.useContext(fW);return c.jsx(Iwe,{...e,layoutGroup:r,switchLayoutGroup:w.useContext(pq),isPresent:t,safeToRemove:n})}const Dwe={borderRadius:{...Rp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Rp,borderTopRightRadius:Rp,borderBottomLeftRadius:Rp,borderBottomRightRadius:Rp,boxShadow:Pwe};function Mwe(e,t,n){const r=Xr(e)?e:gh(e);return r.start(fP("",r,t,n)),r.animation}const Rwe=(e,t)=>e.depth-t.depth;class Lwe{constructor(){this.children=[],this.isDirty=!1}add(t){LO(this.children,t),this.isDirty=!0}remove(t){FO(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Rwe),this.isDirty=!1,this.children.forEach(t)}}function Fwe(e,t){const n=Ii.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(_c(r),e(s-t))};return hn.setup(r,!0),()=>_c(r)}const Mq=["TopLeft","TopRight","BottomLeft","BottomRight"],Bwe=Mq.length,HL=e=>typeof e=="string"?parseFloat(e):e,VL=e=>typeof e=="number"||et.test(e);function $we(e,t,n,r,i,s){i?(e.opacity=vn(0,n.opacity??1,Uwe(r)),e.opacityExit=vn(t.opacity??1,0,zwe(r))):s&&(e.opacity=vn(t.opacity??1,n.opacity??1,r));for(let a=0;a<Bwe;a++){const o=`border${Mq[a]}Radius`;let l=WL(t,o),u=WL(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||VL(l)===VL(u)?(e[o]=Math.max(vn(HL(l),HL(u),r),0),(ro.test(u)||ro.test(l))&&(e[o]+="%")):e[o]=u}(t.rotate||n.rotate)&&(e.rotate=vn(t.rotate||0,n.rotate||0,r))}function WL(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Uwe=Rq(0,.5,SW),zwe=Rq(.5,.95,Hs);function Rq(e,t,n){return r=>r<e?0:r>t?1:n(Ag(e,t,r))}function qL(e,t){e.min=t.min,e.max=t.max}function ws(e,t){qL(e.x,t.x),qL(e.y,t.y)}function KL(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function GL(e,t,n,r,i){return e-=t,e=wb(e,1/n,r),i!==void 0&&(e=wb(e,1/i,r)),e}function Hwe(e,t=0,n=1,r=.5,i,s=e,a=e){if(ro.test(t)&&(t=parseFloat(t),t=vn(a.min,a.max,t/100)-a.min),typeof t!="number")return;let o=vn(s.min,s.max,r);e===s&&(o-=t),e.min=GL(e.min,t,n,o,i),e.max=GL(e.max,t,n,o,i)}function YL(e,t,[n,r,i],s,a){Hwe(e,t[n],t[r],t[i],t.scale,s,a)}const Vwe=["x","scaleX","originX"],Wwe=["y","scaleY","originY"];function XL(e,t,n,r){YL(e.x,t,Vwe,n?n.x:void 0,r?r.x:void 0),YL(e.y,t,Wwe,n?n.y:void 0,r?r.y:void 0)}function QL(e){return e.translate===0&&e.scale===1}function Lq(e){return QL(e.x)&&QL(e.y)}function JL(e,t){return e.min===t.min&&e.max===t.max}function qwe(e,t){return JL(e.x,t.x)&&JL(e.y,t.y)}function ZL(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Fq(e,t){return ZL(e.x,t.x)&&ZL(e.y,t.y)}function e6(e){return mi(e.x)/mi(e.y)}function t6(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Kwe{constructor(){this.members=[]}add(t){LO(this.members,t),t.scheduleRender()}remove(t){if(FO(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Gwe(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,a=(n==null?void 0:n.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:h,skewX:p,skewY:m}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),f&&(r+=`rotateX(${f}deg) `),h&&(r+=`rotateY(${h}deg) `),p&&(r+=`skewX(${p}deg) `),m&&(r+=`skewY(${m}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const sN=["","X","Y","Z"],Ywe=1e3;let Xwe=0;function aN(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Bq(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=_q(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",hn,!(i||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Bq(r)}function $q({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=t==null?void 0:t()){this.id=Xwe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Zwe),this.nodes.forEach(rEe),this.nodes.forEach(iEe),this.nodes.forEach(eEe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Lwe)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new UO),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=tq(a)&&!Wbe(a),this.instance=a;const{layoutId:o,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),e){let d,f=0;const h=()=>this.root.updateBlockedByResize=!1;hn.read(()=>{f=window.innerWidth}),e(a,()=>{const p=window.innerWidth;p!==f&&(f=p,this.root.updateBlockedByResize=!0,d&&d(),d=Fwe(h,250),fx.hasAnimatedSinceResize&&(fx.hasAnimatedSinceResize=!1,this.nodes.forEach(i6)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||cEe,{onLayoutAnimationStart:g,onLayoutAnimationComplete:v}=u.getProps(),y=!this.targetLayout||!Fq(this.targetLayout,p),b=!f&&h;if(this.options.layoutRoot||this.resumeFrom||b||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const x={...eP(m,"layout"),onPlay:g,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x),this.setAnimationOrigin(d,b)}else f||i6(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),_c(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(sEe),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Bq(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(n6);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(r6);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(nEe),this.nodes.forEach(Qwe),this.nodes.forEach(Jwe)):this.nodes.forEach(r6),this.clearAllSnapshots();const o=Ii.now();Dr.delta=Jo(0,1e3/60,o-Dr.timestamp),Dr.timestamp=o,Dr.isProcessing=!0,G_.update.process(Dr),G_.preRender.process(Dr),G_.render.process(Dr),Dr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,nP.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(tEe),this.sharedNodes.forEach(aEe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,hn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){hn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!mi(this.snapshot.measuredBox.x)&&!mi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ln(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!Lq(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&this.instance&&(o||hu(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),uEe(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:a}=this.options;if(!a)return Ln();const o=a.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(dEe))){const{scroll:d}=this.root;d&&(jf(o.x,d.offset.x),jf(o.y,d.offset.y))}return o}removeElementScroll(a){var l;const o=Ln();if(ws(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:f,options:h}=d;d!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&ws(o,a),jf(o.x,f.offset.x),jf(o.y,f.offset.y))}return o}applyTransform(a,o=!1){const l=Ln();ws(l,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Of(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),hu(d.latestValues)&&Of(l,d.latestValues)}return hu(this.latestValues)&&Of(l,this.latestValues),l}removeTransform(a){const o=Ln();ws(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!hu(u.latestValues))continue;O2(u.latestValues)&&u.updateSnapshot();const d=Ln(),f=u.measurePageBox();ws(d,f),XL(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return hu(this.latestValues)&&XL(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Dr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var h;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Dr.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ln(),this.relativeTargetOrigin=Ln(),Dm(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),ws(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ln(),this.targetWithTransforms=Ln()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ywe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ws(this.target,this.layout.layoutBox),vq(this.target,this.targetDelta)):ws(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ln(),this.relativeTargetOrigin=Ln(),Dm(this.relativeTargetOrigin,this.target,p.target),ws(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||O2(this.parent.latestValues)||yq(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var m;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Dr.timestamp&&(l=!1),l)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;ws(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;A1e(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ln());const{target:p}=a;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(KL(this.prevProjectionDelta.x,this.projectionDelta.x),KL(this.prevProjectionDelta.y,this.projectionDelta.y)),Im(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!t6(this.projectionDelta.x,this.prevProjectionDelta.x)||!t6(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Pf(),this.projectionDelta=Pf(),this.projectionDeltaWithTransform=Pf()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},f=Pf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=Ln(),p=l?l.source:void 0,m=this.layout?this.layout.source:void 0,g=p!==m,v=this.getStack(),y=!v||v.members.length<=1,b=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(lEe));this.animationProgress=0;let x;this.mixTargetDelta=S=>{const E=S/1e3;s6(f.x,a.x,E),s6(f.y,a.y,E),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Dm(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),oEe(this.relativeTarget,this.relativeTargetOrigin,h,E),x&&qwe(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=Ln()),ws(x,this.relativeTarget)),g&&(this.animationValues=d,$we(d,u,this.latestValues,E,b,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var o,l,u;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(_c(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=hn.update(()=>{fx.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=gh(0)),this.currentAnimation=Mwe(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),a.onUpdate&&a.onUpdate(d)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Ywe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:d}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&Uq(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Ln();const f=mi(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+f;const h=mi(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+h}ws(o,l),Of(o,d),Im(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Kwe),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&aN("z",a,u,this.animationValues);for(let d=0;d<sN.length;d++)aN(`rotate${sN[d]}`,a,u,this.animationValues),aN(`skew${sN[d]}`,a,u,this.animationValues);a.render();for(const d in u)a.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=dx(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=dx(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!hu(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=Gwe(this.projectionDeltaWithTransform,this.treeScale,d);l&&(f=l(d,f)),a.transform=f;const{x:h,y:p}=this.projectionDelta;a.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,u.animationValues?a.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in Ig){if(d[m]===void 0)continue;const{correct:g,applyTo:v,isCSSVariable:y}=Ig[m],b=f==="none"?d[m]:g(d[m],u);if(v){const x=v.length;for(let S=0;S<x;S++)a[v[S]]=b}else y?this.options.visualElement.renderState.vars[m]=b:a[m]=b}this.options.layoutId&&(a.pointerEvents=u===this?dx(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(n6),this.root.sharedNodes.clear()}}}function Qwe(e){e.updateLayout()}function Jwe(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:s}=e.options,a=t.source!==e.layout.source;s==="size"?Cs(f=>{const h=a?t.measuredBox[f]:t.layoutBox[f],p=mi(h);h.min=r[f].min,h.max=h.min+p}):Uq(s,t.layoutBox,r)&&Cs(f=>{const h=a?t.measuredBox[f]:t.layoutBox[f],p=mi(r[f]);h.max=h.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+p)});const o=Pf();Im(o,r,t.layoutBox);const l=Pf();a?Im(l,e.applyTransform(i,!0),t.measuredBox):Im(l,r,t.layoutBox);const u=!Lq(o);let d=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:p}=f;if(h&&p){const m=Ln();Dm(m,t.layoutBox,h.layoutBox);const g=Ln();Dm(g,r,p.layoutBox),Fq(m,g)||(d=!0),f.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=m,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function Zwe(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function eEe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function tEe(e){e.clearSnapshot()}function n6(e){e.clearMeasurements()}function r6(e){e.isLayoutDirty=!1}function nEe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function i6(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function rEe(e){e.resolveTargetDelta()}function iEe(e){e.calcProjection()}function sEe(e){e.resetSkewAndRotation()}function aEe(e){e.removeLeadSnapshot()}function s6(e,t,n){e.translate=vn(t.translate,0,n),e.scale=vn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function a6(e,t,n,r){e.min=vn(t.min,n.min,r),e.max=vn(t.max,n.max,r)}function oEe(e,t,n,r){a6(e.x,t.x,n.x,r),a6(e.y,t.y,n.y,r)}function lEe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const cEe={duration:.45,ease:[.4,0,.1,1]},o6=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),l6=o6("applewebkit/")&&!o6("chrome/")?Math.round:Hs;function c6(e){e.min=l6(e.min),e.max=l6(e.max)}function uEe(e){c6(e.x),c6(e.y)}function Uq(e,t,n){return e==="position"||e==="preserve-aspect"&&!gwe(e6(t),e6(n),.2)}function dEe(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const fEe=$q({attachResizeListener:(e,t)=>Dg(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),oN={current:void 0},zq=$q({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!oN.current){const e=new fEe({});e.mount(window),e.setOptions({layoutScroll:!0}),oN.current=e}return oN.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),hEe={pan:{Feature:Owe},drag:{Feature:jwe,ProjectionNode:zq,MeasureLayout:Dq}};function u6(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&hn.postRender(()=>s(t,U0(t)))}class pEe extends $c{mount(){const{current:t}=this.node;t&&(this.unmount=$be(t,(n,r)=>(u6(this.node,r,"Start"),i=>u6(this.node,i,"End"))))}unmount(){}}class mEe extends $c{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=F0(Dg(this.node.current,"focus",()=>this.onFocus()),Dg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function d6(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&hn.postRender(()=>s(t,U0(t)))}class gEe extends $c{mount(){const{current:t}=this.node;t&&(this.unmount=Vbe(t,(n,r)=>(d6(this.node,r,"Start"),(i,{success:s})=>d6(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const F2=new WeakMap,lN=new WeakMap,yEe=e=>{const t=F2.get(e.target);t&&t(e)},vEe=e=>{e.forEach(yEe)};function xEe({root:e,...t}){const n=e||document;lN.has(n)||lN.set(n,{});const r=lN.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(vEe,{root:e,...t})),r[i]}function bEe(e,t,n){const r=xEe(t);return F2.set(e,n),r.observe(e),()=>{F2.delete(e),r.unobserve(e)}}const wEe={some:0,all:1};class EEe extends $c{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:wEe[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=u?d:f;h&&h(l)};return bEe(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(SEe(t,n))&&this.startObserver()}unmount(){}}function SEe({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const _Ee={inView:{Feature:EEe},tap:{Feature:gEe},focus:{Feature:mEe},hover:{Feature:pEe}},NEe={layout:{ProjectionNode:zq,MeasureLayout:Dq}},TEe={...uwe,..._Ee,...hEe,...NEe},f6=T1e(TEe,B1e),Hq=at.memo(({className:e})=>{const t=["M-380 -189C-380 -189 -312 216 152 343C616 470 684 875 684 875","M-373 -197C-373 -197 -305 208 159 335C623 462 691 867 691 867","M-366 -205C-366 -205 -298 200 166 327C630 454 698 859 698 859","M-359 -213C-359 -213 -291 192 173 319C637 446 705 851 705 851","M-352 -221C-352 -221 -284 184 180 311C644 438 712 843 712 843","M-345 -229C-345 -229 -277 176 187 303C651 430 719 835 719 835","M-338 -237C-338 -237 -270 168 194 295C658 422 726 827 726 827","M-331 -245C-331 -245 -263 160 201 287C665 414 733 819 733 819","M-324 -253C-324 -253 -256 152 208 279C672 406 740 811 740 811","M-317 -261C-317 -261 -249 144 215 271C679 398 747 803 747 803","M-310 -269C-310 -269 -242 136 222 263C686 390 754 795 754 795","M-303 -277C-303 -277 -235 128 229 255C693 382 761 787 761 787","M-296 -285C-296 -285 -228 120 236 247C700 374 768 779 768 779","M-289 -293C-289 -293 -221 112 243 239C707 366 775 771 775 771","M-282 -301C-282 -301 -214 104 250 231C714 358 782 763 782 763","M-275 -309C-275 -309 -207 96 257 223C721 350 789 755 789 755","M-268 -317C-268 -317 -200 88 264 215C728 342 796 747 796 747","M-261 -325C-261 -325 -193 80 271 207C735 334 803 739 803 739","M-254 -333C-254 -333 -186 72 278 199C742 326 810 731 810 731","M-247 -341C-247 -341 -179 64 285 191C749 318 817 723 817 723","M-240 -349C-240 -349 -172 56 292 183C756 310 824 715 824 715","M-233 -357C-233 -357 -165 48 299 175C763 302 831 707 831 707","M-226 -365C-226 -365 -158 40 306 167C770 294 838 699 838 699","M-219 -373C-219 -373 -151 32 313 159C777 286 845 691 845 691","M-212 -381C-212 -381 -144 24 320 151C784 278 852 683 852 683","M-205 -389C-205 -389 -137 16 327 143C791 270 859 675 859 675","M-198 -397C-198 -397 -130 8 334 135C798 262 866 667 866 667","M-191 -405C-191 -405 -123 0 341 127C805 254 873 659 873 659","M-184 -413C-184 -413 -116 -8 348 119C812 246 880 651 880 651","M-177 -421C-177 -421 -109 -16 355 111C819 238 887 643 887 643","M-170 -429C-170 -429 -102 -24 362 103C826 230 894 635 894 635","M-163 -437C-163 -437 -95 -32 369 95C833 222 901 627 901 627","M-156 -445C-156 -445 -88 -40 376 87C840 214 908 619 908 619","M-149 -453C-149 -453 -81 -48 383 79C847 206 915 611 915 611","M-142 -461C-142 -461 -74 -56 390 71C854 198 922 603 922 603","M-135 -469C-135 -469 -67 -64 397 63C861 190 929 595 929 595","M-128 -477C-128 -477 -60 -72 404 55C868 182 936 587 936 587","M-121 -485C-121 -485 -53 -80 411 47C875 174 943 579 943 579","M-114 -493C-114 -493 -46 -88 418 39C882 166 950 571 950 571","M-107 -501C-107 -501 -39 -96 425 31C889 158 957 563 957 563","M-100 -509C-100 -509 -32 -104 432 23C896 150 964 555 964 555","M-93 -517C-93 -517 -25 -112 439 15C903 142 971 547 971 547","M-86 -525C-86 -525 -18 -120 446 7C910 134 978 539 978 539","M-79 -533C-79 -533 -11 -128 453 -1C917 126 985 531 985 531","M-72 -541C-72 -541 -4 -136 460 -9C924 118 992 523 992 523","M-65 -549C-65 -549 3 -144 467 -17C931 110 999 515 999 515","M-58 -557C-58 -557 10 -152 474 -25C938 102 1006 507 1006 507","M-51 -565C-51 -565 17 -160 481 -33C945 94 1013 499 1013 499","M-44 -573C-44 -573 24 -168 488 -41C952 86 1020 491 1020 491","M-37 -581C-37 -581 31 -176 495 -49C959 78 1027 483 1027 483"];return c.jsx("div",{className:Ve("absolute h-full w-full inset-0 [mask-size:40px] [mask-repeat:no-repeat] flex items-center justify-center",e),children:c.jsxs("svg",{className:"z-0 h-full w-full pointer-events-none absolute",width:"100%",height:"100%",viewBox:"0 0 696 316",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M-380 -189C-380 -189 -312 216 152 343C616 470 684 875 684 875M-373 -197C-373 -197 -305 208 159 335C623 462 691 867 691 867M-366 -205C-366 -205 -298 200 166 327C630 454 698 859 698 859M-359 -213C-359 -213 -291 192 173 319C637 446 705 851 705 851M-352 -221C-352 -221 -284 184 180 311C644 438 712 843 712 843M-345 -229C-345 -229 -277 176 187 303C651 430 719 835 719 835M-338 -237C-338 -237 -270 168 194 295C658 422 726 827 726 827M-331 -245C-331 -245 -263 160 201 287C665 414 733 819 733 819M-324 -253C-324 -253 -256 152 208 279C672 406 740 811 740 811M-317 -261C-317 -261 -249 144 215 271C679 398 747 803 747 803M-310 -269C-310 -269 -242 136 222 263C686 390 754 795 754 795M-303 -277C-303 -277 -235 128 229 255C693 382 761 787 761 787M-296 -285C-296 -285 -228 120 236 247C700 374 768 779 768 779M-289 -293C-289 -293 -221 112 243 239C707 366 775 771 775 771M-282 -301C-282 -301 -214 104 250 231C714 358 782 763 782 763M-275 -309C-275 -309 -207 96 257 223C721 350 789 755 789 755M-268 -317C-268 -317 -200 88 264 215C728 342 796 747 796 747M-261 -325C-261 -325 -193 80 271 207C735 334 803 739 803 739M-254 -333C-254 -333 -186 72 278 199C742 326 810 731 810 731M-247 -341C-247 -341 -179 64 285 191C749 318 817 723 817 723M-240 -349C-240 -349 -172 56 292 183C756 310 824 715 824 715M-233 -357C-233 -357 -165 48 299 175C763 302 831 707 831 707M-226 -365C-226 -365 -158 40 306 167C770 294 838 699 838 699M-219 -373C-219 -373 -151 32 313 159C777 286 845 691 845 691M-212 -381C-212 -381 -144 24 320 151C784 278 852 683 852 683M-205 -389C-205 -389 -137 16 327 143C791 270 859 675 859 675M-198 -397C-198 -397 -130 8 334 135C798 262 866 667 866 667M-191 -405C-191 -405 -123 0 341 127C805 254 873 659 873 659M-184 -413C-184 -413 -116 -8 348 119C812 246 880 651 880 651M-177 -421C-177 -421 -109 -16 355 111C819 238 887 643 887 643M-170 -429C-170 -429 -102 -24 362 103C826 230 894 635 894 635M-163 -437C-163 -437 -95 -32 369 95C833 222 901 627 901 627M-156 -445C-156 -445 -88 -40 376 87C840 214 908 619 908 619M-149 -453C-149 -453 -81 -48 383 79C847 206 915 611 915 611M-142 -461C-142 -461 -74 -56 390 71C854 198 922 603 922 603M-135 -469C-135 -469 -67 -64 397 63C861 190 929 595 929 595M-128 -477C-128 -477 -60 -72 404 55C868 182 936 587 936 587M-121 -485C-121 -485 -53 -80 411 47C875 174 943 579 943 579M-114 -493C-114 -493 -46 -88 418 39C882 166 950 571 950 571M-107 -501C-107 -501 -39 -96 425 31C889 158 957 563 957 563M-100 -509C-100 -509 -32 -104 432 23C896 150 964 555 964 555M-93 -517C-93 -517 -25 -112 439 15C903 142 971 547 971 547M-86 -525C-86 -525 -18 -120 446 7C910 134 978 539 978 539M-79 -533C-79 -533 -11 -128 453 -1C917 126 985 531 985 531M-72 -541C-72 -541 -4 -136 460 -9C924 118 992 523 992 523M-65 -549C-65 -549 3 -144 467 -17C931 110 999 515 999 515M-58 -557C-58 -557 10 -152 474 -25C938 102 1006 507 1006 507M-51 -565C-51 -565 17 -160 481 -33C945 94 1013 499 1013 499M-44 -573C-44 -573 24 -168 488 -41C952 86 1020 491 1020 491M-37 -581C-37 -581 31 -176 495 -49C959 78 1027 483 1027 483M-30 -589C-30 -589 38 -184 502 -57C966 70 1034 475 1034 475M-23 -597C-23 -597 45 -192 509 -65C973 62 1041 467 1041 467M-16 -605C-16 -605 52 -200 516 -73C980 54 1048 459 1048 459M-9 -613C-9 -613 59 -208 523 -81C987 46 1055 451 1055 451M-2 -621C-2 -621 66 -216 530 -89C994 38 1062 443 1062 443M5 -629C5 -629 73 -224 537 -97C1001 30 1069 435 1069 435M12 -637C12 -637 80 -232 544 -105C1008 22 1076 427 1076 427M19 -645C19 -645 87 -240 551 -113C1015 14 1083 419 1083 419",stroke:"url(#paint0_radial_242_278)",strokeOpacity:"0.05",strokeWidth:"0.5"}),t.map((n,r)=>c.jsx(f6.path,{d:n,stroke:`url(#linearGradient-${r})`,strokeOpacity:"0.4",strokeWidth:"0.5"},`path-${r}`)),c.jsxs("defs",{children:[t.map((n,r)=>c.jsxs(f6.linearGradient,{id:`linearGradient-${r}`,initial:{x1:"0%",x2:"0%",y1:"0%",y2:"0%"},animate:{x1:["0%","100%"],x2:["0%","95%"],y1:["0%","100%"],y2:["0%",`${93+Math.random()*8}%`]},transition:{duration:Math.random()*10+10,ease:"easeInOut",repeat:1/0,delay:Math.random()*10},children:[c.jsx("stop",{stopColor:"#18CCFC",stopOpacity:"0"}),c.jsx("stop",{stopColor:"#18CCFC"}),c.jsx("stop",{offset:"32.5%",stopColor:"#6344F5"}),c.jsx("stop",{offset:"100%",stopColor:"#AE48FF",stopOpacity:"0"})]},`gradient-${r}`)),c.jsxs("radialGradient",{id:"paint0_radial_242_278",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(352 34) rotate(90) scale(555 1560.62)",children:[c.jsx("stop",{offset:"0.0666667",stopColor:"var(--neutral-300)"}),c.jsx("stop",{offset:"0.243243",stopColor:"var(--neutral-300)"}),c.jsx("stop",{offset:"0.43594",stopColor:"white",stopOpacity:"0"})]})]})]})})});Hq.displayName="BackgroundBeams";function Mm(e){let t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function B2(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function CEe(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function h6(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function p6(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function kEe(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function AEe(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function cN(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function jEe(e,t){let n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}function OEe(e,t){let n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function m6(e){let t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function PEe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function IEe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function $2(e,t){let n=t[0],r=t[1],i=t[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function Vq(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function g6(e,t,n){let r=t[0],i=t[1],s=t[2],a=n[0],o=n[1],l=n[2];return e[0]=i*l-s*o,e[1]=s*a-r*l,e[2]=r*o-i*a,e}function DEe(e,t,n,r){let i=t[0],s=t[1],a=t[2];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=a+r*(n[2]-a),e}function MEe(e,t,n,r,i){const s=Math.exp(-r*i);let a=t[0],o=t[1],l=t[2];return e[0]=n[0]+(a-n[0])*s,e[1]=n[1]+(o-n[1])*s,e[2]=n[2]+(l-n[2])*s,e}function REe(e,t,n){let r=t[0],i=t[1],s=t[2],a=n[3]*r+n[7]*i+n[11]*s+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/a,e}function LEe(e,t,n){let r=t[0],i=t[1],s=t[2],a=n[3]*r+n[7]*i+n[11]*s+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*s)/a,e[1]=(n[1]*r+n[5]*i+n[9]*s)/a,e[2]=(n[2]*r+n[6]*i+n[10]*s)/a,e}function FEe(e,t,n){let r=t[0],i=t[1],s=t[2];return e[0]=r*n[0]+i*n[3]+s*n[6],e[1]=r*n[1]+i*n[4]+s*n[7],e[2]=r*n[2]+i*n[5]+s*n[8],e}function BEe(e,t,n){let r=t[0],i=t[1],s=t[2],a=n[0],o=n[1],l=n[2],u=n[3],d=o*s-l*i,f=l*r-a*s,h=a*i-o*r,p=o*h-l*f,m=l*d-a*h,g=a*f-o*d,v=u*2;return d*=v,f*=v,h*=v,p*=2,m*=2,g*=2,e[0]=r+d+p,e[1]=i+f+m,e[2]=s+h+g,e}const $Ee=function(){const e=[0,0,0],t=[0,0,0];return function(n,r){B2(e,n),B2(t,r),$2(e,e),$2(t,t);let i=Vq(e,t);return i>1?0:i<-1?Math.PI:Math.acos(i)}}();function UEe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}class ma extends Array{constructor(t=0,n=t,r=t){return super(t,n,r),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this[0]=t}set y(t){this[1]=t}set z(t){this[2]=t}set(t,n=t,r=t){return t.length?this.copy(t):(CEe(this,t,n,r),this)}copy(t){return B2(this,t),this}add(t,n){return n?h6(this,t,n):h6(this,this,t),this}sub(t,n){return n?p6(this,t,n):p6(this,this,t),this}multiply(t){return t.length?kEe(this,this,t):cN(this,this,t),this}divide(t){return t.length?AEe(this,this,t):cN(this,this,1/t),this}inverse(t=this){return IEe(this,t),this}len(){return Mm(this)}distance(t){return t?jEe(this,t):Mm(this)}squaredLen(){return m6(this)}squaredDistance(t){return t?OEe(this,t):m6(this)}negate(t=this){return PEe(this,t),this}cross(t,n){return n?g6(this,t,n):g6(this,this,t),this}scale(t){return cN(this,this,t),this}normalize(){return $2(this,this),this}dot(t){return Vq(this,t)}equals(t){return UEe(this,t)}applyMatrix3(t){return FEe(this,this,t),this}applyMatrix4(t){return REe(this,this,t),this}scaleRotateMatrix4(t){return LEe(this,this,t),this}applyQuaternion(t){return BEe(this,this,t),this}angle(t){return $Ee(this,t)}lerp(t,n){return DEe(this,this,t,n),this}smoothLerp(t,n,r){return MEe(this,this,t,n,r),this}clone(){return new ma(this[0],this[1],this[2])}fromArray(t,n=0){return this[0]=t[n],this[1]=t[n+1],this[2]=t[n+2],this}toArray(t=[],n=0){return t[n]=this[0],t[n+1]=this[1],t[n+2]=this[2],t}transformDirection(t){const n=this[0],r=this[1],i=this[2];return this[0]=t[0]*n+t[4]*r+t[8]*i,this[1]=t[1]*n+t[5]*r+t[9]*i,this[2]=t[2]*n+t[6]*r+t[10]*i,this.normalize()}}const y6=new ma;let zEe=1,HEe=1,v6=!1;class VEe{constructor(t,n={}){t.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=t,this.attributes=n,this.id=zEe++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let r in n)this.addAttribute(r,n[r])}addAttribute(t,n){if(this.attributes[t]=n,n.id=HEe++,n.size=n.size||1,n.type=n.type||(n.data.constructor===Float32Array?this.gl.FLOAT:n.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),n.target=t==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,n.normalized=n.normalized||!1,n.stride=n.stride||0,n.offset=n.offset||0,n.count=n.count||(n.stride?n.data.byteLength/n.stride:n.data.length/n.size),n.divisor=n.instanced||0,n.needsUpdate=!1,n.usage=n.usage||this.gl.STATIC_DRAW,n.buffer||this.updateAttribute(n),n.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==n.count*n.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,n.count*n.divisor);this.instancedCount=n.count*n.divisor}else t==="index"?this.drawRange.count=n.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,n.count))}updateAttribute(t){const n=!t.buffer;n&&(t.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==t.buffer&&(this.gl.bindBuffer(t.target,t.buffer),this.glState.boundBuffer=t.buffer),n?this.gl.bufferData(t.target,t.data,t.usage):this.gl.bufferSubData(t.target,0,t.data),t.needsUpdate=!1}setIndex(t){this.addAttribute("index",t)}setDrawRange(t,n){this.drawRange.start=t,this.drawRange.count=n}setInstancedCount(t){this.instancedCount=t}createVAO(t){this.VAOs[t.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.bindAttributes(t)}bindAttributes(t){t.attributeLocations.forEach((n,{name:r,type:i})=>{if(!this.attributes[r]){console.warn(`active attribute ${r} not being supplied`);return}const s=this.attributes[r];this.gl.bindBuffer(s.target,s.buffer),this.glState.boundBuffer=s.buffer;let a=1;i===35674&&(a=2),i===35675&&(a=3),i===35676&&(a=4);const o=s.size/a,l=a===1?0:a*a*4,u=a===1?0:a*4;for(let d=0;d<a;d++)this.gl.vertexAttribPointer(n+d,o,s.type,s.normalized,s.stride+l,s.offset+d*u),this.gl.enableVertexAttribArray(n+d),this.gl.renderer.vertexAttribDivisor(n+d,s.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:t,mode:n=this.gl.TRIANGLES}){var i;this.gl.renderer.currentGeometry!==`${this.id}_${t.attributeOrder}`&&(this.VAOs[t.attributeOrder]||this.createVAO(t),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${t.attributeOrder}`),t.attributeLocations.forEach((s,{name:a})=>{const o=this.attributes[a];o.needsUpdate&&this.updateAttribute(o)});let r=2;((i=this.attributes.index)==null?void 0:i.type)===this.gl.UNSIGNED_INT&&(r=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(n,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*r,this.instancedCount):this.gl.renderer.drawArraysInstanced(n,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(n,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*r):this.gl.drawArrays(n,this.drawRange.start,this.drawRange.count)}getPosition(){const t=this.attributes.position;if(t.data)return t;if(!v6)return console.warn("No position buffer data found to compute bounds"),v6=!0}computeBoundingBox(t){t||(t=this.getPosition());const n=t.data,r=t.size;this.bounds||(this.bounds={min:new ma,max:new ma,center:new ma,scale:new ma,radius:1/0});const i=this.bounds.min,s=this.bounds.max,a=this.bounds.center,o=this.bounds.scale;i.set(1/0),s.set(-1/0);for(let l=0,u=n.length;l<u;l+=r){const d=n[l],f=n[l+1],h=n[l+2];i.x=Math.min(d,i.x),i.y=Math.min(f,i.y),i.z=Math.min(h,i.z),s.x=Math.max(d,s.x),s.y=Math.max(f,s.y),s.z=Math.max(h,s.z)}o.sub(s,i),a.add(i,s).divide(2)}computeBoundingSphere(t){t||(t=this.getPosition());const n=t.data,r=t.size;this.bounds||this.computeBoundingBox(t);let i=0;for(let s=0,a=n.length;s<a;s+=r)y6.fromArray(n,s),i=Math.max(i,this.bounds.center.squaredDistance(y6));this.bounds.radius=Math.sqrt(i)}remove(){for(let t in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[t]),delete this.VAOs[t];for(let t in this.attributes)this.gl.deleteBuffer(this.attributes[t].buffer),delete this.attributes[t]}}let WEe=1;const x6={};class qEe{constructor(t,{vertex:n,fragment:r,uniforms:i={},transparent:s=!1,cullFace:a=t.BACK,frontFace:o=t.CCW,depthTest:l=!0,depthWrite:u=!0,depthFunc:d=t.LEQUAL}={}){t.canvas||console.error("gl not passed as first argument to Program"),this.gl=t,this.uniforms=i,this.id=WEe++,n||console.warn("vertex shader not supplied"),r||console.warn("fragment shader not supplied"),this.transparent=s,this.cullFace=a,this.frontFace=o,this.depthTest=l,this.depthWrite=u,this.depthFunc=d,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=t.createShader(t.VERTEX_SHADER),this.fragmentShader=t.createShader(t.FRAGMENT_SHADER),this.program=t.createProgram(),t.attachShader(this.program,this.vertexShader),t.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:n,fragment:r})}setShaders({vertex:t,fragment:n}){if(t&&(this.gl.shaderSource(this.vertexShader,t),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}
Vertex Shader
${b6(t)}`)),n&&(this.gl.shaderSource(this.fragmentShader,n),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}
Fragment Shader
${b6(n)}`)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let r=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let a=0;a<r;a++){let o=this.gl.getActiveUniform(this.program,a);this.uniformLocations.set(o,this.gl.getUniformLocation(this.program,o.name));const l=o.name.match(/(\w+)/g);o.uniformName=l[0],o.nameComponents=l.slice(1)}this.attributeLocations=new Map;const i=[],s=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let a=0;a<s;a++){const o=this.gl.getActiveAttrib(this.program,a),l=this.gl.getAttribLocation(this.program,o.name);l!==-1&&(i[l]=o.name,this.attributeLocations.set(o,l))}this.attributeOrder=i.join("")}setBlendFunc(t,n,r,i){this.blendFunc.src=t,this.blendFunc.dst=n,this.blendFunc.srcAlpha=r,this.blendFunc.dstAlpha=i,t&&(this.transparent=!0)}setBlendEquation(t,n){this.blendEquation.modeRGB=t,this.blendEquation.modeAlpha=n}setStencilFunc(t,n,r){this.stencilRef=n,this.stencilFunc.func=t,this.stencilFunc.ref=n,this.stencilFunc.mask=r}setStencilOp(t,n,r){this.stencilOp.stencilFail=t,this.stencilOp.depthFail=n,this.stencilOp.depthPass=r}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:t=!1}={}){let n=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((i,s)=>{let a=this.uniforms[s.uniformName];for(const o of s.nameComponents){if(!a)break;if(o in a)a=a[o];else{if(Array.isArray(a.value))break;a=void 0;break}}if(!a)return w6(`Active uniform ${s.name} has not been supplied`);if(a&&a.value===void 0)return w6(`${s.name} uniform is missing a value parameter`);if(a.value.texture)return n=n+1,a.value.update(n),uN(this.gl,s.type,i,n);if(a.value.length&&a.value[0].texture){const o=[];return a.value.forEach(l=>{n=n+1,l.update(n),o.push(n)}),uN(this.gl,s.type,i,o)}uN(this.gl,s.type,i,a.value)}),this.applyState(),t&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function uN(e,t,n,r){r=r.length?KEe(r):r;const i=e.renderer.state.uniformLocations.get(n);if(r.length)if(i===void 0||i.length!==r.length)e.renderer.state.uniformLocations.set(n,r.slice(0));else{if(GEe(i,r))return;i.set?i.set(r):YEe(i,r),e.renderer.state.uniformLocations.set(n,i)}else{if(i===r)return;e.renderer.state.uniformLocations.set(n,r)}switch(t){case 5126:return r.length?e.uniform1fv(n,r):e.uniform1f(n,r);case 35664:return e.uniform2fv(n,r);case 35665:return e.uniform3fv(n,r);case 35666:return e.uniform4fv(n,r);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return r.length?e.uniform1iv(n,r):e.uniform1i(n,r);case 35671:case 35667:return e.uniform2iv(n,r);case 35672:case 35668:return e.uniform3iv(n,r);case 35673:case 35669:return e.uniform4iv(n,r);case 35674:return e.uniformMatrix2fv(n,!1,r);case 35675:return e.uniformMatrix3fv(n,!1,r);case 35676:return e.uniformMatrix4fv(n,!1,r)}}function b6(e){let t=e.split(`
`);for(let n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join(`
`)}function KEe(e){const t=e.length,n=e[0].length;if(n===void 0)return e;const r=t*n;let i=x6[r];i||(x6[r]=i=new Float32Array(r));for(let s=0;s<t;s++)i.set(e[s],s*n);return i}function GEe(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function YEe(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t[n]}let dN=0;function w6(e){dN>100||(console.warn(e),dN++,dN>100&&console.warn("More than 100 program warnings - stopping logs."))}const fN=new ma;let XEe=1;class QEe{constructor({canvas:t=document.createElement("canvas"),width:n=300,height:r=150,dpr:i=1,alpha:s=!1,depth:a=!0,stencil:o=!1,antialias:l=!1,premultipliedAlpha:u=!1,preserveDrawingBuffer:d=!1,powerPreference:f="default",autoClear:h=!0,webgl:p=2}={}){const m={alpha:s,depth:a,stencil:o,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:d,powerPreference:f};this.dpr=i,this.alpha=s,this.color=!0,this.depth=a,this.stencil=o,this.premultipliedAlpha=u,this.autoClear=h,this.id=XEe++,p===2&&(this.gl=t.getContext("webgl2",m)),this.isWebgl2=!!this.gl,this.gl||(this.gl=t.getContext("webgl",m)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(n,r),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(t,n){this.width=t,this.height=n,this.gl.canvas.width=t*this.dpr,this.gl.canvas.height=n*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:t+"px",height:n+"px"})}setViewport(t,n,r=0,i=0){this.state.viewport.width===t&&this.state.viewport.height===n||(this.state.viewport.width=t,this.state.viewport.height=n,this.state.viewport.x=r,this.state.viewport.y=i,this.gl.viewport(r,i,t,n))}setScissor(t,n,r=0,i=0){this.gl.scissor(r,i,t,n)}enable(t){this.state[t]!==!0&&(this.gl.enable(t),this.state[t]=!0)}disable(t){this.state[t]!==!1&&(this.gl.disable(t),this.state[t]=!1)}setBlendFunc(t,n,r,i){this.state.blendFunc.src===t&&this.state.blendFunc.dst===n&&this.state.blendFunc.srcAlpha===r&&this.state.blendFunc.dstAlpha===i||(this.state.blendFunc.src=t,this.state.blendFunc.dst=n,this.state.blendFunc.srcAlpha=r,this.state.blendFunc.dstAlpha=i,r!==void 0?this.gl.blendFuncSeparate(t,n,r,i):this.gl.blendFunc(t,n))}setBlendEquation(t,n){t=t||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===t&&this.state.blendEquation.modeAlpha===n)&&(this.state.blendEquation.modeRGB=t,this.state.blendEquation.modeAlpha=n,n!==void 0?this.gl.blendEquationSeparate(t,n):this.gl.blendEquation(t))}setCullFace(t){this.state.cullFace!==t&&(this.state.cullFace=t,this.gl.cullFace(t))}setFrontFace(t){this.state.frontFace!==t&&(this.state.frontFace=t,this.gl.frontFace(t))}setDepthMask(t){this.state.depthMask!==t&&(this.state.depthMask=t,this.gl.depthMask(t))}setDepthFunc(t){this.state.depthFunc!==t&&(this.state.depthFunc=t,this.gl.depthFunc(t))}setStencilMask(t){this.state.stencilMask!==t&&(this.state.stencilMask=t,this.gl.stencilMask(t))}setStencilFunc(t,n,r){this.state.stencilFunc===t&&this.state.stencilRef===n&&this.state.stencilFuncMask===r||(this.state.stencilFunc=t||this.gl.ALWAYS,this.state.stencilRef=n||0,this.state.stencilFuncMask=r||0,this.gl.stencilFunc(t||this.gl.ALWAYS,n||0,r||0))}setStencilOp(t,n,r){this.state.stencilFail===t&&this.state.stencilDepthFail===n&&this.state.stencilDepthPass===r||(this.state.stencilFail=t,this.state.stencilDepthFail=n,this.state.stencilDepthPass=r,this.gl.stencilOp(t,n,r))}activeTexture(t){this.state.activeTextureUnit!==t&&(this.state.activeTextureUnit=t,this.gl.activeTexture(this.gl.TEXTURE0+t))}bindFramebuffer({target:t=this.gl.FRAMEBUFFER,buffer:n=null}={}){this.state.framebuffer!==n&&(this.state.framebuffer=n,this.gl.bindFramebuffer(t,n))}getExtension(t,n,r){return n&&this.gl[n]?this.gl[n].bind(this.gl):(this.extensions[t]||(this.extensions[t]=this.gl.getExtension(t)),n?this.extensions[t]?this.extensions[t][r].bind(this.extensions[t]):null:this.extensions[t])}sortOpaque(t,n){return t.renderOrder!==n.renderOrder?t.renderOrder-n.renderOrder:t.program.id!==n.program.id?t.program.id-n.program.id:t.zDepth!==n.zDepth?t.zDepth-n.zDepth:n.id-t.id}sortTransparent(t,n){return t.renderOrder!==n.renderOrder?t.renderOrder-n.renderOrder:t.zDepth!==n.zDepth?n.zDepth-t.zDepth:n.id-t.id}sortUI(t,n){return t.renderOrder!==n.renderOrder?t.renderOrder-n.renderOrder:t.program.id!==n.program.id?t.program.id-n.program.id:n.id-t.id}getRenderList({scene:t,camera:n,frustumCull:r,sort:i}){let s=[];if(n&&r&&n.updateFrustum(),t.traverse(a=>{if(!a.visible)return!0;a.draw&&(r&&a.frustumCulled&&n&&!n.frustumIntersectsMesh(a)||s.push(a))}),i){const a=[],o=[],l=[];s.forEach(u=>{u.program.transparent?u.program.depthTest?o.push(u):l.push(u):a.push(u),u.zDepth=0,!(u.renderOrder!==0||!u.program.depthTest||!n)&&(u.worldMatrix.getTranslation(fN),fN.applyMatrix4(n.projectionViewMatrix),u.zDepth=fN.z)}),a.sort(this.sortOpaque),o.sort(this.sortTransparent),l.sort(this.sortUI),s=a.concat(o,l)}return s}render({scene:t,camera:n,target:r=null,update:i=!0,sort:s=!0,frustumCull:a=!0,clear:o}){r===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(r),this.setViewport(r.width,r.height)),(o||this.autoClear&&o!==!1)&&(this.depth&&(!r||r.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!r||r.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),i&&t.updateMatrixWorld(),n&&n.updateMatrixWorld(),this.getRenderList({scene:t,camera:n,frustumCull:a,sort:s}).forEach(u=>{u.draw({camera:n})})}}function JEe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function ZEe(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function eSe(e,t){let n=t[0],r=t[1],i=t[2],s=t[3],a=n*n+r*r+i*i+s*s;return a>0&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=s*a,e}function tSe(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function nSe(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function rSe(e,t,n){n=n*.5;let r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function E6(e,t,n){let r=t[0],i=t[1],s=t[2],a=t[3],o=n[0],l=n[1],u=n[2],d=n[3];return e[0]=r*d+a*o+i*u-s*l,e[1]=i*d+a*l+s*o-r*u,e[2]=s*d+a*u+r*l-i*o,e[3]=a*d-r*o-i*l-s*u,e}function iSe(e,t,n){n*=.5;let r=t[0],i=t[1],s=t[2],a=t[3],o=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*o,e[1]=i*l+s*o,e[2]=s*l-i*o,e[3]=a*l-r*o,e}function sSe(e,t,n){n*=.5;let r=t[0],i=t[1],s=t[2],a=t[3],o=Math.sin(n),l=Math.cos(n);return e[0]=r*l-s*o,e[1]=i*l+a*o,e[2]=s*l+r*o,e[3]=a*l-i*o,e}function aSe(e,t,n){n*=.5;let r=t[0],i=t[1],s=t[2],a=t[3],o=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*o,e[1]=i*l-r*o,e[2]=s*l+a*o,e[3]=a*l-s*o,e}function oSe(e,t,n,r){let i=t[0],s=t[1],a=t[2],o=t[3],l=n[0],u=n[1],d=n[2],f=n[3],h,p,m,g,v;return p=i*l+s*u+a*d+o*f,p<0&&(p=-p,l=-l,u=-u,d=-d,f=-f),1-p>1e-6?(h=Math.acos(p),m=Math.sin(h),g=Math.sin((1-r)*h)/m,v=Math.sin(r*h)/m):(g=1-r,v=r),e[0]=g*i+v*l,e[1]=g*s+v*u,e[2]=g*a+v*d,e[3]=g*o+v*f,e}function lSe(e,t){let n=t[0],r=t[1],i=t[2],s=t[3],a=n*n+r*r+i*i+s*s,o=a?1/a:0;return e[0]=-n*o,e[1]=-r*o,e[2]=-i*o,e[3]=s*o,e}function cSe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function uSe(e,t){let n=t[0]+t[4]+t[8],r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{let i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);let s=(i+1)%3,a=(i+2)%3;r=Math.sqrt(t[i*3+i]-t[s*3+s]-t[a*3+a]+1),e[i]=.5*r,r=.5/r,e[3]=(t[s*3+a]-t[a*3+s])*r,e[s]=(t[s*3+i]+t[i*3+s])*r,e[a]=(t[a*3+i]+t[i*3+a])*r}return e}function dSe(e,t,n="YXZ"){let r=Math.sin(t[0]*.5),i=Math.cos(t[0]*.5),s=Math.sin(t[1]*.5),a=Math.cos(t[1]*.5),o=Math.sin(t[2]*.5),l=Math.cos(t[2]*.5);return n==="XYZ"?(e[0]=r*a*l+i*s*o,e[1]=i*s*l-r*a*o,e[2]=i*a*o+r*s*l,e[3]=i*a*l-r*s*o):n==="YXZ"?(e[0]=r*a*l+i*s*o,e[1]=i*s*l-r*a*o,e[2]=i*a*o-r*s*l,e[3]=i*a*l+r*s*o):n==="ZXY"?(e[0]=r*a*l-i*s*o,e[1]=i*s*l+r*a*o,e[2]=i*a*o+r*s*l,e[3]=i*a*l-r*s*o):n==="ZYX"?(e[0]=r*a*l-i*s*o,e[1]=i*s*l+r*a*o,e[2]=i*a*o-r*s*l,e[3]=i*a*l+r*s*o):n==="YZX"?(e[0]=r*a*l+i*s*o,e[1]=i*s*l+r*a*o,e[2]=i*a*o-r*s*l,e[3]=i*a*l-r*s*o):n==="XZY"&&(e[0]=r*a*l-i*s*o,e[1]=i*s*l-r*a*o,e[2]=i*a*o+r*s*l,e[3]=i*a*l+r*s*o),e}const fSe=JEe,hSe=ZEe,pSe=tSe,mSe=eSe;class gSe extends Array{constructor(t=0,n=0,r=0,i=1){super(t,n,r,i),this.onChange=()=>{},this._target=this;const s=["0","1","2","3"];return new Proxy(this,{set(a,o){const l=Reflect.set(...arguments);return l&&s.includes(o)&&a.onChange(),l}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(t){this._target[0]=t,this.onChange()}set y(t){this._target[1]=t,this.onChange()}set z(t){this._target[2]=t,this.onChange()}set w(t){this._target[3]=t,this.onChange()}identity(){return nSe(this._target),this.onChange(),this}set(t,n,r,i){return t.length?this.copy(t):(hSe(this._target,t,n,r,i),this.onChange(),this)}rotateX(t){return iSe(this._target,this._target,t),this.onChange(),this}rotateY(t){return sSe(this._target,this._target,t),this.onChange(),this}rotateZ(t){return aSe(this._target,this._target,t),this.onChange(),this}inverse(t=this._target){return lSe(this._target,t),this.onChange(),this}conjugate(t=this._target){return cSe(this._target,t),this.onChange(),this}copy(t){return fSe(this._target,t),this.onChange(),this}normalize(t=this._target){return mSe(this._target,t),this.onChange(),this}multiply(t,n){return n?E6(this._target,t,n):E6(this._target,this._target,t),this.onChange(),this}dot(t){return pSe(this._target,t)}fromMatrix3(t){return uSe(this._target,t),this.onChange(),this}fromEuler(t,n){return dSe(this._target,t,t.order),n||this.onChange(),this}fromAxisAngle(t,n){return rSe(this._target,t,n),this.onChange(),this}slerp(t,n){return oSe(this._target,this._target,t,n),this.onChange(),this}fromArray(t,n=0){return this._target[0]=t[n],this._target[1]=t[n+1],this._target[2]=t[n+2],this._target[3]=t[n+3],this.onChange(),this}toArray(t=[],n=0){return t[n]=this[0],t[n+1]=this[1],t[n+2]=this[2],t[n+3]=this[3],t}}const ySe=1e-6;function vSe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function xSe(e,t,n,r,i,s,a,o,l,u,d,f,h,p,m,g,v){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=a,e[6]=o,e[7]=l,e[8]=u,e[9]=d,e[10]=f,e[11]=h,e[12]=p,e[13]=m,e[14]=g,e[15]=v,e}function bSe(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function wSe(e,t){let n=t[0],r=t[1],i=t[2],s=t[3],a=t[4],o=t[5],l=t[6],u=t[7],d=t[8],f=t[9],h=t[10],p=t[11],m=t[12],g=t[13],v=t[14],y=t[15],b=n*o-r*a,x=n*l-i*a,S=n*u-s*a,E=r*l-i*o,_=r*u-s*o,T=i*u-s*l,C=d*g-f*m,k=d*v-h*m,A=d*y-p*m,j=f*v-h*g,D=f*y-p*g,P=h*y-p*v,M=b*P-x*D+S*j+E*A-_*k+T*C;return M?(M=1/M,e[0]=(o*P-l*D+u*j)*M,e[1]=(i*D-r*P-s*j)*M,e[2]=(g*T-v*_+y*E)*M,e[3]=(h*_-f*T-p*E)*M,e[4]=(l*A-a*P-u*k)*M,e[5]=(n*P-i*A+s*k)*M,e[6]=(v*S-m*T-y*x)*M,e[7]=(d*T-h*S+p*x)*M,e[8]=(a*D-o*A+u*C)*M,e[9]=(r*A-n*D-s*C)*M,e[10]=(m*_-g*S+y*b)*M,e[11]=(f*S-d*_-p*b)*M,e[12]=(o*k-a*j-l*C)*M,e[13]=(n*j-r*k+i*C)*M,e[14]=(g*x-m*E-v*b)*M,e[15]=(d*E-f*x+h*b)*M,e):null}function Wq(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7],u=e[8],d=e[9],f=e[10],h=e[11],p=e[12],m=e[13],g=e[14],v=e[15],y=t*a-n*s,b=t*o-r*s,x=t*l-i*s,S=n*o-r*a,E=n*l-i*a,_=r*l-i*o,T=u*m-d*p,C=u*g-f*p,k=u*v-h*p,A=d*g-f*m,j=d*v-h*m,D=f*v-h*g;return y*D-b*j+x*A+S*k-E*C+_*T}function S6(e,t,n){let r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6],d=t[7],f=t[8],h=t[9],p=t[10],m=t[11],g=t[12],v=t[13],y=t[14],b=t[15],x=n[0],S=n[1],E=n[2],_=n[3];return e[0]=x*r+S*o+E*f+_*g,e[1]=x*i+S*l+E*h+_*v,e[2]=x*s+S*u+E*p+_*y,e[3]=x*a+S*d+E*m+_*b,x=n[4],S=n[5],E=n[6],_=n[7],e[4]=x*r+S*o+E*f+_*g,e[5]=x*i+S*l+E*h+_*v,e[6]=x*s+S*u+E*p+_*y,e[7]=x*a+S*d+E*m+_*b,x=n[8],S=n[9],E=n[10],_=n[11],e[8]=x*r+S*o+E*f+_*g,e[9]=x*i+S*l+E*h+_*v,e[10]=x*s+S*u+E*p+_*y,e[11]=x*a+S*d+E*m+_*b,x=n[12],S=n[13],E=n[14],_=n[15],e[12]=x*r+S*o+E*f+_*g,e[13]=x*i+S*l+E*h+_*v,e[14]=x*s+S*u+E*p+_*y,e[15]=x*a+S*d+E*m+_*b,e}function ESe(e,t,n){let r=n[0],i=n[1],s=n[2],a,o,l,u,d,f,h,p,m,g,v,y;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*s+t[12],e[13]=t[1]*r+t[5]*i+t[9]*s+t[13],e[14]=t[2]*r+t[6]*i+t[10]*s+t[14],e[15]=t[3]*r+t[7]*i+t[11]*s+t[15]):(a=t[0],o=t[1],l=t[2],u=t[3],d=t[4],f=t[5],h=t[6],p=t[7],m=t[8],g=t[9],v=t[10],y=t[11],e[0]=a,e[1]=o,e[2]=l,e[3]=u,e[4]=d,e[5]=f,e[6]=h,e[7]=p,e[8]=m,e[9]=g,e[10]=v,e[11]=y,e[12]=a*r+d*i+m*s+t[12],e[13]=o*r+f*i+g*s+t[13],e[14]=l*r+h*i+v*s+t[14],e[15]=u*r+p*i+y*s+t[15]),e}function SSe(e,t,n){let r=n[0],i=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function _Se(e,t,n,r){let i=r[0],s=r[1],a=r[2],o=Math.hypot(i,s,a),l,u,d,f,h,p,m,g,v,y,b,x,S,E,_,T,C,k,A,j,D,P,M,L;return Math.abs(o)<ySe?null:(o=1/o,i*=o,s*=o,a*=o,l=Math.sin(n),u=Math.cos(n),d=1-u,f=t[0],h=t[1],p=t[2],m=t[3],g=t[4],v=t[5],y=t[6],b=t[7],x=t[8],S=t[9],E=t[10],_=t[11],T=i*i*d+u,C=s*i*d+a*l,k=a*i*d-s*l,A=i*s*d-a*l,j=s*s*d+u,D=a*s*d+i*l,P=i*a*d+s*l,M=s*a*d-i*l,L=a*a*d+u,e[0]=f*T+g*C+x*k,e[1]=h*T+v*C+S*k,e[2]=p*T+y*C+E*k,e[3]=m*T+b*C+_*k,e[4]=f*A+g*j+x*D,e[5]=h*A+v*j+S*D,e[6]=p*A+y*j+E*D,e[7]=m*A+b*j+_*D,e[8]=f*P+g*M+x*L,e[9]=h*P+v*M+S*L,e[10]=p*P+y*M+E*L,e[11]=m*P+b*M+_*L,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function NSe(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function qq(e,t){let n=t[0],r=t[1],i=t[2],s=t[4],a=t[5],o=t[6],l=t[8],u=t[9],d=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(s,a,o),e[2]=Math.hypot(l,u,d),e}function TSe(e){let t=e[0],n=e[1],r=e[2],i=e[4],s=e[5],a=e[6],o=e[8],l=e[9],u=e[10];const d=t*t+n*n+r*r,f=i*i+s*s+a*a,h=o*o+l*l+u*u;return Math.sqrt(Math.max(d,f,h))}const Kq=function(){const e=[1,1,1];return function(t,n){let r=e;qq(r,n);let i=1/r[0],s=1/r[1],a=1/r[2],o=n[0]*i,l=n[1]*s,u=n[2]*a,d=n[4]*i,f=n[5]*s,h=n[6]*a,p=n[8]*i,m=n[9]*s,g=n[10]*a,v=o+f+g,y=0;return v>0?(y=Math.sqrt(v+1)*2,t[3]=.25*y,t[0]=(h-m)/y,t[1]=(p-u)/y,t[2]=(l-d)/y):o>f&&o>g?(y=Math.sqrt(1+o-f-g)*2,t[3]=(h-m)/y,t[0]=.25*y,t[1]=(l+d)/y,t[2]=(p+u)/y):f>g?(y=Math.sqrt(1+f-o-g)*2,t[3]=(p-u)/y,t[0]=(l+d)/y,t[1]=.25*y,t[2]=(h+m)/y):(y=Math.sqrt(1+g-o-f)*2,t[3]=(l-d)/y,t[0]=(p+u)/y,t[1]=(h+m)/y,t[2]=.25*y),t}}();function CSe(e,t,n,r){let i=Mm([e[0],e[1],e[2]]);const s=Mm([e[4],e[5],e[6]]),a=Mm([e[8],e[9],e[10]]);Wq(e)<0&&(i=-i),n[0]=e[12],n[1]=e[13],n[2]=e[14];const l=e.slice(),u=1/i,d=1/s,f=1/a;l[0]*=u,l[1]*=u,l[2]*=u,l[4]*=d,l[5]*=d,l[6]*=d,l[8]*=f,l[9]*=f,l[10]*=f,Kq(t,l),r[0]=i,r[1]=s,r[2]=a}function kSe(e,t,n,r){const i=e,s=t[0],a=t[1],o=t[2],l=t[3],u=s+s,d=a+a,f=o+o,h=s*u,p=s*d,m=s*f,g=a*d,v=a*f,y=o*f,b=l*u,x=l*d,S=l*f,E=r[0],_=r[1],T=r[2];return i[0]=(1-(g+y))*E,i[1]=(p+S)*E,i[2]=(m-x)*E,i[3]=0,i[4]=(p-S)*_,i[5]=(1-(h+y))*_,i[6]=(v+b)*_,i[7]=0,i[8]=(m+x)*T,i[9]=(v-b)*T,i[10]=(1-(h+g))*T,i[11]=0,i[12]=n[0],i[13]=n[1],i[14]=n[2],i[15]=1,i}function ASe(e,t){let n=t[0],r=t[1],i=t[2],s=t[3],a=n+n,o=r+r,l=i+i,u=n*a,d=r*a,f=r*o,h=i*a,p=i*o,m=i*l,g=s*a,v=s*o,y=s*l;return e[0]=1-f-m,e[1]=d+y,e[2]=h-v,e[3]=0,e[4]=d-y,e[5]=1-u-m,e[6]=p+g,e[7]=0,e[8]=h+v,e[9]=p-g,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function jSe(e,t,n,r,i){let s=1/Math.tan(t/2),a=1/(r-i);return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*a,e[15]=0,e}function OSe(e,t,n,r,i,s,a){let o=1/(t-n),l=1/(r-i),u=1/(s-a);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*o,e[13]=(i+r)*l,e[14]=(a+s)*u,e[15]=1,e}function PSe(e,t,n,r){let i=t[0],s=t[1],a=t[2],o=r[0],l=r[1],u=r[2],d=i-n[0],f=s-n[1],h=a-n[2],p=d*d+f*f+h*h;p===0?h=1:(p=1/Math.sqrt(p),d*=p,f*=p,h*=p);let m=l*h-u*f,g=u*d-o*h,v=o*f-l*d;return p=m*m+g*g+v*v,p===0&&(u?o+=1e-6:l?u+=1e-6:l+=1e-6,m=l*h-u*f,g=u*d-o*h,v=o*f-l*d,p=m*m+g*g+v*v),p=1/Math.sqrt(p),m*=p,g*=p,v*=p,e[0]=m,e[1]=g,e[2]=v,e[3]=0,e[4]=f*v-h*g,e[5]=h*m-d*v,e[6]=d*g-f*m,e[7]=0,e[8]=d,e[9]=f,e[10]=h,e[11]=0,e[12]=i,e[13]=s,e[14]=a,e[15]=1,e}function _6(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function N6(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function ISe(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}class Eb extends Array{constructor(t=1,n=0,r=0,i=0,s=0,a=1,o=0,l=0,u=0,d=0,f=1,h=0,p=0,m=0,g=0,v=1){return super(t,n,r,i,s,a,o,l,u,d,f,h,p,m,g,v),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(t){this[12]=t}set y(t){this[13]=t}set z(t){this[14]=t}set w(t){this[15]=t}set(t,n,r,i,s,a,o,l,u,d,f,h,p,m,g,v){return t.length?this.copy(t):(xSe(this,t,n,r,i,s,a,o,l,u,d,f,h,p,m,g,v),this)}translate(t,n=this){return ESe(this,n,t),this}rotate(t,n,r=this){return _Se(this,r,t,n),this}scale(t,n=this){return SSe(this,n,typeof t=="number"?[t,t,t]:t),this}add(t,n){return n?_6(this,t,n):_6(this,this,t),this}sub(t,n){return n?N6(this,t,n):N6(this,this,t),this}multiply(t,n){return t.length?n?S6(this,t,n):S6(this,this,t):ISe(this,this,t),this}identity(){return bSe(this),this}copy(t){return vSe(this,t),this}fromPerspective({fov:t,aspect:n,near:r,far:i}={}){return jSe(this,t,n,r,i),this}fromOrthogonal({left:t,right:n,bottom:r,top:i,near:s,far:a}){return OSe(this,t,n,r,i,s,a),this}fromQuaternion(t){return ASe(this,t),this}setPosition(t){return this.x=t[0],this.y=t[1],this.z=t[2],this}inverse(t=this){return wSe(this,t),this}compose(t,n,r){return kSe(this,t,n,r),this}decompose(t,n,r){return CSe(this,t,n,r),this}getRotation(t){return Kq(t,this),this}getTranslation(t){return NSe(t,this),this}getScaling(t){return qq(t,this),this}getMaxScaleOnAxis(){return TSe(this)}lookAt(t,n,r){return PSe(this,t,n,r),this}determinant(){return Wq(this)}fromArray(t,n=0){return this[0]=t[n],this[1]=t[n+1],this[2]=t[n+2],this[3]=t[n+3],this[4]=t[n+4],this[5]=t[n+5],this[6]=t[n+6],this[7]=t[n+7],this[8]=t[n+8],this[9]=t[n+9],this[10]=t[n+10],this[11]=t[n+11],this[12]=t[n+12],this[13]=t[n+13],this[14]=t[n+14],this[15]=t[n+15],this}toArray(t=[],n=0){return t[n]=this[0],t[n+1]=this[1],t[n+2]=this[2],t[n+3]=this[3],t[n+4]=this[4],t[n+5]=this[5],t[n+6]=this[6],t[n+7]=this[7],t[n+8]=this[8],t[n+9]=this[9],t[n+10]=this[10],t[n+11]=this[11],t[n+12]=this[12],t[n+13]=this[13],t[n+14]=this[14],t[n+15]=this[15],t}}function DSe(e,t,n="YXZ"){return n==="XYZ"?(e[1]=Math.asin(Math.min(Math.max(t[8],-1),1)),Math.abs(t[8])<.99999?(e[0]=Math.atan2(-t[9],t[10]),e[2]=Math.atan2(-t[4],t[0])):(e[0]=Math.atan2(t[6],t[5]),e[2]=0)):n==="YXZ"?(e[0]=Math.asin(-Math.min(Math.max(t[9],-1),1)),Math.abs(t[9])<.99999?(e[1]=Math.atan2(t[8],t[10]),e[2]=Math.atan2(t[1],t[5])):(e[1]=Math.atan2(-t[2],t[0]),e[2]=0)):n==="ZXY"?(e[0]=Math.asin(Math.min(Math.max(t[6],-1),1)),Math.abs(t[6])<.99999?(e[1]=Math.atan2(-t[2],t[10]),e[2]=Math.atan2(-t[4],t[5])):(e[1]=0,e[2]=Math.atan2(t[1],t[0]))):n==="ZYX"?(e[1]=Math.asin(-Math.min(Math.max(t[2],-1),1)),Math.abs(t[2])<.99999?(e[0]=Math.atan2(t[6],t[10]),e[2]=Math.atan2(t[1],t[0])):(e[0]=0,e[2]=Math.atan2(-t[4],t[5]))):n==="YZX"?(e[2]=Math.asin(Math.min(Math.max(t[1],-1),1)),Math.abs(t[1])<.99999?(e[0]=Math.atan2(-t[9],t[5]),e[1]=Math.atan2(-t[2],t[0])):(e[0]=0,e[1]=Math.atan2(t[8],t[10]))):n==="XZY"&&(e[2]=Math.asin(-Math.min(Math.max(t[4],-1),1)),Math.abs(t[4])<.99999?(e[0]=Math.atan2(t[6],t[5]),e[1]=Math.atan2(t[8],t[0])):(e[0]=Math.atan2(-t[9],t[10]),e[1]=0)),e}const T6=new Eb;class MSe extends Array{constructor(t=0,n=t,r=t,i="YXZ"){super(t,n,r),this.order=i,this.onChange=()=>{},this._target=this;const s=["0","1","2"];return new Proxy(this,{set(a,o){const l=Reflect.set(...arguments);return l&&s.includes(o)&&a.onChange(),l}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this._target[0]=t,this.onChange()}set y(t){this._target[1]=t,this.onChange()}set z(t){this._target[2]=t,this.onChange()}set(t,n=t,r=t){return t.length?this.copy(t):(this._target[0]=t,this._target[1]=n,this._target[2]=r,this.onChange(),this)}copy(t){return this._target[0]=t[0],this._target[1]=t[1],this._target[2]=t[2],this.onChange(),this}reorder(t){return this._target.order=t,this.onChange(),this}fromRotationMatrix(t,n=this.order){return DSe(this._target,t,n),this.onChange(),this}fromQuaternion(t,n=this.order,r){return T6.fromQuaternion(t),this._target.fromRotationMatrix(T6,n),r||this.onChange(),this}fromArray(t,n=0){return this._target[0]=t[n],this._target[1]=t[n+1],this._target[2]=t[n+2],this}toArray(t=[],n=0){return t[n]=this[0],t[n+1]=this[1],t[n+2]=this[2],t}}let RSe=class{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new Eb,this.worldMatrix=new Eb,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new ma,this.quaternion=new gSe,this.scale=new ma(1),this.rotation=new MSe,this.up=new ma(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(t,n=!0){this.parent&&t!==this.parent&&this.parent.removeChild(this,!1),this.parent=t,n&&t&&t.addChild(this,!1)}addChild(t,n=!0){~this.children.indexOf(t)||this.children.push(t),n&&t.setParent(this,!1)}removeChild(t,n=!0){~this.children.indexOf(t)&&this.children.splice(this.children.indexOf(t),1),n&&t.setParent(null,!1)}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||t)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,t=!0);for(let n=0,r=this.children.length;n<r;n++)this.children[n].updateMatrixWorld(t)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(t){if(!t(this))for(let n=0,r=this.children.length;n<r;n++)this.children[n].traverse(t)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(t,n=!1){n?this.matrix.lookAt(this.position,t,this.up):this.matrix.lookAt(t,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}};function LSe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function FSe(e,t){let n=t[0],r=t[1],i=t[2],s=t[3],a=n+n,o=r+r,l=i+i,u=n*a,d=r*a,f=r*o,h=i*a,p=i*o,m=i*l,g=s*a,v=s*o,y=s*l;return e[0]=1-f-m,e[3]=d-y,e[6]=h+v,e[1]=d+y,e[4]=1-u-m,e[7]=p-g,e[2]=h-v,e[5]=p+g,e[8]=1-u-f,e}function BSe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function $Se(e,t,n,r,i,s,a,o,l,u){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=a,e[6]=o,e[7]=l,e[8]=u,e}function USe(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function zSe(e,t){let n=t[0],r=t[1],i=t[2],s=t[3],a=t[4],o=t[5],l=t[6],u=t[7],d=t[8],f=d*a-o*u,h=-d*s+o*l,p=u*s-a*l,m=n*f+r*h+i*p;return m?(m=1/m,e[0]=f*m,e[1]=(-d*r+i*u)*m,e[2]=(o*r-i*a)*m,e[3]=h*m,e[4]=(d*n-i*l)*m,e[5]=(-o*n+i*s)*m,e[6]=p*m,e[7]=(-u*n+r*l)*m,e[8]=(a*n-r*s)*m,e):null}function C6(e,t,n){let r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6],d=t[7],f=t[8],h=n[0],p=n[1],m=n[2],g=n[3],v=n[4],y=n[5],b=n[6],x=n[7],S=n[8];return e[0]=h*r+p*a+m*u,e[1]=h*i+p*o+m*d,e[2]=h*s+p*l+m*f,e[3]=g*r+v*a+y*u,e[4]=g*i+v*o+y*d,e[5]=g*s+v*l+y*f,e[6]=b*r+x*a+S*u,e[7]=b*i+x*o+S*d,e[8]=b*s+x*l+S*f,e}function HSe(e,t,n){let r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6],d=t[7],f=t[8],h=n[0],p=n[1];return e[0]=r,e[1]=i,e[2]=s,e[3]=a,e[4]=o,e[5]=l,e[6]=h*r+p*a+u,e[7]=h*i+p*o+d,e[8]=h*s+p*l+f,e}function VSe(e,t,n){let r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6],d=t[7],f=t[8],h=Math.sin(n),p=Math.cos(n);return e[0]=p*r+h*a,e[1]=p*i+h*o,e[2]=p*s+h*l,e[3]=p*a-h*r,e[4]=p*o-h*i,e[5]=p*l-h*s,e[6]=u,e[7]=d,e[8]=f,e}function WSe(e,t,n){let r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function qSe(e,t){let n=t[0],r=t[1],i=t[2],s=t[3],a=t[4],o=t[5],l=t[6],u=t[7],d=t[8],f=t[9],h=t[10],p=t[11],m=t[12],g=t[13],v=t[14],y=t[15],b=n*o-r*a,x=n*l-i*a,S=n*u-s*a,E=r*l-i*o,_=r*u-s*o,T=i*u-s*l,C=d*g-f*m,k=d*v-h*m,A=d*y-p*m,j=f*v-h*g,D=f*y-p*g,P=h*y-p*v,M=b*P-x*D+S*j+E*A-_*k+T*C;return M?(M=1/M,e[0]=(o*P-l*D+u*j)*M,e[1]=(l*A-a*P-u*k)*M,e[2]=(a*D-o*A+u*C)*M,e[3]=(i*D-r*P-s*j)*M,e[4]=(n*P-i*A+s*k)*M,e[5]=(r*A-n*D-s*C)*M,e[6]=(g*T-v*_+y*E)*M,e[7]=(v*S-m*T-y*x)*M,e[8]=(m*_-g*S+y*b)*M,e):null}class KSe extends Array{constructor(t=1,n=0,r=0,i=0,s=1,a=0,o=0,l=0,u=1){return super(t,n,r,i,s,a,o,l,u),this}set(t,n,r,i,s,a,o,l,u){return t.length?this.copy(t):($Se(this,t,n,r,i,s,a,o,l,u),this)}translate(t,n=this){return HSe(this,n,t),this}rotate(t,n=this){return VSe(this,n,t),this}scale(t,n=this){return WSe(this,n,t),this}multiply(t,n){return n?C6(this,t,n):C6(this,this,t),this}identity(){return USe(this),this}copy(t){return BSe(this,t),this}fromMatrix4(t){return LSe(this,t),this}fromQuaternion(t){return FSe(this,t),this}fromBasis(t,n,r){return this.set(t[0],t[1],t[2],n[0],n[1],n[2],r[0],r[1],r[2]),this}inverse(t=this){return zSe(this,t),this}getNormalMatrix(t){return qSe(this,t),this}}let GSe=0;class YSe extends RSe{constructor(t,{geometry:n,program:r,mode:i=t.TRIANGLES,frustumCulled:s=!0,renderOrder:a=0}={}){super(),t.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=t,this.id=GSe++,this.geometry=n,this.program=r,this.mode=i,this.frustumCulled=s,this.renderOrder=a,this.modelViewMatrix=new Eb,this.normalMatrix=new KSe,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(t){return this.beforeRenderCallbacks.push(t),this}onAfterRender(t){return this.afterRenderCallbacks.push(t),this}draw({camera:t}={}){t&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=t.projectionMatrix,this.program.uniforms.cameraPosition.value=t.worldPosition,this.program.uniforms.viewMatrix.value=t.viewMatrix,this.modelViewMatrix.multiply(t.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(r=>r&&r({mesh:this,camera:t}));let n=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:n}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(r=>r&&r({mesh:this,camera:t}))}}function XSe(e,t){return e[0]=t[0],e[1]=t[1],e}function QSe(e,t,n){return e[0]=t,e[1]=n,e}function k6(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function A6(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function JSe(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function ZSe(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function hN(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function e_e(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}function t_e(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function j6(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}function n_e(e){var t=e[0],n=e[1];return t*t+n*n}function r_e(e,t){return e[0]=-t[0],e[1]=-t[1],e}function i_e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function s_e(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e}function a_e(e,t){return e[0]*t[0]+e[1]*t[1]}function O6(e,t){return e[0]*t[1]-e[1]*t[0]}function o_e(e,t,n,r){var i=t[0],s=t[1];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e}function l_e(e,t,n,r,i){const s=Math.exp(-r*i);let a=t[0],o=t[1];return e[0]=n[0]+(a-n[0])*s,e[1]=n[1]+(o-n[1])*s,e}function c_e(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e}function u_e(e,t,n){let r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}function d_e(e,t){return e[0]===t[0]&&e[1]===t[1]}class hP extends Array{constructor(t=0,n=t){return super(t,n),this}get x(){return this[0]}get y(){return this[1]}set x(t){this[0]=t}set y(t){this[1]=t}set(t,n=t){return t.length?this.copy(t):(QSe(this,t,n),this)}copy(t){return XSe(this,t),this}add(t,n){return n?k6(this,t,n):k6(this,this,t),this}sub(t,n){return n?A6(this,t,n):A6(this,this,t),this}multiply(t){return t.length?JSe(this,this,t):hN(this,this,t),this}divide(t){return t.length?ZSe(this,this,t):hN(this,this,1/t),this}inverse(t=this){return i_e(this,t),this}len(){return j6(this)}distance(t){return t?e_e(this,t):j6(this)}squaredLen(){return this.squaredDistance()}squaredDistance(t){return t?t_e(this,t):n_e(this)}negate(t=this){return r_e(this,t),this}cross(t,n){return n?O6(t,n):O6(this,t)}scale(t){return hN(this,this,t),this}normalize(){return s_e(this,this),this}dot(t){return a_e(this,t)}equals(t){return d_e(this,t)}applyMatrix3(t){return c_e(this,this,t),this}applyMatrix4(t){return u_e(this,this,t),this}lerp(t,n){return o_e(this,this,t,n),this}smoothLerp(t,n,r){return l_e(this,this,t,n,r),this}clone(){return new hP(this[0],this[1])}fromArray(t,n=0){return this[0]=t[n],this[1]=t[n+1],this}toArray(t=[],n=0){return t[n]=this[0],t[n+1]=this[1],t}}class f_e extends VEe{constructor(t,{attributes:n={}}={}){Object.assign(n,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(t,n)}}const h_e=`
attribute vec2 position;
void main(){gl_Position=vec4(position,0.0,1.0);}
`,p_e=`
#ifdef GL_ES
precision lowp float;
#endif
uniform vec2 uResolution;
uniform float uTime;
uniform float uHueShift;
uniform float uNoise;
uniform float uScan;
uniform float uScanFreq;
uniform float uWarp;
#define iTime uTime
#define iResolution uResolution

vec4 buf[8];
float rand(vec2 c){return fract(sin(dot(c,vec2(12.9898,78.233)))*43758.5453);}

mat3 rgb2yiq=mat3(0.299,0.587,0.114,0.596,-0.274,-0.322,0.211,-0.523,0.312);
mat3 yiq2rgb=mat3(1.0,0.956,0.621,1.0,-0.272,-0.647,1.0,-1.106,1.703);

vec3 hueShiftRGB(vec3 col,float deg){
    vec3 yiq=rgb2yiq*col;
    float rad=radians(deg);
    float cosh=cos(rad),sinh=sin(rad);
    vec3 yiqShift=vec3(yiq.x,yiq.y*cosh-yiq.z*sinh,yiq.y*sinh+yiq.z*cosh);
    return clamp(yiq2rgb*yiqShift,0.0,1.0);
}

vec4 sigmoid(vec4 x){return 1./(1.+exp(-x));}

vec4 cppn_fn(vec2 coordinate,float in0,float in1,float in2){
    buf[6]=vec4(coordinate.x,coordinate.y,0.3948333106474662+in0,0.36+in1);
    buf[7]=vec4(0.14+in2,sqrt(coordinate.x*coordinate.x+coordinate.y*coordinate.y),0.,0.);
    buf[0]=mat4(vec4(6.5404263,-3.6126034,0.7590882,-1.13613),vec4(2.4582713,3.1660357,1.2219609,0.06276096),vec4(-5.478085,-6.159632,1.8701609,-4.7742867),vec4(6.039214,-5.542865,-0.90925294,3.251348))*buf[6]+mat4(vec4(0.8473259,-5.722911,3.975766,1.6522468),vec4(-0.24321538,0.5839259,-1.7661959,-5.350116),vec4(0.,0.,0.,0.),vec4(0.,0.,0.,0.))*buf[7]+vec4(0.21808943,1.1243913,-1.7969975,5.0294676);
    buf[1]=mat4(vec4(-3.3522482,-6.0612736,0.55641043,-4.4719114),vec4(0.8631464,1.7432913,5.643898,1.6106541),vec4(2.4941394,-3.5012043,1.7184316,6.357333),vec4(3.310376,8.209261,1.1355612,-1.165539))*buf[6]+mat4(vec4(5.24046,-13.034365,0.009859298,15.870829),vec4(2.987511,3.129433,-0.89023495,-1.6822904),vec4(0.,0.,0.,0.),vec4(0.,0.,0.,0.))*buf[7]+vec4(-5.9457836,-6.573602,-0.8812491,1.5436668);
    buf[0]=sigmoid(buf[0]);buf[1]=sigmoid(buf[1]);
    buf[2]=mat4(vec4(-15.219568,8.095543,-2.429353,-1.9381982),vec4(-5.951362,4.3115187,2.6393783,1.274315),vec4(-7.3145227,6.7297835,5.2473326,5.9411426),vec4(5.0796127,8.979051,-1.7278991,-1.158976))*buf[6]+mat4(vec4(-11.967154,-11.608155,6.1486754,11.237008),vec4(2.124141,-6.263192,-1.7050359,-0.7021966),vec4(0.,0.,0.,0.),vec4(0.,0.,0.,0.))*buf[7]+vec4(-4.17164,-3.2281182,-4.576417,-3.6401186);
    buf[3]=mat4(vec4(3.1832156,-13.738922,1.879223,3.233465),vec4(0.64300746,12.768129,1.9141049,0.50990224),vec4(-0.049295485,4.4807224,1.4733979,1.801449),vec4(5.0039253,13.000481,3.3991797,-4.5561905))*buf[6]+mat4(vec4(-0.1285731,7.720628,-3.1425676,4.742367),vec4(0.6393625,3.714393,-0.8108378,-0.39174938),vec4(0.,0.,0.,0.),vec4(0.,0.,0.,0.))*buf[7]+vec4(-1.1811101,-21.621881,0.7851888,1.2329718);
    buf[2]=sigmoid(buf[2]);buf[3]=sigmoid(buf[3]);
    buf[4]=mat4(vec4(5.214916,-7.183024,2.7228765,2.6592617),vec4(-5.601878,-25.3591,4.067988,0.4602802),vec4(-10.57759,24.286327,21.102104,37.546658),vec4(4.3024497,-1.9625226,2.3458803,-1.372816))*buf[0]+mat4(vec4(-17.6526,-10.507558,2.2587414,12.462782),vec4(6.265566,-502.75443,-12.642513,0.9112289),vec4(-10.983244,20.741234,-9.701768,-0.7635988),vec4(5.383626,1.4819539,-4.1911616,-4.8444734))*buf[1]+mat4(vec4(12.785233,-16.345072,-0.39901125,1.7955981),vec4(-30.48365,-1.8345358,1.4542528,-1.1118771),vec4(19.872723,-7.337935,-42.941723,-98.52709),vec4(8.337645,-2.7312303,-2.2927687,-36.142323))*buf[2]+mat4(vec4(-16.298317,3.5471997,-0.44300047,-9.444417),vec4(57.5077,-35.609753,16.163465,-4.1534753),vec4(-0.07470326,-3.8656476,-7.0901804,3.1523974),vec4(-12.559385,-7.077619,1.490437,-0.8211543))*buf[3]+vec4(-7.67914,15.927437,1.3207729,-1.6686112);
    buf[5]=mat4(vec4(-1.4109162,-0.372762,-3.770383,-21.367174),vec4(-6.2103205,-9.35908,0.92529047,8.82561),vec4(11.460242,-22.348068,13.625772,-18.693201),vec4(-0.3429052,-3.9905605,-2.4626114,-0.45033523))*buf[0]+mat4(vec4(7.3481627,-4.3661838,-6.3037653,-3.868115),vec4(1.5462853,6.5488915,1.9701879,-0.58291394),vec4(6.5858274,-2.2180402,3.7127688,-1.3730392),vec4(-5.7973905,10.134961,-2.3395722,-5.965605))*buf[1]+mat4(vec4(-2.5132585,-6.6685553,-1.4029363,-0.16285264),vec4(-0.37908727,0.53738135,4.389061,-1.3024765),vec4(-0.70647055,2.0111287,-5.1659346,-3.728635),vec4(-13.562562,10.487719,-0.9173751,-2.6487076))*buf[2]+mat4(vec4(-8.645013,6.5546675,-6.3944063,-5.5933375),vec4(-0.57783127,-1.077275,36.91025,5.736769),vec4(14.283112,3.7146652,7.1452246,-4.5958776),vec4(2.7192075,3.6021907,-4.366337,-2.3653464))*buf[3]+vec4(-5.9000807,-4.329569,1.2427121,8.59503);
    buf[4]=sigmoid(buf[4]);buf[5]=sigmoid(buf[5]);
    buf[6]=mat4(vec4(-1.61102,0.7970257,1.4675229,0.20917463),vec4(-28.793737,-7.1390953,1.5025433,4.656581),vec4(-10.94861,39.66238,0.74318546,-10.095605),vec4(-0.7229728,-1.5483948,0.7301322,2.1687684))*buf[0]+mat4(vec4(3.2547753,21.489103,-1.0194173,-3.3100595),vec4(-3.7316632,-3.3792162,-7.223193,-0.23685838),vec4(13.1804495,0.7916005,5.338587,5.687114),vec4(-4.167605,-17.798311,-6.815736,-1.6451967))*buf[1]+mat4(vec4(0.604885,-7.800309,-7.213122,-2.741014),vec4(-3.522382,-0.12359311,-0.5258442,0.43852118),vec4(9.6752825,-22.853785,2.062431,0.099892326),vec4(-4.3196306,-17.730087,2.5184598,5.30267))*buf[2]+mat4(vec4(-6.545563,-15.790176,-6.0438633,-5.415399),vec4(-43.591583,28.551912,-16.00161,18.84728),vec4(4.212382,8.394307,3.0958717,8.657522),vec4(-5.0237565,-4.450633,-4.4768,-5.5010443))*buf[3]+mat4(vec4(1.6985557,-67.05806,6.897715,1.9004834),vec4(1.8680354,2.3915145,2.5231109,4.081538),vec4(11.158006,1.7294737,2.0738268,7.386411),vec4(-4.256034,-306.24686,8.258898,-17.132736))*buf[4]+mat4(vec4(1.6889864,-4.5852966,3.8534803,-6.3482175),vec4(1.3543309,-1.2640043,9.932754,2.9079645),vec4(-5.2770967,0.07150358,-0.13962056,3.3269649),vec4(28.34703,-4.918278,6.1044083,4.085355))*buf[5]+vec4(6.6818056,12.522166,-3.7075126,-4.104386);
    buf[7]=mat4(vec4(-8.265602,-4.7027016,5.098234,0.7509808),vec4(8.6507845,-17.15949,16.51939,-8.884479),vec4(-4.036479,-2.3946867,-2.6055532,-1.9866527),vec4(-2.2167742,-1.8135649,-5.9759874,4.8846445))*buf[0]+mat4(vec4(6.7790847,3.5076547,-2.8191125,-2.7028968),vec4(-5.743024,-0.27844876,1.4958696,-5.0517144),vec4(13.122226,15.735168,-2.9397483,-4.101023),vec4(-14.375265,-5.030483,-6.2599335,2.9848232))*buf[1]+mat4(vec4(4.0950394,-0.94011575,-5.674733,4.755022),vec4(4.3809423,4.8310084,1.7425908,-3.437416),vec4(2.117492,0.16342592,-104.56341,16.949184),vec4(-5.22543,-2.994248,3.8350096,-1.9364246))*buf[2]+mat4(vec4(-5.900337,1.7946124,-13.604192,-3.8060522),vec4(6.6583457,31.911177,25.164474,91.81147),vec4(11.840538,4.1503043,-0.7314397,6.768467),vec4(-6.3967767,4.034772,6.1714606,-0.32874924))*buf[3]+mat4(vec4(3.4992442,-196.91893,-8.923708,2.8142626),vec4(3.4806502,-3.1846354,5.1725626,5.1804223),vec4(-2.4009497,15.585794,1.2863957,2.0252278),vec4(-71.25271,-62.441242,-8.138444,0.50670296))*buf[4]+mat4(vec4(-12.291733,-11.176166,-7.3474145,4.390294),vec4(10.805477,5.6337385,-0.9385842,-4.7348723),vec4(-12.869276,-7.039391,5.3029537,7.5436664),vec4(1.4593618,8.91898,3.5101583,5.840625))*buf[5]+vec4(2.2415268,-6.705987,-0.98861027,-2.117676);
    buf[6]=sigmoid(buf[6]);buf[7]=sigmoid(buf[7]);
    buf[0]=mat4(vec4(1.6794263,1.3817469,2.9625452,0.),vec4(-1.8834411,-1.4806935,-3.5924516,0.),vec4(-1.3279216,-1.0918057,-2.3124623,0.),vec4(0.2662234,0.23235129,0.44178495,0.))*buf[0]+mat4(vec4(-0.6299101,-0.5945583,-0.9125601,0.),vec4(0.17828953,0.18300213,0.18182953,0.),vec4(-2.96544,-2.5819945,-4.9001055,0.),vec4(1.4195864,1.1868085,2.5176322,0.))*buf[1]+mat4(vec4(-1.2584374,-1.0552157,-2.1688404,0.),vec4(-0.7200217,-0.52666044,-1.438251,0.),vec4(0.15345335,0.15196142,0.272854,0.),vec4(0.945728,0.8861938,1.2766753,0.))*buf[2]+mat4(vec4(-2.4218085,-1.968602,-4.35166,0.),vec4(-22.683098,-18.0544,-41.954372,0.),vec4(0.63792,0.5470648,1.1078634,0.),vec4(-1.5489894,-1.3075932,-2.6444845,0.))*buf[3]+mat4(vec4(-0.49252132,-0.39877754,-0.91366625,0.),vec4(0.95609266,0.7923952,1.640221,0.),vec4(0.30616966,0.15693925,0.8639857,0.),vec4(1.1825981,0.94504964,2.176963,0.))*buf[4]+mat4(vec4(0.35446745,0.3293795,0.59547555,0.),vec4(-0.58784515,-0.48177817,-1.0614829,0.),vec4(2.5271258,1.9991658,4.6846647,0.),vec4(0.13042648,0.08864098,0.30187556,0.))*buf[5]+mat4(vec4(-1.7718065,-1.4033192,-3.3355875,0.),vec4(3.1664357,2.638297,5.378702,0.),vec4(-3.1724713,-2.6107926,-5.549295,0.),vec4(-2.851368,-2.249092,-5.3013067,0.))*buf[6]+mat4(vec4(1.5203838,1.2212278,2.8404984,0.),vec4(1.5210563,1.2651345,2.683903,0.),vec4(2.9789467,2.4364579,5.2347264,0.),vec4(2.2270417,1.8825914,3.8028636,0.))*buf[7]+vec4(-1.5468478,-3.6171484,0.24762098,0.);
    buf[0]=sigmoid(buf[0]);
    return vec4(buf[0].x,buf[0].y,buf[0].z,1.);
}

void mainImage(out vec4 fragColor,in vec2 fragCoord){
    vec2 uv=fragCoord/uResolution.xy*2.-1.;
    uv.y*=-1.;
    uv+=uWarp*vec2(sin(uv.y*6.283+uTime*0.5),cos(uv.x*6.283+uTime*0.5))*0.05;
    fragColor=cppn_fn(uv,0.1*sin(0.3*uTime),0.1*sin(0.69*uTime),0.1*sin(0.44*uTime));
}

void main(){
    vec4 col;mainImage(col,gl_FragCoord.xy);
    col.rgb=hueShiftRGB(col.rgb,uHueShift);
    float scanline_val=sin(gl_FragCoord.y*uScanFreq)*0.5+0.5;
    col.rgb*=1.-(scanline_val*scanline_val)*uScan;
    col.rgb+=(rand(gl_FragCoord.xy+uTime)-0.5)*uNoise;
    gl_FragColor=vec4(clamp(col.rgb,0.0,1.0),1.0);
}
`,Gq=w.forwardRef(({className:e,hueShift:t=0,noiseIntensity:n=0,scanlineIntensity:r=0,speed:i=.5,scanlineFrequency:s=0,warpAmount:a=0,resolutionScale:o=1,...l},u)=>{const d=l,f=w.useRef(null);return w.useEffect(()=>{const h=f.current;if(!h)return;const p=h.parentElement,m=new QEe({dpr:Math.min(window.devicePixelRatio,2),canvas:h}),g=m.gl,v=new f_e(g),y=new qEe(g,{vertex:h_e,fragment:p_e,uniforms:{uTime:{value:0},uResolution:{value:new hP},uHueShift:{value:t},uNoise:{value:n},uScan:{value:r},uScanFreq:{value:s},uWarp:{value:a}}}),b=new YSe(g,{geometry:v,program:y}),x=()=>{const T=p.clientWidth,C=p.clientHeight;m.setSize(T*o,C*o),y.uniforms.uResolution.value.set(T,C)};window.addEventListener("resize",x),x();const S=performance.now();let E=0;const _=()=>{y.uniforms.uTime.value=(performance.now()-S)/1e3*i,y.uniforms.uHueShift.value=t,y.uniforms.uNoise.value=n,y.uniforms.uScan.value=r,y.uniforms.uScanFreq.value=s,y.uniforms.uWarp.value=a,m.render({scene:b}),E=requestAnimationFrame(_)};return _(),()=>{cancelAnimationFrame(E),window.removeEventListener("resize",x)}},[t,n,r,i,s,a,o]),c.jsx("div",{ref:u,className:Ve("w-full h-full relative",e),...d,children:c.jsx("canvas",{ref:f,className:"w-full h-full block"})})});Gq.displayName="DarkVeilBackground";function m_e({isDarkMode:e}){const[t,n]=w.useState(!1),[r,i]=w.useState(!1),{profile:s,updateCompanyMotto:a,updateCompanySubtext:o}=Gve(),[l,u]=w.useState((s==null?void 0:s.company_motto)||"Building the future, one project at a time."),[d,f]=w.useState((s==null?void 0:s.company_subtext)||"Delivering excellence through innovation and dedication.");w.useEffect(()=>{s!=null&&s.company_motto&&u(s.company_motto),s!=null&&s.company_subtext&&f(s.company_subtext)},[s==null?void 0:s.company_motto,s==null?void 0:s.company_subtext]);const h=async()=>{await a(l)&&n(!1)},p=()=>{u((s==null?void 0:s.company_motto)||"Building the future, one project at a time."),n(!1)},m=async()=>{await o(d)&&i(!1)},g=()=>{f((s==null?void 0:s.company_subtext)||"Delivering excellence through innovation and dedication."),i(!1)};return c.jsxs(Z,{className:"relative overflow-hidden border-0 min-h-[300px] h-[20vh]",children:[e?c.jsx(Gq,{className:"absolute inset-0"}):c.jsxs("div",{className:"absolute inset-0",children:[c.jsx(Hq,{className:"absolute inset-0"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/80 via-purple-50/60 to-cyan-50/80"})]}),c.jsx(ee,{className:"relative p-8 h-full flex flex-col items-center justify-center text-center backdrop-blur-sm",children:c.jsxs("div",{className:"space-y-6 max-w-2xl mx-auto",children:[c.jsx("div",{className:"space-y-2",children:t?c.jsxs("div",{className:"space-y-3",children:[c.jsx(ce,{value:l,onChange:v=>u(v.target.value),className:`text-3xl font-bold text-center bg-black/10 dark:bg-white/10 border-white/20 ${e?"text-white placeholder:text-white/60":"text-gray-900 placeholder:text-gray-600"}`,placeholder:"Enter your company motto"}),c.jsxs("div",{className:"flex justify-center gap-2",children:[c.jsxs(H,{size:"sm",onClick:h,className:"bg-green-500/20 hover:bg-green-500/30 text-green-600 dark:text-green-400 border-green-500/30",variant:"outline",children:[c.jsx(sb,{className:"h-4 w-4 mr-1"}),"Save"]}),c.jsxs(H,{size:"sm",variant:"outline",onClick:p,className:"bg-red-500/20 hover:bg-red-500/30 text-red-600 dark:text-red-400 border-red-500/30",children:[c.jsx(wr,{className:"h-4 w-4 mr-1"}),"Cancel"]})]})]}):c.jsxs("div",{className:"group relative",children:[c.jsx("h2",{className:`text-4xl font-bold leading-tight ${e?"text-white":"text-gray-900"}`,children:(s==null?void 0:s.company_motto)||"Building the future, one project at a time."}),c.jsx(H,{size:"sm",variant:"ghost",onClick:()=>n(!0),className:"absolute -top-2 -right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-blue-500/20 hover:bg-blue-500/30 text-blue-600 dark:text-blue-400",children:c.jsx(n4,{className:"h-4 w-4"})})]})}),c.jsx("div",{className:"space-y-2",children:r?c.jsxs("div",{className:"space-y-3",children:[c.jsx(ce,{value:d,onChange:v=>f(v.target.value),className:`text-xl text-center bg-black/10 dark:bg-white/10 border-white/20 ${e?"text-white/80 placeholder:text-white/50":"text-gray-700 placeholder:text-gray-500"}`,placeholder:"Enter your company subtext"}),c.jsxs("div",{className:"flex justify-center gap-2",children:[c.jsxs(H,{size:"sm",onClick:m,className:"bg-green-500/20 hover:bg-green-500/30 text-green-600 dark:text-green-400 border-green-500/30",variant:"outline",children:[c.jsx(sb,{className:"h-4 w-4 mr-1"}),"Save"]}),c.jsxs(H,{size:"sm",variant:"outline",onClick:g,className:"bg-red-500/20 hover:bg-red-500/30 text-red-600 dark:text-red-400 border-red-500/30",children:[c.jsx(wr,{className:"h-4 w-4 mr-1"}),"Cancel"]})]})]}):c.jsxs("div",{className:"group relative",children:[c.jsx("p",{className:`text-2xl opacity-80 leading-relaxed ${e?"text-white/80":"text-gray-600"}`,children:(s==null?void 0:s.company_subtext)||"Delivering excellence through innovation and dedication."}),c.jsx(H,{size:"sm",variant:"ghost",onClick:()=>i(!0),className:"absolute -top-2 -right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-blue-500/20 hover:bg-blue-500/30 text-blue-600 dark:text-blue-400",children:c.jsx(n4,{className:"h-4 w-4"})})]})})]})})]})}function g_e({isDarkMode:e}){return c.jsx(m_e,{isDarkMode:e})}const le=e=>typeof e!="number"||isNaN(e)?"0 kr":new Intl.NumberFormat("sv-SE",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e)+" kr";function y_e({widget:e,isDarkMode:t}){return c.jsxs(Z,{className:"h-full",children:[c.jsx(de,{className:"pb-2",children:c.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[c.jsx(mn,{className:"h-4 w-4"}),"Monthly Expenses"]})}),c.jsx(ee,{children:c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"text-2xl font-bold",children:le(4850)}),c.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[c.jsx(ti,{className:"h-4 w-4 text-red-500"}),c.jsxs("span",{className:"text-red-500",children:[Math.abs(15.476190476190476).toFixed(1),"%"]}),c.jsx("span",{className:"text-muted-foreground",children:"vs last month"})]}),c.jsxs("div",{className:"text-xs text-muted-foreground",children:["Last month: ",le(4200)]})]})})]})}function si(){const{user:e}=Tr(),[t,n]=w.useState([]),[r,i]=w.useState(!0),[s,a]=w.useState(null);w.useEffect(()=>{e?o():(n([]),i(!1))},[e]);const o=async()=>{try{i(!0);const{data:f,error:h}=await J.from("time_entries").select(`
          *,
          project:projects(*)
        `).eq("user_id",e.id).order("date",{ascending:!1});if(h)throw h;n(f||[])}catch(f){a(f instanceof Error?f.message:"An error occurred")}finally{i(!1)}};return{entries:t,loading:r,error:s,createTimeEntry:async f=>{try{const{data:h,error:p}=await J.from("time_entries").insert({...f,user_id:e.id}).select(`
          *,
          project:projects(*)
        `).single();if(p)throw p;return n(m=>[h,...m]),{data:h,error:null}}catch(h){const p=h instanceof Error?h.message:"Failed to create time entry";return a(p),{data:null,error:p}}},updateTimeEntry:async(f,h)=>{try{const{data:p,error:m}=await J.from("time_entries").update(h).eq("id",f).eq("user_id",e.id).select(`
          *,
          project:projects(*)
        `).single();if(m)throw m;return n(g=>g.map(v=>v.id===f?p:v)),{data:p,error:null}}catch(p){const m=p instanceof Error?p.message:"Failed to update time entry";return a(m),{data:null,error:m}}},deleteTimeEntry:async f=>{try{const{error:h}=await J.from("time_entries").delete().eq("id",f).eq("user_id",e.id);if(h)throw h;return n(p=>p.filter(m=>m.id!==f)),{error:null}}catch(h){const p=h instanceof Error?h.message:"Failed to delete time entry";return a(p),{error:p}}},refetch:o}}function v_e(){const{entries:e}=si(),{user:t}=Tr(),[n,r]=w.useState({billing_percentage:94,absence_percentage:15});w.useEffect(()=>{(async()=>{if(t)try{const b=new Date,x=b.getFullYear(),S=b.getMonth()+1,{data:E,error:_}=await J.from("monthly_settings").select("billing_percentage, absence_percentage").eq("user_id",t.id).eq("year",x).eq("month",S).single();if(E&&!_)r({billing_percentage:E.billing_percentage,absence_percentage:E.absence_percentage});else{const{data:T,error:C}=await J.from("user_profiles").select("debit_rate_monthly, absence_percentage").eq("id",t.id).single();T&&!C&&r({billing_percentage:T.debit_rate_monthly||94,absence_percentage:T.absence_percentage||15})}}catch(b){console.error("Error loading user settings:",b)}})()},[t]);const i=new Date,s=i.getMonth(),a=i.getFullYear(),l=e.filter(y=>{const b=new Date(y.date+"T00:00:00");return b.getMonth()===s&&b.getFullYear()===a}).reduce((y,b)=>y+b.hours,0),u=new Date(a,s+1,0).getDate(),p=Array.from({length:u},(y,b)=>{const x=new Date(a,s,b+1);return x.getDay()!==0&&x.getDay()!==6}).filter(Boolean).length*8*(1-n.absence_percentage/100)*(n.billing_percentage/100),m=p>0?l/p*100:0,g=Math.max(0,p-l),v=["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"];return c.jsxs(Z,{className:"h-full",children:[c.jsx(de,{className:"pb-2",children:c.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[c.jsx(ht,{className:"h-4 w-4"}),"Loggad tid - ",v[s]]})}),c.jsx(ee,{children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"text-2xl font-bold",children:[l.toFixed(1),"h"]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"Framsteg mot ml"}),c.jsxs("span",{className:"text-muted-foreground",children:[m.toFixed(0),"%"]})]}),c.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:c.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(m,100)}%`}})})]}),c.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[c.jsx(ul,{className:"h-4 w-4 text-muted-foreground"}),c.jsx("span",{className:"text-muted-foreground",children:g>0?`${g.toFixed(0)}h kvar till ml`:"Mlet ntt!"})]}),c.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(At,{className:"h-3 w-3"}),c.jsxs("span",{children:["Ml: ",p.toFixed(0),"h debiterbara timmar"]})]}),c.jsxs("div",{children:["Debiteringsgrad: ",n.billing_percentage,"% | Frnvaro: ",n.absence_percentage,"%"]})]})]})})]})}function x_e(){const{entries:e}=si(),{user:t}=Tr(),[n,r]=w.useState({billing_percentage:94,absence_percentage:15});w.useEffect(()=>{(async()=>{if(t)try{const p=new Date,m=p.getFullYear(),g=p.getMonth()+1,{data:v,error:y}=await J.from("monthly_settings").select("billing_percentage, absence_percentage").eq("user_id",t.id).eq("year",m).eq("month",g).single();if(v&&!y)r({billing_percentage:v.billing_percentage,absence_percentage:v.absence_percentage});else{const{data:b,error:x}=await J.from("user_profiles").select("debit_rate_monthly, absence_percentage").eq("id",t.id).single();b&&!x&&r({billing_percentage:b.debit_rate_monthly||94,absence_percentage:b.absence_percentage||15})}}catch(p){console.error("Error loading user settings:",p)}})()},[t]);const i=new Date().toISOString().split("T")[0],s=e.filter(h=>h.date===i),a=s.reduce((h,p)=>h+p.hours,0),o=21,l=o*8*(1-n.absence_percentage/100)*(n.billing_percentage/100)/o,u=l>0?a/l*100:0,d=Math.max(0,l-a),f=()=>u>=100?"text-green-600":u>=75?"text-blue-600":u>=50?"text-yellow-600":"text-gray-600";return c.jsxs(Z,{className:"h-full",children:[c.jsx(de,{className:"pb-2",children:c.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[c.jsx(ht,{className:"h-4 w-4"}),"Dagens timmar"]})}),c.jsx(ee,{children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:`text-3xl font-bold ${f()}`,children:[a.toFixed(1),"h"]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"Dagsml"}),c.jsxs("span",{className:"text-muted-foreground",children:[u.toFixed(0),"%"]})]}),c.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:c.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${u>=100?"bg-green-500":u>=75?"bg-blue-500":u>=50?"bg-yellow-500":"bg-gray-400"}`,style:{width:`${Math.min(u,100)}%`}})})]}),c.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[c.jsx(ul,{className:"h-4 w-4 text-muted-foreground"}),c.jsx("span",{className:"text-muted-foreground",children:d>0?`${d.toFixed(1)}h kvar till ml`:u>=100?"Dagsml uppntt!":"P rtt spr"})]}),c.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(At,{className:"h-3 w-3"}),c.jsxs("span",{children:["Ml: ",l.toFixed(1),"h debiterbara/dag"]})]}),c.jsxs("div",{children:[s.length," ",s.length===1?"registrering":"registreringar"," idag"]})]})]})})]})}var hE={},Yq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(Yq);var pP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(pP);var mP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}e.toKey=t})(mP);var pE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const r=[],i=n.length;if(i===0)return r;let s=0,a="",o="",l=!1;for(n.charCodeAt(0)===46&&(r.push(""),s++);s<i;){const u=n[s];o?u==="\\"&&s+1<i?(s++,a+=n[s]):u===o?o="":a+=u:l?u==='"'||u==="'"?o=u:u==="]"?(l=!1,r.push(a),a=""):a+=u:u==="["?(l=!0,a&&(r.push(a),a="")):u==="."?a&&(r.push(a),a=""):a+=u,s++}return a&&r.push(a),r}e.toPath=t})(pE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yq,n=pP,r=mP,i=pE;function s(o,l,u){if(o==null)return u;switch(typeof l){case"string":{if(t.isUnsafeProperty(l))return u;const d=o[l];return d===void 0?n.isDeepKey(l)?s(o,i.toPath(l),u):u:d}case"number":case"symbol":{typeof l=="number"&&(l=r.toKey(l));const d=o[l];return d===void 0?u:d}default:{if(Array.isArray(l))return a(o,l,u);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),t.isUnsafeProperty(l))return u;const d=o[l];return d===void 0?u:d}}}function a(o,l,u){if(l.length===0)return u;let d=o;for(let f=0;f<l.length;f++){if(d==null||t.isUnsafeProperty(l[f]))return u;d=d[l[f]]}return d===void 0?u:d}e.get=s})(hE);var b_e=hE.get;const Tc=ii(b_e);var Xq={exports:{}},Wt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gP=Symbol.for("react.transitional.element"),yP=Symbol.for("react.portal"),mE=Symbol.for("react.fragment"),gE=Symbol.for("react.strict_mode"),yE=Symbol.for("react.profiler"),vE=Symbol.for("react.consumer"),xE=Symbol.for("react.context"),bE=Symbol.for("react.forward_ref"),wE=Symbol.for("react.suspense"),EE=Symbol.for("react.suspense_list"),SE=Symbol.for("react.memo"),_E=Symbol.for("react.lazy"),w_e=Symbol.for("react.view_transition"),E_e=Symbol.for("react.client.reference");function Qs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case gP:switch(e=e.type,e){case mE:case yE:case gE:case wE:case EE:case w_e:return e;default:switch(e=e&&e.$$typeof,e){case xE:case bE:case _E:case SE:return e;case vE:return e;default:return t}}case yP:return t}}}Wt.ContextConsumer=vE;Wt.ContextProvider=xE;Wt.Element=gP;Wt.ForwardRef=bE;Wt.Fragment=mE;Wt.Lazy=_E;Wt.Memo=SE;Wt.Portal=yP;Wt.Profiler=yE;Wt.StrictMode=gE;Wt.Suspense=wE;Wt.SuspenseList=EE;Wt.isContextConsumer=function(e){return Qs(e)===vE};Wt.isContextProvider=function(e){return Qs(e)===xE};Wt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===gP};Wt.isForwardRef=function(e){return Qs(e)===bE};Wt.isFragment=function(e){return Qs(e)===mE};Wt.isLazy=function(e){return Qs(e)===_E};Wt.isMemo=function(e){return Qs(e)===SE};Wt.isPortal=function(e){return Qs(e)===yP};Wt.isProfiler=function(e){return Qs(e)===yE};Wt.isStrictMode=function(e){return Qs(e)===gE};Wt.isSuspense=function(e){return Qs(e)===wE};Wt.isSuspenseList=function(e){return Qs(e)===EE};Wt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===mE||e===yE||e===gE||e===wE||e===EE||typeof e=="object"&&e!==null&&(e.$$typeof===_E||e.$$typeof===SE||e.$$typeof===xE||e.$$typeof===vE||e.$$typeof===bE||e.$$typeof===E_e||e.getModuleId!==void 0)};Wt.typeOf=Qs;Xq.exports=Wt;var S_e=Xq.exports,xr=e=>e===0?0:e>0?1:-1,zi=e=>typeof e=="number"&&e!=+e,Tu=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Ie=e=>(typeof e=="number"||e instanceof Number)&&!zi(e),oo=e=>Ie(e)||typeof e=="string",__e=0,Mg=e=>{var t=++__e;return"".concat(e||"").concat(t)},vi=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ie(t)&&typeof t!="string")return r;var s;if(Tu(t)){if(n==null)return r;var a=t.indexOf("%");s=n*parseFloat(t.slice(0,a))/100}else s=+t;return zi(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},Qq=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1},P6=(e,t)=>Ie(e)&&Ie(t)?n=>e+n*(t-e):()=>t;function Rr(e,t,n){return Ie(e)&&Ie(t)?e+n*(t-e):t}function Jq(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):Tc(r,t))===n)}var Zt=e=>e===null||typeof e>"u",z0=e=>Zt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),N_e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function vP(e){if(typeof e!="string")return!1;var t=N_e;return t.includes(e)}var T_e=["viewBox","children"],I6=["points","pathLength"],pN={svg:T_e,polygon:I6,polyline:I6},xP=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(w.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{vP(i)&&(r[i]=s=>n[i](n,s))}),r},C_e=(e,t,n)=>r=>(e(t,n,r),null),H0=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var s=e[i];vP(i)&&typeof s=="function"&&(r||(r={}),r[i]=C_e(s,t,n))}),r},k_e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function Zq(e){if(typeof e!="string")return!1;var t=k_e;return t.includes(e)}function Oa(e){var t=Object.entries(e).filter(n=>{var[r]=n;return Zq(r)});return Object.fromEntries(t)}var D6=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",M6=null,mN=null,eK=e=>{if(e===M6&&Array.isArray(mN))return mN;var t=[];return w.Children.forEach(e,n=>{Zt(n)||(S_e.isFragment(n)?t=t.concat(eK(n.props.children)):t.push(n))}),mN=t,M6=e,t};function V0(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>D6(i)):r=[D6(t)],eK(e).forEach(i=>{var s=Tc(i,"type.displayName")||Tc(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}var NE=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,A_e=(e,t,n,r)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(i=r&&(pN==null?void 0:pN[r]))!==null&&i!==void 0?i:[],a=t.startsWith("data-"),o=typeof e!="function"&&(!!r&&s.includes(t)||Zq(t)),l=!!n&&vP(t);return a||o||l},Jt=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(w.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(s=>{var a;A_e((a=r)===null||a===void 0?void 0:a[s],s,t,n)&&(i[s]=r[s])}),i},j_e=["children","width","height","viewBox","className","style","title","desc"];function U2(){return U2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U2.apply(null,arguments)}function O_e(e,t){if(e==null)return{};var n,r,i=P_e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function P_e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var bP=w.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:s,className:a,style:o,title:l,desc:u}=e,d=O_e(e,j_e),f=s||{width:r,height:i,x:0,y:0},h=gt("recharts-surface",a);return w.createElement("svg",U2({},Jt(d,!0,"svg"),{className:h,width:r,height:i,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),w.createElement("title",null,l),w.createElement("desc",null,u),n)}),I_e=["children","className"];function z2(){return z2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z2.apply(null,arguments)}function D_e(e,t){if(e==null)return{};var n,r,i=M_e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function M_e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var zn=w.forwardRef((e,t)=>{var{children:n,className:r}=e,i=D_e(e,I_e),s=gt("recharts-layer",r);return w.createElement("g",z2({className:s},Jt(i,!0),{ref:t}),n)}),tK=w.createContext(null),R_e=()=>w.useContext(tK);function Xt(e){return function(){return e}}const nK=Math.cos,Sb=Math.sin,Pa=Math.sqrt,_b=Math.PI,TE=2*_b,H2=Math.PI,V2=2*H2,pu=1e-6,L_e=V2-pu;function rK(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function F_e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return rK;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class B_e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?rK:F_e(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-t,u=i-n,d=a-t,f=o-n,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>pu)if(!(Math.abs(f*l-u*d)>pu)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-a,m=i-o,g=l*l+u*u,v=p*p+m*m,y=Math.sqrt(g),b=Math.sqrt(h),x=s*Math.tan((H2-Math.acos((g+h-v)/(2*y*b)))/2),S=x/b,E=x/y;Math.abs(S-1)>pu&&this._append`L${t+S*d},${n+S*f}`,this._append`A${s},${s},0,0,${+(f*p>d*m)},${this._x1=t+E*l},${this._y1=n+E*u}`}}arc(t,n,r,i,s,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),u=t+o,d=n+l,f=1^a,h=a?i-s:s-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>pu||Math.abs(this._y1-d)>pu)&&this._append`L${u},${d}`,r&&(h<0&&(h=h%V2+V2),h>L_e?this._append`A${r},${r},0,1,${f},${t-o},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=d}`:h>pu&&this._append`A${r},${r},0,${+(h>=H2)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function wP(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new B_e(t)}function EP(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function iK(e){this._context=e}iK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function CE(e){return new iK(e)}function sK(e){return e[0]}function aK(e){return e[1]}function oK(e,t){var n=Xt(!0),r=null,i=CE,s=null,a=wP(o);e=typeof e=="function"?e:e===void 0?sK:Xt(e),t=typeof t=="function"?t:t===void 0?aK:Xt(t);function o(l){var u,d=(l=EP(l)).length,f,h=!1,p;for(r==null&&(s=i(p=a())),u=0;u<=d;++u)!(u<d&&n(f=l[u],u,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,u,l),+t(f,u,l));if(p)return s=null,p+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:Xt(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:Xt(+l),o):t},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Xt(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),o):r},o}function tv(e,t,n){var r=null,i=Xt(!0),s=null,a=CE,o=null,l=wP(u);e=typeof e=="function"?e:e===void 0?sK:Xt(+e),t=typeof t=="function"?t:Xt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?aK:Xt(+n);function u(f){var h,p,m,g=(f=EP(f)).length,v,y=!1,b,x=new Array(g),S=new Array(g);for(s==null&&(o=a(b=l())),h=0;h<=g;++h){if(!(h<g&&i(v=f[h],h,f))===y)if(y=!y)p=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),m=h-1;m>=p;--m)o.point(x[m],S[m]);o.lineEnd(),o.areaEnd()}y&&(x[h]=+e(v,h,f),S[h]=+t(v,h,f),o.point(r?+r(v,h,f):x[h],n?+n(v,h,f):S[h]))}if(b)return o=null,b+""||null}function d(){return oK().defined(i).curve(a).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Xt(+f),r=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Xt(+f),u):e},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Xt(+f),u):r},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Xt(+f),n=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Xt(+f),u):t},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Xt(+f),u):n},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(n)},u.lineX1=function(){return d().x(r).y(t)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Xt(!!f),u):i},u.curve=function(f){return arguments.length?(a=f,s!=null&&(o=a(s)),u):a},u.context=function(f){return arguments.length?(f==null?s=o=null:o=a(s=f),u):s},u}class lK{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function $_e(e){return new lK(e,!0)}function U_e(e){return new lK(e,!1)}const SP={draw(e,t){const n=Pa(t/_b);e.moveTo(n,0),e.arc(0,0,n,0,TE)}},z_e={draw(e,t){const n=Pa(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},cK=Pa(1/3),H_e=cK*2,V_e={draw(e,t){const n=Pa(t/H_e),r=n*cK;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},W_e={draw(e,t){const n=Pa(t),r=-n/2;e.rect(r,r,n,n)}},q_e=.8908130915292852,uK=Sb(_b/10)/Sb(7*_b/10),K_e=Sb(TE/10)*uK,G_e=-nK(TE/10)*uK,Y_e={draw(e,t){const n=Pa(t*q_e),r=K_e*n,i=G_e*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const a=TE*s/5,o=nK(a),l=Sb(a);e.lineTo(l*n,-o*n),e.lineTo(o*r-l*i,l*r+o*i)}e.closePath()}},gN=Pa(3),X_e={draw(e,t){const n=-Pa(t/(gN*3));e.moveTo(0,n*2),e.lineTo(-gN*n,-n),e.lineTo(gN*n,-n),e.closePath()}},Es=-.5,Ss=Pa(3)/2,W2=1/Pa(12),Q_e=(W2/2+1)*3,J_e={draw(e,t){const n=Pa(t/Q_e),r=n/2,i=n*W2,s=r,a=n*W2+n,o=-s,l=a;e.moveTo(r,i),e.lineTo(s,a),e.lineTo(o,l),e.lineTo(Es*r-Ss*i,Ss*r+Es*i),e.lineTo(Es*s-Ss*a,Ss*s+Es*a),e.lineTo(Es*o-Ss*l,Ss*o+Es*l),e.lineTo(Es*r+Ss*i,Es*i-Ss*r),e.lineTo(Es*s+Ss*a,Es*a-Ss*s),e.lineTo(Es*o+Ss*l,Es*l-Ss*o),e.closePath()}};function Z_e(e,t){let n=null,r=wP(i);e=typeof e=="function"?e:Xt(e||SP),t=typeof t=="function"?t:Xt(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Xt(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Xt(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Nb(){}function Tb(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function dK(e){this._context=e}dK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Tb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Tb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function eNe(e){return new dK(e)}function fK(e){this._context=e}fK.prototype={areaStart:Nb,areaEnd:Nb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Tb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tNe(e){return new fK(e)}function hK(e){this._context=e}hK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Tb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function nNe(e){return new hK(e)}function pK(e){this._context=e}pK.prototype={areaStart:Nb,areaEnd:Nb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function rNe(e){return new pK(e)}function R6(e){return e<0?-1:1}function L6(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(R6(s)+R6(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function F6(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function yN(e,t,n){var r=e._x0,i=e._y0,s=e._x1,a=e._y1,o=(s-r)/3;e._context.bezierCurveTo(r+o,i+o*t,s-o,a-o*n,s,a)}function Cb(e){this._context=e}Cb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:yN(this,this._t0,F6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,yN(this,F6(this,n=L6(this,e,t)),n);break;default:yN(this,this._t0,n=L6(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function mK(e){this._context=new gK(e)}(mK.prototype=Object.create(Cb.prototype)).point=function(e,t){Cb.prototype.point.call(this,t,e)};function gK(e){this._context=e}gK.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function iNe(e){return new Cb(e)}function sNe(e){return new mK(e)}function yK(e){this._context=e}yK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=B6(e),i=B6(t),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function B6(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function aNe(e){return new yK(e)}function kE(e,t){this._context=e,this._t=t}kE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function oNe(e){return new kE(e,.5)}function lNe(e){return new kE(e,0)}function cNe(e){return new kE(e,1)}function vh(e,t){if((a=e.length)>1)for(var n=1,r,i,s=e[t[0]],a,o=s.length;n<a;++n)for(i=s,s=e[t[n]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function q2(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function uNe(e,t){return e[t]}function dNe(e){const t=[];return t.key=e,t}function fNe(){var e=Xt([]),t=q2,n=vh,r=uNe;function i(s){var a=Array.from(e.apply(this,arguments),dNe),o,l=a.length,u=-1,d;for(const f of s)for(o=0,++u;o<l;++o)(a[o][u]=[0,+r(f,a[o].key,u,s)]).data=f;for(o=0,d=EP(t(a));o<l;++o)a[d[o]].index=o;return n(a,d),a}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Xt(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Xt(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?q2:typeof s=="function"?s:Xt(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??vh,i):n},i}function hNe(e,t){if((r=e.length)>0){for(var n,r,i=0,s=e[0].length,a;i<s;++i){for(a=n=0;n<r;++n)a+=e[n][i][1]||0;if(a)for(n=0;n<r;++n)e[n][i][1]/=a}vh(e,t)}}function pNe(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,s=r.length;n<s;++n){for(var a=0,o=0;a<i;++a)o+=e[a][n][1]||0;r[n][1]+=r[n][0]=-o/2}vh(e,t)}}function mNe(e,t){if(!(!((a=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,s,a;r<s;++r){for(var o=0,l=0,u=0;o<a;++o){for(var d=e[t[o]],f=d[r][1]||0,h=d[r-1][1]||0,p=(f-h)/2,m=0;m<o;++m){var g=e[t[m]],v=g[r][1]||0,y=g[r-1][1]||0;p+=v-y}l+=f,u+=p*f}i[r-1][1]+=i[r-1][0]=n,l&&(n-=u/l)}i[r-1][1]+=i[r-1][0]=n,vh(e,t)}}var gNe=["type","size","sizeType"];function K2(){return K2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K2.apply(null,arguments)}function $6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function U6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$6(Object(n),!0).forEach(function(r){yNe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yNe(e,t,n){return(t=vNe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vNe(e){var t=xNe(e,"string");return typeof t=="symbol"?t:t+""}function xNe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bNe(e,t){if(e==null)return{};var n,r,i=wNe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function wNe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var vK={symbolCircle:SP,symbolCross:z_e,symbolDiamond:V_e,symbolSquare:W_e,symbolStar:Y_e,symbolTriangle:X_e,symbolWye:J_e},ENe=Math.PI/180,SNe=e=>{var t="symbol".concat(z0(e));return vK[t]||SP},_Ne=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*ENe;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},NNe=(e,t)=>{vK["symbol".concat(z0(e))]=t},_P=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=bNe(e,gNe),s=U6(U6({},i),{},{type:t,size:n,sizeType:r}),a=()=>{var f=SNe(t),h=Z_e().type(f).size(_Ne(n,r,t));return h()},{className:o,cx:l,cy:u}=s,d=Jt(s,!0);return l===+l&&u===+u&&n===+n?w.createElement("path",K2({},d,{className:gt("recharts-symbols",o),transform:"translate(".concat(l,", ").concat(u,")"),d:a()})):null};_P.registerSymbol=NNe;function G2(){return G2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G2.apply(null,arguments)}function z6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function TNe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z6(Object(n),!0).forEach(function(r){NP(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function NP(e,t,n){return(t=CNe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CNe(e){var t=kNe(e,"string");return typeof t=="symbol"?t:t+""}function kNe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _s=32;class TP extends w.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=_s/2,s=_s/6,a=_s/3,o=t.inactive?r:t.color,l=n??t.type;if(l==="none")return null;if(l==="plainline")return w.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:_s,y2:i,className:"recharts-legend-icon"});if(l==="line")return w.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(i,"h").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*a,",").concat(i,`
            H`).concat(_s,"M").concat(2*a,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(a,",").concat(i),className:"recharts-legend-icon"});if(l==="rect")return w.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(_s/8,"h").concat(_s,"v").concat(_s*3/4,"h").concat(-_s,"z"),className:"recharts-legend-icon"});if(w.isValidElement(t.legendIcon)){var u=TNe({},t);return delete u.legendIcon,w.cloneElement(t.legendIcon,u)}return w.createElement(_P,{fill:o,cx:i,cy:i,size:_s,sizeType:"diameter",type:l})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:s,iconType:a}=this.props,o={x:0,y:0,width:_s,height:_s},l={display:r==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,f)=>{var h=d.formatter||i,p=gt({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var m=d.inactive?s:d.color,g=h?h(d.value,d,f):d.value;return w.createElement("li",G2({className:p,style:l,key:"legend-item-".concat(f)},H0(this.props,d,f)),w.createElement(bP,{width:n,height:n,viewBox:o,style:u,"aria-label":"".concat(g," legend icon")},this.renderIcon(d,a)),w.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},g))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return w.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}NP(TP,"displayName","Legend");NP(TP,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var xK={},bK={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let s=0;s<n.length;s++){const a=n[s],o=r(a);i.has(o)||i.set(o,a)}return Array.from(i.values())}e.uniqBy=t})(bK);var CP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(CP);var wK={},AE={},EK={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(EK);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EK;function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(AE);var SK={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(SK);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AE,n=SK;function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(wK);var _K={},NK={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hE;function n(r){return function(i){return t.get(i,r)}}e.property=n})(NK);var TK={},vN={},xN={},kP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(kP);var AP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(AP);var jE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(jE);var H6;function ANe(){return H6||(H6=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jP(),n=kP,r=AP,i=jE;function s(f,h,p){return typeof p!="function"?t.isMatch(f,h):a(f,h,function m(g,v,y,b,x,S){const E=p(g,v,y,b,x,S);return E!==void 0?!!E:a(g,v,m,S)},new Map)}function a(f,h,p,m){if(h===f)return!0;switch(typeof h){case"object":return o(f,h,p,m);case"function":return Object.keys(h).length>0?a(f,{...h},p,m):i.eq(f,h);default:return n.isObject(f)?typeof h=="string"?h==="":!0:i.eq(f,h)}}function o(f,h,p,m){if(h==null)return!0;if(Array.isArray(h))return u(f,h,p,m);if(h instanceof Map)return l(f,h,p,m);if(h instanceof Set)return d(f,h,p,m);const g=Object.keys(h);if(f==null)return g.length===0;if(g.length===0)return!0;if(m&&m.has(h))return m.get(h)===f;m&&m.set(h,f);try{for(let v=0;v<g.length;v++){const y=g[v];if(!r.isPrimitive(f)&&!(y in f)||h[y]===void 0&&f[y]!==void 0||h[y]===null&&f[y]!==null||!p(f[y],h[y],y,f,h,m))return!1}return!0}finally{m&&m.delete(h)}}function l(f,h,p,m){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[g,v]of h.entries()){const y=f.get(g);if(p(y,v,g,f,h,m)===!1)return!1}return!0}function u(f,h,p,m){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const g=new Set;for(let v=0;v<h.length;v++){const y=h[v];let b=!1;for(let x=0;x<f.length;x++){if(g.has(x))continue;const S=f[x];let E=!1;if(p(S,y,v,f,h,m)&&(E=!0),E){g.add(x),b=!0;break}}if(!b)return!1}return!0}function d(f,h,p,m){return h.size===0?!0:f instanceof Set?u([...f],[...h],p,m):!1}e.isMatchWith=s,e.isSetMatch=d}(xN)),xN}var V6;function jP(){return V6||(V6=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ANe();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n}(vN)),vN}var CK={},OP={},PP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(PP);var OE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(OE);var PE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",a="[object Symbol]",o="[object Date]",l="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",p="[object Object]",m="[object Error]",g="[object DataView]",v="[object Uint8Array]",y="[object Uint8ClampedArray]",b="[object Uint16Array]",x="[object Uint32Array]",S="[object BigUint64Array]",E="[object Int8Array]",_="[object Int16Array]",T="[object Int32Array]",C="[object BigInt64Array]",k="[object Float32Array]",A="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=C,e.bigUint64ArrayTag=S,e.booleanTag=i,e.dataViewTag=g,e.dateTag=o,e.errorTag=m,e.float32ArrayTag=k,e.float64ArrayTag=A,e.functionTag=f,e.int16ArrayTag=_,e.int32ArrayTag=T,e.int8ArrayTag=E,e.mapTag=l,e.numberTag=r,e.objectTag=p,e.regexpTag=t,e.setTag=u,e.stringTag=n,e.symbolTag=a,e.uint16ArrayTag=b,e.uint32ArrayTag=x,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=y})(PE);var kK={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(kK);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PP,n=OE,r=PE,i=AP,s=kK;function a(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,h,p=new Map,m=void 0){const g=m==null?void 0:m(d,f,h,p);if(g!==void 0)return g;if(i.isPrimitive(d))return d;if(p.has(d))return p.get(d);if(Array.isArray(d)){const v=new Array(d.length);p.set(d,v);for(let y=0;y<d.length;y++)v[y]=o(d[y],y,h,p,m);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;p.set(d,v);for(const[y,b]of d)v.set(y,o(b,y,h,p,m));return v}if(d instanceof Set){const v=new Set;p.set(d,v);for(const y of d)v.add(o(y,void 0,h,p,m));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);p.set(d,v);for(let y=0;y<d.length;y++)v[y]=o(d[y],y,h,p,m);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return p.set(d,v),l(v,d,h,p,m),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return p.set(d,v),l(v,d,h,p,m),v}if(d instanceof Blob){const v=new Blob([d],{type:d.type});return p.set(d,v),l(v,d,h,p,m),v}if(d instanceof Error){const v=new d.constructor;return p.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,l(v,d,h,p,m),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return p.set(d,v),l(v,d,h,p,m),v}return d}function l(d,f,h=d,p,m){const g=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<g.length;v++){const y=g[v],b=Object.getOwnPropertyDescriptor(d,y);(b==null||b.writable)&&(d[y]=o(f[y],y,h,p,m))}}function u(d){switch(n.getTag(d)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=a,e.cloneDeepWithImpl=o,e.copyProperties=l})(OP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OP;function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(CK);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jP(),n=CK;function r(i){return i=n.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=r})(TK);var AK={},jK={},OK={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OP,n=PE;function r(i,s){return t.cloneDeepWith(i,(a,o,l,u)=>{const d=s==null?void 0:s(a,o,l,u);if(d!==void 0)return d;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const f=new i.constructor(i==null?void 0:i.valueOf());return t.copyProperties(f,i),f}case n.argumentsTag:{const f={};return t.copyProperties(f,i),f.length=i.length,f[Symbol.iterator]=i[Symbol.iterator],f}default:return}})}e.cloneDeepWith=r})(OK);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OK;function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(jK);var PK={},IP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(IP);var IK={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OE;function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(IK);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pP,n=IP,r=IK,i=pE;function s(a,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&t.isDeepKey(o)&&(a==null?void 0:a[o])==null?l=i.toPath(o):l=[o],l.length===0)return!1;let u=a;for(let d=0;d<l.length;d++){const f=l[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||r.isArguments(u))&&n.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=s})(PK);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jP(),n=mP,r=jK,i=hE,s=PK;function a(o,l){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return l=r.cloneDeep(l),function(u){const d=i.get(u,o);return d===void 0?s.has(u,o):l===void 0?d===void 0:t.isMatch(d,l)}}e.matchesProperty=a})(AK);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CP,n=NK,r=TK,i=AK;function s(a){if(a==null)return t.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?i.matchesProperty(a[0],a[1]):r.matches(a);case"string":case"symbol":case"number":return n.property(a)}}e.iteratee=s})(_K);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bK,n=CP,r=wK,i=_K;function s(a,o=n.identity){return r.isArrayLikeObject(a)?t.uniqBy(Array.from(a),i.iteratee(o)):[]}e.uniqBy=s})(xK);var jNe=xK.uniqBy;const W6=ii(jNe);function DK(e,t,n){return t===!0?W6(e,n):typeof t=="function"?W6(e,t):e}var MK={exports:{}},RK={},LK={exports:{}},FK={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xh=w;function ONe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var PNe=typeof Object.is=="function"?Object.is:ONe,INe=xh.useState,DNe=xh.useEffect,MNe=xh.useLayoutEffect,RNe=xh.useDebugValue;function LNe(e,t){var n=t(),r=INe({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return MNe(function(){i.value=n,i.getSnapshot=t,bN(i)&&s({inst:i})},[e,n,t]),DNe(function(){return bN(i)&&s({inst:i}),e(function(){bN(i)&&s({inst:i})})},[e]),RNe(n),n}function bN(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!PNe(e,n)}catch{return!0}}function FNe(e,t){return t()}var BNe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?FNe:LNe;FK.useSyncExternalStore=xh.useSyncExternalStore!==void 0?xh.useSyncExternalStore:BNe;LK.exports=FK;var DP=LK.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IE=w,$Ne=DP;function UNe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zNe=typeof Object.is=="function"?Object.is:UNe,HNe=$Ne.useSyncExternalStore,VNe=IE.useRef,WNe=IE.useEffect,qNe=IE.useMemo,KNe=IE.useDebugValue;RK.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=VNe(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=qNe(function(){function l(p){if(!u){if(u=!0,d=p,p=r(p),i!==void 0&&a.hasValue){var m=a.value;if(i(m,p))return f=m}return f=p}if(m=f,zNe(d,p))return m;var g=r(p);return i!==void 0&&i(m,g)?(d=p,m):(d=p,f=g)}var u=!1,d,f,h=n===void 0?null:n;return[function(){return l(t())},h===null?void 0:function(){return l(h())}]},[t,n,r,i]);var o=HNe(e,s[0],s[1]);return WNe(function(){a.hasValue=!0,a.value=o},[o]),KNe(o),o};MK.exports=RK;var BK=MK.exports,MP=w.createContext(null),GNe=e=>e,En=()=>{var e=w.useContext(MP);return e?e.store.dispatch:GNe},hx=()=>{},YNe=()=>hx,XNe=(e,t)=>e===t;function He(e){var t=w.useContext(MP);return BK.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:YNe,t?t.store.getState:hx,t?t.store.getState:hx,t?e:hx,XNe)}function QNe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function JNe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function ZNe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var q6=e=>Array.isArray(e)?e:[e];function eTe(e){const t=Array.isArray(e[0])?e[0]:e;return ZNe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function tTe(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var nTe=class{constructor(e){this.value=e}deref(){return this.value}},rTe=typeof WeakRef<"u"?WeakRef:nTe,iTe=0,K6=1;function nv(){return{s:iTe,v:void 0,o:null,p:null}}function $K(e,t={}){let n=nv();const{resultEqualityCheck:r}=t;let i,s=0;function a(){var f;let o=n;const{length:l}=arguments;for(let h=0,p=l;h<p;h++){const m=arguments[h];if(typeof m=="function"||typeof m=="object"&&m!==null){let g=o.o;g===null&&(o.o=g=new WeakMap);const v=g.get(m);v===void 0?(o=nv(),g.set(m,o)):o=v}else{let g=o.p;g===null&&(o.p=g=new Map);const v=g.get(m);v===void 0?(o=nv(),g.set(m,o)):o=v}}const u=o;let d;if(o.s===K6)d=o.v;else if(d=e.apply(null,arguments),s++,r){const h=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;h!=null&&r(h,d)&&(d=h,s!==0&&s--),i=typeof d=="object"&&d!==null||typeof d=="function"?new rTe(d):d}return u.s=K6,u.v=d,d}return a.clearCache=()=>{n=nv(),a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function sTe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,a=0,o,l={},u=i.pop();typeof u=="object"&&(l=u,u=i.pop()),QNe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...n,...l},{memoize:f,memoizeOptions:h=[],argsMemoize:p=$K,argsMemoizeOptions:m=[]}=d,g=q6(h),v=q6(m),y=eTe(i),b=f(function(){return s++,u.apply(null,arguments)},...g),x=p(function(){a++;const E=tTe(y,arguments);return o=b.apply(null,E),o},...v);return Object.assign(x,{resultFunc:u,memoizedResultFunc:b,dependencies:y,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>o,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:p})};return Object.assign(r,{withTypes:()=>r}),r}var se=sTe($K),aTe=Object.assign((e,t=se)=>{JNe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((a,o,l)=>(a[n[l]]=o,a),{}))},{withTypes:()=>aTe}),UK={},zK={},HK={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const a=t(r),o=t(i);if(a===o&&a===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?o-a:a-o}return 0};e.compareValues=n})(HK);var VK={},RP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(RP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RP,n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,a){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||a!=null&&Object.hasOwn(a,s)}e.isKey=i})(VK);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HK,n=VK,r=pE;function i(s,a,o,l){if(s==null)return[];o=l?void 0:o,Array.isArray(s)||(s=Object.values(s)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(p=>String(p));const u=(p,m)=>{let g=p;for(let v=0;v<m.length&&g!=null;++v)g=g[m[v]];return g},d=(p,m)=>m==null||p==null?m:typeof p=="object"&&"key"in p?Object.hasOwn(m,p.key)?m[p.key]:u(m,p.path):typeof p=="function"?p(m):Array.isArray(p)?u(m,p):typeof m=="object"?m[p]:m,f=a.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||n.isKey(p)?p:{key:p,path:r.toPath(p)}));return s.map(p=>({original:p,criteria:f.map(m=>d(m,p))})).slice().sort((p,m)=>{for(let g=0;g<f.length;g++){const v=t.compareValues(p.criteria[g],m.criteria[g],o[g]);if(v!==0)return v}return 0}).map(p=>p.original)}e.orderBy=i})(zK);var WK={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],s=Math.floor(r),a=(o,l)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&l<s?a(d,l+1):i.push(d)}};return a(n,0),i}e.flatten=t})(WK);var LP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IP,n=AE,r=kP,i=jE;function s(a,o,l){return r.isObject(l)&&(typeof o=="number"&&n.isArrayLike(l)&&t.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?i.eq(l[o],a):!1}e.isIterateeCall=s})(LP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zK,n=WK,r=LP;function i(s,...a){const o=a.length;return o>1&&r.isIterateeCall(s,a[0],a[1])?a=[]:o>2&&r.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),t.orderBy(s,n.flatten(a),["asc"])}e.sortBy=i})(UK);var oTe=UK.sortBy;const DE=ii(oTe);var qK=e=>e.legend.settings,lTe=e=>e.legend.size,cTe=e=>e.legend.payload,uTe=se([cTe,qK],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?DE(r,n):r});function dTe(){return He(uTe)}var rv=1;function KK(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=w.useState({height:0,left:0,top:0,width:0}),r=w.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),a={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(a.height-t.height)>rv||Math.abs(a.left-t.left)>rv||Math.abs(a.top-t.top)>rv||Math.abs(a.width-t.width)>rv)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function Or(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var fTe=typeof Symbol=="function"&&Symbol.observable||"@@observable",G6=fTe,wN=()=>Math.random().toString(36).substring(7).split("").join("."),hTe={INIT:`@@redux/INIT${wN()}`,REPLACE:`@@redux/REPLACE${wN()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${wN()}`},kb=hTe;function FP(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function GK(e,t,n){if(typeof e!="function")throw new Error(Or(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Or(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Or(1));return n(GK)(e,t)}let r=e,i=t,s=new Map,a=s,o=0,l=!1;function u(){a===s&&(a=new Map,s.forEach((v,y)=>{a.set(y,v)}))}function d(){if(l)throw new Error(Or(3));return i}function f(v){if(typeof v!="function")throw new Error(Or(4));if(l)throw new Error(Or(5));let y=!0;u();const b=o++;return a.set(b,v),function(){if(y){if(l)throw new Error(Or(6));y=!1,u(),a.delete(b),s=null}}}function h(v){if(!FP(v))throw new Error(Or(7));if(typeof v.type>"u")throw new Error(Or(8));if(typeof v.type!="string")throw new Error(Or(17));if(l)throw new Error(Or(9));try{l=!0,i=r(i,v)}finally{l=!1}return(s=a).forEach(b=>{b()}),v}function p(v){if(typeof v!="function")throw new Error(Or(10));r=v,h({type:kb.REPLACE})}function m(){const v=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Or(11));function b(){const S=y;S.next&&S.next(d())}return b(),{unsubscribe:v(b)}},[G6](){return this}}}return h({type:kb.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:p,[G6]:m}}function pTe(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:kb.INIT})>"u")throw new Error(Or(12));if(typeof n(void 0,{type:kb.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Or(13))})}function YK(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const a=t[s];typeof e[a]=="function"&&(n[a]=e[a])}const r=Object.keys(n);let i;try{pTe(n)}catch(s){i=s}return function(a={},o){if(i)throw i;let l=!1;const u={};for(let d=0;d<r.length;d++){const f=r[d],h=n[f],p=a[f],m=h(p,o);if(typeof m>"u")throw o&&o.type,new Error(Or(14));u[f]=m,l=l||m!==p}return l=l||r.length!==Object.keys(a).length,l?u:a}}function Ab(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function mTe(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Or(15))};const a={getState:i.getState,dispatch:(l,...u)=>s(l,...u)},o=e.map(l=>l(a));return s=Ab(...o)(i.dispatch),{...i,dispatch:s}}}function XK(e){return FP(e)&&"type"in e&&typeof e.type=="string"}var QK=Symbol.for("immer-nothing"),Y6=Symbol.for("immer-draftable"),hs=Symbol.for("immer-state");function da(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var bh=Object.getPrototypeOf;function cd(e){return!!e&&!!e[hs]}function el(e){var t;return e?JK(e)||Array.isArray(e)||!!e[Y6]||!!((t=e.constructor)!=null&&t[Y6])||RE(e)||LE(e):!1}var gTe=Object.prototype.constructor.toString();function JK(e){if(!e||typeof e!="object")return!1;const t=bh(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===gTe}function jb(e,t){ME(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function ME(e){const t=e[hs];return t?t.type_:Array.isArray(e)?1:RE(e)?2:LE(e)?3:0}function Y2(e,t){return ME(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ZK(e,t,n){const r=ME(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function yTe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function RE(e){return e instanceof Map}function LE(e){return e instanceof Set}function mu(e){return e.copy_||e.base_}function X2(e,t){if(RE(e))return new Map(e);if(LE(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=JK(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[hs];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[a]})}return Object.create(bh(e),r)}else{const r=bh(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function BP(e,t=!1){return FE(e)||cd(e)||!el(e)||(ME(e)>1&&(e.set=e.add=e.clear=e.delete=vTe),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>BP(r,!0))),e}function vTe(){da(2)}function FE(e){return Object.isFrozen(e)}var xTe={};function ud(e){const t=xTe[e];return t||da(0,e),t}var Rg;function eG(){return Rg}function bTe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function X6(e,t){t&&(ud("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Q2(e){J2(e),e.drafts_.forEach(wTe),e.drafts_=null}function J2(e){e===Rg&&(Rg=e.parent_)}function Q6(e){return Rg=bTe(Rg,e)}function wTe(e){const t=e[hs];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function J6(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[hs].modified_&&(Q2(t),da(4)),el(e)&&(e=Ob(t,e),t.parent_||Pb(t,e)),t.patches_&&ud("Patches").generateReplacementPatches_(n[hs].base_,e,t.patches_,t.inversePatches_)):e=Ob(t,n,[]),Q2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==QK?e:void 0}function Ob(e,t,n){if(FE(t))return t;const r=t[hs];if(!r)return jb(t,(i,s)=>Z6(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Pb(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,a=!1;r.type_===3&&(s=new Set(i),i.clear(),a=!0),jb(s,(o,l)=>Z6(e,r,i,o,l,n,a)),Pb(e,i,!1),n&&e.patches_&&ud("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Z6(e,t,n,r,i,s,a){if(cd(i)){const o=s&&t&&t.type_!==3&&!Y2(t.assigned_,r)?s.concat(r):void 0,l=Ob(e,i,o);if(ZK(n,r,l),cd(l))e.canAutoFreeze_=!1;else return}else a&&n.add(i);if(el(i)&&!FE(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Ob(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Pb(e,i)}}function Pb(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&BP(t,n)}function ETe(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:eG(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=$P;n&&(i=[r],s=Lg);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,o}var $P={get(e,t){if(t===hs)return e;const n=mu(e);if(!Y2(n,t))return STe(e,n,t);const r=n[t];return e.finalized_||!el(r)?r:r===EN(e.base_,t)?(SN(e),e.copy_[t]=ek(r,e)):r},has(e,t){return t in mu(e)},ownKeys(e){return Reflect.ownKeys(mu(e))},set(e,t,n){const r=tG(mu(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=EN(mu(e),t),s=i==null?void 0:i[hs];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(yTe(n,i)&&(n!==void 0||Y2(e.base_,t)))return!0;SN(e),Z2(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return EN(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,SN(e),Z2(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=mu(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){da(11)},getPrototypeOf(e){return bh(e.base_)},setPrototypeOf(){da(12)}},Lg={};jb($P,(e,t)=>{Lg[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Lg.deleteProperty=function(e,t){return Lg.set.call(this,e,t,void 0)};Lg.set=function(e,t,n){return $P.set.call(this,e[0],t,n,e[0])};function EN(e,t){const n=e[hs];return(n?mu(n):e)[t]}function STe(e,t,n){var i;const r=tG(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function tG(e,t){if(!(t in e))return;let n=bh(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=bh(n)}}function Z2(e){e.modified_||(e.modified_=!0,e.parent_&&Z2(e.parent_))}function SN(e){e.copy_||(e.copy_=X2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var _Te=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const a=this;return function(l=s,...u){return a.produce(l,d=>n.call(this,d,...u))}}typeof n!="function"&&da(6),r!==void 0&&typeof r!="function"&&da(7);let i;if(el(t)){const s=Q6(this),a=ek(t,void 0);let o=!0;try{i=n(a),o=!1}finally{o?Q2(s):J2(s)}return X6(s,r),J6(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===QK&&(i=void 0),this.autoFreeze_&&BP(i,!0),r){const s=[],a=[];ud("Patches").generateReplacementPatches_(t,i,s,a),r(s,a)}return i}else da(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(a,...o)=>this.produceWithPatches(a,l=>t(l,...o));let r,i;return[this.produce(t,n,(a,o)=>{r=a,i=o}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){el(e)||da(8),cd(e)&&(e=Uo(e));const t=Q6(this),n=ek(e,void 0);return n[hs].isManual_=!0,J2(t),n}finishDraft(e,t){const n=e&&e[hs];(!n||!n.isManual_)&&da(9);const{scope_:r}=n;return X6(r,t),J6(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=ud("Patches").applyPatches_;return cd(e)?r(e,t):this.produce(e,i=>r(i,t))}};function ek(e,t){const n=RE(e)?ud("MapSet").proxyMap_(e,t):LE(e)?ud("MapSet").proxySet_(e,t):ETe(e,t);return(t?t.scope_:eG()).drafts_.push(n),n}function Uo(e){return cd(e)||da(10,e),nG(e)}function nG(e){if(!el(e)||FE(e))return e;const t=e[hs];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=X2(e,t.scope_.immer_.useStrictShallowCopy_)}else n=X2(e,!0);return jb(n,(r,i)=>{ZK(n,r,nG(i))}),t&&(t.finalized_=!1),n}var ps=new _Te,rG=ps.produce;ps.produceWithPatches.bind(ps);ps.setAutoFreeze.bind(ps);ps.setUseStrictShallowCopy.bind(ps);ps.applyPatches.bind(ps);ps.createDraft.bind(ps);ps.finishDraft.bind(ps);function iG(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var NTe=iG(),TTe=iG,CTe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ab:Ab.apply(null,arguments)};function Ys(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(ls(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>XK(r)&&r.type===e,n}var sG=class lm extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,lm.prototype)}static get[Symbol.species](){return lm}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new lm(...t[0].concat(this)):new lm(...t.concat(this))}};function e5(e){return el(e)?rG(e,()=>{}):e}function iv(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function kTe(e){return typeof e=="boolean"}var ATe=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let a=new sG;return n&&(kTe(n)?a.push(NTe):a.push(TTe(n.extraArgument))),a},jTe="RTK_autoBatch",t5=e=>t=>{setTimeout(t,e)},OTe=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,a=!1;const o=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:t5(10):e.type==="callback"?e.queueNotification:t5(e.timeout),u=()=>{a=!1,s&&(s=!1,o.forEach(d=>d()))};return Object.assign({},r,{subscribe(d){const f=()=>i&&d(),h=r.subscribe(f);return o.add(d),()=>{h(),o.delete(d)}},dispatch(d){var f;try{return i=!((f=d==null?void 0:d.meta)!=null&&f[jTe]),s=!i,s&&(a||(a=!0,l(u))),r.dispatch(d)}finally{i=!0}}})},PTe=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new sG(e);return r&&i.push(OTe(typeof r=="object"?r:void 0)),i};function ITe(e){const t=ATe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:a=void 0}=e||{};let o;if(typeof n=="function")o=n;else if(FP(n))o=YK(n);else throw new Error(ls(1));let l;typeof r=="function"?l=r(t):l=t();let u=Ab;i&&(u=CTe({trace:!1,...typeof i=="object"&&i}));const d=mTe(...l),f=PTe(d);let h=typeof a=="function"?a(f):f();const p=u(...h);return GK(o,s,p)}function aG(e){const t={},n=[];let r;const i={addCase(s,a){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(ls(28));if(o in t)throw new Error(ls(29));return t[o]=a,i},addMatcher(s,a){return n.push({matcher:s,reducer:a}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function DTe(e){return typeof e=="function"}function MTe(e,t){let[n,r,i]=aG(t),s;if(DTe(e))s=()=>e5(e());else{const o=e5(e);s=()=>o}function a(o=s(),l){let u=[n[l.type],...r.filter(({matcher:d})=>d(l)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[i]),u.reduce((d,f)=>{if(f)if(cd(d)){const p=f(d,l);return p===void 0?d:p}else{if(el(d))return rG(d,h=>f(h,l));{const h=f(d,l);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},o)}return a.getInitialState=s,a}var RTe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",LTe=(e=21)=>{let t="",n=e;for(;n--;)t+=RTe[Math.random()*64|0];return t},FTe=Symbol.for("rtk-slice-createasyncthunk");function BTe(e,t){return`${e}/${t}`}function $Te({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[FTe];return function(i){const{name:s,reducerPath:a=s}=i;if(!s)throw new Error(ls(11));const o=(typeof i.reducers=="function"?i.reducers(zTe()):i.reducers)||{},l=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(S,E){const _=typeof S=="string"?S:S.type;if(!_)throw new Error(ls(12));if(_ in u.sliceCaseReducersByType)throw new Error(ls(13));return u.sliceCaseReducersByType[_]=E,d},addMatcher(S,E){return u.sliceMatchers.push({matcher:S,reducer:E}),d},exposeAction(S,E){return u.actionCreators[S]=E,d},exposeCaseReducer(S,E){return u.sliceCaseReducersByName[S]=E,d}};l.forEach(S=>{const E=o[S],_={reducerName:S,type:BTe(s,S),createNotation:typeof i.reducers=="function"};VTe(E)?qTe(_,E,d,t):HTe(_,E,d)});function f(){const[S={},E=[],_=void 0]=typeof i.extraReducers=="function"?aG(i.extraReducers):[i.extraReducers],T={...S,...u.sliceCaseReducersByType};return MTe(i.initialState,C=>{for(let k in T)C.addCase(k,T[k]);for(let k of u.sliceMatchers)C.addMatcher(k.matcher,k.reducer);for(let k of E)C.addMatcher(k.matcher,k.reducer);_&&C.addDefaultCase(_)})}const h=S=>S,p=new Map,m=new WeakMap;let g;function v(S,E){return g||(g=f()),g(S,E)}function y(){return g||(g=f()),g.getInitialState()}function b(S,E=!1){function _(C){let k=C[S];return typeof k>"u"&&E&&(k=iv(m,_,y)),k}function T(C=h){const k=iv(p,E,()=>new WeakMap);return iv(k,C,()=>{const A={};for(const[j,D]of Object.entries(i.selectors??{}))A[j]=UTe(D,C,()=>iv(m,C,y),E);return A})}return{reducerPath:S,getSelectors:T,get selectors(){return T(_)},selectSlice:_}}const x={name:s,reducer:v,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,...b(a),injectInto(S,{reducerPath:E,..._}={}){const T=E??a;return S.inject({reducerPath:T,reducer:v},_),{...x,...b(T,!0)}}};return x}}function UTe(e,t,n,r){function i(s,...a){let o=t(s);return typeof o>"u"&&r&&(o=n()),e(o,...a)}return i.unwrapped=e,i}var vs=$Te();function zTe(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function HTe({type:e,reducerName:t,createNotation:n},r,i){let s,a;if("reducer"in r){if(n&&!WTe(r))throw new Error(ls(17));s=r.reducer,a=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,a?Ys(e,a):Ys(e))}function VTe(e){return e._reducerDefinitionType==="asyncThunk"}function WTe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function qTe({type:e,reducerName:t},n,r,i){if(!i)throw new Error(ls(18));const{payloadCreator:s,fulfilled:a,pending:o,rejected:l,settled:u,options:d}=n,f=i(e,s,d);r.exposeAction(t,f),a&&r.addCase(f.fulfilled,a),o&&r.addCase(f.pending,o),l&&r.addCase(f.rejected,l),u&&r.addMatcher(f.settled,u),r.exposeCaseReducer(t,{fulfilled:a||sv,pending:o||sv,rejected:l||sv,settled:u||sv})}function sv(){}var KTe="task",oG="listener",lG="completed",UP="cancelled",GTe=`task-${UP}`,YTe=`task-${lG}`,tk=`${oG}-${UP}`,XTe=`${oG}-${lG}`,BE=class{constructor(e){Ra(this,"name","TaskAbortError");Ra(this,"message");this.code=e,this.message=`${KTe} ${UP} (reason: ${e})`}},zP=(e,t)=>{if(typeof e!="function")throw new TypeError(ls(32))},Ib=()=>{},cG=(e,t=Ib)=>(e.catch(t),e),uG=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Vu=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Wu=e=>{if(e.aborted){const{reason:t}=e;throw new BE(t)}};function dG(e,t){let n=Ib;return new Promise((r,i)=>{const s=()=>i(new BE(e.reason));if(e.aborted){s();return}n=uG(e,s),t.finally(()=>n()).then(r,i)}).finally(()=>{n=Ib})}var QTe=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof BE?"cancelled":"rejected",error:n}}finally{t==null||t()}},Db=e=>t=>cG(dG(e,t).then(n=>(Wu(e),n))),fG=e=>{const t=Db(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:Vf}=Object,n5={},$E="listenerMiddleware",JTe=(e,t)=>{const n=r=>uG(e,()=>Vu(r,e.reason));return(r,i)=>{zP(r);const s=new AbortController;n(s);const a=QTe(async()=>{Wu(e),Wu(s.signal);const o=await r({pause:Db(s.signal),delay:fG(s.signal),signal:s.signal});return Wu(s.signal),o},()=>Vu(s,YTe));return i!=null&&i.autoJoin&&t.push(a.catch(Ib)),{result:Db(e)(a),cancel(){Vu(s,GTe)}}}},ZTe=(e,t)=>{const n=async(r,i)=>{Wu(t);let s=()=>{};const o=[new Promise((l,u)=>{let d=e({predicate:r,effect:(f,h)=>{h.unsubscribe(),l([f,h.getState(),h.getOriginalState()])}});s=()=>{d(),u()}})];i!=null&&o.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await dG(t,Promise.race(o));return Wu(t),l}finally{s()}};return(r,i)=>cG(n(r,i))},hG=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=Ys(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(ls(21));return zP(s),{predicate:i,type:t,effect:s}},pG=Vf(e=>{const{type:t,predicate:n,effect:r}=hG(e);return{id:LTe(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(ls(22))}}},{withTypes:()=>pG}),r5=(e,t)=>{const{type:n,effect:r,predicate:i}=hG(t);return Array.from(e.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},nk=e=>{e.pending.forEach(t=>{Vu(t,tk)})},eCe=e=>()=>{e.forEach(nk),e.clear()},i5=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},mG=Vf(Ys(`${$E}/add`),{withTypes:()=>mG}),tCe=Ys(`${$E}/removeAll`),gG=Vf(Ys(`${$E}/remove`),{withTypes:()=>gG}),nCe=(...e)=>{console.error(`${$E}/error`,...e)},W0=(e={})=>{const t=new Map,{extra:n,onError:r=nCe}=e;zP(r);const i=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&nk(d)}),s=d=>{const f=r5(t,d)??pG(d);return i(f)};Vf(s,{withTypes:()=>s});const a=d=>{const f=r5(t,d);return f&&(f.unsubscribe(),d.cancelActive&&nk(f)),!!f};Vf(a,{withTypes:()=>a});const o=async(d,f,h,p)=>{const m=new AbortController,g=ZTe(s,m.signal),v=[];try{d.pending.add(m),await Promise.resolve(d.effect(f,Vf({},h,{getOriginalState:p,condition:(y,b)=>g(y,b).then(Boolean),take:g,delay:fG(m.signal),pause:Db(m.signal),extra:n,signal:m.signal,fork:JTe(m.signal,v),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((y,b,x)=>{y!==m&&(Vu(y,tk),x.delete(y))})},cancel:()=>{Vu(m,tk),d.pending.delete(m)},throwIfCancelled:()=>{Wu(m.signal)}})))}catch(y){y instanceof BE||i5(r,y,{raisedBy:"effect"})}finally{await Promise.all(v),Vu(m,XTe),d.pending.delete(m)}},l=eCe(t);return{middleware:d=>f=>h=>{if(!XK(h))return f(h);if(mG.match(h))return s(h.payload);if(tCe.match(h)){l();return}if(gG.match(h))return a(h.payload);let p=d.getState();const m=()=>{if(p===n5)throw new Error(ls(23));return p};let g;try{if(g=f(h),t.size>0){const v=d.getState(),y=Array.from(t.values());for(const b of y){let x=!1;try{x=b.predicate(h,v,p)}catch(S){x=!1,i5(r,S,{raisedBy:"predicate"})}x&&o(b,h,d,m)}}}finally{p=n5}return g},startListening:s,stopListening:a,clearListeners:l}};function ls(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var rCe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},yG=vs({name:"chartLayout",initialState:rCe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:iCe,setLayout:sCe,setChartSize:aCe,setScale:oCe}=yG.actions,lCe=yG.reducer;function s5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function a5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?s5(Object(n),!0).forEach(function(r){cCe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cCe(e,t,n){return(t=uCe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uCe(e){var t=dCe(e,"string");return typeof t=="symbol"?t:t+""}function dCe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mb=Math.PI/180,fCe=e=>e*180/Math.PI,Gn=(e,t,n,r)=>({x:e+Math.cos(-Mb*r)*n,y:t+Math.sin(-Mb*r)*n}),vG=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},hCe=(e,t)=>{var{x:n,y:r}=e,{x:i,y:s}=t;return Math.sqrt((n-i)**2+(r-s)**2)},pCe=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:s}=t,a=hCe({x:n,y:r},{x:i,y:s});if(a<=0)return{radius:a,angle:0};var o=(n-i)/a,l=Math.acos(o);return r>s&&(l=2*Math.PI-l),{radius:a,angle:fCe(l),angleInRadian:l}},mCe=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:t-s*360,endAngle:n-s*360}},gCe=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),s=Math.floor(r/360),a=Math.min(i,s);return e+a*360},yCe=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:s}=pCe({x:n,y:r},t),{innerRadius:a,outerRadius:o}=t;if(i<a||i>o||i===0)return null;var{startAngle:l,endAngle:u}=mCe(t),d=s,f;if(l<=u){for(;d>u;)d-=360;for(;d<l;)d+=360;f=d>=l&&d<=u}else{for(;d>l;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=l}return f?a5(a5({},t),{},{radius:i,angle:gCe(d,t)}):null};function xG(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function o5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ps(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?o5(Object(n),!0).forEach(function(r){vCe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vCe(e,t,n){return(t=xCe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xCe(e){var t=bCe(e,"string");return typeof t=="symbol"?t:t+""}function bCe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dt(e,t,n){return Zt(e)||Zt(t)?n:oo(t)?Tc(e,t,n):typeof t=="function"?t(e):n}var wCe=(e,t,n,r,i)=>{var s,a=-1,o=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(o<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var l=0;l<o;l++){var u=l>0?n[l-1].coordinate:n[o-1].coordinate,d=n[l].coordinate,f=l>=o-1?n[0].coordinate:n[l+1].coordinate,h=void 0;if(xr(d-u)!==xr(f-d)){var p=[];if(xr(f-d)===xr(i[1]-i[0])){h=f;var m=d+i[1]-i[0];p[0]=Math.min(m,(m+u)/2),p[1]=Math.max(m,(m+u)/2)}else{h=u;var g=f+i[1]-i[0];p[0]=Math.min(d,(g+d)/2),p[1]=Math.max(d,(g+d)/2)}var v=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>v[0]&&e<=v[1]||e>=p[0]&&e<=p[1]){({index:a}=n[l]);break}}else{var y=Math.min(u,f),b=Math.max(u,f);if(e>(y+d)/2&&e<=(b+d)/2){({index:a}=n[l]);break}}}else if(t){for(var x=0;x<o;x++)if(x===0&&e<=(t[x].coordinate+t[x+1].coordinate)/2||x>0&&x<o-1&&e>(t[x].coordinate+t[x-1].coordinate)/2&&e<=(t[x].coordinate+t[x+1].coordinate)/2||x===o-1&&e>(t[x].coordinate+t[x-1].coordinate)/2){({index:a}=t[x]);break}}return a},ECe=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:s,verticalAlign:a,layout:o}=t;if((o==="vertical"||o==="horizontal"&&a==="middle")&&s!=="center"&&Ie(e[s]))return Ps(Ps({},e),{},{[s]:e[s]+(r||0)});if((o==="horizontal"||o==="vertical"&&s==="center")&&a!=="middle"&&Ie(e[a]))return Ps(Ps({},e),{},{[a]:e[a]+(i||0)})}return e},go=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",bG=(e,t,n,r)=>{if(r)return e.map(o=>o.coordinate);var i,s,a=e.map(o=>(o.coordinate===t&&(i=!0),o.coordinate===n&&(s=!0),o.coordinate));return i||a.push(t),s||a.push(n),a},wG=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:s,scale:a,realScaleType:o,isCategorical:l,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:p}=e;if(!a)return null;var m=o==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,g=i==="category"&&a.bandwidth?a.bandwidth()/m:0;if(g=p==="angleAxis"&&s&&s.length>=2?xr(s[0]-s[1])*2*g:g,f||h){var v=(f||h||[]).map((y,b)=>{var x=r?r.indexOf(y):y;return{coordinate:a(x)+g,value:y,offset:g,index:b}});return v.filter(y=>!zi(y.coordinate))}return l&&u?u.map((y,b)=>({coordinate:a(y)+g,value:y,index:b,offset:g})):a.ticks&&d!=null?a.ticks(d).map((y,b)=>({coordinate:a(y)+g,value:y,offset:g,index:b})):a.domain().map((y,b)=>({coordinate:a(y)+g,value:r?r[y]:y,index:b,offset:g}))},l5=1e-4,SCe=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-l5,s=Math.max(r[0],r[1])+l5,a=e(t[0]),o=e(t[n-1]);(a<i||a>s||o<i||o>s)&&e.domain([t[0],t[n-1]])}},_Ce=(e,t)=>{if(!t||t.length!==2||!Ie(t[0])||!Ie(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!Ie(e[0])||e[0]<n)&&(i[0]=n),(!Ie(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},NCe=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0,a=0;a<t;++a){var o=zi(e[a][n][1])?e[a][n][0]:e[a][n][1];o>=0?(e[a][n][0]=i,e[a][n][1]=i+o,i=e[a][n][1]):(e[a][n][0]=s,e[a][n][1]=s+o,s=e[a][n][1])}},TCe=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0;s<t;++s){var a=zi(e[s][n][1])?e[s][n][0]:e[s][n][1];a>=0?(e[s][n][0]=i,e[s][n][1]=i+a,i=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},CCe={sign:NCe,expand:hNe,none:vh,silhouette:pNe,wiggle:mNe,positive:TCe},kCe=(e,t,n)=>{var r=CCe[n],i=fNe().keys(t).value((s,a)=>+Dt(s,a,0)).order(q2).offset(r);return i(e)};function EG(e){return e==null?void 0:String(e)}function Rb(e){var{axis:t,ticks:n,bandSize:r,entry:i,index:s,dataKey:a}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Zt(i[t.dataKey])){var o=Jq(n,"value",i[t.dataKey]);if(o)return o.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var l=Dt(i,Zt(a)?t.dataKey:a);return Zt(l)?null:t.scale(l)}var c5=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:s,index:a}=e;if(t.type==="category")return n[a]?n[a].coordinate+r:null;var o=Dt(s,t.dataKey,t.scale.domain()[a]);return Zt(o)?null:t.scale(o)-i/2+r},ACe=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},jCe=e=>{var t=e.flat(2).filter(Ie);return[Math.min(...t),Math.max(...t)]},OCe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],PCe=(e,t,n)=>{if(e!=null)return OCe(Object.keys(e).reduce((r,i)=>{var s=e[i],{stackedData:a}=s,o=a.reduce((l,u)=>{var d=xG(u,t,n),f=jCe(d);return[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},u5=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,d5=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,dd=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=DE(t,d=>d.coordinate),s=1/0,a=1,o=i.length;a<o;a++){var l=i[a],u=i[a-1];s=Math.min((l.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function f5(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:s}=e;return Ps(Ps({},t),{},{dataKey:n,payload:r,value:i,name:s})}function Uc(e,t){if(e)return String(e);if(typeof t=="string")return t}function ICe(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var s=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return s?{x:e,y:t}:null}return r?yCe({x:e,y:t},r):null}var DCe=(e,t,n,r)=>{var i=t.find(u=>u&&u.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var s=i.coordinate,{radius:a}=r;return Ps(Ps(Ps({},r),Gn(r.cx,r.cy,a,s)),{},{angle:s,radius:a})}var o=i.coordinate,{angle:l}=r;return Ps(Ps(Ps({},r),Gn(r.cx,r.cy,o,l)),{},{angle:l,radius:o})}return{x:0,y:0}},MCe=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,dl=e=>e.layout.width,fl=e=>e.layout.height,RCe=e=>e.layout.scale,SG=e=>e.layout.margin,HP=se(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),VP=se(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),_G="data-recharts-item-index",NG="data-recharts-item-data-key",UE=60;function h5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function El(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?h5(Object(n),!0).forEach(function(r){LCe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function LCe(e,t,n){return(t=FCe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FCe(e){var t=BCe(e,"string");return typeof t=="symbol"?t:t+""}function BCe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $Ce=e=>e.brush.height,or=se([dl,fl,SG,$Ce,HP,VP,qK,lTe],(e,t,n,r,i,s,a,o)=>{var l=s.reduce((m,g)=>{var{orientation:v}=g;if(!g.mirror&&!g.hide){var y=typeof g.width=="number"?g.width:UE;return El(El({},m),{},{[v]:m[v]+y})}return m},{left:n.left||0,right:n.right||0}),u=i.reduce((m,g)=>{var{orientation:v}=g;return!g.mirror&&!g.hide?El(El({},m),{},{[v]:Tc(m,"".concat(v))+g.height}):m},{top:n.top||0,bottom:n.bottom||0}),d=El(El({},u),l),f=d.bottom;d.bottom+=r,d=ECe(d,a,o);var h=e-d.left-d.right,p=t-d.top-d.bottom;return El(El({brushBottom:f},d),{},{width:Math.max(h,0),height:Math.max(p,0)})}),UCe=se(or,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),TG=se(dl,fl,(e,t)=>({x:0,y:0,width:e,height:t})),zCe=w.createContext(null),ai=()=>w.useContext(zCe)!=null,zE=e=>e.brush,HE=se([zE,or,SG],(e,t,n)=>({height:e.height,x:Ie(e.x)?e.x:t.left,y:Ie(e.y)?e.y:t.top+t.height+t.brushBottom-((n==null?void 0:n.bottom)||0),width:Ie(e.width)?e.width:t.width})),WP=()=>{var e,t=ai(),n=He(UCe),r=He(HE),i=(e=He(zE))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},HCe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},CG=()=>{var e;return(e=He(or))!==null&&e!==void 0?e:HCe},qP=()=>He(dl),KP=()=>He(fl),VCe={top:0,right:0,bottom:0,left:0},WCe=()=>{var e;return(e=He(t=>t.layout.margin))!==null&&e!==void 0?e:VCe},mt=e=>e.layout.layoutType,q0=()=>He(mt),qCe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},kG=vs({name:"legend",initialState:qCe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=Uo(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:p5,setLegendSettings:KCe,addLegendPayload:AG,removeLegendPayload:jG}=kG.actions,GCe=kG.reducer,YCe=["contextPayload"];function rk(){return rk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rk.apply(null,arguments)}function m5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m5(Object(n),!0).forEach(function(r){GP(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function GP(e,t,n){return(t=XCe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XCe(e){var t=QCe(e,"string");return typeof t=="symbol"?t:t+""}function QCe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JCe(e,t){if(e==null)return{};var n,r,i=ZCe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ZCe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function e2e(e){return e.value}function t2e(e){var{contextPayload:t}=e,n=JCe(e,YCe),r=DK(t,e.payloadUniqBy,e2e),i=wh(wh({},n),{},{payload:r});return w.isValidElement(e.content)?w.cloneElement(e.content,i):typeof e.content=="function"?w.createElement(e.content,i):w.createElement(TP,i)}function n2e(e,t,n,r,i,s){var{layout:a,align:o,verticalAlign:l}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(o==="center"&&a==="vertical"?u={left:((r||0)-s.width)/2}:u=o==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(l==="middle"?d={top:((i||0)-s.height)/2}:d=l==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),wh(wh({},u),d)}function r2e(e){var t=En();return w.useEffect(()=>{t(KCe(e))},[t,e]),null}function i2e(e){var t=En();return w.useEffect(()=>(t(p5(e)),()=>{t(p5({width:0,height:0}))}),[t,e]),null}function s2e(e){var t=dTe(),n=R_e(),r=WCe(),{width:i,height:s,wrapperStyle:a,portal:o}=e,[l,u]=KK([t]),d=qP(),f=KP(),h=d-(r.left||0)-(r.right||0),p=K0.getWidthOrHeight(e.layout,s,i,h),m=o?a:wh(wh({position:"absolute",width:(p==null?void 0:p.width)||i||"auto",height:(p==null?void 0:p.height)||s||"auto"},n2e(a,e,r,d,f,l)),a),g=o??n;if(g==null)return null;var v=w.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:u},w.createElement(r2e,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),w.createElement(i2e,{width:l.width,height:l.height}),w.createElement(t2e,rk({},e,p,{margin:r,chartWidth:d,chartHeight:f,contextPayload:t})));return cl.createPortal(v,g)}class K0 extends w.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&Ie(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return w.createElement(s2e,this.props)}}GP(K0,"displayName","Legend");GP(K0,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function ik(){return ik=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ik.apply(null,arguments)}function g5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _N(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?g5(Object(n),!0).forEach(function(r){a2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function a2e(e,t,n){return(t=o2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o2e(e){var t=l2e(e,"string");return typeof t=="symbol"?t:t+""}function l2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function c2e(e){return Array.isArray(e)&&oo(e[0])&&oo(e[1])?e.join(" ~ "):e}var u2e=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:a,itemSorter:o,wrapperClassName:l,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,p=()=>{if(s&&s.length){var E={padding:0,margin:0},_=(o?DE(s,o):s).map((T,C)=>{if(T.type==="none")return null;var k=T.formatter||a||c2e,{value:A,name:j}=T,D=A,P=j;if(k){var M=k(A,j,T,C,s);if(Array.isArray(M))[D,P]=M;else if(M!=null)D=M;else return null}var L=_N({display:"block",paddingTop:4,paddingBottom:4,color:T.color||"#000"},r);return w.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(C),style:L},oo(P)?w.createElement("span",{className:"recharts-tooltip-item-name"},P):null,oo(P)?w.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,w.createElement("span",{className:"recharts-tooltip-item-value"},D),w.createElement("span",{className:"recharts-tooltip-item-unit"},T.unit||""))});return w.createElement("ul",{className:"recharts-tooltip-item-list",style:E},_)}return null},m=_N({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),g=_N({margin:0},i),v=!Zt(d),y=v?d:"",b=gt("recharts-default-tooltip",l),x=gt("recharts-tooltip-label",u);v&&f&&s!==void 0&&s!==null&&(y=f(d,s));var S=h?{role:"status","aria-live":"assertive"}:{};return w.createElement("div",ik({className:b,style:m},S),w.createElement("p",{className:x,style:g},w.isValidElement(y)?y:"".concat(y)),p())},Lp="recharts-tooltip-wrapper",d2e={visibility:"hidden"};function f2e(e){var{coordinate:t,translateX:n,translateY:r}=e;return gt(Lp,{["".concat(Lp,"-right")]:Ie(n)&&t&&Ie(t.x)&&n>=t.x,["".concat(Lp,"-left")]:Ie(n)&&t&&Ie(t.x)&&n<t.x,["".concat(Lp,"-bottom")]:Ie(r)&&t&&Ie(t.y)&&r>=t.y,["".concat(Lp,"-top")]:Ie(r)&&t&&Ie(t.y)&&r<t.y})}function y5(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:a,tooltipDimension:o,viewBox:l,viewBoxDimension:u}=e;if(s&&Ie(s[r]))return s[r];var d=n[r]-o-(i>0?i:0),f=n[r]+i;if(t[r])return a[r]?d:f;var h=l[r];if(h==null)return 0;if(a[r]){var p=d,m=h;return p<m?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var g=f+o,v=h+u;return g>v?Math.max(d,h):Math.max(f,h)}function h2e(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function p2e(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:a,useTranslate3d:o,viewBox:l}=e,u,d,f;return a.height>0&&a.width>0&&n?(d=y5({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),f=y5({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),u=h2e({translateX:d,translateY:f,useTranslate3d:o})):u=d2e,{cssProperties:u,cssClasses:f2e({translateX:d,translateY:f,coordinate:n})}}function v5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function av(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?v5(Object(n),!0).forEach(function(r){sk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sk(e,t,n){return(t=m2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m2e(e){var t=g2e(e,"string");return typeof t=="symbol"?t:t+""}function g2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class y2e extends w.PureComponent{constructor(){super(...arguments),sk(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),sk(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:a,hasPayload:o,isAnimationActive:l,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:p,wrapperStyle:m,lastBoundingBox:g,innerRef:v,hasPortalFromProps:y}=this.props,{cssClasses:b,cssProperties:x}=p2e({allowEscapeViewBox:n,coordinate:a,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:g.height,width:g.width},useTranslate3d:h,viewBox:p}),S=y?{}:av(av({transition:l&&t?"transform ".concat(r,"ms ").concat(i):void 0},x),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),E=av(av({},S),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},m);return w.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:b,style:E,ref:v},s)}}var v2e=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),zc={isSsr:v2e()},OG=()=>He(e=>e.rootProps.accessibilityLayer);function zr(e){return Number.isFinite(e)}function Eh(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function ak(){return ak=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ak.apply(null,arguments)}function x5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function b5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?x5(Object(n),!0).forEach(function(r){x2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function x2e(e,t,n){return(t=b2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b2e(e){var t=w2e(e,"string");return typeof t=="symbol"?t:t+""}function w2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var w5={curveBasisClosed:tNe,curveBasisOpen:nNe,curveBasis:eNe,curveBumpX:$_e,curveBumpY:U_e,curveLinearClosed:rNe,curveLinear:CE,curveMonotoneX:iNe,curveMonotoneY:sNe,curveNatural:aNe,curveStep:oNe,curveStepAfter:cNe,curveStepBefore:lNe},ov=e=>zr(e.x)&&zr(e.y),Fp=e=>e.x,Bp=e=>e.y,E2e=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(z0(e));return(n==="curveMonotone"||n==="curveBump")&&t?w5["".concat(n).concat(t==="vertical"?"Y":"X")]:w5[n]||CE},S2e=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=e,a=E2e(t,i),o=s?n.filter(ov):n,l;if(Array.isArray(r)){var u=s?r.filter(f=>ov(f)):r,d=o.map((f,h)=>b5(b5({},f),{},{base:u[h]}));return i==="vertical"?l=tv().y(Bp).x1(Fp).x0(f=>f.base.x):l=tv().x(Fp).y1(Bp).y0(f=>f.base.y),l.defined(ov).curve(a),l(d)}return i==="vertical"&&Ie(r)?l=tv().y(Bp).x1(Fp).x0(r):Ie(r)?l=tv().x(Fp).y1(Bp).y0(r):l=oK().x(Fp).y(Bp),l.defined(ov).curve(a),l(o)},Wf=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var s=n&&n.length?S2e(e):r;return w.createElement("path",ak({},Oa(e),xP(e),{className:gt("recharts-curve",t),d:s===null?void 0:s,ref:i}))},_2e=["x","y","top","left","width","height","className"];function ok(){return ok=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ok.apply(null,arguments)}function E5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function N2e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?E5(Object(n),!0).forEach(function(r){T2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function T2e(e,t,n){return(t=C2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C2e(e){var t=k2e(e,"string");return typeof t=="symbol"?t:t+""}function k2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A2e(e,t){if(e==null)return{};var n,r,i=j2e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function j2e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var O2e=(e,t,n,r,i,s)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(s,",").concat(t,"h").concat(n),P2e=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:s=0,height:a=0,className:o}=e,l=A2e(e,_2e),u=N2e({x:t,y:n,top:r,left:i,width:s,height:a},l);return!Ie(t)||!Ie(n)||!Ie(s)||!Ie(a)||!Ie(r)||!Ie(i)?null:w.createElement("path",ok({},Jt(u,!0),{className:gt("recharts-cross",o),d:O2e(t,n,s,a,r,i)}))};function I2e(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function S5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function D2e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S5(Object(n),!0).forEach(function(r){M2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function M2e(e,t,n){return(t=R2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R2e(e){var t=L2e(e,"string");return typeof t=="symbol"?t:t+""}function L2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _i(e,t){var n=D2e({},e),r=t,i=Object.keys(t),s=i.reduce((a,o)=>(a[o]===void 0&&r[o]!==void 0&&(a[o]=r[o]),a),n);return s}var PG={},IG={},DG={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(!n||typeof n!="object")return!1;const r=Object.getPrototypeOf(n);return r===null||r===Object.prototype||Object.getPrototypeOf(r)===null?Object.prototype.toString.call(n)==="[object Object]":!1}e.isPlainObject=t})(DG);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DG,n=PP,r=OE,i=PE,s=jE;function a(u,d,f){return o(u,d,void 0,void 0,void 0,void 0,f)}function o(u,d,f,h,p,m,g){const v=g(u,d,f,h,p,m);if(v!==void 0)return v;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return l(u,d,m,g)}return l(u,d,m,g)}function l(u,d,f,h){if(Object.is(u,d))return!0;let p=r.getTag(u),m=r.getTag(d);if(p===i.argumentsTag&&(p=i.objectTag),m===i.argumentsTag&&(m=i.objectTag),p!==m)return!1;switch(p){case i.stringTag:return u.toString()===d.toString();case i.numberTag:{const y=u.valueOf(),b=d.valueOf();return s.eq(y,b)}case i.booleanTag:case i.dateTag:case i.symbolTag:return Object.is(u.valueOf(),d.valueOf());case i.regexpTag:return u.source===d.source&&u.flags===d.flags;case i.functionTag:return u===d}f=f??new Map;const g=f.get(u),v=f.get(d);if(g!=null&&v!=null)return g===d;f.set(u,d),f.set(d,u);try{switch(p){case i.mapTag:{if(u.size!==d.size)return!1;for(const[y,b]of u.entries())if(!d.has(y)||!o(b,d.get(y),y,u,d,f,h))return!1;return!0}case i.setTag:{if(u.size!==d.size)return!1;const y=Array.from(u.values()),b=Array.from(d.values());for(let x=0;x<y.length;x++){const S=y[x],E=b.findIndex(_=>o(S,_,void 0,u,d,f,h));if(E===-1)return!1;b.splice(E,1)}return!0}case i.arrayTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:case i.bigUint64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.bigInt64ArrayTag:case i.float32ArrayTag:case i.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let y=0;y<u.length;y++)if(!o(u[y],d[y],y,u,d,f,h))return!1;return!0}case i.arrayBufferTag:return u.byteLength!==d.byteLength?!1:l(new Uint8Array(u),new Uint8Array(d),f,h);case i.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:l(new Uint8Array(u),new Uint8Array(d),f,h);case i.errorTag:return u.name===d.name&&u.message===d.message;case i.objectTag:{if(!(l(u.constructor,d.constructor,f,h)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const b=[...Object.keys(u),...n.getSymbols(u)],x=[...Object.keys(d),...n.getSymbols(d)];if(b.length!==x.length)return!1;for(let S=0;S<b.length;S++){const E=b[S],_=u[E];if(!Object.hasOwn(d,E))return!1;const T=d[E];if(!o(_,T,E,u,d,f,h))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=a})(IG);var MG={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t})(MG);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IG,n=MG;function r(i,s){return t.isEqualWith(i,s,n.noop)}e.isEqual=r})(PG);var F2e=PG.isEqual;const B2e=ii(F2e);var Lb=1e-4,RG=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],LG=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),_5=(e,t)=>n=>{var r=RG(e,t);return LG(r,n)},$2e=(e,t)=>n=>{var r=RG(e,t),i=[...r.map((s,a)=>s*a).slice(1),0];return LG(i,n)},N5=function(){for(var t,n,r,i,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];if(a.length===1)switch(a[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var l=a[0].split("(");l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4&&([t,r,n,i]=l[1].split(")")[0].split(",").map(m=>parseFloat(m)))}}else a.length===4&&([t,r,n,i]=a);var u=_5(t,n),d=_5(r,i),f=$2e(t,n),h=m=>m>1?1:m<0?0:m,p=m=>{for(var g=m>1?1:m,v=g,y=0;y<8;++y){var b=u(v)-g,x=f(v);if(Math.abs(b-g)<Lb||x<Lb)return d(v);v=h(v-b/x)}return d(v)};return p.isStepper=!1,p},U2e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,s=(a,o,l)=>{var u=-(a-o)*n,d=l*r,f=l+(u-d)*i/1e3,h=l*i/1e3+a;return Math.abs(h-o)<Lb&&Math.abs(f)<Lb?[o,0]:[h,f]};return s.isStepper=!0,s.dt=i,s},FG=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return N5(e);case"spring":return U2e();default:if(e.split("(")[0]==="cubic-bezier")return N5(e)}return typeof e=="function"?e:null};function T5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function C5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T5(Object(n),!0).forEach(function(r){z2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function z2e(e,t,n){return(t=H2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H2e(e){var t=V2e(e,"string");return typeof t=="symbol"?t:t+""}function V2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var W2e=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),q2e=(e,t,n)=>e.map(r=>"".concat(W2e(r)," ").concat(t,"ms ").concat(n)).join(","),K2e=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),Fg=(e,t)=>Object.keys(t).reduce((n,r)=>C5(C5({},n),{},{[r]:e(r,t[r])}),{});function k5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Mr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k5(Object(n),!0).forEach(function(r){G2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function G2e(e,t,n){return(t=Y2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y2e(e){var t=X2e(e,"string");return typeof t=="symbol"?t:t+""}function X2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fb=(e,t,n)=>e+(t-e)*n,lk=e=>{var{from:t,to:n}=e;return t!==n},BG=(e,t,n)=>{var r=Fg((i,s)=>{if(lk(s)){var[a,o]=e(s.from,s.to,s.velocity);return Mr(Mr({},s),{},{from:a,velocity:o})}return s},t);return n<1?Fg((i,s)=>lk(s)?Mr(Mr({},s),{},{velocity:Fb(s.velocity,r[i].velocity,n),from:Fb(s.from,r[i].from,n)}):s,t):BG(e,r,n-1)};function Q2e(e,t,n,r,i,s){var a,o=r.reduce((h,p)=>Mr(Mr({},h),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),l=()=>Fg((h,p)=>p.from,o),u=()=>!Object.values(o).filter(lk).length,d=null,f=h=>{a||(a=h);var p=h-a,m=p/n.dt;o=BG(n,o,m),i(Mr(Mr(Mr({},e),t),l())),a=h,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{d()})}function J2e(e,t,n,r,i,s,a){var o=null,l=i.reduce((f,h)=>Mr(Mr({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/r,p=Fg((g,v)=>Fb(...v,n(h)),l);if(s(Mr(Mr(Mr({},e),t),p)),h<1)o=a.setTimeout(d);else{var m=Fg((g,v)=>Fb(...v,n(1)),l);s(Mr(Mr(Mr({},e),t),m))}};return()=>(o=a.setTimeout(d),()=>{o()})}const $G=(e,t,n,r,i,s)=>{var a=K2e(e,t);return n.isStepper===!0?Q2e(e,t,n,a,i,s):J2e(e,t,n,r,a,i,s)};function Z2e(e){var t,n=()=>null,r=!1,i=null,s=a=>{if(!r){if(Array.isArray(a)){if(!a.length)return;var o=a,[l,...u]=o;if(typeof l=="number"){i=e.setTimeout(s.bind(null,u),l);return}s(l),i=e.setTimeout(s.bind(null,u));return}typeof a=="string"&&(t=a,n(t)),typeof a=="object"&&(t=a,n(t)),typeof a=="function"&&a()}};return{stop:()=>{r=!0},start:a=>{r=!1,i&&(i(),i=null),s(a)},subscribe:a=>(n=a,()=>{n=()=>null}),getTimeoutController:()=>e}}class eke{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=a=>{a-r>=n?t(a):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{cancelAnimationFrame(i)}}}function tke(){return Z2e(new eke)}var nke=w.createContext(tke);function UG(e,t){var n=w.useContext(nke);return w.useMemo(()=>t??n(e),[e,t,n])}var rke=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function ck(){return ck=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ck.apply(null,arguments)}function ike(e,t){if(e==null)return{};var n,r,i=ske(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ske(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function A5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Sl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?A5(Object(n),!0).forEach(function(r){Cu(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Cu(e,t,n){return(t=ake(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ake(e){var t=oke(e,"string");return typeof t=="symbol"?t:t+""}function oke(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class YP extends w.PureComponent{constructor(t,n){super(t,n),Cu(this,"mounted",!1),Cu(this,"manager",void 0),Cu(this,"stopJSAnimation",null),Cu(this,"unSubscribe",null);var{isActive:r,attributeName:i,from:s,to:a,children:o,duration:l,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!r||l<=0){this.state={style:{}},typeof o=="function"&&(this.state={style:a});return}if(s){if(typeof o=="function"){this.state={style:s};return}this.state={style:i?{[i]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:n}=this.props;this.mounted=!0,!(!t||!n)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:n,canBegin:r,attributeName:i,shouldReAnimate:s,to:a,from:o}=this.props,{style:l}=this.state;if(r){if(!n){var u={style:i?{[i]:a}:a};this.state&&l&&(i&&l[i]!==a||!i&&l!==a)&&this.setState(u);return}if(!(B2e(t.to,a)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||s?o:t.to;if(this.state&&l){var h={style:i?{[i]:f}:f};(i&&l[i]!==f||!i&&l!==f)&&this.setState(h)}this.runAnimation(Sl(Sl({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:n,to:r,duration:i,easing:s,begin:a,onAnimationEnd:o,onAnimationStart:l}=t,u=$G(n,r,FG(s),i,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([l,a,d,i,o])}runAnimation(t){var{begin:n,duration:r,attributeName:i,to:s,easing:a,onAnimationStart:o,onAnimationEnd:l,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof a=="function"||typeof u=="function"||a==="spring"){this.runJSAnimation(t);return}var d=i?{[i]:s}:s,f=q2e(Object.keys(d),r,a);this.manager.start([o,n,Sl(Sl({},d),{},{transition:f}),r,l])}render(){var t=this.props,{children:n,begin:r,duration:i,attributeName:s,easing:a,isActive:o,from:l,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:h,onAnimationReStart:p,animationManager:m}=t,g=ike(t,rke),v=w.Children.count(n),y=this.state.style;if(typeof n=="function")return n(y);if(!o||v===0||i<=0)return n;var b=x=>{var{style:S={},className:E}=x.props,_=w.cloneElement(x,Sl(Sl({},g),{},{style:Sl(Sl({},S),y),className:E}));return _};return v===1?b(w.Children.only(n)):w.createElement("div",null,w.Children.map(n,x=>b(x)))}}Cu(YP,"displayName","Animate");Cu(YP,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function Bb(e){var t,n=UG((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return w.createElement(YP,ck({},e,{animationManager:n}))}function $b(){return $b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$b.apply(null,arguments)}var j5=(e,t,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),a=r>=0?1:-1,o=n>=0?1:-1,l=r>=0&&n>=0||r<0&&n<0?1:0,u;if(s>0&&i instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=i[f]>s?s:i[f];u="M".concat(e,",").concat(t+a*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(l,",").concat(e+o*d[0],",").concat(t)),u+="L ".concat(e+n-o*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(l,`,
        `).concat(e+n,",").concat(t+a*d[1])),u+="L ".concat(e+n,",").concat(t+r-a*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(l,`,
        `).concat(e+n-o*d[2],",").concat(t+r)),u+="L ".concat(e+o*d[3],",").concat(t+r),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(t+r-a*d[3])),u+="Z"}else if(s>0&&i===+i&&i>0){var p=Math.min(s,i);u="M ".concat(e,",").concat(t+a*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+o*p,",").concat(t,`
            L `).concat(e+n-o*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+n,",").concat(t+a*p,`
            L `).concat(e+n,",").concat(t+r-a*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+n-o*p,",").concat(t+r,`
            L `).concat(e+o*p,",").concat(t+r,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e,",").concat(t+r-a*p," Z")}else u="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return u},lke={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},zG=e=>{var t=_i(e,lke),n=w.useRef(null),[r,i]=w.useState(-1);w.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var y=n.current.getTotalLength();y&&i(y)}catch{}},[]);var{x:s,y:a,width:o,height:l,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isAnimationActive:m,isUpdateAnimationActive:g}=t;if(s!==+s||a!==+a||o!==+o||l!==+l||o===0||l===0)return null;var v=gt("recharts-rectangle",d);return g?w.createElement(Bb,{canBegin:r>0,from:{width:o,height:l,x:s,y:a},to:{width:o,height:l,x:s,y:a},duration:h,animationEasing:f,isActive:g},y=>{var{width:b,height:x,x:S,y:E}=y;return w.createElement(Bb,{canBegin:r>0,from:"0px ".concat(r===-1?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,isActive:m,easing:f},w.createElement("path",$b({},Jt(t,!0),{className:v,d:j5(S,E,b,x,u),ref:n})))}):w.createElement("path",$b({},Jt(t,!0),{className:v,d:j5(s,a,o,l,u)}))};function HG(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:s}=e,a=Gn(t,n,r,i),o=Gn(t,n,r,s);return{points:[a,o],cx:t,cy:n,radius:r,startAngle:i,endAngle:s}}function uk(){return uk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uk.apply(null,arguments)}var cke=(e,t)=>{var n=xr(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},lv=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:s,isExternal:a,cornerRadius:o,cornerIsExternal:l}=e,u=o*(a?1:-1)+r,d=Math.asin(o/u)/Mb,f=l?i:i+s*d,h=Gn(t,n,u,f),p=Gn(t,n,r,f),m=l?i-s*d:i,g=Gn(t,n,u*Math.cos(d*Mb),m);return{center:h,circleTangency:p,lineTangency:g,theta:d}},VG=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:a}=e,o=cke(s,a),l=s+o,u=Gn(t,n,i,s),d=Gn(t,n,i,l),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(s>l),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(r>0){var h=Gn(t,n,r,s),p=Gn(t,n,r,l);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(s<=l),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(n," Z");return f},uke=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:o,startAngle:l,endAngle:u}=e,d=xr(u-l),{circleTangency:f,lineTangency:h,theta:p}=lv({cx:t,cy:n,radius:i,angle:l,sign:d,cornerRadius:s,cornerIsExternal:o}),{circleTangency:m,lineTangency:g,theta:v}=lv({cx:t,cy:n,radius:i,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:o}),y=o?Math.abs(l-u):Math.abs(l-u)-p-v;if(y<0)return a?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):VG({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:u});var b="M ".concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
  `);if(r>0){var{circleTangency:x,lineTangency:S,theta:E}=lv({cx:t,cy:n,radius:r,angle:l,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:_,lineTangency:T,theta:C}=lv({cx:t,cy:n,radius:r,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),k=o?Math.abs(l-u):Math.abs(l-u)-E-C;if(k<0&&s===0)return"".concat(b,"L").concat(t,",").concat(n,"Z");b+="L".concat(T.x,",").concat(T.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(_.x,",").concat(_.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(k>180),",").concat(+(d>0),",").concat(x.x,",").concat(x.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(S.x,",").concat(S.y,"Z")}else b+="L".concat(t,",").concat(n,"Z");return b},dke={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},WG=e=>{var t=_i(e,dke),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d,className:f}=t;if(s<i||u===d)return null;var h=gt("recharts-sector",f),p=s-i,m=vi(a,p,0,!0),g;return m>0&&Math.abs(u-d)<360?g=uke({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(m,p/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d}):g=VG({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:u,endAngle:d}),w.createElement("path",uk({},Jt(t,!0),{className:h,d:g}))};function fke(e,t,n){var r,i,s,a;if(e==="horizontal")r=t.x,s=r,i=n.top,a=n.top+n.height;else if(e==="vertical")i=t.y,a=i,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:l,innerRadius:u,outerRadius:d,angle:f}=t,h=Gn(o,l,u,f),p=Gn(o,l,d,f);r=h.x,i=h.y,s=p.x,a=p.y}else return HG(t);return[{x:r,y:i},{x:s,y:a}]}var qG={},KG={},GG={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RP;function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(GG);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GG;function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(KG);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LP,n=KG;function r(i,s,a){a&&typeof a!="number"&&t.isIterateeCall(i,s,a)&&(s=a=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),a=a===void 0?i<s?1:-1:n.toFinite(a);const o=Math.max(Math.ceil((s-i)/(a||1)),0),l=new Array(o);for(let u=0;u<o;u++)l[u]=i,i+=a;return l}e.range=r})(qG);var hke=qG.range;const YG=ii(hke);function fc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function pke(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function XP(e){let t,n,r;e.length!==2?(t=fc,n=(o,l)=>fc(e(o),l),r=(o,l)=>e(o)-l):(t=e===fc||e===pke?e:mke,n=e,r=e);function i(o,l,u=0,d=o.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;n(o[f],l)<0?u=f+1:d=f}while(u<d)}return u}function s(o,l,u=0,d=o.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;n(o[f],l)<=0?u=f+1:d=f}while(u<d)}return u}function a(o,l,u=0,d=o.length){const f=i(o,l,u,d-1);return f>u&&r(o[f-1],l)>-r(o[f],l)?f-1:f}return{left:i,center:a,right:s}}function mke(){return 0}function XG(e){return e===null?NaN:+e}function*gke(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const yke=XP(fc),G0=yke.right;XP(XG).center;class O5 extends Map{constructor(t,n=bke){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(P5(this,t))}has(t){return super.has(P5(this,t))}set(t,n){return super.set(vke(this,t),n)}delete(t){return super.delete(xke(this,t))}}function P5({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function vke({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function xke({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function bke(e){return e!==null&&typeof e=="object"?e.valueOf():e}function wke(e=fc){if(e===fc)return QG;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function QG(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Eke=Math.sqrt(50),Ske=Math.sqrt(10),_ke=Math.sqrt(2);function Ub(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=Eke?10:s>=Ske?5:s>=_ke?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/a,o=Math.round(e*u),l=Math.round(t*u),o/u<e&&++o,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*a,o=Math.round(e/u),l=Math.round(t/u),o*u<e&&++o,l*u>t&&--l),l<o&&.5<=n&&n<2?Ub(e,t,n*2):[o,l,u]}function dk(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,a]=r?Ub(t,e,n):Ub(e,t,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let u=0;u<o;++u)l[u]=(s-u)/-a;else for(let u=0;u<o;++u)l[u]=(s-u)*a;else if(a<0)for(let u=0;u<o;++u)l[u]=(i+u)/-a;else for(let u=0;u<o;++u)l[u]=(i+u)*a;return l}function fk(e,t,n){return t=+t,e=+e,n=+n,Ub(e,t,n)[2]}function hk(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?fk(t,e,n):fk(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function I5(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function D5(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function JG(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?QG:wke(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,d=Math.log(l),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(l-f)/l)*(u-l/2<0?-1:1),p=Math.max(n,Math.floor(t-u*f/l+h)),m=Math.min(r,Math.floor(t+(l-u)*f/l+h));JG(e,t,p,m,i)}const s=e[t];let a=n,o=r;for($p(e,n,t),i(e[r],s)>0&&$p(e,n,r);a<o;){for($p(e,a,o),++a,--o;i(e[a],s)<0;)++a;for(;i(e[o],s)>0;)--o}i(e[n],s)===0?$p(e,n,o):(++o,$p(e,o,r)),o<=t&&(n=o+1),t<=o&&(r=o-1)}return e}function $p(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Nke(e,t,n){if(e=Float64Array.from(gke(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return D5(e);if(t>=1)return I5(e);var r,i=(r-1)*t,s=Math.floor(i),a=I5(JG(e,s).subarray(0,s+1)),o=D5(e.subarray(s+1));return a+(o-a)*(i-s)}}function Tke(e,t,n=XG){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),a=+n(e[s],s,e),o=+n(e[s+1],s+1,e);return a+(o-a)*(i-s)}}function Cke(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Js(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function hl(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const pk=Symbol("implicit");function QP(){var e=new O5,t=[],n=[],r=pk;function i(s){let a=e.get(s);if(a===void 0){if(r!==pk)return r;e.set(s,a=t.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new O5;for(const a of s)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return QP(t,n).unknown(r)},Js.apply(i,arguments),i}function JP(){var e=QP().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,a,o=!1,l=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,p=i<r,m=p?i:r,g=p?r:i;s=(g-m)/Math.max(1,h-l+u*2),o&&(s=Math.floor(s)),m+=(g-m-s*(h-l))*d,a=s*(1-l),o&&(m=Math.round(m),a=Math.round(a));var v=Cke(h).map(function(y){return m+s*y});return n(p?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,o=!0,f()},e.bandwidth=function(){return a},e.step=function(){return s},e.round=function(h){return arguments.length?(o=!!h,f()):o},e.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),f()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return JP(t(),[r,i]).round(o).paddingInner(l).paddingOuter(u).align(d)},Js.apply(f(),arguments)}function ZG(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return ZG(t())},e}function kke(){return ZG(JP.apply(null,arguments).paddingInner(1))}function ZP(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function eY(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Y0(){}var Bg=.7,zb=1/Bg,qf="\\s*([+-]?\\d+)\\s*",$g="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",io="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ake=/^#([0-9a-f]{3,8})$/,jke=new RegExp(`^rgb\\(${qf},${qf},${qf}\\)$`),Oke=new RegExp(`^rgb\\(${io},${io},${io}\\)$`),Pke=new RegExp(`^rgba\\(${qf},${qf},${qf},${$g}\\)$`),Ike=new RegExp(`^rgba\\(${io},${io},${io},${$g}\\)$`),Dke=new RegExp(`^hsl\\(${$g},${io},${io}\\)$`),Mke=new RegExp(`^hsla\\(${$g},${io},${io},${$g}\\)$`),M5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ZP(Y0,Ug,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:R5,formatHex:R5,formatHex8:Rke,formatHsl:Lke,formatRgb:L5,toString:L5});function R5(){return this.rgb().formatHex()}function Rke(){return this.rgb().formatHex8()}function Lke(){return tY(this).formatHsl()}function L5(){return this.rgb().formatRgb()}function Ug(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ake.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?F5(t):n===3?new Di(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?cv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?cv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=jke.exec(e))?new Di(t[1],t[2],t[3],1):(t=Oke.exec(e))?new Di(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Pke.exec(e))?cv(t[1],t[2],t[3],t[4]):(t=Ike.exec(e))?cv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Dke.exec(e))?U5(t[1],t[2]/100,t[3]/100,1):(t=Mke.exec(e))?U5(t[1],t[2]/100,t[3]/100,t[4]):M5.hasOwnProperty(e)?F5(M5[e]):e==="transparent"?new Di(NaN,NaN,NaN,0):null}function F5(e){return new Di(e>>16&255,e>>8&255,e&255,1)}function cv(e,t,n,r){return r<=0&&(e=t=n=NaN),new Di(e,t,n,r)}function Fke(e){return e instanceof Y0||(e=Ug(e)),e?(e=e.rgb(),new Di(e.r,e.g,e.b,e.opacity)):new Di}function mk(e,t,n,r){return arguments.length===1?Fke(e):new Di(e,t,n,r??1)}function Di(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ZP(Di,mk,eY(Y0,{brighter(e){return e=e==null?zb:Math.pow(zb,e),new Di(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Bg:Math.pow(Bg,e),new Di(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Di(qu(this.r),qu(this.g),qu(this.b),Hb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:B5,formatHex:B5,formatHex8:Bke,formatRgb:$5,toString:$5}));function B5(){return`#${ku(this.r)}${ku(this.g)}${ku(this.b)}`}function Bke(){return`#${ku(this.r)}${ku(this.g)}${ku(this.b)}${ku((isNaN(this.opacity)?1:this.opacity)*255)}`}function $5(){const e=Hb(this.opacity);return`${e===1?"rgb(":"rgba("}${qu(this.r)}, ${qu(this.g)}, ${qu(this.b)}${e===1?")":`, ${e})`}`}function Hb(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ku(e){return e=qu(e),(e<16?"0":"")+e.toString(16)}function U5(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new fa(e,t,n,r)}function tY(e){if(e instanceof fa)return new fa(e.h,e.s,e.l,e.opacity);if(e instanceof Y0||(e=Ug(e)),!e)return new fa;if(e instanceof fa)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(t===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-t)/o+2:a=(t-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new fa(a,o,l,e.opacity)}function $ke(e,t,n,r){return arguments.length===1?tY(e):new fa(e,t,n,r??1)}function fa(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ZP(fa,$ke,eY(Y0,{brighter(e){return e=e==null?zb:Math.pow(zb,e),new fa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Bg:Math.pow(Bg,e),new fa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Di(NN(e>=240?e-240:e+120,i,r),NN(e,i,r),NN(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new fa(z5(this.h),uv(this.s),uv(this.l),Hb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Hb(this.opacity);return`${e===1?"hsl(":"hsla("}${z5(this.h)}, ${uv(this.s)*100}%, ${uv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function z5(e){return e=(e||0)%360,e<0?e+360:e}function uv(e){return Math.max(0,Math.min(1,e||0))}function NN(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const eI=e=>()=>e;function Uke(e,t){return function(n){return e+n*t}}function zke(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Hke(e){return(e=+e)==1?nY:function(t,n){return n-t?zke(t,n,e):eI(isNaN(t)?n:t)}}function nY(e,t){var n=t-e;return n?Uke(e,n):eI(isNaN(e)?t:e)}const H5=function e(t){var n=Hke(t);function r(i,s){var a=n((i=mk(i)).r,(s=mk(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),u=nY(i.opacity,s.opacity);return function(d){return i.r=a(d),i.g=o(d),i.b=l(d),i.opacity=u(d),i+""}}return r.gamma=e,r}(1);function Vke(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function Wke(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function qke(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=np(e[a],t[a]);for(;a<n;++a)s[a]=t[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function Kke(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Vb(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Gke(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=np(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var gk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,TN=new RegExp(gk.source,"g");function Yke(e){return function(){return e}}function Xke(e){return function(t){return e(t)+""}}function Qke(e,t){var n=gk.lastIndex=TN.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(e=e+"",t=t+"";(r=gk.exec(e))&&(i=TN.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:Vb(r,i)})),n=TN.lastIndex;return n<t.length&&(s=t.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?Xke(l[0].x):Yke(t):(t=l.length,function(u){for(var d=0,f;d<t;++d)o[(f=l[d]).i]=f.x(u);return o.join("")})}function np(e,t){var n=typeof t,r;return t==null||n==="boolean"?eI(t):(n==="number"?Vb:n==="string"?(r=Ug(t))?(t=r,H5):Qke:t instanceof Ug?H5:t instanceof Date?Kke:Wke(t)?Vke:Array.isArray(t)?qke:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Gke:Vb)(e,t)}function tI(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Jke(e,t){t===void 0&&(t=e,e=np);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(a){var o=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[o](a-o)}}function Zke(e){return function(){return e}}function Wb(e){return+e}var V5=[0,1];function gi(e){return e}function yk(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Zke(isNaN(t)?NaN:.5)}function eAe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function tAe(e,t,n){var r=e[0],i=e[1],s=t[0],a=t[1];return i<r?(r=yk(i,r),s=n(a,s)):(r=yk(r,i),s=n(s,a)),function(o){return s(r(o))}}function nAe(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=yk(e[a],e[a+1]),s[a]=n(t[a],t[a+1]);return function(o){var l=G0(e,o,1,r)-1;return s[l](i[l](o))}}function X0(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function VE(){var e=V5,t=V5,n=np,r,i,s,a=gi,o,l,u;function d(){var h=Math.min(e.length,t.length);return a!==gi&&(a=eAe(e[0],e[h-1])),o=h>2?nAe:tAe,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(l||(l=o(e.map(r),t,n)))(r(a(h)))}return f.invert=function(h){return a(i((u||(u=o(t,e.map(r),Vb)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Wb),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=tI,d()},f.clamp=function(h){return arguments.length?(a=h?!0:gi,d()):a!==gi},f.interpolate=function(h){return arguments.length?(n=h,d()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,p){return r=h,i=p,d()}}function nI(){return VE()(gi,gi)}function rAe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function qb(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Sh(e){return e=qb(Math.abs(e)),e?e[1]:NaN}function iAe(e,t){return function(n,r){for(var i=n.length,s=[],a=0,o=e[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=e[a=(a+1)%e.length];return s.reverse().join(t)}}function sAe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var aAe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function zg(e){if(!(t=aAe.exec(e)))throw new Error("invalid format: "+e);var t;return new rI({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}zg.prototype=rI.prototype;function rI(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}rI.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function oAe(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var rY;function lAe(e,t){var n=qb(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(rY=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+qb(e,Math.max(0,t+s-1))[0]}function W5(e,t){var n=qb(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const q5={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:rAe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>W5(e*100,t),r:W5,s:lAe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function K5(e){return e}var G5=Array.prototype.map,Y5=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function cAe(e){var t=e.grouping===void 0||e.thousands===void 0?K5:iAe(G5.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?K5:sAe(G5.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=zg(f);var h=f.fill,p=f.align,m=f.sign,g=f.symbol,v=f.zero,y=f.width,b=f.comma,x=f.precision,S=f.trim,E=f.type;E==="n"?(b=!0,E="g"):q5[E]||(x===void 0&&(x=12),S=!0,E="g"),(v||h==="0"&&p==="=")&&(v=!0,h="0",p="=");var _=g==="$"?n:g==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",T=g==="$"?r:/[%p]/.test(E)?a:"",C=q5[E],k=/[defgprs%]/.test(E);x=x===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function A(j){var D=_,P=T,M,L,O;if(E==="c")P=C(j)+P,j="";else{j=+j;var B=j<0||1/j<0;if(j=isNaN(j)?l:C(Math.abs(j),x),S&&(j=oAe(j)),B&&+j==0&&m!=="+"&&(B=!1),D=(B?m==="("?m:o:m==="-"||m==="("?"":m)+D,P=(E==="s"?Y5[8+rY/3]:"")+P+(B&&m==="("?")":""),k){for(M=-1,L=j.length;++M<L;)if(O=j.charCodeAt(M),48>O||O>57){P=(O===46?i+j.slice(M+1):j.slice(M))+P,j=j.slice(0,M);break}}}b&&!v&&(j=t(j,1/0));var R=D.length+j.length+P.length,F=R<y?new Array(y-R+1).join(h):"";switch(b&&v&&(j=t(F+j,F.length?y-P.length:1/0),F=""),p){case"<":j=D+j+P+F;break;case"=":j=D+F+j+P;break;case"^":j=F.slice(0,R=F.length>>1)+D+j+P+F.slice(R);break;default:j=F+D+j+P;break}return s(j)}return A.toString=function(){return f+""},A}function d(f,h){var p=u((f=zg(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(Sh(h)/3)))*3,g=Math.pow(10,-m),v=Y5[8+m/3];return function(y){return p(g*y)+v}}return{format:u,formatPrefix:d}}var dv,iI,iY;uAe({thousands:",",grouping:[3],currency:["$",""]});function uAe(e){return dv=cAe(e),iI=dv.format,iY=dv.formatPrefix,dv}function dAe(e){return Math.max(0,-Sh(Math.abs(e)))}function fAe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Sh(t)/3)))*3-Sh(Math.abs(e)))}function hAe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Sh(t)-Sh(e))+1}function sY(e,t,n,r){var i=hk(e,t,n),s;switch(r=zg(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=fAe(i,a))&&(r.precision=s),iY(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=hAe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=dAe(i))&&(r.precision=s-(r.type==="%")*2);break}}return iI(r)}function Hc(e){var t=e.domain;return e.ticks=function(n){var r=t();return dk(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return sY(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,a=r[i],o=r[s],l,u,d=10;for(o<a&&(u=a,a=o,o=u,u=i,i=s,s=u);d-- >0;){if(u=fk(a,o,n),u===l)return r[i]=a,r[s]=o,t(r);if(u>0)a=Math.floor(a/u)*u,o=Math.ceil(o/u)*u;else if(u<0)a=Math.ceil(a*u)/u,o=Math.floor(o*u)/u;else break;l=u}return e},e}function aY(){var e=nI();return e.copy=function(){return X0(e,aY())},Js.apply(e,arguments),Hc(e)}function oY(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Wb),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return oY(e).unknown(t)},e=arguments.length?Array.from(e,Wb):[0,1],Hc(n)}function lY(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),e[n]=t.floor(i),e[r]=t.ceil(s),e}function X5(e){return Math.log(e)}function Q5(e){return Math.exp(e)}function pAe(e){return-Math.log(-e)}function mAe(e){return-Math.exp(-e)}function gAe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function yAe(e){return e===10?gAe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function vAe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function J5(e){return(t,n)=>-e(-t,n)}function sI(e){const t=e(X5,Q5),n=t.domain;let r=10,i,s;function a(){return i=vAe(r),s=yAe(r),n()[0]<0?(i=J5(i),s=J5(s),e(pAe,mAe)):e(X5,Q5),t}return t.base=function(o){return arguments.length?(r=+o,a()):r},t.domain=function(o){return arguments.length?(n(o),a()):n()},t.ticks=o=>{const l=n();let u=l[0],d=l[l.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=i(u),p=i(d),m,g;const v=o==null?10:+o;let y=[];if(!(r%1)&&p-h<v){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(m=1;m<r;++m)if(g=h<0?m/s(-h):m*s(h),!(g<u)){if(g>d)break;y.push(g)}}else for(;h<=p;++h)for(m=r-1;m>=1;--m)if(g=h>0?m/s(-h):m*s(h),!(g<u)){if(g>d)break;y.push(g)}y.length*2<v&&(y=dk(u,d,v))}else y=dk(h,p,Math.min(p-h,v)).map(s);return f?y.reverse():y},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=zg(l)).precision==null&&(l.trim=!0),l=iI(l)),o===1/0)return l;const u=Math.max(1,r*o/t.ticks().length);return d=>{let f=d/s(Math.round(i(d)));return f*r<r-.5&&(f*=r),f<=u?l(d):""}},t.nice=()=>n(lY(n(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),t}function cY(){const e=sI(VE()).domain([1,10]);return e.copy=()=>X0(e,cY()).base(e.base()),Js.apply(e,arguments),e}function Z5(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function eF(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function aI(e){var t=1,n=e(Z5(t),eF(t));return n.constant=function(r){return arguments.length?e(Z5(t=+r),eF(t)):t},Hc(n)}function uY(){var e=aI(VE());return e.copy=function(){return X0(e,uY()).constant(e.constant())},Js.apply(e,arguments)}function tF(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function xAe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function bAe(e){return e<0?-e*e:e*e}function oI(e){var t=e(gi,gi),n=1;function r(){return n===1?e(gi,gi):n===.5?e(xAe,bAe):e(tF(n),tF(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Hc(t)}function lI(){var e=oI(VE());return e.copy=function(){return X0(e,lI()).exponent(e.exponent())},Js.apply(e,arguments),e}function wAe(){return lI.apply(null,arguments).exponent(.5)}function nF(e){return Math.sign(e)*e*e}function EAe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function dY(){var e=nI(),t=[0,1],n=!1,r;function i(s){var a=EAe(e(s));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(s){return e.invert(nF(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,Wb)).map(nF)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return dY(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Js.apply(i,arguments),Hc(i)}function fY(){var e=[],t=[],n=[],r;function i(){var a=0,o=Math.max(1,t.length);for(n=new Array(o-1);++a<o;)n[a-1]=Tke(e,a/o);return s}function s(a){return a==null||isNaN(a=+a)?r:t[G0(n,a)]}return s.invertExtent=function(a){var o=t.indexOf(a);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},s.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let o of a)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(fc),i()},s.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return fY().domain(e).range(t).unknown(r)},Js.apply(s,arguments)}function hY(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function a(l){return l!=null&&l<=l?i[G0(r,l,0,n)]:s}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return a}return a.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},a.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return hY().domain([e,t]).range(i).unknown(s)},Js.apply(Hc(a),arguments)}function pY(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[G0(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var a=t.indexOf(s);return[e[a-1],e[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return pY().domain(e).range(t).unknown(n)},Js.apply(i,arguments)}const CN=new Date,kN=new Date;function lr(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(t(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const l=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;let u;do l.push(u=new Date(+s)),t(s,o),e(s);while(u<s&&s<a);return l},i.filter=s=>lr(a=>{if(a>=a)for(;e(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;t(a,-1),!s(a););else for(;--o>=0;)for(;t(a,1),!s(a););}),n&&(i.count=(s,a)=>(CN.setTime(+s),kN.setTime(+a),e(CN),e(kN),Math.floor(n(CN,kN))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const Kb=lr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Kb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?lr(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Kb);Kb.range;const Lo=1e3,Fs=Lo*60,Fo=Fs*60,tl=Fo*24,cI=tl*7,rF=tl*30,AN=tl*365,Au=lr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Lo)},(e,t)=>(t-e)/Lo,e=>e.getUTCSeconds());Au.range;const uI=lr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Lo)},(e,t)=>{e.setTime(+e+t*Fs)},(e,t)=>(t-e)/Fs,e=>e.getMinutes());uI.range;const dI=lr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Fs)},(e,t)=>(t-e)/Fs,e=>e.getUTCMinutes());dI.range;const fI=lr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Lo-e.getMinutes()*Fs)},(e,t)=>{e.setTime(+e+t*Fo)},(e,t)=>(t-e)/Fo,e=>e.getHours());fI.range;const hI=lr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Fo)},(e,t)=>(t-e)/Fo,e=>e.getUTCHours());hI.range;const Q0=lr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Fs)/tl,e=>e.getDate()-1);Q0.range;const WE=lr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/tl,e=>e.getUTCDate()-1);WE.range;const mY=lr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/tl,e=>Math.floor(e/tl));mY.range;function Pd(e){return lr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Fs)/cI)}const qE=Pd(0),Gb=Pd(1),SAe=Pd(2),_Ae=Pd(3),_h=Pd(4),NAe=Pd(5),TAe=Pd(6);qE.range;Gb.range;SAe.range;_Ae.range;_h.range;NAe.range;TAe.range;function Id(e){return lr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/cI)}const KE=Id(0),Yb=Id(1),CAe=Id(2),kAe=Id(3),Nh=Id(4),AAe=Id(5),jAe=Id(6);KE.range;Yb.range;CAe.range;kAe.range;Nh.range;AAe.range;jAe.range;const pI=lr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());pI.range;const mI=lr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());mI.range;const nl=lr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());nl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:lr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});nl.range;const rl=lr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());rl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:lr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});rl.range;function gY(e,t,n,r,i,s){const a=[[Au,1,Lo],[Au,5,5*Lo],[Au,15,15*Lo],[Au,30,30*Lo],[s,1,Fs],[s,5,5*Fs],[s,15,15*Fs],[s,30,30*Fs],[i,1,Fo],[i,3,3*Fo],[i,6,6*Fo],[i,12,12*Fo],[r,1,tl],[r,2,2*tl],[n,1,cI],[t,1,rF],[t,3,3*rF],[e,1,AN]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:l(u,d,f),m=p?p.range(u,+d+1):[];return h?m.reverse():m}function l(u,d,f){const h=Math.abs(d-u)/f,p=XP(([,,v])=>v).right(a,h);if(p===a.length)return e.every(hk(u/AN,d/AN,f));if(p===0)return Kb.every(Math.max(hk(u,d,f),1));const[m,g]=a[h/a[p-1][2]<a[p][2]/h?p-1:p];return m.every(g)}return[o,l]}const[OAe,PAe]=gY(rl,mI,KE,mY,hI,dI),[IAe,DAe]=gY(nl,pI,qE,Q0,fI,uI);function jN(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ON(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Up(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function MAe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,a=e.shortDays,o=e.months,l=e.shortMonths,u=zp(i),d=Hp(i),f=zp(s),h=Hp(s),p=zp(a),m=Hp(a),g=zp(o),v=Hp(o),y=zp(l),b=Hp(l),x={a:B,A:R,b:F,B:I,c:null,d:cF,e:cF,f:ije,g:pje,G:gje,H:tje,I:nje,j:rje,L:yY,m:sje,M:aje,p:X,q:G,Q:fF,s:hF,S:oje,u:lje,U:cje,V:uje,w:dje,W:fje,x:null,X:null,y:hje,Y:mje,Z:yje,"%":dF},S={a:$,A:be,b:je,B:Q,c:null,d:uF,e:uF,f:wje,g:Oje,G:Ije,H:vje,I:xje,j:bje,L:xY,m:Eje,M:Sje,p:K,q:xe,Q:fF,s:hF,S:_je,u:Nje,U:Tje,V:Cje,w:kje,W:Aje,x:null,X:null,y:jje,Y:Pje,Z:Dje,"%":dF},E={a:A,A:j,b:D,B:P,c:M,d:oF,e:oF,f:QAe,g:aF,G:sF,H:lF,I:lF,j:KAe,L:XAe,m:qAe,M:GAe,p:k,q:WAe,Q:ZAe,s:eje,S:YAe,u:$Ae,U:UAe,V:zAe,w:BAe,W:HAe,x:L,X:O,y:aF,Y:sF,Z:VAe,"%":JAe};x.x=_(n,x),x.X=_(r,x),x.c=_(t,x),S.x=_(n,S),S.X=_(r,S),S.c=_(t,S);function _(ae,ue){return function(Ee){var re=[],Je=-1,De=0,tt=ae.length,Y,pe,W;for(Ee instanceof Date||(Ee=new Date(+Ee));++Je<tt;)ae.charCodeAt(Je)===37&&(re.push(ae.slice(De,Je)),(pe=iF[Y=ae.charAt(++Je)])!=null?Y=ae.charAt(++Je):pe=Y==="e"?" ":"0",(W=ue[Y])&&(Y=W(Ee,pe)),re.push(Y),De=Je+1);return re.push(ae.slice(De,Je)),re.join("")}}function T(ae,ue){return function(Ee){var re=Up(1900,void 0,1),Je=C(re,ae,Ee+="",0),De,tt;if(Je!=Ee.length)return null;if("Q"in re)return new Date(re.Q);if("s"in re)return new Date(re.s*1e3+("L"in re?re.L:0));if(ue&&!("Z"in re)&&(re.Z=0),"p"in re&&(re.H=re.H%12+re.p*12),re.m===void 0&&(re.m="q"in re?re.q:0),"V"in re){if(re.V<1||re.V>53)return null;"w"in re||(re.w=1),"Z"in re?(De=ON(Up(re.y,0,1)),tt=De.getUTCDay(),De=tt>4||tt===0?Yb.ceil(De):Yb(De),De=WE.offset(De,(re.V-1)*7),re.y=De.getUTCFullYear(),re.m=De.getUTCMonth(),re.d=De.getUTCDate()+(re.w+6)%7):(De=jN(Up(re.y,0,1)),tt=De.getDay(),De=tt>4||tt===0?Gb.ceil(De):Gb(De),De=Q0.offset(De,(re.V-1)*7),re.y=De.getFullYear(),re.m=De.getMonth(),re.d=De.getDate()+(re.w+6)%7)}else("W"in re||"U"in re)&&("w"in re||(re.w="u"in re?re.u%7:"W"in re?1:0),tt="Z"in re?ON(Up(re.y,0,1)).getUTCDay():jN(Up(re.y,0,1)).getDay(),re.m=0,re.d="W"in re?(re.w+6)%7+re.W*7-(tt+5)%7:re.w+re.U*7-(tt+6)%7);return"Z"in re?(re.H+=re.Z/100|0,re.M+=re.Z%100,ON(re)):jN(re)}}function C(ae,ue,Ee,re){for(var Je=0,De=ue.length,tt=Ee.length,Y,pe;Je<De;){if(re>=tt)return-1;if(Y=ue.charCodeAt(Je++),Y===37){if(Y=ue.charAt(Je++),pe=E[Y in iF?ue.charAt(Je++):Y],!pe||(re=pe(ae,Ee,re))<0)return-1}else if(Y!=Ee.charCodeAt(re++))return-1}return re}function k(ae,ue,Ee){var re=u.exec(ue.slice(Ee));return re?(ae.p=d.get(re[0].toLowerCase()),Ee+re[0].length):-1}function A(ae,ue,Ee){var re=p.exec(ue.slice(Ee));return re?(ae.w=m.get(re[0].toLowerCase()),Ee+re[0].length):-1}function j(ae,ue,Ee){var re=f.exec(ue.slice(Ee));return re?(ae.w=h.get(re[0].toLowerCase()),Ee+re[0].length):-1}function D(ae,ue,Ee){var re=y.exec(ue.slice(Ee));return re?(ae.m=b.get(re[0].toLowerCase()),Ee+re[0].length):-1}function P(ae,ue,Ee){var re=g.exec(ue.slice(Ee));return re?(ae.m=v.get(re[0].toLowerCase()),Ee+re[0].length):-1}function M(ae,ue,Ee){return C(ae,t,ue,Ee)}function L(ae,ue,Ee){return C(ae,n,ue,Ee)}function O(ae,ue,Ee){return C(ae,r,ue,Ee)}function B(ae){return a[ae.getDay()]}function R(ae){return s[ae.getDay()]}function F(ae){return l[ae.getMonth()]}function I(ae){return o[ae.getMonth()]}function X(ae){return i[+(ae.getHours()>=12)]}function G(ae){return 1+~~(ae.getMonth()/3)}function $(ae){return a[ae.getUTCDay()]}function be(ae){return s[ae.getUTCDay()]}function je(ae){return l[ae.getUTCMonth()]}function Q(ae){return o[ae.getUTCMonth()]}function K(ae){return i[+(ae.getUTCHours()>=12)]}function xe(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var ue=_(ae+="",x);return ue.toString=function(){return ae},ue},parse:function(ae){var ue=T(ae+="",!1);return ue.toString=function(){return ae},ue},utcFormat:function(ae){var ue=_(ae+="",S);return ue.toString=function(){return ae},ue},utcParse:function(ae){var ue=T(ae+="",!0);return ue.toString=function(){return ae},ue}}}var iF={"-":"",_:" ",0:"0"},kr=/^\s*\d+/,RAe=/^%/,LAe=/[\\^$*+?|[\]().{}]/g;function wt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function FAe(e){return e.replace(LAe,"\\$&")}function zp(e){return new RegExp("^(?:"+e.map(FAe).join("|")+")","i")}function Hp(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function BAe(e,t,n){var r=kr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function $Ae(e,t,n){var r=kr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function UAe(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function zAe(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function HAe(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function sF(e,t,n){var r=kr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function aF(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function VAe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function WAe(e,t,n){var r=kr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function qAe(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function oF(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function KAe(e,t,n){var r=kr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function lF(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function GAe(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function YAe(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function XAe(e,t,n){var r=kr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function QAe(e,t,n){var r=kr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function JAe(e,t,n){var r=RAe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function ZAe(e,t,n){var r=kr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function eje(e,t,n){var r=kr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function cF(e,t){return wt(e.getDate(),t,2)}function tje(e,t){return wt(e.getHours(),t,2)}function nje(e,t){return wt(e.getHours()%12||12,t,2)}function rje(e,t){return wt(1+Q0.count(nl(e),e),t,3)}function yY(e,t){return wt(e.getMilliseconds(),t,3)}function ije(e,t){return yY(e,t)+"000"}function sje(e,t){return wt(e.getMonth()+1,t,2)}function aje(e,t){return wt(e.getMinutes(),t,2)}function oje(e,t){return wt(e.getSeconds(),t,2)}function lje(e){var t=e.getDay();return t===0?7:t}function cje(e,t){return wt(qE.count(nl(e)-1,e),t,2)}function vY(e){var t=e.getDay();return t>=4||t===0?_h(e):_h.ceil(e)}function uje(e,t){return e=vY(e),wt(_h.count(nl(e),e)+(nl(e).getDay()===4),t,2)}function dje(e){return e.getDay()}function fje(e,t){return wt(Gb.count(nl(e)-1,e),t,2)}function hje(e,t){return wt(e.getFullYear()%100,t,2)}function pje(e,t){return e=vY(e),wt(e.getFullYear()%100,t,2)}function mje(e,t){return wt(e.getFullYear()%1e4,t,4)}function gje(e,t){var n=e.getDay();return e=n>=4||n===0?_h(e):_h.ceil(e),wt(e.getFullYear()%1e4,t,4)}function yje(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+wt(t/60|0,"0",2)+wt(t%60,"0",2)}function uF(e,t){return wt(e.getUTCDate(),t,2)}function vje(e,t){return wt(e.getUTCHours(),t,2)}function xje(e,t){return wt(e.getUTCHours()%12||12,t,2)}function bje(e,t){return wt(1+WE.count(rl(e),e),t,3)}function xY(e,t){return wt(e.getUTCMilliseconds(),t,3)}function wje(e,t){return xY(e,t)+"000"}function Eje(e,t){return wt(e.getUTCMonth()+1,t,2)}function Sje(e,t){return wt(e.getUTCMinutes(),t,2)}function _je(e,t){return wt(e.getUTCSeconds(),t,2)}function Nje(e){var t=e.getUTCDay();return t===0?7:t}function Tje(e,t){return wt(KE.count(rl(e)-1,e),t,2)}function bY(e){var t=e.getUTCDay();return t>=4||t===0?Nh(e):Nh.ceil(e)}function Cje(e,t){return e=bY(e),wt(Nh.count(rl(e),e)+(rl(e).getUTCDay()===4),t,2)}function kje(e){return e.getUTCDay()}function Aje(e,t){return wt(Yb.count(rl(e)-1,e),t,2)}function jje(e,t){return wt(e.getUTCFullYear()%100,t,2)}function Oje(e,t){return e=bY(e),wt(e.getUTCFullYear()%100,t,2)}function Pje(e,t){return wt(e.getUTCFullYear()%1e4,t,4)}function Ije(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Nh(e):Nh.ceil(e),wt(e.getUTCFullYear()%1e4,t,4)}function Dje(){return"+0000"}function dF(){return"%"}function fF(e){return+e}function hF(e){return Math.floor(+e/1e3)}var Xd,wY,EY;Mje({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Mje(e){return Xd=MAe(e),wY=Xd.format,Xd.parse,EY=Xd.utcFormat,Xd.utcParse,Xd}function Rje(e){return new Date(e)}function Lje(e){return e instanceof Date?+e:+new Date(+e)}function gI(e,t,n,r,i,s,a,o,l,u){var d=nI(),f=d.invert,h=d.domain,p=u(".%L"),m=u(":%S"),g=u("%I:%M"),v=u("%I %p"),y=u("%a %d"),b=u("%b %d"),x=u("%B"),S=u("%Y");function E(_){return(l(_)<_?p:o(_)<_?m:a(_)<_?g:s(_)<_?v:r(_)<_?i(_)<_?y:b:n(_)<_?x:S)(_)}return d.invert=function(_){return new Date(f(_))},d.domain=function(_){return arguments.length?h(Array.from(_,Lje)):h().map(Rje)},d.ticks=function(_){var T=h();return e(T[0],T[T.length-1],_??10)},d.tickFormat=function(_,T){return T==null?E:u(T)},d.nice=function(_){var T=h();return(!_||typeof _.range!="function")&&(_=t(T[0],T[T.length-1],_??10)),_?h(lY(T,_)):d},d.copy=function(){return X0(d,gI(e,t,n,r,i,s,a,o,l,u))},d}function Fje(){return Js.apply(gI(IAe,DAe,nl,pI,qE,Q0,fI,uI,Au,wY).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Bje(){return Js.apply(gI(OAe,PAe,rl,mI,KE,WE,hI,dI,Au,EY).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function GE(){var e=0,t=1,n,r,i,s,a=gi,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:a(i===0?.5:(f=(s(f)-n)*i,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(a=f,u):a};function d(f){return function(h){var p,m;return arguments.length?([p,m]=h,a=f(p,m),u):[a(0),a(1)]}}return u.range=d(np),u.rangeRound=d(tI),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),u}}function Vc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function SY(){var e=Hc(GE()(gi));return e.copy=function(){return Vc(e,SY())},hl.apply(e,arguments)}function _Y(){var e=sI(GE()).domain([1,10]);return e.copy=function(){return Vc(e,_Y()).base(e.base())},hl.apply(e,arguments)}function NY(){var e=aI(GE());return e.copy=function(){return Vc(e,NY()).constant(e.constant())},hl.apply(e,arguments)}function yI(){var e=oI(GE());return e.copy=function(){return Vc(e,yI()).exponent(e.exponent())},hl.apply(e,arguments)}function $je(){return yI.apply(null,arguments).exponent(.5)}function TY(){var e=[],t=gi;function n(r){if(r!=null&&!isNaN(r=+r))return t((G0(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(fc),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>Nke(e,s/r))},n.copy=function(){return TY(t).domain(e)},hl.apply(n,arguments)}function YE(){var e=0,t=.5,n=1,r=1,i,s,a,o,l,u=gi,d,f=!1,h;function p(g){return isNaN(g=+g)?h:(g=.5+((g=+d(g))-s)*(r*g<r*s?o:l),u(f?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([e,t,n]=g,i=d(e=+e),s=d(t=+t),a=d(n=+n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,p):[e,t,n]},p.clamp=function(g){return arguments.length?(f=!!g,p):f},p.interpolator=function(g){return arguments.length?(u=g,p):u};function m(g){return function(v){var y,b,x;return arguments.length?([y,b,x]=v,u=Jke(g,[y,b,x]),p):[u(0),u(.5),u(1)]}}return p.range=m(np),p.rangeRound=m(tI),p.unknown=function(g){return arguments.length?(h=g,p):h},function(g){return d=g,i=g(e),s=g(t),a=g(n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,p}}function CY(){var e=Hc(YE()(gi));return e.copy=function(){return Vc(e,CY())},hl.apply(e,arguments)}function kY(){var e=sI(YE()).domain([.1,1,10]);return e.copy=function(){return Vc(e,kY()).base(e.base())},hl.apply(e,arguments)}function AY(){var e=aI(YE());return e.copy=function(){return Vc(e,AY()).constant(e.constant())},hl.apply(e,arguments)}function vI(){var e=oI(YE());return e.copy=function(){return Vc(e,vI()).exponent(e.exponent())},hl.apply(e,arguments)}function Uje(){return vI.apply(null,arguments).exponent(.5)}const cm=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:JP,scaleDiverging:CY,scaleDivergingLog:kY,scaleDivergingPow:vI,scaleDivergingSqrt:Uje,scaleDivergingSymlog:AY,scaleIdentity:oY,scaleImplicit:pk,scaleLinear:aY,scaleLog:cY,scaleOrdinal:QP,scalePoint:kke,scalePow:lI,scaleQuantile:fY,scaleQuantize:hY,scaleRadial:dY,scaleSequential:SY,scaleSequentialLog:_Y,scaleSequentialPow:yI,scaleSequentialQuantile:TY,scaleSequentialSqrt:$je,scaleSequentialSymlog:NY,scaleSqrt:wAe,scaleSymlog:uY,scaleThreshold:pY,scaleTime:Fje,scaleUtc:Bje,tickFormat:sY},Symbol.toStringTag,{value:"Module"}));var Wc=e=>e.chartData,xI=se([Wc],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),J0=(e,t,n,r)=>r?xI(e):Wc(e);function Th(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(zr(t)&&zr(n))return!0}return!1}function pF(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function zje(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,s;if(zr(n))i=n;else if(typeof n=="function")return;if(zr(r))s=r;else if(typeof r=="function")return;var a=[i,s];if(Th(a))return a}}function Hje(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(Th(r))return pF(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,a,o;if(i==="auto")t!=null&&(a=Math.min(...t));else if(Ie(i))a=i;else if(typeof i=="function")try{t!=null&&(a=i(t==null?void 0:t[0]))}catch{}else if(typeof i=="string"&&u5.test(i)){var l=u5.exec(i);if(l==null||t==null)a=void 0;else{var u=+l[1];a=t[0]-u}}else a=t==null?void 0:t[0];if(s==="auto")t!=null&&(o=Math.max(...t));else if(Ie(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&d5.test(s)){var d=d5.exec(s);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t==null?void 0:t[1];var h=[a,o];if(Th(h))return t==null?h:pF(h,t,n)}}}var rp=1e9,Vje={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},wI,pn=!0,Xs="[DecimalError] ",Ku=Xs+"Invalid argument: ",bI=Xs+"Exponent out of range: ",ip=Math.floor,gu=Math.pow,Wje=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Zi,hr=1e7,sn=7,jY=9007199254740991,Xb=ip(jY/sn),Le={};Le.absoluteValue=Le.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Le.comparedTo=Le.cmp=function(e){var t,n,r,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Le.decimalPlaces=Le.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*sn;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Le.dividedBy=Le.div=function(e){return zo(this,new this.constructor(e))};Le.dividedToIntegerBy=Le.idiv=function(e){var t=this,n=t.constructor;return zt(zo(t,new n(e),0,1),n.precision)};Le.equals=Le.eq=function(e){return!this.cmp(e)};Le.exponent=function(){return Xn(this)};Le.greaterThan=Le.gt=function(e){return this.cmp(e)>0};Le.greaterThanOrEqualTo=Le.gte=function(e){return this.cmp(e)>=0};Le.isInteger=Le.isint=function(){return this.e>this.d.length-2};Le.isNegative=Le.isneg=function(){return this.s<0};Le.isPositive=Le.ispos=function(){return this.s>0};Le.isZero=function(){return this.s===0};Le.lessThan=Le.lt=function(e){return this.cmp(e)<0};Le.lessThanOrEqualTo=Le.lte=function(e){return this.cmp(e)<1};Le.logarithm=Le.log=function(e){var t,n=this,r=n.constructor,i=r.precision,s=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Zi))throw Error(Xs+"NaN");if(n.s<1)throw Error(Xs+(n.s?"NaN":"-Infinity"));return n.eq(Zi)?new r(0):(pn=!1,t=zo(Hg(n,s),Hg(e,s),s),pn=!0,zt(t,i))};Le.minus=Le.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?IY(t,e):OY(t,(e.s=-e.s,e))};Le.modulo=Le.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Xs+"NaN");return n.s?(pn=!1,t=zo(n,e,0,1).times(e),pn=!0,n.minus(t)):zt(new r(n),i)};Le.naturalExponential=Le.exp=function(){return PY(this)};Le.naturalLogarithm=Le.ln=function(){return Hg(this)};Le.negated=Le.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Le.plus=Le.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?OY(t,e):IY(t,(e.s=-e.s,e))};Le.precision=Le.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ku+e);if(t=Xn(i)+1,r=i.d.length-1,n=r*sn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Le.squareRoot=Le.sqrt=function(){var e,t,n,r,i,s,a,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(Xs+"NaN")}for(e=Xn(o),pn=!1,i=Math.sqrt(+o),i==0||i==1/0?(t=Ga(o.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=ip((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new l(t)):r=new l(i.toString()),n=l.precision,i=a=n+3;;)if(s=r,r=s.plus(zo(o,s,a+2)).times(.5),Ga(s.d).slice(0,a)===(t=Ga(r.d)).slice(0,a)){if(t=t.slice(a-3,a+1),i==a&&t=="4999"){if(zt(s,n+1,0),s.times(s).eq(o)){r=s;break}}else if(t!="9999")break;a+=4}return pn=!0,zt(r,n)};Le.times=Le.mul=function(e){var t,n,r,i,s,a,o,l,u,d=this,f=d.constructor,h=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,n=d.e+e.e,l=h.length,u=p.length,l<u&&(s=h,h=p,p=s,a=l,l=u,u=a),s=[],a=l+u,r=a;r--;)s.push(0);for(r=u;--r>=0;){for(t=0,i=l+r;i>r;)o=s[i]+p[r]*h[i-r-1]+t,s[i--]=o%hr|0,t=o/hr|0;s[i]=(s[i]+t)%hr|0}for(;!s[--a];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,pn?zt(e,f.precision):e};Le.toDecimalPlaces=Le.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(lo(e,0,rp),t===void 0?t=r.rounding:lo(t,0,8),zt(n,e+Xn(n)+1,t))};Le.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=fd(r,!0):(lo(e,0,rp),t===void 0?t=i.rounding:lo(t,0,8),r=zt(new i(r),e+1,t),n=fd(r,!0,e+1)),n};Le.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?fd(i):(lo(e,0,rp),t===void 0?t=s.rounding:lo(t,0,8),r=zt(new s(i),e+Xn(i)+1,t),n=fd(r.abs(),!1,e+Xn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Le.toInteger=Le.toint=function(){var e=this,t=e.constructor;return zt(new t(e),Xn(e)+1,t.rounding)};Le.toNumber=function(){return+this};Le.toPower=Le.pow=function(e){var t,n,r,i,s,a,o=this,l=o.constructor,u=12,d=+(e=new l(e));if(!e.s)return new l(Zi);if(o=new l(o),!o.s){if(e.s<1)throw Error(Xs+"Infinity");return o}if(o.eq(Zi))return o;if(r=l.precision,e.eq(Zi))return zt(o,r);if(t=e.e,n=e.d.length-1,a=t>=n,s=o.s,a){if((n=d<0?-d:d)<=jY){for(i=new l(Zi),t=Math.ceil(r/sn+4),pn=!1;n%2&&(i=i.times(o),gF(i.d,t)),n=ip(n/2),n!==0;)o=o.times(o),gF(o.d,t);return pn=!0,e.s<0?new l(Zi).div(i):zt(i,r)}}else if(s<0)throw Error(Xs+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,o.s=1,pn=!1,i=e.times(Hg(o,r+u)),pn=!0,i=PY(i),i.s=s,i};Le.toPrecision=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?(n=Xn(i),r=fd(i,n<=s.toExpNeg||n>=s.toExpPos)):(lo(e,1,rp),t===void 0?t=s.rounding:lo(t,0,8),i=zt(new s(i),e,t),n=Xn(i),r=fd(i,e<=n||n<=s.toExpNeg,e)),r};Le.toSignificantDigits=Le.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(lo(e,1,rp),t===void 0?t=r.rounding:lo(t,0,8)),zt(new r(n),e,t)};Le.toString=Le.valueOf=Le.val=Le.toJSON=Le[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Xn(e),n=e.constructor;return fd(e,t<=n.toExpNeg||t>=n.toExpPos)};function OY(e,t){var n,r,i,s,a,o,l,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),pn?zt(t,f):t;if(l=e.d,u=t.d,a=e.e,i=t.e,l=l.slice(),s=a-i,s){for(s<0?(r=l,s=-s,o=u.length):(r=u,i=a,o=l.length),a=Math.ceil(f/sn),o=a>o?a+1:o+1,s>o&&(s=o,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(o=l.length,s=u.length,o-s<0&&(s=o,r=u,u=l,l=r),n=0;s;)n=(l[--s]=l[s]+u[s]+n)/hr|0,l[s]%=hr;for(n&&(l.unshift(n),++i),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=i,pn?zt(t,f):t}function lo(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Ku+e)}function Ga(e){var t,n,r,i=e.length-1,s="",a=e[0];if(i>0){for(s+=a,t=1;t<i;t++)r=e[t]+"",n=sn-r.length,n&&(s+=Ml(n)),s+=r;a=e[t],r=a+"",n=sn-r.length,n&&(s+=Ml(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var zo=function(){function e(r,i){var s,a=0,o=r.length;for(r=r.slice();o--;)s=r[o]*i+a,r[o]=s%hr|0,a=s/hr|0;return a&&r.unshift(a),r}function t(r,i,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(r[o]!=i[o]){l=r[o]>i[o]?1:-1;break}return l}function n(r,i,s){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*hr+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,a){var o,l,u,d,f,h,p,m,g,v,y,b,x,S,E,_,T,C,k=r.constructor,A=r.s==i.s?1:-1,j=r.d,D=i.d;if(!r.s)return new k(r);if(!i.s)throw Error(Xs+"Division by zero");for(l=r.e-i.e,T=D.length,E=j.length,p=new k(A),m=p.d=[],u=0;D[u]==(j[u]||0);)++u;if(D[u]>(j[u]||0)&&--l,s==null?b=s=k.precision:a?b=s+(Xn(r)-Xn(i))+1:b=s,b<0)return new k(0);if(b=b/sn+2|0,u=0,T==1)for(d=0,D=D[0],b++;(u<E||d)&&b--;u++)x=d*hr+(j[u]||0),m[u]=x/D|0,d=x%D|0;else{for(d=hr/(D[0]+1)|0,d>1&&(D=e(D,d),j=e(j,d),T=D.length,E=j.length),S=T,g=j.slice(0,T),v=g.length;v<T;)g[v++]=0;C=D.slice(),C.unshift(0),_=D[0],D[1]>=hr/2&&++_;do d=0,o=t(D,g,T,v),o<0?(y=g[0],T!=v&&(y=y*hr+(g[1]||0)),d=y/_|0,d>1?(d>=hr&&(d=hr-1),f=e(D,d),h=f.length,v=g.length,o=t(f,g,h,v),o==1&&(d--,n(f,T<h?C:D,h))):(d==0&&(o=d=1),f=D.slice()),h=f.length,h<v&&f.unshift(0),n(g,f,v),o==-1&&(v=g.length,o=t(D,g,T,v),o<1&&(d++,n(g,T<v?C:D,v))),v=g.length):o===0&&(d++,g=[0]),m[u++]=d,o&&g[0]?g[v++]=j[S]||0:(g=[j[S]],v=1);while((S++<E||g[0]!==void 0)&&b--)}return m[0]||m.shift(),p.e=l,zt(p,a?s+Xn(p)+1:s)}}();function PY(e,t){var n,r,i,s,a,o,l=0,u=0,d=e.constructor,f=d.precision;if(Xn(e)>16)throw Error(bI+Xn(e));if(!e.s)return new d(Zi);for(pn=!1,o=f,a=new d(.03125);e.abs().gte(.1);)e=e.times(a),u+=5;for(r=Math.log(gu(2,u))/Math.LN10*2+5|0,o+=r,n=i=s=new d(Zi),d.precision=o;;){if(i=zt(i.times(e),o),n=n.times(++l),a=s.plus(zo(i,n,o)),Ga(a.d).slice(0,o)===Ga(s.d).slice(0,o)){for(;u--;)s=zt(s.times(s),o);return d.precision=f,t==null?(pn=!0,zt(s,f)):s}s=a}}function Xn(e){for(var t=e.e*sn,n=e.d[0];n>=10;n/=10)t++;return t}function PN(e,t,n){if(t>e.LN10.sd())throw pn=!0,n&&(e.precision=n),Error(Xs+"LN10 precision limit exceeded");return zt(new e(e.LN10),t)}function Ml(e){for(var t="";e--;)t+="0";return t}function Hg(e,t){var n,r,i,s,a,o,l,u,d,f=1,h=10,p=e,m=p.d,g=p.constructor,v=g.precision;if(p.s<1)throw Error(Xs+(p.s?"NaN":"-Infinity"));if(p.eq(Zi))return new g(0);if(t==null?(pn=!1,u=v):u=t,p.eq(10))return t==null&&(pn=!0),PN(g,u);if(u+=h,g.precision=u,n=Ga(m),r=n.charAt(0),s=Xn(p),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(e),n=Ga(p.d),r=n.charAt(0),f++;s=Xn(p),r>1?(p=new g("0."+n),s++):p=new g(r+"."+n.slice(1))}else return l=PN(g,u+2,v).times(s+""),p=Hg(new g(r+"."+n.slice(1)),u-h).plus(l),g.precision=v,t==null?(pn=!0,zt(p,v)):p;for(o=a=p=zo(p.minus(Zi),p.plus(Zi),u),d=zt(p.times(p),u),i=3;;){if(a=zt(a.times(d),u),l=o.plus(zo(a,new g(i),u)),Ga(l.d).slice(0,u)===Ga(o.d).slice(0,u))return o=o.times(2),s!==0&&(o=o.plus(PN(g,u+2,v).times(s+""))),o=zo(o,new g(f),u),g.precision=v,t==null?(pn=!0,zt(o,v)):o;o=l,i+=2}}function mF(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=ip(n/sn),e.d=[],r=(n+1)%sn,n<0&&(r+=sn),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=sn;r<i;)e.d.push(+t.slice(r,r+=sn));t=t.slice(r),r=sn-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),pn&&(e.e>Xb||e.e<-Xb))throw Error(bI+n)}else e.s=0,e.e=0,e.d=[0];return e}function zt(e,t,n){var r,i,s,a,o,l,u,d,f=e.d;for(a=1,s=f[0];s>=10;s/=10)a++;if(r=t-a,r<0)r+=sn,i=t,u=f[d=0];else{if(d=Math.ceil((r+1)/sn),s=f.length,d>=s)return e;for(u=s=f[d],a=1;s>=10;s/=10)a++;r%=sn,i=r-sn+a}if(n!==void 0&&(s=gu(10,a-i-1),o=u/s%10|0,l=t<0||f[d+1]!==void 0||u%s,l=n<4?(o||l)&&(n==0||n==(e.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?i>0?u/gu(10,a-i):0:f[d-1])%10&1||n==(e.s<0?8:7))),t<1||!f[0])return l?(s=Xn(e),f.length=1,t=t-s-1,f[0]=gu(10,(sn-t%sn)%sn),e.e=ip(-t/sn)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(r==0?(f.length=d,s=1,d--):(f.length=d+1,s=gu(10,sn-r),f[d]=i>0?(u/gu(10,a-i)%gu(10,i)|0)*s:0),l)for(;;)if(d==0){(f[0]+=s)==hr&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=hr)break;f[d--]=0,s=1}for(r=f.length;f[--r]===0;)f.pop();if(pn&&(e.e>Xb||e.e<-Xb))throw Error(bI+Xn(e));return e}function IY(e,t){var n,r,i,s,a,o,l,u,d,f,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),pn?zt(t,p):t;if(l=e.d,f=t.d,r=t.e,u=e.e,l=l.slice(),a=u-r,a){for(d=a<0,d?(n=l,a=-a,o=f.length):(n=f,r=u,o=l.length),i=Math.max(Math.ceil(p/sn),o)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=l.length,o=f.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(l[i]!=f[i]){d=l[i]<f[i];break}a=0}for(d&&(n=l,l=f,f=n,t.s=-t.s),o=l.length,i=f.length-o;i>0;--i)l[o++]=0;for(i=f.length;i>a;){if(l[--i]<f[i]){for(s=i;s&&l[--s]===0;)l[s]=hr-1;--l[s],l[i]+=hr}l[i]-=f[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(t.d=l,t.e=r,pn?zt(t,p):t):new h(0)}function fd(e,t,n){var r,i=Xn(e),s=Ga(e.d),a=s.length;return t?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+Ml(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Ml(-i-1)+s,n&&(r=n-a)>0&&(s+=Ml(r))):i>=a?(s+=Ml(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+Ml(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=Ml(r))),e.s<0?"-"+s:s}function gF(e,t){if(e.length>t)return e.length=t,!0}function DY(e){var t,n,r;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Ku+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return mF(a,s.toString())}else if(typeof s!="string")throw Error(Ku+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,Wje.test(s))mF(a,s);else throw Error(Ku+s)}if(i.prototype=Le,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=DY,i.config=i.set=qje,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function qje(e){if(!e||typeof e!="object")throw Error(Xs+"Object expected");var t,n,r,i=["precision",1,rp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(ip(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(Ku+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Ku+n+": "+r);return this}var wI=DY(Vje);Zi=new wI(1);const It=wI;var Kje=e=>e,MY={},RY=e=>e===MY,yF=e=>function t(){return arguments.length===0||arguments.length===1&&RY(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},LY=(e,t)=>e===1?t:yF(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(a=>a!==MY).length;return s>=e?t(...r):LY(e-s,yF(function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var u=r.map(d=>RY(d)?o.shift():d);return t(...u,...o)}))}),XE=e=>LY(e.length,e),vk=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},Gje=XE((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),Yje=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return Kje;var i=n.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce((o,l)=>l(o),s(...arguments))}},xk=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),FY=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t&&i.every((a,o)=>{var l;return a===((l=t)===null||l===void 0?void 0:l[o])})||(t=i,n=e(...i)),n}};function BY(e){var t;return e===0?t=1:t=Math.floor(new It(e).abs().log(10).toNumber())+1,t}function $Y(e,t,n){for(var r=new It(e),i=0,s=[];r.lt(t)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}XE((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});XE((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});XE((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var UY=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},zY=(e,t,n)=>{if(e.lte(0))return new It(0);var r=BY(e.toNumber()),i=new It(10).pow(r),s=e.div(i),a=r!==1?.05:.1,o=new It(Math.ceil(s.div(a).toNumber())).add(n).mul(a),l=o.mul(i);return t?new It(l.toNumber()):new It(Math.ceil(l.toNumber()))},Xje=(e,t,n)=>{var r=new It(1),i=new It(e);if(!i.isint()&&n){var s=Math.abs(e);s<1?(r=new It(10).pow(BY(e)-1),i=new It(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new It(Math.floor(e)))}else e===0?i=new It(Math.floor((t-1)/2)):n||(i=new It(Math.floor(e)));var a=Math.floor((t-1)/2),o=Yje(Gje(l=>i.add(new It(l-a).mul(r)).toNumber()),vk);return o(0,t)},HY=function(t,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new It(0),tickMin:new It(0),tickMax:new It(0)};var a=zY(new It(n).sub(t).div(r-1),i,s),o;t<=0&&n>=0?o=new It(0):(o=new It(t).add(n).div(2),o=o.sub(new It(o).mod(a)));var l=Math.ceil(o.sub(t).div(a).toNumber()),u=Math.ceil(new It(n).sub(o).div(a).toNumber()),d=l+u+1;return d>r?HY(t,n,r,i,s+1):(d<r&&(u=n>0?u+(r-d):u,l=n>0?l:l+(r-d)),{step:a,tickMin:o.sub(new It(l).mul(a)),tickMax:o.add(new It(u).mul(a))})};function Qje(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[a,o]=UY([t,n]);if(a===-1/0||o===1/0){var l=o===1/0?[a,...vk(0,r-1).map(()=>1/0)]:[...vk(0,r-1).map(()=>-1/0),o];return t>n?xk(l):l}if(a===o)return Xje(a,r,i);var{step:u,tickMin:d,tickMax:f}=HY(a,o,s,i,0),h=$Y(d,f.add(new It(.1).mul(u)),u);return t>n?xk(h):h}function Jje(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,a]=UY([n,r]);if(s===-1/0||a===1/0)return[n,r];if(s===a)return[s];var o=Math.max(t,2),l=zY(new It(a).sub(s).div(o-1),i,0),u=[...$Y(new It(s),new It(a),l),a];return i===!1&&(u=u.map(d=>Math.round(d))),n>r?xk(u):u}var Zje=FY(Qje),eOe=FY(Jje),VY=e=>e.rootProps.maxBarSize,tOe=e=>e.rootProps.barGap,WY=e=>e.rootProps.barCategoryGap,nOe=e=>e.rootProps.barSize,Z0=e=>e.rootProps.stackOffset,EI=e=>e.options.chartName,SI=e=>e.rootProps.syncId,qY=e=>e.rootProps.syncMethod,_I=e=>e.options.eventEmitter,Po={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Xi={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},QE=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},rOe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Po.angleAxisId,includeHidden:!1,name:void 0,reversed:Po.reversed,scale:Po.scale,tick:Po.tick,tickCount:void 0,ticks:void 0,type:Po.type,unit:void 0},iOe={allowDataOverflow:Xi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Xi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Xi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Xi.scale,tick:Xi.tick,tickCount:Xi.tickCount,ticks:void 0,type:Xi.type,unit:void 0},sOe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Po.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Po.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Po.scale,tick:Po.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},aOe={allowDataOverflow:Xi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Xi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Xi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Xi.scale,tick:Xi.tick,tickCount:Xi.tickCount,ticks:void 0,type:"category",unit:void 0},NI=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?sOe:rOe,TI=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?aOe:iOe,JE=e=>e.polarOptions,CI=se([dl,fl,or],vG),KY=se([JE,CI],(e,t)=>{if(e!=null)return vi(e.innerRadius,t,0)}),GY=se([JE,CI],(e,t)=>{if(e!=null)return vi(e.outerRadius,t,t*.8)}),oOe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},YY=se([JE],oOe);se([NI,YY],QE);var XY=se([CI,KY,GY],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});se([TI,XY],QE);var QY=se([mt,JE,KY,GY,dl,fl],(e,t,n,r,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:a,cy:o,startAngle:l,endAngle:u}=t;return{cx:vi(a,i,i/2),cy:vi(o,s,s/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:u,clockWise:!1}}}),gn=(e,t)=>t,ey=(e,t,n)=>n;function ZE(e){return e==null?void 0:e.id}var cr=e=>{var t=mt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},sp=e=>e.tooltip.settings.axisId,ur=e=>{var t=cr(e),n=sp(e);return ty(e,t,n)};function JY(e,t,n){var{chartData:r=[]}=t,i=n==null?void 0:n.dataKey,s=new Map;return e.forEach(a=>{var o,l=(o=a.data)!==null&&o!==void 0?o:r;if(!(l==null||l.length===0)){var u=ZE(a);l.forEach((d,f)=>{var h=i==null?f:String(Dt(d,i,null)),p=Dt(d,a.dataKey,0),m;s.has(h)?m=s.get(h):m={},Object.assign(m,{[u]:p}),s.set(h,m)})}}),Array.from(s.values())}function eS(e){return e.stackId!=null&&e.dataKey!=null}function vF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Qb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vF(Object(n),!0).forEach(function(r){lOe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lOe(e,t,n){return(t=cOe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cOe(e){var t=uOe(e,"string");return typeof t=="symbol"?t:t+""}function uOe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bk=[0,"auto"],Ki={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},pl=(e,t)=>{var n=e.cartesianAxis.xAxis[t];return n??Ki},Gi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:bk,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:UE},qc=(e,t)=>{var n=e.cartesianAxis.yAxis[t];return n??Gi},dOe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},kI=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??dOe},Hn=(e,t,n)=>{switch(t){case"xAxis":return pl(e,n);case"yAxis":return qc(e,n);case"zAxis":return kI(e,n);case"angleAxis":return NI(e,n);case"radiusAxis":return TI(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},fOe=(e,t,n)=>{switch(t){case"xAxis":return pl(e,n);case"yAxis":return qc(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},ty=(e,t,n)=>{switch(t){case"xAxis":return pl(e,n);case"yAxis":return qc(e,n);case"angleAxis":return NI(e,n);case"radiusAxis":return TI(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},ZY=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function AI(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var ny=e=>e.graphicalItems.cartesianItems,hOe=se([gn,ey],AI),jI=(e,t,n)=>e.filter(n).filter(r=>(t==null?void 0:t.includeHidden)===!0?!0:!r.hide),ry=se([ny,Hn,hOe],jI),eX=se([ry],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(eS)),tX=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),nX=se([ry],tX),OI=e=>e.map(t=>t.data).filter(Boolean).flat(1),pOe=se([ry],OI),PI=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},II=se([pOe,J0],PI),DI=(e,t,n)=>(t==null?void 0:t.dataKey)!=null?e.map(r=>({value:Dt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:Dt(i,r)}))):e.map(r=>({value:r})),tS=se([II,Hn,ry],DI);function rX(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Dd(e){return e.filter(t=>oo(t)||t instanceof Date).map(Number).filter(t=>zi(t)===!1)}function mOe(e,t,n){return!n||typeof t!="number"||zi(t)?[]:n.length?Dd(n.flatMap(r=>{var i=Dt(e,r.dataKey),s,a;if(Array.isArray(i)?[s,a]=i:s=a=i,!(!zr(s)||!zr(a)))return[t-s,t+a]})):[]}var gOe=se([eX,J0,ur],JY),iX=(e,t,n)=>{var r={},i=t.reduce((s,a)=>(a.stackId==null||(s[a.stackId]==null&&(s[a.stackId]=[]),s[a.stackId].push(a)),s),r);return Object.fromEntries(Object.entries(i).map(s=>{var[a,o]=s,l=o.map(ZE);return[a,{stackedData:kCe(e,l,n),graphicalItems:o}]}))},Vg=se([gOe,eX,Z0],iX),sX=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var s=PCe(e,r,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},yOe=se([Vg,Wc,gn],sX),aX=(e,t,n,r,i)=>n.length>0?e.flatMap(s=>n.flatMap(a=>{var o,l,u=(o=r[a.id])===null||o===void 0?void 0:o.filter(f=>rX(i,f)),d=Dt(s,(l=t.dataKey)!==null&&l!==void 0?l:a.dataKey);return{value:d,errorDomain:mOe(s,d,u)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Dt(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),nS=e=>e.errorBars,oX=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>rX(n,r));se([nX,nS,gn],oX);var vOe=se([II,Hn,nX,nS,gn],aX);function xOe(e){var{value:t}=e;if(oo(t)||t instanceof Date)return t}var xF=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=Dd(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},bOe=(e,t,n)=>{var r=e.map(xOe).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&Qq(r))?YG(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},MI=e=>{var t;if(e==null||!("domain"in e))return bk;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=Dd(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:bk},Jb=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),a=Math.min(...s),o=Math.max(...s);return[a,o]}},lX=e=>e.referenceElements.dots,ap=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),wOe=se([lX,gn,ey],ap),cX=e=>e.referenceElements.areas,EOe=se([cX,gn,ey],ap),uX=e=>e.referenceElements.lines,SOe=se([uX,gn,ey],ap),dX=(e,t)=>{var n=Dd(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},_Oe=se(wOe,gn,dX),fX=(e,t)=>{var n=Dd(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},NOe=se([EOe,gn],fX),hX=(e,t)=>{var n=Dd(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},TOe=se(SOe,gn,hX),COe=se(_Oe,TOe,NOe,(e,t,n)=>Jb(e,n,t)),pX=se([Hn],MI),RI=(e,t,n,r,i,s,a)=>{var o=zje(t,e.allowDataOverflow);if(o!=null)return o;var l=s==="vertical"&&a==="xAxis"||s==="horizontal"&&a==="yAxis",u=l?Jb(n,i,xF(r)):Jb(i,xF(r));return Hje(t,u,e.allowDataOverflow)},kOe=se([Hn,pX,yOe,vOe,COe,mt,gn],RI),AOe=[0,1],LI=(e,t,n,r,i,s,a)=>{if(!((e==null||n==null||n.length===0)&&a===void 0)){var{dataKey:o,type:l}=e,u=go(t,s);return u&&o==null?YG(0,n.length):l==="category"?bOe(r,e,u):i==="expand"?AOe:a}},FI=se([Hn,mt,II,tS,Z0,gn,kOe],LI),mX=(e,t,n,r,i)=>{if(e!=null){var{scale:s,type:a}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":a==="category"?"band":"linear";if(typeof s=="string"){var o="scale".concat(z0(s));return o in cm?o:"point"}}},op=se([Hn,mt,ZY,EI,gn],mX);function jOe(e){if(e!=null){if(e in cm)return cm[e]();var t="scale".concat(z0(e));if(t in cm)return cm[t]()}}function BI(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=jOe(t);if(i!=null){var s=i.domain(n).range(r);return SCe(s),s}}}var $I=(e,t,n)=>{var r=MI(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Th(e))return Zje(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Th(e))return eOe(e,t.tickCount,t.allowDecimals)}},UI=se([FI,ty,op],$I),zI=(e,t,n,r)=>{if(r!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Th(t)&&Array.isArray(n)&&n.length>0){var i=t[0],s=n[0],a=t[1],o=n[n.length-1];return[Math.min(i,s),Math.max(a,o)]}return t},OOe=se([Hn,FI,UI,gn],zI),POe=se(tS,Hn,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(Dd(e.map(o=>o.value))).sort((o,l)=>o-l);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var a=r[s+1]-r[s];n=Math.min(n,a)}return n/i}}),gX=se(POe,mt,WY,or,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!zr(e))return 0;var s=t==="vertical"?r.height:r.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var a=vi(n,e*s),o=e*s/2;return o-a-(o-a)/s*a}return 0}),IOe=(e,t)=>{var n=pl(e,t);return n==null||typeof n.padding!="string"?0:gX(e,"xAxis",t,n.padding)},DOe=(e,t)=>{var n=qc(e,t);return n==null||typeof n.padding!="string"?0:gX(e,"yAxis",t,n.padding)},MOe=se(pl,IOe,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),ROe=se(qc,DOe,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),LOe=se([or,MOe,HE,zE,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),FOe=se([or,mt,ROe,HE,zE,(e,t,n)=>n],(e,t,n,r,i,s)=>{var{padding:a}=i;return s?[r.height-a.bottom,a.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),iy=(e,t,n,r)=>{var i;switch(t){case"xAxis":return LOe(e,n,r);case"yAxis":return FOe(e,n,r);case"zAxis":return(i=kI(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return YY(e);case"radiusAxis":return XY(e,n);default:return}},yX=se([Hn,iy],QE),lp=se([Hn,op,OOe,yX],BI);se([ry,nS,gn],oX);function vX(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var rS=(e,t)=>t,iS=(e,t,n)=>n,BOe=se(HP,rS,iS,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(vX)),$Oe=se(VP,rS,iS,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(vX)),xX=(e,t)=>({width:e.width,height:t.height}),UOe=(e,t)=>{var n=typeof t.width=="number"?t.width:UE;return{width:n,height:e.height}},bX=se(or,pl,xX),zOe=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},HOe=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},VOe=se(fl,or,BOe,rS,iS,(e,t,n,r,i)=>{var s={},a;return n.forEach(o=>{var l=xX(t,o);a==null&&(a=zOe(t,r,e));var u=r==="top"&&!i||r==="bottom"&&i;s[o.id]=a-Number(u)*l.height,a+=(u?-1:1)*l.height}),s}),WOe=se(dl,or,$Oe,rS,iS,(e,t,n,r,i)=>{var s={},a;return n.forEach(o=>{var l=UOe(t,o);a==null&&(a=HOe(t,r,e));var u=r==="left"&&!i||r==="right"&&i;s[o.id]=a-Number(u)*l.width,a+=(u?-1:1)*l.width}),s}),qOe=(e,t)=>{var n=or(e),r=pl(e,t);if(r!=null){var i=VOe(e,r.orientation,r.mirror),s=i[t];return s==null?{x:n.left,y:0}:{x:n.left,y:s}}},KOe=(e,t)=>{var n=or(e),r=qc(e,t);if(r!=null){var i=WOe(e,r.orientation,r.mirror),s=i[t];return s==null?{x:0,y:n.top}:{x:s,y:n.top}}},wX=se(or,qc,(e,t)=>{var n=typeof t.width=="number"?t.width:UE;return{width:n,height:e.height}}),bF=(e,t,n)=>{switch(t){case"xAxis":return bX(e,n).width;case"yAxis":return wX(e,n).height;default:return}},EX=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:a}=n,o=go(e,r),l=t.map(u=>u.value);if(a&&o&&s==="category"&&i&&Qq(l))return l}},HI=se([mt,tS,Hn,gn],EX),SX=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,a=go(e,r);if(a&&(i==="number"||s!=="auto"))return t.map(o=>o.value)}},VI=se([mt,tS,ty,gn],SX),wF=se([mt,fOe,op,lp,HI,VI,iy,UI,gn],(e,t,n,r,i,s,a,o,l)=>{if(t==null)return null;var u=go(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:s,duplicateDomain:i,isCategorical:u,niceTicks:o,range:a,realScaleType:n,scale:r}}),GOe=(e,t,n,r,i,s,a,o,l)=>{if(!(t==null||r==null)){var u=go(e,l),{type:d,ticks:f,tickCount:h}=t,p=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,m=d==="category"&&r.bandwidth?r.bandwidth()/p:0;m=l==="angleAxis"&&s!=null&&s.length>=2?xr(s[0]-s[1])*2*m:m;var g=f||i;if(g){var v=g.map((y,b)=>{var x=a?a.indexOf(y):y;return{index:b,coordinate:r(x)+m,value:y,offset:m}});return v.filter(y=>!zi(y.coordinate))}return u&&o?o.map((y,b)=>({coordinate:r(y)+m,value:y,index:b,offset:m})):r.ticks?r.ticks(h).map(y=>({coordinate:r(y)+m,value:y,offset:m})):r.domain().map((y,b)=>({coordinate:r(y)+m,value:a?a[y]:y,index:b,offset:m}))}},_X=se([mt,ty,op,lp,UI,iy,HI,VI,gn],GOe),YOe=(e,t,n,r,i,s,a)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var o=go(e,a),{tickCount:l}=t,u=0;return u=a==="angleAxis"&&(r==null?void 0:r.length)>=2?xr(r[0]-r[1])*2*u:u,o&&s?s.map((d,f)=>({coordinate:n(d)+u,value:d,index:f,offset:u})):n.ticks?n.ticks(l).map(d=>({coordinate:n(d)+u,value:d,offset:u})):n.domain().map((d,f)=>({coordinate:n(d)+u,value:i?i[d]:d,index:f,offset:u}))}},co=se([mt,ty,lp,iy,HI,VI,gn],YOe),uo=se(Hn,lp,(e,t)=>{if(!(e==null||t==null))return Qb(Qb({},e),{},{scale:t})}),XOe=se([Hn,op,FI,yX],BI);se((e,t,n)=>kI(e,n),XOe,(e,t)=>{if(!(e==null||t==null))return Qb(Qb({},e),{},{scale:t})});var QOe=se([mt,HP,VP],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),NX=e=>e.options.defaultTooltipEventType,TX=e=>e.options.validateTooltipEventTypes;function CX(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function WI(e,t){var n=NX(e),r=TX(e);return CX(t,n,r)}function JOe(e){return He(t=>WI(t,e))}var kX=(e,t)=>{var n,r=Number(t);if(!(zi(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},ZOe=e=>e.tooltip.settings,zl={active:!1,index:null,dataKey:void 0,coordinate:void 0},ePe={itemInteraction:{click:zl,hover:zl},axisInteraction:{click:zl,hover:zl},keyboardInteraction:zl,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},AX=vs({name:"tooltip",initialState:ePe,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=Uo(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:tPe,removeTooltipEntrySettings:nPe,setTooltipSettingsState:rPe,setActiveMouseOverItemIndex:jX,mouseLeaveItem:iPe,mouseLeaveChart:OX,setActiveClickItemIndex:sPe,setMouseOverAxisIndex:PX,setMouseClickAxisIndex:aPe,setSyncInteraction:wk,setKeyboardInteraction:Ek}=AX.actions,oPe=AX.reducer;function EF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EF(Object(n),!0).forEach(function(r){lPe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lPe(e,t,n){return(t=cPe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cPe(e){var t=uPe(e,"string");return typeof t=="symbol"?t:t+""}function uPe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dPe(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function fPe(e){return e.index!=null}var IX=(e,t,n,r)=>{if(t==null)return zl;var i=dPe(e,t,n);if(i==null)return zl;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(fPe(i)){if(s)return fv(fv({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return fv(fv({},zl),{},{coordinate:i.coordinate})},qI=(e,t)=>{var n=e==null?void 0:e.index;if(n==null)return null;var r=Number(n);if(!zr(r))return n;var i=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(i,Math.min(r,s)))},DX=(e,t,n,r,i,s,a,o)=>{if(!(s==null||o==null)){var l=a[0],u=l==null?void 0:o(l.positions,s);if(u!=null)return u;var d=i==null?void 0:i[Number(s)];if(d)switch(n){case"horizontal":return{x:d.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:d.coordinate}}}},MX=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var a;return((a=s.settings)===null||a===void 0?void 0:a.dataKey)===i})},sy=e=>e.options.tooltipPayloadSearcher,cp=e=>e.tooltip;function SF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _F(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SF(Object(n),!0).forEach(function(r){hPe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hPe(e,t,n){return(t=pPe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pPe(e){var t=mPe(e,"string");return typeof t=="symbol"?t:t+""}function mPe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gPe(e,t){return e??t}var RX=(e,t,n,r,i,s,a)=>{if(!(t==null||s==null)){var{chartData:o,computedData:l,dataStartIndex:u,dataEndIndex:d}=n,f=[];return e.reduce((h,p)=>{var m,{dataDefinedOnItem:g,settings:v}=p,y=gPe(g,o),b=Array.isArray(y)?xG(y,u,d):y,x=(m=v==null?void 0:v.dataKey)!==null&&m!==void 0?m:r==null?void 0:r.dataKey,S=v==null?void 0:v.nameKey,E;if(r!=null&&r.dataKey&&Array.isArray(b)&&!Array.isArray(b[0])&&a==="axis"?E=Jq(b,r.dataKey,i):E=s(b,t,l,S),Array.isArray(E))E.forEach(T=>{var C=_F(_F({},v),{},{name:T.name,unit:T.unit,color:void 0,fill:void 0});h.push(f5({tooltipEntrySettings:C,dataKey:T.dataKey,payload:T.payload,value:Dt(T.payload,T.dataKey),name:T.name}))});else{var _;h.push(f5({tooltipEntrySettings:v,dataKey:x,payload:E,value:Dt(E,x),name:(_=Dt(E,S))!==null&&_!==void 0?_:v==null?void 0:v.name}))}return h},f)}},KI=se([ur,mt,ZY,EI,cr],mX),yPe=se([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),vPe=se([cr,sp],AI),ay=se([yPe,ur,vPe],jI),xPe=se([ay],e=>e.filter(eS)),bPe=se([ay],OI),up=se([bPe,Wc],PI),wPe=se([xPe,Wc,ur],JY),GI=se([up,ur,ay],DI),EPe=se([ur],MI),SPe=se([ay],e=>e.filter(eS)),_Pe=se([wPe,SPe,Z0],iX),NPe=se([_Pe,Wc,cr],sX),TPe=se([ay],tX),CPe=se([up,ur,TPe,nS,cr],aX),kPe=se([lX,cr,sp],ap),APe=se([kPe,cr],dX),jPe=se([cX,cr,sp],ap),OPe=se([jPe,cr],fX),PPe=se([uX,cr,sp],ap),IPe=se([PPe,cr],hX),DPe=se([APe,IPe,OPe],Jb),MPe=se([ur,EPe,NPe,CPe,DPe,mt,cr],RI),LX=se([ur,mt,up,GI,Z0,cr,MPe],LI),RPe=se([LX,ur,KI],$I),LPe=se([ur,LX,RPe,cr],zI),FX=e=>{var t=cr(e),n=sp(e),r=!1;return iy(e,t,n,r)},BX=se([ur,FX],QE),$X=se([ur,KI,LPe,BX],BI),FPe=se([mt,GI,ur,cr],EX),BPe=se([mt,GI,ur,cr],SX),$Pe=(e,t,n,r,i,s,a,o)=>{if(t){var{type:l}=t,u=go(e,o);if(r){var d=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,f=l==="category"&&r.bandwidth?r.bandwidth()/d:0;return f=o==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?xr(i[0]-i[1])*2*f:f,u&&a?a.map((h,p)=>({coordinate:r(h)+f,value:h,index:p,offset:f})):r.domain().map((h,p)=>({coordinate:r(h)+f,value:s?s[h]:h,index:p,offset:f}))}}},ml=se([mt,ur,KI,$X,FX,FPe,BPe,cr],$Pe),YI=se([NX,TX,ZOe],(e,t,n)=>CX(n.shared,e,t)),UX=e=>e.tooltip.settings.trigger,XI=e=>e.tooltip.settings.defaultIndex,sS=se([cp,YI,UX,XI],IX),Cc=se([sS,up],qI),zX=se([ml,Cc],kX),HX=se([sS],e=>{if(e)return e.dataKey}),VX=se([cp,YI,UX,XI],MX),UPe=se([dl,fl,mt,or,ml,XI,VX,sy],DX),zPe=se([sS,UPe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),HPe=se([sS],e=>e.active),VPe=se([VX,Cc,Wc,ur,zX,sy,YI],RX),WPe=se([VPe],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function NF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function TF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NF(Object(n),!0).forEach(function(r){qPe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qPe(e,t,n){return(t=KPe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KPe(e){var t=GPe(e,"string");return typeof t=="symbol"?t:t+""}function GPe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YPe=()=>He(ur),XPe=()=>{var e=YPe(),t=He(ml),n=He($X);return dd(TF(TF({},e),{},{scale:n}),t)},WX=()=>He(EI),QI=(e,t)=>t,qX=(e,t,n)=>n,JI=(e,t,n,r)=>r,QPe=se(ml,e=>DE(e,t=>t.coordinate)),ZI=se([cp,QI,qX,JI],IX),KX=se([ZI,up],qI),JPe=(e,t,n)=>{if(t!=null){var r=cp(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},GX=se([cp,QI,qX,JI],MX),Zb=se([dl,fl,mt,or,ml,JI,GX,sy],DX),ZPe=se([ZI,Zb],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),YX=se(ml,KX,kX),eIe=se([GX,KX,Wc,ur,YX,sy,QI],RX),tIe=se([ZI],e=>({isActive:e.active,activeIndex:e.index})),nIe=(e,t,n,r,i,s,a,o)=>{if(!(!e||!t||!r||!i||!s)){var l=ICe(e.chartX,e.chartY,t,n,o);if(l){var u=MCe(l,t),d=wCe(u,a,s,r,i),f=DCe(t,s,d,l);return{activeIndex:String(d),activeCoordinate:f}}}};function Sk(){return Sk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sk.apply(null,arguments)}function CF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function hv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CF(Object(n),!0).forEach(function(r){rIe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rIe(e,t,n){return(t=iIe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iIe(e){var t=sIe(e,"string");return typeof t=="symbol"?t:t+""}function sIe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aIe(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:s,layout:a,cursor:o,tooltipEventType:l,chartName:u}=e,d=t,f=n,h=r;if(!o||!d||u!=="ScatterChart"&&l!=="axis")return null;var p,m;if(u==="ScatterChart")p=d,m=P2e;else if(u==="BarChart")p=I2e(a,d,i,s),m=zG;else if(a==="radial"){var{cx:g,cy:v,radius:y,startAngle:b,endAngle:x}=HG(d);p={cx:g,cy:v,startAngle:b,endAngle:x,innerRadius:y,outerRadius:y},m=WG}else p={points:fke(a,d,i)},m=Wf;var S=typeof o=="object"&&"className"in o?o.className:void 0,E=hv(hv(hv(hv({stroke:"#ccc",pointerEvents:"none"},i),p),Jt(o,!1)),{},{payload:f,payloadIndex:h,className:gt("recharts-tooltip-cursor",S)});return w.isValidElement(o)?w.cloneElement(o,E):w.createElement(m,E)}function oIe(e){var t=XPe(),n=CG(),r=q0(),i=WX();return w.createElement(aIe,Sk({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var XX=w.createContext(null),lIe=()=>w.useContext(XX),QX={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function s(l,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,f||l,h),m=n?n+u:u;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,m=new Array(p);h<p;h++)m[h]=f[h].fn;return m},o.prototype.listenerCount=function(u){var d=n?n+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,p,m){var g=n?n+u:u;if(!this._events[g])return!1;var v=this._events[g],y=arguments.length,b,x;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,p),!0;case 6:return v.fn.call(v.context,d,f,h,p,m),!0}for(x=1,b=new Array(y-1);x<y;x++)b[x-1]=arguments[x];v.fn.apply(v.context,b)}else{var S=v.length,E;for(x=0;x<S;x++)switch(v[x].once&&this.removeListener(u,v[x].fn,void 0,!0),y){case 1:v[x].fn.call(v[x].context);break;case 2:v[x].fn.call(v[x].context,d);break;case 3:v[x].fn.call(v[x].context,d,f);break;case 4:v[x].fn.call(v[x].context,d,f,h);break;default:if(!b)for(E=1,b=new Array(y-1);E<y;E++)b[E-1]=arguments[E];v[x].fn.apply(v[x].context,b)}}return!0},o.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var p=n?n+u:u;if(!this._events[p])return this;if(!d)return a(this,p),this;var m=this._events[p];if(m.fn)m.fn===d&&(!h||m.once)&&(!f||m.context===f)&&a(this,p);else{for(var g=0,v=[],y=m.length;g<y;g++)(m[g].fn!==d||h&&!m[g].once||f&&m[g].context!==f)&&v.push(m[g]);v.length?this._events[p]=v.length===1?v[0]:v:a(this,p)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&a(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o})(QX);var cIe=QX.exports;const uIe=ii(cIe);var Wg=new uIe,_k="recharts.syncEvent.tooltip",kF="recharts.syncEvent.brush";function aS(e,t){if(t){var n=Number.parseInt(t,10);if(!zi(n))return e==null?void 0:e[n]}}var dIe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},JX=vs({name:"options",initialState:dIe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),fIe=JX.reducer,{createEventEmitter:hIe}=JX.actions;function pIe(e){return e.tooltip.syncInteraction}var mIe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},ZX=vs({name:"chartData",initialState:mIe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:AF,setDataStartEndIndexes:gIe,setComputedData:flt}=ZX.actions,yIe=ZX.reducer,eQ=()=>{};function vIe(){var e=He(SI),t=He(_I),n=En(),r=He(qY),i=He(ml),s=q0(),a=WP(),o=He(l=>l.rootProps.className);w.useEffect(()=>{if(e==null)return eQ;var l=(u,d,f)=>{if(t!==f&&e===u){if(r==="index"){n(d);return}if(i!=null){var h;if(typeof r=="function"){var p={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},m=r(i,p);h=i[m]}else r==="value"&&(h=i.find(_=>String(_.value)===d.payload.label));var{coordinate:g}=d.payload;if(h==null||d.payload.active===!1||g==null||a==null){n(wk({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:v,y}=g,b=Math.min(v,a.x+a.width),x=Math.min(y,a.y+a.height),S={x:s==="horizontal"?h.coordinate:b,y:s==="horizontal"?x:h.coordinate},E=wk({active:d.payload.active,coordinate:S,dataKey:d.payload.dataKey,index:String(h.index),label:d.payload.label});n(E)}}};return Wg.on(_k,l),()=>{Wg.off(_k,l)}},[o,n,t,e,r,i,s,a])}function xIe(){var e=He(SI),t=He(_I),n=En();w.useEffect(()=>{if(e==null)return eQ;var r=(i,s,a)=>{t!==a&&e===i&&n(gIe(s))};return Wg.on(kF,r),()=>{Wg.off(kF,r)}},[n,t,e])}function bIe(){var e=En();w.useEffect(()=>{e(hIe())},[e]),vIe(),xIe()}function wIe(e,t,n,r,i,s){var a=He(h=>JPe(h,e,t)),o=He(_I),l=He(SI),u=He(qY),d=He(pIe),f=d==null?void 0:d.active;w.useEffect(()=>{if(!f&&l!=null&&o!=null){var h=wk({active:s,coordinate:n,dataKey:a,index:i,label:typeof r=="number"?String(r):r});Wg.emit(_k,l,h,o)}},[f,n,a,i,r,o,l,u,s])}function jF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function OF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jF(Object(n),!0).forEach(function(r){EIe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function EIe(e,t,n){return(t=SIe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SIe(e){var t=_Ie(e,"string");return typeof t=="symbol"?t:t+""}function _Ie(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NIe(e){return e.dataKey}function TIe(e,t){return w.isValidElement(e)?w.cloneElement(e,t):typeof e=="function"?w.createElement(e,t):w.createElement(u2e,t)}var PF=[],CIe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!zc.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Bs(e){var t=_i(e,CIe),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:s,content:a,filterNull:o,isAnimationActive:l,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:p,wrapperStyle:m,cursor:g,shared:v,trigger:y,defaultIndex:b,portal:x,axisId:S}=t,E=En(),_=typeof b=="number"?String(b):b;w.useEffect(()=>{E(rPe({shared:v,trigger:y,axisId:S,active:n,defaultIndex:_}))},[E,v,y,S,n,_]);var T=WP(),C=OG(),k=JOe(v),{activeIndex:A,isActive:j}=He(je=>tIe(je,k,y,_)),D=He(je=>eIe(je,k,y,_)),P=He(je=>YX(je,k,y,_)),M=He(je=>ZPe(je,k,y,_)),L=D,O=lIe(),B=n??j,[R,F]=KK([L,B]),I=k==="axis"?P:void 0;wIe(k,y,M,I,A,B);var X=x??O;if(X==null)return null;var G=L??PF;B||(G=PF),o&&G.length&&(G=DK(L.filter(je=>je.value!=null&&(je.hide!==!0||t.includeHidden)),d,NIe));var $=G.length>0,be=w.createElement(y2e,{allowEscapeViewBox:r,animationDuration:i,animationEasing:s,isAnimationActive:l,active:B,coordinate:M,hasPayload:$,offset:u,position:f,reverseDirection:h,useTranslate3d:p,viewBox:T,wrapperStyle:m,lastBoundingBox:R,innerRef:F,hasPortalFromProps:!!x},TIe(a,OF(OF({},t),{},{payload:G,label:I,active:B,coordinate:M,accessibilityLayer:C})));return w.createElement(w.Fragment,null,cl.createPortal(be,X),B&&w.createElement(oIe,{cursor:g,tooltipEventType:k,coordinate:M,payload:L,index:A}))}var tQ={},nQ={},rQ={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:s}={}){let a,o=null;const l=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{o!==null&&(n.apply(a,o),a=void 0,o=null)},f=()=>{u&&d(),g()};let h=null;const p=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},r)},m=()=>{h!==null&&(clearTimeout(h),h=null)},g=()=>{m(),a=void 0,o=null},v=()=>{d()},y=function(...b){if(i!=null&&i.aborted)return;a=this,o=b;const x=h==null;p(),l&&x&&d()};return y.schedule=p,y.cancel=g,y.flush=v,i==null||i.addEventListener("abort",g,{once:!0}),y}e.debounce=t})(rQ);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rQ;function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:a=!1,trailing:o=!0,maxWait:l}=s,u=Array(2);a&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...g){d=r.apply(this,g),f=null},i,{edges:u}),p=function(...g){return l!=null&&(f===null&&(f=Date.now()),Date.now()-f>=l)?(d=r.apply(this,g),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,g),d)},m=()=>(h.flush(),d);return p.cancel=h.cancel,p.flush=m,p}e.debounce=n})(nQ);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nQ;function n(r,i=0,s={}){const{leading:a=!0,trailing:o=!0}=s;return t.debounce(r,i,{leading:a,maxWait:i,trailing:o})}e.throttle=n})(tQ);var kIe=tQ.throttle;const AIe=ii(kIe);var Rm=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function IF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function IN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IF(Object(n),!0).forEach(function(r){jIe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jIe(e,t,n){return(t=OIe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OIe(e){var t=PIe(e,"string");return typeof t=="symbol"?t:t+""}function PIe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mi=w.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:s="100%",minWidth:a=0,minHeight:o,maxHeight:l,children:u,debounce:d=0,id:f,className:h,onResize:p,style:m={}}=e,g=w.useRef(null),v=w.useRef();v.current=p,w.useImperativeHandle(t,()=>g.current);var[y,b]=w.useState({containerWidth:r.width,containerHeight:r.height}),x=w.useCallback((E,_)=>{b(T=>{var C=Math.round(E),k=Math.round(_);return T.containerWidth===C&&T.containerHeight===k?T:{containerWidth:C,containerHeight:k}})},[]);w.useEffect(()=>{var E=k=>{var A,{width:j,height:D}=k[0].contentRect;x(j,D),(A=v.current)===null||A===void 0||A.call(v,j,D)};d>0&&(E=AIe(E,d,{trailing:!0,leading:!1}));var _=new ResizeObserver(E),{width:T,height:C}=g.current.getBoundingClientRect();return x(T,C),_.observe(g.current),()=>{_.disconnect()}},[x,d]);var S=w.useMemo(()=>{var{containerWidth:E,containerHeight:_}=y;if(E<0||_<0)return null;Rm(Tu(i)||Tu(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,s),Rm(!n||n>0,"The aspect(%s) must be greater than zero.",n);var T=Tu(i)?E:i,C=Tu(s)?_:s;return n&&n>0&&(T?C=T/n:C&&(T=C*n),l&&C>l&&(C=l)),Rm(T>0||C>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,C,i,s,a,o,n),w.Children.map(u,k=>w.cloneElement(k,{width:T,height:C,style:IN({width:T,height:C},k.props.style)}))},[n,u,s,l,o,a,y,i]);return w.createElement("div",{id:f?"".concat(f):void 0,className:gt("recharts-responsive-container",h),style:IN(IN({},m),{},{width:i,height:s,minWidth:a,minHeight:o,maxHeight:l}),ref:g},w.createElement("div",{style:{width:0,height:0,overflow:"visible"}},S))}),il=e=>null;il.displayName="Cell";function IIe(e,t,n){return(t=DIe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DIe(e){var t=MIe(e,"string");return typeof t=="symbol"?t:t+""}function MIe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class RIe{constructor(t){IIe(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function DF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function LIe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DF(Object(n),!0).forEach(function(r){FIe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function FIe(e,t,n){return(t=BIe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BIe(e){var t=$Ie(e,"string");return typeof t=="symbol"?t:t+""}function $Ie(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UIe={cacheSize:2e3,enableCache:!0},iQ=LIe({},UIe),MF=new RIe(iQ.cacheSize),zIe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},RF="recharts_measurement_span";function HIe(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",a=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(a,"|").concat(o)}var LF=(e,t)=>{try{var n=document.getElementById(RF);n||(n=document.createElement("span"),n.setAttribute("id",RF),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,zIe,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Lm=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||zc.isSsr)return{width:0,height:0};if(!iQ.enableCache)return LF(t,n);var r=HIe(t,n),i=MF.get(r);if(i)return i;var s=LF(t,n);return MF.set(r,s),s},FF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,BF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,VIe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,WIe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,sQ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},qIe=Object.keys(sQ),If="NaN";function KIe(e,t){return e*sQ[t]}class ki{static parse(t){var n,[,r,i]=(n=WIe.exec(t))!==null&&n!==void 0?n:[];return new ki(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,zi(t)&&(this.unit=""),n!==""&&!VIe.test(n)&&(this.num=NaN,this.unit=""),qIe.includes(n)&&(this.num=KIe(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new ki(NaN,""):new ki(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ki(NaN,""):new ki(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ki(NaN,""):new ki(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ki(NaN,""):new ki(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return zi(this.num)}}function aQ(e){if(e.includes(If))return If;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,s]=(n=FF.exec(t))!==null&&n!==void 0?n:[],a=ki.parse(r??""),o=ki.parse(s??""),l=i==="*"?a.multiply(o):a.divide(o);if(l.isNaN())return If;t=t.replace(FF,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=BF.exec(t))!==null&&u!==void 0?u:[],p=ki.parse(d??""),m=ki.parse(h??""),g=f==="+"?p.add(m):p.subtract(m);if(g.isNaN())return If;t=t.replace(BF,g.toString())}return t}var $F=/\(([^()]*)\)/;function GIe(e){for(var t=e,n;(n=$F.exec(t))!=null;){var[,r]=n;t=t.replace($F,aQ(r))}return t}function YIe(e){var t=e.replace(/\s+/g,"");return t=GIe(t),t=aQ(t),t}function XIe(e){try{return YIe(e)}catch{return If}}function DN(e){var t=XIe(e.slice(5,-1));return t===If?"":t}var QIe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],JIe=["dx","dy","angle","className","breakAll"];function Nk(){return Nk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nk.apply(null,arguments)}function UF(e,t){if(e==null)return{};var n,r,i=ZIe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ZIe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var oQ=/[ \f\n\r\t\v\u2028\u2029]+/,lQ=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];Zt(t)||(n?i=t.toString().split(""):i=t.toString().split(oQ));var s=i.map(o=>({word:o,width:Lm(o,r).width})),a=n?0:Lm("",r).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}},eDe=(e,t,n,r,i)=>{var{maxLines:s,children:a,style:o,breakAll:l}=e,u=Ie(s),d=a,f=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j.reduce((D,P)=>{var{word:M,width:L}=P,O=D[D.length-1];if(O&&(r==null||i||O.width+L+n<Number(r)))O.words.push(M),O.width+=L+n;else{var B={words:[M],width:L};D.push(B)}return D},[])},h=f(t),p=A=>A.reduce((j,D)=>j.width>D.width?j:D);if(!u||i)return h;var m=h.length>s||p(h).width>Number(r);if(!m)return h;for(var g="",v=A=>{var j=d.slice(0,A),D=lQ({breakAll:l,style:o,children:j+g}).wordsWithComputedWidth,P=f(D),M=P.length>s||p(P).width>Number(r);return[M,P]},y=0,b=d.length-1,x=0,S;y<=b&&x<=d.length-1;){var E=Math.floor((y+b)/2),_=E-1,[T,C]=v(_),[k]=v(E);if(!T&&!k&&(y=E+1),T&&k&&(b=E-1),!T&&k){S=C;break}x++}return S||h},zF=e=>{var t=Zt(e)?[]:e.toString().split(oQ);return[{words:t}]},tDe=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:a}=e;if((t||n)&&!zc.isSsr){var o,l,u=lQ({breakAll:s,children:r,style:i});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,l=f}else return zF(r);return eDe({breakAll:s,children:r,maxLines:a,style:i},o,l,t,n)}return zF(r)},HF="#808080",oS=w.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:a=!1,textAnchor:o="start",verticalAnchor:l="end",fill:u=HF}=e,d=UF(e,QIe),f=w.useMemo(()=>tDe({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:a,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,a,d.style,d.width]),{dx:h,dy:p,angle:m,className:g,breakAll:v}=d,y=UF(d,JIe);if(!oo(n)||!oo(r))return null;var b=n+(Ie(h)?h:0),x=r+(Ie(p)?p:0),S;switch(l){case"start":S=DN("calc(".concat(s,")"));break;case"middle":S=DN("calc(".concat((f.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:S=DN("calc(".concat(f.length-1," * -").concat(i,")"));break}var E=[];if(a){var _=f[0].width,{width:T}=d;E.push("scale(".concat(Ie(T)?T/_:1,")"))}return m&&E.push("rotate(".concat(m,", ").concat(b,", ").concat(x,")")),E.length&&(y.transform=E.join(" ")),w.createElement("text",Nk({},Jt(y,!0),{ref:t,x:b,y:x,className:gt("recharts-text",g),textAnchor:o,fill:u.includes("url")?HF:u}),f.map((C,k)=>{var A=C.words.join(v?"":" ");return w.createElement("tspan",{x:b,dy:k===0?S:i,key:"".concat(A,"-").concat(k)},A)}))});oS.displayName="Text";var nDe=["offset"],rDe=["labelRef"];function VF(e,t){if(e==null)return{};var n,r,i=iDe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function iDe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function WF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WF(Object(n),!0).forEach(function(r){sDe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sDe(e,t,n){return(t=aDe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aDe(e){var t=oDe(e,"string");return typeof t=="symbol"?t:t+""}function oDe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Io(){return Io=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Io.apply(null,arguments)}var lDe=e=>{var{value:t,formatter:n}=e,r=Zt(e.children)?t:e.children;return typeof n=="function"?n(r):r},eD=e=>e!=null&&typeof e=="function",cDe=(e,t)=>{var n=xr(t-e),r=Math.min(Math.abs(t-e),360);return n*r},uDe=(e,t,n,r)=>{var{position:i,offset:s,className:a}=e,{cx:o,cy:l,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:p}=r,m=(u+d)/2,g=cDe(f,h),v=g>=0?1:-1,y,b;i==="insideStart"?(y=f+v*s,b=p):i==="insideEnd"?(y=h-v*s,b=!p):i==="end"&&(y=h+v*s,b=p),b=g<=0?b:!b;var x=Gn(o,l,m,y),S=Gn(o,l,m,y+(b?1:-1)*359),E="M".concat(x.x,",").concat(x.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(b?0:1,`,
    `).concat(S.x,",").concat(S.y),_=Zt(e.id)?Mg("recharts-radial-line-"):e.id;return w.createElement("text",Io({},n,{dominantBaseline:"central",className:gt("recharts-radial-bar-label",a)}),w.createElement("defs",null,w.createElement("path",{id:_,d:E})),w.createElement("textPath",{xlinkHref:"#".concat(_)},t))},dDe=(e,t,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:a,startAngle:o,endAngle:l}=e,u=(o+l)/2;if(n==="outside"){var{x:d,y:f}=Gn(r,i,a+t,u);return{x:d,y:f,textAnchor:d>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var h=(s+a)/2,{x:p,y:m}=Gn(r,i,h,u);return{x:p,y:m,textAnchor:"middle",verticalAnchor:"middle"}},fDe=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,{x:s,y:a,width:o,height:l}=t,u=l>=0?1:-1,d=u*r,f=u>0?"end":"start",h=u>0?"start":"end",p=o>=0?1:-1,m=p*r,g=p>0?"end":"start",v=p>0?"start":"end";if(i==="top"){var y={x:s+o/2,y:a-u*r,textAnchor:"middle",verticalAnchor:f};return Tn(Tn({},y),n?{height:Math.max(a-n.y,0),width:o}:{})}if(i==="bottom"){var b={x:s+o/2,y:a+l+d,textAnchor:"middle",verticalAnchor:h};return Tn(Tn({},b),n?{height:Math.max(n.y+n.height-(a+l),0),width:o}:{})}if(i==="left"){var x={x:s-m,y:a+l/2,textAnchor:g,verticalAnchor:"middle"};return Tn(Tn({},x),n?{width:Math.max(x.x-n.x,0),height:l}:{})}if(i==="right"){var S={x:s+o+m,y:a+l/2,textAnchor:v,verticalAnchor:"middle"};return Tn(Tn({},S),n?{width:Math.max(n.x+n.width-S.x,0),height:l}:{})}var E=n?{width:o,height:l}:{};return i==="insideLeft"?Tn({x:s+m,y:a+l/2,textAnchor:v,verticalAnchor:"middle"},E):i==="insideRight"?Tn({x:s+o-m,y:a+l/2,textAnchor:g,verticalAnchor:"middle"},E):i==="insideTop"?Tn({x:s+o/2,y:a+d,textAnchor:"middle",verticalAnchor:h},E):i==="insideBottom"?Tn({x:s+o/2,y:a+l-d,textAnchor:"middle",verticalAnchor:f},E):i==="insideTopLeft"?Tn({x:s+m,y:a+d,textAnchor:v,verticalAnchor:h},E):i==="insideTopRight"?Tn({x:s+o-m,y:a+d,textAnchor:g,verticalAnchor:h},E):i==="insideBottomLeft"?Tn({x:s+m,y:a+l-d,textAnchor:v,verticalAnchor:f},E):i==="insideBottomRight"?Tn({x:s+o-m,y:a+l-d,textAnchor:g,verticalAnchor:f},E):i&&typeof i=="object"&&(Ie(i.x)||Tu(i.x))&&(Ie(i.y)||Tu(i.y))?Tn({x:s+vi(i.x,o),y:a+vi(i.y,l),textAnchor:"end",verticalAnchor:"end"},E):Tn({x:s+o/2,y:a+l/2,textAnchor:"middle",verticalAnchor:"middle"},E)},hDe=e=>"cx"in e&&Ie(e.cx);function Qi(e){var{offset:t=5}=e,n=VF(e,nDe),r=Tn({offset:t},n),{viewBox:i,position:s,value:a,children:o,content:l,className:u="",textBreakAll:d,labelRef:f}=r,h=He(QY),p=WP(),m=s==="center"?p:h??p,g=i||m;if(!g||Zt(a)&&Zt(o)&&!w.isValidElement(l)&&typeof l!="function")return null;var v=Tn(Tn({},r),{},{viewBox:g});if(w.isValidElement(l)){var{labelRef:y}=v,b=VF(v,rDe);return w.cloneElement(l,b)}var x;if(typeof l=="function"){if(x=w.createElement(l,v),w.isValidElement(x))return x}else x=lDe(r);var S=hDe(g),E=Jt(r,!0);if(S&&(s==="insideStart"||s==="insideEnd"||s==="end"))return uDe(r,x,E,g);var _=S?dDe(g,r.offset,r.position):fDe(r,g);return w.createElement(oS,Io({ref:f,className:gt("recharts-label",u)},E,_,{breakAll:d}),x)}Qi.displayName="Label";var cQ=e=>{var{cx:t,cy:n,angle:r,startAngle:i,endAngle:s,r:a,radius:o,innerRadius:l,outerRadius:u,x:d,y:f,top:h,left:p,width:m,height:g,clockWise:v,labelViewBox:y}=e;if(y)return y;if(Ie(m)&&Ie(g)){if(Ie(d)&&Ie(f))return{x:d,y:f,width:m,height:g};if(Ie(h)&&Ie(p))return{x:h,y:p,width:m,height:g}}if(Ie(d)&&Ie(f))return{x:d,y:f,width:0,height:0};if(Ie(t)&&Ie(n))return{cx:t,cy:n,startAngle:i||r||0,endAngle:s||r||0,innerRadius:l||0,outerRadius:u||o||a||0,clockWise:v};if(e.viewBox)return e.viewBox},pDe=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?w.createElement(Qi,Io({key:"label-implicit"},r)):oo(e)?w.createElement(Qi,Io({key:"label-implicit",value:e},r)):w.isValidElement(e)?e.type===Qi?w.cloneElement(e,Tn({key:"label-implicit"},r)):w.createElement(Qi,Io({key:"label-implicit",content:e},r)):eD(e)?w.createElement(Qi,Io({key:"label-implicit",content:e},r)):e&&typeof e=="object"?w.createElement(Qi,Io({},e,{key:"label-implicit"},r)):null},mDe=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var{children:i,labelRef:s}=t,a=cQ(t),o=V0(i,Qi).map((u,d)=>w.cloneElement(u,{viewBox:n||a,key:"label-".concat(d)}));if(!r)return o;var l=pDe(t.label,n||a,s);return[l,...o]};Qi.parseViewBox=cQ;Qi.renderCallByParent=mDe;var uQ={},dQ={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(dQ);var fQ={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(fQ);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dQ,n=fQ,r=AE;function i(s){if(r.isArrayLike(s))return t.last(n.toArray(s))}e.last=i})(uQ);var gDe=uQ.last;const yDe=ii(gDe);var vDe=["valueAccessor"],xDe=["data","dataKey","clockWise","id","textBreakAll"];function e1(){return e1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e1.apply(null,arguments)}function qF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function KF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qF(Object(n),!0).forEach(function(r){bDe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bDe(e,t,n){return(t=wDe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wDe(e){var t=EDe(e,"string");return typeof t=="symbol"?t:t+""}function EDe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GF(e,t){if(e==null)return{};var n,r,i=SDe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function SDe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var _De=e=>Array.isArray(e.value)?yDe(e.value):e.value;function Ho(e){var{valueAccessor:t=_De}=e,n=GF(e,vDe),{data:r,dataKey:i,clockWise:s,id:a,textBreakAll:o}=n,l=GF(n,xDe);return!r||!r.length?null:w.createElement(zn,{className:"recharts-label-list"},r.map((u,d)=>{var f=Zt(i)?t(u,d):Dt(u&&u.payload,i),h=Zt(a)?{}:{id:"".concat(a,"-").concat(d)};return w.createElement(Qi,e1({},Jt(u,!0),l,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:o,viewBox:Qi.parseViewBox(Zt(s)?u:KF(KF({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}Ho.displayName="LabelList";function NDe(e,t){return e?e===!0?w.createElement(Ho,{key:"labelList-implicit",data:t}):w.isValidElement(e)||eD(e)?w.createElement(Ho,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?w.createElement(Ho,e1({data:t},e,{key:"labelList-implicit"})):null:null}function TDe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var{children:r}=e,i=V0(r,Ho).map((a,o)=>w.cloneElement(a,{data:t,key:"labelList-".concat(o)}));if(!n)return i;var s=NDe(e.label,t);return[s,...i]}Ho.renderCallByParent=TDe;function Tk(){return Tk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tk.apply(null,arguments)}var tD=e=>{var{cx:t,cy:n,r,className:i}=e,s=gt("recharts-dot",i);return t===+t&&n===+n&&r===+r?w.createElement("circle",Tk({},Oa(e),xP(e),{className:s,cx:t,cy:n,r})):null},hQ=e=>e.graphicalItems.polarItems,CDe=se([gn,ey],AI),nD=se([hQ,Hn,CDe],jI),kDe=se([nD],OI),rD=se([kDe,xI],PI),ADe=se([rD,Hn,nD],DI),jDe=se([rD,Hn,nD],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(i=>{var s,a=Dt(r,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:a,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(r=>({value:Dt(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]}))),YF=()=>{},ODe=se([Hn,pX,YF,jDe,YF,mt,gn],RI),pQ=se([Hn,mt,rD,ADe,Z0,gn,ODe],LI),PDe=se([pQ,Hn,op],$I);se([Hn,pQ,PDe,gn],zI);var IDe={radiusAxis:{},angleAxis:{}},mQ=vs({name:"polarAxis",initialState:IDe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:hlt,removeRadiusAxis:plt,addAngleAxis:mlt,removeAngleAxis:glt}=mQ.actions,DDe=mQ.reducer;function XF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function QF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XF(Object(n),!0).forEach(function(r){MDe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function MDe(e,t,n){return(t=RDe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RDe(e){var t=LDe(e,"string");return typeof t=="symbol"?t:t+""}function LDe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FDe=(e,t)=>t,iD=se([hQ,FDe],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),BDe=[],sD=(e,t,n)=>(n==null?void 0:n.length)===0?BDe:n,gQ=se([xI,iD,sD],(e,t,n)=>{var{chartData:r}=e;if(t!=null){var i;if((t==null?void 0:t.data)!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>QF(QF({},t.presentationProps),s.props))),i!=null)return i}}),$De=se([gQ,iD,sD],(e,t,n)=>{if(!(e==null||t==null))return e.map((r,i)=>{var s,a=Dt(r,t.nameKey,t.name),o;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?o=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?o=r.fill:o=t.fill,{value:Uc(a,t.dataKey),color:o,payload:r,type:t.legendType}})}),UDe=se([gQ,iD,sD,or],(e,t,n,r)=>{if(!(t==null||e==null))return PMe({offset:r,pieSettings:t,displayedData:e,cells:n})}),yQ={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const s=n[Symbol.toStringTag];return s==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${s}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(yQ);var zDe=yQ.isPlainObject;const HDe=ii(zDe);function t1(){return t1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t1.apply(null,arguments)}var JF=(e,t,n,r,i)=>{var s=n-r,a;return a="M ".concat(e,",").concat(t),a+="L ".concat(e+n,",").concat(t),a+="L ".concat(e+n-s/2,",").concat(t+i),a+="L ".concat(e+n-s/2-r,",").concat(t+i),a+="L ".concat(e,",").concat(t," Z"),a},VDe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},WDe=e=>{var t=_i(e,VDe),n=w.useRef(),[r,i]=w.useState(-1);w.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var v=n.current.getTotalLength();v&&i(v)}catch{}},[]);var{x:s,y:a,upperWidth:o,lowerWidth:l,height:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isUpdateAnimationActive:m}=t;if(s!==+s||a!==+a||o!==+o||l!==+l||u!==+u||o===0&&l===0||u===0)return null;var g=gt("recharts-trapezoid",d);return m?w.createElement(Bb,{canBegin:r>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:a},to:{upperWidth:o,lowerWidth:l,height:u,x:s,y:a},duration:h,animationEasing:f,isActive:m},v=>{var{upperWidth:y,lowerWidth:b,height:x,x:S,y:E}=v;return w.createElement(Bb,{canBegin:r>0,from:"0px ".concat(r===-1?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,easing:f},w.createElement("path",t1({},Jt(t,!0),{className:g,d:JF(S,E,y,b,x),ref:n})))}):w.createElement("g",null,w.createElement("path",t1({},Jt(t,!0),{className:g,d:JF(s,a,o,l,u)})))},qDe=["option","shapeType","propTransformer","activeClassName","isActive"];function KDe(e,t){if(e==null)return{};var n,r,i=GDe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function GDe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function ZF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function n1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZF(Object(n),!0).forEach(function(r){YDe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function YDe(e,t,n){return(t=XDe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XDe(e){var t=QDe(e,"string");return typeof t=="symbol"?t:t+""}function QDe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JDe(e,t){return n1(n1({},t),e)}function ZDe(e,t){return e==="symbols"}function eB(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return w.createElement(zG,n);case"trapezoid":return w.createElement(WDe,n);case"sector":return w.createElement(WG,n);case"symbols":if(ZDe(t))return w.createElement(_P,n);break;default:return null}}function eMe(e){return w.isValidElement(e)?e.props:e}function vQ(e){var{option:t,shapeType:n,propTransformer:r=JDe,activeClassName:i="recharts-active-shape",isActive:s}=e,a=KDe(e,qDe),o;if(w.isValidElement(t))o=w.cloneElement(t,n1(n1({},a),eMe(t)));else if(typeof t=="function")o=t(a);else if(HDe(t)&&typeof t!="boolean"){var l=r(t,a);o=w.createElement(eB,{shapeType:n,elementProps:l})}else{var u=a;o=w.createElement(eB,{shapeType:n,elementProps:u})}return s?w.createElement(zn,{className:i},o):o}var aD=(e,t)=>{var n=En();return(r,i)=>s=>{e==null||e(r,i,s),n(jX({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},oD=e=>{var t=En();return(n,r)=>i=>{e==null||e(n,r,i),t(iPe())}},lD=(e,t)=>{var n=En();return(r,i)=>s=>{e==null||e(r,i,s),n(sPe({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function lS(e){var{fn:t,args:n}=e,r=En(),i=ai();return w.useEffect(()=>{if(!i){var s=t(n);return r(tPe(s)),()=>{r(nPe(s))}}},[t,n,r,i]),null}var xQ=()=>{};function cD(e){var{legendPayload:t}=e,n=En(),r=ai();return w.useEffect(()=>r?xQ:(n(AG(t)),()=>{n(jG(t))}),[n,r,t]),null}function tMe(e){var{legendPayload:t}=e,n=En(),r=He(mt);return w.useEffect(()=>r!=="centric"&&r!=="radial"?xQ:(n(AG(t)),()=>{n(jG(t))}),[n,r,t]),null}function cS(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=w.useRef(Mg(t)),r=w.useRef(e);return r.current!==e&&(n.current=Mg(t),r.current=e),n.current}var MN,nMe=()=>{var[e]=w.useState(()=>Mg("uid-"));return e},rMe=(MN=xw.useId)!==null&&MN!==void 0?MN:nMe;function iMe(e,t){var n=rMe();return t||(e?"".concat(e,"-").concat(n):n)}var sMe=w.createContext(void 0),uS=e=>{var{id:t,type:n,children:r}=e,i=iMe("recharts-".concat(n),t);return w.createElement(sMe.Provider,{value:i},r(i))},aMe={cartesianItems:[],polarItems:[]},bQ=vs({name:"graphicalItems",initialState:aMe,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=Uo(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=Uo(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=Uo(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:oMe,replaceCartesianGraphicalItem:lMe,removeCartesianGraphicalItem:cMe,addPolarGraphicalItem:uMe,removePolarGraphicalItem:dMe}=bQ.actions,fMe=bQ.reducer;function uD(e){var t=En(),n=w.useRef(null);return w.useEffect(()=>{n.current===null?t(oMe(e)):n.current!==e&&t(lMe({prev:n.current,next:e})),n.current=e},[t,e]),w.useEffect(()=>()=>{n.current&&(t(cMe(n.current)),n.current=null)},[t]),null}function hMe(e){var t=En();return w.useEffect(()=>(t(uMe(e)),()=>{t(dMe(e))}),[t,e]),null}function pMe(){}var mMe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},tB={t:0},RN={t:1};function dS(e){var t=_i(e,mMe),{isActive:n,canBegin:r,duration:i,easing:s,begin:a,onAnimationEnd:o,onAnimationStart:l,children:u}=t,d=UG("JavascriptAnimate",t.animationManager),[f,h]=w.useState(n?tB:RN),p=w.useRef(null);return w.useEffect(()=>{n||h(RN)},[n]),w.useEffect(()=>{if(!n||!r)return pMe;var m=$G(tB,RN,FG(s),i,h,d.getTimeoutController()),g=()=>{p.current=m()};return d.start([l,a,g,i,o]),()=>{d.stop(),p.current&&p.current(),o()}},[n,r,i,s,a,l,o,d]),u(f.t)}var gMe=["onMouseEnter","onClick","onMouseLeave"],yMe=["id"],vMe=["id"];function dD(e,t){if(e==null)return{};var n,r,i=xMe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function xMe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function nB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nB(Object(n),!0).forEach(function(r){bMe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bMe(e,t,n){return(t=wMe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wMe(e){var t=EMe(e,"string");return typeof t=="symbol"?t:t+""}function EMe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sl(){return sl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sl.apply(null,arguments)}function SMe(e){var t=w.useMemo(()=>V0(e.children,il),[e.children]),n=He(r=>$De(r,e.id,t));return n==null?null:w.createElement(tMe,{legendPayload:n})}function _Me(e){var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:a,name:o,hide:l,tooltipType:u}=e;return{dataDefinedOnItem:r==null?void 0:r.map(d=>d.tooltipPayload),positions:r==null?void 0:r.map(d=>d.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:a,dataKey:t,nameKey:n,name:Uc(o,t),hide:l,type:u,color:a,unit:""}}}var NMe=(e,t)=>e>t?"start":e<t?"end":"middle",TMe=(e,t,n)=>typeof t=="function"?t(e):vi(t,n,n*.8),CMe=(e,t,n)=>{var{top:r,left:i,width:s,height:a}=t,o=vG(s,a),l=i+vi(e.cx,s,s/2),u=r+vi(e.cy,a,a/2),d=vi(e.innerRadius,o,0),f=TMe(n,e.outerRadius,o),h=e.maxRadius||Math.sqrt(s*s+a*a)/2;return{cx:l,cy:u,innerRadius:d,outerRadius:f,maxRadius:h}},kMe=(e,t)=>{var n=xr(t-e),r=Math.min(Math.abs(t-e),360);return n*r},AMe=(e,t)=>{if(w.isValidElement(e))return w.cloneElement(e,t);if(typeof e=="function")return e(t);var n=gt("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return w.createElement(Wf,sl({},t,{type:"linear",className:n}))},jMe=(e,t,n)=>{if(w.isValidElement(e))return w.cloneElement(e,t);var r=n;if(typeof e=="function"&&(r=e(t),w.isValidElement(r)))return r;var i=gt("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return w.createElement(oS,sl({},t,{alignmentBaseline:"middle",className:i}),r)};function OMe(e){var{sectors:t,props:n,showLabels:r}=e,{label:i,labelLine:s,dataKey:a}=n;if(!r||!i||!t)return null;var o=Oa(n),l=Jt(i,!1),u=Jt(s,!1),d=typeof i=="object"&&"offsetRadius"in i&&i.offsetRadius||20,f=t.map((h,p)=>{var m=(h.startAngle+h.endAngle)/2,g=Gn(h.cx,h.cy,h.outerRadius+d,m),v=An(An(An(An({},o),h),{},{stroke:"none"},l),{},{index:p,textAnchor:NMe(g.x,h.cx)},g),y=An(An(An(An({},o),h),{},{fill:"none",stroke:h.fill},u),{},{index:p,points:[Gn(h.cx,h.cy,h.outerRadius,m),g],key:"line"});return w.createElement(zn,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(p)},s&&AMe(s,y),jMe(i,v,Dt(h,a)))});return w.createElement(zn,{className:"recharts-pie-labels"},f)}function wQ(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:i,showLabels:s}=e,a=He(Cc),{onMouseEnter:o,onClick:l,onMouseLeave:u}=i,d=dD(i,gMe),f=aD(o,i.dataKey),h=oD(u),p=lD(l,i.dataKey);return t==null?null:w.createElement(w.Fragment,null,t.map((m,g)=>{if((m==null?void 0:m.startAngle)===0&&(m==null?void 0:m.endAngle)===0&&t.length!==1)return null;var v=n&&String(g)===a,y=a?r:null,b=v?n:y,x=An(An({},m),{},{stroke:m.stroke,tabIndex:-1,[_G]:g,[NG]:i.dataKey});return w.createElement(zn,sl({tabIndex:-1,className:"recharts-pie-sector"},H0(d,m,g),{onMouseEnter:f(m,g),onMouseLeave:h(m,g),onClick:p(m,g),key:"sector-".concat(m==null?void 0:m.startAngle,"-").concat(m==null?void 0:m.endAngle,"-").concat(m.midAngle,"-").concat(g)}),w.createElement(vQ,sl({option:b,isActive:v,shapeType:"sector"},x)))}),w.createElement(OMe,{sectors:t,props:i,showLabels:s}))}function PMe(e){var t,{pieSettings:n,displayedData:r,cells:i,offset:s}=e,{cornerRadius:a,startAngle:o,endAngle:l,dataKey:u,nameKey:d,tooltipType:f}=n,h=Math.abs(n.minAngle),p=kMe(o,l),m=Math.abs(p),g=r.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,v=r.filter(_=>Dt(_,u,0)!==0).length,y=(m>=360?v:v-1)*g,b=m-v*h-y,x=r.reduce((_,T)=>{var C=Dt(T,u,0);return _+(Ie(C)?C:0)},0),S;if(x>0){var E;S=r.map((_,T)=>{var C=Dt(_,u,0),k=Dt(_,d,T),A=CMe(n,s,_),j=(Ie(C)?C:0)/x,D,P=An(An({},_),i&&i[T]&&i[T].props);T?D=E.endAngle+xr(p)*g*(C!==0?1:0):D=o;var M=D+xr(p)*((C!==0?h:0)+j*b),L=(D+M)/2,O=(A.innerRadius+A.outerRadius)/2,B=[{name:k,value:C,payload:P,dataKey:u,type:f}],R=Gn(A.cx,A.cy,O,L);return E=An(An(An(An({},n.presentationProps),{},{percent:j,cornerRadius:a,name:k,tooltipPayload:B,midAngle:L,middleRadius:O,tooltipPosition:R},P),A),{},{value:Dt(_,u),startAngle:D,endAngle:M,payload:P,paddingAngle:xr(p)*g}),E})}return S}function IMe(e){var{props:t,previousSectorsRef:n}=e,{sectors:r,isAnimationActive:i,animationBegin:s,animationDuration:a,animationEasing:o,activeShape:l,inactiveShape:u,onAnimationStart:d,onAnimationEnd:f}=t,h=cS(t,"recharts-pie-"),p=n.current,[m,g]=w.useState(!0),v=w.useCallback(()=>{typeof f=="function"&&f(),g(!1)},[f]),y=w.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return w.createElement(dS,{begin:s,duration:a,isActive:i,easing:o,onAnimationStart:y,onAnimationEnd:v,key:h},b=>{var x=[],S=r&&r[0],E=S.startAngle;return r.forEach((_,T)=>{var C=p&&p[T],k=T>0?Tc(_,"paddingAngle",0):0;if(C){var A=P6(C.endAngle-C.startAngle,_.endAngle-_.startAngle),j=An(An({},_),{},{startAngle:E+k,endAngle:E+A(b)+k});x.push(j),E=j.endAngle}else{var{endAngle:D,startAngle:P}=_,M=P6(0,D-P),L=M(b),O=An(An({},_),{},{startAngle:E+k,endAngle:E+L+k});x.push(O),E=O.endAngle}}),n.current=x,w.createElement(zn,null,w.createElement(wQ,{sectors:x,activeShape:l,inactiveShape:u,allOtherPieProps:t,showLabels:!m}))})}function DMe(e){var{sectors:t,isAnimationActive:n,activeShape:r,inactiveShape:i}=e,s=w.useRef(null),a=s.current;return n&&t&&t.length&&(!a||a!==t)?w.createElement(IMe,{props:e,previousSectorsRef:s}):w.createElement(wQ,{sectors:t,activeShape:r,inactiveShape:i,allOtherPieProps:e,showLabels:!0})}function MMe(e){var{hide:t,className:n,rootTabIndex:r}=e,i=gt("recharts-pie",n);return t?null:w.createElement(zn,{tabIndex:r,className:i},w.createElement(DMe,e))}var RMe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!zc.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function LMe(e){var{id:t}=e,n=dD(e,yMe),r=w.useMemo(()=>V0(e.children,il),[e.children]),i=He(s=>UDe(s,t,r));return w.createElement(w.Fragment,null,w.createElement(lS,{fn:_Me,args:An(An({},e),{},{sectors:i})}),w.createElement(MMe,sl({},n,{sectors:i})))}function Ch(e){var t=_i(e,RMe),{id:n}=t,r=dD(t,vMe),i=Oa(r);return w.createElement(uS,{id:n,type:"pie"},s=>w.createElement(w.Fragment,null,w.createElement(hMe,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i}),w.createElement(SMe,sl({},r,{id:s})),w.createElement(LMe,sl({},r,{id:s})),r.children))}Ch.displayName="Pie";var FMe=se([or],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),BMe=se([FMe,dl,fl],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),fS=()=>He(BMe),$Me=()=>He(WPe);function rB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function iB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rB(Object(n),!0).forEach(function(r){UMe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function UMe(e,t,n){return(t=zMe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zMe(e){var t=HMe(e,"string");return typeof t=="symbol"?t:t+""}function HMe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VMe=e=>{var{point:t,childIndex:n,mainColor:r,activeDot:i,dataKey:s}=e;if(i===!1||t.x==null||t.y==null)return null;var a=iB(iB({index:n,dataKey:s,cx:t.x,cy:t.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Jt(i,!1)),xP(i)),o;return w.isValidElement(i)?o=w.cloneElement(i,a):typeof i=="function"?o=i(a):o=w.createElement(tD,a),w.createElement(zn,{className:"recharts-active-dot"},o)};function Ck(e){var{points:t,mainColor:n,activeDot:r,itemDataKey:i}=e,s=He(Cc),a=$Me();if(t==null||a==null)return null;var o=t.find(l=>a.includes(l.payload));return Zt(o)?null:VMe({point:o,childIndex:Number(s),mainColor:n,dataKey:i,activeDot:r})}var WMe=["x","y"];function kk(){return kk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kk.apply(null,arguments)}function sB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sB(Object(n),!0).forEach(function(r){qMe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qMe(e,t,n){return(t=KMe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KMe(e){var t=GMe(e,"string");return typeof t=="symbol"?t:t+""}function GMe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YMe(e,t){if(e==null)return{};var n,r,i=XMe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function XMe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function QMe(e,t){var{x:n,y:r}=e,i=YMe(e,WMe),s="".concat(n),a=parseInt(s,10),o="".concat(r),l=parseInt(o,10),u="".concat(t.height||i.height),d=parseInt(u,10),f="".concat(t.width||i.width),h=parseInt(f,10);return Vp(Vp(Vp(Vp(Vp({},t),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function EQ(e){return w.createElement(vQ,kk({shapeType:"rectangle",propTransformer:QMe,activeClassName:"recharts-active-bar"},e))}var JMe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Ie(t))return t;var s=Ie(r)||Zt(r);return s?t(r,i):(s||hV(),n)}},ZMe={},SQ=vs({name:"errorBars",initialState:ZMe,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:ylt,removeErrorBar:vlt}=SQ.actions,e3e=SQ.reducer,t3e=["children"];function n3e(e,t){if(e==null)return{};var n,r,i=r3e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function r3e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var i3e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},s3e=w.createContext(i3e);function _Q(e){var{children:t}=e,n=n3e(e,t3e);return w.createElement(s3e.Provider,{value:n},t)}function hS(e,t){var n,r,i=He(u=>pl(u,e)),s=He(u=>qc(u,t)),a=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Ki.allowDataOverflow,o=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Gi.allowDataOverflow,l=a||o;return{needClip:l,needClipX:a,needClipY:o}}function fD(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=fS(),{needClipX:s,needClipY:a,needClip:o}=hS(t,n);if(!o)return null;var{x:l,y:u,width:d,height:f}=i;return w.createElement("clipPath",{id:"clipPath-".concat(r)},w.createElement("rect",{x:s?l:l-d/2,y:a?u:u-f/2,width:s?d:d*2,height:a?f:f*2}))}var a3e=["onMouseEnter","onMouseLeave","onClick"],o3e=["value","background","tooltipPosition"],l3e=["id"],c3e=["onMouseEnter","onClick","onMouseLeave"];function kh(){return kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kh.apply(null,arguments)}function aB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Gr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aB(Object(n),!0).forEach(function(r){u3e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function u3e(e,t,n){return(t=d3e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d3e(e){var t=f3e(e,"string");return typeof t=="symbol"?t:t+""}function f3e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function r1(e,t){if(e==null)return{};var n,r,i=h3e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function h3e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var p3e=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:r,value:Uc(n,t),payload:e}]};function m3e(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:s,hide:a,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:Uc(s,t),hide:a,type:e.tooltipType,color:e.fill,unit:o}}}function g3e(e){var t=He(Cc),{data:n,dataKey:r,background:i,allOtherBarProps:s}=e,{onMouseEnter:a,onMouseLeave:o,onClick:l}=s,u=r1(s,a3e),d=aD(a,r),f=oD(o),h=lD(l,r);if(!i||n==null)return null;var p=Jt(i,!1);return w.createElement(w.Fragment,null,n.map((m,g)=>{var{value:v,background:y,tooltipPosition:b}=m,x=r1(m,o3e);if(!y)return null;var S=d(m,g),E=f(m,g),_=h(m,g),T=Gr(Gr(Gr(Gr(Gr({option:i,isActive:String(g)===t},x),{},{fill:"#eee"},y),p),H0(u,m,g)),{},{onMouseEnter:S,onMouseLeave:E,onClick:_,dataKey:r,index:g,className:"recharts-bar-background-rectangle"});return w.createElement(EQ,kh({key:"background-bar-".concat(g)},T))}))}function NQ(e){var{data:t,props:n,showLabels:r}=e,i=Oa(n),{id:s}=i,a=r1(i,l3e),{shape:o,dataKey:l,activeBar:u}=n,d=He(Cc),f=He(HX),{onMouseEnter:h,onClick:p,onMouseLeave:m}=n,g=r1(n,c3e),v=aD(h,l),y=oD(m),b=lD(p,l);return t?w.createElement(w.Fragment,null,t.map((x,S)=>{var E=u&&String(S)===d&&(f==null||l===f),_=E?u:o,T=Gr(Gr(Gr({},a),x),{},{isActive:E,option:_,index:S,dataKey:l});return w.createElement(zn,kh({className:"recharts-bar-rectangle"},H0(g,x,S),{onMouseEnter:v(x,S),onMouseLeave:y(x,S),onClick:b(x,S),key:"rectangle-".concat(x==null?void 0:x.x,"-").concat(x==null?void 0:x.y,"-").concat(x==null?void 0:x.value,"-").concat(S)}),w.createElement(EQ,T))}),r&&Ho.renderCallByParent(n,t)):null}function y3e(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:s,animationBegin:a,animationDuration:o,animationEasing:l,onAnimationEnd:u,onAnimationStart:d}=t,f=n.current,h=cS(t,"recharts-bar-"),[p,m]=w.useState(!1),g=w.useCallback(()=>{typeof u=="function"&&u(),m(!1)},[u]),v=w.useCallback(()=>{typeof d=="function"&&d(),m(!0)},[d]);return w.createElement(dS,{begin:a,duration:o,isActive:s,easing:l,onAnimationEnd:g,onAnimationStart:v,key:h},y=>{var b=y===1?r:r==null?void 0:r.map((x,S)=>{var E=f&&f[S];if(E)return Gr(Gr({},x),{},{x:Rr(E.x,x.x,y),y:Rr(E.y,x.y,y),width:Rr(E.width,x.width,y),height:Rr(E.height,x.height,y)});if(i==="horizontal"){var _=Rr(0,x.height,y);return Gr(Gr({},x),{},{y:x.y+x.height-_,height:_})}var T=Rr(0,x.width,y);return Gr(Gr({},x),{},{width:T})});return y>0&&(n.current=b??null),b==null?null:w.createElement(zn,null,w.createElement(NQ,{props:t,data:b,showLabels:!p}))})}function v3e(e){var{data:t,isAnimationActive:n}=e,r=w.useRef(null);return n&&t&&t.length&&(r.current==null||r.current!==t)?w.createElement(y3e,{previousRectanglesRef:r,props:e}):w.createElement(NQ,{props:e,data:t,showLabels:!0})}var TQ=0,x3e=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:Dt(e,t)}};class b3e extends w.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:a,needClip:o,background:l,id:u}=this.props;if(t)return null;var d=gt("recharts-bar",i),f=u;return w.createElement(zn,{className:d,id:u},o&&w.createElement("defs",null,w.createElement(fD,{clipPathId:f,xAxisId:s,yAxisId:a})),w.createElement(zn,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},w.createElement(g3e,{data:n,dataKey:r,background:l,allOtherBarProps:this.props}),w.createElement(v3e,this.props)),this.props.children)}}var w3e={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!zc.isSsr,legendType:"rect",minPointSize:TQ,xAxisId:0,yAxisId:0};function E3e(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:a,animationBegin:o,animationDuration:l,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=hS(t,n),h=q0(),p=ai(),m=V0(e.children,il),g=He(b=>Y3e(b,t,n,p,e.id,m));if(h!=="vertical"&&h!=="horizontal")return null;var v,y=g==null?void 0:g[0];return y==null||y.height==null||y.width==null?v=0:v=h==="vertical"?y.height/2:y.width/2,w.createElement(_Q,{xAxisId:t,yAxisId:n,data:g,dataPointFormatter:x3e,errorBarOffset:v},w.createElement(b3e,kh({},e,{layout:h,needClip:f,data:g,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:a,animationBegin:o,animationDuration:l,animationEasing:u,isAnimationActive:d})))}function S3e(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:a,yAxis:o,xAxisTicks:l,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:p}=e,m=t==="horizontal"?o:a,g=d?m.scale.domain():null,v=ACe({numericAxis:m});return f.map((y,b)=>{var x,S,E,_,T,C;d?x=_Ce(d[b],g):(x=Dt(y,n),Array.isArray(x)||(x=[v,x]));var k=JMe(r,TQ)(x[1],b);if(t==="horizontal"){var A,[j,D]=[o.scale(x[0]),o.scale(x[1])];S=c5({axis:a,ticks:l,bandSize:s,offset:i.offset,entry:y,index:b}),E=(A=D??j)!==null&&A!==void 0?A:void 0,_=i.size;var P=j-D;if(T=zi(P)?0:P,C={x:S,y:h.top,width:_,height:h.height},Math.abs(k)>0&&Math.abs(T)<Math.abs(k)){var M=xr(T||k)*(Math.abs(k)-Math.abs(T));E-=M,T+=M}}else{var[L,O]=[a.scale(x[0]),a.scale(x[1])];if(S=L,E=c5({axis:o,ticks:u,bandSize:s,offset:i.offset,entry:y,index:b}),_=O-L,T=i.size,C={x:h.left,y:E,width:h.width,height:T},Math.abs(k)>0&&Math.abs(_)<Math.abs(k)){var B=xr(_||k)*(Math.abs(k)-Math.abs(_));_+=B}}if(S==null||E==null||_==null||T==null)return null;var R=Gr(Gr({},y),{},{x:S,y:E,width:_,height:T,value:d?x:x[1],payload:y,background:C,tooltipPosition:{x:S+_/2,y:E+T/2}},p&&p[b]&&p[b].props);return R}).filter(Boolean)}function Ya(e){var t=_i(e,w3e),n=ai();return w.createElement(uS,{id:t.id,type:"bar"},r=>w.createElement(w.Fragment,null,w.createElement(cD,{legendPayload:p3e(t)}),w.createElement(lS,{fn:m3e,args:t}),w.createElement(uD,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:EG(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),w.createElement(E3e,kh({},t,{id:r}))))}Ya.displayName="Bar";function oB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function pv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oB(Object(n),!0).forEach(function(r){_3e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _3e(e,t,n){return(t=N3e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N3e(e){var t=T3e(e,"string");return typeof t=="symbol"?t:t+""}function T3e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var C3e=(e,t)=>t,k3e=(e,t,n)=>n,A3e=(e,t,n,r)=>r,j3e=(e,t,n,r,i)=>i,oy=se([ny,j3e],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),O3e=se([oy],e=>e==null?void 0:e.maxBarSize),P3e=(e,t,n,r,i,s)=>s,lB=(e,t,n)=>{var r=n??e;if(!Zt(r))return vi(r,t,0)},I3e=se([mt,ny,C3e,k3e,A3e],(e,t,n,r,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),D3e=(e,t,n,r)=>{var i=mt(e);return i==="horizontal"?Vg(e,"yAxis",n,r):Vg(e,"xAxis",t,r)},M3e=(e,t,n)=>{var r=mt(e);return r==="horizontal"?bF(e,"xAxis",t):bF(e,"yAxis",n)},R3e=(e,t,n)=>{var r={},i=e.filter(eS),s=e.filter(u=>u.stackId==null),a=i.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),r),o=Object.entries(a).map(u=>{var[d,f]=u,h=f.map(m=>m.dataKey),p=lB(t,n,f[0].barSize);return{stackId:d,dataKeys:h,barSize:p}}),l=s.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=lB(t,n,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...o,...l]},L3e=se([I3e,nOe,M3e],R3e),F3e=(e,t,n,r,i)=>{var s,a,o=oy(e,t,n,r,i);if(o!=null){var l=mt(e),u=VY(e),{maxBarSize:d}=o,f=Zt(d)?u:d,h,p;return l==="horizontal"?(h=uo(e,"xAxis",t,r),p=co(e,"xAxis",t,r)):(h=uo(e,"yAxis",n,r),p=co(e,"yAxis",n,r)),(s=(a=dd(h,p,!0))!==null&&a!==void 0?a:f)!==null&&s!==void 0?s:0}},CQ=(e,t,n,r)=>{var i=mt(e),s,a;return i==="horizontal"?(s=uo(e,"xAxis",t,r),a=co(e,"xAxis",t,r)):(s=uo(e,"yAxis",n,r),a=co(e,"yAxis",n,r)),dd(s,a)};function B3e(e,t,n,r,i){var s=r.length;if(!(s<1)){var a=vi(e,n,0,!0),o,l=[];if(zr(r[0].barSize)){var u=!1,d=n/s,f=r.reduce((y,b)=>y+(b.barSize||0),0);f+=(s-1)*a,f>=n&&(f-=(s-1)*a,a=0),f>=n&&d>0&&(u=!0,d*=.9,f=s*d);var h=(n-f)/2>>0,p={offset:h-a,size:0};o=r.reduce((y,b)=>{var x,S={stackId:b.stackId,dataKeys:b.dataKeys,position:{offset:p.offset+p.size+a,size:u?d:(x=b.barSize)!==null&&x!==void 0?x:0}},E=[...y,S];return p=E[E.length-1].position,E},l)}else{var m=vi(t,n,0,!0);n-2*m-(s-1)*a<=0&&(a=0);var g=(n-2*m-(s-1)*a)/s;g>1&&(g>>=0);var v=zr(i)?Math.min(g,i):g;o=r.reduce((y,b,x)=>[...y,{stackId:b.stackId,dataKeys:b.dataKeys,position:{offset:m+(g+a)*x+(g-v)/2,size:v}}],l)}return o}}var $3e=(e,t,n,r,i,s,a)=>{var o=Zt(a)?t:a,l=B3e(n,r,i!==s?i:s,e,o);return i!==s&&l!=null&&(l=l.map(u=>pv(pv({},u),{},{position:pv(pv({},u.position),{},{offset:u.position.offset-i/2})}))),l},U3e=se([L3e,VY,tOe,WY,F3e,CQ,O3e],$3e),z3e=(e,t,n,r)=>uo(e,"xAxis",t,r),H3e=(e,t,n,r)=>uo(e,"yAxis",n,r),V3e=(e,t,n,r)=>co(e,"xAxis",t,r),W3e=(e,t,n,r)=>co(e,"yAxis",n,r),q3e=se([U3e,oy],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),K3e=(e,t)=>{var n=ZE(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:s}=i;if(s)return s.find(a=>a.key===n)}}}},G3e=se([D3e,oy],K3e),Y3e=se([or,z3e,H3e,V3e,W3e,q3e,mt,J0,CQ,G3e,oy,P3e],(e,t,n,r,i,s,a,o,l,u,d,f)=>{var{chartData:h,dataStartIndex:p,dataEndIndex:m}=o;if(!(d==null||s==null||a!=="horizontal"&&a!=="vertical"||t==null||n==null||r==null||i==null||l==null)){var{data:g}=d,v;if(g!=null&&g.length>0?v=g:v=h==null?void 0:h.slice(p,m+1),v!=null)return S3e({layout:a,barSettings:d,pos:s,bandSize:l,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:i,stackedData:u,displayedData:v,offset:e,cells:f})}}),kQ=e=>{var{chartData:t}=e,n=En(),r=ai();return w.useEffect(()=>r?()=>{}:(n(AF(t)),()=>{n(AF(void 0))}),[t,n,r]),null},cB={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},AQ=vs({name:"brush",initialState:cB,reducers:{setBrushSettings(e,t){return t.payload==null?cB:t.payload}}}),{setBrushSettings:xlt}=AQ.actions,X3e=AQ.reducer;function Q3e(e,t,n){return(t=J3e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J3e(e){var t=Z3e(e,"string");return typeof t=="symbol"?t:t+""}function Z3e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class hD{static create(t){return new hD(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}Q3e(hD,"EPS",1e-4);function eRe(e){return(e%180+180)%180}var tRe=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=eRe(i),a=s*Math.PI/180,o=Math.atan(r/n),l=a>o&&a<Math.PI-o?r/Math.sin(a):n/Math.cos(a);return Math.abs(l)},nRe={dots:[],areas:[],lines:[]},jQ=vs({name:"referenceElements",initialState:nRe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Uo(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Uo(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Uo(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:blt,removeDot:wlt,addArea:Elt,removeArea:Slt,addLine:_lt,removeLine:Nlt}=jQ.actions,rRe=jQ.reducer,iRe=w.createContext(void 0),sRe=e=>{var{children:t}=e,[n]=w.useState("".concat(Mg("recharts"),"-clip")),r=fS();if(r==null)return null;var{x:i,y:s,width:a,height:o}=r;return w.createElement(iRe.Provider,{value:n},w.createElement("defs",null,w.createElement("clipPath",{id:n},w.createElement("rect",{x:i,y:s,height:o,width:a}))),t)};function LN(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function OQ(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function aRe(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return tRe(r,n)}function oRe(e,t,n){var r=n==="width",{x:i,y:s,width:a,height:o}=e;return t===1?{start:r?i:s,end:r?i+a:s+o}:{start:r?i+a:s+o,end:r?i:s}}function i1(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-i)<=0}function lRe(e,t){return OQ(e,t+1)}function cRe(e,t,n,r,i){for(var s=(r||[]).slice(),{start:a,end:o}=t,l=0,u=1,d=a,f=function(){var m=r==null?void 0:r[l];if(m===void 0)return{v:OQ(r,u)};var g=l,v,y=()=>(v===void 0&&(v=n(m,g)),v),b=m.coordinate,x=l===0||i1(e,b,y,d,o);x||(l=0,d=a,u+=1),x&&(d=b+e*(y()/2+i),l+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function uB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Wr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uB(Object(n),!0).forEach(function(r){uRe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uRe(e,t,n){return(t=dRe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dRe(e){var t=fRe(e,"string");return typeof t=="symbol"?t:t+""}function fRe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hRe(e,t,n,r,i){for(var s=(r||[]).slice(),a=s.length,{start:o}=t,{end:l}=t,u=function(h){var p=s[h],m,g=()=>(m===void 0&&(m=n(p,h)),m);if(h===a-1){var v=e*(p.coordinate+e*g()/2-l);s[h]=p=Wr(Wr({},p),{},{tickCoord:v>0?p.coordinate-v*e:p.coordinate})}else s[h]=p=Wr(Wr({},p),{},{tickCoord:p.coordinate});var y=i1(e,p.tickCoord,g,o,l);y&&(l=p.tickCoord-e*(g()/2+i),s[h]=Wr(Wr({},p),{},{isShow:!0}))},d=a-1;d>=0;d--)u(d);return s}function pRe(e,t,n,r,i,s){var a=(r||[]).slice(),o=a.length,{start:l,end:u}=t;if(s){var d=r[o-1],f=n(d,o-1),h=e*(d.coordinate+e*f/2-u);a[o-1]=d=Wr(Wr({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var p=i1(e,d.tickCoord,()=>f,l,u);p&&(u=d.tickCoord-e*(f/2+i),a[o-1]=Wr(Wr({},d),{},{isShow:!0}))}for(var m=s?o-1:o,g=function(b){var x=a[b],S,E=()=>(S===void 0&&(S=n(x,b)),S);if(b===0){var _=e*(x.coordinate-e*E()/2-l);a[b]=x=Wr(Wr({},x),{},{tickCoord:_<0?x.coordinate-_*e:x.coordinate})}else a[b]=x=Wr(Wr({},x),{},{tickCoord:x.coordinate});var T=i1(e,x.tickCoord,E,l,u);T&&(l=x.tickCoord+e*(E()/2+i),a[b]=Wr(Wr({},x),{},{isShow:!0}))},v=0;v<m;v++)g(v);return a}function pD(e,t,n){var{tick:r,ticks:i,viewBox:s,minTickGap:a,orientation:o,interval:l,tickFormatter:u,unit:d,angle:f}=e;if(!i||!i.length||!r)return[];if(Ie(l)||zc.isSsr){var h;return(h=lRe(i,Ie(l)?l:0))!==null&&h!==void 0?h:[]}var p=[],m=o==="top"||o==="bottom"?"width":"height",g=d&&m==="width"?Lm(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},v=(x,S)=>{var E=typeof u=="function"?u(x.value,S):x.value;return m==="width"?aRe(Lm(E,{fontSize:t,letterSpacing:n}),g,f):Lm(E,{fontSize:t,letterSpacing:n})[m]},y=i.length>=2?xr(i[1].coordinate-i[0].coordinate):1,b=oRe(s,y,m);return l==="equidistantPreserveStart"?cRe(y,b,v,i,a):(l==="preserveStart"||l==="preserveStartEnd"?p=pRe(y,b,v,i,a,l==="preserveStartEnd"):p=hRe(y,b,v,i,a),p.filter(x=>x.isShow))}var mRe=["viewBox"],gRe=["viewBox"];function Df(){return Df=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Df.apply(null,arguments)}function dB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function er(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dB(Object(n),!0).forEach(function(r){mD(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fB(e,t){if(e==null)return{};var n,r,i=yRe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function yRe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function mD(e,t,n){return(t=vRe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vRe(e){var t=xRe(e,"string");return typeof t=="symbol"?t:t+""}function xRe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Kc extends w.Component{constructor(t){super(t),this.tickRefs=w.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,n){var{viewBox:r}=t,i=fB(t,mRe),s=this.props,{viewBox:a}=s,o=fB(s,gRe);return!LN(r,a)||!LN(i,o)||!LN(n,this.state)}getTickLineCoord(t){var{x:n,y:r,width:i,height:s,orientation:a,tickSize:o,mirror:l,tickMargin:u}=this.props,d,f,h,p,m,g,v=l?-1:1,y=t.tickSize||o,b=Ie(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":d=f=t.coordinate,p=r+ +!l*s,h=p-v*y,g=h-v*u,m=b;break;case"left":h=p=t.coordinate,f=n+ +!l*i,d=f-v*y,m=d-v*u,g=b;break;case"right":h=p=t.coordinate,f=n+ +l*i,d=f+v*y,m=d+v*u,g=b;break;default:d=f=t.coordinate,p=r+ +l*s,h=p+v*y,g=h+v*u,m=b;break}return{line:{x1:d,y1:h,x2:f,y2:p},tick:{x:m,y:g}}}getTickTextAnchor(){var{orientation:t,mirror:n}=this.props,r;switch(t){case"left":r=n?"start":"end";break;case"right":r=n?"end":"start";break;default:r="middle";break}return r}getTickVerticalAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:t,y:n,width:r,height:i,orientation:s,mirror:a,axisLine:o}=this.props,l=er(er(er({},Jt(this.props,!1)),Jt(o,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!a||s==="bottom"&&a);l=er(er({},l),{},{x1:t,y1:n+u*i,x2:t+r,y2:n+u*i})}else{var d=+(s==="left"&&!a||s==="right"&&a);l=er(er({},l),{},{x1:t+d*r,y1:n,x2:t+d*r,y2:n+i})}return w.createElement("line",Df({},l,{className:gt("recharts-cartesian-axis-line",Tc(o,"className"))}))}static renderTickItem(t,n,r){var i,s=gt(n.className,"recharts-cartesian-axis-tick-value");if(w.isValidElement(t))i=w.cloneElement(t,er(er({},n),{},{className:s}));else if(typeof t=="function")i=t(er(er({},n),{},{className:s}));else{var a="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(a=gt(a,t.className)),i=w.createElement(oS,Df({},n,{className:a}),r)}return i}renderTicks(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:s,tick:a,tickFormatter:o,unit:l,padding:u}=this.props,d=pD(er(er({},this.props),{},{ticks:r}),t,n),f=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),p=Oa(this.props),m=Jt(a,!1),g=er(er({},p),{},{fill:"none"},Jt(i,!1)),v=d.map((y,b)=>{var{line:x,tick:S}=this.getTickLineCoord(y),E=er(er(er(er({textAnchor:f,verticalAnchor:h},p),{},{stroke:"none",fill:s},m),S),{},{index:b,payload:y,visibleTicksCount:d.length,tickFormatter:o,padding:u});return w.createElement(zn,Df({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},H0(this.props,y,b)),i&&w.createElement("line",Df({},g,x,{className:gt("recharts-cartesian-axis-tick-line",Tc(i,"className"))})),a&&Kc.renderTickItem(a,E,"".concat(typeof o=="function"?o(y.value,b):y.value).concat(l||"")))});return v.length>0?w.createElement("g",{className:"recharts-cartesian-axis-ticks"},v):null}render(){var{axisLine:t,width:n,height:r,className:i,hide:s}=this.props;if(s)return null;var{ticks:a}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:w.createElement(zn,{className:gt("recharts-cartesian-axis",i),ref:o=>{if(o){var l=o.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(l);var u=l[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,a),Qi.renderCallByParent(this.props))}}mD(Kc,"displayName","CartesianAxis");mD(Kc,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var bRe=["x1","y1","x2","y2","key"],wRe=["offset"],ERe=["xAxisId","yAxisId"],SRe=["xAxisId","yAxisId"];function hB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Yr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hB(Object(n),!0).forEach(function(r){_Re(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _Re(e,t,n){return(t=NRe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NRe(e){var t=TRe(e,"string");return typeof t=="symbol"?t:t+""}function TRe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ju(){return ju=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ju.apply(null,arguments)}function s1(e,t){if(e==null)return{};var n,r,i=CRe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function CRe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var kRe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:a,ry:o}=e;return w.createElement("rect",{x:r,y:i,ry:o,width:s,height:a,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function PQ(e,t){var n;if(w.isValidElement(e))n=w.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:s,y2:a,key:o}=t,l=s1(t,bRe),u=Oa(l),{offset:d}=u,f=s1(u,wRe);n=w.createElement("line",ju({},f,{x1:r,y1:i,x2:s,y2:a,fill:"none",key:o}))}return n}function ARe(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:a}=e,o=s1(e,ERe),l=i.map((u,d)=>{var f=Yr(Yr({},o),{},{x1:t,y1:u,x2:t+n,y2:u,key:"line-".concat(d),index:d});return PQ(r,f)});return w.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function jRe(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:a}=e,o=s1(e,SRe),l=i.map((u,d)=>{var f=Yr(Yr({},o),{},{x1:u,y1:t,x2:u,y2:t+n,key:"line-".concat(d),index:d});return PQ(r,f)});return w.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function ORe(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:s,height:a,horizontalPoints:o,horizontal:l=!0}=e;if(!l||!t||!t.length)return null;var u=o.map(f=>Math.round(f+i-i)).sort((f,h)=>f-h);i!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],m=p?i+a-f:u[h+1]-f;if(m<=0)return null;var g=h%t.length;return w.createElement("rect",{key:"react-".concat(h),y:f,x:r,height:m,width:s,stroke:"none",fill:t[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function PRe(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:a,height:o,verticalPoints:l}=e;if(!t||!n||!n.length)return null;var u=l.map(f=>Math.round(f+i-i)).sort((f,h)=>f-h);i!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],m=p?i+a-f:u[h+1]-f;if(m<=0)return null;var g=h%n.length;return w.createElement("rect",{key:"react-".concat(h),x:f,y:s,width:m,height:o,stroke:"none",fill:n[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var IRe=(e,t)=>{var{xAxis:n,width:r,height:i,offset:s}=e;return bG(pD(Yr(Yr(Yr({},Kc.defaultProps),n),{},{ticks:wG(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,t)},DRe=(e,t)=>{var{yAxis:n,width:r,height:i,offset:s}=e;return bG(pD(Yr(Yr(Yr({},Kc.defaultProps),n),{},{ticks:wG(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,t)},MRe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function IQ(e){var t=qP(),n=KP(),r=CG(),i=Yr(Yr({},_i(e,MRe)),{},{x:Ie(e.x)?e.x:r.left,y:Ie(e.y)?e.y:r.top,width:Ie(e.width)?e.width:r.width,height:Ie(e.height)?e.height:r.height}),{xAxisId:s,yAxisId:a,x:o,y:l,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:p}=i,m=ai(),g=He(k=>wF(k,"xAxis",s,m)),v=He(k=>wF(k,"yAxis",a,m));if(!Ie(u)||u<=0||!Ie(d)||d<=0||!Ie(o)||o!==+o||!Ie(l)||l!==+l)return null;var y=i.verticalCoordinatesGenerator||IRe,b=i.horizontalCoordinatesGenerator||DRe,{horizontalPoints:x,verticalPoints:S}=i;if((!x||!x.length)&&typeof b=="function"){var E=h&&h.length,_=b({yAxis:v?Yr(Yr({},v),{},{ticks:E?h:v.ticks}):void 0,width:t,height:n,offset:r},E?!0:f);Rm(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _,"]")),Array.isArray(_)&&(x=_)}if((!S||!S.length)&&typeof y=="function"){var T=p&&p.length,C=y({xAxis:g?Yr(Yr({},g),{},{ticks:T?p:g.ticks}):void 0,width:t,height:n,offset:r},T?!0:f);Rm(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(S=C)}return w.createElement("g",{className:"recharts-cartesian-grid"},w.createElement(kRe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),w.createElement(ORe,ju({},i,{horizontalPoints:x})),w.createElement(PRe,ju({},i,{verticalPoints:S})),w.createElement(ARe,ju({},i,{offset:r,horizontalPoints:x,xAxis:g,yAxis:v})),w.createElement(jRe,ju({},i,{offset:r,verticalPoints:S,xAxis:g,yAxis:v})))}IQ.displayName="CartesianGrid";var DQ=(e,t,n,r)=>uo(e,"xAxis",t,r),MQ=(e,t,n,r)=>co(e,"xAxis",t,r),RQ=(e,t,n,r)=>uo(e,"yAxis",n,r),LQ=(e,t,n,r)=>co(e,"yAxis",n,r),RRe=se([mt,DQ,RQ,MQ,LQ],(e,t,n,r,i)=>go(e,"xAxis")?dd(t,r,!1):dd(n,i,!1)),LRe=(e,t,n,r,i)=>i;function FRe(e){return e.type==="line"}var BRe=se([ny,LRe],(e,t)=>e.filter(FRe).find(n=>n.id===t)),$Re=se([mt,DQ,RQ,MQ,LQ,BRe,RRe,J0],(e,t,n,r,i,s,a,o)=>{var{chartData:l,dataStartIndex:u,dataEndIndex:d}=o;if(!(s==null||t==null||n==null||r==null||i==null||r.length===0||i.length===0||a==null)){var{dataKey:f,data:h}=s,p;if(h!=null&&h.length>0?p=h:p=l==null?void 0:l.slice(u,d+1),p!=null)return o4e({layout:e,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:f,bandSize:a,displayedData:p})}}),URe=["id"],zRe=["type","layout","connectNulls","needClip"],HRe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function pB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ua(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pB(Object(n),!0).forEach(function(r){VRe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VRe(e,t,n){return(t=WRe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WRe(e){var t=qRe(e,"string");return typeof t=="symbol"?t:t+""}function qRe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gD(e,t){if(e==null)return{};var n,r,i=KRe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function KRe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function hd(){return hd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hd.apply(null,arguments)}var GRe=e=>{var{dataKey:t,name:n,stroke:r,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:r,value:Uc(n,t),payload:e}]};function YRe(e){var{dataKey:t,data:n,stroke:r,strokeWidth:i,fill:s,name:a,hide:o,unit:l}=e;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:t,nameKey:void 0,name:Uc(a,t),hide:o,type:e.tooltipType,color:e.stroke,unit:l}}}var FQ=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function XRe(e,t){for(var n=e.length%2!==0?[...e,0]:e,r=[],i=0;i<t;++i)r=[...r,...n];return r}var QRe=(e,t,n)=>{var r=n.reduce((f,h)=>f+h);if(!r)return FQ(t,e);for(var i=Math.floor(e/r),s=e%r,a=t-e,o=[],l=0,u=0;l<n.length;u+=n[l],++l)if(u+n[l]>s){o=[...n.slice(0,l),s-u];break}var d=o.length%2===0?[0,a]:[a];return[...XRe(n,i),...o,...d].map(f=>"".concat(f,"px")).join(", ")};function JRe(e,t){var n;if(w.isValidElement(e))n=w.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var r=gt("recharts-line-dot",typeof e!="boolean"?e.className:"");n=w.createElement(tD,hd({},t,{className:r}))}return n}function ZRe(e,t){return e==null?!1:t?!0:e.length===1}function e4e(e){var{clipPathId:t,points:n,props:r}=e,{dot:i,dataKey:s,needClip:a}=r;if(!ZRe(n,i))return null;var{id:o}=r,l=gD(r,URe),u=NE(i),d=Oa(l),f=Jt(i,!0),h=n.map((m,g)=>{var v=ua(ua(ua({key:"dot-".concat(g),r:3},d),f),{},{index:g,cx:m.x,cy:m.y,dataKey:s,value:m.value,payload:m.payload,points:n});return JRe(i,v)}),p={clipPath:a?"url(#clipPath-".concat(u?"":"dots-").concat(t,")"):void 0};return w.createElement(zn,hd({className:"recharts-line-dots",key:"dots"},p),h)}function Ak(e){var{clipPathId:t,pathRef:n,points:r,strokeDasharray:i,props:s,showLabels:a}=e,{type:o,layout:l,connectNulls:u,needClip:d}=s,f=gD(s,zRe),h=ua(ua({},Jt(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):void 0,points:r,type:o,layout:l,connectNulls:u,strokeDasharray:i??s.strokeDasharray});return w.createElement(w.Fragment,null,(r==null?void 0:r.length)>1&&w.createElement(Wf,hd({},h,{pathRef:n})),w.createElement(e4e,{points:r,clipPathId:t,props:s}),a&&Ho.renderCallByParent(s,r))}function t4e(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function n4e(e){var{clipPathId:t,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:s}=e,{points:a,strokeDasharray:o,isAnimationActive:l,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:h,width:p,height:m,onAnimationEnd:g,onAnimationStart:v}=n,y=i.current,b=cS(n,"recharts-line-"),[x,S]=w.useState(!1),E=w.useCallback(()=>{typeof g=="function"&&g(),S(!1)},[g]),_=w.useCallback(()=>{typeof v=="function"&&v(),S(!0)},[v]),T=t4e(r.current),C=s.current;return w.createElement(dS,{begin:u,duration:d,isActive:l,easing:f,onAnimationEnd:E,onAnimationStart:_,key:b},k=>{var A=Rr(C,T+C,k),j=Math.min(A,T),D;if(o){var P="".concat(o).split(/[,\s]+/gim).map(O=>parseFloat(O));D=QRe(j,T,P)}else D=FQ(T,j);if(y){var M=y.length/a.length,L=k===1?a:a.map((O,B)=>{var R=Math.floor(B*M);if(y[R]){var F=y[R];return ua(ua({},O),{},{x:Rr(F.x,O.x,k),y:Rr(F.y,O.y,k)})}return h?ua(ua({},O),{},{x:Rr(p*2,O.x,k),y:Rr(m/2,O.y,k)}):ua(ua({},O),{},{x:O.x,y:O.y})});return i.current=L,w.createElement(Ak,{props:n,points:L,clipPathId:t,pathRef:r,showLabels:!x,strokeDasharray:D})}return k>0&&T>0&&(i.current=a,s.current=j),w.createElement(Ak,{props:n,points:a,clipPathId:t,pathRef:r,showLabels:!x,strokeDasharray:D})})}function r4e(e){var{clipPathId:t,props:n}=e,{points:r,isAnimationActive:i}=n,s=w.useRef(null),a=w.useRef(0),o=w.useRef(null),l=s.current;return i&&r&&r.length&&l!==r?w.createElement(n4e,{props:n,clipPathId:t,previousPointsRef:s,longestAnimatedLengthRef:a,pathRef:o}):w.createElement(Ak,{props:n,points:r,clipPathId:t,pathRef:o,showLabels:!0})}var i4e=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Dt(e.payload,t)});class s4e extends w.Component{render(){var t,{hide:n,dot:r,points:i,className:s,xAxisId:a,yAxisId:o,top:l,left:u,width:d,height:f,id:h,needClip:p}=this.props;if(n)return null;var m=gt("recharts-line",s),g=h,{r:v=3,strokeWidth:y=2}=(t=Jt(r,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},b=NE(r),x=v*2+y;return w.createElement(w.Fragment,null,w.createElement(zn,{className:m},p&&w.createElement("defs",null,w.createElement(fD,{clipPathId:g,xAxisId:a,yAxisId:o}),!b&&w.createElement("clipPath",{id:"clipPath-dots-".concat(g)},w.createElement("rect",{x:u-x/2,y:l-x/2,width:d+x,height:f+x}))),w.createElement(r4e,{props:this.props,clipPathId:g}),w.createElement(_Q,{xAxisId:a,yAxisId:o,data:i,dataPointFormatter:i4e,errorBarOffset:0},this.props.children)),w.createElement(Ck,{activeDot:this.props.activeDot,points:i,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var BQ={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!zc.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function a4e(e){var t=_i(e,BQ),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:a,connectNulls:o,dot:l,hide:u,isAnimationActive:d,label:f,legendType:h,xAxisId:p,yAxisId:m,id:g}=t,v=gD(t,HRe),{needClip:y}=hS(p,m),b=fS(),x=q0(),S=ai(),E=He(A=>$Re(A,p,m,S,g));if(x!=="horizontal"&&x!=="vertical"||E==null||b==null)return null;var{height:_,width:T,x:C,y:k}=b;return w.createElement(s4e,hd({},v,{id:g,connectNulls:o,dot:l,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:a,isAnimationActive:d,hide:u,label:f,legendType:h,xAxisId:p,yAxisId:m,points:E,layout:x,height:_,width:T,left:C,top:k,needClip:y}))}function o4e(e){var{layout:t,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,dataKey:a,bandSize:o,displayedData:l}=e;return l.map((u,d)=>{var f=Dt(u,a);if(t==="horizontal"){var h=Rb({axis:n,ticks:i,bandSize:o,entry:u,index:d}),p=Zt(f)?null:r.scale(f);return{x:h,y:p,value:f,payload:u}}var m=Zt(f)?null:n.scale(f),g=Rb({axis:r,ticks:s,bandSize:o,entry:u,index:d});return m==null||g==null?null:{x:m,y:g,value:f,payload:u}}).filter(Boolean)}function qg(e){var t=_i(e,BQ),n=ai();return w.createElement(uS,{id:t.id,type:"line"},r=>w.createElement(w.Fragment,null,w.createElement(cD,{legendPayload:GRe(t)}),w.createElement(lS,{fn:YRe,args:t}),w.createElement(uD,{type:"line",id:r,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:n}),w.createElement(a4e,hd({},t,{id:r}))))}qg.displayName="Line";var $Q=(e,t,n,r)=>uo(e,"xAxis",t,r),UQ=(e,t,n,r)=>co(e,"xAxis",t,r),zQ=(e,t,n,r)=>uo(e,"yAxis",n,r),HQ=(e,t,n,r)=>co(e,"yAxis",n,r),l4e=se([mt,$Q,zQ,UQ,HQ],(e,t,n,r,i)=>go(e,"xAxis")?dd(t,r,!1):dd(n,i,!1)),c4e=(e,t,n,r,i)=>i,VQ=se([ny,c4e],(e,t)=>e.filter(n=>n.type==="area").find(n=>n.id===t)),u4e=(e,t,n,r,i)=>{var s,a=VQ(e,t,n,r,i);if(a!=null){var o=mt(e),l=go(o,"xAxis"),u;if(l?u=Vg(e,"yAxis",n,r):u=Vg(e,"xAxis",t,r),u!=null){var{stackId:d}=a,f=ZE(a);if(!(d==null||f==null)){var h=(s=u[d])===null||s===void 0?void 0:s.stackedData;return h==null?void 0:h.find(p=>p.key===f)}}}},d4e=se([mt,$Q,zQ,UQ,HQ,u4e,J0,l4e,VQ],(e,t,n,r,i,s,a,o,l)=>{var{chartData:u,dataStartIndex:d,dataEndIndex:f}=a;if(!(l==null||e!=="horizontal"&&e!=="vertical"||t==null||n==null||r==null||i==null||r.length===0||i.length===0||o==null)){var{data:h}=l,p;if(h&&h.length>0?p=h:p=u==null?void 0:u.slice(d,f+1),p!=null){var m=void 0;return O4e({layout:e,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataStartIndex:d,areaSettings:l,stackedData:s,displayedData:p,chartBaseValue:m,bandSize:o})}}}),f4e=["id"],h4e=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function WQ(e,t){if(e==null)return{};var n,r,i=p4e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function p4e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function mB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ou(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mB(Object(n),!0).forEach(function(r){m4e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function m4e(e,t,n){return(t=g4e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g4e(e){var t=y4e(e,"string");return typeof t=="symbol"?t:t+""}function y4e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vo(){return Vo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vo.apply(null,arguments)}function a1(e,t){return e&&e!=="none"?e:t}var v4e=e=>{var{dataKey:t,name:n,stroke:r,fill:i,legendType:s,hide:a}=e;return[{inactive:a,dataKey:t,type:s,color:a1(r,i),value:Uc(n,t),payload:e}]};function x4e(e){var{dataKey:t,data:n,stroke:r,strokeWidth:i,fill:s,name:a,hide:o,unit:l}=e;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:t,nameKey:void 0,name:Uc(a,t),hide:o,type:e.tooltipType,color:a1(r,s),unit:l}}}var b4e=(e,t)=>{var n;if(w.isValidElement(e))n=w.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var r=gt("recharts-area-dot",typeof e!="boolean"?e.className:"");n=w.createElement(tD,Vo({},t,{className:r}))}return n};function w4e(e,t){return e==null?!1:t?!0:e.length===1}function E4e(e){var{clipPathId:t,points:n,props:r}=e,{needClip:i,dot:s,dataKey:a}=r;if(!w4e(n,s))return null;var o=NE(s),l=Oa(r),u=Jt(s,!0),d=n.map((h,p)=>{var m=Ou(Ou(Ou({key:"dot-".concat(p),r:3},l),u),{},{index:p,cx:h.x,cy:h.y,dataKey:a,value:h.value,payload:h.payload,points:n});return b4e(s,m)}),f={clipPath:i?"url(#clipPath-".concat(o?"":"dots-").concat(t,")"):void 0};return w.createElement(zn,Vo({className:"recharts-area-dots"},f),d)}function jk(e){var{points:t,baseLine:n,needClip:r,clipPathId:i,props:s,showLabels:a}=e,{layout:o,type:l,stroke:u,connectNulls:d,isRange:f}=s,{id:h}=s,p=WQ(s,f4e),m=Oa(p);return w.createElement(w.Fragment,null,(t==null?void 0:t.length)>1&&w.createElement(zn,{clipPath:r?"url(#clipPath-".concat(i,")"):void 0},w.createElement(Wf,Vo({},m,{id:h,points:t,connectNulls:d,type:l,baseLine:n,layout:o,stroke:"none",className:"recharts-area-area"})),u!=="none"&&w.createElement(Wf,Vo({},m,{className:"recharts-area-curve",layout:o,type:l,connectNulls:d,fill:"none",points:t})),u!=="none"&&f&&w.createElement(Wf,Vo({},m,{className:"recharts-area-curve",layout:o,type:l,connectNulls:d,fill:"none",points:n}))),w.createElement(E4e,{points:t,props:p,clipPathId:i}),a&&Ho.renderCallByParent(p,t))}function S4e(e){var{alpha:t,baseLine:n,points:r,strokeWidth:i}=e,s=r[0].y,a=r[r.length-1].y;if(!zr(s)||!zr(a))return null;var o=t*Math.abs(s-a),l=Math.max(...r.map(u=>u.x||0));return Ie(n)?l=Math.max(n,l):n&&Array.isArray(n)&&n.length&&(l=Math.max(...n.map(u=>u.x||0),l)),Ie(l)?w.createElement("rect",{x:0,y:s<a?s:s-o,width:l+(i?parseInt("".concat(i),10):1),height:Math.floor(o)}):null}function _4e(e){var{alpha:t,baseLine:n,points:r,strokeWidth:i}=e,s=r[0].x,a=r[r.length-1].x;if(!zr(s)||!zr(a))return null;var o=t*Math.abs(s-a),l=Math.max(...r.map(u=>u.y||0));return Ie(n)?l=Math.max(n,l):n&&Array.isArray(n)&&n.length&&(l=Math.max(...n.map(u=>u.y||0),l)),Ie(l)?w.createElement("rect",{x:s<a?s:s-o,y:0,width:o,height:Math.floor(l+(i?parseInt("".concat(i),10):1))}):null}function N4e(e){var{alpha:t,layout:n,points:r,baseLine:i,strokeWidth:s}=e;return n==="vertical"?w.createElement(S4e,{alpha:t,points:r,baseLine:i,strokeWidth:s}):w.createElement(_4e,{alpha:t,points:r,baseLine:i,strokeWidth:s})}function T4e(e){var{needClip:t,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:s}=e,{points:a,baseLine:o,isAnimationActive:l,animationBegin:u,animationDuration:d,animationEasing:f,onAnimationStart:h,onAnimationEnd:p}=r,m=cS(r,"recharts-area-"),[g,v]=w.useState(!0),y=w.useCallback(()=>{typeof p=="function"&&p(),v(!1)},[p]),b=w.useCallback(()=>{typeof h=="function"&&h(),v(!0)},[h]),x=i.current,S=s.current;return w.createElement(dS,{begin:u,duration:d,isActive:l,easing:f,onAnimationEnd:y,onAnimationStart:b,key:m},E=>{if(x){var _=x.length/a.length,T=E===1?a:a.map((k,A)=>{var j=Math.floor(A*_);if(x[j]){var D=x[j];return Ou(Ou({},k),{},{x:Rr(D.x,k.x,E),y:Rr(D.y,k.y,E)})}return k}),C;return Ie(o)?C=Rr(S,o,E):Zt(o)||zi(o)?C=Rr(S,0,E):C=o.map((k,A)=>{var j=Math.floor(A*_);if(Array.isArray(S)&&S[j]){var D=S[j];return Ou(Ou({},k),{},{x:Rr(D.x,k.x,E),y:Rr(D.y,k.y,E)})}return k}),E>0&&(i.current=T,s.current=C),w.createElement(jk,{points:T,baseLine:C,needClip:t,clipPathId:n,props:r,showLabels:!g})}return E>0&&(i.current=a,s.current=o),w.createElement(zn,null,w.createElement("defs",null,w.createElement("clipPath",{id:"animationClipPath-".concat(n)},w.createElement(N4e,{alpha:E,points:a,baseLine:o,layout:r.layout,strokeWidth:r.strokeWidth}))),w.createElement(zn,{clipPath:"url(#animationClipPath-".concat(n,")")},w.createElement(jk,{points:a,baseLine:o,needClip:t,clipPathId:n,props:r,showLabels:!0})))})}function C4e(e){var{needClip:t,clipPathId:n,props:r}=e,{points:i,baseLine:s,isAnimationActive:a}=r,o=w.useRef(null),l=w.useRef(),u=o.current,d=l.current;return a&&i&&i.length&&(u!==i||d!==s)?w.createElement(T4e,{needClip:t,clipPathId:n,props:r,previousPointsRef:o,previousBaselineRef:l}):w.createElement(jk,{points:i,baseLine:s,needClip:t,clipPathId:n,props:r,showLabels:!0})}class k4e extends w.PureComponent{render(){var t,{hide:n,dot:r,points:i,className:s,top:a,left:o,needClip:l,xAxisId:u,yAxisId:d,width:f,height:h,id:p,baseLine:m}=this.props;if(n)return null;var g=gt("recharts-area",s),v=p,{r:y=3,strokeWidth:b=2}=(t=Jt(r,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},x=NE(r),S=y*2+b;return w.createElement(w.Fragment,null,w.createElement(zn,{className:g},l&&w.createElement("defs",null,w.createElement(fD,{clipPathId:v,xAxisId:u,yAxisId:d}),!x&&w.createElement("clipPath",{id:"clipPath-dots-".concat(v)},w.createElement("rect",{x:o-S/2,y:a-S/2,width:f+S,height:h+S}))),w.createElement(C4e,{needClip:l,clipPathId:v,props:this.props})),w.createElement(Ck,{points:i,mainColor:a1(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(m)&&w.createElement(Ck,{points:m,mainColor:a1(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var qQ={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!zc.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function A4e(e){var t,n=_i(e,qQ),{activeDot:r,animationBegin:i,animationDuration:s,animationEasing:a,connectNulls:o,dot:l,fill:u,fillOpacity:d,hide:f,isAnimationActive:h,legendType:p,stroke:m,xAxisId:g,yAxisId:v}=n,y=WQ(n,h4e),b=q0(),x=WX(),{needClip:S}=hS(g,v),E=ai(),{points:_,isRange:T,baseLine:C}=(t=He(M=>d4e(M,g,v,E,e.id)))!==null&&t!==void 0?t:{},k=fS();if(b!=="horizontal"&&b!=="vertical"||k==null||x!=="AreaChart"&&x!=="ComposedChart")return null;var{height:A,width:j,x:D,y:P}=k;return!_||!_.length?null:w.createElement(k4e,Vo({},y,{activeDot:r,animationBegin:i,animationDuration:s,animationEasing:a,baseLine:C,connectNulls:o,dot:l,fill:u,fillOpacity:d,height:A,hide:f,layout:b,isAnimationActive:h,isRange:T,legendType:p,needClip:S,points:_,stroke:m,width:j,left:D,top:P,xAxisId:g,yAxisId:v}))}var j4e=(e,t,n,r,i)=>{var s=n??t;if(Ie(s))return s;var a=e==="horizontal"?i:r,o=a.scale.domain();if(a.type==="number"){var l=Math.max(o[0],o[1]),u=Math.min(o[0],o[1]);return s==="dataMin"?u:s==="dataMax"||l<0?l:Math.max(Math.min(o[0],o[1]),0)}return s==="dataMin"?o[0]:s==="dataMax"?o[1]:o[0]};function O4e(e){var{areaSettings:{connectNulls:t,baseValue:n,dataKey:r},stackedData:i,layout:s,chartBaseValue:a,xAxis:o,yAxis:l,displayedData:u,dataStartIndex:d,xAxisTicks:f,yAxisTicks:h,bandSize:p}=e,m=i&&i.length,g=j4e(s,a,n,o,l),v=s==="horizontal",y=!1,b=u.map((S,E)=>{var _;m?_=i[d+E]:(_=Dt(S,r),Array.isArray(_)?y=!0:_=[g,_]);var T=_[1]==null||m&&!t&&Dt(S,r)==null;return v?{x:Rb({axis:o,ticks:f,bandSize:p,entry:S,index:E}),y:T?null:l.scale(_[1]),value:_,payload:S}:{x:T?null:o.scale(_[1]),y:Rb({axis:l,ticks:h,bandSize:p,entry:S,index:E}),value:_,payload:S}}),x;return m||y?x=b.map(S=>{var E=Array.isArray(S.value)?S.value[0]:null;return v?{x:S.x,y:E!=null&&S.y!=null?l.scale(E):null,payload:S.payload}:{x:E!=null?o.scale(E):null,y:S.y,payload:S.payload}}):x=v?l.scale(g):o.scale(g),{points:b,baseLine:x,isRange:y}}function Kf(e){var t=_i(e,qQ),n=ai();return w.createElement(uS,{id:t.id,type:"area"},r=>w.createElement(w.Fragment,null,w.createElement(cD,{legendPayload:v4e(t)}),w.createElement(lS,{fn:x4e,args:t}),w.createElement(uD,{type:"area",id:r,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:EG(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:n,connectNulls:t.connectNulls}),w.createElement(A4e,Vo({},t,{id:r}))))}Kf.displayName="Area";function gB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gB(Object(n),!0).forEach(function(r){P4e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function P4e(e,t,n){return(t=I4e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I4e(e){var t=D4e(e,"string");return typeof t=="symbol"?t:t+""}function D4e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var M4e={xAxis:{},yAxis:{},zAxis:{}},KQ=vs({name:"cartesianAxis",initialState:M4e,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=yB(yB({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:R4e,removeXAxis:L4e,addYAxis:F4e,removeYAxis:B4e,addZAxis:Tlt,removeZAxis:Clt,updateYAxisWidth:$4e}=KQ.actions,U4e=KQ.reducer,z4e=["children"],H4e=["dangerouslySetInnerHTML","ticks"];function GQ(e,t,n){return(t=V4e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V4e(e){var t=W4e(e,"string");return typeof t=="symbol"?t:t+""}function W4e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ok(){return Ok=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ok.apply(null,arguments)}function YQ(e,t){if(e==null)return{};var n,r,i=q4e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function q4e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function K4e(e){var t=En(),n=w.useMemo(()=>{var{children:s}=e,a=YQ(e,z4e);return a},[e]),r=He(s=>pl(s,n.id)),i=n===r;return w.useEffect(()=>(t(R4e(n)),()=>{t(L4e(n))}),[n,t]),i?e.children:null}var G4e=e=>{var{xAxisId:t,className:n}=e,r=He(TG),i=ai(),s="xAxis",a=He(p=>lp(p,s,t,i)),o=He(p=>_X(p,s,t,i)),l=He(p=>bX(p,t)),u=He(p=>qOe(p,t));if(l==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=e,h=YQ(e,H4e);return w.createElement(Kc,Ok({},h,{scale:a,x:u.x,y:u.y,width:l.width,height:l.height,className:gt("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:o}))},Y4e=e=>{var t,n,r,i,s;return w.createElement(K4e,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},w.createElement(G4e,e))};class Ea extends w.Component{render(){return w.createElement(Y4e,this.props)}}GQ(Ea,"displayName","XAxis");GQ(Ea,"defaultProps",{allowDataOverflow:Ki.allowDataOverflow,allowDecimals:Ki.allowDecimals,allowDuplicatedCategory:Ki.allowDuplicatedCategory,height:Ki.height,hide:!1,mirror:Ki.mirror,orientation:Ki.orientation,padding:Ki.padding,reversed:Ki.reversed,scale:Ki.scale,tickCount:Ki.tickCount,type:Ki.type,xAxisId:0});var X4e=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=e,a=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>a&&(a=f.width)}});var o=n?n.getBoundingClientRect().width:0,l=i+s,u=a+l+o+(n?r:0);return Math.round(u)}return 0},Q4e=["dangerouslySetInnerHTML","ticks"];function XQ(e,t,n){return(t=J4e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J4e(e){var t=Z4e(e,"string");return typeof t=="symbol"?t:t+""}function Z4e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pk(){return Pk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pk.apply(null,arguments)}function eLe(e,t){if(e==null)return{};var n,r,i=tLe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function tLe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function nLe(e){var t=En();return w.useEffect(()=>(t(F4e(e)),()=>{t(B4e(e))}),[e,t]),null}var rLe=e=>{var t,{yAxisId:n,className:r,width:i,label:s}=e,a=w.useRef(null),o=w.useRef(null),l=He(TG),u=ai(),d=En(),f="yAxis",h=He(x=>lp(x,f,n,u)),p=He(x=>wX(x,n)),m=He(x=>KOe(x,n)),g=He(x=>_X(x,f,n,u));if(w.useLayoutEffect(()=>{var x;if(!(i!=="auto"||!p||eD(s)||w.isValidElement(s))){var S=a.current,E=S==null||(x=S.tickRefs)===null||x===void 0?void 0:x.current,{tickSize:_,tickMargin:T}=S.props,C=X4e({ticks:E,label:o.current,labelGapWithTick:5,tickSize:_,tickMargin:T});Math.round(p.width)!==Math.round(C)&&d($4e({id:n,width:C}))}},[a,a==null||(t=a.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,p==null?void 0:p.width,p,d,s,n,i]),p==null||m==null)return null;var{dangerouslySetInnerHTML:v,ticks:y}=e,b=eLe(e,Q4e);return w.createElement(Kc,Pk({},b,{ref:a,labelRef:o,scale:h,x:m.x,y:m.y,width:p.width,height:p.height,className:gt("recharts-".concat(f," ").concat(f),r),viewBox:l,ticks:g}))},iLe=e=>{var t,n,r,i,s;return w.createElement(w.Fragment,null,w.createElement(nLe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),w.createElement(rLe,e))},sLe={allowDataOverflow:Gi.allowDataOverflow,allowDecimals:Gi.allowDecimals,allowDuplicatedCategory:Gi.allowDuplicatedCategory,hide:!1,mirror:Gi.mirror,orientation:Gi.orientation,padding:Gi.padding,reversed:Gi.reversed,scale:Gi.scale,tickCount:Gi.tickCount,type:Gi.type,width:Gi.width,yAxisId:0};class Sa extends w.Component{render(){return w.createElement(iLe,this.props)}}XQ(Sa,"displayName","YAxis");XQ(Sa,"defaultProps",sLe);var aLe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ly=w;function oLe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lLe=typeof Object.is=="function"?Object.is:oLe,cLe=ly.useSyncExternalStore,uLe=ly.useRef,dLe=ly.useEffect,fLe=ly.useMemo,hLe=ly.useDebugValue;aLe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=uLe(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=fLe(function(){function l(p){if(!u){if(u=!0,d=p,p=r(p),i!==void 0&&a.hasValue){var m=a.value;if(i(m,p))return f=m}return f=p}if(m=f,lLe(d,p))return m;var g=r(p);return i!==void 0&&i(m,g)?(d=p,m):(d=p,f=g)}var u=!1,d,f,h=n===void 0?null:n;return[function(){return l(t())},h===null?void 0:function(){return l(h())}]},[t,n,r,i]);var o=cLe(e,s[0],s[1]);return dLe(function(){a.hasValue=!0,a.value=o},[o]),hLe(o),o};function pLe(e){e()}function mLe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){pLe(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var vB={notify(){},get:()=>[]};function gLe(e,t){let n,r=vB,i=0,s=!1;function a(g){d();const v=r.subscribe(g);let y=!1;return()=>{y||(y=!0,v(),f())}}function o(){r.notify()}function l(){m.onStateChange&&m.onStateChange()}function u(){return s}function d(){i++,n||(n=e.subscribe(l),r=mLe())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=vB)}function h(){s||(s=!0,d())}function p(){s&&(s=!1,f())}const m={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:u,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>r};return m}var yLe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vLe=yLe(),xLe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",bLe=xLe(),wLe=()=>vLe||bLe?w.useLayoutEffect:w.useEffect,ELe=wLe(),FN=Symbol.for("react-redux-context"),BN=typeof globalThis<"u"?globalThis:{};function SLe(){if(!w.createContext)return{};const e=BN[FN]??(BN[FN]=new Map);let t=e.get(w.createContext);return t||(t=w.createContext(null),e.set(w.createContext,t)),t}var _Le=SLe();function NLe(e){const{children:t,context:n,serverState:r,store:i}=e,s=w.useMemo(()=>{const l=gLe(i);return{store:i,subscription:l,getServerState:r?()=>r:void 0}},[i,r]),a=w.useMemo(()=>i.getState(),[i]);ELe(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,a]);const o=n||_Le;return w.createElement(o.Provider,{value:s},t)}var TLe=NLe,CLe=(e,t)=>t,yD=se([CLe,mt,QY,cr,BX,ml,QPe,or],nIe),vD=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},QQ=Ys("mouseClick"),JQ=W0();JQ.startListening({actionCreator:QQ,effect:(e,t)=>{var n=e.payload,r=yD(t.getState(),vD(n));(r==null?void 0:r.activeIndex)!=null&&t.dispatch(aPe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var Ik=Ys("mouseMove"),ZQ=W0();ZQ.startListening({actionCreator:Ik,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=WI(r,r.tooltip.settings.shared),s=yD(r,vD(n));i==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch(PX({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(OX()))}});function kLe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var xB={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},eJ=vs({name:"rootProps",initialState:xB,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:xB.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),ALe=eJ.reducer,{updateOptions:jLe}=eJ.actions,tJ=vs({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:OLe}=tJ.actions,PLe=tJ.reducer,nJ=Ys("keyDown"),rJ=Ys("focus"),xD=W0();xD.startListening({actionCreator:nJ,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var a=Number(qI(i,up(n))),o=ml(n);if(s==="Enter"){var l=Zb(n,"axis","hover",String(i.index));t.dispatch(Ek({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:l}));return}var u=QOe(n),d=u==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,h=a+f*d;if(!(o==null||h>=o.length||h<0)){var p=Zb(n,"axis","hover",String(h));t.dispatch(Ek({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});xD.startListening({actionCreator:rJ,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",a=Zb(n,"axis","hover",String(s));t.dispatch(Ek({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:a}))}}}});var Ts=Ys("externalEvent"),iJ=W0();iJ.startListening({actionCreator:Ts,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:zPe(n),activeDataKey:HX(n),activeIndex:Cc(n),activeLabel:zX(n),activeTooltipIndex:Cc(n),isTooltipActive:HPe(n)};e.payload.handler(r,e.payload.reactEvent)}}});var ILe=se([cp],e=>e.tooltipItemPayloads),DLe=se([ILe,sy,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(o=>o.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var a=t(s,n);return a}}}),sJ=Ys("touchMove"),aJ=W0();aJ.startListening({actionCreator:sJ,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=WI(r,r.tooltip.settings.shared);if(i==="axis"){var s=yD(r,vD({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(PX({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var a,o=n.touches[0],l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var u=l.getAttribute(_G),d=(a=l.getAttribute(NG))!==null&&a!==void 0?a:void 0,f=DLe(t.getState(),u,d);t.dispatch(jX({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var MLe=YK({brush:X3e,cartesianAxis:U4e,chartData:yIe,errorBars:e3e,graphicalItems:fMe,layout:lCe,legend:GCe,options:fIe,polarAxis:DDe,polarOptions:PLe,referenceElements:rRe,rootProps:ALe,tooltip:oPe}),RLe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return ITe({reducer:MLe,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([JQ.middleware,ZQ.middleware,xD.middleware,iJ.middleware,aJ.middleware]),devTools:{serialize:{replacer:kLe},name:"recharts-".concat(n)}})};function oJ(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=ai(),s=w.useRef(null);if(i)return n;s.current==null&&(s.current=RLe(t,r));var a=MP;return w.createElement(TLe,{context:a,store:s.current},n)}function lJ(e){var{layout:t,width:n,height:r,margin:i}=e,s=En(),a=ai();return w.useEffect(()=>{a||(s(sCe(t)),s(aCe({width:n,height:r})),s(iCe(i)))},[s,a,t,n,r,i]),null}function cJ(e){var t=En();return w.useEffect(()=>{t(jLe(e))},[t,e]),null}var LLe=["children"];function FLe(e,t){if(e==null)return{};var n,r,i=BLe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function BLe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function o1(){return o1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o1.apply(null,arguments)}var $Le={width:"100%",height:"100%"},ULe=w.forwardRef((e,t)=>{var n=qP(),r=KP(),i=OG();if(!Eh(n)||!Eh(r))return null;var{children:s,otherAttributes:a,title:o,desc:l}=e,u,d;return typeof a.tabIndex=="number"?u=a.tabIndex:u=i?0:void 0,typeof a.role=="string"?d=a.role:d=i?"application":void 0,w.createElement(bP,o1({},a,{title:o,desc:l,role:d,tabIndex:u,width:n,height:r,style:$Le,ref:t}),s)}),zLe=e=>{var{children:t}=e,n=He(HE);if(!n)return null;var{width:r,height:i,y:s,x:a}=n;return w.createElement(bP,{width:r,height:i,x:a,y:s},t)},bB=w.forwardRef((e,t)=>{var{children:n}=e,r=FLe(e,LLe),i=ai();return i?w.createElement(zLe,null,n):w.createElement(ULe,o1({ref:t},r),n)});function HLe(){var e=En(),[t,n]=w.useState(null),r=He(RCe);return w.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;zr(s)&&s!==r&&e(oCe(s))}},[t,e,r]),n}function wB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function VLe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wB(Object(n),!0).forEach(function(r){WLe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function WLe(e,t,n){return(t=qLe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qLe(e){var t=KLe(e,"string");return typeof t=="symbol"?t:t+""}function KLe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GLe=w.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:a,onDoubleClick:o,onMouseDown:l,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:p,onTouchMove:m,onTouchStart:g,style:v,width:y}=e,b=En(),[x,S]=w.useState(null),[E,_]=w.useState(null);bIe();var T=HLe(),C=w.useCallback(G=>{T(G),typeof t=="function"&&t(G),S(G),_(G)},[T,t,S,_]),k=w.useCallback(G=>{b(QQ(G)),b(Ts({handler:s,reactEvent:G}))},[b,s]),A=w.useCallback(G=>{b(Ik(G)),b(Ts({handler:u,reactEvent:G}))},[b,u]),j=w.useCallback(G=>{b(OX()),b(Ts({handler:d,reactEvent:G}))},[b,d]),D=w.useCallback(G=>{b(Ik(G)),b(Ts({handler:f,reactEvent:G}))},[b,f]),P=w.useCallback(()=>{b(rJ())},[b]),M=w.useCallback(G=>{b(nJ(G.key))},[b]),L=w.useCallback(G=>{b(Ts({handler:a,reactEvent:G}))},[b,a]),O=w.useCallback(G=>{b(Ts({handler:o,reactEvent:G}))},[b,o]),B=w.useCallback(G=>{b(Ts({handler:l,reactEvent:G}))},[b,l]),R=w.useCallback(G=>{b(Ts({handler:h,reactEvent:G}))},[b,h]),F=w.useCallback(G=>{b(Ts({handler:g,reactEvent:G}))},[b,g]),I=w.useCallback(G=>{b(sJ(G)),b(Ts({handler:m,reactEvent:G}))},[b,m]),X=w.useCallback(G=>{b(Ts({handler:p,reactEvent:G}))},[b,p]);return w.createElement(XX.Provider,{value:x},w.createElement(tK.Provider,{value:E},w.createElement("div",{className:gt("recharts-wrapper",r),style:VLe({position:"relative",cursor:"default",width:y,height:i},v),onClick:k,onContextMenu:L,onDoubleClick:O,onFocus:P,onKeyDown:M,onMouseDown:B,onMouseEnter:A,onMouseLeave:j,onMouseMove:D,onMouseUp:R,onTouchEnd:X,onTouchMove:I,onTouchStart:F,ref:C},n)))}),YLe=["children","className","width","height","style","compact","title","desc"];function XLe(e,t){if(e==null)return{};var n,r,i=QLe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function QLe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var uJ=w.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:s,style:a,compact:o,title:l,desc:u}=e,d=XLe(e,YLe),f=Oa(d);return o?w.createElement(bB,{otherAttributes:f,title:l,desc:u},n):w.createElement(GLe,{className:r,style:a,width:i,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},w.createElement(bB,{otherAttributes:f,title:l,desc:u,ref:t},w.createElement(sRe,null,n)))}),JLe=["width","height"];function Dk(){return Dk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dk.apply(null,arguments)}function ZLe(e,t){if(e==null)return{};var n,r,i=e6e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function e6e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var t6e={top:5,right:5,bottom:5,left:5},n6e={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:t6e,reverseStackOrder:!1,syncMethod:"index"},bD=w.forwardRef(function(t,n){var r,i=_i(t.categoricalChartProps,n6e),{width:s,height:a}=i,o=ZLe(i,JLe);if(!Eh(s)||!Eh(a))return null;var{chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,p={chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return w.createElement(oJ,{preloadedState:{options:p},reduxStoreName:(r=h.id)!==null&&r!==void 0?r:l},w.createElement(kQ,{chartData:h.data}),w.createElement(lJ,{width:s,height:a,layout:i.layout,margin:i.margin}),w.createElement(cJ,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),w.createElement(uJ,Dk({},o,{width:s,height:a,ref:n})))}),r6e=["axis"],wD=w.forwardRef((e,t)=>w.createElement(bD,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:r6e,tooltipPayloadSearcher:aS,categoricalChartProps:e,ref:t})),i6e=["axis","item"],l1=w.forwardRef((e,t)=>w.createElement(bD,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:i6e,tooltipPayloadSearcher:aS,categoricalChartProps:e,ref:t}));function s6e(e){var t=En();return w.useEffect(()=>{t(OLe(e))},[t,e]),null}var a6e=["width","height","layout"];function Mk(){return Mk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mk.apply(null,arguments)}function o6e(e,t){if(e==null)return{};var n,r,i=l6e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function l6e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var c6e={top:5,right:5,bottom:5,left:5},u6e={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:c6e,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},d6e=w.forwardRef(function(t,n){var r,i=_i(t.categoricalChartProps,u6e),{width:s,height:a,layout:o}=i,l=o6e(i,a6e);if(!Eh(s)||!Eh(a))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h}=t,p={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h,eventEmitter:void 0};return w.createElement(oJ,{preloadedState:{options:p},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:u},w.createElement(kQ,{chartData:i.data}),w.createElement(lJ,{width:s,height:a,layout:o,margin:i.margin}),w.createElement(cJ,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),w.createElement(s6e,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),w.createElement(uJ,Mk({width:s,height:a},l,{ref:n})))}),f6e=["item"],h6e={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Kg=w.forwardRef((e,t)=>{var n=_i(e,h6e);return w.createElement(d6e,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:f6e,tooltipPayloadSearcher:aS,categoricalChartProps:n,ref:t})}),p6e=["axis"],dJ=w.forwardRef((e,t)=>w.createElement(bD,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:p6e,tooltipPayloadSearcher:aS,categoricalChartProps:e,ref:t}));function m6e({widget:e,isDarkMode:t}){var a,o;const n=[{month:"Jan",revenue:12e3},{month:"Feb",revenue:15e3},{month:"Mar",revenue:11e3},{month:"Apr",revenue:18e3},{month:"May",revenue:22e3},{month:"Jun",revenue:19e3}],r=((a=n[n.length-1])==null?void 0:a.revenue)||0,i=((o=n[n.length-2])==null?void 0:o.revenue)||0,s=i?(r-i)/i*100:0;return c.jsxs(Z,{className:"h-full",children:[c.jsx(de,{className:"pb-2",children:c.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[c.jsx(mn,{className:"h-4 w-4"}),"Revenue Trend"]})}),c.jsx(ee,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold",children:le(r)}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]}),c.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[c.jsx(ti,{className:`h-4 w-4 ${s>0?"text-green-500":"text-red-500"}`}),c.jsxs("span",{className:s>0?"text-green-500":"text-red-500",children:[Math.abs(s).toFixed(1),"%"]})]})]}),c.jsx("div",{className:"h-32",children:c.jsx(Mi,{width:"100%",height:"100%",children:c.jsxs(wD,{data:n,children:[c.jsx(Ea,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:t?"#94a3b8":"#64748b"}}),c.jsx(Sa,{hide:!0}),c.jsx(Bs,{formatter:l=>[le(l),"Revenue"],labelStyle:{color:t?"#fff":"#000"},contentStyle:{backgroundColor:t?"#1e293b":"#fff",border:t?"1px solid #334155":"1px solid #e2e8f0",borderRadius:"6px"}}),c.jsx(qg,{type:"monotone",dataKey:"revenue",stroke:"#2563eb",strokeWidth:2,dot:{fill:"#2563eb",strokeWidth:2,r:3},activeDot:{r:4,stroke:"#2563eb",strokeWidth:2}})]})})}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"6-month revenue trend"})]})})]})}function Jn(e){const{user:t}=Tr(),[n,r]=w.useState([]),[i,s]=w.useState(!0),[a,o]=w.useState(null),l=t==null?void 0:t.id,u=[{name:"Cisco",color:"#3B82F6",status:"active"},{name:"PTS",color:"#10B981",status:"active"},{name:"Other",color:"#F59E0B",status:"active"}],d=async()=>{if(!l){r([]),s(!1);return}try{s(!0),o(null);const{data:x,error:S}=await J.from("projects").select("*").eq("user_id",l).order("created_at",{ascending:!1});if(S)throw S;x.length===0?await f():r(x)}catch(x){console.error("Error fetching projects:",x),o(x instanceof Error?x.message:"Failed to fetch projects");const S=localStorage.getItem(`projects_${l}`);S&&r(JSON.parse(S))}finally{s(!1)}},f=async()=>{if(l)try{const x=u.map(_=>({..._,user_id:l})),{data:S,error:E}=await J.from("projects").insert(x).select();if(E)throw E;r(S||[]),localStorage.setItem(`projects_${l}`,JSON.stringify(S||[]))}catch(x){console.error("Error creating default projects:",x),o(x instanceof Error?x.message:"Failed to create default projects")}},h=async x=>{if(!l)throw new Error("User not authenticated");try{const S={...x,user_id:l,status:x.status||"planning",start_date:x.start_date||null,end_date:x.end_date||null,description:x.description||null,client_id:x.client_id||null};console.log("Attempting to insert project:",S);const{data:E,error:_}=await J.from("projects").insert([S]).select().single();if(_)throw console.error("Database insert error:",_),_;if(console.log("Project inserted successfully:",E),E){r(C=>[E,...C]);const T=[E,...n];return localStorage.setItem(`projects_${l}`,JSON.stringify(T)),E}return null}catch(S){console.error("Error adding project:",S);const _=[{id:`local_${Date.now()}`,name:x.name,color:x.color,client_id:x.client_id||null,description:x.description||null,status:x.status||"planning",start_date:x.start_date||null,end_date:x.end_date||null,budget:x.budget||null,hourly_rate:x.hourly_rate||null,user_id:l,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},...n];throw r(_),localStorage.setItem(`projects_${l}`,JSON.stringify(_)),S}},p=async x=>{if(!l)throw new Error("User not authenticated");try{const{id:S,...E}=x,{data:_,error:T}=await J.from("projects").update({...E,updated_at:new Date().toISOString()}).eq("id",S).eq("user_id",l).select().single();if(T)throw T;if(_){r(k=>k.map(A=>A.id===S?_:A));const C=n.map(k=>k.id===S?_:k);return localStorage.setItem(`projects_${l}`,JSON.stringify(C)),_}return null}catch(S){throw console.error("Error updating project:",S),S}},m=async x=>{if(!l)throw new Error("User not authenticated");try{const{error:S}=await J.from("projects").delete().eq("id",x).eq("user_id",l);if(S)throw S;r(_=>_.filter(T=>T.id!==x));const E=n.filter(_=>_.id!==x);localStorage.setItem(`projects_${l}`,JSON.stringify(E))}catch(S){throw console.error("Error deleting project:",S),S}},g=x=>n.find(S=>S.id===x),v=x=>n.filter(S=>S.client_id===x),y=()=>n.filter(x=>x.status==="active"),b=async(x,S)=>{try{return{data:await h({name:x,color:S}),error:null}}catch(E){return{data:null,error:E instanceof Error?E.message:"Failed to create project"}}};return w.useEffect(()=>{d()},[l]),{projects:n,loading:i,error:a,addProject:h,updateProject:p,deleteProject:m,getProjectById:g,getProjectsByClient:v,getActiveProjects:y,createProject:b,refetch:d}}function Sn(e){const{user:t}=Tr(),[n,r]=w.useState([]),[i,s]=w.useState(!0),[a,o]=w.useState(null),l=t==null?void 0:t.id,u=async()=>{if(!l){r([]),s(!1);return}try{s(!0),o(null);const{data:y,error:b}=await J.from("clients").select("*").eq("user_id",l).order("created_at",{ascending:!1});if(b)throw b;r(y||[])}catch(y){console.error("Error fetching clients:",y),o(y instanceof Error?y.message:"Failed to fetch clients");const b=localStorage.getItem(`clients_${l}`);b&&r(JSON.parse(b))}finally{s(!1)}},d=async y=>{if(!l)throw new Error("User not authenticated");try{const b={...y,user_id:l,currency:y.currency||"SEK",status:y.status||"active"},{data:x,error:S}=await J.from("clients").insert([b]).select().single();if(S)throw S;if(x){r(_=>[x,..._]);const E=[x,...n];return localStorage.setItem(`clients_${l}`,JSON.stringify(E)),x}return null}catch(b){console.error("Error adding client:",b);const S=[{id:`local_${Date.now()}`,name:y.name,email:y.email||null,phone:y.phone||null,company:y.company||null,address:y.address||null,hourly_rate:y.hourly_rate||null,notes:y.notes||null,user_id:l,currency:y.currency||"SEK",status:y.status||"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},...n];throw r(S),localStorage.setItem(`clients_${l}`,JSON.stringify(S)),b}},f=async y=>{if(!l)throw new Error("User not authenticated");try{const{id:b,...x}=y,{data:S,error:E}=await J.from("clients").update({...x,updated_at:new Date().toISOString()}).eq("id",b).eq("user_id",l).select().single();if(E)throw E;if(S){r(T=>T.map(C=>C.id===b?S:C));const _=n.map(T=>T.id===b?S:T);return localStorage.setItem(`clients_${l}`,JSON.stringify(_)),S}return null}catch(b){throw console.error("Error updating client:",b),b}},h=async y=>{if(!l)throw new Error("User not authenticated");try{const{error:b}=await J.from("clients").delete().eq("id",y).eq("user_id",l);if(b)throw b;r(S=>S.filter(E=>E.id!==y));const x=n.filter(S=>S.id!==y);localStorage.setItem(`clients_${l}`,JSON.stringify(x))}catch(b){throw console.error("Error deleting client:",b),b}},p=y=>n.find(b=>b.id===y),m=()=>n.filter(y=>y.status==="active"),g=async y=>{await f({id:y,status:"archived"})},v=async y=>{await f({id:y,status:"active"})};return w.useEffect(()=>{u()},[l]),{clients:n,loading:i,error:a,addClient:d,updateClient:f,deleteClient:h,getClientById:p,getActiveClients:m,archiveClient:g,activateClient:v,refetch:u}}function g6e({widget:e,isDarkMode:t}){const{projects:n}=Jn(),{clients:r}=Sn(),{entries:i}=si(),s=n.filter(m=>m.status==="active").length,a=r.filter(m=>m.status==="active").length,o=new Date;o.setDate(o.getDate()-30);const l=i.filter(m=>new Date(m.date+"T00:00:00")>=o),u=l.reduce((m,g)=>m+g.hours,0),d=new Set(l.map(m=>m.date)).size,f=d>0?u/d:0,h=i.length,p=[{label:"Active Projects",value:s.toString(),icon:Ec,color:"text-blue-600",bgColor:"bg-blue-100",darkBgColor:"bg-blue-900/30"},{label:"Active Clients",value:a.toString(),icon:Ui,color:"text-green-600",bgColor:"bg-green-100",darkBgColor:"bg-green-900/30"},{label:"Time Entries",value:h.toString(),icon:bn,color:"text-purple-600",bgColor:"bg-purple-100",darkBgColor:"bg-purple-900/30"},{label:"Avg Hours/Day",value:f.toFixed(1),icon:ht,color:"text-orange-600",bgColor:"bg-orange-100",darkBgColor:"bg-orange-900/30"}];return c.jsxs(Z,{className:"h-full",children:[c.jsx(de,{className:"pb-3",children:c.jsx(he,{className:"text-sm font-medium",children:"Quick Stats"})}),c.jsx(ee,{children:c.jsx("div",{className:"grid grid-cols-2 gap-3",children:p.map((m,g)=>{const v=m.icon;return c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:`p-1.5 rounded-md ${t?m.darkBgColor:m.bgColor}`,children:c.jsx(v,{className:`h-3 w-3 ${m.color}`})}),c.jsx("div",{className:"text-lg font-bold",children:m.value})]}),c.jsx("p",{className:"text-xs text-muted-foreground leading-tight",children:m.label})]},g)})})})]})}function y6e(){const[e,t]=w.useState(!1),[n,r]=w.useState(!1),i=[{icon:nt,label:"Add Income",description:"Log new income",color:"green",action:()=>t(!0)},{icon:t4,label:"Add Expense",description:"Record expense",color:"red",action:()=>r(!0)},{icon:bn,label:"Create Invoice",description:"Generate invoice",color:"blue",action:()=>console.log("Create invoice")},{icon:Ui,label:"New Client",description:"Add client",color:"purple",action:()=>console.log("Add client")},{icon:At,label:"Schedule Meeting",description:"Book appointment",color:"orange",action:()=>console.log("Schedule meeting")},{icon:Vw,label:"View Reports",description:"Analytics",color:"indigo",action:()=>console.log("View reports")}],s=o=>{o.preventDefault(),t(!1)},a=o=>{o.preventDefault(),r(!1)};return e?c.jsxs(Z,{className:"h-full",children:[c.jsx(de,{className:"pb-3",children:c.jsxs(he,{className:"text-lg flex items-center gap-2",children:[c.jsx(nt,{className:"h-5 w-5 text-green-600"}),"Add Income"]})}),c.jsx(ee,{children:c.jsxs("form",{onSubmit:s,className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Amount"}),c.jsx(ce,{type:"number",placeholder:"0.00",className:"text-lg font-bold",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Description"}),c.jsx(ce,{placeholder:"Client payment, consulting, etc.",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Category"}),c.jsxs("select",{className:"w-full p-2 border rounded text-sm",title:"Income Category",children:[c.jsx("option",{children:"Client Payment"}),c.jsx("option",{children:"Consulting"}),c.jsx("option",{children:"Retainer"}),c.jsx("option",{children:"Other"})]})]}),c.jsxs("div",{className:"flex gap-2 pt-2",children:[c.jsx(H,{type:"submit",size:"sm",className:"flex-1",children:"Add Income"}),c.jsx(H,{type:"button",size:"sm",variant:"outline",onClick:()=>t(!1),children:"Cancel"})]})]})})]}):n?c.jsxs(Z,{className:"h-full",children:[c.jsx(de,{className:"pb-3",children:c.jsxs(he,{className:"text-lg flex items-center gap-2",children:[c.jsx(t4,{className:"h-5 w-5 text-red-600"}),"Add Expense"]})}),c.jsx(ee,{children:c.jsxs("form",{onSubmit:a,className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Amount"}),c.jsx(ce,{type:"number",placeholder:"0.00",className:"text-lg font-bold",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Description"}),c.jsx(ce,{placeholder:"Software, office supplies, etc.",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Category"}),c.jsxs("select",{className:"w-full p-2 border rounded text-sm",title:"Expense Category",children:[c.jsx("option",{children:"Software"}),c.jsx("option",{children:"Office"}),c.jsx("option",{children:"Travel"}),c.jsx("option",{children:"Marketing"}),c.jsx("option",{children:"Other"})]})]}),c.jsxs("div",{className:"flex gap-2 pt-2",children:[c.jsx(H,{type:"submit",size:"sm",className:"flex-1",children:"Add Expense"}),c.jsx(H,{type:"button",size:"sm",variant:"outline",onClick:()=>r(!1),children:"Cancel"})]})]})})]}):c.jsxs(Z,{className:"h-full",children:[c.jsx(de,{className:"pb-3",children:c.jsxs(he,{className:"text-lg flex items-center gap-2",children:[c.jsx(Qo,{className:"h-5 w-5 text-gray-600"}),"Quick Actions"]})}),c.jsxs(ee,{children:[c.jsx("div",{className:"grid grid-cols-2 gap-2",children:i.map((o,l)=>{const u=o.icon,d={green:"bg-green-50 hover:bg-green-100 dark:bg-green-900/20 dark:hover:bg-green-900/30 text-green-700 dark:text-green-400",red:"bg-red-50 hover:bg-red-100 dark:bg-red-900/20 dark:hover:bg-red-900/30 text-red-700 dark:text-red-400",blue:"bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-400",purple:"bg-purple-50 hover:bg-purple-100 dark:bg-purple-900/20 dark:hover:bg-purple-900/30 text-purple-700 dark:text-purple-400",orange:"bg-orange-50 hover:bg-orange-100 dark:bg-orange-900/20 dark:hover:bg-orange-900/30 text-orange-700 dark:text-orange-400",indigo:"bg-indigo-50 hover:bg-indigo-100 dark:bg-indigo-900/20 dark:hover:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400"};return c.jsx("button",{onClick:o.action,className:`p-3 rounded-lg text-left transition-colors ${d[o.color]}`,children:c.jsxs("div",{className:"flex flex-col items-center gap-1",children:[c.jsx(u,{className:"h-5 w-5"}),c.jsx("div",{className:"text-xs font-medium text-center",children:o.label})]})},l)})}),c.jsxs("div",{className:"mt-4 pt-4 border-t",children:[c.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Today's Summary"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Income:"}),c.jsx("span",{className:"font-medium text-green-600",children:"+25,000 kr"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Expenses:"}),c.jsx("span",{className:"font-medium text-red-600",children:"-4,500 kr"})]})]})]})]})]})}function v6e({widget:e,isDarkMode:t}){const{entries:n}=si(),{projects:r}=Jn(),{clients:i}=Sn(),s=n.slice(0,10).map(d=>{const f=r.find(m=>m.id===d.project_id),h=i.find(m=>m.id===(f==null?void 0:f.client_id)),p=u(d.created_at);return{id:d.id,type:"time",message:`Logged ${d.hours}h on ${(f==null?void 0:f.name)||"Unknown Project"}${h?` for ${h.name}`:""}`,time:p,icon:ht,color:"text-blue-600",date:d.created_at}}),a=r.sort((d,f)=>new Date(f.created_at||"").getTime()-new Date(d.created_at||"").getTime()).slice(0,3).map(d=>{const f=i.find(p=>p.id===d.client_id),h=u(d.created_at||"");return{id:`project-${d.id}`,type:"project",message:`Created project "${d.name}"${f?` for ${f.name}`:""}`,time:h,icon:N0,color:"text-green-600",date:d.created_at||""}}),o=i.sort((d,f)=>new Date(f.created_at||"").getTime()-new Date(d.created_at||"").getTime()).slice(0,2).map(d=>{const f=u(d.created_at||"");return{id:`client-${d.id}`,type:"client",message:`Added new client "${d.name}"${d.company?` (${d.company})`:""}`,time:f,icon:Gs,color:"text-purple-600",date:d.created_at||""}}),l=[...s,...a,...o].sort((d,f)=>new Date(f.date).getTime()-new Date(d.date).getTime()).slice(0,6);function u(d){if(!d)return"Unknown time";const f=new Date(d),p=new Date().getTime()-f.getTime(),m=Math.floor(p/(1e3*60)),g=Math.floor(m/60),v=Math.floor(g/24);return m<1?"Just now":m<60?`${m} minutes ago`:g<24?`${g} hour${g>1?"s":""} ago`:v===1?"Yesterday":v<7?`${v} days ago`:v<30?`${Math.floor(v/7)} week${Math.floor(v/7)>1?"s":""} ago`:f.toLocaleDateString("sv-SE")}return c.jsxs(Z,{className:"h-full",children:[c.jsx(de,{className:"pb-3",children:c.jsx(he,{className:"text-sm font-medium",children:"Recent Activities"})}),c.jsx(ee,{children:c.jsx("div",{className:"space-y-3",children:l.length===0?c.jsx("div",{className:"text-center py-4",children:c.jsx("p",{className:"text-xs text-muted-foreground",children:"No recent activities"})}):l.map(d=>{const f=d.icon;return c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"p-1.5 rounded-full bg-muted flex-shrink-0",children:c.jsx(f,{className:`h-3 w-3 ${d.color}`})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-xs font-medium leading-relaxed",children:d.message}),c.jsx("p",{className:"text-xs text-muted-foreground",children:d.time})]})]},d.id)})})})]})}function x6e({widget:e,isDarkMode:t}){const{projects:n}=Jn(),{clients:r}=Sn(),{entries:i}=si(),s=n.filter(d=>d.status==="active").slice(0,3).map(d=>{const f=r.find(g=>g.id===d.client_id),p=i.filter(g=>g.project_id===d.id).reduce((g,v)=>g+v.hours,0);let m=0;if(d.budget&&d.hourly_rate){const g=d.budget/d.hourly_rate;m=Math.min(p/g*100,100)}else if(d.start_date&&d.end_date){const g=new Date(d.start_date),v=new Date(d.end_date),y=new Date,b=v.getTime()-g.getTime(),x=y.getTime()-g.getTime();m=Math.max(0,Math.min(x/b*100,100))}else m=Math.min(p*2,100);return{id:d.id,name:d.name,client:(f==null?void 0:f.name)||"No Client",status:d.status||"active",progress:Math.round(m),hoursLogged:Math.round(p*10)/10,budget:d.budget||0,deadline:d.end_date,hourlyRate:d.hourly_rate}}),a=d=>{switch(d){case"active":return"text-blue-600 bg-blue-100";case"planning":return"text-yellow-600 bg-yellow-100";case"on-hold":return"text-orange-600 bg-orange-100";case"completed":return"text-green-600 bg-green-100";case"cancelled":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},o=d=>{switch(d){case"active":return"Active";case"planning":return"Planning";case"on-hold":return"On Hold";case"completed":return"Completed";case"cancelled":return"Cancelled";default:return d}},l=d=>{if(!d)return!1;const f=new Date(d),h=new Date,p=Math.ceil((f.getTime()-h.getTime())/(1e3*60*60*24));return p<=7&&p>=0},u=d=>d?`Due ${new Date(d).toLocaleDateString("sv-SE")}`:"No deadline";return c.jsxs(Z,{className:"h-full",children:[c.jsx(de,{className:"pb-3",children:c.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[c.jsx(N0,{className:"h-4 w-4"}),"Active Projects"]})}),c.jsx(ee,{children:c.jsx("div",{className:"space-y-4",children:s.length===0?c.jsx("div",{className:"text-center py-4",children:c.jsx("p",{className:"text-xs text-muted-foreground",children:"No active projects"})}):s.map(d=>c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:"text-sm font-medium truncate",children:d.name}),c.jsx("p",{className:"text-xs text-muted-foreground",children:d.client})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[l(d.deadline)&&c.jsx(Eg,{className:"h-3 w-3 text-red-500"}),c.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a(d.status)}`,children:o(d.status)})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[c.jsxs("span",{children:[d.progress,"% complete"]}),c.jsxs("span",{children:[d.hoursLogged,"h logged"]})]}),c.jsx("div",{className:"w-full bg-muted rounded-full h-1.5",children:c.jsx("div",{className:"bg-primary h-1.5 rounded-full transition-all duration-300",style:{width:`${d.progress}%`}})})]}),c.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-xs",children:"SEK"}),c.jsx("span",{children:d.budget>0?le(d.budget):"No budget"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(ht,{className:"h-3 w-3"}),c.jsx("span",{children:u(d.deadline)})]})]})]},d.id))})})]})}function b6e({isDarkMode:e}){const t=[{month:"Jan",balance:45e3,netFlow:7e3},{month:"Feb",balance:53500,netFlow:8500},{month:"Mar",balance:59700,netFlow:6200},{month:"Apr",balance:70700,netFlow:11e3},{month:"May",balance:79200,netFlow:8500},{month:"Jun",balance:88200,netFlow:9e3}],n=t[t.length-1].balance,r=t[t.length-1].netFlow,i=t[t.length-2].netFlow,s=r-i,a=s/i*100,o=n+r*1.05;return c.jsxs(Z,{className:"h-full",children:[c.jsx(de,{className:"pb-3",children:c.jsxs(he,{className:"text-lg flex items-center gap-2",children:[c.jsx(mn,{className:"h-5 w-5 text-green-600"}),"Cash Flow"]})}),c.jsxs(ee,{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-muted-foreground",children:"Current Balance"}),c.jsx("div",{className:"text-xl font-bold text-green-600",children:le(n)})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-muted-foreground",children:"Monthly Net Flow"}),c.jsxs("div",{className:`text-xl font-bold flex items-center gap-1 ${r>=0?"text-green-600":"text-red-600"}`,children:[r>=0?c.jsx(ti,{className:"h-4 w-4"}):c.jsx(ob,{className:"h-4 w-4"}),le(Math.abs(r))]})]})]}),c.jsx("div",{className:"h-24",children:c.jsx(Mi,{width:"100%",height:"100%",children:c.jsxs(wD,{data:t,children:[c.jsx(Ea,{dataKey:"month",hide:!0}),c.jsx(Sa,{hide:!0}),c.jsx(Bs,{formatter:l=>[le(l),"Balance"],labelStyle:{color:e?"#fff":"#000"},contentStyle:{backgroundColor:e?"#1e293b":"#fff",border:e?"1px solid #334155":"1px solid #e2e8f0",borderRadius:"6px",fontSize:"12px"}}),c.jsx(qg,{type:"monotone",dataKey:"balance",stroke:"#16a34a",strokeWidth:2,dot:!1,name:"Balance"})]})})}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:`flex items-center gap-2 text-xs p-2 rounded ${s>=0?"bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-400":"bg-red-50 text-red-700 dark:bg-red-900/20 dark:text-red-400"}`,children:[s>=0?c.jsx(ti,{className:"h-3 w-3"}):c.jsx(ob,{className:"h-3 w-3"}),c.jsxs("span",{children:[s>=0?"+":"",a.toFixed(1),"% vs last month"]})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[c.jsx(mn,{className:"h-3 w-3"}),c.jsxs("span",{children:["Projected next month: ",le(o)]})]}),r<5e3&&c.jsxs("div",{className:"flex items-center gap-2 text-xs p-2 rounded bg-yellow-50 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400",children:[c.jsx(Za,{className:"h-3 w-3"}),c.jsx("span",{children:"Consider increasing revenue streams"})]})]}),c.jsxs("div",{className:"pt-2 border-t",children:[c.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Quick Actions"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{className:"flex-1 text-xs py-1 px-2 bg-blue-100 hover:bg-blue-200 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded transition-colors",children:"Add Income"}),c.jsx("button",{className:"flex-1 text-xs py-1 px-2 bg-red-100 hover:bg-red-200 dark:bg-red-900/20 dark:hover:bg-red-900/30 text-red-700 dark:text-red-400 rounded transition-colors",children:"Log Expense"})]})]})]})]})}function w6e({isDarkMode:e}){const t=[{month:"Apr",conservative:70700,realistic:70700,optimistic:70700},{month:"May",conservative:79200,realistic:79200,optimistic:79200},{month:"Jun",conservative:88200,realistic:88200,optimistic:88200},{month:"Jul",conservative:93e3,realistic:97e3,optimistic:102e3,isProjection:!0},{month:"Aug",conservative:97500,realistic:105500,optimistic:116e3,isProjection:!0},{month:"Sep",conservative:101800,realistic:114200,optimistic:131500,isProjection:!0}],n=88200,r=26e3/88200*100,s=Math.floor(n/18500);return c.jsxs(Z,{className:"h-full",children:[c.jsx(de,{className:"pb-3",children:c.jsxs(he,{className:"text-lg flex items-center gap-2",children:[c.jsx(ti,{className:"h-5 w-5 text-blue-600"}),"Cash Flow Projections"]})}),c.jsxs(ee,{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[c.jsxs("div",{className:"p-2 rounded bg-green-50 dark:bg-green-900/20",children:[c.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:"Conservative"}),c.jsx("div",{className:"text-lg font-bold text-green-700 dark:text-green-300",children:le(t[t.length-1].conservative)})]}),c.jsxs("div",{className:"p-2 rounded bg-blue-50 dark:bg-blue-900/20",children:[c.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium",children:"Realistic"}),c.jsx("div",{className:"text-lg font-bold text-blue-700 dark:text-blue-300",children:le(t[t.length-1].realistic)})]}),c.jsxs("div",{className:"p-2 rounded bg-purple-50 dark:bg-purple-900/20",children:[c.jsx("div",{className:"text-xs text-purple-600 dark:text-purple-400 font-medium",children:"Optimistic"}),c.jsx("div",{className:"text-lg font-bold text-purple-700 dark:text-purple-300",children:le(t[t.length-1].optimistic)})]})]}),c.jsx("div",{className:"h-32",children:c.jsx(Mi,{width:"100%",height:"100%",children:c.jsxs(dJ,{data:t,children:[c.jsx(Ea,{dataKey:"month",tick:{fontSize:10,fill:e?"#94a3b8":"#64748b"},axisLine:!1,tickLine:!1}),c.jsx(Sa,{hide:!0}),c.jsx(Bs,{formatter:(a,o)=>[le(a),o.charAt(0).toUpperCase()+o.slice(1)],labelStyle:{color:e?"#fff":"#000"},contentStyle:{backgroundColor:e?"#1e293b":"#fff",border:e?"1px solid #334155":"1px solid #e2e8f0",borderRadius:"6px",fontSize:"12px"}}),c.jsx(Kf,{type:"monotone",dataKey:"optimistic",stackId:"1",stroke:"#9333ea",fill:"#9333ea",fillOpacity:.1,strokeWidth:1,strokeDasharray:"3 3"}),c.jsx(Kf,{type:"monotone",dataKey:"realistic",stackId:"2",stroke:"#2563eb",fill:"#2563eb",fillOpacity:.2,strokeWidth:2}),c.jsx(Kf,{type:"monotone",dataKey:"conservative",stackId:"3",stroke:"#16a34a",fill:"#16a34a",fillOpacity:.3,strokeWidth:1})]})})}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-1 text-blue-600 dark:text-blue-400",children:[c.jsx(ti,{className:"h-3 w-3"}),c.jsx("span",{children:"3-Month Growth"})]}),c.jsxs("span",{className:"font-medium",children:["+",r.toFixed(1),"%"]})]}),c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-1 text-orange-600 dark:text-orange-400",children:[c.jsx(At,{className:"h-3 w-3"}),c.jsx("span",{children:"Cash Runway"})]}),c.jsxs("span",{className:"font-medium",children:[s," months"]})]}),c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400",children:[c.jsx(ul,{className:"h-3 w-3"}),c.jsx("span",{children:"Goal: 1,500,000 kr"})]}),c.jsx("span",{className:"font-medium",children:"75% achieved"})]})]}),s<6&&c.jsxs("div",{className:"flex items-center gap-2 text-xs p-2 rounded bg-orange-50 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400",children:[c.jsx(Eg,{className:"h-3 w-3"}),c.jsx("span",{children:"Consider building larger cash reserves"})]}),c.jsxs("div",{className:"pt-2 border-t",children:[c.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Model Assumptions"}),c.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[c.jsx("div",{children:" Conservative: 5% growth/month"}),c.jsx("div",{children:" Realistic: 8% growth/month"}),c.jsx("div",{children:" Optimistic: 12% growth/month"})]})]})]})]})}function fJ({widget:e,isDarkMode:t}){return c.jsx(Z,{className:"h-full border-dashed border-2",children:c.jsx(ee,{className:"p-6 flex items-center justify-center h-full",children:c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center mx-auto",children:c.jsx(nt,{className:"h-6 w-6 text-muted-foreground"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-sm mb-1",children:"Add Content"}),c.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"This widget is ready for your content"}),c.jsx(H,{variant:"outline",size:"sm",children:"Configure"})]})]})})})}function pS(e){const[t,n]=w.useState(null),[r,i]=w.useState(!0),[s,a]=w.useState(null),o=async()=>{if(!e){i(!1);return}try{i(!0),a(null);const{data:h,error:p}=await J.from("user_profiles").select("auto_generate_yearly_vat, vat_rate_income, vat_rate_expenses, vat_payment_month, vat_payment_day").eq("id",e).single();if(p)throw p;n(h)}catch(h){console.error("Error fetching VAT settings:",h),a(h instanceof Error?h.message:"Failed to load VAT settings")}finally{i(!1)}},l=async h=>{if(!e)return console.log(` Cannot calculate VAT for ${h}: no userId`),null;console.log(` Fetching fresh VAT settings for ${h} calculation...`);const{data:p,error:m}=await J.from("user_profiles").select("auto_generate_yearly_vat, vat_rate_income, vat_rate_expenses, vat_payment_month, vat_payment_day").eq("id",e).single();if(m)return console.error(` Error fetching VAT settings for ${h}:`,m),null;if(!(p!=null&&p.auto_generate_yearly_vat))return console.log(` Cannot calculate VAT for ${h}: auto_generate_yearly_vat=${p==null?void 0:p.auto_generate_yearly_vat}`),null;try{console.log(` Calculating MOMS for year ${h}...`),console.log(" Fresh VAT Settings:",p),console.log(` Querying invoices for ${h}...`);const{data:g,error:v}=await J.from("invoice_items").select("total_amount, invoice_date, client_id, project_id, description").eq("user_id",e).gte("invoice_date",`${h}-01-01`).lt("invoice_date",`${h+1}-01-01`);if(v)throw v;console.log(` Found ${(g==null?void 0:g.length)||0} invoice items for ${h}:`,g),console.log(` Querying business expenses for ${h}...`);const{data:y,error:b}=await J.from("cash_flow_entries").select("amount, description, category, date, is_budget_entry, is_recurring_instance, is_recurring, recurring_interval").eq("user_id",e).eq("type","expense").gte("date",`${h}-01-01`).lte("date",`${h}-12-31`).not("category","in","(Salary,Employer Tax,MOMS Tax,Frmner)");if(b)throw b;console.log(` Found ${(y==null?void 0:y.length)||0} business expense entries for ${h}:`,y);const x=(y||[]).reduce((A,j)=>{let D=j.amount;if(j.is_recurring&&j.recurring_interval==="monthly"&&j.is_budget_entry){const P=new Date(j.date),M=P.getMonth();if(P.getFullYear()===h){const O=12-M;D=j.amount*O,console.log(` Recurring expense "${j.description}": ${j.amount}  ${O} months = ${D}`)}}return A+D},0);console.log(` Total expense amount for ${h} (including recurring): ${x}`),console.log(` Found ${(g==null?void 0:g.length)||0} invoices and ${(y==null?void 0:y.length)||0} expenses for ${h}`,{expenseBreakdown:y==null?void 0:y.reduce((A,j)=>{const D=j.is_budget_entry?"budget":j.is_recurring_instance?"recurring":"manual";return A[D]=(A[D]||0)+1,A},{})});const S=(g||[]).reduce((A,j)=>A+j.total_amount,0),E=S*(p.vat_rate_income/100);console.log(` Income VAT calculation for ${h}:`,{invoiceCount:(g==null?void 0:g.length)||0,incomeTaxableAmount:Math.round(S*100)/100,incomeVatRate:p.vat_rate_income+"%",totalIncomeVat:Math.round(E*100)/100});const _=x-x/(1+p.vat_rate_expenses/100);console.log(` Expense VAT calculation for ${h}:`,{expenseCount:(y==null?void 0:y.length)||0,totalExpenseAmount:Math.round(x*100)/100,expenseVatRate:p.vat_rate_expenses+"%",totalExpenseVat:Math.round(_*100)/100});const T=E-_,C=h+1,k=new Date(C,(p.vat_payment_month||1)-1,Math.min(p.vat_payment_day||12,28));return console.log(` Net MOMS calculation for ${h}:`,{totalIncomeVat:Math.round(E*100)/100,totalExpenseVat:Math.round(_*100)/100,netVatObligation:Math.round(T*100)/100,paymentDate:k.toISOString().split("T")[0]}),{year:h,totalIncomeVat:Math.round(E*100)/100,totalExpenseVat:Math.round(_*100)/100,netVatObligation:Math.round(T*100)/100,paymentDate:k}}catch(g){throw console.error(` Error calculating VAT for ${h}:`,g),g}},u=async h=>{if(console.log(` Checking if VAT entry should be created for ${h.year}: netVatObligation=${h.netVatObligation}, userId=${!!e}`),!e||h.netVatObligation<=0)return console.log(` No VAT owed for ${h.year} (${h.netVatObligation}), skipping entry creation`),null;try{const{data:p}=await J.from("cash_flow_entries").select("id").eq("user_id",e).eq("category","MOMS Tax").ilike("description",`%${h.year}%`).single();if(p)return console.log(` MOMS tax entry already exists for ${h.year}`),p.id;const{data:m,error:g}=await J.from("cash_flow_entries").insert([{user_id:e,type:"expense",amount:h.netVatObligation,description:`MOMS Tax ${h.year} (Income VAT: ${h.totalIncomeVat} - Expense VAT: ${h.totalExpenseVat})`,category:"MOMS Tax",date:h.paymentDate.toISOString().split("T")[0],is_recurring:!1,is_budget_entry:!1,is_recurring_instance:!1,vat_amount:0,amount_excluding_vat:h.netVatObligation,vat_rate:0}]).select("id").single();if(g)throw g;return console.log(` Created MOMS tax entry for ${h.year}:`,{amount:h.netVatObligation,date:h.paymentDate.toISOString().split("T")[0],description:`MOMS Tax ${h.year}`,id:m.id}),m.id}catch(p){throw console.error(` Error creating MOMS tax entry for ${h.year}:`,p),p}},d=async h=>{const p=await l(h);return p?await u(p):null},f=async()=>{if(!(t!=null&&t.auto_generate_yearly_vat)||!e)return;const h=new Date().getFullYear(),p=h-1;try{console.log(" Updating VAT calculations due to data changes..."),await J.from("cash_flow_entries").delete().eq("user_id",e).eq("category","MOMS Tax").or(`date.gte.${p}-01-01,date.gte.${h}-01-01`),await d(p),await d(h),console.log(" VAT calculations updated successfully")}catch(m){console.error(" Error updating VAT calculations:",m)}};return w.useEffect(()=>{o()},[e]),{vatSettings:t,loading:r,error:s,calculateYearlyVat:l,createYearlyVatEntry:u,processYearlyVat:d,updateCurrentVatCalculations:f,refetch:o}}function hJ(e){const[t,n]=w.useState([]),[r,i]=w.useState(!0),[s,a]=w.useState(null),{updateCurrentVatCalculations:o}=pS(e),l=async()=>{if(!e){i(!1);return}try{i(!0),a(null);const{data:h,error:p}=await J.from("user_profiles").select("auto_generate_yearly_vat, vat_rate_income").eq("id",e).single();p&&p.code!=="PGRST116"&&console.error("Error fetching user settings:",p);const{data:m,error:g}=await J.from("cash_flow_entries").select("*").eq("user_id",e).order("date",{ascending:!1});if(g)throw g;const{data:v,error:y}=await J.from("invoice_items").select(`
          id,
          description,
          total_amount,
          due_date,
          currency,
          status,
          created_at,
          client_id,
          project_id
        `).eq("user_id",e).in("status",["sent","paid"]).not("due_date","is",null).order("due_date",{ascending:!1});if(y)throw y;console.log(" Invoice Items Fetched:",{total:(v||[]).length,items:v==null?void 0:v.map(E=>({id:E.id,description:E.description,amount:E.total_amount,due_date:E.due_date,status:E.status}))});const b=(m||[]).map(E=>{var C,k;let _="manual",T=!0;return E.is_budget_entry&&(_="budget",T=!1),((C=E.description)!=null&&C.toLowerCase().includes("intershape")||(k=E.description)!=null&&k.toLowerCase().includes("digitalidg"))&&console.log(` DEBUG Entry "${E.description}":`,{id:E.id,is_budget_entry:E.is_budget_entry,source:_,is_editable:T,raw_entry:E}),{...E,is_editable:T,source:_}}),x=(v||[]).map(E=>{const _=E.total_amount;let T=_,C=0,k=0;return h!=null&&h.auto_generate_yearly_vat&&(h==null?void 0:h.vat_rate_income)>0&&(k=h.vat_rate_income,C=_*(k/100),T=_+C,console.log(` VAT Calculation for invoice "${E.description}":`,{baseAmount:_,vatRate:k+"%",vatAmount:Math.round(C*100)/100,totalWithVat:Math.round(T*100)/100})),{id:`invoice_${E.id}`,user_id:e,type:"income",amount:T,description:`Invoice: ${E.description}${E.status==="paid"?" (PAID)":""}`,category:"Client Payment",date:E.due_date,is_recurring:!1,recurring_interval:null,next_due_date:null,is_budget_entry:!1,is_recurring_instance:!1,project_id:E.project_id,client_id:E.client_id,created_at:E.created_at,updated_at:new Date().toISOString(),vat_amount:Math.round(C*100)/100,amount_excluding_vat:Math.round(_*100)/100,vat_rate:k,is_editable:!1,source:"invoice"}}),S=[...b,...x];console.log(" Cash Flow Entries Loaded:",{total:S.length,manual:S.filter(E=>E.source==="manual").length,budget:S.filter(E=>E.source==="budget").length,invoice:S.filter(E=>E.source==="invoice").length,income:S.filter(E=>E.type==="income").length,expenses:S.filter(E=>E.type==="expense").length,editable:S.filter(E=>E.is_editable).length,readonly:S.filter(E=>!E.is_editable).length}),n(S)}catch(h){console.error("Error loading cash flow data:",h),a(h instanceof Error?h.message:"Failed to load cash flow data")}finally{i(!1)}};return w.useEffect(()=>{l()},[e]),{entries:t,loading:r,error:s,addEntry:async h=>{if(e)try{i(!0),a(null);const{data:p,error:m}=await J.from("cash_flow_entries").insert([{...h,user_id:e}]).select().single();if(m)throw m;const g={...p,is_editable:!p.is_budget_entry,source:p.is_budget_entry?"budget":"manual"};n(v=>[g,...v]),console.log(" New entry added:",p.description,p.amount,p.is_budget_entry?"[BUDGET]":"[MANUAL]"),(h.type==="income"||h.type==="expense")&&o&&o().catch(v=>{console.log("VAT recalculation failed (non-critical):",v)})}catch(p){throw console.error("Error adding cash flow entry:",p),a(p instanceof Error?p.message:"Failed to add entry"),p}finally{i(!1)}},updateEntry:async(h,p)=>{const m=t.find(g=>g.id===h);if(!m||!m.is_editable){a("Budget entries cannot be edited from cash flow page"),console.warn("Attempted to edit read-only budget entry:",h);return}try{i(!0),a(null);const{data:g,error:v}=await J.from("cash_flow_entries").update(p).eq("id",h).eq("user_id",e).select().single();if(v)throw v;n(b=>b.map(x=>x.id===h?{...x,...g,is_editable:!0,source:"manual"}:x)),console.log(" Manual entry updated:",g.description,g.amount);const y={...m,...g};(y.type==="income"||y.type==="expense")&&o&&o().catch(b=>{console.log("VAT recalculation failed (non-critical):",b)})}catch(g){throw console.error("Error updating cash flow entry:",g),a(g instanceof Error?g.message:"Failed to update entry"),g}finally{i(!1)}},deleteEntry:async(h,p=!1)=>{let m=t.find(v=>v.id===h),g=h;if(!m&&h.includes("_recurring_")){const v=h.split("_recurring_")[0];m=t.find(y=>y.id===v),g=v,console.log(" Recurring instance delete - converting to original entry:",{generatedId:h,originalId:g,foundOriginal:!!m})}if(console.log(` DELETE ATTEMPT for "${m==null?void 0:m.description}":`,{entryId:h,actualEntryId:g,found:!!m,is_editable:m==null?void 0:m.is_editable,source:m==null?void 0:m.source,is_budget_entry:m==null?void 0:m.is_budget_entry,allowBudgetEntryDeletion:p,totalEntries:t.length,entryIds:t.map(v=>{var y;return{id:v.id,desc:(y=v.description)==null?void 0:y.substring(0,20)}})}),g.startsWith("invoice_")){const v="Invoice entries cannot be deleted";return a(v),console.warn(" Delete blocked:",v,{entryId:g}),!1}if(!m){const v="Entry not found";return a(v),console.warn(" Delete blocked:",v,{entryId:g,availableIds:t.map(y=>y.id)}),!1}if(!m.is_editable&&!p){const v=`${m.source} entries cannot be deleted from cash flow page`;return a(v),console.warn(" Delete blocked:",v,{entry:m,entryId:g}),!1}try{i(!0),a(null);const{error:v}=await J.from("cash_flow_entries").delete().eq("id",g).eq("user_id",e);if(v)throw v;return n(y=>y.filter(b=>b.id!==g)),console.log(" Manual entry deleted"),(m.type==="income"||m.type==="expense")&&o&&o().catch(y=>{console.log("VAT recalculation failed (non-critical):",y)}),!0}catch(v){return console.error("Error deleting cash flow entry:",v),a(v instanceof Error?v.message:"Failed to delete entry"),!1}finally{i(!1)}},refetch:l}}function E6e(e){const[t,n]=w.useState([]),[r,i]=w.useState(!0),[s,a]=w.useState(null),o=async()=>{if(!e){i(!1);return}try{i(!0);const{data:m,error:g}=await J.from("budgets").select("*").eq("user_id",e).eq("is_active",!0).order("created_at",{ascending:!1});if(g)throw g;n(m||[])}catch(m){a(m instanceof Error?m.message:"An error occurred")}finally{i(!1)}},l=async m=>{if(!e)return null;try{const{data:g,error:v}=await J.from("budgets").insert([{...m,user_id:e}]).select().single();if(v)throw v;return n(y=>[g,...y]),g}catch(g){return a(g instanceof Error?g.message:"Failed to add budget"),null}},u=async(m,g)=>{try{const{data:v,error:y}=await J.from("budgets").update(g).eq("id",m).eq("user_id",e).select().single();if(y)throw y;return n(b=>b.map(x=>x.id===m?v:x)),v}catch(v){return a(v instanceof Error?v.message:"Failed to update budget"),null}},d=async m=>{try{const{error:g}=await J.from("budgets").delete().eq("id",m).eq("user_id",e);if(g)throw g;return n(v=>v.filter(y=>y.id!==m)),!0}catch(g){return a(g instanceof Error?g.message:"Failed to delete budget"),!1}},f=async m=>{if(!e)return null;try{const{data:g,error:v}=await J.from("budget_entries").insert([{...m,user_id:e}]).select().single();if(v)throw v;return g}catch(g){return a(g instanceof Error?g.message:"Failed to add budget entry"),null}},h=async()=>{if(!e)return[];try{const{data:m,error:g}=await J.from("budget_status").select("*").eq("user_id",e);if(g)throw g;return m||[]}catch(m){return a(m instanceof Error?m.message:"Failed to get budget status"),[]}},p=async m=>{try{const{data:g,error:v}=await J.from("budget_entries").select("*").eq("budget_id",m).eq("user_id",e).order("date",{ascending:!1});if(v)throw v;return g||[]}catch(g){return a(g instanceof Error?g.message:"Failed to get budget entries"),[]}};return w.useEffect(()=>{o()},[e]),{budgets:t,loading:r,error:s,addBudget:l,updateBudget:u,deleteBudget:d,addBudgetEntry:f,getBudgetStatus:h,getBudgetEntries:p,refetch:o}}const mS=()=>{const{user:e}=Tr(),{entries:t,refetch:n,addEntry:r,deleteEntry:i}=hJ((e==null?void 0:e.id)||null),{budgets:s,addBudget:a,updateBudget:o,deleteBudget:l,loading:u}=E6e((e==null?void 0:e.id)||null),{toast:d}=mo(),[f,h]=w.useState([]),[p,m]=w.useState([]),[g,v]=w.useState(!1),y=new Date().toISOString().slice(0,7),b=new Date().getFullYear(),x=()=>new Date().toLocaleDateString("sv-SE",{month:"long",year:"numeric"}),S=()=>new Date().getFullYear().toString(),E=(O,B)=>{if(!t)return[];console.log(" getCategoryEntries called:",{categoryName:O,period:B,totalEntries:t.length,expenseEntries:t.filter(I=>I.type==="expense").length,budgetEntries:t.filter(I=>I.is_budget_entry===!0).length});const R=(I,X)=>{const G=X.toLowerCase(),$=I.toLowerCase();return!!($===G||(G.includes("travel")||G.includes("resa"))&&($.includes("resa")||$.includes("travel")||$.includes("konferens"))||(G.includes("office")||G.includes("kontor"))&&($.includes("kontor")||$.includes("office")||$.includes("material"))||(G.includes("software")||G.includes("tool")||G.includes("verktyg"))&&($.includes("software")||$.includes("tool")||$.includes("verktyg")||$.includes("licens"))||(G.includes("development")||G.includes("utveckling"))&&($.includes("kurs")||$.includes("utbildning")||$.includes("development"))||(G.includes("utrustning")||G.includes("equipment"))&&($.includes("utrustning")||$.includes("equipment")||$.includes("dator")||$.includes("hrdvara"))||G.includes($.split(" ")[0])||$.includes(G.split(" ")[0]))},F=t.filter(I=>I.type==="expense");if(console.log(` Filtering for category "${O}":`,{actualExpenses:F.length,budgetExpenses:F.filter(I=>I.is_budget_entry===!0).length,sampleEntries:F.slice(0,3).map(I=>({description:I.description,category:I.category,is_budget_entry:I.is_budget_entry,amount:I.amount}))}),B==="monthly"){const I=F.filter(X=>{const G=R(X.category,O);return X.is_budget_entry===!0&&console.log(` Budget entry check: "${X.description}" (${X.category}) vs "${O}" = ${G}`),G});return console.log(` Final result for "${O}" (${B}): ${I.length} entries`),I}else{const I=F.filter(X=>{const $=new Date(X.date).getFullYear(),be=$===b&&R(X.category,O);return X.is_budget_entry===!0&&console.log(` Yearly budget entry check: "${X.description}" (${X.category}, ${$}) vs "${O}" (${b}) = ${be}`),be});return console.log(` Final result for "${O}" (${B}): ${I.length} entries`),I}},_=w.useMemo(()=>{const O=f.reduce((I,X)=>I+X.budgeted,0),B=f.reduce((I,X)=>I+X.spent,0),R=p.reduce((I,X)=>I+X.budgeted,0),F=p.reduce((I,X)=>I+X.spent,0);return{monthly:{budget:O,spent:B,remaining:O-B,percentage:O>0?B/O*100:0},annual:{budget:R,spent:F,remaining:R-F,percentage:R>0?F/R*100:0,completed:p.filter(I=>I.status==="completed").length,overdue:p.filter(I=>I.status==="overdue").length}}},[f,p]),T=w.useMemo(()=>f.map(O=>({name:O.name,budgeted:O.budgeted,spent:O.spent,remaining:O.budgeted-O.spent})),[f]),C=w.useMemo(()=>f.filter(O=>O.spent>0).map(O=>({name:O.name,value:O.spent,color:O.color})),[f]);w.useEffect(()=>{(async()=>{if(!(!e||u||!t)){console.log(" useBudgetLogic: Loading data"),console.log(" Budgets:",(s==null?void 0:s.length)||0),console.log(" Entries:",(t==null?void 0:t.length)||0),v(!0);try{const B=s.filter($=>$.period==="monthly");console.log(" Monthly budgets:",B.length);const R=t.filter($=>$.type==="expense");console.log(" All expenses (including budget entries):",R.length),R.forEach($=>{console.log(`  - ${$.description}: ${$.amount} SEK (${$.category})`)});const F=B.map(($,be)=>{console.log(`
 Processing budget: ${$.name} (${$.category})`);const Q=R.filter(xe=>{const ae=$.category.toLowerCase(),ue=xe.category.toLowerCase(),Ee=ue===ae,re=(ae.includes("travel")||ae.includes("resa"))&&(ue.includes("resa")||ue.includes("travel")||ue.includes("konferens")),Je=(ae.includes("office")||ae.includes("kontor"))&&(ue.includes("kontor")||ue.includes("office")||ue.includes("material")),De=(ae.includes("software")||ae.includes("tool")||ae.includes("verktyg"))&&(ue.includes("software")||ue.includes("tool")||ue.includes("verktyg")||ue.includes("licens")),tt=(ae.includes("development")||ae.includes("utveckling"))&&(ue.includes("kurs")||ue.includes("utbildning")||ue.includes("development")),Y=(ae.includes("utrustning")||ae.includes("equipment"))&&(ue.includes("utrustning")||ue.includes("equipment")||ue.includes("dator")||ue.includes("hrdvara")),pe=ae.includes(ue.split(" ")[0]),W=ue.includes(ae.split(" ")[0]),fe=Ee||re||Je||De||tt||Y||pe||W;return fe&&console.log(`     MATCH: "${xe.category}" -> "${$.category}" (${xe.amount} SEK)`),fe}).reduce((xe,ae)=>xe+ae.amount,0);console.log(`     Total spent for ${$.name}: ${Q} SEK`);const K=["#2563eb","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4","#84cc16"];return{id:$.id,name:$.name,budgeted:$.budget_limit,spent:Q,color:K[be%K.length]}}),I=s.filter($=>$.period==="yearly"),X=R.filter($=>new Date($.date).getFullYear()===b),G=I.map(($,be)=>{const Q=X.filter(Ee=>Ee.category.toLowerCase()===$.category.toLowerCase()).reduce((Ee,re)=>Ee+re.amount,0),K=new Date($.start_date||new Date),xe=new Date;let ae="pending";Q>=$.budget_limit?ae="completed":K<xe&&(ae="overdue");const ue=["#dc2626","#ea580c","#d97706","#65a30d","#059669","#0891b2","#7c3aed","#c2410c"];return{id:$.id,name:$.name,budgeted:$.budget_limit,spent:Q,targetDate:$.start_date||new Date().toISOString().split("T")[0],status:ae,color:ue[be%ue.length]}});h(F),m(G),console.log(" Final budget categories:",F.length),F.forEach($=>{console.log(`  - ${$.name}: ${$.spent}/${$.budgeted} SEK`)})}catch(B){console.error("Error loading budgets and expenses:",B),d({title:"Fel",description:"Kunde inte ladda budgetdata.",variant:"destructive"})}finally{v(!1)}}})()},[e==null?void 0:e.id,s,u,t,d,y,b,e]);const k=async(O,B)=>{if(s.find(F=>F.name.toLowerCase().trim()===O.toLowerCase().trim()||F.category.toLowerCase().trim()===O.toLowerCase().trim()))return d({title:"Kategori finns redan",description:`En kategori med namnet "${O.trim()}" finns redan.`,variant:"destructive"}),!1;if(B<0)return d({title:"Fel",description:"Budget kan inte vara negativ. Ange 0 fr ingen budget.",variant:"destructive"}),!1;v(!0);try{if(await a({name:O.trim(),category:O.trim(),budget_limit:B,period:"monthly",start_date:new Date().toISOString().split("T")[0],is_active:!0})&&B>0){const I=new Date;I.setDate(1);const X=new Date(I);X.setMonth(X.getMonth()+1),await r({type:"expense",amount:B,description:`Budget fr ${O.trim()}`,category:O.trim(),date:I.toISOString().split("T")[0],is_recurring:!0,recurring_interval:"monthly",next_due_date:X.toISOString().split("T")[0],is_budget_entry:!0,is_recurring_instance:!1})}return d({title:"Mnadskategori tillagd",description:B>0?`${O.trim()} med budget ${le(B)}/mnad har lagts till`:`${O.trim()} har lagts till utan automatisk budget`}),await n(),!0}catch(F){return console.error("Error adding category:",F),d({title:"Fel",description:"Kunde inte lgga till kategori.",variant:"destructive"}),!1}finally{v(!1)}},A=async(O,B)=>{if(B<0)return d({title:"Fel",description:"Budget kan inte vara negativ. Ange 0 fr ingen budget.",variant:"destructive"}),!1;v(!0);try{if(await o(O,{budget_limit:B,updated_at:new Date().toISOString()})){const F=f.find(I=>I.id===O);return d({title:"Mnadsbudget uppdaterad",description:`Budget fr ${F==null?void 0:F.name} uppdaterad till ${le(B)}/mnad`}),await n(),!0}return!1}catch(R){return console.error("Error updating category:",R),d({title:"Fel",description:"Kunde inte uppdatera budget.",variant:"destructive"}),!1}finally{v(!1)}},j=async O=>{v(!0);try{if(await l(O.id)){const R=t.filter(F=>F.category===O.name&&F.is_budget_entry===!0);for(const F of R)await L(F.id);return d({title:"Kategori borttagen",description:`${O.name} har tagits bort`}),await n(),!0}return!1}catch(B){return console.error("Error deleting category:",B),d({title:"Fel",description:"Kunde inte ta bort kategori.",variant:"destructive"}),!1}finally{v(!1)}},D=async(O,B,R)=>{if(s.find(I=>I.name.toLowerCase().trim()===O.toLowerCase().trim()||I.category.toLowerCase().trim()===O.toLowerCase().trim()))return d({title:"rlig post finns redan",description:`En rlig post med namnet "${O.trim()}" finns redan.`,variant:"destructive"}),!1;if(B<0)return d({title:"Fel",description:"Budget kan inte vara negativ. Ange 0 fr ingen budget.",variant:"destructive"}),!1;v(!0);try{if(await a({name:O.trim(),category:O.trim(),budget_limit:B,period:"yearly",start_date:R,is_active:!0})){if(B>0){const X=new Date(R),G=new Date(X);G.setFullYear(G.getFullYear()+1),await r({type:"expense",amount:B,description:`rlig budget fr ${O.trim()}`,category:O.trim(),date:R,is_recurring:!0,recurring_interval:"yearly",next_due_date:G.toISOString().split("T")[0],is_budget_entry:!0,is_recurring_instance:!1})}return d({title:"rlig post tillagd",description:B>0?`${O.trim()} med budget ${le(B)}/r har lagts till`:`${O.trim()} har lagts till utan automatisk budget`}),await n(),!0}return!1}catch(I){return console.error("Error adding annual item:",I),d({title:"Fel",description:"Kunde inte lgga till rlig post.",variant:"destructive"}),!1}finally{v(!1)}},P=async(O,B,R)=>{if(B<0)return d({title:"Fel",description:"Budget kan inte vara negativ. Ange 0 fr ingen budget.",variant:"destructive"}),!1;v(!0);try{const F={budget_limit:B,updated_at:new Date().toISOString()};if(R&&(F.start_date=R),await o(O,F)){const X=p.find(G=>G.id===O);return d({title:"rlig post uppdaterad",description:`Budget fr ${X==null?void 0:X.name} uppdaterad till ${le(B)}`}),await n(),!0}return!1}catch(F){return console.error("Error updating annual item:",F),d({title:"Fel",description:"Kunde inte uppdatera rlig post.",variant:"destructive"}),!1}finally{v(!1)}},M=async O=>{v(!0);try{return await l(O.id)?(d({title:"rlig post borttagen",description:`${O.name} har tagits bort`}),await n(),!0):!1}catch(B){return console.error("Error deleting annual item:",B),d({title:"Fel",description:"Kunde inte ta bort rlig post.",variant:"destructive"}),!1}finally{v(!1)}},L=async O=>await i(O,!0);return{categories:f,annualItems:p,totals:_,chartData:T,pieData:C,budgetsLoading:u,isLoading:g,getCurrentMonthName:x,getCurrentYear:S,getCategoryEntries:E,handleAddCategory:k,handleUpdateCategory:A,handleDeleteCategory:j,handleAddAnnualItem:D,handleUpdateAnnualItem:P,handleDeleteAnnualItem:M,addEntry:r,deleteEntry:L,addBudget:a,updateBudget:o,deleteBudget:l,refetch:n,entries:t,budgets:s,toast:d}};function S6e({isDarkMode:e}){const{annualItems:t}=mS(),n=t.map(a=>({name:a.name.length>12?a.name.substring(0,12)+"...":a.name,fullName:a.name,budgeted:a.budgeted,spent:a.spent,remaining:Math.max(0,a.budgeted-a.spent)})),r=t.reduce((a,o)=>a+o.budgeted,0),i=t.reduce((a,o)=>a+o.spent,0),s=r>0?i/r*100:0;return c.jsxs(Z,{className:"h-full",children:[c.jsx(de,{className:"pb-2",children:c.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[c.jsx(eo,{className:"h-4 w-4"}),"rsbudget vs Faktisk"]})}),c.jsx(ee,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:le(i)}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Totalt spenderat"})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"font-medium",children:le(r)}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Total budget"})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex justify-between text-xs",children:[c.jsx("span",{children:"Frbrukat"}),c.jsxs("span",{children:[s.toFixed(1),"%"]})]}),c.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:c.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${s>100?"bg-red-500":s>80?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(s,100)}%`}})})]}),n.length>0?c.jsx("div",{className:"h-40",children:c.jsx(Mi,{width:"100%",height:"100%",children:c.jsxs(l1,{data:n,margin:{top:5,right:5,left:5,bottom:5},children:[c.jsx(Ea,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:e?"#94a3b8":"#64748b"}}),c.jsx(Sa,{hide:!0}),c.jsx(Bs,{formatter:(a,o)=>[le(a),o==="budgeted"?"Budget":o==="spent"?"Spenderat":"terstr"],labelFormatter:a=>{const o=n.find(l=>l.name===a);return(o==null?void 0:o.fullName)||a},labelStyle:{color:e?"#fff":"#000"},contentStyle:{backgroundColor:e?"#1e293b":"#fff",border:e?"1px solid #334155":"1px solid #e2e8f0",borderRadius:"6px",fontSize:"12px"}}),c.jsx(K0,{wrapperStyle:{fontSize:"10px"},iconType:"rect"}),c.jsx(Ya,{dataKey:"budgeted",fill:e?"#475569":"#e2e8f0",name:"Budget",radius:[2,2,0,0]}),c.jsx(Ya,{dataKey:"spent",fill:e?"#3b82f6":"#2563eb",name:"Spenderat",radius:[2,2,0,0]})]})})}):c.jsx("div",{className:"h-40 flex items-center justify-center text-muted-foreground text-sm",children:"Inga rliga budgetposter att visa"}),c.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.length," rliga budgetposter  Uppdateras i realtid"]})]})})]})}const EB=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#06b6d4","#ec4899","#84cc16","#f97316","#6366f1"];function _6e({isDarkMode:e}){const{annualItems:t}=mS(),n=t.filter(o=>o.spent>0).map((o,l)=>({name:o.name,value:o.spent,color:o.color||EB[l%EB.length],percentage:0})),r=n.reduce((o,l)=>o+l.value,0);n.forEach(o=>{o.percentage=r>0?o.value/r*100:0}),n.sort((o,l)=>l.value-o.value);const i=t.filter(o=>o.spent>0).length,s=t.length,a=i>0?r/i:0;return c.jsxs(Z,{className:"h-full",children:[c.jsx(de,{className:"pb-2",children:c.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[c.jsx(Vw,{className:"h-4 w-4"}),"rlig Utgiftsfrdelning"]})}),c.jsx(ee,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:le(r)}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Totalt spenderat"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:le(a)}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Snitt per kategori"})]})]}),n.length>0?c.jsx("div",{className:"h-48",children:c.jsx(Mi,{width:"100%",height:"100%",children:c.jsxs(Kg,{children:[c.jsx(Ch,{data:n,cx:"50%",cy:"50%",innerRadius:30,outerRadius:70,dataKey:"value",labelLine:!1,children:n.map((o,l)=>c.jsx(il,{fill:o.color},`cell-${l}`))}),c.jsx(Bs,{formatter:o=>[le(o),"Spenderat"],labelStyle:{color:e?"#fff":"#000"},contentStyle:{backgroundColor:e?"#1e293b":"#fff",border:e?"1px solid #334155":"1px solid #e2e8f0",borderRadius:"6px",fontSize:"12px"}})]})})}):c.jsx("div",{className:"h-48 flex items-center justify-center text-muted-foreground text-sm",children:"Inga utgifter att visa n"}),n.length>0&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Strsta utgifter:"}),c.jsxs("div",{className:"space-y-1",children:[n.slice(0,3).map((o,l)=>c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:o.color}}),c.jsx("span",{className:"truncate max-w-24",children:o.name})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"font-medium",children:le(o.value)}),c.jsxs("span",{className:"text-muted-foreground",children:["(",o.percentage.toFixed(0),"%)"]})]})]},l)),n.length>3&&c.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",n.length-3," fler kategorier"]})]})]}),c.jsxs("div",{className:"text-xs text-muted-foreground",children:[i," av ",s," kategorier med utgifter"]})]})})]})}function Bt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function N6e(e,t){const n=w.createContext(t),r=s=>{const{children:a,...o}=s,l=w.useMemo(()=>o,Object.values(o));return c.jsx(n.Provider,{value:l,children:a})};r.displayName=e+"Provider";function i(s){const a=w.useContext(n);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[r,i]}function Md(e,t=[]){let n=[];function r(s,a){const o=w.createContext(a),l=n.length;n=[...n,a];const u=f=>{var y;const{scope:h,children:p,...m}=f,g=((y=h==null?void 0:h[e])==null?void 0:y[l])||o,v=w.useMemo(()=>m,Object.values(m));return c.jsx(g.Provider,{value:v,children:p})};u.displayName=s+"Provider";function d(f,h){var g;const p=((g=h==null?void 0:h[e])==null?void 0:g[l])||o,m=w.useContext(p);if(m)return m;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[u,d]}const i=()=>{const s=n.map(a=>w.createContext(a));return function(o){const l=(o==null?void 0:o[e])||s;return w.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return i.scopeName=e,[r,T6e(i,...t)]}function T6e(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:l,scopeName:u})=>{const f=l(s)[`__scope${u}`];return{...o,...f}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var ni=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},C6e=xw[" useId ".trim().toString()]||(()=>{}),k6e=0;function Gf(e){const[t,n]=w.useState(C6e());return ni(()=>{n(r=>r??String(k6e++))},[e]),t?`radix-${t}`:""}var A6e=xw[" useInsertionEffect ".trim().toString()]||ni;function c1({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[i,s,a]=j6e({defaultProp:t,onChange:n}),o=e!==void 0,l=o?e:i;{const d=w.useRef(e!==void 0);w.useEffect(()=>{const f=d.current;f!==o&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=o},[o,r])}const u=w.useCallback(d=>{var f;if(o){const h=O6e(d)?d(e):d;h!==e&&((f=a.current)==null||f.call(a,h))}else s(d)},[o,e,s,a]);return[l,u]}function j6e({defaultProp:e,onChange:t}){const[n,r]=w.useState(e),i=w.useRef(n),s=w.useRef(t);return A6e(()=>{s.current=t},[t]),w.useEffect(()=>{var a;i.current!==n&&((a=s.current)==null||a.call(s,n),i.current=n)},[n,i]),[n,r,s]}function O6e(e){return typeof e=="function"}var P6e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],jt=P6e.reduce((e,t)=>{const n=fh(`Primitive.${t}`),r=w.forwardRef((i,s)=>{const{asChild:a,...o}=i,l=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(l,{...o,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function I6e(e,t){e&&cl.flushSync(()=>e.dispatchEvent(t))}function pd(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function D6e(e,t=globalThis==null?void 0:globalThis.document){const n=pd(e);w.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var M6e="DismissableLayer",Rk="dismissableLayer.update",R6e="dismissableLayer.pointerDownOutside",L6e="dismissableLayer.focusOutside",SB,pJ=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ED=w.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...l}=e,u=w.useContext(pJ),[d,f]=w.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=w.useState({}),m=ln(t,T=>f(T)),g=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(v),b=d?g.indexOf(d):-1,x=u.layersWithOutsidePointerEventsDisabled.size>0,S=b>=y,E=$6e(T=>{const C=T.target,k=[...u.branches].some(A=>A.contains(C));!S||k||(i==null||i(T),a==null||a(T),T.defaultPrevented||o==null||o())},h),_=U6e(T=>{const C=T.target;[...u.branches].some(A=>A.contains(C))||(s==null||s(T),a==null||a(T),T.defaultPrevented||o==null||o())},h);return D6e(T=>{b===u.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&o&&(T.preventDefault(),o()))},h),w.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(SB=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),_B(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=SB)}},[d,h,n,u]),w.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),_B())},[d,u]),w.useEffect(()=>{const T=()=>p({});return document.addEventListener(Rk,T),()=>document.removeEventListener(Rk,T)},[]),c.jsx(jt.div,{...l,ref:m,style:{pointerEvents:x?S?"auto":"none":void 0,...e.style},onFocusCapture:Bt(e.onFocusCapture,_.onFocusCapture),onBlurCapture:Bt(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:Bt(e.onPointerDownCapture,E.onPointerDownCapture)})});ED.displayName=M6e;var F6e="DismissableLayerBranch",B6e=w.forwardRef((e,t)=>{const n=w.useContext(pJ),r=w.useRef(null),i=ln(t,r);return w.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),c.jsx(jt.div,{...e,ref:i})});B6e.displayName=F6e;function $6e(e,t=globalThis==null?void 0:globalThis.document){const n=pd(e),r=w.useRef(!1),i=w.useRef(()=>{});return w.useEffect(()=>{const s=o=>{if(o.target&&!r.current){let l=function(){mJ(R6e,n,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=l,t.addEventListener("click",i.current,{once:!0})):l()}else t.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function U6e(e,t=globalThis==null?void 0:globalThis.document){const n=pd(e),r=w.useRef(!1);return w.useEffect(()=>{const i=s=>{s.target&&!r.current&&mJ(L6e,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function _B(){const e=new CustomEvent(Rk);document.dispatchEvent(e)}function mJ(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?I6e(i,s):i.dispatchEvent(s)}var $N="focusScope.autoFocusOnMount",UN="focusScope.autoFocusOnUnmount",NB={bubbles:!1,cancelable:!0},z6e="FocusScope",SD=w.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=e,[o,l]=w.useState(null),u=pd(i),d=pd(s),f=w.useRef(null),h=ln(t,g=>l(g)),p=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(r){let g=function(x){if(p.paused||!o)return;const S=x.target;o.contains(S)?f.current=S:Al(f.current,{select:!0})},v=function(x){if(p.paused||!o)return;const S=x.relatedTarget;S!==null&&(o.contains(S)||Al(f.current,{select:!0}))},y=function(x){if(document.activeElement===document.body)for(const E of x)E.removedNodes.length>0&&Al(o)};document.addEventListener("focusin",g),document.addEventListener("focusout",v);const b=new MutationObserver(y);return o&&b.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",v),b.disconnect()}}},[r,o,p.paused]),w.useEffect(()=>{if(o){CB.add(p);const g=document.activeElement;if(!o.contains(g)){const y=new CustomEvent($N,NB);o.addEventListener($N,u),o.dispatchEvent(y),y.defaultPrevented||(H6e(G6e(gJ(o)),{select:!0}),document.activeElement===g&&Al(o))}return()=>{o.removeEventListener($N,u),setTimeout(()=>{const y=new CustomEvent(UN,NB);o.addEventListener(UN,d),o.dispatchEvent(y),y.defaultPrevented||Al(g??document.body,{select:!0}),o.removeEventListener(UN,d),CB.remove(p)},0)}}},[o,u,d,p]);const m=w.useCallback(g=>{if(!n&&!r||p.paused)return;const v=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,y=document.activeElement;if(v&&y){const b=g.currentTarget,[x,S]=V6e(b);x&&S?!g.shiftKey&&y===S?(g.preventDefault(),n&&Al(x,{select:!0})):g.shiftKey&&y===x&&(g.preventDefault(),n&&Al(S,{select:!0})):y===b&&g.preventDefault()}},[n,r,p.paused]);return c.jsx(jt.div,{tabIndex:-1,...a,ref:h,onKeyDown:m})});SD.displayName=z6e;function H6e(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Al(r,{select:t}),document.activeElement!==n)return}function V6e(e){const t=gJ(e),n=TB(t,e),r=TB(t.reverse(),e);return[n,r]}function gJ(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function TB(e,t){for(const n of e)if(!W6e(n,{upTo:t}))return n}function W6e(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function q6e(e){return e instanceof HTMLInputElement&&"select"in e}function Al(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&q6e(e)&&t&&e.select()}}var CB=K6e();function K6e(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=kB(e,t),e.unshift(t)},remove(t){var n;e=kB(e,t),(n=e[0])==null||n.resume()}}}function kB(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function G6e(e){return e.filter(t=>t.tagName!=="A")}var Y6e="Portal",_D=w.forwardRef((e,t)=>{var o;const{container:n,...r}=e,[i,s]=w.useState(!1);ni(()=>s(!0),[]);const a=n||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?Hj.createPortal(c.jsx(jt.div,{...r,ref:t}),a):null});_D.displayName=Y6e;function X6e(e,t){return w.useReducer((n,r)=>t[n][r]??n,e)}var gS=e=>{const{present:t,children:n}=e,r=Q6e(t),i=typeof n=="function"?n({present:r.isPresent}):w.Children.only(n),s=ln(r.ref,J6e(i));return typeof n=="function"||r.isPresent?w.cloneElement(i,{ref:s}):null};gS.displayName="Presence";function Q6e(e){const[t,n]=w.useState(),r=w.useRef(null),i=w.useRef(e),s=w.useRef("none"),a=e?"mounted":"unmounted",[o,l]=X6e(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const u=mv(r.current);s.current=o==="mounted"?u:"none"},[o]),ni(()=>{const u=r.current,d=i.current;if(d!==e){const h=s.current,p=mv(u);e?l("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&h!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),ni(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=p=>{const g=mv(r.current).includes(CSS.escape(p.animationName));if(p.target===t&&g&&(l("ANIMATION_END"),!i.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},h=p=>{p.target===t&&(s.current=mv(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:w.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function mv(e){return(e==null?void 0:e.animationName)||"none"}function J6e(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var zN=0;function yJ(){w.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??AB()),document.body.insertAdjacentElement("beforeend",e[1]??AB()),zN++,()=>{zN===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),zN--}},[])}function AB(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ka=function(){return Ka=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ka.apply(this,arguments)};function vJ(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Z6e(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var px="right-scroll-bar-position",mx="width-before-scroll-bar",e5e="with-scroll-bars-hidden",t5e="--removed-body-scroll-bar-size";function HN(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function n5e(e,t){var n=w.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var r5e=typeof window<"u"?w.useLayoutEffect:w.useEffect,jB=new WeakMap;function i5e(e,t){var n=n5e(null,function(r){return e.forEach(function(i){return HN(i,r)})});return r5e(function(){var r=jB.get(n);if(r){var i=new Set(r),s=new Set(e),a=n.current;i.forEach(function(o){s.has(o)||HN(o,null)}),s.forEach(function(o){i.has(o)||HN(o,a)})}jB.set(n,e)},[e]),n}function s5e(e){return e}function a5e(e,t){t===void 0&&(t=s5e);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var a=t(s,r);return n.push(a),function(){n=n.filter(function(o){return o!==a})}},assignSyncMedium:function(s){for(r=!0;n.length;){var a=n;n=[],a.forEach(s)}n={push:function(o){return s(o)},filter:function(){return n}}},assignMedium:function(s){r=!0;var a=[];if(n.length){var o=n;n=[],o.forEach(s),a=n}var l=function(){var d=a;a=[],d.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),n}}}};return i}function o5e(e){e===void 0&&(e={});var t=a5e(null);return t.options=Ka({async:!0,ssr:!1},e),t}var xJ=function(e){var t=e.sideCar,n=vJ(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return w.createElement(r,Ka({},n))};xJ.isSideCarExport=!0;function l5e(e,t){return e.useMedium(t),xJ}var bJ=o5e(),VN=function(){},yS=w.forwardRef(function(e,t){var n=w.useRef(null),r=w.useState({onScrollCapture:VN,onWheelCapture:VN,onTouchMoveCapture:VN}),i=r[0],s=r[1],a=e.forwardProps,o=e.children,l=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,p=e.noRelative,m=e.noIsolation,g=e.inert,v=e.allowPinchZoom,y=e.as,b=y===void 0?"div":y,x=e.gapMode,S=vJ(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=h,_=i5e([n,t]),T=Ka(Ka({},S),i);return w.createElement(w.Fragment,null,d&&w.createElement(E,{sideCar:bJ,removeScrollBar:u,shards:f,noRelative:p,noIsolation:m,inert:g,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:x}),a?w.cloneElement(w.Children.only(o),Ka(Ka({},T),{ref:_})):w.createElement(b,Ka({},T,{className:l,ref:_}),o))});yS.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};yS.classNames={fullWidth:mx,zeroRight:px};var c5e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function u5e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=c5e();return t&&e.setAttribute("nonce",t),e}function d5e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function f5e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var h5e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=u5e())&&(d5e(t,n),f5e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},p5e=function(){var e=h5e();return function(t,n){w.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},wJ=function(){var e=p5e(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},m5e={left:0,top:0,right:0,gap:0},WN=function(e){return parseInt(e||"",10)||0},g5e=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[WN(n),WN(r),WN(i)]},y5e=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return m5e;var t=g5e(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},v5e=wJ(),Yf="data-scroll-locked",x5e=function(e,t,n,r){var i=e.left,s=e.top,a=e.right,o=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(e5e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(Yf,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(px,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(mx,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(px," .").concat(px,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(mx," .").concat(mx,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Yf,`] {
    `).concat(t5e,": ").concat(o,`px;
  }
`)},OB=function(){var e=parseInt(document.body.getAttribute(Yf)||"0",10);return isFinite(e)?e:0},b5e=function(){w.useEffect(function(){return document.body.setAttribute(Yf,(OB()+1).toString()),function(){var e=OB()-1;e<=0?document.body.removeAttribute(Yf):document.body.setAttribute(Yf,e.toString())}},[])},w5e=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;b5e();var s=w.useMemo(function(){return y5e(i)},[i]);return w.createElement(v5e,{styles:x5e(s,!t,i,n?"":"!important")})},Lk=!1;if(typeof window<"u")try{var gv=Object.defineProperty({},"passive",{get:function(){return Lk=!0,!0}});window.addEventListener("test",gv,gv),window.removeEventListener("test",gv,gv)}catch{Lk=!1}var Qd=Lk?{passive:!1}:!1,E5e=function(e){return e.tagName==="TEXTAREA"},EJ=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!E5e(e)&&n[t]==="visible")},S5e=function(e){return EJ(e,"overflowY")},_5e=function(e){return EJ(e,"overflowX")},PB=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=SJ(e,r);if(i){var s=_J(e,r),a=s[1],o=s[2];if(a>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},N5e=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},T5e=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},SJ=function(e,t){return e==="v"?S5e(t):_5e(t)},_J=function(e,t){return e==="v"?N5e(t):T5e(t)},C5e=function(e,t){return e==="h"&&t==="rtl"?-1:1},k5e=function(e,t,n,r,i){var s=C5e(e,window.getComputedStyle(t).direction),a=s*r,o=n.target,l=t.contains(o),u=!1,d=a>0,f=0,h=0;do{if(!o)break;var p=_J(e,o),m=p[0],g=p[1],v=p[2],y=g-v-s*m;(m||y)&&SJ(e,o)&&(f+=y,h+=m);var b=o.parentNode;o=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(d&&Math.abs(f)<1||!d&&Math.abs(h)<1)&&(u=!0),u},yv=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},IB=function(e){return[e.deltaX,e.deltaY]},DB=function(e){return e&&"current"in e?e.current:e},A5e=function(e,t){return e[0]===t[0]&&e[1]===t[1]},j5e=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},O5e=0,Jd=[];function P5e(e){var t=w.useRef([]),n=w.useRef([0,0]),r=w.useRef(),i=w.useState(O5e++)[0],s=w.useState(wJ)[0],a=w.useRef(e);w.useEffect(function(){a.current=e},[e]),w.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var g=Z6e([e.lockRef.current],(e.shards||[]).map(DB),!0).filter(Boolean);return g.forEach(function(v){return v.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var o=w.useCallback(function(g,v){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!a.current.allowPinchZoom;var y=yv(g),b=n.current,x="deltaX"in g?g.deltaX:b[0]-y[0],S="deltaY"in g?g.deltaY:b[1]-y[1],E,_=g.target,T=Math.abs(x)>Math.abs(S)?"h":"v";if("touches"in g&&T==="h"&&_.type==="range")return!1;var C=PB(T,_);if(!C)return!0;if(C?E=T:(E=T==="v"?"h":"v",C=PB(T,_)),!C)return!1;if(!r.current&&"changedTouches"in g&&(x||S)&&(r.current=E),!E)return!0;var k=r.current||E;return k5e(k,v,g,k==="h"?x:S)},[]),l=w.useCallback(function(g){var v=g;if(!(!Jd.length||Jd[Jd.length-1]!==s)){var y="deltaY"in v?IB(v):yv(v),b=t.current.filter(function(E){return E.name===v.type&&(E.target===v.target||v.target===E.shadowParent)&&A5e(E.delta,y)})[0];if(b&&b.should){v.cancelable&&v.preventDefault();return}if(!b){var x=(a.current.shards||[]).map(DB).filter(Boolean).filter(function(E){return E.contains(v.target)}),S=x.length>0?o(v,x[0]):!a.current.noIsolation;S&&v.cancelable&&v.preventDefault()}}},[]),u=w.useCallback(function(g,v,y,b){var x={name:g,delta:v,target:y,should:b,shadowParent:I5e(y)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(S){return S!==x})},1)},[]),d=w.useCallback(function(g){n.current=yv(g),r.current=void 0},[]),f=w.useCallback(function(g){u(g.type,IB(g),g.target,o(g,e.lockRef.current))},[]),h=w.useCallback(function(g){u(g.type,yv(g),g.target,o(g,e.lockRef.current))},[]);w.useEffect(function(){return Jd.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Qd),document.addEventListener("touchmove",l,Qd),document.addEventListener("touchstart",d,Qd),function(){Jd=Jd.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,Qd),document.removeEventListener("touchmove",l,Qd),document.removeEventListener("touchstart",d,Qd)}},[]);var p=e.removeScrollBar,m=e.inert;return w.createElement(w.Fragment,null,m?w.createElement(s,{styles:j5e(i)}):null,p?w.createElement(w5e,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function I5e(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const D5e=l5e(bJ,P5e);var ND=w.forwardRef(function(e,t){return w.createElement(yS,Ka({},e,{ref:t,sideCar:D5e}))});ND.classNames=yS.classNames;var M5e=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Zd=new WeakMap,vv=new WeakMap,xv={},qN=0,NJ=function(e){return e&&(e.host||NJ(e.parentNode))},R5e=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=NJ(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},L5e=function(e,t,n,r){var i=R5e(t,Array.isArray(e)?e:[e]);xv[n]||(xv[n]=new WeakMap);var s=xv[n],a=[],o=new Set,l=new Set(i),u=function(f){!f||o.has(f)||(o.add(f),u(f.parentNode))};i.forEach(u);var d=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(h){if(o.has(h))d(h);else try{var p=h.getAttribute(r),m=p!==null&&p!=="false",g=(Zd.get(h)||0)+1,v=(s.get(h)||0)+1;Zd.set(h,g),s.set(h,v),a.push(h),g===1&&m&&vv.set(h,!0),v===1&&h.setAttribute(n,"true"),m||h.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return d(t),o.clear(),qN++,function(){a.forEach(function(f){var h=Zd.get(f)-1,p=s.get(f)-1;Zd.set(f,h),s.set(f,p),h||(vv.has(f)||f.removeAttribute(r),vv.delete(f)),p||f.removeAttribute(n)}),qN--,qN||(Zd=new WeakMap,Zd=new WeakMap,vv=new WeakMap,xv={})}},TJ=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=M5e(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),L5e(r,i,n,"aria-hidden")):function(){return null}},vS="Dialog",[CJ,kJ]=Md(vS),[F5e,Ia]=CJ(vS),AJ=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:a=!0}=e,o=w.useRef(null),l=w.useRef(null),[u,d]=c1({prop:r,defaultProp:i??!1,onChange:s,caller:vS});return c.jsx(F5e,{scope:t,triggerRef:o,contentRef:l,contentId:Gf(),titleId:Gf(),descriptionId:Gf(),open:u,onOpenChange:d,onOpenToggle:w.useCallback(()=>d(f=>!f),[d]),modal:a,children:n})};AJ.displayName=vS;var jJ="DialogTrigger",OJ=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Ia(jJ,n),s=ln(t,i.triggerRef);return c.jsx(jt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":kD(i.open),...r,ref:s,onClick:Bt(e.onClick,i.onOpenToggle)})});OJ.displayName=jJ;var TD="DialogPortal",[B5e,PJ]=CJ(TD,{forceMount:void 0}),IJ=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,s=Ia(TD,t);return c.jsx(B5e,{scope:t,forceMount:n,children:w.Children.map(r,a=>c.jsx(gS,{present:n||s.open,children:c.jsx(_D,{asChild:!0,container:i,children:a})}))})};IJ.displayName=TD;var u1="DialogOverlay",DJ=w.forwardRef((e,t)=>{const n=PJ(u1,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=Ia(u1,e.__scopeDialog);return s.modal?c.jsx(gS,{present:r||s.open,children:c.jsx(U5e,{...i,ref:t})}):null});DJ.displayName=u1;var $5e=fh("DialogOverlay.RemoveScroll"),U5e=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Ia(u1,n);return c.jsx(ND,{as:$5e,allowPinchZoom:!0,shards:[i.contentRef],children:c.jsx(jt.div,{"data-state":kD(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),md="DialogContent",MJ=w.forwardRef((e,t)=>{const n=PJ(md,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=Ia(md,e.__scopeDialog);return c.jsx(gS,{present:r||s.open,children:s.modal?c.jsx(z5e,{...i,ref:t}):c.jsx(H5e,{...i,ref:t})})});MJ.displayName=md;var z5e=w.forwardRef((e,t)=>{const n=Ia(md,e.__scopeDialog),r=w.useRef(null),i=ln(t,n.contentRef,r);return w.useEffect(()=>{const s=r.current;if(s)return TJ(s)},[]),c.jsx(RJ,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Bt(e.onCloseAutoFocus,s=>{var a;s.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Bt(e.onPointerDownOutside,s=>{const a=s.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&s.preventDefault()}),onFocusOutside:Bt(e.onFocusOutside,s=>s.preventDefault())})}),H5e=w.forwardRef((e,t)=>{const n=Ia(md,e.__scopeDialog),r=w.useRef(!1),i=w.useRef(!1);return c.jsx(RJ,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var a,o;(a=e.onCloseAutoFocus)==null||a.call(e,s),s.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),RJ=w.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=e,o=Ia(md,n),l=w.useRef(null),u=ln(t,l);return yJ(),c.jsxs(c.Fragment,{children:[c.jsx(SD,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:c.jsx(ED,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":kD(o.open),...a,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(W5e,{titleId:o.titleId}),c.jsx(K5e,{contentRef:l,descriptionId:o.descriptionId})]})]})}),CD="DialogTitle",LJ=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Ia(CD,n);return c.jsx(jt.h2,{id:i.titleId,...r,ref:t})});LJ.displayName=CD;var FJ="DialogDescription",BJ=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Ia(FJ,n);return c.jsx(jt.p,{id:i.descriptionId,...r,ref:t})});BJ.displayName=FJ;var $J="DialogClose",UJ=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Ia($J,n);return c.jsx(jt.button,{type:"button",...r,ref:t,onClick:Bt(e.onClick,()=>i.onOpenChange(!1))})});UJ.displayName=$J;function kD(e){return e?"open":"closed"}var zJ="DialogTitleWarning",[V5e,HJ]=N6e(zJ,{contentName:md,titleName:CD,docsSlug:"dialog"}),W5e=({titleId:e})=>{const t=HJ(zJ),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return w.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},q5e="DialogDescriptionWarning",K5e=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${HJ(q5e).contentName}}.`;return w.useEffect(()=>{var s;const i=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},VJ=AJ,WJ=OJ,qJ=IJ,AD=DJ,jD=MJ,OD=LJ,PD=BJ,ID=UJ;const kt=VJ,G5e=WJ,Y5e=qJ,KJ=w.forwardRef(({className:e,...t},n)=>c.jsx(AD,{ref:n,className:Ve("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));KJ.displayName=AD.displayName;const St=w.forwardRef(({className:e,children:t,...n},r)=>c.jsxs(Y5e,{children:[c.jsx(KJ,{}),c.jsxs(jD,{ref:r,className:Ve("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,c.jsxs(ID,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[c.jsx(wr,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));St.displayName=jD.displayName;const _t=({className:e,...t})=>c.jsx("div",{className:Ve("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});_t.displayName="DialogHeader";const cy=({className:e,...t})=>c.jsx("div",{className:Ve("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});cy.displayName="DialogFooter";const Nt=w.forwardRef(({className:e,...t},n)=>c.jsx(OD,{ref:n,className:Ve("text-lg font-semibold leading-none tracking-tight",e),...t}));Nt.displayName=OD.displayName;const Gc=w.forwardRef(({className:e,...t},n)=>c.jsx(PD,{ref:n,className:Ve("text-sm text-muted-foreground",e),...t}));Gc.displayName=PD.displayName;const X5e={"Privat utlgg":IH,"Mynt kortet":Zj,Faktura:bn,Annat:kH};function Q5e(){const{entries:e}=mS(),[t,n]=w.useState(null),[r,i]=w.useState(!1),a=(()=>{const u=new Map;return e.filter(d=>d.type==="expense"&&!d.is_budget_entry).forEach(d=>{const f=d.payment_source||"Oknd";u.has(f)||u.set(f,{count:0,totalAmount:0,expenses:[]});const h=u.get(f);h.count+=1,h.totalAmount+=d.amount,h.expenses.push({id:d.id,amount:d.amount,description:d.description,category:d.category,date:d.date,payment_source:d.payment_source})}),Array.from(u.entries()).map(([d,f])=>({source:d,count:f.count,totalAmount:f.totalAmount,expenses:f.expenses})).sort((d,f)=>f.count-d.count)})(),o=u=>{n(u),i(!0)},l=u=>{const d=X5e[u]||kH;return c.jsx(d,{className:"h-4 w-4"})};return c.jsxs(c.Fragment,{children:[c.jsxs(Z,{children:[c.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c.jsx(he,{className:"text-sm font-medium",children:"Betalningskllor"}),c.jsx(Zj,{className:"h-4 w-4 text-muted-foreground"})]}),c.jsx(ee,{children:c.jsx("div",{className:"space-y-3",children:a.length>0?a.map(u=>c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer transition-colors",onClick:()=>o(u),children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[l(u.source),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:u.source}),c.jsxs("div",{className:"text-sm text-muted-foreground",children:[u.count," utgift",u.count!==1?"er":""]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"font-semibold",children:le(u.totalAmount)}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"totalt"})]})]},u.source)):c.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[c.jsx(Ks,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),c.jsx("p",{children:"Inga utgifter nnu"})]})})})]}),c.jsx(kt,{open:r,onOpenChange:i,children:c.jsxs(St,{className:"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[c.jsx(_t,{className:"flex-shrink-0",children:c.jsxs(Nt,{className:"flex items-center gap-2",children:[t&&l(t.source),"Utgifter frn ",t==null?void 0:t.source]})}),c.jsx("div",{className:"space-y-4 flex-1 overflow-y-auto",children:t&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-muted-foreground",children:"Antal utgifter"}),c.jsx("div",{className:"text-lg font-semibold",children:t.count})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-muted-foreground",children:"Totalt belopp"}),c.jsx("div",{className:"text-lg font-semibold",children:le(t.totalAmount)})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-muted-foreground",children:"Genomsnitt per utgift"}),c.jsx("div",{className:"text-lg font-semibold",children:le(t.totalAmount/t.count)})]})]}),c.jsx("div",{className:"border rounded-lg overflow-hidden",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left p-3 font-medium",children:"Datum"}),c.jsx("th",{className:"text-left p-3 font-medium",children:"Beskrivning"}),c.jsx("th",{className:"text-left p-3 font-medium",children:"Kategori"}),c.jsx("th",{className:"text-right p-3 font-medium",children:"Belopp"})]})}),c.jsx("tbody",{className:"divide-y",children:t.expenses.sort((u,d)=>new Date(d.date).getTime()-new Date(u.date).getTime()).map(u=>c.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[c.jsx("td",{className:"p-3",children:new Date(u.date).toLocaleDateString("sv-SE")}),c.jsx("td",{className:"p-3",children:u.description}),c.jsx("td",{className:"p-3",children:c.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-xs",children:u.category})}),c.jsx("td",{className:"p-3 text-right font-medium",children:le(u.amount)})]},u.id))})]})})]})}),c.jsx("div",{className:"flex justify-end pt-4 border-t flex-shrink-0",children:c.jsx(H,{variant:"outline",onClick:()=>i(!1),children:"Stng"})})]})})]})}const J5e=iO("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Tt({className:e,variant:t,...n}){return c.jsx("div",{className:Ve(J5e({variant:t}),e),...n})}const ie=w.forwardRef(({className:e,...t},n)=>c.jsx("label",{ref:n,className:Ve("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));ie.displayName="Label";function MB(e,[t,n]){return Math.min(n,Math.max(t,e))}function Z5e(e){const t=e+"CollectionProvider",[n,r]=Md(t),[i,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:v,children:y}=g,b=at.useRef(null),x=at.useRef(new Map).current;return c.jsx(i,{scope:v,itemMap:x,collectionRef:b,children:y})};a.displayName=t;const o=e+"CollectionSlot",l=fh(o),u=at.forwardRef((g,v)=>{const{scope:y,children:b}=g,x=s(o,y),S=ln(v,x.collectionRef);return c.jsx(l,{ref:S,children:b})});u.displayName=o;const d=e+"CollectionItemSlot",f="data-radix-collection-item",h=fh(d),p=at.forwardRef((g,v)=>{const{scope:y,children:b,...x}=g,S=at.useRef(null),E=ln(v,S),_=s(d,y);return at.useEffect(()=>(_.itemMap.set(S,{ref:S,...x}),()=>void _.itemMap.delete(S))),c.jsx(h,{[f]:"",ref:E,children:b})});p.displayName=d;function m(g){const v=s(e+"CollectionConsumer",g);return at.useCallback(()=>{const b=v.collectionRef.current;if(!b)return[];const x=Array.from(b.querySelectorAll(`[${f}]`));return Array.from(v.itemMap.values()).sort((_,T)=>x.indexOf(_.ref.current)-x.indexOf(T.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:a,Slot:u,ItemSlot:p},m,r]}var eFe=w.createContext(void 0);function tFe(e){const t=w.useContext(eFe);return e||t||"ltr"}const nFe=["top","right","bottom","left"],kc=Math.min,Ji=Math.max,d1=Math.round,bv=Math.floor,so=e=>({x:e,y:e}),rFe={left:"right",right:"left",bottom:"top",top:"bottom"},iFe={start:"end",end:"start"};function Fk(e,t,n){return Ji(e,kc(t,n))}function al(e,t){return typeof e=="function"?e(t):e}function ol(e){return e.split("-")[0]}function dp(e){return e.split("-")[1]}function DD(e){return e==="x"?"y":"x"}function MD(e){return e==="y"?"height":"width"}const sFe=new Set(["top","bottom"]);function Xa(e){return sFe.has(ol(e))?"y":"x"}function RD(e){return DD(Xa(e))}function aFe(e,t,n){n===void 0&&(n=!1);const r=dp(e),i=RD(e),s=MD(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=f1(a)),[a,f1(a)]}function oFe(e){const t=f1(e);return[Bk(e),t,Bk(t)]}function Bk(e){return e.replace(/start|end/g,t=>iFe[t])}const RB=["left","right"],LB=["right","left"],lFe=["top","bottom"],cFe=["bottom","top"];function uFe(e,t,n){switch(e){case"top":case"bottom":return n?t?LB:RB:t?RB:LB;case"left":case"right":return t?lFe:cFe;default:return[]}}function dFe(e,t,n,r){const i=dp(e);let s=uFe(ol(e),n==="start",r);return i&&(s=s.map(a=>a+"-"+i),t&&(s=s.concat(s.map(Bk)))),s}function f1(e){return e.replace(/left|right|bottom|top/g,t=>rFe[t])}function fFe(e){return{top:0,right:0,bottom:0,left:0,...e}}function GJ(e){return typeof e!="number"?fFe(e):{top:e,right:e,bottom:e,left:e}}function h1(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function FB(e,t,n){let{reference:r,floating:i}=e;const s=Xa(t),a=RD(t),o=MD(a),l=ol(t),u=s==="y",d=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,h=r[o]/2-i[o]/2;let p;switch(l){case"top":p={x:d,y:r.y-i.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-i.width,y:f};break;default:p={x:r.x,y:r.y}}switch(dp(t)){case"start":p[a]-=h*(n&&u?-1:1);break;case"end":p[a]+=h*(n&&u?-1:1);break}return p}const hFe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=n,o=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:f}=FB(u,r,l),h=r,p={},m=0;for(let g=0;g<o.length;g++){const{name:v,fn:y}=o[g],{x:b,y:x,data:S,reset:E}=await y({x:d,y:f,initialPlacement:r,placement:h,strategy:i,middlewareData:p,rects:u,platform:a,elements:{reference:e,floating:t}});d=b??d,f=x??f,p={...p,[v]:{...p[v],...S}},E&&m<=50&&(m++,typeof E=="object"&&(E.placement&&(h=E.placement),E.rects&&(u=E.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:d,y:f}=FB(u,h,l)),g=-1)}return{x:d,y:f,placement:h,strategy:i,middlewareData:p}};async function Gg(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:a,elements:o,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=al(t,e),m=GJ(p),v=o[h?f==="floating"?"reference":"floating":f],y=h1(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:u,rootBoundary:d,strategy:l})),b=f==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),S=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},E=h1(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:b,offsetParent:x,strategy:l}):b);return{top:(y.top-E.top+m.top)/S.y,bottom:(E.bottom-y.bottom+m.bottom)/S.y,left:(y.left-E.left+m.left)/S.x,right:(E.right-y.right+m.right)/S.x}}const pFe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:a,elements:o,middlewareData:l}=t,{element:u,padding:d=0}=al(e,t)||{};if(u==null)return{};const f=GJ(d),h={x:n,y:r},p=RD(i),m=MD(p),g=await a.getDimensions(u),v=p==="y",y=v?"top":"left",b=v?"bottom":"right",x=v?"clientHeight":"clientWidth",S=s.reference[m]+s.reference[p]-h[p]-s.floating[m],E=h[p]-s.reference[p],_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let T=_?_[x]:0;(!T||!await(a.isElement==null?void 0:a.isElement(_)))&&(T=o.floating[x]||s.floating[m]);const C=S/2-E/2,k=T/2-g[m]/2-1,A=kc(f[y],k),j=kc(f[b],k),D=A,P=T-g[m]-j,M=T/2-g[m]/2+C,L=Fk(D,M,P),O=!l.arrow&&dp(i)!=null&&M!==L&&s.reference[m]/2-(M<D?A:j)-g[m]/2<0,B=O?M<D?M-D:M-P:0;return{[p]:h[p]+B,data:{[p]:L,centerOffset:M-L-B,...O&&{alignmentOffset:B}},reset:O}}}),mFe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...v}=al(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=ol(i),b=Xa(o),x=ol(o)===o,S=await(l.isRTL==null?void 0:l.isRTL(u.floating)),E=h||(x||!g?[f1(o)]:oFe(o)),_=m!=="none";!h&&_&&E.push(...dFe(o,g,m,S));const T=[o,...E],C=await Gg(t,v),k=[];let A=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&k.push(C[y]),f){const M=aFe(i,a,S);k.push(C[M[0]],C[M[1]])}if(A=[...A,{placement:i,overflows:k}],!k.every(M=>M<=0)){var j,D;const M=(((j=s.flip)==null?void 0:j.index)||0)+1,L=T[M];if(L&&(!(f==="alignment"?b!==Xa(L):!1)||A.every(R=>Xa(R.placement)===b?R.overflows[0]>0:!0)))return{data:{index:M,overflows:A},reset:{placement:L}};let O=(D=A.filter(B=>B.overflows[0]<=0).sort((B,R)=>B.overflows[1]-R.overflows[1])[0])==null?void 0:D.placement;if(!O)switch(p){case"bestFit":{var P;const B=(P=A.filter(R=>{if(_){const F=Xa(R.placement);return F===b||F==="y"}return!0}).map(R=>[R.placement,R.overflows.filter(F=>F>0).reduce((F,I)=>F+I,0)]).sort((R,F)=>R[1]-F[1])[0])==null?void 0:P[0];B&&(O=B);break}case"initialPlacement":O=o;break}if(i!==O)return{reset:{placement:O}}}return{}}}};function BB(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function $B(e){return nFe.some(t=>e[t]>=0)}const gFe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=al(e,t);switch(r){case"referenceHidden":{const s=await Gg(t,{...i,elementContext:"reference"}),a=BB(s,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:$B(a)}}}case"escaped":{const s=await Gg(t,{...i,altBoundary:!0}),a=BB(s,n.floating);return{data:{escapedOffsets:a,escaped:$B(a)}}}default:return{}}}}},YJ=new Set(["left","top"]);async function yFe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=ol(n),o=dp(n),l=Xa(n)==="y",u=YJ.has(a)?-1:1,d=s&&l?-1:1,f=al(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof m=="number"&&(p=o==="end"?m*-1:m),l?{x:p*d,y:h*u}:{x:h*u,y:p*d}}const vFe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:a,middlewareData:o}=t,l=await yFe(t,e);return a===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:a}}}}},xFe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:v=>{let{x:y,y:b}=v;return{x:y,y:b}}},...l}=al(e,t),u={x:n,y:r},d=await Gg(t,l),f=Xa(ol(i)),h=DD(f);let p=u[h],m=u[f];if(s){const v=h==="y"?"top":"left",y=h==="y"?"bottom":"right",b=p+d[v],x=p-d[y];p=Fk(b,p,x)}if(a){const v=f==="y"?"top":"left",y=f==="y"?"bottom":"right",b=m+d[v],x=m-d[y];m=Fk(b,m,x)}const g=o.fn({...t,[h]:p,[f]:m});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[h]:s,[f]:a}}}}}},bFe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:a}=t,{offset:o=0,mainAxis:l=!0,crossAxis:u=!0}=al(e,t),d={x:n,y:r},f=Xa(i),h=DD(f);let p=d[h],m=d[f];const g=al(o,t),v=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const x=h==="y"?"height":"width",S=s.reference[h]-s.floating[x]+v.mainAxis,E=s.reference[h]+s.reference[x]-v.mainAxis;p<S?p=S:p>E&&(p=E)}if(u){var y,b;const x=h==="y"?"width":"height",S=YJ.has(ol(i)),E=s.reference[f]-s.floating[x]+(S&&((y=a.offset)==null?void 0:y[f])||0)+(S?0:v.crossAxis),_=s.reference[f]+s.reference[x]+(S?0:((b=a.offset)==null?void 0:b[f])||0)-(S?v.crossAxis:0);m<E?m=E:m>_&&(m=_)}return{[h]:p,[f]:m}}}},wFe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:s,platform:a,elements:o}=t,{apply:l=()=>{},...u}=al(e,t),d=await Gg(t,u),f=ol(i),h=dp(i),p=Xa(i)==="y",{width:m,height:g}=s.floating;let v,y;f==="top"||f==="bottom"?(v=f,y=h===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(y=f,v=h==="end"?"top":"bottom");const b=g-d.top-d.bottom,x=m-d.left-d.right,S=kc(g-d[v],b),E=kc(m-d[y],x),_=!t.middlewareData.shift;let T=S,C=E;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(C=x),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(T=b),_&&!h){const A=Ji(d.left,0),j=Ji(d.right,0),D=Ji(d.top,0),P=Ji(d.bottom,0);p?C=m-2*(A!==0||j!==0?A+j:Ji(d.left,d.right)):T=g-2*(D!==0||P!==0?D+P:Ji(d.top,d.bottom))}await l({...t,availableWidth:C,availableHeight:T});const k=await a.getDimensions(o.floating);return m!==k.width||g!==k.height?{reset:{rects:!0}}:{}}}};function xS(){return typeof window<"u"}function fp(e){return XJ(e)?(e.nodeName||"").toLowerCase():"#document"}function cs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function yo(e){var t;return(t=(XJ(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function XJ(e){return xS()?e instanceof Node||e instanceof cs(e).Node:!1}function _a(e){return xS()?e instanceof Element||e instanceof cs(e).Element:!1}function fo(e){return xS()?e instanceof HTMLElement||e instanceof cs(e).HTMLElement:!1}function UB(e){return!xS()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof cs(e).ShadowRoot}const EFe=new Set(["inline","contents"]);function uy(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Na(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!EFe.has(i)}const SFe=new Set(["table","td","th"]);function _Fe(e){return SFe.has(fp(e))}const NFe=[":popover-open",":modal"];function bS(e){return NFe.some(t=>{try{return e.matches(t)}catch{return!1}})}const TFe=["transform","translate","scale","rotate","perspective"],CFe=["transform","translate","scale","rotate","perspective","filter"],kFe=["paint","layout","strict","content"];function LD(e){const t=FD(),n=_a(e)?Na(e):e;return TFe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||CFe.some(r=>(n.willChange||"").includes(r))||kFe.some(r=>(n.contain||"").includes(r))}function AFe(e){let t=Ac(e);for(;fo(t)&&!Ah(t);){if(LD(t))return t;if(bS(t))return null;t=Ac(t)}return null}function FD(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const jFe=new Set(["html","body","#document"]);function Ah(e){return jFe.has(fp(e))}function Na(e){return cs(e).getComputedStyle(e)}function wS(e){return _a(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ac(e){if(fp(e)==="html")return e;const t=e.assignedSlot||e.parentNode||UB(e)&&e.host||yo(e);return UB(t)?t.host:t}function QJ(e){const t=Ac(e);return Ah(t)?e.ownerDocument?e.ownerDocument.body:e.body:fo(t)&&uy(t)?t:QJ(t)}function Yg(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=QJ(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),a=cs(i);if(s){const o=$k(a);return t.concat(a,a.visualViewport||[],uy(i)?i:[],o&&n?Yg(o):[])}return t.concat(i,Yg(i,[],n))}function $k(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function JJ(e){const t=Na(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=fo(e),s=i?e.offsetWidth:n,a=i?e.offsetHeight:r,o=d1(n)!==s||d1(r)!==a;return o&&(n=s,r=a),{width:n,height:r,$:o}}function BD(e){return _a(e)?e:e.contextElement}function Xf(e){const t=BD(e);if(!fo(t))return so(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=JJ(t);let a=(s?d1(n.width):n.width)/r,o=(s?d1(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const OFe=so(0);function ZJ(e){const t=cs(e);return!FD()||!t.visualViewport?OFe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function PFe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==cs(e)?!1:t}function gd(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=BD(e);let a=so(1);t&&(r?_a(r)&&(a=Xf(r)):a=Xf(e));const o=PFe(s,n,r)?ZJ(s):so(0);let l=(i.left+o.x)/a.x,u=(i.top+o.y)/a.y,d=i.width/a.x,f=i.height/a.y;if(s){const h=cs(s),p=r&&_a(r)?cs(r):r;let m=h,g=$k(m);for(;g&&r&&p!==m;){const v=Xf(g),y=g.getBoundingClientRect(),b=Na(g),x=y.left+(g.clientLeft+parseFloat(b.paddingLeft))*v.x,S=y.top+(g.clientTop+parseFloat(b.paddingTop))*v.y;l*=v.x,u*=v.y,d*=v.x,f*=v.y,l+=x,u+=S,m=cs(g),g=$k(m)}}return h1({width:d,height:f,x:l,y:u})}function ES(e,t){const n=wS(e).scrollLeft;return t?t.left+n:gd(yo(e)).left+n}function eZ(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-ES(e,n),i=n.top+t.scrollTop;return{x:r,y:i}}function IFe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",a=yo(r),o=t?bS(t.floating):!1;if(r===a||o&&s)return n;let l={scrollLeft:0,scrollTop:0},u=so(1);const d=so(0),f=fo(r);if((f||!f&&!s)&&((fp(r)!=="body"||uy(a))&&(l=wS(r)),fo(r))){const p=gd(r);u=Xf(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const h=a&&!f&&!s?eZ(a,l):so(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+h.x,y:n.y*u.y-l.scrollTop*u.y+d.y+h.y}}function DFe(e){return Array.from(e.getClientRects())}function MFe(e){const t=yo(e),n=wS(e),r=e.ownerDocument.body,i=Ji(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Ji(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+ES(e);const o=-n.scrollTop;return Na(r).direction==="rtl"&&(a+=Ji(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:o}}const zB=25;function RFe(e,t){const n=cs(e),r=yo(e),i=n.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;const d=FD();(!d||d&&t==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}const u=ES(r);if(u<=0){const d=r.ownerDocument,f=d.body,h=getComputedStyle(f),p=d.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,m=Math.abs(r.clientWidth-f.clientWidth-p);m<=zB&&(s-=m)}else u<=zB&&(s+=u);return{width:s,height:a,x:o,y:l}}const LFe=new Set(["absolute","fixed"]);function FFe(e,t){const n=gd(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=fo(e)?Xf(e):so(1),a=e.clientWidth*s.x,o=e.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:a,height:o,x:l,y:u}}function HB(e,t,n){let r;if(t==="viewport")r=RFe(e,n);else if(t==="document")r=MFe(yo(e));else if(_a(t))r=FFe(t,n);else{const i=ZJ(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return h1(r)}function tZ(e,t){const n=Ac(e);return n===t||!_a(n)||Ah(n)?!1:Na(n).position==="fixed"||tZ(n,t)}function BFe(e,t){const n=t.get(e);if(n)return n;let r=Yg(e,[],!1).filter(o=>_a(o)&&fp(o)!=="body"),i=null;const s=Na(e).position==="fixed";let a=s?Ac(e):e;for(;_a(a)&&!Ah(a);){const o=Na(a),l=LD(a);!l&&o.position==="fixed"&&(i=null),(s?!l&&!i:!l&&o.position==="static"&&!!i&&LFe.has(i.position)||uy(a)&&!l&&tZ(e,a))?r=r.filter(d=>d!==a):i=o,a=Ac(a)}return t.set(e,r),r}function $Fe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const a=[...n==="clippingAncestors"?bS(t)?[]:BFe(t,this._c):[].concat(n),r],o=a[0],l=a.reduce((u,d)=>{const f=HB(t,d,i);return u.top=Ji(f.top,u.top),u.right=kc(f.right,u.right),u.bottom=kc(f.bottom,u.bottom),u.left=Ji(f.left,u.left),u},HB(t,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function UFe(e){const{width:t,height:n}=JJ(e);return{width:t,height:n}}function zFe(e,t,n){const r=fo(t),i=yo(t),s=n==="fixed",a=gd(e,!0,s,t);let o={scrollLeft:0,scrollTop:0};const l=so(0);function u(){l.x=ES(i)}if(r||!r&&!s)if((fp(t)!=="body"||uy(i))&&(o=wS(t)),r){const p=gd(t,!0,s,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else i&&u();s&&!r&&i&&u();const d=i&&!r&&!s?eZ(i,o):so(0),f=a.left+o.scrollLeft-l.x-d.x,h=a.top+o.scrollTop-l.y-d.y;return{x:f,y:h,width:a.width,height:a.height}}function KN(e){return Na(e).position==="static"}function VB(e,t){if(!fo(e)||Na(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return yo(e)===n&&(n=n.ownerDocument.body),n}function nZ(e,t){const n=cs(e);if(bS(e))return n;if(!fo(e)){let i=Ac(e);for(;i&&!Ah(i);){if(_a(i)&&!KN(i))return i;i=Ac(i)}return n}let r=VB(e,t);for(;r&&_Fe(r)&&KN(r);)r=VB(r,t);return r&&Ah(r)&&KN(r)&&!LD(r)?n:r||AFe(e)||n}const HFe=async function(e){const t=this.getOffsetParent||nZ,n=this.getDimensions,r=await n(e.floating);return{reference:zFe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function VFe(e){return Na(e).direction==="rtl"}const WFe={convertOffsetParentRelativeRectToViewportRelativeRect:IFe,getDocumentElement:yo,getClippingRect:$Fe,getOffsetParent:nZ,getElementRects:HFe,getClientRects:DFe,getDimensions:UFe,getScale:Xf,isElement:_a,isRTL:VFe};function rZ(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function qFe(e,t){let n=null,r;const i=yo(e);function s(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const u=e.getBoundingClientRect(),{left:d,top:f,width:h,height:p}=u;if(o||t(),!h||!p)return;const m=bv(f),g=bv(i.clientWidth-(d+h)),v=bv(i.clientHeight-(f+p)),y=bv(d),x={rootMargin:-m+"px "+-g+"px "+-v+"px "+-y+"px",threshold:Ji(0,kc(1,l))||1};let S=!0;function E(_){const T=_[0].intersectionRatio;if(T!==l){if(!S)return a();T?a(!1,T):r=setTimeout(()=>{a(!1,1e-7)},1e3)}T===1&&!rZ(u,e.getBoundingClientRect())&&a(),S=!1}try{n=new IntersectionObserver(E,{...x,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,x)}n.observe(e)}return a(!0),s}function KFe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=BD(e),d=i||s?[...u?Yg(u):[],...Yg(t)]:[];d.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=u&&o?qFe(u,n):null;let h=-1,p=null;a&&(p=new ResizeObserver(y=>{let[b]=y;b&&b.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var x;(x=p)==null||x.observe(t)})),n()}),u&&!l&&p.observe(u),p.observe(t));let m,g=l?gd(e):null;l&&v();function v(){const y=gd(e);g&&!rZ(g,y)&&n(),g=y,m=requestAnimationFrame(v)}return n(),()=>{var y;d.forEach(b=>{i&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),f==null||f(),(y=p)==null||y.disconnect(),p=null,l&&cancelAnimationFrame(m)}}const GFe=vFe,YFe=xFe,XFe=mFe,QFe=wFe,JFe=gFe,WB=pFe,ZFe=bFe,eBe=(e,t,n)=>{const r=new Map,i={platform:WFe,...n},s={...i.platform,_c:r};return hFe(e,t,{...i,platform:s})};var tBe=typeof document<"u",nBe=function(){},gx=tBe?w.useLayoutEffect:nBe;function p1(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!p1(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!p1(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function iZ(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function qB(e,t){const n=iZ(e);return Math.round(t*n)/n}function GN(e){const t=w.useRef(e);return gx(()=>{t.current=e}),t}function rBe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:a}={},transform:o=!0,whileElementsMounted:l,open:u}=e,[d,f]=w.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=w.useState(r);p1(h,r)||p(r);const[m,g]=w.useState(null),[v,y]=w.useState(null),b=w.useCallback(R=>{R!==_.current&&(_.current=R,g(R))},[]),x=w.useCallback(R=>{R!==T.current&&(T.current=R,y(R))},[]),S=s||m,E=a||v,_=w.useRef(null),T=w.useRef(null),C=w.useRef(d),k=l!=null,A=GN(l),j=GN(i),D=GN(u),P=w.useCallback(()=>{if(!_.current||!T.current)return;const R={placement:t,strategy:n,middleware:h};j.current&&(R.platform=j.current),eBe(_.current,T.current,R).then(F=>{const I={...F,isPositioned:D.current!==!1};M.current&&!p1(C.current,I)&&(C.current=I,cl.flushSync(()=>{f(I)}))})},[h,t,n,j,D]);gx(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(R=>({...R,isPositioned:!1})))},[u]);const M=w.useRef(!1);gx(()=>(M.current=!0,()=>{M.current=!1}),[]),gx(()=>{if(S&&(_.current=S),E&&(T.current=E),S&&E){if(A.current)return A.current(S,E,P);P()}},[S,E,P,A,k]);const L=w.useMemo(()=>({reference:_,floating:T,setReference:b,setFloating:x}),[b,x]),O=w.useMemo(()=>({reference:S,floating:E}),[S,E]),B=w.useMemo(()=>{const R={position:n,left:0,top:0};if(!O.floating)return R;const F=qB(O.floating,d.x),I=qB(O.floating,d.y);return o?{...R,transform:"translate("+F+"px, "+I+"px)",...iZ(O.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:I}},[n,o,O.floating,d.x,d.y]);return w.useMemo(()=>({...d,update:P,refs:L,elements:O,floatingStyles:B}),[d,P,L,O,B])}const iBe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?WB({element:r.current,padding:i}).fn(n):{}:r?WB({element:r,padding:i}).fn(n):{}}}},sBe=(e,t)=>({...GFe(e),options:[e,t]}),aBe=(e,t)=>({...YFe(e),options:[e,t]}),oBe=(e,t)=>({...ZFe(e),options:[e,t]}),lBe=(e,t)=>({...XFe(e),options:[e,t]}),cBe=(e,t)=>({...QFe(e),options:[e,t]}),uBe=(e,t)=>({...JFe(e),options:[e,t]}),dBe=(e,t)=>({...iBe(e),options:[e,t]});var fBe="Arrow",sZ=w.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...s}=e;return c.jsx(jt.svg,{...s,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});sZ.displayName=fBe;var hBe=sZ;function aZ(e){const[t,n]=w.useState(void 0);return ni(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,o;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;a=u.inlineSize,o=u.blockSize}else a=e.offsetWidth,o=e.offsetHeight;n({width:a,height:o})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var $D="Popper",[oZ,lZ]=Md($D),[pBe,cZ]=oZ($D),uZ=e=>{const{__scopePopper:t,children:n}=e,[r,i]=w.useState(null);return c.jsx(pBe,{scope:t,anchor:r,onAnchorChange:i,children:n})};uZ.displayName=$D;var dZ="PopperAnchor",fZ=w.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,s=cZ(dZ,n),a=w.useRef(null),o=ln(t,a),l=w.useRef(null);return w.useEffect(()=>{const u=l.current;l.current=(r==null?void 0:r.current)||a.current,u!==l.current&&s.onAnchorChange(l.current)}),r?null:c.jsx(jt.div,{...i,ref:o})});fZ.displayName=dZ;var UD="PopperContent",[mBe,gBe]=oZ(UD),hZ=w.forwardRef((e,t)=>{var K,xe,ae,ue,Ee,re;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:m,...g}=e,v=cZ(UD,n),[y,b]=w.useState(null),x=ln(t,Je=>b(Je)),[S,E]=w.useState(null),_=aZ(S),T=(_==null?void 0:_.width)??0,C=(_==null?void 0:_.height)??0,k=r+(s!=="center"?"-"+s:""),A=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},j=Array.isArray(u)?u:[u],D=j.length>0,P={padding:A,boundary:j.filter(vBe),altBoundary:D},{refs:M,floatingStyles:L,placement:O,isPositioned:B,middlewareData:R}=rBe({strategy:"fixed",placement:k,whileElementsMounted:(...Je)=>KFe(...Je,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[sBe({mainAxis:i+C,alignmentAxis:a}),l&&aBe({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?oBe():void 0,...P}),l&&lBe({...P}),cBe({...P,apply:({elements:Je,rects:De,availableWidth:tt,availableHeight:Y})=>{const{width:pe,height:W}=De.reference,fe=Je.floating.style;fe.setProperty("--radix-popper-available-width",`${tt}px`),fe.setProperty("--radix-popper-available-height",`${Y}px`),fe.setProperty("--radix-popper-anchor-width",`${pe}px`),fe.setProperty("--radix-popper-anchor-height",`${W}px`)}}),S&&dBe({element:S,padding:o}),xBe({arrowWidth:T,arrowHeight:C}),h&&uBe({strategy:"referenceHidden",...P})]}),[F,I]=gZ(O),X=pd(m);ni(()=>{B&&(X==null||X())},[B,X]);const G=(K=R.arrow)==null?void 0:K.x,$=(xe=R.arrow)==null?void 0:xe.y,be=((ae=R.arrow)==null?void 0:ae.centerOffset)!==0,[je,Q]=w.useState();return ni(()=>{y&&Q(window.getComputedStyle(y).zIndex)},[y]),c.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...L,transform:B?L.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:je,"--radix-popper-transform-origin":[(ue=R.transformOrigin)==null?void 0:ue.x,(Ee=R.transformOrigin)==null?void 0:Ee.y].join(" "),...((re=R.hide)==null?void 0:re.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:c.jsx(mBe,{scope:n,placedSide:F,onArrowChange:E,arrowX:G,arrowY:$,shouldHideArrow:be,children:c.jsx(jt.div,{"data-side":F,"data-align":I,...g,ref:x,style:{...g.style,animation:B?void 0:"none"}})})})});hZ.displayName=UD;var pZ="PopperArrow",yBe={top:"bottom",right:"left",bottom:"top",left:"right"},mZ=w.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,s=gBe(pZ,r),a=yBe[s.placedSide];return c.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:c.jsx(hBe,{...i,ref:n,style:{...i.style,display:"block"}})})});mZ.displayName=pZ;function vBe(e){return e!==null}var xBe=e=>({name:"transformOrigin",options:e,fn(t){var v,y,b;const{placement:n,rects:r,middlewareData:i}=t,a=((v=i.arrow)==null?void 0:v.centerOffset)!==0,o=a?0:e.arrowWidth,l=a?0:e.arrowHeight,[u,d]=gZ(n),f={start:"0%",center:"50%",end:"100%"}[d],h=(((y=i.arrow)==null?void 0:y.x)??0)+o/2,p=(((b=i.arrow)==null?void 0:b.y)??0)+l/2;let m="",g="";return u==="bottom"?(m=a?f:`${h}px`,g=`${-l}px`):u==="top"?(m=a?f:`${h}px`,g=`${r.floating.height+l}px`):u==="right"?(m=`${-l}px`,g=a?f:`${p}px`):u==="left"&&(m=`${r.floating.width+l}px`,g=a?f:`${p}px`),{data:{x:m,y:g}}}});function gZ(e){const[t,n="center"]=e.split("-");return[t,n]}var bBe=uZ,wBe=fZ,EBe=hZ,SBe=mZ;function yZ(e){const t=w.useRef({value:e,previous:e});return w.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var vZ=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),_Be="VisuallyHidden",NBe=w.forwardRef((e,t)=>c.jsx(jt.span,{...e,ref:t,style:{...vZ,...e.style}}));NBe.displayName=_Be;var TBe=[" ","Enter","ArrowUp","ArrowDown"],CBe=[" ","Enter"],yd="Select",[SS,_S,kBe]=Z5e(yd),[hp,klt]=Md(yd,[kBe,lZ]),NS=lZ(),[ABe,Yc]=hp(yd),[jBe,OBe]=hp(yd),xZ=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:s,value:a,defaultValue:o,onValueChange:l,dir:u,name:d,autoComplete:f,disabled:h,required:p,form:m}=e,g=NS(t),[v,y]=w.useState(null),[b,x]=w.useState(null),[S,E]=w.useState(!1),_=tFe(u),[T,C]=c1({prop:r,defaultProp:i??!1,onChange:s,caller:yd}),[k,A]=c1({prop:a,defaultProp:o,onChange:l,caller:yd}),j=w.useRef(null),D=v?m||!!v.closest("form"):!0,[P,M]=w.useState(new Set),L=Array.from(P).map(O=>O.props.value).join(";");return c.jsx(bBe,{...g,children:c.jsxs(ABe,{required:p,scope:t,trigger:v,onTriggerChange:y,valueNode:b,onValueNodeChange:x,valueNodeHasChildren:S,onValueNodeHasChildrenChange:E,contentId:Gf(),value:k,onValueChange:A,open:T,onOpenChange:C,dir:_,triggerPointerDownPosRef:j,disabled:h,children:[c.jsx(SS.Provider,{scope:t,children:c.jsx(jBe,{scope:e.__scopeSelect,onNativeOptionAdd:w.useCallback(O=>{M(B=>new Set(B).add(O))},[]),onNativeOptionRemove:w.useCallback(O=>{M(B=>{const R=new Set(B);return R.delete(O),R})},[]),children:n})}),D?c.jsxs(HZ,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:f,value:k,onChange:O=>A(O.target.value),disabled:h,form:m,children:[k===void 0?c.jsx("option",{value:""}):null,Array.from(P)]},L):null]})})};xZ.displayName=yd;var bZ="SelectTrigger",wZ=w.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...i}=e,s=NS(n),a=Yc(bZ,n),o=a.disabled||r,l=ln(t,a.onTriggerChange),u=_S(n),d=w.useRef("touch"),[f,h,p]=WZ(g=>{const v=u().filter(x=>!x.disabled),y=v.find(x=>x.value===a.value),b=qZ(v,g,y);b!==void 0&&a.onValueChange(b.value)}),m=g=>{o||(a.onOpenChange(!0),p()),g&&(a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return c.jsx(wBe,{asChild:!0,...s,children:c.jsx(jt.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":VZ(a.value)?"":void 0,...i,ref:l,onClick:Bt(i.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&m(g)}),onPointerDown:Bt(i.onPointerDown,g=>{d.current=g.pointerType;const v=g.target;v.hasPointerCapture(g.pointerId)&&v.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(m(g),g.preventDefault())}),onKeyDown:Bt(i.onKeyDown,g=>{const v=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&h(g.key),!(v&&g.key===" ")&&TBe.includes(g.key)&&(m(),g.preventDefault())})})})});wZ.displayName=bZ;var EZ="SelectValue",SZ=w.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:a="",...o}=e,l=Yc(EZ,n),{onValueNodeHasChildrenChange:u}=l,d=s!==void 0,f=ln(t,l.onValueNodeChange);return ni(()=>{u(d)},[u,d]),c.jsx(jt.span,{...o,ref:f,style:{pointerEvents:"none"},children:VZ(l.value)?c.jsx(c.Fragment,{children:a}):s})});SZ.displayName=EZ;var PBe="SelectIcon",_Z=w.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...i}=e;return c.jsx(jt.span,{"aria-hidden":!0,...i,ref:t,children:r||""})});_Z.displayName=PBe;var IBe="SelectPortal",NZ=e=>c.jsx(_D,{asChild:!0,...e});NZ.displayName=IBe;var vd="SelectContent",TZ=w.forwardRef((e,t)=>{const n=Yc(vd,e.__scopeSelect),[r,i]=w.useState();if(ni(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?cl.createPortal(c.jsx(CZ,{scope:e.__scopeSelect,children:c.jsx(SS.Slot,{scope:e.__scopeSelect,children:c.jsx("div",{children:e.children})})}),s):null}return c.jsx(kZ,{...e,ref:t})});TZ.displayName=vd;var sa=10,[CZ,Xc]=hp(vd),DBe="SelectContentImpl",MBe=fh("SelectContent.RemoveScroll"),kZ=w.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:a,side:o,sideOffset:l,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:v,...y}=e,b=Yc(vd,n),[x,S]=w.useState(null),[E,_]=w.useState(null),T=ln(t,K=>S(K)),[C,k]=w.useState(null),[A,j]=w.useState(null),D=_S(n),[P,M]=w.useState(!1),L=w.useRef(!1);w.useEffect(()=>{if(x)return TJ(x)},[x]),yJ();const O=w.useCallback(K=>{const[xe,...ae]=D().map(re=>re.ref.current),[ue]=ae.slice(-1),Ee=document.activeElement;for(const re of K)if(re===Ee||(re==null||re.scrollIntoView({block:"nearest"}),re===xe&&E&&(E.scrollTop=0),re===ue&&E&&(E.scrollTop=E.scrollHeight),re==null||re.focus(),document.activeElement!==Ee))return},[D,E]),B=w.useCallback(()=>O([C,x]),[O,C,x]);w.useEffect(()=>{P&&B()},[P,B]);const{onOpenChange:R,triggerPointerDownPosRef:F}=b;w.useEffect(()=>{if(x){let K={x:0,y:0};const xe=ue=>{var Ee,re;K={x:Math.abs(Math.round(ue.pageX)-(((Ee=F.current)==null?void 0:Ee.x)??0)),y:Math.abs(Math.round(ue.pageY)-(((re=F.current)==null?void 0:re.y)??0))}},ae=ue=>{K.x<=10&&K.y<=10?ue.preventDefault():x.contains(ue.target)||R(!1),document.removeEventListener("pointermove",xe),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",xe),document.addEventListener("pointerup",ae,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",xe),document.removeEventListener("pointerup",ae,{capture:!0})}}},[x,R,F]),w.useEffect(()=>{const K=()=>R(!1);return window.addEventListener("blur",K),window.addEventListener("resize",K),()=>{window.removeEventListener("blur",K),window.removeEventListener("resize",K)}},[R]);const[I,X]=WZ(K=>{const xe=D().filter(Ee=>!Ee.disabled),ae=xe.find(Ee=>Ee.ref.current===document.activeElement),ue=qZ(xe,K,ae);ue&&setTimeout(()=>ue.ref.current.focus())}),G=w.useCallback((K,xe,ae)=>{const ue=!L.current&&!ae;(b.value!==void 0&&b.value===xe||ue)&&(k(K),ue&&(L.current=!0))},[b.value]),$=w.useCallback(()=>x==null?void 0:x.focus(),[x]),be=w.useCallback((K,xe,ae)=>{const ue=!L.current&&!ae;(b.value!==void 0&&b.value===xe||ue)&&j(K)},[b.value]),je=r==="popper"?Uk:AZ,Q=je===Uk?{side:o,sideOffset:l,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:v}:{};return c.jsx(CZ,{scope:n,content:x,viewport:E,onViewportChange:_,itemRefCallback:G,selectedItem:C,onItemLeave:$,itemTextRefCallback:be,focusSelectedItem:B,selectedItemText:A,position:r,isPositioned:P,searchRef:I,children:c.jsx(ND,{as:MBe,allowPinchZoom:!0,children:c.jsx(SD,{asChild:!0,trapped:b.open,onMountAutoFocus:K=>{K.preventDefault()},onUnmountAutoFocus:Bt(i,K=>{var xe;(xe=b.trigger)==null||xe.focus({preventScroll:!0}),K.preventDefault()}),children:c.jsx(ED,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:K=>K.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:c.jsx(je,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:K=>K.preventDefault(),...y,...Q,onPlaced:()=>M(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Bt(y.onKeyDown,K=>{const xe=K.ctrlKey||K.altKey||K.metaKey;if(K.key==="Tab"&&K.preventDefault(),!xe&&K.key.length===1&&X(K.key),["ArrowUp","ArrowDown","Home","End"].includes(K.key)){let ue=D().filter(Ee=>!Ee.disabled).map(Ee=>Ee.ref.current);if(["ArrowUp","End"].includes(K.key)&&(ue=ue.slice().reverse()),["ArrowUp","ArrowDown"].includes(K.key)){const Ee=K.target,re=ue.indexOf(Ee);ue=ue.slice(re+1)}setTimeout(()=>O(ue)),K.preventDefault()}})})})})})})});kZ.displayName=DBe;var RBe="SelectItemAlignedPosition",AZ=w.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...i}=e,s=Yc(vd,n),a=Xc(vd,n),[o,l]=w.useState(null),[u,d]=w.useState(null),f=ln(t,T=>d(T)),h=_S(n),p=w.useRef(!1),m=w.useRef(!0),{viewport:g,selectedItem:v,selectedItemText:y,focusSelectedItem:b}=a,x=w.useCallback(()=>{if(s.trigger&&s.valueNode&&o&&u&&g&&v&&y){const T=s.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),k=s.valueNode.getBoundingClientRect(),A=y.getBoundingClientRect();if(s.dir!=="rtl"){const Ee=A.left-C.left,re=k.left-Ee,Je=T.left-re,De=T.width+Je,tt=Math.max(De,C.width),Y=window.innerWidth-sa,pe=MB(re,[sa,Math.max(sa,Y-tt)]);o.style.minWidth=De+"px",o.style.left=pe+"px"}else{const Ee=C.right-A.right,re=window.innerWidth-k.right-Ee,Je=window.innerWidth-T.right-re,De=T.width+Je,tt=Math.max(De,C.width),Y=window.innerWidth-sa,pe=MB(re,[sa,Math.max(sa,Y-tt)]);o.style.minWidth=De+"px",o.style.right=pe+"px"}const j=h(),D=window.innerHeight-sa*2,P=g.scrollHeight,M=window.getComputedStyle(u),L=parseInt(M.borderTopWidth,10),O=parseInt(M.paddingTop,10),B=parseInt(M.borderBottomWidth,10),R=parseInt(M.paddingBottom,10),F=L+O+P+R+B,I=Math.min(v.offsetHeight*5,F),X=window.getComputedStyle(g),G=parseInt(X.paddingTop,10),$=parseInt(X.paddingBottom,10),be=T.top+T.height/2-sa,je=D-be,Q=v.offsetHeight/2,K=v.offsetTop+Q,xe=L+O+K,ae=F-xe;if(xe<=be){const Ee=j.length>0&&v===j[j.length-1].ref.current;o.style.bottom="0px";const re=u.clientHeight-g.offsetTop-g.offsetHeight,Je=Math.max(je,Q+(Ee?$:0)+re+B),De=xe+Je;o.style.height=De+"px"}else{const Ee=j.length>0&&v===j[0].ref.current;o.style.top="0px";const Je=Math.max(be,L+g.offsetTop+(Ee?G:0)+Q)+ae;o.style.height=Je+"px",g.scrollTop=xe-be+g.offsetTop}o.style.margin=`${sa}px 0`,o.style.minHeight=I+"px",o.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[h,s.trigger,s.valueNode,o,u,g,v,y,s.dir,r]);ni(()=>x(),[x]);const[S,E]=w.useState();ni(()=>{u&&E(window.getComputedStyle(u).zIndex)},[u]);const _=w.useCallback(T=>{T&&m.current===!0&&(x(),b==null||b(),m.current=!1)},[x,b]);return c.jsx(FBe,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:p,onScrollButtonChange:_,children:c.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:c.jsx(jt.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});AZ.displayName=RBe;var LBe="SelectPopperPosition",Uk=w.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=sa,...s}=e,a=NS(n);return c.jsx(EBe,{...a,...s,ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Uk.displayName=LBe;var[FBe,zD]=hp(vd,{}),zk="SelectViewport",jZ=w.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...i}=e,s=Xc(zk,n),a=zD(zk,n),o=ln(t,s.onViewportChange),l=w.useRef(0);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),c.jsx(SS.Slot,{scope:n,children:c.jsx(jt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Bt(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=a;if(h!=null&&h.current&&f){const p=Math.abs(l.current-d.scrollTop);if(p>0){const m=window.innerHeight-sa*2,g=parseFloat(f.style.minHeight),v=parseFloat(f.style.height),y=Math.max(g,v);if(y<m){const b=y+p,x=Math.min(m,b),S=b-x;f.style.height=x+"px",f.style.bottom==="0px"&&(d.scrollTop=S>0?S:0,f.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});jZ.displayName=zk;var OZ="SelectGroup",[BBe,$Be]=hp(OZ),UBe=w.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=Gf();return c.jsx(BBe,{scope:n,id:i,children:c.jsx(jt.div,{role:"group","aria-labelledby":i,...r,ref:t})})});UBe.displayName=OZ;var PZ="SelectLabel",IZ=w.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=$Be(PZ,n);return c.jsx(jt.div,{id:i.id,...r,ref:t})});IZ.displayName=PZ;var m1="SelectItem",[zBe,DZ]=hp(m1),MZ=w.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...a}=e,o=Yc(m1,n),l=Xc(m1,n),u=o.value===r,[d,f]=w.useState(s??""),[h,p]=w.useState(!1),m=ln(t,b=>{var x;return(x=l.itemRefCallback)==null?void 0:x.call(l,b,r,i)}),g=Gf(),v=w.useRef("touch"),y=()=>{i||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c.jsx(zBe,{scope:n,value:r,disabled:i,textId:g,isSelected:u,onItemTextChange:w.useCallback(b=>{f(x=>x||((b==null?void 0:b.textContent)??"").trim())},[]),children:c.jsx(SS.ItemSlot,{scope:n,value:r,disabled:i,textValue:d,children:c.jsx(jt.div,{role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:m,onFocus:Bt(a.onFocus,()=>p(!0)),onBlur:Bt(a.onBlur,()=>p(!1)),onClick:Bt(a.onClick,()=>{v.current!=="mouse"&&y()}),onPointerUp:Bt(a.onPointerUp,()=>{v.current==="mouse"&&y()}),onPointerDown:Bt(a.onPointerDown,b=>{v.current=b.pointerType}),onPointerMove:Bt(a.onPointerMove,b=>{var x;v.current=b.pointerType,i?(x=l.onItemLeave)==null||x.call(l):v.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Bt(a.onPointerLeave,b=>{var x;b.currentTarget===document.activeElement&&((x=l.onItemLeave)==null||x.call(l))}),onKeyDown:Bt(a.onKeyDown,b=>{var S;((S=l.searchRef)==null?void 0:S.current)!==""&&b.key===" "||(CBe.includes(b.key)&&y(),b.key===" "&&b.preventDefault())})})})})});MZ.displayName=m1;var um="SelectItemText",RZ=w.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,...s}=e,a=Yc(um,n),o=Xc(um,n),l=DZ(um,n),u=OBe(um,n),[d,f]=w.useState(null),h=ln(t,y=>f(y),l.onItemTextChange,y=>{var b;return(b=o.itemTextRefCallback)==null?void 0:b.call(o,y,l.value,l.disabled)}),p=d==null?void 0:d.textContent,m=w.useMemo(()=>c.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:v}=u;return ni(()=>(g(m),()=>v(m)),[g,v,m]),c.jsxs(c.Fragment,{children:[c.jsx(jt.span,{id:l.textId,...s,ref:h}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?cl.createPortal(s.children,a.valueNode):null]})});RZ.displayName=um;var LZ="SelectItemIndicator",FZ=w.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return DZ(LZ,n).isSelected?c.jsx(jt.span,{"aria-hidden":!0,...r,ref:t}):null});FZ.displayName=LZ;var Hk="SelectScrollUpButton",BZ=w.forwardRef((e,t)=>{const n=Xc(Hk,e.__scopeSelect),r=zD(Hk,e.__scopeSelect),[i,s]=w.useState(!1),a=ln(t,r.onScrollButtonChange);return ni(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=l.scrollTop>0;s(u)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?c.jsx(UZ,{...e,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});BZ.displayName=Hk;var Vk="SelectScrollDownButton",$Z=w.forwardRef((e,t)=>{const n=Xc(Vk,e.__scopeSelect),r=zD(Vk,e.__scopeSelect),[i,s]=w.useState(!1),a=ln(t,r.onScrollButtonChange);return ni(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<u;s(d)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?c.jsx(UZ,{...e,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});$Z.displayName=Vk;var UZ=w.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=e,s=Xc("SelectScrollButton",n),a=w.useRef(null),o=_S(n),l=w.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return w.useEffect(()=>()=>l(),[l]),ni(()=>{var d;const u=o().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[o]),c.jsx(jt.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:Bt(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:Bt(i.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:Bt(i.onPointerLeave,()=>{l()})})}),HBe="SelectSeparator",zZ=w.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return c.jsx(jt.div,{"aria-hidden":!0,...r,ref:t})});zZ.displayName=HBe;var Wk="SelectArrow",VBe=w.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=NS(n),s=Yc(Wk,n),a=Xc(Wk,n);return s.open&&a.position==="popper"?c.jsx(SBe,{...i,...r,ref:t}):null});VBe.displayName=Wk;var WBe="SelectBubbleInput",HZ=w.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const i=w.useRef(null),s=ln(r,i),a=yZ(t);return w.useEffect(()=>{const o=i.current;if(!o)return;const l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==t&&d){const f=new Event("change",{bubbles:!0});d.call(o,t),o.dispatchEvent(f)}},[a,t]),c.jsx(jt.select,{...n,style:{...vZ,...n.style},ref:s,defaultValue:t})});HZ.displayName=WBe;function VZ(e){return e===""||e===void 0}function WZ(e){const t=pd(e),n=w.useRef(""),r=w.useRef(0),i=w.useCallback(a=>{const o=n.current+a;t(o),function l(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(o)},[t]),s=w.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function qZ(e,t,n){const i=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let a=qBe(e,Math.max(s,0));i.length===1&&(a=a.filter(u=>u!==n));const l=a.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function qBe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var KBe=xZ,KZ=wZ,GBe=SZ,YBe=_Z,XBe=NZ,GZ=TZ,QBe=jZ,YZ=IZ,XZ=MZ,JBe=RZ,ZBe=FZ,QZ=BZ,JZ=$Z,ZZ=zZ;const Fn=KBe,Bn=GBe,jn=w.forwardRef(({className:e,children:t,...n},r)=>c.jsxs(KZ,{ref:r,className:Ve("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,c.jsx(YBe,{asChild:!0,children:c.jsx(TH,{className:"h-4 w-4 opacity-50"})})]}));jn.displayName=KZ.displayName;const eee=w.forwardRef(({className:e,...t},n)=>c.jsx(QZ,{ref:n,className:Ve("flex cursor-default items-center justify-center py-1",e),...t,children:c.jsx(Bfe,{className:"h-4 w-4"})}));eee.displayName=QZ.displayName;const tee=w.forwardRef(({className:e,...t},n)=>c.jsx(JZ,{ref:n,className:Ve("flex cursor-default items-center justify-center py-1",e),...t,children:c.jsx(TH,{className:"h-4 w-4"})}));tee.displayName=JZ.displayName;const On=w.forwardRef(({className:e,children:t,position:n="popper",...r},i)=>c.jsx(XBe,{children:c.jsxs(GZ,{ref:i,className:Ve("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[c.jsx(eee,{}),c.jsx(QBe,{className:Ve("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),c.jsx(tee,{})]})}));On.displayName=GZ.displayName;const e8e=w.forwardRef(({className:e,...t},n)=>c.jsx(YZ,{ref:n,className:Ve("px-2 py-1.5 text-sm font-semibold",e),...t}));e8e.displayName=YZ.displayName;const We=w.forwardRef(({className:e,children:t,...n},r)=>c.jsxs(XZ,{ref:r,className:Ve("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[c.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(ZBe,{children:c.jsx(sb,{className:"h-4 w-4"})})}),c.jsx(JBe,{children:t})]}));We.displayName=XZ.displayName;const t8e=w.forwardRef(({className:e,...t},n)=>c.jsx(ZZ,{ref:n,className:Ve("-mx-1 my-1 h-px bg-muted",e),...t}));t8e.displayName=ZZ.displayName;var TS="Switch",[n8e,Alt]=Md(TS),[r8e,i8e]=n8e(TS),nee=w.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:a,disabled:o,value:l="on",onCheckedChange:u,form:d,...f}=e,[h,p]=w.useState(null),m=ln(t,x=>p(x)),g=w.useRef(!1),v=h?d||!!h.closest("form"):!0,[y,b]=c1({prop:i,defaultProp:s??!1,onChange:u,caller:TS});return c.jsxs(r8e,{scope:n,checked:y,disabled:o,children:[c.jsx(jt.button,{type:"button",role:"switch","aria-checked":y,"aria-required":a,"data-state":aee(y),"data-disabled":o?"":void 0,disabled:o,value:l,...f,ref:m,onClick:Bt(e.onClick,x=>{b(S=>!S),v&&(g.current=x.isPropagationStopped(),g.current||x.stopPropagation())})}),v&&c.jsx(see,{control:h,bubbles:!g.current,name:r,value:l,checked:y,required:a,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});nee.displayName=TS;var ree="SwitchThumb",iee=w.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,i=i8e(ree,n);return c.jsx(jt.span,{"data-state":aee(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t})});iee.displayName=ree;var s8e="SwitchBubbleInput",see=w.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...i},s)=>{const a=w.useRef(null),o=ln(a,s),l=yZ(n),u=aZ(t);return w.useEffect(()=>{const d=a.current;if(!d)return;const f=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==n&&p){const m=new Event("click",{bubbles:r});p.call(d,n),d.dispatchEvent(m)}},[l,n,r]),c.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:o,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});see.displayName=s8e;function aee(e){return e?"checked":"unchecked"}var oee=nee,a8e=iee;const Pu=w.forwardRef(({className:e,...t},n)=>c.jsx(oee,{className:Ve("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:c.jsx(a8e,{className:Ve("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Pu.displayName=oee.displayName;const HD=w.createContext(void 0),Gu=({value:e,defaultValue:t,onValueChange:n,children:r,className:i})=>{const[s,a]=w.useState(t||""),o=e!==void 0?e:s,l=w.useCallback(d=>{e===void 0&&a(d),n==null||n(d)},[e,n]),u=w.useMemo(()=>({value:o,onValueChange:l}),[o,l]);return c.jsx(HD.Provider,{value:u,children:c.jsx("div",{className:i,children:r})})},hc=w.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,role:"tablist",className:Ve("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));hc.displayName="TabsList";const ir=w.forwardRef(({className:e,value:t,...n},r)=>{const i=w.useContext(HD);if(!i)throw new Error("TabsTrigger must be used within a Tabs component");const s=i.value===t;return c.jsx("button",{ref:r,role:"tab","aria-selected":s,className:Ve("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",s?"bg-background text-foreground shadow-sm":"",e),onClick:()=>i.onValueChange(t),...n})});ir.displayName="TabsTrigger";const Ft=w.forwardRef(({className:e,value:t,...n},r)=>{const i=w.useContext(HD);if(!i)throw new Error("TabsContent must be used within a Tabs component");return i.value!==t?null:c.jsx("div",{ref:r,role:"tabpanel",className:Ve("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...n})});Ft.displayName="TabsContent";const o8e={interval_minutes:5,timeout_seconds:10,retries:3,enabled:!0};function l8e(){const[e,t]=w.useState([]),[n,r]=w.useState([]),[i,s]=w.useState(null),[a,o]=w.useState(!1),[l,u]=w.useState(!0),d=w.useRef(null),f=w.useCallback(async()=>{const{data:{user:j}}=await J.auth.getUser();return j},[]),h=w.useCallback(async()=>{try{u(!0);const j=await f();if(!j)return;const{data:D,error:P}=await J.from("ping_targets").select("*").eq("user_id",j.id).order("created_at",{ascending:!1});P?console.error("Error loading targets:",P):t(D||[]);const{data:M,error:L}=await J.from("ping_results").select("*").eq("user_id",j.id).order("timestamp",{ascending:!1}).limit(1e3);L?console.error("Error loading results:",L):r(M||[]);const{data:O,error:B}=await J.from("ping_settings").select("*").eq("user_id",j.id).single();if(B&&B.code!=="PGRST116"&&console.error("Error loading settings:",B),O)s(O);else{const R={...o8e,user_id:j.id},{data:F,error:I}=await J.from("ping_settings").insert(R).select().single();I?console.error("Error creating default settings:",I):s(F)}}catch(j){console.error("Error loading data from database:",j)}finally{u(!1)}},[f]);w.useEffect(()=>{h()},[h]);const p=w.useCallback(async j=>{const D=new AbortController,P=j.timeout||((i==null?void 0:i.timeout_seconds)??10),M=setTimeout(()=>D.abort(),P*1e3);try{const L=performance.now(),O=j.method!=="GET"||j.headers&&Object.keys(j.headers).length>0||j.body||j.url.includes("/api/")||j.url.includes("algolia.net")||j.expected_text,B={method:j.method||"GET",signal:D.signal};O?(B.headers={"Content-Type":"application/json",...j.headers},j.body&&["POST","PUT","PATCH"].includes(j.method||"GET")&&(B.body=j.body)):B.mode="no-cors";const R=await fetch(j.url,B),I=performance.now()-L;clearTimeout(M);let X="",G=0,$=R.status;if(O&&R.type!=="opaque")try{X=await R.text().then(xe=>xe.slice(0,1024)),G=new Blob([X]).size}catch(xe){console.warn("Could not read response text:",xe)}else $=200;const je=(j.expected_status||[200,201,202,204]).includes($),Q=!j.expected_text||X.includes(j.expected_text),K=je&&Q;return{responseTime:I,status:K?"success":"failure",statusCode:$,responseText:X,responseSize:G,error:K?void 0:`Status: ${$}${Q?"":", Expected text not found"}`}}catch(L){return clearTimeout(M),L instanceof Error?L.name==="AbortError"?{responseTime:P*1e3,status:"timeout",error:"Request timed out"}:{responseTime:0,status:"failure",error:L.message}:{responseTime:0,status:"failure",error:"Unknown error"}}},[i==null?void 0:i.timeout_seconds]),m=w.useCallback(async j=>{var P;const D=performance.now();try{const M=j.url,L=j.mongodb_config||{};console.log("MongoDB ping - URI:",M),console.log("MongoDB ping - Config:",L);const O=void 0,B=void 0;console.log("MongoDB API endpoint:",O),console.log("Webhook secret exists:",!!B);const R=M.startsWith("mongodb://")||M.startsWith("mongodb+srv://");if(console.log("MongoDB validation - URI valid:",R),console.log("MongoDB validation - URI:",M.substring(0,50)+"..."),!R)return console.log("MongoDB validation failed: Invalid URI format"),{responseTime:performance.now()-D,status:"failure",error:"Invalid MongoDB URI format",responseText:"URI must start with mongodb:// or mongodb+srv://"};const F=M.split("/"),I=(P=F[F.length-1])==null?void 0:P.split("?")[0],X=L.database||I||"test",G=L.collection||"partners",$=L.operation||"ping";console.log("MongoDB config - Database:",X,"Collection:",G,"Operation:",$);let be="";const je=50+Math.random()*100;switch($){case"count":{be="";break}case"find":{be="";break}case"ping":default:be="";break}const Q=M.includes("@"),K=X&&X.length>0;console.log("MongoDB validation - Has credentials:",Q,"Has database:",K);const ae=performance.now()-D+je;return Q&&K?(console.log("MongoDB ping SUCCESS:",be),{responseTime:ae,status:"success",responseText:be}):(console.log("MongoDB ping FAILED: Missing credentials or database"),{responseTime:ae,status:"failure",error:"MongoDB URI missing credentials or database name",responseText:"Please ensure URI includes authentication and database"})}catch(M){const O=performance.now()-D;return M instanceof Error?{responseTime:O,status:"failure",error:M.message}:{responseTime:O,status:"failure",error:"Unknown MongoDB connection error"}}},[]),g=w.useCallback(async j=>{if(!j.enabled||!i)return;const D=await f();if(!D)return;let P,M=null;for(let L=0;L<=i.retries;L++){let O;if(console.log("Pinging target:",j.name,"Type:",j.type,"URL:",j.url),j.type==="mongodb"?(console.log("Using MongoDB monitoring for:",j.name),O={...await m(j),statusCode:void 0,responseSize:void 0}):(console.log("Using HTTP monitoring for:",j.name),O=await p(j)),console.log("Ping result for",j.name,":",O),O.status==="success"){M=O;break}else P=O.error,M=O,L<i.retries&&await new Promise(B=>setTimeout(B,1e3))}if(M){const L={target_id:j.id,user_id:D.id,timestamp:new Date().toISOString(),response_time:M.responseTime,status:M.status,status_code:M.statusCode??void 0,response_text:M.responseText??void 0,response_size:M.responseSize??void 0,error_message:P??void 0},{data:O,error:B}=await J.from("ping_results").insert(L).select().single();B?console.error("Error saving ping result:",B):O&&r(R=>[...R.filter(I=>I.target_id!==j.id).slice(-999),O])}},[p,m,i,f]),v=w.useCallback(async()=>{const j=e.filter(D=>D.enabled);await Promise.all(j.map(D=>g(D)))},[e,g]),y=w.useCallback(()=>{if(d.current||!i)return;o(!0),e.length>0&&v();const j=i.interval_minutes*60*1e3;d.current=setInterval(()=>{v()},j)},[v,i,e.length]),b=w.useCallback(()=>{d.current&&(clearInterval(d.current),d.current=null),o(!1)},[]);w.useEffect(()=>()=>{d.current&&clearInterval(d.current)},[]);const x=w.useCallback(j=>{const D=n.filter(I=>I.target_id===j),P=new Date,M=I=>{const X=new Date(P.getTime()-I*60*60*1e3),G=D.filter(be=>new Date(be.timestamp)>=X);return G.length===0?0:G.filter(be=>be.status==="success").length/G.length*100},L=D.slice(-10),O=L.length>0?L.filter(I=>I.response_time!==null&&I.status==="success").reduce((I,X)=>I+(X.response_time||0),0)/L.filter(I=>I.status==="success").length:0,B=D[D.length-1],R=B?B.status:"timeout",F=e.find(I=>I.id===j);return{target_id:j,target_name:(F==null?void 0:F.name)||"Unknown",url:(F==null?void 0:F.url)||"",user_id:(F==null?void 0:F.user_id)||"",total_checks:D.length,successful_checks:D.filter(I=>I.status==="success").length,uptime_percentage:M(24),avg_response_time:isNaN(O)?0:O,last_check:(B==null?void 0:B.timestamp)||"",current_status:R}},[n,e]),S=w.useCallback(j=>{const D=n.filter(M=>M.target_id===j),P=D[D.length-1];return(P==null?void 0:P.response_text)||""},[n]),E=w.useCallback(j=>n.filter(D=>D.target_id===j).length,[n]),_=w.useCallback(async j=>{const D=await f();if(!D)return;const P={method:"GET",headers:{},expected_status:[200,201,202,204],...j,user_id:D.id},{data:M,error:L}=await J.from("ping_targets").insert(P).select().single();L?console.error("Error adding target:",L):M&&t(O=>[...O,M])},[f]),T=w.useCallback(async(j,D)=>{const{data:P,error:M}=await J.from("ping_targets").update(D).eq("id",j).select().single();M?console.error("Error updating target:",M):P&&t(L=>L.map(O=>O.id===j?P:O))},[]),C=w.useCallback(async j=>{const{error:D}=await J.from("ping_targets").delete().eq("id",j);D?console.error("Error removing target:",D):(t(P=>P.filter(M=>M.id!==j)),r(P=>P.filter(M=>M.target_id!==j)))},[]),k=w.useCallback(async j=>{if(!i)return;const{data:D,error:P}=await J.from("ping_settings").update(j).eq("id",i.id).select().single();P?console.error("Error updating settings:",P):D&&s(D)},[i]),A=w.useCallback(async j=>{const D=e.find(P=>P.id===j);D&&await g(D)},[e,g]);return{targets:e,results:n,settings:i,isMonitoring:a,isLoading:l,addTarget:_,updateTarget:T,removeTarget:C,updateSettings:k,startMonitoring:y,stopMonitoring:b,manualPing:A,pingAllTargets:v,getUptimeStats:x,getLatestResultText:S,getTargetEntriesCount:E,loadDataFromDatabase:h}}function c8e(){var I,X,G,$,be,je;const{targets:e,settings:t,isMonitoring:n,isLoading:r,addTarget:i,updateTarget:s,removeTarget:a,updateSettings:o,startMonitoring:l,stopMonitoring:u,manualPing:d,getUptimeStats:f,getTargetEntriesCount:h}=l8e(),[p,m]=w.useState(!1),[g,v]=w.useState(!1),[y,b]=w.useState(!1),[x,S]=w.useState(null),[E,_]=w.useState(""),[T,C]=w.useState("200,201,202,204"),[k,A]=w.useState({name:"",url:"",enabled:!0,type:"http",method:"GET",headers:{},expected_status:[200,201,202,204],mongodb_config:{database:"",collection:"",operation:"ping",query:""}}),j=()=>{if(k.name&&k.url){const Q={name:k.name,url:k.url,type:k.type||"http",method:k.method||"GET",headers:k.headers||{},body:k.body,timeout:k.timeout,expected_status:k.expected_status||[200,201,202,204],expected_text:k.expected_text,mongodb_config:k.type==="mongodb"?k.mongodb_config:void 0,enabled:k.enabled??!0};i(Q),A({name:"",url:"",enabled:!0,type:"http",method:"GET",headers:{},expected_status:[200,201,202,204],mongodb_config:{database:"",collection:"",operation:"ping",query:""}}),v(!1)}},D=Q=>{S(Q),_(JSON.stringify(Q.headers||{},null,2)),C((Q.expected_status||[200]).join(",")),b(!0)},P=()=>{if(x){const Q={name:x.name,url:x.url,method:x.method,headers:x.headers,body:x.body,timeout:x.timeout,expected_status:x.expected_status,expected_text:x.expected_text,enabled:x.enabled};s(x.id,Q),b(!1),S(null)}},M=()=>{n?u():l()},L=Q=>Q<60?`${Q}min`:`${Q/60}h`,O=Q=>{if(!Q)return"Aldrig";const K=new Date(Q),ae=new Date().getTime()-K.getTime(),ue=Math.floor(ae/(1e3*60));if(ue<1)return"Nyss";if(ue<60)return`${ue}min sedan`;const Ee=Math.floor(ue/60);return Ee<24?`${Ee}h sedan`:`${Math.floor(Ee/24)}d sedan`},B=Q=>Q<1e3?`${Math.round(Q)}ms`:`${(Q/1e3).toFixed(1)}s`,R=Q=>{switch(Q){case"up":return"bg-green-500";case"down":return"bg-red-500";default:return"bg-gray-500"}},F=Q=>{switch(Q){case"up":return c.jsx(vr,{className:"h-4 w-4 text-green-600"});case"down":return c.jsx(T0,{className:"h-4 w-4 text-red-600"});default:return c.jsx(ht,{className:"h-4 w-4 text-gray-600"})}};return c.jsxs(c.Fragment,{children:[c.jsxs(Z,{children:[c.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c.jsxs("div",{children:[c.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[c.jsx(Ec,{className:"h-4 w-4"}),"Uptime Monitor"]}),c.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:t?`Kontrollerar var ${L(t.interval_minutes)}  ${t.timeout_seconds}s timeout`:"Loading..."})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Tt,{variant:n?"default":"secondary",className:"text-xs",children:n?"Monitoring":"Stopped"}),c.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>m(!0),children:c.jsx(Qo,{className:"h-4 w-4"})})]})]}),c.jsxs(ee,{children:[c.jsx("div",{className:"space-y-3",children:r?c.jsx("div",{className:"text-center text-muted-foreground py-4",children:"Loading ping targets..."}):e.length>0?e.map(Q=>{var ae;const K=f(Q.id),xe=h(Q.id);return c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer",onClick:()=>D(Q),title:"Click to edit target settings",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:`w-3 h-3 rounded-full ${R(K.current_status==="success"?"up":K.current_status==="failure"?"down":"unknown")}`}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-sm",children:Q.name}),c.jsxs("div",{className:"text-xs text-muted-foreground",children:[Q.url,"  ",O(K.last_check),Q.method&&Q.method!=="GET"&&`  ${Q.method}`,Q.type==="mongodb"&&`  ${xe} entries`]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"text-right",children:[c.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[F((K==null?void 0:K.current_status)==="success"?"up":(K==null?void 0:K.current_status)==="failure"?"down":"unknown"),c.jsxs("span",{className:"font-medium",children:[((ae=K==null?void 0:K.uptime_percentage)==null?void 0:ae.toFixed(1))||"0.0","%"]})]}),c.jsx("div",{className:"text-xs text-muted-foreground",children:((K==null?void 0:K.avg_response_time)||0)>0&&B((K==null?void 0:K.avg_response_time)||0)})]}),c.jsx(H,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-50 hover:opacity-100",onClick:ue=>{ue.stopPropagation(),d(Q.id)},title:"Test now",children:c.jsx(s2,{className:"h-3 w-3"})})]})]},Q.id)}):c.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[c.jsx(zfe,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),c.jsx("p",{children:"Inga vervakade webbplatser"}),c.jsxs(H,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>v(!0),children:[c.jsx(nt,{className:"h-4 w-4 mr-2"}),"Lgg till frsta webbplats"]})]})}),e.length>0&&c.jsxs("div",{className:"flex justify-between mt-4 pt-4 border-t",children:[c.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.filter(Q=>Q.enabled).length," av ",e.length," aktiva",n&&t&&`  Nsta kontroll: ${L(t.interval_minutes)}`]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(H,{variant:"outline",size:"sm",onClick:()=>v(!0),children:[c.jsx(nt,{className:"h-4 w-4 mr-2"}),"Lgg till"]}),c.jsx(H,{variant:"outline",size:"sm",onClick:M,children:n?c.jsxs(c.Fragment,{children:[c.jsx(che,{className:"h-4 w-4 mr-2"}),"Pausa"]}):c.jsxs(c.Fragment,{children:[c.jsx(jH,{className:"h-4 w-4 mr-2"}),"Starta"]})})]})]})]})]}),c.jsx(kt,{open:g,onOpenChange:v,children:c.jsxs(St,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[c.jsx(_t,{children:c.jsx(Nt,{children:"Lgg till API/webbplats vervakning"})}),c.jsxs(Gu,{defaultValue:"basic",className:"w-full",children:[c.jsxs(hc,{className:"grid w-full grid-cols-3",children:[c.jsx(ir,{value:"basic",children:"Grundlggande"}),c.jsx(ir,{value:"advanced",children:"Avancerat"}),c.jsx(ir,{value:"templates",children:"Mallar"})]}),c.jsxs(Ft,{value:"basic",className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"target-name",children:"Namn"}),c.jsx(ce,{id:"target-name",value:k.name,onChange:Q=>A(K=>({...K,name:Q.target.value})),placeholder:"Min API / webbplats"})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"target-url",children:"URL"}),c.jsx(ce,{id:"target-url",value:k.url,onChange:Q=>A(K=>({...K,url:Q.target.value})),placeholder:"https://api.example.com/health or mongodb+srv://..."})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"target-type",children:"Typ av vervakning"}),c.jsxs(Fn,{value:k.type||"http",onValueChange:Q=>A(K=>({...K,type:Q})),children:[c.jsx(jn,{children:c.jsx(Bn,{})}),c.jsxs(On,{children:[c.jsx(We,{value:"http",children:"HTTP/API"}),c.jsx(We,{value:"mongodb",children:"MongoDB Database"})]})]})]}),k.type==="http"&&c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"target-method",children:"HTTP-metod"}),c.jsxs(Fn,{value:k.method||"GET",onValueChange:Q=>A(K=>({...K,method:Q})),children:[c.jsx(jn,{children:c.jsx(Bn,{})}),c.jsxs(On,{children:[c.jsx(We,{value:"GET",children:"GET"}),c.jsx(We,{value:"POST",children:"POST"}),c.jsx(We,{value:"PUT",children:"PUT"}),c.jsx(We,{value:"DELETE",children:"DELETE"}),c.jsx(We,{value:"HEAD",children:"HEAD"}),c.jsx(We,{value:"OPTIONS",children:"OPTIONS"})]})]})]}),k.type==="mongodb"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"mongodb-database",children:"Databasnamn"}),c.jsx(ce,{id:"mongodb-database",value:((I=k.mongodb_config)==null?void 0:I.database)||"",onChange:Q=>A(K=>({...K,mongodb_config:{...K.mongodb_config,database:Q.target.value}})),placeholder:"digitalidag"})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"mongodb-collection",children:"Kollektionsnamn (valfritt)"}),c.jsx(ce,{id:"mongodb-collection",value:((X=k.mongodb_config)==null?void 0:X.collection)||"",onChange:Q=>A(K=>({...K,mongodb_config:{...K.mongodb_config,collection:Q.target.value}})),placeholder:"test_collection"})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"mongodb-operation",children:"Operation"}),c.jsxs(Fn,{value:((G=k.mongodb_config)==null?void 0:G.operation)||"ping",onValueChange:Q=>A(K=>({...K,mongodb_config:{...K.mongodb_config,operation:Q}})),children:[c.jsx(jn,{children:c.jsx(Bn,{})}),c.jsxs(On,{children:[c.jsx(We,{value:"ping",children:"Ping (testa anslutning)"}),c.jsx(We,{value:"count",children:"Count (rkna dokument)"}),c.jsx(We,{value:"find",children:"Find (sk dokument)"})]})]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Pu,{id:"target-enabled",checked:k.enabled,onCheckedChange:Q=>A(K=>({...K,enabled:Q}))}),c.jsx(ie,{htmlFor:"target-enabled",children:"Aktiverad"})]})]}),c.jsxs(Ft,{value:"advanced",className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"target-headers",children:"Headers (JSON format)"}),c.jsx("textarea",{id:"target-headers",className:"w-full h-24 p-2 border rounded-md text-sm font-mono",value:E||JSON.stringify(k.headers||{},null,2),onChange:Q=>{_(Q.target.value);try{const K=JSON.parse(Q.target.value);A(xe=>({...xe,headers:K}))}catch{}},placeholder:'{\\n  "Authorization": "Bearer your-token",\\n  "X-API-Key": "your-api-key"\\n}'})]}),["POST","PUT","PATCH"].includes(k.method||"GET")&&c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"target-body",children:"Request Body"}),c.jsx("textarea",{id:"target-body",className:"w-full h-24 p-2 border rounded-md text-sm font-mono",value:k.body||"",onChange:Q=>A(K=>({...K,body:Q.target.value})),placeholder:'{"query": "test"}'})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"target-expected-status",children:"Frvntade statuskoder (kommaseparerade)"}),c.jsx(ce,{id:"target-expected-status",value:T,onChange:Q=>{C(Q.target.value);try{const K=Q.target.value.split(",").map(xe=>parseInt(xe.trim())).filter(xe=>!isNaN(xe));A(xe=>({...xe,expected_status:K}))}catch{}},placeholder:"200,201,202,204"})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"target-expected-text",children:"Frvntad text i svar (valfritt)"}),c.jsx(ce,{id:"target-expected-text",value:k.expected_text||"",onChange:Q=>A(K=>({...K,expected_text:Q.target.value})),placeholder:"success"})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"target-timeout",children:"Timeout (sekunder, valfritt)"}),c.jsx(ce,{id:"target-timeout",type:"number",value:k.timeout||"",onChange:Q=>A(K=>({...K,timeout:Q.target.value?parseInt(Q.target.value):void 0})),placeholder:"10"})]})]}),c.jsx(Ft,{value:"templates",className:"space-y-4",children:c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-medium",children:"Snabbmallar"}),c.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[c.jsx(H,{variant:"outline",size:"sm",onClick:()=>{A({name:"Algolia Search Index",url:"https://APPLICATION_ID-dsn.algolia.net/1/indexes/INDEX_NAME/query",type:"http",method:"POST",headers:{"X-Algolia-Application-Id":"YOUR_APPLICATION_ID","X-Algolia-API-Key":"YOUR_SEARCH_API_KEY","Content-Type":"application/json"},body:'{"query": "test", "hitsPerPage": 1}',expected_status:[200],enabled:!0}),_(JSON.stringify({"X-Algolia-Application-Id":"YOUR_APPLICATION_ID","X-Algolia-API-Key":"YOUR_SEARCH_API_KEY","Content-Type":"application/json"},null,2)),C("200")},children:" Algolia Search API"}),c.jsx(H,{variant:"outline",size:"sm",onClick:()=>{A({name:"REST API Health Check",url:"https://api.example.com/health",type:"http",method:"GET",headers:{Authorization:"Bearer YOUR_TOKEN"},expected_status:[200],expected_text:"healthy",enabled:!0}),_(JSON.stringify({Authorization:"Bearer YOUR_TOKEN"},null,2)),C("200")},children:" REST API Health"}),c.jsx(H,{variant:"outline",size:"sm",onClick:()=>{A({name:"GraphQL Endpoint",url:"https://api.example.com/graphql",type:"http",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer YOUR_TOKEN"},body:'{"query": "{ __schema { types { name } } }"}',expected_status:[200],enabled:!0}),_(JSON.stringify({"Content-Type":"application/json",Authorization:"Bearer YOUR_TOKEN"},null,2)),C("200")},children:" GraphQL API"}),c.jsx(H,{variant:"outline",size:"sm",onClick:()=>{A({name:"DigitalIdag Users Count",url:"mongodb+srv://app:YOUR_PASSWORD@digitalidag.khxg9ko.mongodb.net/digitalidag?retryWrites=true&w=majority&appName=DigitalIdag",type:"mongodb",enabled:!0,mongodb_config:{database:"digitalidag",collection:"partners",operation:"count",query:""}})},children:" MongoDB Users Count"})]})]})})]}),c.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[c.jsx(H,{variant:"outline",onClick:()=>v(!1),children:"Avbryt"}),c.jsx(H,{onClick:j,children:"Lgg till vervakning"})]})]})}),c.jsx(kt,{open:y,onOpenChange:b,children:c.jsxs(St,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[c.jsx(_t,{children:c.jsxs(Nt,{children:["Edit ",x==null?void 0:x.name]})}),x&&c.jsxs(Gu,{defaultValue:"basic",className:"w-full",children:[c.jsxs(hc,{className:"grid w-full grid-cols-2",children:[c.jsx(ir,{value:"basic",children:"Grundlggande"}),c.jsx(ir,{value:"advanced",children:"Avancerat"})]}),c.jsxs(Ft,{value:"basic",className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"edit-target-name",children:"Namn"}),c.jsx(ce,{id:"edit-target-name",value:x.name,onChange:Q=>S(K=>K?{...K,name:Q.target.value}:null),placeholder:"Min API / webbplats"})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"edit-target-url",children:"URL"}),c.jsx(ce,{id:"edit-target-url",value:x.url,onChange:Q=>S(K=>K?{...K,url:Q.target.value}:null),placeholder:"https://api.example.com/health"})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"edit-target-method",children:"HTTP-metod"}),c.jsxs(Fn,{value:x.method||"GET",onValueChange:Q=>S(K=>K?{...K,method:Q}:null),children:[c.jsx(jn,{children:c.jsx(Bn,{})}),c.jsxs(On,{children:[c.jsx(We,{value:"GET",children:"GET"}),c.jsx(We,{value:"POST",children:"POST"}),c.jsx(We,{value:"PUT",children:"PUT"}),c.jsx(We,{value:"DELETE",children:"DELETE"}),c.jsx(We,{value:"HEAD",children:"HEAD"}),c.jsx(We,{value:"OPTIONS",children:"OPTIONS"})]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Pu,{id:"edit-target-enabled",checked:x.enabled,onCheckedChange:Q=>S(K=>K?{...K,enabled:Q}:null)}),c.jsx(ie,{htmlFor:"edit-target-enabled",children:"Aktiverad"})]})]}),c.jsxs(Ft,{value:"advanced",className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"edit-target-headers",children:"Headers (JSON format)"}),c.jsx("textarea",{id:"edit-target-headers",className:"w-full h-24 p-2 border rounded-md text-sm font-mono",value:E,onChange:Q=>{_(Q.target.value);try{const K=JSON.parse(Q.target.value);S(xe=>xe?{...xe,headers:K}:null)}catch{}},placeholder:'{\\n  "Authorization": "Bearer your-token"\\n}'})]}),["POST","PUT","PATCH"].includes(x.method||"GET")&&c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"edit-target-body",children:"Request Body"}),c.jsx("textarea",{id:"edit-target-body",className:"w-full h-24 p-2 border rounded-md text-sm font-mono",value:x.body||"",onChange:Q=>S(K=>K?{...K,body:Q.target.value}:null),placeholder:'{"query": "test"}'})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"edit-target-expected-status",children:"Frvntade statuskoder"}),c.jsx(ce,{id:"edit-target-expected-status",value:T,onChange:Q=>{C(Q.target.value);try{const K=Q.target.value.split(",").map(xe=>parseInt(xe.trim())).filter(xe=>!isNaN(xe));S(xe=>xe?{...xe,expected_status:K}:null)}catch{}},placeholder:"200,201,202,204"})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"edit-target-expected-text",children:"Frvntad text i svar"}),c.jsx(ce,{id:"edit-target-expected-text",value:x.expected_text||"",onChange:Q=>S(K=>K?{...K,expected_text:Q.target.value}:null),placeholder:"success"})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"edit-target-timeout",children:"Timeout (sekunder)"}),c.jsx(ce,{id:"edit-target-timeout",type:"number",value:x.timeout||"",onChange:Q=>S(K=>K?{...K,timeout:Q.target.value?parseInt(Q.target.value):void 0}:null),placeholder:"10"})]})]})]}),c.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[c.jsxs(H,{variant:"destructive",onClick:()=>{x&&(a(x.id),b(!1),S(null))},children:[c.jsx($i,{className:"h-4 w-4 mr-2"}),"Ta bort"]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx(H,{variant:"outline",onClick:()=>b(!1),children:"Avbryt"}),c.jsx(H,{onClick:P,children:"Spara ndringar"})]})]})]})}),c.jsx(kt,{open:p,onOpenChange:m,children:c.jsxs(St,{className:"max-w-2xl",children:[c.jsx(_t,{children:c.jsx(Nt,{children:"Instllningar fr Uptime Monitor"})}),c.jsxs(Gu,{defaultValue:"general",className:"w-full",children:[c.jsxs(hc,{className:"grid w-full grid-cols-2",children:[c.jsx(ir,{value:"general",children:"Allmnt"}),c.jsx(ir,{value:"targets",children:"Webbplatser"})]}),c.jsx(Ft,{value:"general",className:"space-y-4",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"interval",children:"Kontrollintervall (minuter)"}),c.jsxs(Fn,{value:(($=t==null?void 0:t.interval_minutes)==null?void 0:$.toString())||"5",onValueChange:Q=>o({interval_minutes:parseInt(Q)}),children:[c.jsx(jn,{children:c.jsx(Bn,{})}),c.jsxs(On,{children:[c.jsx(We,{value:"1",children:"1 minut"}),c.jsx(We,{value:"5",children:"5 minuter"}),c.jsx(We,{value:"10",children:"10 minuter"}),c.jsx(We,{value:"30",children:"30 minuter"}),c.jsx(We,{value:"60",children:"1 timme"})]})]})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"timeout",children:"Timeout (sekunder)"}),c.jsxs(Fn,{value:((be=t==null?void 0:t.timeout_seconds)==null?void 0:be.toString())||"10",onValueChange:Q=>o({timeout_seconds:parseInt(Q)}),children:[c.jsx(jn,{children:c.jsx(Bn,{})}),c.jsxs(On,{children:[c.jsx(We,{value:"5",children:"5 sekunder"}),c.jsx(We,{value:"10",children:"10 sekunder"}),c.jsx(We,{value:"30",children:"30 sekunder"}),c.jsx(We,{value:"60",children:"60 sekunder"})]})]})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"retries",children:"Antal terfrsk"}),c.jsxs(Fn,{value:((je=t==null?void 0:t.retries)==null?void 0:je.toString())||"3",onValueChange:Q=>o({retries:parseInt(Q)}),children:[c.jsx(jn,{children:c.jsx(Bn,{})}),c.jsxs(On,{children:[c.jsx(We,{value:"0",children:"0"}),c.jsx(We,{value:"1",children:"1"}),c.jsx(We,{value:"3",children:"3"}),c.jsx(We,{value:"5",children:"5"})]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Pu,{id:"monitoring-enabled",checked:(t==null?void 0:t.enabled)||!1,onCheckedChange:Q=>o({enabled:Q})}),c.jsx(ie,{htmlFor:"monitoring-enabled",children:"Aktivera vervakning"})]})]})}),c.jsx(Ft,{value:"targets",className:"space-y-4",children:c.jsx("div",{className:"space-y-3",children:e.map(Q=>{var xe;const K=f(Q.id);return c.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(Pu,{checked:Q.enabled,onCheckedChange:ae=>s(Q.id,{enabled:ae})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:Q.name}),c.jsx("div",{className:"text-sm text-muted-foreground",children:Q.url}),c.jsxs("div",{className:"text-xs text-muted-foreground",children:["Uptime: ",((xe=K==null?void 0:K.uptime_percentage)==null?void 0:xe.toFixed(1))||"0.0","% (24h)"]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(H,{variant:"ghost",size:"icon",onClick:()=>d(Q.id),title:"Manuell kontroll",children:c.jsx(s2,{className:"h-4 w-4"})}),c.jsx(H,{variant:"ghost",size:"icon",onClick:()=>a(Q.id),title:"Ta bort",children:c.jsx($i,{className:"h-4 w-4"})})]})]},Q.id)})})})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx(H,{onClick:()=>m(!1),children:"Stng"})})]})})]})}function xs(e){const{user:t}=Tr(),{clients:n}=Sn(),{projects:r}=Jn(),{entries:i}=si(),{updateCurrentVatCalculations:s}=pS((t==null?void 0:t.id)||null),[a,o]=w.useState([]),[l,u]=w.useState(!0),[d,f]=w.useState(null),h=t==null?void 0:t.id,p=w.useCallback(async()=>{if(!h){o([]),u(!1);return}try{u(!0),f(null);const{data:T,error:C}=await J.from("invoice_items").select("*").eq("user_id",h).order("created_at",{ascending:!1});if(C)throw C;o(T||[])}catch(T){console.error("Error fetching invoice items:",T),f(T instanceof Error?T.message:"Failed to fetch invoice items");const C=localStorage.getItem(`invoice_items_${h}`);C&&o(JSON.parse(C))}finally{u(!1)}},[h]),m=w.useCallback(async T=>{if(!h)throw new Error("User not authenticated");try{let C;T.type==="hourly"?C=(T.quantity||0)*(T.rate||0):C=T.rate||0;const k={user_id:h,client_id:T.client_id||null,project_id:T.project_id||null,description:T.description,hours:T.type==="hourly"?T.quantity:null,hourly_rate:T.type==="hourly"?T.rate:null,fixed_amount:T.type==="fixed"?T.rate:null,total_amount:C,currency:"SEK",invoice_date:T.invoice_date||new Date().toISOString().split("T")[0],due_date:T.due_date||null,status:T.status||"draft"},{data:A,error:j}=await J.from("invoice_items").insert([k]).select().single();if(j)throw j;if(A){o(P=>[A,...P]);const D=[A,...a];return localStorage.setItem(`invoice_items_${h}`,JSON.stringify(D)),s&&s().catch(P=>{console.log("VAT recalculation failed (non-critical):",P)}),A}return null}catch(C){console.error("Error adding invoice item:",C);const k=T.type==="hourly"?(T.quantity||0)*(T.rate||0):T.rate||0,j=[{id:`local_${Date.now()}`,user_id:h,client_id:T.client_id||null,project_id:T.project_id||null,description:T.description,hours:T.type==="hourly"?T.quantity:null,hourly_rate:T.type==="hourly"?T.rate:null,fixed_amount:T.type==="fixed"?T.rate:null,total_amount:k,currency:"SEK",invoice_date:T.invoice_date||new Date().toISOString().split("T")[0],due_date:T.due_date||null,status:T.status||"draft",notes:T.notes||null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},...a];throw o(j),localStorage.setItem(`invoice_items_${h}`,JSON.stringify(j)),C}},[h,a,s]),g=w.useCallback(async T=>{if(!h)throw new Error("User not authenticated");try{const{id:C,...k}=T,A={};if(k.quantity!==void 0||k.rate!==void 0||k.type!==void 0){const P=a.find(M=>M.id===C);if(P){const M=k.type||(P.hours?"hourly":"fixed"),L=k.quantity??(P.hours||1),O=k.rate??(P.hourly_rate||P.fixed_amount||0);M==="hourly"?(A.hours=L,A.hourly_rate=O,A.fixed_amount=null,A.total_amount=L*O):(A.hours=null,A.hourly_rate=null,A.fixed_amount=O,A.total_amount=O)}}k.description!==void 0&&(A.description=k.description),k.client_id!==void 0&&(A.client_id=k.client_id),k.project_id!==void 0&&(A.project_id=k.project_id),k.invoice_date!==void 0&&(A.invoice_date=k.invoice_date),k.due_date!==void 0&&(A.due_date=k.due_date),k.status!==void 0&&(A.status=k.status),k.notes!==void 0&&(A.notes=k.notes);const{data:j,error:D}=await J.from("invoice_items").update({...A,updated_at:new Date().toISOString()}).eq("id",C).eq("user_id",h).select().single();if(D)throw D;if(j){o(M=>M.map(L=>L.id===C?j:L));const P=a.map(M=>M.id===C?j:M);return localStorage.setItem(`invoice_items_${h}`,JSON.stringify(P)),j}return null}catch(C){throw console.error("Error updating invoice item:",C),C}},[h,a]),v=w.useCallback(async T=>{if(!h)throw new Error("User not authenticated");try{const{error:C}=await J.from("invoice_items").delete().eq("id",T).eq("user_id",h);if(C)throw C;o(A=>A.filter(j=>j.id!==T));const k=a.filter(A=>A.id!==T);localStorage.setItem(`invoice_items_${h}`,JSON.stringify(k))}catch(C){throw console.error("Error deleting invoice item:",C),C}},[h,a]),y=w.useCallback(()=>{const T=a.reduce((k,A)=>{switch(k.itemCount++,A.status){case"draft":k.totalDraft+=A.total_amount,k.totalUnbilled+=A.total_amount;break;case"sent":k.totalSent+=A.total_amount;break;case"paid":k.totalPaid+=A.total_amount;break}return k},{totalUnbilled:0,totalDraft:0,totalSent:0,totalPaid:0,itemCount:0,clientCount:0}),C=new Set(a.map(k=>k.client_id));return T.clientCount=C.size,T},[a]),b=w.useCallback(()=>{const T=new Map;a.forEach(k=>{if(!k.client_id)return;const A=n.find(D=>D.id===k.client_id);if(!A)return;T.has(k.client_id)||T.set(k.client_id,{client_id:k.client_id,client_name:A.name,company:A.company||void 0,totalUnbilled:0,totalDraft:0,totalSent:0,totalPaid:0,itemCount:0,projectCount:0,lastActivity:k.created_at});const j=T.get(k.client_id);switch(j.itemCount++,k.created_at>j.lastActivity&&(j.lastActivity=k.created_at),k.status){case"draft":j.totalDraft+=k.total_amount,j.totalUnbilled+=k.total_amount;break;case"sent":j.totalSent+=k.total_amount;break;case"paid":j.totalPaid+=k.total_amount;break}});const C=new Map;return a.forEach(k=>{!k.client_id||!k.project_id||(C.has(k.client_id)||C.set(k.client_id,new Set),C.get(k.client_id).add(k.project_id))}),T.forEach((k,A)=>{var j;k.projectCount=((j=C.get(A))==null?void 0:j.size)||0}),Array.from(T.values()).sort((k,A)=>A.totalUnbilled-k.totalUnbilled)},[a,n]),x=w.useCallback(()=>{const T=new Map;return a.forEach(C=>{if(!C.project_id||!C.client_id)return;const k=r.find(D=>D.id===C.project_id),A=n.find(D=>D.id===C.client_id);if(!k||!A)return;T.has(C.project_id)||T.set(C.project_id,{project_id:C.project_id,project_name:k.name,client_id:C.client_id,client_name:A.name,totalUnbilled:0,totalDraft:0,totalSent:0,totalPaid:0,itemCount:0,totalHours:0,averageRate:0,lastActivity:C.created_at});const j=T.get(C.project_id);switch(j.itemCount++,C.created_at>j.lastActivity&&(j.lastActivity=C.created_at),C.hours&&(j.totalHours+=C.hours),C.status){case"draft":j.totalDraft+=C.total_amount,j.totalUnbilled+=C.total_amount;break;case"sent":j.totalSent+=C.total_amount;break;case"paid":j.totalPaid+=C.total_amount;break}}),T.forEach(C=>{const k=a.filter(D=>D.project_id===C.project_id),A=k.reduce((D,P)=>D+P.total_amount,0),j=k.reduce((D,P)=>D+(P.hours||0),0);C.averageRate=j>0?A/j:0}),Array.from(T.values()).sort((C,k)=>k.totalUnbilled-C.totalUnbilled)},[a,r,n]),S=w.useCallback(async(T,C,k)=>{const A=i.filter(L=>T.includes(L.id));if(A.length===0)return null;const j=A.reduce((L,O)=>L+O.hours,0),D=r.find(L=>L.id===A[0].project_id),P=n.find(L=>L.id===C);if(!D||!P)return null;const M=D.hourly_rate||P.hourly_rate||0;return m({client_id:C,project_id:A[0].project_id,description:k||`${D.name} - ${j} hours`,quantity:j,rate:M,type:"hourly",invoice_date:new Date().toISOString().split("T")[0],due_date:new Date(Date.now()+20*24*60*60*1e3).toISOString().split("T")[0]})},[i,r,n,m]),E=w.useCallback(async T=>{const C=T.map(k=>g({id:k,status:"sent"}));await Promise.all(C)},[g]),_=w.useCallback(async T=>{const C=T.map(k=>g({id:k,status:"paid"}));await Promise.all(C)},[g]);return w.useEffect(()=>{p()},[p]),{invoiceItems:a,loading:l,error:d,addInvoiceItem:m,updateInvoiceItem:g,deleteInvoiceItem:v,getInvoiceSummary:y,getClientSummaries:b,getProjectSummaries:x,createInvoiceFromTimeEntries:S,markAsInvoiced:E,markAsPaid:_,refetch:p}}const lee=6048e5,u8e=864e5,cee=6e4,uee=36e5,wv=43200,KB=1440,GB=Symbol.for("constructDateFrom");function Ta(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&GB in e?e[GB](t):e instanceof Date?new e.constructor(t):new Date(t)}function on(e,t){return Ta(t||e,e)}function d8e(e,t,n){const r=on(e,n==null?void 0:n.in);return isNaN(t)?Ta(e,NaN):(t&&r.setDate(r.getDate()+t),r)}let f8e={};function dy(){return f8e}function Xg(e,t){var o,l,u,d;const n=dy(),r=(t==null?void 0:t.weekStartsOn)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=on(e,t==null?void 0:t.in),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function g1(e,t){return Xg(e,{...t,weekStartsOn:1})}function dee(e,t){const n=on(e,t==null?void 0:t.in),r=n.getFullYear(),i=Ta(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=g1(i),a=Ta(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=g1(a);return n.getTime()>=s.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function y1(e){const t=on(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function fy(e,...t){const n=Ta.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function YB(e,t){const n=on(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function fee(e,t,n){const[r,i]=fy(n==null?void 0:n.in,e,t),s=YB(r),a=YB(i),o=+s-y1(s),l=+a-y1(a);return Math.round((o-l)/u8e)}function h8e(e,t){const n=dee(e,t),r=Ta(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),g1(r)}function yx(e,t){const n=+on(e)-+on(t);return n<0?-1:n>0?1:n}function p8e(e){return Ta(e,Date.now())}function m8e(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function g8e(e){return!(!m8e(e)&&typeof e!="number"||isNaN(+on(e)))}function y8e(e,t,n){const[r,i]=fy(n==null?void 0:n.in,e,t),s=r.getFullYear()-i.getFullYear(),a=r.getMonth()-i.getMonth();return s*12+a}function v8e(e,t,n){const[r,i]=fy(n==null?void 0:n.in,e,t),s=XB(r,i),a=Math.abs(fee(r,i));r.setDate(r.getDate()-s*a);const o=+(XB(r,i)===-s),l=s*(a-o);return l===0?0:l}function XB(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function x8e(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function b8e(e,t){return+on(e)-+on(t)}function w8e(e,t){const n=on(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function vx(e,t){const n=on(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function E8e(e,t){const n=on(e,t==null?void 0:t.in);return+w8e(n,t)==+vx(n,t)}function S8e(e,t,n){const[r,i,s]=fy(n==null?void 0:n.in,e,e,t),a=yx(i,s),o=Math.abs(y8e(i,s));if(o<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-a*o);let l=yx(i,s)===-a;E8e(r)&&o===1&&yx(r,s)===1&&(l=!1);const u=a*(o-+l);return u===0?0:u}function _8e(e,t,n){const r=b8e(e,t)/1e3;return x8e(n==null?void 0:n.roundingMethod)(r)}function YN(e,t){const n=on(e,t==null?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function N8e(e,t){const n=on(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const T8e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},C8e=(e,t,n)=>{let r;const i=T8e[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function XN(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const k8e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},A8e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},j8e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},O8e={date:XN({formats:k8e,defaultWidth:"full"}),time:XN({formats:A8e,defaultWidth:"full"}),dateTime:XN({formats:j8e,defaultWidth:"full"})},P8e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},I8e=(e,t,n,r)=>P8e[e];function Wp(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):a;i=e.formattingValues[o]||e.formattingValues[a]}else{const a=e.defaultWidth,o=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[o]||e.values[a]}const s=e.argumentCallback?e.argumentCallback(t):t;return i[s]}}const D8e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},M8e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},R8e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},L8e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},F8e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},B8e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},$8e=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},U8e={ordinalNumber:$8e,era:Wp({values:D8e,defaultWidth:"wide"}),quarter:Wp({values:M8e,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Wp({values:R8e,defaultWidth:"wide"}),day:Wp({values:L8e,defaultWidth:"wide"}),dayPeriod:Wp({values:F8e,defaultWidth:"wide",formattingValues:B8e,defaultFormattingWidth:"wide"})};function qp(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const a=s[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?H8e(o,f=>f.test(a)):z8e(o,f=>f.test(a));let u;u=e.valueCallback?e.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(a.length);return{value:u,rest:d}}}function z8e(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function H8e(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function V8e(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],s=t.match(e.parsePattern);if(!s)return null;let a=e.valueCallback?e.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const o=t.slice(i.length);return{value:a,rest:o}}}const W8e=/^(\d+)(th|st|nd|rd)?/i,q8e=/\d+/i,K8e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},G8e={any:[/^b/i,/^(a|c)/i]},Y8e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},X8e={any:[/1/i,/2/i,/3/i,/4/i]},Q8e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},J8e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Z8e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},e$e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},t$e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},n$e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},r$e={ordinalNumber:V8e({matchPattern:W8e,parsePattern:q8e,valueCallback:e=>parseInt(e,10)}),era:qp({matchPatterns:K8e,defaultMatchWidth:"wide",parsePatterns:G8e,defaultParseWidth:"any"}),quarter:qp({matchPatterns:Y8e,defaultMatchWidth:"wide",parsePatterns:X8e,defaultParseWidth:"any",valueCallback:e=>e+1}),month:qp({matchPatterns:Q8e,defaultMatchWidth:"wide",parsePatterns:J8e,defaultParseWidth:"any"}),day:qp({matchPatterns:Z8e,defaultMatchWidth:"wide",parsePatterns:e$e,defaultParseWidth:"any"}),dayPeriod:qp({matchPatterns:t$e,defaultMatchWidth:"any",parsePatterns:n$e,defaultParseWidth:"any"})},hee={code:"en-US",formatDistance:C8e,formatLong:O8e,formatRelative:I8e,localize:U8e,match:r$e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function i$e(e,t){const n=on(e,t==null?void 0:t.in);return fee(n,N8e(n))+1}function s$e(e,t){const n=on(e,t==null?void 0:t.in),r=+g1(n)-+h8e(n);return Math.round(r/lee)+1}function pee(e,t){var d,f,h,p;const n=on(e,t==null?void 0:t.in),r=n.getFullYear(),i=dy(),s=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(h=i.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,a=Ta((t==null?void 0:t.in)||e,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const o=Xg(a,t),l=Ta((t==null?void 0:t.in)||e,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const u=Xg(l,t);return+n>=+o?r+1:+n>=+u?r:r-1}function a$e(e,t){var o,l,u,d;const n=dy(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=pee(e,t),s=Ta((t==null?void 0:t.in)||e,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Xg(s,t)}function o$e(e,t){const n=on(e,t==null?void 0:t.in),r=+Xg(n,t)-+a$e(n,t);return Math.round(r/lee)+1}function Pt(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const _l={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Pt(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Pt(n+1,2)},d(e,t){return Pt(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Pt(e.getHours()%12||12,t.length)},H(e,t){return Pt(e.getHours(),t.length)},m(e,t){return Pt(e.getMinutes(),t.length)},s(e,t){return Pt(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Pt(i,t.length)}},ef={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},QB={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return _l.y(e,t)},Y:function(e,t,n,r){const i=pee(e,r),s=i>0?i:1-i;if(t==="YY"){const a=s%100;return Pt(a,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):Pt(s,t.length)},R:function(e,t){const n=dee(e);return Pt(n,t.length)},u:function(e,t){const n=e.getFullYear();return Pt(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Pt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Pt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return _l.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Pt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=o$e(e,r);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):Pt(i,t.length)},I:function(e,t,n){const r=s$e(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Pt(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):_l.d(e,t)},D:function(e,t,n){const r=i$e(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Pt(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Pt(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Pt(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return Pt(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(r===12?i=ef.noon:r===0?i=ef.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(r>=17?i=ef.evening:r>=12?i=ef.afternoon:r>=4?i=ef.morning:i=ef.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return _l.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):_l.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Pt(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Pt(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):_l.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):_l.s(e,t)},S:function(e,t){return _l.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return ZB(r);case"XXXX":case"XX":return yu(r);case"XXXXX":case"XXX":default:return yu(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return ZB(r);case"xxxx":case"xx":return yu(r);case"xxxxx":case"xxx":default:return yu(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+JB(r,":");case"OOOO":default:return"GMT"+yu(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+JB(r,":");case"zzzz":default:return"GMT"+yu(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return Pt(r,t.length)},T:function(e,t,n){return Pt(+e,t.length)}};function JB(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+t+Pt(s,2)}function ZB(e,t){return e%60===0?(e>0?"-":"+")+Pt(Math.abs(e)/60,2):yu(e,t)}function yu(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Pt(Math.trunc(r/60),2),s=Pt(r%60,2);return n+i+t+s}const e8=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},mee=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},l$e=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return e8(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",e8(r,t)).replace("{{time}}",mee(i,t))},c$e={p:mee,P:l$e},u$e=/^D+$/,d$e=/^Y+$/,f$e=["D","DD","YY","YYYY"];function h$e(e){return u$e.test(e)}function p$e(e){return d$e.test(e)}function m$e(e,t,n){const r=g$e(e,t,n);if(console.warn(r),f$e.includes(e))throw new RangeError(r)}function g$e(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const y$e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,v$e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,x$e=/^'([^]*?)'?$/,b$e=/''/g,w$e=/[a-zA-Z]/;function xd(e,t,n){var d,f,h,p;const r=dy(),i=r.locale??hee,s=r.firstWeekContainsDate??((f=(d=r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,a=r.weekStartsOn??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.weekStartsOn)??0,o=on(e,n==null?void 0:n.in);if(!g8e(o))throw new RangeError("Invalid time value");let l=t.match(v$e).map(m=>{const g=m[0];if(g==="p"||g==="P"){const v=c$e[g];return v(m,i.formatLong)}return m}).join("").match(y$e).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:E$e(m)};if(QB[g])return{isToken:!0,value:m};if(g.match(w$e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const u={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return l.map(m=>{if(!m.isToken)return m.value;const g=m.value;(p$e(g)||h$e(g))&&m$e(g,t,String(e));const v=QB[g[0]];return v(o,g,i.localize,u)}).join("")}function E$e(e){const t=e.match(x$e);return t?t[1].replace(b$e,"'"):e}function S$e(e,t,n){const r=dy(),i=(n==null?void 0:n.locale)??r.locale??hee,s=2520,a=yx(e,t);if(isNaN(a))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:a}),[l,u]=fy(n==null?void 0:n.in,...a>0?[t,e]:[e,t]),d=_8e(u,l),f=(y1(u)-y1(l))/1e3,h=Math.round((d-f)/60);let p;if(h<2)return n!=null&&n.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,o):d<10?i.formatDistance("lessThanXSeconds",10,o):d<20?i.formatDistance("lessThanXSeconds",20,o):d<40?i.formatDistance("halfAMinute",0,o):d<60?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",1,o):h===0?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",h,o);if(h<45)return i.formatDistance("xMinutes",h,o);if(h<90)return i.formatDistance("aboutXHours",1,o);if(h<KB){const m=Math.round(h/60);return i.formatDistance("aboutXHours",m,o)}else{if(h<s)return i.formatDistance("xDays",1,o);if(h<wv){const m=Math.round(h/KB);return i.formatDistance("xDays",m,o)}else if(h<wv*2)return p=Math.round(h/wv),i.formatDistance("aboutXMonths",p,o)}if(p=S8e(u,l),p<12){const m=Math.round(h/wv);return i.formatDistance("xMonths",m,o)}else{const m=p%12,g=Math.trunc(p/12);return m<3?i.formatDistance("aboutXYears",g,o):m<9?i.formatDistance("overXYears",g,o):i.formatDistance("almostXYears",g+1,o)}}function v1(e,t){return S$e(e,p8e(e),t)}function pc(e,t,n){const r=+on(e,n==null?void 0:n.in),[i,s]=[+on(t.start,n==null?void 0:n.in),+on(t.end,n==null?void 0:n.in)].sort((a,o)=>a-o);return r>=i&&r<=s}function Ev(e,t,n){return d8e(e,-t,n)}function $s(e,t){const n=()=>Ta(t==null?void 0:t.in,NaN),i=C$e(e);let s;if(i.date){const u=k$e(i.date,2);s=A$e(u.restDateString,u.year)}if(!s||isNaN(+s))return n();const a=+s;let o=0,l;if(i.time&&(o=j$e(i.time),isNaN(o)))return n();if(i.timezone){if(l=O$e(i.timezone),isNaN(l))return n()}else{const u=new Date(a+o),d=on(0,t==null?void 0:t.in);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return on(a+o+l,t==null?void 0:t.in)}const Sv={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},_$e=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,N$e=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,T$e=/^([+-])(\d{2})(?::?(\d{2}))?$/;function C$e(e){const t={},n=e.split(Sv.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],Sv.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Sv.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const i=Sv.timezone.exec(r);i?(t.time=r.replace(i[1],""),t.timezone=i[1]):t.time=r}return t}function k$e(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:e.slice((r[1]||r[2]).length)}}function A$e(e,t){if(t===null)return new Date(NaN);const n=e.match(_$e);if(!n)return new Date(NaN);const r=!!n[4],i=Kp(n[1]),s=Kp(n[2])-1,a=Kp(n[3]),o=Kp(n[4]),l=Kp(n[5])-1;if(r)return R$e(t,o,l)?P$e(t,o,l):new Date(NaN);{const u=new Date(0);return!D$e(t,s,a)||!M$e(t,i)?new Date(NaN):(u.setUTCFullYear(t,s,Math.max(i,a)),u)}}function Kp(e){return e?parseInt(e):1}function j$e(e){const t=e.match(N$e);if(!t)return NaN;const n=QN(t[1]),r=QN(t[2]),i=QN(t[3]);return L$e(n,r,i)?n*uee+r*cee+i*1e3:NaN}function QN(e){return e&&parseFloat(e.replace(",","."))||0}function O$e(e){if(e==="Z")return 0;const t=e.match(T$e);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return F$e(r,i)?n*(r*uee+i*cee):NaN}function P$e(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const i=r.getUTCDay()||7,s=(t-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const I$e=[31,null,31,30,31,30,31,31,30,31,30,31];function gee(e){return e%400===0||e%4===0&&e%100!==0}function D$e(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(I$e[t]||(gee(e)?29:28))}function M$e(e,t){return t>=1&&t<=(gee(e)?366:365)}function R$e(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function L$e(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function F$e(e,t){return t>=0&&t<=59}function B$e(){const{invoiceItems:e}=xs(),{clients:t}=Sn(),n=7,r=w.useMemo(()=>{const o=new Date;o.setHours(0,0,0,0);const l=new Date(o);return l.setDate(o.getDate()+n),l.setHours(23,59,59,999),e.filter(u=>{const d=new Date(u.invoice_date);return d>=o&&d<=l&&u.status!=="paid"}).sort((u,d)=>{const f=new Date(u.invoice_date),h=new Date(d.invoice_date);return f.getTime()-h.getTime()}).slice(0,5).map(u=>{const d=t.find(v=>v.id===u.client_id),f=new Date(u.invoice_date),h=new Date;h.setHours(0,0,0,0);const p=f.getTime()-h.getTime(),m=Math.ceil(p/(1e3*60*60*24));let g="normal";return m<0?g="overdue":m<=2?g="urgent":m<=4&&(g="soon"),{...u,clientName:(d==null?void 0:d.name)||"Unknown Client",daysUntilCreation:m,urgency:g}})},[e,t,n]),i=o=>{switch(o){case"overdue":return c.jsx(Za,{className:"h-4 w-4 text-red-500"});case"urgent":return c.jsx(ht,{className:"h-4 w-4 text-orange-500"});case"soon":return c.jsx(At,{className:"h-4 w-4 text-yellow-500"});default:return c.jsx(vr,{className:"h-4 w-4 text-green-500"})}},s=o=>{switch(o){case"overdue":return"bg-red-100 text-red-800 border-red-200";case"urgent":return"bg-orange-100 text-orange-800 border-orange-200";case"soon":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-green-100 text-green-800 border-green-200"}},a=o=>o<0?`${Math.abs(o)} days overdue to create`:o===0?"Ready to create today":o===1?"Ready to create tomorrow":`Create in ${o} days`;return r.length===0?c.jsxs(Z,{className:"h-full",children:[c.jsx(de,{className:"pb-3",children:c.jsxs(he,{className:"text-base flex items-center gap-2",children:[c.jsx(At,{className:"h-4 w-4"}),"Ready to Create (",n," days)"]})}),c.jsx(ee,{children:c.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[c.jsx(vr,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),c.jsx("p",{children:"No invoices ready to create"}),c.jsxs("p",{className:"text-sm",children:["All caught up for the next ",n," days!"]})]})})]}):c.jsxs(Z,{className:"h-full",children:[c.jsx(de,{className:"pb-3",children:c.jsxs(he,{className:"text-base flex items-center gap-2",children:[c.jsx(At,{className:"h-4 w-4"}),"Ready to Create (",n," days)"]})}),c.jsx(ee,{children:c.jsx("div",{className:"space-y-3",children:r.map(o=>c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[i(o.urgency),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("p",{className:"font-medium text-sm truncate",children:o.clientName}),c.jsx(Tt,{variant:"outline",className:`text-xs ${s(o.urgency)}`,children:o.status})]}),c.jsx("p",{className:"text-xs text-muted-foreground truncate",children:o.description})]})]}),c.jsxs("div",{className:"text-right flex-shrink-0 ml-2",children:[c.jsx("div",{className:"font-medium text-sm",children:le(o.total_amount)}),c.jsx("div",{className:"text-xs text-muted-foreground",children:a(o.daysUntilCreation)}),c.jsx("div",{className:"text-xs text-muted-foreground",children:xd(new Date(o.invoice_date),"MMM d")})]})]},o.id))})})]})}function $$e(){const{invoiceItems:e}=xs(),{clients:t}=Sn(),n=w.useMemo(()=>{const o=new Date;return o.setHours(0,0,0,0),e.filter(l=>!l.due_date||l.status==="paid"?!1:new Date(l.due_date)<o).sort((l,u)=>{const d=new Date(l.due_date),f=new Date(u.due_date);return d.getTime()-f.getTime()}).slice(0,10).map(l=>{const u=t.find(g=>g.id===l.client_id),d=new Date(l.due_date),f=new Date;f.setHours(0,0,0,0);const h=f.getTime()-d.getTime(),p=Math.ceil(h/(1e3*60*60*24));let m="medium";return p>30?m="critical":p>14&&(m="high"),{...l,clientName:(u==null?void 0:u.name)||"Unknown Client",daysOverdue:p,urgency:m}})},[e,t]),r=o=>{switch(o){case"critical":return c.jsx(Za,{className:"h-4 w-4 text-red-600"});case"high":return c.jsx(Za,{className:"h-4 w-4 text-red-500"});default:return c.jsx(ht,{className:"h-4 w-4 text-red-400"})}},i=o=>{switch(o){case"critical":return"bg-red-200 text-red-900 border-red-300";case"high":return"bg-red-100 text-red-800 border-red-200";default:return"bg-red-50 text-red-700 border-red-150"}},s=o=>o===1?"1 day overdue":`${o} days overdue`,a=n.reduce((o,l)=>o+l.total_amount,0);return n.length===0?c.jsxs(Z,{className:"h-full",children:[c.jsx(de,{className:"pb-3",children:c.jsxs(he,{className:"text-base flex items-center gap-2",children:[c.jsx(mn,{className:"h-4 w-4"}),"Overdue Invoices"]})}),c.jsx(ee,{children:c.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[c.jsx(mn,{className:"h-8 w-8 mx-auto mb-2 opacity-50 text-green-500"}),c.jsx("p",{children:"No overdue invoices"}),c.jsx("p",{className:"text-sm",children:"All payments are on track!"})]})})]}):c.jsxs(Z,{className:"h-full",children:[c.jsxs(de,{className:"pb-3",children:[c.jsxs(he,{className:"text-base flex items-center gap-2",children:[c.jsx(Za,{className:"h-4 w-4 text-red-500"}),"Overdue Invoices",c.jsx(Tt,{variant:"destructive",className:"ml-auto",children:n.length})]}),a>0&&c.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total overdue: ",c.jsx("span",{className:"font-semibold text-red-600",children:le(a)})]})]}),c.jsx(ee,{children:c.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:n.map(o=>c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-red-200 bg-red-50 hover:bg-red-100 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[r(o.urgency),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("p",{className:"font-medium text-sm truncate text-red-900",children:o.clientName}),c.jsx(Tt,{variant:"outline",className:`text-xs ${i(o.urgency)}`,children:o.status})]}),c.jsx("p",{className:"text-xs text-red-700 truncate",children:o.description})]})]}),c.jsxs("div",{className:"text-right flex-shrink-0 ml-2",children:[c.jsx("div",{className:"font-medium text-sm text-red-900",children:le(o.total_amount)}),c.jsx("div",{className:"text-xs font-medium text-red-600",children:s(o.daysOverdue)}),c.jsxs("div",{className:"text-xs text-red-600",children:["Due: ",xd(new Date(o.due_date),"MMM d")]})]})]},o.id))})})]})}const JN=[{type:"today-time",name:"Today's Hours",description:"Track your daily time logging progress",icon:ht,category:"Time",size:{w:1,h:1}},{type:"time-logged",name:"Monthly Time",description:"Monitor your monthly time tracking progress",icon:ht,category:"Time",size:{w:1,h:1}},{type:"quick-stats",name:"Quick Stats",description:"Key metrics at a glance",icon:eo,category:"Overview",size:{w:1,h:1}},{type:"projects-overview",name:"Projects Overview",description:"Status of your active projects",icon:N0,category:"Projects",size:{w:2,h:1}},{type:"recent-activities",name:"Recent Activities",description:"Latest actions and updates",icon:Ec,category:"Overview",size:{w:1,h:1}},{type:"quick-actions",name:"Quick Actions",description:"Fast access to common tasks",icon:xhe,category:"Overview",size:{w:1,h:1}},{type:"monthly-expenses",name:"Monthly Expenses",description:"Track your monthly expenses and trends",icon:mn,category:"Finance",size:{w:1,h:1}},{type:"revenue-chart",name:"Revenue Chart",description:"Visual representation of revenue trends",icon:ti,category:"Finance",size:{w:2,h:1}},{type:"cash-flow",name:"Cash Flow",description:"Monitor your cash flow and balance",icon:IH,category:"Finance",size:{w:1,h:1}},{type:"cash-flow-projections",name:"Cash Flow Projections",description:"Forecast future cash flow scenarios",icon:ul,category:"Finance",size:{w:2,h:1}},{type:"blank-card",name:"Custom Widget",description:"Create your own custom content",icon:nt,category:"Custom",size:{w:1,h:1}},{type:"yearly-budget-chart",name:"rsbudget vs Faktisk",description:"Bar chart comparing yearly budget to actual spending",icon:eo,category:"Finance",size:{w:2,h:1}},{type:"yearly-expense-distribution",name:"rlig Utgiftsfrdelning",description:"Pie chart showing yearly expense distribution",icon:Vw,category:"Finance",size:{w:2,h:1}},{type:"payment-sources",name:"Betalningskllor",description:"Overview of payment sources with expense counts",icon:Zj,category:"Finance",size:{w:1,h:1}},{type:"uptime-monitor",name:"Uptime Monitor",description:"Monitor website uptime and response times",icon:Ec,category:"Custom",size:{w:2,h:1}},{type:"upcoming-invoices",name:"Ready to Create",description:"Invoices ready to be created in the next 7 days",icon:At,category:"Finance",size:{w:1,h:1}},{type:"overdue-invoices",name:"Overdue Invoices",description:"Invoices past their due date that need attention",icon:Za,category:"Finance",size:{w:1,h:1}}];function t8({onAddWidget:e,children:t}){const[n,r]=w.useState(!1),i=(u,d)=>{const f=JN.find(p=>p.type===u);if(!f)return;const h={id:Date.now().toString(),type:u,title:f.name,size:d,position:{x:0,y:999,w:d.w,h:d.h}};e(h),r(!1)},s=["All","Overview","Finance","Time","Projects","Custom"],[a,o]=w.useState("All"),l=a==="All"?JN:JN.filter(u=>u.category===a);return c.jsxs(kt,{open:n,onOpenChange:r,children:[c.jsx(G5e,{asChild:!0,children:t}),c.jsxs(St,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[c.jsxs(_t,{children:[c.jsx(Nt,{children:"Add Widget"}),c.jsx(Gc,{children:"Choose a widget to add to your dashboard"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(u=>c.jsx(H,{variant:a===u?"default":"outline",size:"sm",onClick:()=>o(u),children:u},u))}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(u=>{const d=u.icon;return c.jsx(Z,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>i(u.type,u.size),children:c.jsx(ee,{className:"p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:c.jsx(d,{className:"h-5 w-5 text-primary"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-medium text-sm mb-1",children:u.name}),c.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:u.description}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:u.category}),c.jsxs("span",{className:"text-xs text-muted-foreground",children:[u.size.w,"",u.size.h]})]})]})]})})},u.type)})})]})]})]})}function U$e({widgetId:e,widgetTitle:t,onRemove:n,className:r=""}){const[i,s]=w.useState(!1),a=()=>{n(e),s(!1)};return c.jsxs(c.Fragment,{children:[c.jsx(H,{variant:"ghost",size:"icon",className:`h-8 w-8 bg-red-500/10 hover:bg-red-500/20 text-red-600 hover:text-red-700 ${r}`,onClick:()=>s(!0),title:"Remove widget",children:c.jsx(wr,{className:"h-4 w-4"})}),c.jsx(kt,{open:i,onOpenChange:s,children:c.jsxs(St,{children:[c.jsxs(_t,{children:[c.jsxs(Nt,{className:"flex items-center gap-2",children:[c.jsx(Za,{className:"h-5 w-5 text-red-500"}),"Remove Widget"]}),c.jsxs(Gc,{children:['Are you sure you want to remove the "',t,'" widget from your dashboard? This action cannot be undone.']})]}),c.jsxs(cy,{children:[c.jsx(H,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),c.jsx(H,{onClick:a,className:"bg-red-600 hover:bg-red-700 focus:ring-red-600",children:"Remove Widget"})]})]})})]})}const z$e={"company-motto":g_e,"monthly-expenses":y_e,"time-logged":v_e,"today-time":x_e,"revenue-chart":m6e,"quick-stats":g6e,"quick-actions":y6e,"recent-activities":v6e,"projects-overview":x6e,"cash-flow":b6e,"cash-flow-projections":w6e,"yearly-budget-chart":S6e,"yearly-expense-distribution":_6e,"payment-sources":Q5e,"uptime-monitor":c8e,"upcoming-invoices":B$e,"overdue-invoices":$$e,"blank-card":fJ};function H$e({isDarkMode:e}){const[t,n]=w.useState(!1),{user:r}=Tr(),{widgets:i,loading:s,updateWidgets:a,addWidget:o,removeWidget:l,updateWidget:u}=Kve((r==null?void 0:r.id)||null),d=v=>{l(v)},f=v=>{const y=i.find(x=>x.id===v);if(!y)return;const b=y.size.w===1?2:y.size.w===2?3:1;u(v,{size:{...y.size,w:b},position:{...y.position,w:b}})},h=v=>{if(n(!1),!v.destination)return;const y=Array.from(i),[b]=y.splice(v.source.index,1);y.splice(v.destination.index,0,b);const x=y.map((S,E)=>({...S,position:{...S.position,y:E}}));a(x)},p=v=>{o(v)},m=()=>{n(!0)},g=v=>{switch(v){case 2:return"col-span-1 md:col-span-2";case 3:return"col-span-1 md:col-span-2 lg:col-span-3";default:return"col-span-1"}};return s?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-muted-foreground",children:"Loading dashboard..."})]})}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"}),c.jsx("p",{className:"text-muted-foreground",children:"Welcome back! Here's what's happening with your business."})]}),c.jsx(t8,{onAddWidget:p,children:c.jsxs(H,{children:[c.jsx(nt,{className:"h-4 w-4 mr-2"}),"Add Widget"]})})]}),c.jsx(rve,{onDragEnd:h,onDragStart:m,children:c.jsx(dW,{droppableId:"dashboard",children:v=>c.jsxs("div",{...v.droppableProps,ref:v.innerRef,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 auto-rows-min",children:[i.map((y,b)=>{const x=z$e[y.type]||fJ;return c.jsx($ve,{draggableId:y.id,index:b,children:(S,E)=>c.jsxs("div",{ref:S.innerRef,...S.draggableProps,className:`relative group ${g(y.size.w)} ${E.isDragging?"opacity-70 shadow-2xl z-50":""}`,style:S.draggableProps.style,children:[c.jsxs("div",{className:`absolute top-2 right-2 z-10 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity ${t?"opacity-100":""}`,children:[c.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8 bg-blue-500/10 hover:bg-blue-500/20 text-blue-600 hover:text-blue-700",onClick:()=>f(y.id),title:`Resize widget (currently ${y.size.w===1?"small":y.size.w===2?"medium":"large"})`,children:y.size.w===1?c.jsx(she,{className:"h-4 w-4"}):c.jsx(ohe,{className:"h-4 w-4"})}),c.jsx(U$e,{widgetId:y.id,widgetTitle:y.title,onRemove:d}),c.jsx("div",{...S.dragHandleProps,children:c.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Drag to reorder",children:c.jsx(Hfe,{className:"h-4 w-4"})})})]}),c.jsx(x,{widget:y,isDarkMode:e})]})},y.id)}),v.placeholder]})})}),i.length===0&&c.jsx(Z,{className:"border-dashed border-2",children:c.jsx(ee,{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mx-auto",children:c.jsx(nt,{className:"h-8 w-8 text-muted-foreground"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium mb-1",children:"No widgets yet"}),c.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Get started by adding your first widget to the dashboard"}),c.jsx(t8,{onAddWidget:p,children:c.jsxs(H,{children:[c.jsx(nt,{className:"h-4 w-4 mr-2"}),"Add Your First Widget"]})})]})]})})})]})}function V$e({isDarkMode:e}){return c.jsx(H$e,{isDarkMode:e})}function W$e({isDarkMode:e,onTimeLogged:t,shouldFocus:n}){const{projects:r}=Jn(),{clients:i}=Sn(),{createTimeEntry:s}=si(),[a,o]=w.useState(""),[l,u]=w.useState(""),[d,f]=w.useState(""),[h,p]=w.useState(new Date().toISOString().split("T")[0]),[m,g]=w.useState(!1),[v,y]=w.useState(!1),b=w.useRef(null);w.useEffect(()=>{n&&b.current&&b.current.focus()},[n]);const x=async T=>{if(T.preventDefault(),!a||!l||v)return;y(!0);const{error:C}=await s({date:h,hours:parseFloat(a),project_id:l,comment:d.trim()||void 0});C||(o(""),f(""),t==null||t()),y(!1)},S=T=>{const C=new Date(T+"T00:00:00"),k=new Date().toISOString().split("T")[0];return T===k?"Today":C.toLocaleDateString("sv-SE",{weekday:"short",month:"short",day:"numeric"})},E=r.filter(T=>T.status==="active"),_=T=>i.find(k=>k.id===T.client_id);return c.jsxs("div",{className:`rounded-xl shadow-sm border p-6 transition-colors duration-200 ${e?"bg-slate-800 border-slate-700":"bg-white border-slate-200"}`,children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:`p-2 rounded-lg ${e?"bg-blue-900":"bg-blue-100"}`,children:c.jsx(ht,{className:`w-5 h-5 ${e?"text-blue-400":"text-blue-600"}`})}),c.jsx("h2",{className:`text-xl font-semibold ${e?"text-white":"text-slate-900"}`,children:"Log Today's Time"})]}),c.jsxs("form",{onSubmit:x,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-slate-300":"text-slate-700"}`,children:"Date"}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{type:"button",onClick:()=>g(!m),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent flex items-center justify-between transition-colors duration-200 ${e?"bg-slate-700 border-slate-600 text-white":"bg-white border-slate-300 text-slate-900"}`,children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(At,{className:`w-4 h-4 ${e?"text-slate-400":"text-slate-500"}`}),S(h)]})}),m&&c.jsx("div",{className:`absolute top-full left-0 right-0 mt-1 border rounded-lg shadow-lg z-10 transition-colors duration-200 ${e?"bg-slate-700 border-slate-600":"bg-white border-slate-300"}`,children:c.jsx("input",{type:"date",value:h,onChange:T=>{p(T.target.value),g(!1)},"aria-label":"Select date for time entry",className:`w-full px-3 py-2 border-0 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-slate-700 text-white":"bg-white text-slate-900"}`})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-slate-300":"text-slate-700"}`,children:"Hours"}),c.jsx("input",{ref:b,type:"number",step:"0.25",min:"0",max:"24",value:a,onChange:T=>o(T.target.value),placeholder:"0.0",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 ${e?"bg-slate-700 border-slate-600 text-white placeholder-slate-400":"bg-white border-slate-300 text-slate-900 placeholder-slate-500"}`,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-slate-300":"text-slate-700"}`,children:"Project"}),c.jsxs("select",{value:l,onChange:T=>u(T.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 ${e?"bg-slate-700 border-slate-600 text-white":"bg-white border-slate-300 text-slate-900"}`,required:!0,"aria-label":"Select project",children:[c.jsx("option",{value:"",children:"Select project"}),E.map(T=>{const C=_(T);return c.jsxs("option",{value:T.id,children:[T.name," ",C?`- ${C.name}${C.company?` (${C.company})`:""}`:""]},T.id)})]}),E.length===0&&c.jsxs("p",{className:`text-sm mt-1 ${e?"text-slate-400":"text-slate-500"}`,children:["No active projects available. ",c.jsx("a",{href:"/projects",className:"text-blue-500 hover:underline",children:"Create a project"})," to start tracking time."]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-slate-300":"text-slate-700"}`,children:"Comment (Optional)"}),c.jsx("textarea",{value:d,onChange:T=>f(T.target.value),placeholder:"Add any notes about this time entry...",rows:3,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none transition-colors duration-200 ${e?"bg-slate-700 border-slate-600 text-white placeholder-slate-400":"bg-white border-slate-300 text-slate-900 placeholder-slate-500"}`})]}),c.jsx("button",{type:"submit",disabled:v,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2.5 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2","data-testid":"log-time-btn",children:v?c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):c.jsxs(c.Fragment,{children:[c.jsx(nt,{className:"w-4 h-4"}),"Log Time"]})})]})]})}function q$e({isDarkMode:e}){const{entries:t}=si(),{clients:n}=Sn(),r=new Date().toISOString().split("T")[0],i=t.filter(l=>l.date===r),s=i.reduce((l,u)=>l+u.hours,0),a=l=>new Date(l+"T00:00:00").toLocaleDateString("sv-SE",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=l=>n.find(u=>u.id===l);return c.jsxs("div",{className:`rounded-xl shadow-sm border p-6 transition-colors duration-200 ${e?"bg-slate-800 border-slate-700":"bg-white border-slate-200"}`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`p-2 rounded-lg ${e?"bg-green-900":"bg-green-100"}`,children:c.jsx(At,{className:`w-5 h-5 ${e?"text-green-400":"text-green-600"}`})}),c.jsxs("div",{children:[c.jsx("h2",{className:`text-xl font-semibold ${e?"text-white":"text-slate-900"}`,children:"Today's Summary"}),c.jsx("p",{className:`text-sm ${e?"text-slate-400":"text-slate-600"}`,children:a(r)})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("div",{className:`flex items-center gap-2 text-2xl font-bold ${e?"text-white":"text-slate-900"}`,children:[c.jsx(ht,{className:`w-6 h-6 ${e?"text-blue-400":"text-blue-600"}`}),s.toFixed(1),"h"]}),c.jsxs("p",{className:`text-sm ${e?"text-slate-400":"text-slate-600"}`,children:[i.length," entries"]})]})]}),i.length===0?c.jsxs("div",{className:`text-center py-8 ${e?"text-slate-400":"text-slate-500"}`,children:[c.jsx(ht,{className:`w-12 h-12 mx-auto mb-3 ${e?"text-slate-600":"text-slate-300"}`}),c.jsx("p",{children:"No time logged today yet"})]}):c.jsx("div",{className:"space-y-3",children:i.map(l=>{var d,f,h;const u=o((d=l.project)==null?void 0:d.client_id);return c.jsxs("div",{className:`flex items-center gap-4 p-3 rounded-lg transition-colors duration-200 ${e?"bg-slate-700":"bg-slate-50"}`,children:[c.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:((f=l.project)==null?void 0:f.color)||"#64748B"}}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:`font-medium ${e?"text-white":"text-slate-900"}`,children:(h=l.project)==null?void 0:h.name}),u&&c.jsxs("div",{className:`flex items-center gap-1 text-xs ${e?"text-slate-400":"text-slate-600"}`,children:[c.jsx(Gs,{className:"w-3 h-3"}),c.jsxs("span",{children:[u.name,u.company?` (${u.company})`:""]})]}),l.comment&&c.jsx("p",{className:`text-sm truncate ${e?"text-slate-400":"text-slate-600"}`,children:l.comment})]}),c.jsxs("div",{className:`font-medium ${e?"text-white":"text-slate-900"}`,children:[l.hours,"h"]})]},l.id)})})]})}function K$e({isDarkMode:e}){const{entries:t}=si(),{projects:n}=Jn(),{clients:r}=Sn(),[i,s]=w.useState(""),[a,o]=w.useState(""),l=t.filter(p=>{var y,b;const m=r.find(x=>{var S;return x.id===((S=p.project)==null?void 0:S.client_id)}),g=!i||((y=p.project)==null?void 0:y.name.toLowerCase().includes(i.toLowerCase()))||(m==null?void 0:m.name.toLowerCase().includes(i.toLowerCase()))||((b=m==null?void 0:m.company)==null?void 0:b.toLowerCase().includes(i.toLowerCase()))||p.comment&&p.comment.toLowerCase().includes(i.toLowerCase()),v=!a||p.project_id===a;return g&&v}),u=l.reduce((p,m)=>p+m.hours,0),d=p=>new Date(p+"T00:00:00").toLocaleDateString("sv-SE",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),f=p=>r.find(m=>m.id===p),h=[...l].sort((p,m)=>new Date(m.date).getTime()-new Date(p.date).getTime());return c.jsxs("div",{className:`rounded-xl shadow-sm border p-6 transition-colors duration-200 ${e?"bg-slate-800 border-slate-700":"bg-white border-slate-200"}`,children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:`p-2 rounded-lg ${e?"bg-purple-900":"bg-purple-100"}`,children:c.jsx(nO,{className:`w-5 h-5 ${e?"text-purple-400":"text-purple-600"}`})}),c.jsxs("div",{children:[c.jsx("h2",{className:`text-xl font-semibold ${e?"text-white":"text-slate-900"}`,children:"Time Entries"}),c.jsxs("p",{className:`text-sm ${e?"text-slate-400":"text-slate-600"}`,children:[l.length," entries  ",u.toFixed(1)," hours total"]})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Kh,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${e?"text-slate-500":"text-slate-400"}`}),c.jsx("input",{type:"text",placeholder:"Search projects or comments...",value:i,onChange:p=>s(p.target.value),className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 ${e?"bg-slate-700 border-slate-600 text-white placeholder-slate-400":"bg-white border-slate-300 text-slate-900 placeholder-slate-500"}`})]}),c.jsxs("select",{value:a,onChange:p=>o(p.target.value),"aria-label":"Filter by project",className:`px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 ${e?"bg-slate-700 border-slate-600 text-white":"bg-white border-slate-300 text-slate-900"}`,children:[c.jsx("option",{value:"",children:"All projects"}),n.map(p=>{const m=f(p.client_id);return c.jsxs("option",{value:p.id,children:[p.name," ",m?`- ${m.name}`:""]},p.id)})]})]}),h.length===0?c.jsxs("div",{className:`text-center py-12 ${e?"text-slate-400":"text-slate-500"}`,children:[c.jsx(At,{className:`w-12 h-12 mx-auto mb-3 ${e?"text-slate-600":"text-slate-300"}`}),c.jsx("p",{children:"No time entries found"})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:`border-b ${e?"border-slate-600":"border-slate-200"}`,children:[c.jsx("th",{className:`text-left py-3 px-4 font-medium ${e?"text-slate-300":"text-slate-700"}`,children:"Date"}),c.jsx("th",{className:`text-left py-3 px-4 font-medium ${e?"text-slate-300":"text-slate-700"}`,children:"Project"}),c.jsx("th",{className:`text-left py-3 px-4 font-medium ${e?"text-slate-300":"text-slate-700"}`,children:"Client"}),c.jsx("th",{className:`text-left py-3 px-4 font-medium ${e?"text-slate-300":"text-slate-700"}`,children:"Hours"}),c.jsx("th",{className:`text-left py-3 px-4 font-medium ${e?"text-slate-300":"text-slate-700"}`,children:"Comment"})]})}),c.jsx("tbody",{children:h.map(p=>{var g,v,y;const m=f((g=p.project)==null?void 0:g.client_id);return c.jsxs("tr",{className:`border-b transition-colors duration-150 ${e?"border-slate-700 hover:bg-slate-700":"border-slate-100 hover:bg-slate-50"}`,children:[c.jsx("td",{className:`py-3 px-4 ${e?"text-white":"text-slate-900"}`,children:d(p.date)}),c.jsx("td",{className:"py-3 px-4",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:((v=p.project)==null?void 0:v.color)||"#64748B"}}),c.jsx("span",{className:e?"text-white":"text-slate-900",children:(y=p.project)==null?void 0:y.name})]})}),c.jsx("td",{className:`py-3 px-4 ${e?"text-slate-300":"text-slate-600"}`,children:m?c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Gs,{className:"w-3 h-3"}),c.jsx("span",{children:m.name}),m.company&&c.jsxs("span",{className:"text-xs",children:["(",m.company,")"]})]}):"-"}),c.jsxs("td",{className:`py-3 px-4 font-medium ${e?"text-white":"text-slate-900"}`,children:[p.hours,"h"]}),c.jsx("td",{className:`py-3 px-4 ${e?"text-slate-400":"text-slate-600"}`,children:p.comment||"-"})]},p.id)})})]})})]})}function G$e({isDarkMode:e}){const{entries:t}=si(),{projects:n}=Jn(),[r,i]=w.useState(""),[s,a]=w.useState(""),[o,l]=w.useState(""),u=t.filter(y=>{const b=new Date(y.date),x=r?new Date(r):null,S=s?new Date(s):null,E=(!x||b>=x)&&(!S||b<=S),_=!o||y.project_id===o;return E&&_}),d=u.reduce((y,b)=>y+b.hours,0),f=u.length>0?d/new Set(u.map(y=>y.date)).size:0,h=new Set(u.map(y=>y.date)).size,p=u.reduce((y,b)=>{var S,E;const x=((S=b.project)==null?void 0:S.name)||"Unknown";return y[x]||(y[x]={hours:0,color:((E=b.project)==null?void 0:E.color)||"#64748B"}),y[x].hours+=b.hours,y},{}),m=u.reduce((y,b)=>{const x=b.date.substring(0,7);return y[x]||(y[x]=0),y[x]+=b.hours,y},{}),g=y=>{const[b,x]=y.split("-");return new Date(parseInt(b),parseInt(x)-1).toLocaleDateString("sv-SE",{month:"long",year:"numeric"})},v=()=>!r&&!s?"All time":r&&!s?`From ${new Date(r).toLocaleDateString("sv-SE")}`:!r&&s?`Until ${new Date(s).toLocaleDateString("sv-SE")}`:`${new Date(r).toLocaleDateString("sv-SE")} - ${new Date(s).toLocaleDateString("sv-SE")}`;return c.jsxs("div",{className:`rounded-xl shadow-sm border p-6 transition-colors duration-200 ${e?"bg-slate-800 border-slate-700":"bg-white border-slate-200"}`,children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:`p-2 rounded-lg ${e?"bg-orange-900":"bg-orange-100"}`,children:c.jsx(bn,{className:`w-5 h-5 ${e?"text-orange-400":"text-orange-600"}`})}),c.jsxs("div",{children:[c.jsx("h2",{className:`text-xl font-semibold ${e?"text-white":"text-slate-900"}`,children:"Summary"}),c.jsx("p",{className:`text-sm ${e?"text-slate-400":"text-slate-600"}`,children:v()})]})]}),c.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 p-4 rounded-lg transition-colors duration-200 ${e?"bg-slate-700":"bg-slate-50"}`,children:[c.jsxs("div",{children:[c.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-slate-300":"text-slate-700"}`,children:"Start Date"}),c.jsx("input",{type:"date",value:r,onChange:y=>i(y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 ${e?"bg-slate-600 border-slate-500 text-white":"bg-white border-slate-300 text-slate-900"}`})]}),c.jsxs("div",{children:[c.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-slate-300":"text-slate-700"}`,children:"End Date"}),c.jsx("input",{type:"date",value:s,onChange:y=>a(y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 ${e?"bg-slate-600 border-slate-500 text-white":"bg-white border-slate-300 text-slate-900"}`})]}),c.jsxs("div",{children:[c.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-slate-300":"text-slate-700"}`,children:"Project Filter"}),c.jsxs("select",{value:o,onChange:y=>l(y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 ${e?"bg-slate-600 border-slate-500 text-white":"bg-white border-slate-300 text-slate-900"}`,children:[c.jsx("option",{value:"",children:"All projects"}),n.map(y=>c.jsx("option",{value:y.id,children:y.name},y.id))]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[c.jsxs("div",{className:`rounded-lg p-4 transition-colors duration-200 ${e?"bg-blue-900":"bg-blue-50"}`,children:[c.jsxs("div",{className:`text-2xl font-bold ${e?"text-blue-400":"text-blue-600"}`,children:[d.toFixed(1),"h"]}),c.jsx("div",{className:`text-sm ${e?"text-blue-400":"text-blue-600"}`,children:"Total Hours"})]}),c.jsxs("div",{className:`rounded-lg p-4 transition-colors duration-200 ${e?"bg-green-900":"bg-green-50"}`,children:[c.jsx("div",{className:`text-2xl font-bold ${e?"text-green-400":"text-green-600"}`,children:u.length}),c.jsx("div",{className:`text-sm ${e?"text-green-400":"text-green-600"}`,children:"Total Entries"})]}),c.jsxs("div",{className:`rounded-lg p-4 transition-colors duration-200 ${e?"bg-purple-900":"bg-purple-50"}`,children:[c.jsx("div",{className:`text-2xl font-bold ${e?"text-purple-400":"text-purple-600"}`,children:h}),c.jsx("div",{className:`text-sm ${e?"text-purple-400":"text-purple-600"}`,children:"Days Worked"})]}),c.jsxs("div",{className:`rounded-lg p-4 transition-colors duration-200 ${e?"bg-orange-900":"bg-orange-50"}`,children:[c.jsxs("div",{className:`text-2xl font-bold ${e?"text-orange-400":"text-orange-600"}`,children:[f.toFixed(1),"h"]}),c.jsx("div",{className:`text-sm ${e?"text-orange-400":"text-orange-600"}`,children:"Avg. Hours/Day"})]})]}),Object.keys(p).length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:`text-lg font-semibold mb-3 ${e?"text-white":"text-slate-900"}`,children:"Hours by Project"}),c.jsx("div",{className:"space-y-3",children:Object.entries(p).sort(([,y],[,b])=>b.hours-y.hours).map(([y,b])=>c.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg transition-colors duration-200 ${e?"bg-slate-700":"bg-slate-50"}`,children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:b.color}}),c.jsx("span",{className:`font-medium ${e?"text-white":"text-slate-900"}`,children:y})]}),c.jsxs("div",{className:`font-semibold ${e?"text-white":"text-slate-900"}`,children:[b.hours.toFixed(1),"h"]})]},y))})]}),Object.keys(m).length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:`text-lg font-semibold mb-3 ${e?"text-white":"text-slate-900"}`,children:"Hours by Month"}),c.jsx("div",{className:"space-y-3",children:Object.entries(m).sort(([y],[b])=>b.localeCompare(y)).map(([y,b])=>c.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg transition-colors duration-200 ${e?"bg-slate-700":"bg-slate-50"}`,children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(At,{className:`w-4 h-4 ${e?"text-slate-400":"text-slate-500"}`}),c.jsx("span",{className:`font-medium ${e?"text-white":"text-slate-900"}`,children:g(y)})]}),c.jsxs("div",{className:`font-semibold ${e?"text-white":"text-slate-900"}`,children:[b.toFixed(1),"h"]})]},y))})]}),u.length===0&&c.jsxs("div",{className:`text-center py-8 ${e?"text-slate-400":"text-slate-500"}`,children:[c.jsx(eO,{className:`w-12 h-12 mx-auto mb-3 ${e?"text-slate-600":"text-slate-300"}`}),c.jsx("p",{children:"No entries found for the selected filters"})]})]})}function Y$e({currentDate:e,onDateChange:t,isDarkMode:n}){const{entries:r}=si(),i=(f,h)=>new Date(f,h+1,0).getDate(),s=(f,h)=>new Date(f,h,1).getDay(),a=(f,h)=>{const p=i(f,h),m=s(f,h),g=[];for(let v=0;v<m;v++)g.push(null);for(let v=1;v<=p;v++){const y=`${f}-${String(h+1).padStart(2,"0")}-${String(v).padStart(2,"0")}`,b=r.filter(S=>S.date===y),x=b.reduce((S,E)=>S+E.hours,0);g.push({day:v,dateStr:y,entries:b,totalHours:x})}return g},o=f=>{const h=new Date(e);h.setMonth(h.getMonth()+(f==="next"?3:-3)),t(h)},l=[];for(let f=0;f<3;f++){const h=new Date(e.getFullYear(),e.getMonth()+f,1);l.push(h)}const u=f=>f.toLocaleDateString("sv-SE",{month:"long",year:"numeric"}),d=f=>`Q${Math.floor(f.getMonth()/3)+1} ${f.getFullYear()}`;return c.jsxs("div",{className:`rounded-xl shadow-sm border p-6 transition-colors duration-200 ${n?"bg-slate-800 border-slate-700":"bg-white border-slate-200"}`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h2",{className:`text-xl font-semibold ${n?"text-white":"text-slate-900"}`,children:["Quarter Overview - ",d(e)]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>o("prev"),title:"Previous quarter",className:`p-2 rounded-lg transition-colors duration-200 ${n?"hover:bg-slate-700 text-slate-400":"hover:bg-slate-100 text-slate-600"}`,children:c.jsx(Qj,{className:"w-5 h-5"})}),c.jsx("button",{onClick:()=>o("next"),title:"Next quarter",className:`p-2 rounded-lg transition-colors duration-200 ${n?"hover:bg-slate-700 text-slate-400":"hover:bg-slate-100 text-slate-600"}`,children:c.jsx(Jj,{className:"w-5 h-5"})})]})]}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:l.map((f,h)=>{const p=a(f.getFullYear(),f.getMonth());return c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:`font-semibold text-center ${n?"text-white":"text-slate-900"}`,children:u(f)}),c.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["Su","Mo","Tu","We","Th","Fr","Sa"].map(m=>c.jsx("div",{className:`text-xs font-medium text-center py-2 ${n?"text-slate-400":"text-slate-500"}`,children:m},m)),p.map((m,g)=>c.jsx("div",{className:"aspect-square",children:m?c.jsxs("div",{className:`w-full h-full rounded-lg border p-1 flex flex-col justify-between text-xs ${m.totalHours>0?n?"bg-blue-900 border-blue-700":"bg-blue-50 border-blue-200":n?"bg-slate-700 border-slate-600":"bg-white border-slate-200"}`,children:[c.jsx("div",{className:`font-medium ${n?"text-white":"text-slate-900"}`,children:m.day}),m.totalHours>0&&c.jsxs("div",{className:`font-medium ${n?"text-blue-400":"text-blue-600"}`,children:[m.totalHours,"h"]})]}):c.jsx("div",{})},g))]})]},h)})})]})}function X$e({isDarkMode:e}){const[t,n]=w.useState("daily"),[r,i]=w.useState(new Date),[s,a]=w.useState(!1),{refetch:o,loading:l}=si(),u=Wh(),d=w.useCallback(async()=>{await o()},[o]),f=w.useCallback(()=>{},[]);w.useEffect(()=>{u.timeModalOpen&&(n("daily"),a(!0),u.setTimeModalOpen(!1),setTimeout(()=>a(!1),1e3))},[u.timeModalOpen,u]);const h=[{id:"daily",label:"Daily View",icon:ht,description:"Log time and view today's summary"},{id:"summary",label:"Summary & Filters",icon:eo,description:"Overview with date filters and project breakdown"},{id:"quarterly",label:"Quarterly View",icon:At,description:"Calendar view by quarters"},{id:"table",label:"All Entries",icon:nO,description:"Detailed table of all time entries"}];return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Time Tracking"}),c.jsx("p",{className:"text-muted-foreground",children:"Log your hours and track your productivity"})]}),c.jsxs("button",{onClick:d,disabled:l,className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors duration-200 ${e?"bg-slate-800 border-slate-700 text-slate-300 hover:bg-slate-700":"bg-white border-slate-300 text-slate-700 hover:bg-slate-50"} ${l?"opacity-50 cursor-not-allowed":""}`,children:[c.jsx(s2,{className:`w-4 h-4 ${l?"animate-spin":""}`}),"Refresh"]})]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(p=>{const m=p.icon,g=t===p.id;return c.jsxs("button",{onClick:()=>n(p.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors duration-200 ${g?e?"bg-blue-900 border-blue-700 text-blue-300":"bg-blue-50 border-blue-300 text-blue-700":e?"bg-slate-800 border-slate-700 text-slate-300 hover:bg-slate-700":"bg-white border-slate-300 text-slate-700 hover:bg-slate-50"}`,title:p.description,children:[c.jsx(m,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden sm:inline",children:p.label})]},p.id)})}),t==="daily"&&c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsx("div",{className:"lg:col-span-1",children:c.jsxs(Z,{children:[c.jsx(de,{children:c.jsx(he,{children:"Log Time"})}),c.jsx(ee,{children:c.jsx(W$e,{isDarkMode:e,onTimeLogged:f,shouldFocus:s})})]})}),c.jsx("div",{className:"lg:col-span-2",children:c.jsxs(Z,{children:[c.jsx(de,{children:c.jsx(he,{children:"Today's Summary"})}),c.jsx(ee,{children:c.jsx(q$e,{isDarkMode:e})})]})})]}),t==="summary"&&c.jsx(G$e,{isDarkMode:e}),t==="quarterly"&&c.jsx(Y$e,{currentDate:r,onDateChange:i,isDarkMode:e}),t==="table"&&c.jsxs(Z,{children:[c.jsx(de,{children:c.jsx(he,{children:"All Time Entries"})}),c.jsx(ee,{children:c.jsx(K$e,{isDarkMode:e})})]})]})}function Q$e({totals:e,getCurrentMonthName:t,getCurrentYear:n}){return c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsxs(Z,{children:[c.jsx(de,{className:"pb-2",children:c.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[c.jsx(mn,{className:"h-4 w-4"}),"Mnadsbudget (budgeterad)"]})}),c.jsxs(ee,{children:[c.jsx("div",{className:"text-2xl font-bold",children:le(e.monthly.budget)}),c.jsx("p",{className:"text-xs text-muted-foreground",children:t()})]})]}),c.jsxs(Z,{children:[c.jsx(de,{className:"pb-2",children:c.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[c.jsx(ti,{className:"h-4 w-4"}),"Faktiska kostnader (mnad)"]})}),c.jsxs(ee,{children:[c.jsx("div",{className:"text-2xl font-bold",children:le(e.monthly.spent)}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.monthly.percentage.toFixed(1),"% av budget"]}),c.jsx("div",{className:"w-full bg-muted rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(e.monthly.percentage,100)}%`}})})]})]}),c.jsxs(Z,{children:[c.jsx(de,{className:"pb-2",children:c.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[c.jsx(ul,{className:"h-4 w-4"}),"rsbudget (budgeterad)"]})}),c.jsxs(ee,{children:[c.jsx("div",{className:"text-2xl font-bold",children:le(e.annual.budget)}),c.jsx("p",{className:"text-xs text-muted-foreground",children:n()})]})]}),c.jsxs(Z,{children:[c.jsx(de,{className:"pb-2",children:c.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[c.jsx(Lfe,{className:"h-4 w-4"}),"Faktiska rrliga kostnader"]})}),c.jsxs(ee,{children:[c.jsxs("div",{className:"text-2xl font-bold",children:[e.annual.completed,"/",e.annual.completed+e.annual.overdue]}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.annual.overdue>0&&c.jsxs("span",{className:"text-red-500",children:[e.annual.overdue," frsenade"]}),e.annual.overdue===0&&"Inga frsenade"]})]})]})]})}function J$e({chartData:e,pieData:t,annualItems:n,isDarkMode:r}){if(e.length===0&&n.length===0)return null;const i=n.map(a=>({name:a.name.length>12?a.name.substring(0,12)+"...":a.name,fullName:a.name,budgeted:a.budgeted,spent:a.spent,remaining:Math.max(0,a.budgeted-a.spent)})),s=n.filter(a=>a.spent>0).map(a=>({name:a.name,value:a.spent,color:a.color}));return c.jsxs("div",{className:"space-y-8",children:[e.length>0&&c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs(Z,{children:[c.jsx(de,{children:c.jsx(he,{children:"Mnadsbudget vs Faktisk"})}),c.jsx(ee,{children:c.jsx("div",{className:"h-64",children:c.jsx(Mi,{width:"100%",height:"100%",children:c.jsxs(l1,{data:e,children:[c.jsx(Ea,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:r?"#94a3b8":"#64748b"}}),c.jsx(Sa,{hide:!0}),c.jsx(Bs,{formatter:a=>[le(a),""],labelStyle:{color:r?"#fff":"#000"},contentStyle:{backgroundColor:r?"#1e293b":"#fff",border:r?"1px solid #334155":"1px solid #e2e8f0",borderRadius:"6px"}}),c.jsx(Ya,{dataKey:"budgeted",fill:"#e2e8f0",name:"Budget"}),c.jsx(Ya,{dataKey:"spent",fill:"#2563eb",name:"Spenderat"})]})})})})]}),c.jsxs(Z,{children:[c.jsx(de,{children:c.jsx(he,{children:"Utgiftsfrdelning"})}),c.jsx(ee,{children:c.jsx("div",{className:"h-64",children:t.length>0?c.jsx(Mi,{width:"100%",height:"100%",children:c.jsxs(Kg,{children:[c.jsx(Ch,{data:t,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,dataKey:"value",children:t.map((a,o)=>c.jsx(il,{fill:a.color},`cell-${o}`))}),c.jsx(Bs,{formatter:a=>[le(a),"Spenderat"],labelStyle:{color:r?"#fff":"#000"},contentStyle:{backgroundColor:r?"#1e293b":"#fff",border:r?"1px solid #334155":"1px solid #e2e8f0",borderRadius:"6px"}})]})}):c.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Inga utgifter att visa n"})})})]})]}),n.length>0&&c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs(Z,{children:[c.jsx(de,{children:c.jsx(he,{children:"rsbudget vs Faktisk"})}),c.jsx(ee,{children:c.jsx("div",{className:"h-64",children:i.length>0?c.jsx(Mi,{width:"100%",height:"100%",children:c.jsxs(l1,{data:i,margin:{top:5,right:5,left:5,bottom:5},children:[c.jsx(Ea,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:r?"#94a3b8":"#64748b"}}),c.jsx(Sa,{hide:!0}),c.jsx(Bs,{formatter:(a,o)=>[le(a),o==="budgeted"?"Budget":o==="spent"?"Spenderat":"terstr"],labelFormatter:a=>{const o=i.find(l=>l.name===a);return(o==null?void 0:o.fullName)||a},labelStyle:{color:r?"#fff":"#000"},contentStyle:{backgroundColor:r?"#1e293b":"#fff",border:r?"1px solid #334155":"1px solid #e2e8f0",borderRadius:"6px"}}),c.jsx(K0,{wrapperStyle:{fontSize:"12px"},iconType:"rect"}),c.jsx(Ya,{dataKey:"budgeted",fill:r?"#475569":"#e2e8f0",name:"Budget",radius:[2,2,0,0]}),c.jsx(Ya,{dataKey:"spent",fill:r?"#3b82f6":"#2563eb",name:"Spenderat",radius:[2,2,0,0]})]})}):c.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Inga rliga budgetposter att visa"})})})]}),c.jsxs(Z,{children:[c.jsx(de,{children:c.jsx(he,{children:"rlig Utgiftsfrdelning"})}),c.jsx(ee,{children:c.jsx("div",{className:"h-64",children:s.length>0?c.jsx(Mi,{width:"100%",height:"100%",children:c.jsxs(Kg,{children:[c.jsx(Ch,{data:s,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,dataKey:"value",children:s.map((a,o)=>c.jsx(il,{fill:a.color},`yearly-cell-${o}`))}),c.jsx(Bs,{formatter:a=>[le(a),"Spenderat"],labelStyle:{color:r?"#fff":"#000"},contentStyle:{backgroundColor:r?"#1e293b":"#fff",border:r?"1px solid #334155":"1px solid #e2e8f0",borderRadius:"6px"}})]})}):c.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Inga rliga utgifter att visa n"})})})]})]})]})}function yee({percentage:e,isOverBudget:t=!1,className:n}){const r=Math.min(e,100);return c.jsx("div",{className:Ve("w-full bg-gray-200 rounded-full h-2",n),children:c.jsx("div",{className:Ve("h-2 rounded-full transition-all duration-300",t?"bg-red-500":"bg-green-500"),style:{width:`${r}%`}})})}function Z$e({categories:e,onViewDetails:t,onAddExpense:n,onEditCategory:r,onDeleteCategory:i}){return e.length===0?null:c.jsxs(Z,{children:[c.jsx(de,{children:c.jsx(he,{children:"Budget (mnadsvis)"})}),c.jsx(ee,{children:c.jsx("div",{className:"space-y-4",children:e.map(s=>{const a=s.budgeted>0?s.spent/s.budgeted*100:0,o=s.spent>s.budgeted;return c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-3 h-3 rounded-full","data-color":s.color}),c.jsx("span",{className:"font-medium",children:s.name})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(H,{variant:"outline",size:"sm",onClick:()=>t(s),className:"h-8",children:[c.jsx(xa,{className:"h-4 w-4 mr-1"}),"Detaljer"]}),c.jsxs(H,{variant:"outline",size:"sm",onClick:()=>n(s),className:"h-8","data-testid":"add-expense-btn",children:[c.jsx(Ks,{className:"h-4 w-4 mr-1"}),"Lgg till"]}),c.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>r(s),children:c.jsx(ao,{className:"h-4 w-4"})}),c.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>i(s),children:c.jsx($i,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsxs("span",{className:"text-muted-foreground",children:[le(s.spent)," / ",le(s.budgeted)]}),c.jsxs("span",{className:o?"text-red-500":"text-muted-foreground",children:[a.toFixed(1),"%"]})]}),c.jsx(yee,{percentage:a,isOverBudget:o})]},s.id)})})})]})}function e9e({annualItems:e,getCurrentYear:t,onAddExpense:n,onDeleteItem:r,onViewDetails:i,onEditItem:s}){return e.length===0?null:c.jsxs(Z,{children:[c.jsx(de,{children:c.jsxs(he,{className:"flex items-center gap-2",children:[c.jsx(ul,{className:"h-5 w-5"}),"Budget (rsbas)"]})}),c.jsx(ee,{children:c.jsx("div",{className:"space-y-4",children:e.map(a=>{const o=a.budgeted>0?a.spent/a.budgeted*100:0,l=a.status==="completed",u=a.status==="overdue";return c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.color}}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:a.name}),c.jsxs("div",{className:"text-xs text-muted-foreground",children:["Mlmndag: ",new Date(a.targetDate).toLocaleDateString("sv-SE"),l&&c.jsx("span",{className:"text-green-600 ml-2",children:" Genomfrd"}),u&&c.jsx("span",{className:"text-red-600 ml-2",children:" Frsenad"})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[i&&c.jsx(H,{variant:"outline",size:"sm",onClick:()=>i(a),className:"h-8",children:"Detaljer"}),s&&c.jsx(H,{variant:"outline",size:"sm",onClick:()=>s(a),className:"h-8",children:"Redigera"}),c.jsxs(H,{variant:"outline",size:"sm",onClick:()=>n(a),className:"h-8",disabled:l,children:[c.jsx(Ks,{className:"h-4 w-4 mr-1"}),"Lgg till utgift"]}),c.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>r(a),children:c.jsx($i,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsxs("span",{className:"text-muted-foreground",children:[le(a.spent)," / ",le(a.budgeted)]}),c.jsxs("span",{className:l?"text-green-600":u?"text-red-500":"text-muted-foreground",children:[o.toFixed(1),"%"]})]}),c.jsx(yee,{percentage:o,isOverBudget:!1,className:l?"bg-green-100":u?"bg-red-100":""})]},a.id)})})})]})}function t9e({onAddCategory:e,onAddAnnualItem:t}){return c.jsx(Z,{children:c.jsxs(ee,{className:"text-center py-12",children:[c.jsx(Vw,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Ingen budget n"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:"Skapa din frsta budgetkategori eller rliga post fr att brja spra utgifter"}),c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg mt-4 text-sm",children:[c.jsx("p",{className:"font-medium mb-2",children:" S fungerar det:"}),c.jsxs("ul",{className:"text-left space-y-1 text-muted-foreground",children:[c.jsxs("li",{children:[" ",c.jsx("strong",{children:"Mnadskategorier:"})," terkommande utgifter (mat, transport, hyra)"]}),c.jsxs("li",{children:[" ",c.jsx("strong",{children:"rliga poster:"})," Engngsutgifter (konferenser, utrustning, resor)"]}),c.jsx("li",{children:" Allt syns automatiskt i Cash Flow fr helhetsbild"})]})]}),c.jsxs("div",{className:"flex gap-2 justify-center mt-4",children:[c.jsxs(H,{variant:"outline",onClick:t,children:[c.jsx(nt,{className:"h-4 w-4 mr-2"}),"rlig post"]}),c.jsxs(H,{onClick:e,children:[c.jsx(nt,{className:"h-4 w-4 mr-2"}),"Mnadskategori"]})]})]})})}function n9e({categories:e,annualItems:t,totals:n,chartData:r,pieData:i,isDarkMode:s,getCurrentMonthName:a,getCurrentYear:o,getCategoryEntries:l,onViewDetails:u,onAddExpense:d,onEditCategory:f,onDeleteCategory:h,onDeleteItem:p,onAddCategory:m,onAddAnnualItem:g,onViewAnnualDetails:v,onEditAnnualItem:y}){console.log(" Rendering OVERVIEW");const b=e.length>0||t.length>0;return c.jsxs("div",{className:"space-y-6",children:[c.jsx(Z,{className:"bg-blue-50 dark:bg-blue-950 border-blue-200 dark:border-blue-800",children:c.jsx(ee,{className:"py-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(At,{className:"h-5 w-5 text-blue-600"}),c.jsx("span",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Spra utgifter mot dina budgetml"})]}),c.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.length," mnadskategorier  ",t.length," rliga poster"]})]})})}),b?c.jsxs(c.Fragment,{children:[c.jsx(Q$e,{totals:n,getCurrentMonthName:a,getCurrentYear:o}),c.jsx(J$e,{chartData:r,pieData:i,annualItems:t,isDarkMode:s}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.length>0&&c.jsx("div",{className:"min-w-0",children:c.jsx(Z$e,{categories:e,onViewDetails:u,onAddExpense:d,onEditCategory:f,onDeleteCategory:h})}),t.length>0&&c.jsx("div",{className:"min-w-0",children:c.jsx(e9e,{annualItems:t,getCurrentYear:o,onAddExpense:d,onDeleteItem:p,onViewDetails:v,onEditItem:y})})]})]}):c.jsx(t9e,{onAddCategory:m,onAddAnnualItem:g})]})}function r9e({categories:e,annualItems:t,totals:n,getCurrentMonthName:r,getCurrentYear:i,getCategoryEntries:s}){return console.log(" Rendering DETAILED view"),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsxs(Z,{className:"shadow-lg",children:[c.jsxs(de,{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-950 dark:to-blue-900 rounded-t-lg",children:[c.jsx(he,{className:"flex items-center gap-3 text-xl",children:" Mnadskategorier"}),c.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300 mt-2",children:["Totalsumma: ",c.jsx("span",{className:"bg-blue-200/60 dark:bg-blue-800/60 px-2 py-1 rounded-md font-semibold text-blue-900 dark:text-blue-100 shadow-sm border border-blue-300/30 dark:border-blue-600/30",children:le(n.monthly.spent)})," / Budgeterat: ",le(n.monthly.budget)]})]}),c.jsx(ee,{className:"p-0",children:c.jsx("div",{className:"space-y-0",children:e.length>0?e.map((a,o)=>{const l=s(a.name,"monthly"),u=l.reduce((d,f)=>d+f.amount,0);return c.jsxs("div",{className:"border-b last:border-b-0",style:{borderLeft:`6px solid ${a.color}`,backgroundColor:`${a.color}08`},children:[c.jsx("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-5 h-5 rounded-lg shadow-sm",style:{backgroundColor:a.color}}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-base font-semibold",children:a.name}),c.jsxs("p",{className:"text-sm text-muted-foreground",children:[c.jsx("span",{className:"font-medium",children:le(u)})," / ",le(a.budgeted),c.jsxs("span",{className:"ml-2 text-xs",children:["(",l.length," utgifter)"]})]})]})]})}),c.jsx("div",{className:"bg-white dark:bg-gray-900",children:l.length>0?c.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:l.map((d,f)=>c.jsxs("div",{className:`flex justify-between items-center p-2 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors ${f%2===0?"bg-gray-25 dark:bg-gray-900":"bg-white dark:bg-gray-850"}`,children:[c.jsx("div",{className:"flex-1 truncate pr-2",children:c.jsx("div",{className:"text-sm font-medium truncate",children:d.description})}),c.jsx("div",{className:"text-sm font-semibold tabular-nums",style:{color:a.color},children:le(d.amount)})]},d.id))}):c.jsx("div",{className:"p-6 text-center text-muted-foreground",children:c.jsx("p",{className:"text-sm",children:"Inga utgifter registrerade"})})})]},a.id)}):c.jsx("div",{className:"p-8 text-center text-muted-foreground",children:c.jsx("p",{className:"text-base",children:"Inga mnadskategorier nnu"})})})})]}),c.jsxs(Z,{className:"shadow-lg",children:[c.jsxs(de,{className:"bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-950 dark:to-purple-900 rounded-t-lg",children:[c.jsx(he,{className:"flex items-center gap-3 text-xl",children:" rliga poster"}),c.jsxs("div",{className:"text-sm text-purple-700 dark:text-purple-300 mt-2",children:["Totalsumma: ",c.jsx("span",{className:"bg-purple-200/60 dark:bg-purple-800/60 px-2 py-1 rounded-md font-semibold text-purple-900 dark:text-purple-100 shadow-sm border border-purple-300/30 dark:border-purple-600/30",children:le(n.annual.spent)})," / Budgeterat: ",le(n.annual.budget)]})]}),c.jsx(ee,{className:"p-0",children:c.jsx("div",{className:"space-y-0",children:t.length>0?t.map((a,o)=>{const l=s(a.name,"yearly"),u=l.reduce((d,f)=>d+f.amount,0);return c.jsxs("div",{className:"border-b last:border-b-0",style:{borderLeft:`6px solid ${a.color}`,backgroundColor:`${a.color}08`},children:[c.jsx("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-5 h-5 rounded-lg shadow-sm",style:{backgroundColor:a.color}}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-base font-semibold",children:a.name}),c.jsxs("p",{className:"text-sm text-muted-foreground",children:[c.jsx("span",{className:"font-medium",children:le(u)})," / ",le(a.budgeted),c.jsxs("span",{className:"ml-2 text-xs",children:["(",l.length," utgifter)"]})]})]})]})}),c.jsx("div",{className:"bg-white dark:bg-gray-900",children:l.length>0?c.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:l.map((d,f)=>c.jsxs("div",{className:`flex justify-between items-center p-2 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors ${f%2===0?"bg-gray-25 dark:bg-gray-900":"bg-white dark:bg-gray-850"}`,children:[c.jsx("div",{className:"flex-1 truncate pr-2",children:c.jsx("div",{className:"text-sm font-medium truncate",children:d.description})}),c.jsx("div",{className:"text-sm font-semibold tabular-nums",style:{color:a.color},children:le(d.amount)})]},d.id))}):c.jsx("div",{className:"p-6 text-center text-muted-foreground",children:c.jsx("p",{className:"text-sm",children:"Inga utgifter registrerade"})})})]},a.id)}):c.jsx("div",{className:"p-8 text-center text-muted-foreground",children:c.jsx("p",{className:"text-base",children:"Inga rliga poster nnu"})})})})]})]})}const Ca=w.forwardRef(({className:e,...t},n)=>c.jsx("textarea",{className:Ve("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));Ca.displayName="Textarea";function i9e({handleAddCategory:e,handleUpdateCategory:t,handleDeleteCategory:n,handleAddAnnualItem:r,handleUpdateAnnualItem:i,handleDeleteAnnualItem:s,addEntry:a,deleteEntry:o,getCategoryEntries:l,toast:u,showDetailDialog:d=!1,setShowDetailDialog:f=()=>{},showAddExpenseDialog:h=!1,setShowAddExpenseDialog:p=()=>{},showEditCategoryDialog:m=!1,setShowEditCategoryDialog:g=()=>{},showDeleteDialog:v=!1,setShowDeleteDialog:y=()=>{},showAddCategoryDialog:b=!1,setShowAddCategoryDialog:x=()=>{},showAddAnnualItemDialog:S=!1,setShowAddAnnualItemDialog:E=()=>{},selectedCategory:_=null,setSelectedCategory:T=()=>{},selectedExpenseCategory:C=null,setSelectedExpenseCategory:k=()=>{}}){const[A,j]=w.useState(!1),[D,P]=w.useState(!1),[M,L]=w.useState(!1),[O,B]=w.useState(""),[R,F]=w.useState(""),[I,X]=w.useState(null),[G,$]=w.useState(null),[be,je]=w.useState(""),[Q,K]=w.useState(""),[xe,ae]=w.useState(""),[ue,Ee]=w.useState(null),[re,Je]=w.useState(null),[De,tt]=w.useState(null),[Y,pe]=w.useState(""),[W,fe]=w.useState(""),[Fe,ze]=w.useState(new Date().toISOString().split("T")[0]),[ct,Ot]=w.useState("Privat utlgg"),[un,Me]=w.useState(null),[q,te]=w.useState(!1),[ye,Oe]=w.useState(!1),[Be,bt]=w.useState(null);w.useEffect(()=>{m&&_&&!I&&(X(_),F(_.budgeted.toString()))},[m,_,I]);const ve=()=>x(!0),Et=Ae=>{X(Ae),F(Ae.budgeted.toString()),g(!0)},qt=Ae=>{$(Ae),y(!0)},dr=Ae=>{k(Ae),pe(""),fe(""),ze(new Date().toISOString().split("T")[0]),Ot("Privat utlgg"),p(!0)},_n=Ae=>{Me(Ae),pe(Ae.amount.toString()),fe(Ae.description),ze(Ae.date),Ot(Ae.payment_source||"Privat utlgg"),te(!0)},ea=Ae=>{bt(Ae),Oe(!0)},ta=()=>E(!0),yae=Ae=>{Ee(Ae),K(Ae.budgeted.toString()),j(!0)},vae=Ae=>{Je(Ae),P(!0)},xae=Ae=>{tt(Ae),L(!0)},bae=Ae=>{T(Ae),f(!0)},m3=()=>_?l(_.name,"monthly"):[],wae=async()=>{if(!O.trim()){u({title:"Fel",description:"Ange ett namn fr kategorin.",variant:"destructive"});return}const Ae=parseFloat(R)||0;await e(O.trim(),Ae)&&(B(""),F(""),x(!1))},Eae=async()=>{if(!I)return;const Ae=parseFloat(R)||0;await t(I.id,Ae)&&(X(null),F(""),g(!1))},Sae=async()=>{if(!G)return;await n(G)&&($(null),y(!1))},_ae=async()=>{if(!C||!Y||!W){u({title:"Fel",description:"Fyll i alla flt.",variant:"destructive"});return}const Ae=parseFloat(Y);if(Ae<=0){u({title:"Fel",description:"Beloppet mste vara strre n 0.",variant:"destructive"});return}try{const tu="targetDate"in C;await a({type:"expense",amount:Ae,description:W,category:C.name,date:Fe,payment_source:ct,is_recurring:!0,recurring_interval:tu?"yearly":"monthly",next_due_date:tu?new Date(new Date(Fe).getFullYear()+1,new Date(Fe).getMonth(),new Date(Fe).getDate()).toISOString().split("T")[0]:new Date(new Date(Fe).getFullYear(),new Date(Fe).getMonth()+1,new Date(Fe).getDate()).toISOString().split("T")[0],is_budget_entry:!0,is_recurring_instance:!1}),u({title:"Utgift tillagd",description:`${le(Ae)} fr ${W}`}),pe(""),fe(""),ze(new Date().toISOString().split("T")[0]),Ot("Privat utlgg"),p(!1),k(null)}catch{u({title:"Fel",description:"Kunde inte lgga till utgift.",variant:"destructive"})}},Nae=async()=>{if(Be)try{await o(Be.id)&&(u({title:"Utgift borttagen",description:`${Be.description} har tagits bort`}),bt(null),Oe(!1))}catch{u({title:"Fel",description:"Kunde inte ta bort utgift.",variant:"destructive"})}},Tae=async()=>{if(!un||!Y||!W){u({title:"Fel",description:"Fyll i alla flt.",variant:"destructive"});return}const Ae=parseFloat(Y);if(Ae<=0){u({title:"Fel",description:"Beloppet mste vara strre n 0.",variant:"destructive"});return}try{await o(un.id),await a({type:"expense",amount:Ae,description:W,category:un.category,date:Fe,payment_source:ct,is_recurring:!1,is_budget_entry:!0}),u({title:"Utgift uppdaterad",description:`${W} har uppdaterats`}),Me(null),pe(""),fe(""),ze(new Date().toISOString().split("T")[0]),Ot("Privat utlgg"),te(!1)}catch{u({title:"Fel",description:"Kunde inte uppdatera utgift.",variant:"destructive"})}},Cae=async()=>{if(!be.trim()){u({title:"Fel",description:"Ange ett namn fr rsposten.",variant:"destructive"});return}if(!xe){u({title:"Fel",description:"Ange mlmnad fr rsposten.",variant:"destructive"});return}const Ae=parseFloat(Q)||0,tu=xe+"-01";await r(be.trim(),Ae,tu)&&(je(""),K(""),ae(""),E(!1))},kae=async()=>{if(!ue)return;const Ae=parseFloat(Q)||0;await i(ue.id,Ae)&&(Ee(null),K(""),j(!1))},Aae=async()=>{if(!re)return;await s(re)&&(Je(null),P(!1))};return c.jsxs(c.Fragment,{children:[c.jsx(kt,{open:b,onOpenChange:x,children:c.jsxs(St,{children:[c.jsx(_t,{children:c.jsx(Nt,{children:"Lgg till mnadskategori"})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"categoryName",children:"Kategorinamn"}),c.jsx(ce,{id:"categoryName",value:O,onChange:Ae=>B(Ae.target.value),placeholder:"t.ex. Mat & Dryck"})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"categoryBudget",children:"Mnadsbudget (kr)"}),c.jsx(ce,{id:"categoryBudget",type:"number",value:R,onChange:Ae=>F(Ae.target.value),placeholder:"0 = ingen automatisk budget"})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(H,{variant:"outline",onClick:()=>x(!1),children:"Avbryt"}),c.jsx(H,{onClick:wae,children:"Lgg till"})]})]})]})}),c.jsx(kt,{open:m,onOpenChange:g,children:c.jsxs(St,{children:[c.jsx(_t,{children:c.jsxs(Nt,{children:["Redigera kategori: ",I==null?void 0:I.name]})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"editCategoryBudget",children:"Mnadsbudget (kr)"}),c.jsx(ce,{id:"editCategoryBudget",type:"number",value:R,onChange:Ae=>F(Ae.target.value)})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(H,{variant:"outline",onClick:()=>g(!1),children:"Avbryt"}),c.jsx(H,{onClick:Eae,children:"Spara"})]})]})]})}),c.jsx(kt,{open:v,onOpenChange:y,children:c.jsxs(St,{children:[c.jsx(_t,{children:c.jsx(Nt,{children:"Ta bort kategori"})}),c.jsxs("p",{children:['r du sker p att du vill ta bort kategorin "',G==null?void 0:G.name,'"?']}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(H,{variant:"outline",onClick:()=>y(!1),children:"Avbryt"}),c.jsx(H,{variant:"destructive",onClick:Sae,children:"Ta bort"})]})]})}),c.jsx(kt,{open:h,onOpenChange:p,children:c.jsxs(St,{children:[c.jsx(_t,{children:c.jsxs(Nt,{children:["Lgg till utgift - ",C==null?void 0:C.name]})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"expenseAmount",children:"Belopp (kr)"}),c.jsx(ce,{id:"expenseAmount",type:"number",value:Y,onChange:Ae=>pe(Ae.target.value),placeholder:"0"})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"expenseDescription",children:"Beskrivning"}),c.jsx(Ca,{id:"expenseDescription",value:W,onChange:Ae=>fe(Ae.target.value),placeholder:"Vad kpte du?"})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"expenseDate",children:"Datum"}),c.jsx(ce,{id:"expenseDate",type:"date",value:Fe,onChange:Ae=>ze(Ae.target.value)})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"expensePaymentSource",children:"Betalningsklla"}),c.jsxs(Fn,{value:ct,onValueChange:Ot,children:[c.jsx(jn,{children:c.jsx(Bn,{placeholder:"Vlj betalningsklla"})}),c.jsxs(On,{children:[c.jsx(We,{value:"Privat utlgg",children:"Privat utlgg"}),c.jsx(We,{value:"Mynt kortet",children:"Mynt kortet"}),c.jsx(We,{value:"Faktura",children:"Faktura"}),c.jsx(We,{value:"Annat",children:"Annat"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(H,{variant:"outline",onClick:()=>p(!1),children:"Avbryt"}),c.jsx(H,{onClick:_ae,children:"Lgg till"})]})]})]})}),c.jsx(kt,{open:q,onOpenChange:te,children:c.jsxs(St,{children:[c.jsx(_t,{children:c.jsx(Nt,{children:"Redigera utgift"})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"editExpenseAmount",children:"Belopp (kr)"}),c.jsx(ce,{id:"editExpenseAmount",type:"number",value:Y,onChange:Ae=>pe(Ae.target.value),placeholder:"0"})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"editExpenseDescription",children:"Beskrivning"}),c.jsx(Ca,{id:"editExpenseDescription",value:W,onChange:Ae=>fe(Ae.target.value),placeholder:"Vad kpte du?"})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"editExpenseDate",children:"Datum"}),c.jsx(ce,{id:"editExpenseDate",type:"date",value:Fe,onChange:Ae=>ze(Ae.target.value)})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"editExpensePaymentSource",children:"Betalningsklla"}),c.jsxs(Fn,{value:ct,onValueChange:Ot,children:[c.jsx(jn,{children:c.jsx(Bn,{placeholder:"Vlj betalningsklla"})}),c.jsxs(On,{children:[c.jsx(We,{value:"Privat utlgg",children:"Privat utlgg"}),c.jsx(We,{value:"Mynt kortet",children:"Mynt kortet"}),c.jsx(We,{value:"Faktura",children:"Faktura"}),c.jsx(We,{value:"Annat",children:"Annat"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(H,{variant:"outline",onClick:()=>te(!1),children:"Avbryt"}),c.jsx(H,{onClick:Tae,children:"Spara ndringar"})]})]})]})}),c.jsx(kt,{open:ye,onOpenChange:Oe,children:c.jsxs(St,{children:[c.jsx(_t,{children:c.jsx(Nt,{children:"Ta bort utgift"})}),c.jsxs("p",{children:['r du sker p att du vill ta bort utgiften "',Be==null?void 0:Be.description,'"?']}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(H,{variant:"outline",onClick:()=>Oe(!1),children:"Avbryt"}),c.jsx(H,{variant:"destructive",onClick:Nae,children:"Ta bort"})]})]})}),c.jsx(kt,{open:S,onOpenChange:E,children:c.jsxs(St,{children:[c.jsx(_t,{children:c.jsx(Nt,{children:"Lgg till rspost"})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"annualItemName",children:"Namn p rspost"}),c.jsx(ce,{id:"annualItemName",value:be,onChange:Ae=>je(Ae.target.value),placeholder:"t.ex. Semester, Julklappar"})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"annualItemBudget",children:"Budget (kr)"}),c.jsx(ce,{id:"annualItemBudget",type:"number",value:Q,onChange:Ae=>K(Ae.target.value),placeholder:"Totalt belopp fr ret"})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"annualItemTargetDate",children:"Mlmnad"}),c.jsx(ce,{id:"annualItemTargetDate",type:"month",value:xe,onChange:Ae=>ae(Ae.target.value)})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(H,{variant:"outline",onClick:()=>E(!1),children:"Avbryt"}),c.jsx(H,{onClick:Cae,children:"Lgg till"})]})]})]})}),c.jsx(kt,{open:A,onOpenChange:j,children:c.jsxs(St,{children:[c.jsx(_t,{children:c.jsxs(Nt,{children:["Redigera rspost: ",ue==null?void 0:ue.name]})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"editAnnualItemBudget",children:"Budget (kr)"}),c.jsx(ce,{id:"editAnnualItemBudget",type:"number",value:Q,onChange:Ae=>K(Ae.target.value),placeholder:"Totalt belopp fr ret"})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(H,{variant:"outline",onClick:()=>j(!1),children:"Avbryt"}),c.jsx(H,{onClick:kae,children:"Spara"})]})]})]})}),c.jsx(kt,{open:D,onOpenChange:P,children:c.jsxs(St,{children:[c.jsx(_t,{children:c.jsx(Nt,{children:"Ta bort rspost"})}),c.jsxs("p",{children:['r du sker p att du vill ta bort rsposten "',re==null?void 0:re.name,'"?']}),c.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[c.jsx(H,{variant:"outline",onClick:()=>P(!1),children:"Avbryt"}),c.jsx(H,{variant:"destructive",onClick:Aae,children:"Ta bort"})]})]})}),c.jsx(kt,{open:M,onOpenChange:L,children:c.jsxs(St,{className:"max-w-2xl",children:[c.jsx(_t,{children:c.jsxs(Nt,{children:["Detaljer: ",De==null?void 0:De.name]})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(ie,{children:"Budget"}),c.jsx("p",{className:"text-lg font-semibold",children:le((De==null?void 0:De.budgeted)||0)})]}),c.jsxs("div",{children:[c.jsx(ie,{children:"Spenderat"}),c.jsx("p",{className:"text-lg font-semibold",children:le((De==null?void 0:De.spent)||0)})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx(ie,{children:"Utgifter fr denna rspost"}),c.jsxs(H,{size:"sm",onClick:()=>dr(De),children:[c.jsx(nt,{className:"h-4 w-4 mr-1"}),"Lgg till"]})]}),c.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[De&&l&&l(De.name,"yearly").map(Ae=>c.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted rounded",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:Ae.description}),c.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(Ae.date).toLocaleDateString("sv-SE")})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-semibold",children:le(Ae.amount)}),c.jsx(H,{variant:"destructive",size:"sm",onClick:()=>o&&o(Ae.id),children:c.jsx($i,{className:"h-4 w-4"})})]})]},Ae.id)),(!De||!l||l(De.name,"yearly").length===0)&&c.jsx("p",{className:"text-center text-muted-foreground py-4",children:"Inga utgifter nnu"})]})]})]})]})}),c.jsx(kt,{open:d,onOpenChange:f,children:c.jsxs(St,{className:"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[c.jsx(_t,{className:"flex-shrink-0",children:c.jsxs(Nt,{children:["Detaljer fr ",_==null?void 0:_.name]})}),c.jsx("div",{className:"space-y-4 flex-1 overflow-y-auto",children:_&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-muted-foreground",children:"Budget denna mnad"}),c.jsx("div",{className:"text-lg font-semibold",children:le(_.budgeted)})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-muted-foreground",children:"Spenderat"}),c.jsx("div",{className:"text-lg font-semibold",children:le(_.spent)})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-muted-foreground",children:"Kvar"}),c.jsx("div",{className:`text-lg font-semibold ${_.budgeted-_.spent<0?"text-red-600":"text-green-600"}`,children:le(_.budgeted-_.spent)})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-muted-foreground",children:"Procent anvnt"}),c.jsxs("div",{className:`text-lg font-semibold ${_.spent/_.budgeted*100>100?"text-red-600":"text-blue-600"}`,children:[(_.spent/_.budgeted*100).toFixed(1),"%"]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Utgifter i denna kategori"}),c.jsxs(H,{onClick:()=>{f(!1),dr(_)},children:[c.jsx(nt,{className:"h-4 w-4 mr-2"}),"Ny utgift"]})]}),c.jsx("div",{className:"border rounded-lg overflow-hidden",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left p-3 font-medium",children:"Datum"}),c.jsx("th",{className:"text-left p-3 font-medium",children:"Beskrivning"}),c.jsx("th",{className:"text-left p-3 font-medium",children:"Betalningsklla"}),c.jsx("th",{className:"text-right p-3 font-medium",children:"Belopp"}),c.jsx("th",{className:"text-center p-3 font-medium",children:"tgrder"})]})}),c.jsx("tbody",{className:"divide-y",children:m3().length>0?m3().map(Ae=>c.jsxs("tr",{children:[c.jsx("td",{className:"p-3",children:Ae.date}),c.jsx("td",{className:"p-3",children:Ae.description}),c.jsx("td",{className:"p-3",children:Ae.payment_source||"Oknd"}),c.jsx("td",{className:"p-3 text-right font-medium",children:le(Ae.amount)}),c.jsx("td",{className:"p-3",children:c.jsxs("div",{className:"flex items-center justify-center gap-2",children:[c.jsx(H,{size:"sm",variant:"outline",onClick:()=>_n(Ae),children:c.jsx(ao,{className:"h-4 w-4"})}),c.jsx(H,{size:"sm",variant:"outline",onClick:()=>ea(Ae),children:c.jsx($i,{className:"h-4 w-4"})})]})})]},Ae.id)):c.jsx("tr",{children:c.jsxs("td",{colSpan:5,className:"p-8 text-center text-gray-500",children:[c.jsx(Ks,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),c.jsx("p",{children:"Inga utgifter nnu"}),c.jsx("p",{className:"text-sm mt-1",children:'Klicka p "Ny utgift" fr att lgga till en utgift'})]})})})]})})]})]})}),c.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t flex-shrink-0",children:[c.jsx(H,{variant:"outline",onClick:()=>f(!1),children:"Stng"}),_&&c.jsx(H,{onClick:()=>{f(!1),dr(_)},children:"Lgg till utgift"})]})]})}),(window.budgetDialogs={openAddCategoryDialog:ve,openEditCategoryDialog:Et,openDeleteDialog:qt,openAddExpenseDialog:dr,openDetailDialog:bae,openAddAnnualItemDialog:ta,openEditAnnualItemDialog:yae,openDeleteAnnualDialog:vae,openAnnualDetailDialog:xae},null)]})}function s9e({isDarkMode:e}){const[t,n]=w.useState(!1),r=mS(),i=Wh(),[s,a]=w.useState(!1),[o,l]=w.useState(!1),[u,d]=w.useState(!1),[f,h]=w.useState(!1),[p,m]=w.useState(!1),[g,v]=w.useState(!1),[y,b]=w.useState(!1),[x,S]=w.useState(!1),[E,_]=w.useState(null),[T,C]=w.useState(null);if(w.useEffect(()=>{i.expenseModalOpen&&!r.budgetsLoading&&(r.categories&&r.categories.length>0&&C(r.categories[0]),h(!0),i.setExpenseModalOpen(!1))},[i.expenseModalOpen,i,r.categories,r.budgetsLoading]),r.budgetsLoading)return c.jsx("div",{className:"space-y-6",children:c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Budget"}),c.jsx("p",{className:"text-muted-foreground",children:"Laddar budgetdata..."})]})})});const k=()=>{a(!0)},A=()=>{l(!0)},j=F=>{_(F),d(!0)},D=F=>{C(F),h(!0)},P=F=>{_(F),m(!0)},M=F=>{_(F),S(!0)},L=F=>{var I;(I=window.budgetDialogs)==null||I.openAnnualDetailDialog(F)},O=F=>{var I;(I=window.budgetDialogs)==null||I.openEditAnnualItemDialog(F)},B=F=>{var I;(I=window.budgetDialogs)==null||I.openDeleteAnnualDialog(F)},R=F=>{B(F)};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Budget"}),c.jsx("p",{className:"text-muted-foreground",children:"Hantera din mnads- och rsbudget - synkroniseras med Cash Flow"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(H,{variant:t?"default":"outline",onClick:()=>{console.log(" Button clicked! Current state:",t,"-> New state:",!t),n(!t)},children:[c.jsx(xa,{className:"h-4 w-4 mr-2"}),t?"versikt":"Detaljvy"]}),c.jsxs(H,{variant:"outline",onClick:A,children:[c.jsx(nt,{className:"h-4 w-4 mr-2"}),"rlig post"]}),c.jsxs(H,{onClick:k,children:[c.jsx(nt,{className:"h-4 w-4 mr-2"}),"Mnadskategori"]})]})]}),t?c.jsx(r9e,{...r}):c.jsx(n9e,{...r,isDarkMode:e,onViewDetails:j,onAddExpense:D,onEditCategory:P,onDeleteCategory:M,onDeleteItem:R,onAddCategory:k,onAddAnnualItem:A,onViewAnnualDetails:L,onEditAnnualItem:O}),c.jsx(i9e,{...r,deleteEntry:r.deleteEntry,getCategoryEntries:r.getCategoryEntries,showDetailDialog:u,setShowDetailDialog:d,showAddExpenseDialog:f,setShowAddExpenseDialog:h,showEditCategoryDialog:p,setShowEditCategoryDialog:m,showDeleteDialog:x,setShowDeleteDialog:S,showAddCategoryDialog:s,setShowAddCategoryDialog:a,showAddAnnualItemDialog:o,setShowAddAnnualItemDialog:l,selectedCategory:E,setSelectedCategory:_,selectedExpenseCategory:T,setSelectedExpenseCategory:C})]})}const a9e=0;function o9e({isDarkMode:e}){var pe;console.log(" CASHFLOW COMPONENT MOUNTED/RENDERED");const{user:t}=Tr();console.log(" USER FROM AUTH:",t==null?void 0:t.id);const{entries:n,loading:r,addEntry:i,updateEntry:s,deleteEntry:a,error:o}=hJ((t==null?void 0:t.id)||null),{toast:l}=mo(),[u,d]=w.useState(!1),[f,h]=w.useState("income"),[p,m]=w.useState(""),[g,v]=w.useState(null),[y,b]=w.useState(!1),[x,S]=w.useState(!1),[E,_]=w.useState(!1),[T,C]=w.useState(null),[k,A]=w.useState([]),[j,D]=w.useState([]),[P,M]=w.useState(!0),[L,O]=w.useState({amount:"",description:"",category:"",date:new Date().toISOString().split("T")[0],isRecurring:!1}),[B,R]=w.useState([]),[F,I]=w.useState({income:[],expense:[]});w.useEffect(()=>{console.log(" PROCESSING USEEFFECT TRIGGERED"),console.log(" entries.length:",n.length),console.log(" salaryPayments.length:",k.length),n.length>0?(console.log(" Calling processMonthlyData..."),G(),console.log(" Calling processCategoryData..."),je()):(console.log(" No entries, calling initializeEmptyMonthlyData..."),X())},[n,k]),w.useEffect(()=>{console.log(" USER EFFECT TRIGGERED - user?.id:",t==null?void 0:t.id),console.log(" USER EFFECT - user object:",t),console.log(" USER EFFECT - user type:",typeof t);const W=async()=>{if(console.log(" FETCH SALARY DATA CALLED"),!(t!=null&&t.id)){console.log(" No user ID available for salary fetch");return}console.log(" User ID available:",t.id);try{M(!0);const{data:fe,error:Fe}=await J.from("salary_payments").select(`
            *,
            employee:salary_employees(
              id,
              name,
              position,
              base_salary
            )
          `).eq("user_id",t.id).eq("status","paid");if(console.log(" Salary payments query result:",{payments:(fe==null?void 0:fe.length)||0,error:Fe,samplePayment:fe==null?void 0:fe[0]}),Fe)throw Fe;const{data:ze,error:ct}=await J.from("user_profiles").select("auto_generate_employer_tax, employer_tax_payment_date").eq("id",t.id).single();ct&&ct.code!=="PGRST116"&&console.error("Error fetching user settings:",ct),A(fe||[]),console.log(" Fetched salary payments:",(fe==null?void 0:fe.length)||0),console.log(" FINAL STATE: salaryPayments will be set to:",(fe==null?void 0:fe.length)||0,"entries")}catch(fe){console.error("Error fetching salary data:",fe)}finally{M(!1)}};t!=null&&t.id?(console.log(" About to call fetchSalaryDataLocal..."),W()):console.log(" USER EFFECT - No user ID, not calling fetchSalaryData")},[t]);const X=()=>{const W=[],fe=new Date;for(let Fe=-2;Fe<=4;Fe++){const ze=new Date(fe.getFullYear(),fe.getMonth()+Fe,1),ct=`${ze.getFullYear()}-${String(ze.getMonth()+1).padStart(2,"0")}`,Ot=ze.toLocaleDateString("sv-SE",{month:"long",year:"numeric"});W.push({month:ct,monthName:Ot,income:0,expenses:0,netFlow:0,cumulativeBalance:5e4,entries:[],isPast:Fe<0,isCurrent:Fe===0,isFuture:Fe>0})}R(W)},G=()=>{console.log(" RAW ENTRIES FROM DATABASE:",n.length);const W=n.filter(ve=>ve.is_budget_entry===!0||ve.source==="budget");console.log(" RAW BUDGET ENTRIES FROM DATABASE:",W.length),W.forEach(ve=>{console.log(` RAW BUDGET: "${ve.description}" (source: ${ve.source}, is_budget_entry: ${ve.is_budget_entry}, id: ${ve.id})`)});const fe=[],Fe=new Date;for(let ve=-2;ve<=4;ve++){const Et=new Date(Fe.getFullYear(),Fe.getMonth()+ve,1),qt=`${Et.getFullYear()}-${String(Et.getMonth()+1).padStart(2,"0")}`,dr=Et.toLocaleDateString("sv-SE",{month:"long",year:"numeric"});fe.push({month:qt,monthName:dr,income:0,expenses:0,netFlow:0,cumulativeBalance:0,entries:[],isPast:ve<0,isCurrent:ve===0,isFuture:ve>0})}const ze=new Map;fe.forEach(ve=>{ze.set(ve.month,ve)});const ct=n;console.log("=== ENTRY PROCESSING ==="),console.log("Total entries to process:",ct.length);const Ot={budget:ct.filter(ve=>ve.source==="budget").length,manual:ct.filter(ve=>ve.source==="manual").length,invoice:ct.filter(ve=>ve.source==="invoice").length,total:ct.length};console.log("Entry breakdown by source:",Ot),console.log(" BEFORE generateRecurringEntries - allEntriesToProcess:",ct.length),console.log(" Checking each entry before recurring generation:"),ct.forEach((ve,Et)=>{const qt=ve.is_budget_entry===!0||ve.source==="budget";console.log(`${Et+1}. "${ve.description}" - is_budget: ${ve.is_budget_entry}, source: ${ve.source}, id: ${ve.id}`),qt&&console.log(` BUDGET ENTRY: "${ve.description}" - This should appear in cash flow`)});const un=be(ct,fe);console.log(" AFTER generateRecurringEntries - generated entries:",un.length),console.log(" Checking each generated recurring entry:"),un.forEach(ve=>{const Et=ve.is_budget_entry===!0||ve.source==="budget",qt=["Youtube premium","Supabase Databas","Copilot AI","Halebop mobil+klocka","Geforce now","Raycast AI","Netlify IT tjnst","Telia bredband","ManageWP wordpress","Icloud cloud storage","Frmnscykel","Kaffe, Te, Frukt","Hyra av rum","Fortnox"].some(dr=>{var _n;return(_n=ve.description)==null?void 0:_n.toLowerCase().includes(dr.toLowerCase())});(Et||qt)&&console.log(` BUDGET ENTRY GENERATED: "${ve.description}" - is_budget: ${ve.is_budget_entry}, source: ${ve.source}, id: ${ve.id}`)}),console.log(" About to generate salary entries..."),console.log(" Salary payments available:",k.length),console.log(" Salary employees available:",j.length),console.log(" Sample salary payment:",k[0]),console.log(" Sample salary employee:",j[0]),console.log(" Salary payments data:",k),console.log(" Salary employees data:",j);const Me=$(fe);console.log(" Salary entries returned from generateSalaryEntries:",Me.length),console.log(" Salary entries details:",Me);const q=[...un,...Me],te=q;console.log("=== MONTHLY DATA PROCESSING ==="),console.log("Total entries after generation:",q.length),console.log("Final entries to process:",te.length),console.log("Original entries:",ct.length),console.log("Generated entries:",te.length-ct.length);const ye={manual:te.filter(ve=>ve.source==="manual").length,budget:te.filter(ve=>ve.source==="budget").length,invoice:te.filter(ve=>ve.source==="invoice").length,editable:te.filter(ve=>ve.is_editable).length,readonly:te.filter(ve=>!ve.is_editable).length};console.log("Entry source breakdown:",ye),ye.invoice>0&&console.log(`INFO: ${ye.invoice} invoice entries included (read-only)`),ye.editable>0&&console.log(`INFO: ${ye.editable} manual entries (editable)`),te.forEach(ve=>{const Et=ve.date.toString().slice(0,7),qt=ze.get(Et);if(Et<"2025-09"){console.log(` FILTERED pre-business entry: ${Et} - "${ve.description}" (${ve.amount} SEK)`);return}const _n=ve.source==="invoice"?"[INV]":ve.source==="budget"?"[BUD]":ve.source==="manual"?"[MAN]":"[GEN]";console.log(`${_n} ${Et}: ${ve.type} ${ve.amount} SEK - "${ve.description}"`),qt&&(qt.entries.push(ve),ve.type==="income"?qt.income+=ve.amount:ve.type==="expense"&&(qt.expenses+=ve.amount))});const Oe="2025-09";let Be=0;const bt=fe.map(ve=>{if(ve.netFlow=ve.income-ve.expenses,ve.month<Oe)ve.cumulativeBalance=0,ve.income=0,ve.expenses=0,ve.netFlow=0,ve.entries=[];else{ve.month===Oe&&Be===0&&(Be=a9e);const Et=Be;Be+=ve.netFlow,ve.cumulativeBalance=Be,console.log(` ${ve.monthName}: Opening ${Et} + Net ${ve.netFlow} = Closing ${Be}`)}return ve});console.log("Final monthly breakdown:",bt.map(ve=>({month:ve.month,monthName:ve.monthName,entriesCount:ve.entries.length,income:ve.income,expenses:ve.expenses,netFlow:ve.netFlow,cumulativeBalance:ve.cumulativeBalance}))),console.log("=== END MONTHLY PROCESSING ==="),R(bt)},$=W=>{console.log(" SALARY GENERATION STARTED"),console.log(" monthsData length:",W.length),console.log(" monthsData:",W.map(ze=>({month:ze.month,monthName:ze.monthName}))),console.log(" salaryPayments length:",(k==null?void 0:k.length)||0),console.log(" salaryEmployees length:",(j==null?void 0:j.length)||0),console.log(" salaryPayments raw data:",k),console.log(" salaryEmployees raw data:",j);const fe=[];if(!k||k.length===0)return console.log(" No salary payments available - returning empty array"),console.log(" salaryPayments is:",k),fe;if(!j||j.length===0)return console.log(" No salary employees available - returning empty array"),console.log(" salaryEmployees is:",j),fe;console.log(" GENERATING SALARY ENTRIES for months:",W.map(ze=>ze.month));const Fe=new Map;return k.forEach(ze=>{if(ze.employee){const ct=ze.employee.id;(!Fe.has(ct)||new Date(ze.payment_date)>new Date(Fe.get(ct).payment_date))&&Fe.set(ct,ze)}}),console.log(" Active employees with salaries:",Fe.size),W.forEach(ze=>{ze.month<"2025-09"||Fe.forEach((Ot,un)=>{if(!Ot.employee)return;const Me=Ot.employee,q=`${ze.month}-15`,te={id:`salary_${un}_${ze.month}`,user_id:(t==null?void 0:t.id)||"",type:"expense",amount:Me.base_salary,description:`Salary - ${Me.name}${Me.position?` (${Me.position})`:""}`,category:"Salary",date:q,is_recurring:!1,is_budget_entry:!1,is_recurring_instance:!1,recurring_interval:null,next_due_date:null,project_id:null,client_id:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),vat_amount:null,amount_excluding_vat:null,vat_rate:null,is_editable:!1,source:"manual"},ye=new Date(ze.month+"-01");ye.setMonth(ye.getMonth()+1);const Oe=`${ye.getFullYear()}-${String(ye.getMonth()+1).padStart(2,"0")}`,Be=Math.round(Me.base_salary*.3142);if(W.some(ve=>ve.month===Oe)){const ve={id:`employer_tax_${un}_${ze.month}`,user_id:(t==null?void 0:t.id)||"",type:"expense",amount:Be,description:`Employer Tax - ${Me.name}${Me.position?` (${Me.position})`:""}`,category:"Employer Tax",date:`${Oe}-25`,is_recurring:!1,is_budget_entry:!1,is_recurring_instance:!1,recurring_interval:null,next_due_date:null,project_id:null,client_id:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),vat_amount:null,amount_excluding_vat:null,vat_rate:null,is_editable:!1,source:"manual"};fe.push(ve)}fe.push(te),console.log(` Generated for ${Me.name}: Salary ${Me.base_salary} SEK (${q})`)})}),console.log(" Total salary entries generated:",fe.length),fe},be=(W,fe)=>{const Fe=[...W],ze=fe.map(Me=>Me.month),ct=W.filter(Me=>Me.is_recurring===!0);console.log("=== RECURRING ENTRY GENERATION ==="),console.log("Total entries:",W.length),console.log("Found recurring entries to process:",ct.length);const Ot=new Map;ct.forEach(Me=>{const q=`${Me.description}_${Me.amount}_${Me.category}`;Ot.has(q)?console.log(`Skipping duplicate recurring entry: ${Me.description}`):Ot.set(q,Me)});const un=Array.from(Ot.values());return console.log("Deduplicated actual recurring entries:",un.length),un.forEach(Me=>{const q=new Date(Me.date),te=Me.date.slice(0,7);console.log(`Processing recurring entry: ${Me.description} from ${te}, interval: ${Me.recurring_interval}`),ze.forEach(ye=>{if(ye===te){console.log(`Skipping original month ${ye} for ${Me.description}`);return}if(Me.recurring_interval==="yearly"){const dr=q.getMonth(),[,_n]=ye.split("-").map(Number),ea=_n-1;if(dr!==ea){console.log(`Skipping yearly entry ${Me.description} for ${ye} - not the right month (original: ${dr}, target: ${ea})`);return}}const[Oe,Be]=ye.split("-").map(Number);let bt=new Date(Oe,Be-1,q.getDate());bt.getMonth()!==Be-1&&(bt=new Date(Oe,Be,0));const ve=`${Oe}-${String(Be).padStart(2,"0")}-${String(bt.getDate()).padStart(2,"0")}`,Et=ve.slice(0,7);if(Et!==ye){console.error(`Date generation error: expected ${ye}, got ${Et}`);return}const qt={...Me,id:`${Me.id}_recurring_${ye}`,date:ve,original_entry_id:Me.id};console.log(` Generated recurring entry for ${ye}:`,{id:qt.id,description:qt.description,amount:qt.amount,date:qt.date,source:qt.source,is_budget_entry:qt.is_budget_entry,targetMonth:ye}),Fe.push(qt)})}),Fe},je=()=>{const W=new Map,fe=new Map,Fe=n;console.log("=== PROCESSING CATEGORY DATA (for pie charts) ==="),console.log("Total entries loaded:",n.length),console.log("All entries included in category analysis:",Fe.length);const ze=Fe.filter(Me=>Me.source==="manual"||!Me.source),ct=Fe.filter(Me=>Me.source==="invoice"),Ot=Fe.filter(Me=>Me.source==="budget");console.log("Manual entries in categories:",ze.length),console.log("Invoice entries in categories:",ct.length),console.log("Budget entries in categories:",Ot.length),Fe.forEach(Me=>{const q=Me.source==="invoice"?"[INVOICE]":Me.source==="budget"?"[BUDGET]":"[MANUAL]";if(console.log(`${q} ${Me.type.toUpperCase()}: ${Me.description} - ${Me.category} - ${Me.amount} SEK`),Me.type==="income"){const te=W.get(Me.category)||0;W.set(Me.category,te+Me.amount)}else{const te=fe.get(Me.category)||0;fe.set(Me.category,te+Me.amount)}}),console.log("Final income categories:",Array.from(W.entries())),console.log("Final expense categories:",Array.from(fe.entries())),console.log("=== END CATEGORY PROCESSING ===");const un=["#2563eb","#16a34a","#ca8a04","#9333ea","#dc2626","#06b6d4","#84cc16","#f59e0b"];I({income:Array.from(W.entries()).map(([Me,q],te)=>({name:Me,value:q,color:un[te%un.length]})),expense:Array.from(fe.entries()).map(([Me,q],te)=>({name:Me,value:q,color:un[te%un.length]}))})},Q=async W=>{if(W.preventDefault(),!L.amount||!L.description||!L.category){l({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}try{const fe={type:f,amount:parseFloat(L.amount),description:L.description,category:L.category,date:L.date,is_recurring:L.isRecurring,recurring_interval:L.isRecurring?"monthly":null,next_due_date:L.isRecurring?L.date:null,is_budget_entry:!1,is_recurring_instance:!1,project_id:null,client_id:null};if(await i(fe))l({title:"Success",description:`${f==="income"?"Income":"Expense"} added successfully`}),O({amount:"",description:"",category:"",date:new Date().toISOString().split("T")[0],isRecurring:!1}),d(!1);else throw new Error("Failed to add entry")}catch(fe){console.error("Error adding transaction:",fe),l({title:"Error",description:"Failed to add transaction",variant:"destructive"})}},K=W=>{v(W),O({amount:W.amount.toString(),description:W.description,category:W.category,date:W.date,isRecurring:W.is_recurring}),S(!0)},xe=W=>{C(W),_(!0)},ae=async()=>{if(g)try{await s(g.id,{amount:parseFloat(L.amount),description:L.description,category:L.category,date:L.date,is_recurring:L.isRecurring}),S(!1),v(null),l({title:"Success",description:"Transaction updated successfully"})}catch(W){console.error("Error updating transaction:",W),l({title:"Error",description:"Failed to update transaction",variant:"destructive"})}},ue=async()=>{if(T)try{await a(T.id),_(!1),C(null),l({title:"Success",description:"Transaction deleted successfully"})}catch(W){console.error("Error deleting transaction:",W),l({title:"Error",description:"Failed to delete transaction",variant:"destructive"})}},Ee=async()=>{if(g)try{const W={type:f,amount:parseFloat(L.amount),description:L.description,category:L.category,date:L.date,is_recurring:L.isRecurring,recurring_interval:L.isRecurring?"monthly":null,next_due_date:L.isRecurring?L.date:null,is_budget_entry:!1,is_recurring_instance:!1,project_id:null,client_id:null};await s(g.id,W)&&(b(!1),v(null),O({amount:"",description:"",category:"",date:new Date().toISOString().split("T")[0],isRecurring:!1}),l({title:"Success",description:"Transaction updated successfully"}))}catch(W){console.error("Error updating transaction:",W),l({title:"Error",description:"Failed to update transaction",variant:"destructive"})}},re=()=>B.find(fe=>fe.isCurrent)||{month:new Date().toISOString().slice(0,7),monthName:new Date().toLocaleDateString("sv-SE",{month:"long",year:"numeric"}),income:0,expenses:0,netFlow:0,cumulativeBalance:5e4,entries:[],isPast:!1,isCurrent:!0,isFuture:!1},Je=()=>p&&B.find(fe=>fe.month===p)||re(),De=W=>{const fe=W.is_editable===!0;return console.log(`Entry "${W.description}": canEdit=${fe}, source=${W.source}, is_budget_entry=${W.is_budget_entry}, id=${W.id}`),fe};if(r)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"text-lg",children:"Loading cash flow data..."})});if(o)return c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsxs("div",{className:"text-lg text-red-600",children:["Error: ",o]})});const tt=re(),Y=Je();return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Cash Flow Analysis"}),c.jsxs("p",{className:"text-muted-foreground",children:["Monitor your income and expenses flow (",n.length," entries) - 7 month view"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(H,{variant:"outline",children:[c.jsx(eO,{className:"h-4 w-4 mr-2"}),"Filter"]}),c.jsxs(H,{variant:"outline",children:[c.jsx($u,{className:"h-4 w-4 mr-2"}),"Export"]}),c.jsxs(H,{onClick:()=>d(!0),children:[c.jsx(nt,{className:"h-4 w-4 mr-2"}),"Add Transaction"]})]})]}),u&&c.jsxs(Z,{children:[c.jsx(de,{children:c.jsxs(he,{children:["Add ",f==="income"?"Income":"Expense"]})}),c.jsx(ee,{children:c.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{children:"Type"}),c.jsxs("select",{value:f,onChange:W=>h(W.target.value),className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[c.jsx("option",{value:"income",children:"Income"}),c.jsx("option",{value:"expense",children:"Expense"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{children:"Amount (SEK)"}),c.jsx(ce,{type:"number",placeholder:"0.00",step:"0.01",value:L.amount,onChange:W=>O(fe=>({...fe,amount:W.target.value})),required:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{children:"Category"}),c.jsxs("select",{value:L.category,onChange:W=>O(fe=>({...fe,category:W.target.value})),className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0,children:[c.jsx("option",{value:"",children:"Select category"}),f==="income"?c.jsxs(c.Fragment,{children:[c.jsx("option",{value:"Client Payment",children:"Client Payment"}),c.jsx("option",{value:"Consulting",children:"Consulting"}),c.jsx("option",{value:"Retainer",children:"Retainer"}),c.jsx("option",{value:"Investment",children:"Investment"}),c.jsx("option",{value:"Other",children:"Other"})]}):c.jsxs(c.Fragment,{children:[c.jsx("option",{value:"Software & Tools",children:"Software & Tools"}),c.jsx("option",{value:"Office Expenses",children:"Office Expenses"}),c.jsx("option",{value:"Travel",children:"Travel"}),c.jsx("option",{value:"Marketing",children:"Marketing"}),c.jsx("option",{value:"Insurance",children:"Insurance"}),c.jsx("option",{value:"Professional Development",children:"Professional Development"}),c.jsx("option",{value:"Tax",children:"Tax"}),c.jsx("option",{value:"Other",children:"Other"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{children:"Date"}),c.jsx(ce,{type:"date",value:L.date,onChange:W=>O(fe=>({...fe,date:W.target.value})),required:!0})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{children:"Description"}),c.jsx(ce,{placeholder:"Description of transaction",value:L.description,onChange:W=>O(fe=>({...fe,description:W.target.value})),required:!0})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",id:"recurring",checked:L.isRecurring,onChange:W=>O(fe=>({...fe,isRecurring:W.target.checked})),className:"h-4 w-4 rounded border-gray-300"}),c.jsx(ie,{htmlFor:"recurring",children:"Recurring monthly transaction"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(H,{type:"submit",children:"Add Transaction"}),c.jsx(H,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"})]})]})})]}),y&&c.jsxs(Z,{children:[c.jsx(de,{children:c.jsxs(he,{children:["Edit ",f==="income"?"Income":"Expense"]})}),c.jsx(ee,{children:c.jsxs("form",{onSubmit:W=>{W.preventDefault(),Ee()},className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{children:"Type"}),c.jsxs("select",{value:f,onChange:W=>h(W.target.value),className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[c.jsx("option",{value:"income",children:"Income"}),c.jsx("option",{value:"expense",children:"Expense"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{children:"Amount (SEK)"}),c.jsx(ce,{type:"number",placeholder:"0.00",step:"0.01",value:L.amount,onChange:W=>O(fe=>({...fe,amount:W.target.value})),required:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{children:"Category"}),c.jsxs("select",{value:L.category,onChange:W=>O(fe=>({...fe,category:W.target.value})),className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0,children:[c.jsx("option",{value:"",children:"Select category"}),f==="income"?c.jsxs(c.Fragment,{children:[c.jsx("option",{value:"Client Payment",children:"Client Payment"}),c.jsx("option",{value:"Consulting",children:"Consulting"}),c.jsx("option",{value:"Investment",children:"Investment"}),c.jsx("option",{value:"Other Income",children:"Other Income"})]}):c.jsxs(c.Fragment,{children:[c.jsx("option",{value:"Software",children:"Software"}),c.jsx("option",{value:"Marketing",children:"Marketing"}),c.jsx("option",{value:"Equipment",children:"Equipment"}),c.jsx("option",{value:"Travel",children:"Travel"}),c.jsx("option",{value:"Office",children:"Office"}),c.jsx("option",{value:"Other",children:"Other"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{children:"Description"}),c.jsx(ce,{placeholder:"Enter description",value:L.description,onChange:W=>O(fe=>({...fe,description:W.target.value})),required:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{children:"Date"}),c.jsx(ce,{type:"date",value:L.date,onChange:W=>O(fe=>({...fe,date:W.target.value})),required:!0})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",id:"recurring-edit",checked:L.isRecurring,onChange:W=>O(fe=>({...fe,isRecurring:W.target.checked})),className:"rounded"}),c.jsx(ie,{htmlFor:"recurring-edit",children:"Recurring monthly transaction"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(H,{type:"submit",children:"Update Transaction"}),c.jsx(H,{type:"button",variant:"outline",onClick:()=>{b(!1),v(null)},children:"Cancel"})]})]})})]}),c.jsxs(Z,{children:[c.jsxs(de,{children:[c.jsx(he,{children:"7-Month Cash Flow Overview"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"2 past months  Current month  4 future months"})]}),c.jsx(ee,{children:c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-7 gap-4",children:B.map(W=>c.jsxs("div",{className:`p-4 rounded-lg border cursor-pointer transition-all ${p===W.month?"border-blue-500 bg-blue-50 dark:bg-blue-950":W.isCurrent?"border-green-500 bg-green-50 dark:bg-green-950":W.isPast?"border-gray-300 bg-gray-50 dark:bg-gray-800":"border-purple-300 bg-purple-50 dark:bg-purple-950"}`,onClick:()=>m(p===W.month?"":W.month),children:[c.jsxs("div",{className:"text-sm font-medium text-muted-foreground mb-2 flex items-center justify-between",children:[c.jsx("span",{children:W.monthName}),W.isCurrent&&c.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full dark:bg-green-900 dark:text-green-200",children:"NOW"}),W.isPast&&c.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full dark:bg-gray-700 dark:text-gray-300",children:"PAST"}),W.isFuture&&c.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full dark:bg-purple-900 dark:text-purple-200",children:"FUTURE"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"text-xs text-green-600",children:["In: ",le(W.income)]}),c.jsxs("div",{className:"text-xs text-red-600",children:["Out: ",le(W.expenses)]}),c.jsxs("div",{className:`text-sm font-bold ${W.netFlow>=0?"text-green-600":"text-red-600"}`,children:["Net: ",le(W.netFlow)]}),c.jsxs("div",{className:"text-xs text-muted-foreground",children:["Balance: ",le(W.cumulativeBalance)]})]})]},W.month))})})]}),c.jsxs(Z,{children:[c.jsx(de,{children:c.jsxs(he,{children:[p?Y.monthName:tt.monthName," Details",!p&&c.jsx("span",{className:"ml-2 px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full dark:bg-green-900 dark:text-green-200",children:"CURRENT MONTH"}),p&&Y.isPast&&c.jsx("span",{className:"ml-2 px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full dark:bg-gray-700 dark:text-gray-300",children:"PAST MONTH"}),p&&Y.isFuture&&c.jsx("span",{className:"ml-2 px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full dark:bg-purple-900 dark:text-purple-200",children:"FUTURE MONTH"})]})}),c.jsxs(ee,{children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[c.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-950 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600",children:le(Y.income)}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Income"})]}),c.jsxs("div",{className:"text-center p-4 bg-red-50 dark:bg-red-950 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-red-600",children:le(Y.expenses)}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Expenses"})]}),c.jsxs("div",{className:`text-center p-4 rounded-lg ${Y.netFlow>=0?"bg-blue-50 dark:bg-blue-950":"bg-orange-50 dark:bg-orange-950"}`,children:[c.jsx("div",{className:`text-2xl font-bold ${Y.netFlow>=0?"text-blue-600":"text-orange-600"}`,children:le(Y.netFlow)}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Net Flow"})]}),c.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-950 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-purple-600",children:le(Y.cumulativeBalance)}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Balance"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h4",{className:"font-medium",children:["Transactions (",Y.entries.length,")"]}),c.jsxs("div",{className:"max-h-84 overflow-y-auto space-y-2",children:[Y.entries.map(W=>{var fe;return c.jsxs("div",{className:"flex items-center justify-between p-3 rounded border",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`p-2 rounded-full ${W.type==="income"?"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-600 dark:bg-red-900 dark:text-red-300"}`,children:W.type==="income"?c.jsx(ti,{className:"h-4 w-4"}):c.jsx(ob,{className:"h-4 w-4"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-medium",children:W.description}),c.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[c.jsx("span",{children:W.category}),W.source==="invoice"&&c.jsxs(c.Fragment,{children:[c.jsx("span",{children:""}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(mn,{className:"h-3 w-3 text-blue-600"}),c.jsx("span",{className:"text-blue-600 text-xs font-medium",children:(fe=W.description)!=null&&fe.includes("(PAID)")?"Invoice Paid":"Invoice Due"})]})]}),W.is_recurring&&W.source==="manual"&&c.jsxs(c.Fragment,{children:[c.jsx("span",{children:""}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(At,{className:"h-3 w-3"}),c.jsx("span",{children:W.recurring_interval==="yearly"?"Yearly recurring":"Monthly recurring"})]})]}),W.source==="budget"&&c.jsxs(c.Fragment,{children:[c.jsx("span",{children:""}),c.jsx("span",{className:"text-orange-600 text-xs font-medium",children:W.recurring_interval==="yearly"?"Yearly expense":"Recurring expense"})]}),W.source==="manual"&&!W.is_recurring&&c.jsxs(c.Fragment,{children:[c.jsx("span",{children:""}),c.jsx("span",{className:"text-green-600 text-xs font-medium",children:"Manual Entry"})]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:`text-lg font-semibold ${W.type==="income"?"text-green-600":"text-red-600"}`,children:[W.type==="income"?"+":"-",le(W.amount)]}),De(W)&&c.jsxs(c.Fragment,{children:[c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>K(W),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:hover:bg-blue-950",title:"Edit transaction",children:c.jsx(ao,{className:"h-4 w-4"})}),c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>xe(W),className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950",title:W.is_recurring?"Delete recurring transaction":"Delete transaction",children:c.jsx($i,{className:"h-4 w-4"})})]})]})]},W.id)}),Y.entries.length===0&&c.jsx("div",{className:"text-center py-8 text-muted-foreground",children:Y.isFuture?"No planned transactions for this future month":"No transactions for this month"})]})]})]})]}),B.some(W=>W.income>0||W.expenses>0)&&c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs(Z,{children:[c.jsx(de,{children:c.jsx(he,{children:"7-Month Trend"})}),c.jsx(ee,{children:c.jsx("div",{className:"h-64",children:c.jsx(Mi,{width:"100%",height:"100%",children:c.jsxs(wD,{data:B,children:[c.jsx(Ea,{dataKey:"monthName",tick:{fontSize:10,fill:e?"#94a3b8":"#64748b"},axisLine:!1,tickLine:!1}),c.jsx(Sa,{hide:!0}),c.jsx(Bs,{formatter:(W,fe)=>[le(W),fe==="netFlow"?"Net Flow":fe==="cumulativeBalance"?"Balance":fe],labelStyle:{color:e?"#fff":"#000"},contentStyle:{backgroundColor:e?"#1e293b":"#fff",border:e?"1px solid #334155":"1px solid #e2e8f0",borderRadius:"6px"}}),c.jsx(qg,{type:"monotone",dataKey:"netFlow",stroke:"#2563eb",strokeWidth:2,dot:{fill:"#2563eb",strokeWidth:2,r:3},name:"Net Flow"}),c.jsx(qg,{type:"monotone",dataKey:"cumulativeBalance",stroke:"#16a34a",strokeWidth:2,dot:{fill:"#16a34a",strokeWidth:2,r:3},name:"Balance"})]})})})})]}),c.jsxs(Z,{children:[c.jsx(de,{children:c.jsx(he,{children:"Income vs Expenses"})}),c.jsx(ee,{children:c.jsx("div",{className:"h-64",children:c.jsx(Mi,{width:"100%",height:"100%",children:c.jsxs(dJ,{data:B,children:[c.jsx(Ea,{dataKey:"monthName",tick:{fontSize:10,fill:e?"#94a3b8":"#64748b"},axisLine:!1,tickLine:!1}),c.jsx(Sa,{hide:!0}),c.jsx(Bs,{formatter:(W,fe)=>[le(W),fe],labelStyle:{color:e?"#fff":"#000"},contentStyle:{backgroundColor:e?"#1e293b":"#fff",border:e?"1px solid #334155":"1px solid #e2e8f0",borderRadius:"6px"}}),c.jsx(Kf,{type:"monotone",dataKey:"income",stackId:"1",stroke:"#16a34a",fill:"#16a34a",fillOpacity:.6,name:"Income"}),c.jsx(Kf,{type:"monotone",dataKey:"expenses",stackId:"2",stroke:"#dc2626",fill:"#dc2626",fillOpacity:.6,name:"Expenses"})]})})})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs(Z,{children:[c.jsx(de,{children:c.jsx(he,{children:"Income Categories"})}),c.jsx(ee,{children:F.income.length>0?c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsx("div",{className:"h-32 w-32",children:c.jsx(Mi,{width:"100%",height:"100%",children:c.jsx(Kg,{children:c.jsx(Ch,{data:F.income,cx:"50%",cy:"50%",innerRadius:30,outerRadius:60,dataKey:"value",children:F.income.map((W,fe)=>c.jsx(il,{fill:W.color},`income-${fe}`))})})})}),c.jsx("div",{className:"flex-1 space-y-2",children:F.income.map((W,fe)=>c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:W.color}}),c.jsx("span",{className:"text-sm",children:W.name})]}),c.jsx("span",{className:"text-sm font-medium",children:le(W.value)})]},fe))})]}):c.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No actual income transactions yet"})})]}),c.jsxs(Z,{children:[c.jsx(de,{children:c.jsx(he,{children:"Expense Categories"})}),c.jsx(ee,{children:F.expense.length>0?c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsx("div",{className:"h-32 w-32",children:c.jsx(Mi,{width:"100%",height:"100%",children:c.jsx(Kg,{children:c.jsx(Ch,{data:F.expense,cx:"50%",cy:"50%",innerRadius:30,outerRadius:60,dataKey:"value",children:F.expense.map((W,fe)=>c.jsx(il,{fill:W.color},`expense-${fe}`))})})})}),c.jsx("div",{className:"flex-1 space-y-2",children:F.expense.map((W,fe)=>c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:W.color}}),c.jsx("span",{className:"text-sm",children:W.name})]}),c.jsx("span",{className:"text-sm font-medium",children:le(W.value)})]},fe))})]}):c.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No actual expense transactions yet"})})]})]})]}),c.jsx(kt,{open:x,onOpenChange:S,children:c.jsxs(St,{className:"max-w-md",children:[c.jsx(_t,{children:c.jsx(Nt,{children:"Edit Transaction"})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"editAmount",children:"Amount (kr)"}),c.jsx(ce,{id:"editAmount",type:"number",value:L.amount,onChange:W=>O(fe=>({...fe,amount:W.target.value}))})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"editDescription",children:"Description"}),c.jsx(ce,{id:"editDescription",value:L.description,onChange:W=>O(fe=>({...fe,description:W.target.value}))})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"editCategory",children:"Category"}),c.jsx(ce,{id:"editCategory",value:L.category,onChange:W=>O(fe=>({...fe,category:W.target.value}))})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"editDate",children:"Date"}),c.jsx(ce,{id:"editDate",type:"date",value:L.date,onChange:W=>O(fe=>({...fe,date:W.target.value}))})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(H,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),c.jsx(H,{onClick:ae,children:"Save Changes"})]})]})]})}),c.jsx(kt,{open:E,onOpenChange:_,children:c.jsxs(St,{className:"max-w-md",children:[c.jsx(_t,{children:c.jsx(Nt,{children:"Delete Transaction"})}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("p",{children:['Are you sure you want to delete "',T==null?void 0:T.description,'"?']}),(T==null?void 0:T.is_recurring)&&c.jsx("div",{className:"bg-orange-50 border border-orange-200 p-3 rounded-lg",children:c.jsxs("p",{className:"text-sm text-orange-800",children:[c.jsx("strong",{children:"Note:"})," This is a recurring transaction. Deleting it will remove the original entry and stop all future recurring instances."]})}),((pe=T==null?void 0:T.id)==null?void 0:pe.includes("_recurring_"))&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-lg",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Note:"})," This will delete the original recurring entry and stop all future instances."]})})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(H,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),c.jsx(H,{variant:"destructive",onClick:ue,children:"Delete"})]})]})})]})}function l9e(){const{projects:e,loading:t,error:n,addProject:r,updateProject:i,deleteProject:s}=Jn(),{clients:a,loading:o}=Sn(),l=Wh(),[u,d]=w.useState(""),[f,h]=w.useState(!1),[p,m]=w.useState(null),[g,v]=w.useState("all"),[y,b]=w.useState("all");w.useEffect(()=>{l.projectModalOpen&&(h(!0),l.setProjectModalOpen(!1))},[l.projectModalOpen,l]);const[x,S]=w.useState({name:"",color:"#3B82F6",description:"",client_id:"",status:"planning",start_date:"",end_date:"",budget:void 0,hourly_rate:void 0}),E=e.filter(P=>{var R,F;const M=a.find(I=>I.id===P.client_id),L=P.name.toLowerCase().includes(u.toLowerCase())||((R=P.description)==null?void 0:R.toLowerCase().includes(u.toLowerCase()))||(M==null?void 0:M.name.toLowerCase().includes(u.toLowerCase()))||((F=M==null?void 0:M.company)==null?void 0:F.toLowerCase().includes(u.toLowerCase())),O=g==="all"||P.status===g,B=y==="all"||P.client_id===y;return L&&O&&B}),_=async P=>{P.preventDefault();try{p?(await i({...x,id:p.id}),m(null)):await r(x),S({name:"",color:"#3B82F6",description:"",client_id:"",status:"planning",start_date:"",end_date:"",budget:void 0,hourly_rate:void 0}),h(!1)}catch(M){console.error("Error saving project:",M)}},T=P=>{m(P),S({name:P.name,color:P.color,description:P.description||"",client_id:P.client_id||"",status:P.status||"planning",start_date:P.start_date||"",end_date:P.end_date||"",budget:P.budget||void 0,hourly_rate:P.hourly_rate||void 0}),h(!0)},C=async P=>{if(window.confirm("Are you sure you want to delete this project? This action cannot be undone."))try{await s(P)}catch(M){console.error("Error deleting project:",M)}},k=async P=>{try{await i({id:P,status:"cancelled"})}catch(M){console.error("Error archiving project:",M)}},A=async P=>{try{await i({id:P,status:"active"})}catch(M){console.error("Error activating project:",M)}},j=P=>{switch(P){case"active":return{icon:vr,color:"text-green-600",bg:"bg-green-50 dark:bg-green-900/20"};case"completed":return{icon:vr,color:"text-blue-600",bg:"bg-blue-50 dark:bg-blue-900/20"};case"on-hold":return{icon:ht,color:"text-yellow-600",bg:"bg-yellow-50 dark:bg-yellow-900/20"};case"cancelled":return{icon:T0,color:"text-red-600",bg:"bg-red-50 dark:bg-red-900/20"};case"planning":return{icon:ht,color:"text-gray-600",bg:"bg-gray-50 dark:bg-gray-900/20"};default:return{icon:vr,color:"text-green-600",bg:"bg-green-50 dark:bg-green-900/20"}}},D=P=>{if(!P.start_date)return null;const M=new Date(P.start_date),L=P.end_date?new Date(P.end_date):new Date,O=new Date,B=Math.max(1,(L.getTime()-M.getTime())/(1e3*60*60*24)),R=Math.max(0,(O.getTime()-M.getTime())/(1e3*60*60*24));return Math.min(100,Math.max(0,R/B*100))};return t||o?c.jsx("div",{className:"space-y-6",children:c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Projects"}),c.jsx("p",{className:"text-muted-foreground",children:"Loading projects..."})]})})}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Projects"}),c.jsx("p",{className:"text-muted-foreground",children:"Manage your projects and track progress"})]}),c.jsxs(H,{onClick:()=>h(!0),className:"flex items-center gap-2",children:[c.jsx(nt,{className:"h-4 w-4"}),"Add Project"]})]}),n&&c.jsx(Z,{className:"border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-900/20",children:c.jsx(ee,{className:"pt-6",children:c.jsx("p",{className:"text-red-600 dark:text-red-400",children:n})})}),a.length===0&&c.jsx(Z,{className:"border-yellow-200 bg-yellow-50 dark:border-yellow-800 dark:bg-yellow-900/20",children:c.jsx(ee,{className:"pt-6",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Eg,{className:"h-5 w-5 text-yellow-600"}),c.jsxs("p",{className:"text-yellow-800 dark:text-yellow-200",children:["You need to add clients first before creating projects.",c.jsx("a",{href:"/clients",className:"underline font-medium ml-1",children:"Go to Clients"})]})]})})}),c.jsx(Z,{children:c.jsx(ee,{className:"pt-6",children:c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(Kh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx(ce,{placeholder:"Search projects...",value:u,onChange:P=>d(P.target.value),className:"pl-10"})]}),c.jsxs("select",{value:g,onChange:P=>v(P.target.value),className:"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Filter projects by status",children:[c.jsx("option",{value:"all",children:"All Statuses"}),c.jsx("option",{value:"planning",children:"Planning"}),c.jsx("option",{value:"active",children:"Active"}),c.jsx("option",{value:"completed",children:"Completed"}),c.jsx("option",{value:"on-hold",children:"On Hold"}),c.jsx("option",{value:"cancelled",children:"Cancelled"})]}),c.jsxs("select",{value:y,onChange:P=>b(P.target.value),className:"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Filter projects by client",children:[c.jsx("option",{value:"all",children:"All Clients"}),a.map(P=>c.jsxs("option",{value:P.id,children:[P.name," ",P.company?`(${P.company})`:""]},P.id))]})]})})}),f&&c.jsxs(Z,{children:[c.jsx(de,{children:c.jsx(he,{children:p?"Edit Project":"Add New Project"})}),c.jsx(ee,{children:c.jsxs("form",{onSubmit:_,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Project Name *"}),c.jsx(ce,{value:x.name,onChange:P=>S({...x,name:P.target.value}),required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Client *"}),c.jsxs("select",{value:x.client_id||"",onChange:P=>S({...x,client_id:P.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,"aria-label":"Select client for project",children:[c.jsx("option",{value:"",children:"Select a client"}),a.filter(P=>P.status==="active").map(P=>c.jsxs("option",{value:P.id,children:[P.name," ",P.company?`(${P.company})`:""]},P.id))]})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),c.jsx("textarea",{value:x.description,onChange:P=>S({...x,description:P.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[80px]",placeholder:"Project description..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),c.jsxs("select",{value:x.status,onChange:P=>S({...x,status:P.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Project status",children:[c.jsx("option",{value:"planning",children:"Planning"}),c.jsx("option",{value:"active",children:"Active"}),c.jsx("option",{value:"completed",children:"Completed"}),c.jsx("option",{value:"on-hold",children:"On Hold"}),c.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Color"}),c.jsx(ce,{type:"color",value:x.color,onChange:P=>S({...x,color:P.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Start Date"}),c.jsx(ce,{type:"date",value:x.start_date,onChange:P=>S({...x,start_date:P.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"End Date"}),c.jsx(ce,{type:"date",value:x.end_date,onChange:P=>S({...x,end_date:P.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Budget (SEK)"}),c.jsx(ce,{type:"number",step:"0.01",value:x.budget||"",onChange:P=>S({...x,budget:P.target.value?parseFloat(P.target.value):void 0})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Hourly Rate (SEK)"}),c.jsx(ce,{type:"number",step:"0.01",value:x.hourly_rate||"",onChange:P=>S({...x,hourly_rate:P.target.value?parseFloat(P.target.value):void 0})})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Project Summary"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure your project settings above. Use the color to help identify projects in time tracking."})]})]}),c.jsxs("div",{className:"flex gap-2 pt-4",children:[c.jsx(H,{type:"submit",children:p?"Update Project":"Add Project"}),c.jsx(H,{type:"button",variant:"outline",onClick:()=>{h(!1),m(null),S({name:"",color:"#3B82F6",description:"",client_id:"",status:"planning",start_date:"",end_date:"",budget:void 0,hourly_rate:void 0})},children:"Cancel"})]})]})})]}),E.length===0?c.jsx(Z,{children:c.jsx(ee,{className:"pt-6",children:c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Yj,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),c.jsx("h3",{className:"text-lg font-medium mb-2",children:"No projects found"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:u||g!=="all"||y!=="all"?"Try adjusting your search or filter criteria.":"Get started by adding your first project."}),!u&&g==="all"&&y==="all"&&a.length>0&&c.jsxs(H,{onClick:()=>h(!0),children:[c.jsx(nt,{className:"h-4 w-4 mr-2"}),"Add Your First Project"]})]})})}):c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:E.map(P=>{var R;const M=j(P.status),L=M.icon,O=a.find(F=>F.id===P.client_id),B=D(P);return c.jsxs(Z,{className:"hover:shadow-lg transition-shadow",children:[c.jsx(de,{className:"pb-3",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx(he,{className:"text-lg",children:P.name}),O&&c.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1 mt-1",children:[c.jsx(Gs,{className:"h-3 w-3"}),O.name,O.company&&c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(Xj,{className:"h-3 w-3"}),O.company]})]})]}),c.jsxs("div",{className:`px-2 py-1 rounded-full flex items-center gap-1 ${M.bg}`,children:[c.jsx(L,{className:`h-3 w-3 ${M.color}`}),c.jsx("span",{className:`text-xs font-medium capitalize ${M.color}`,children:((R=P.status)==null?void 0:R.replace("-"," "))||"planning"})]})]})}),c.jsxs(ee,{className:"space-y-3",children:[P.description&&c.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:P.description}),(P.start_date||P.end_date)&&c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx(At,{className:"h-4 w-4 text-muted-foreground"}),c.jsxs("span",{children:[P.start_date&&new Date(P.start_date).toLocaleDateString("sv-SE"),P.start_date&&P.end_date&&" - ",P.end_date&&new Date(P.end_date).toLocaleDateString("sv-SE")]})]}),B!==null&&P.status==="active"&&c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex justify-between text-xs",children:[c.jsx("span",{children:"Progress"}),c.jsxs("span",{children:[Math.round(B),"%"]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${B}%`}})})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[P.budget&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(ul,{className:"h-3 w-3 text-muted-foreground"}),c.jsx("span",{children:le(P.budget)})]}),P.hourly_rate&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(ht,{className:"h-3 w-3 text-muted-foreground"}),c.jsxs("span",{children:[le(P.hourly_rate),"/h"]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:P.color||"#3B82F6"}}),c.jsx("span",{children:"Project Color"})]}),c.jsxs("div",{className:"flex gap-2 pt-2",children:[c.jsxs(H,{size:"sm",variant:"outline",onClick:()=>T(P),className:"flex-1",children:[c.jsx(ao,{className:"h-3 w-3 mr-1"}),"Edit"]}),P.status!=="cancelled"?c.jsx(H,{size:"sm",variant:"outline",onClick:()=>k(P.id),children:c.jsx(NH,{className:"h-3 w-3"})}):c.jsx(H,{size:"sm",variant:"outline",onClick:()=>A(P.id),children:c.jsx(vr,{className:"h-3 w-3"})}),c.jsx(H,{size:"sm",variant:"outline",onClick:()=>C(P.id),className:"text-red-600 hover:text-red-700",children:c.jsx($i,{className:"h-3 w-3"})})]})]})]},P.id)})}),c.jsx(Z,{children:c.jsx(ee,{className:"pt-6",children:c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-4 text-center",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.filter(P=>P.status==="active").length}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Active"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.filter(P=>P.status==="completed").length}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Completed"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:e.filter(P=>P.status==="on-hold").length}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"On Hold"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-red-600",children:e.filter(P=>P.status==="cancelled").length}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Cancelled"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold",children:e.length}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Projects"})]})]})})})]})}var vee="AlertDialog",[c9e,jlt]=Md(vee,[kJ]),gl=kJ(),xee=e=>{const{__scopeAlertDialog:t,...n}=e,r=gl(t);return c.jsx(VJ,{...r,...n,modal:!0})};xee.displayName=vee;var u9e="AlertDialogTrigger",d9e=w.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=gl(n);return c.jsx(WJ,{...i,...r,ref:t})});d9e.displayName=u9e;var f9e="AlertDialogPortal",bee=e=>{const{__scopeAlertDialog:t,...n}=e,r=gl(t);return c.jsx(qJ,{...r,...n})};bee.displayName=f9e;var h9e="AlertDialogOverlay",wee=w.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=gl(n);return c.jsx(AD,{...i,...r,ref:t})});wee.displayName=h9e;var Qf="AlertDialogContent",[p9e,m9e]=c9e(Qf),g9e=spe("AlertDialogContent"),Eee=w.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...i}=e,s=gl(n),a=w.useRef(null),o=ln(t,a),l=w.useRef(null);return c.jsx(V5e,{contentName:Qf,titleName:See,docsSlug:"alert-dialog",children:c.jsx(p9e,{scope:n,cancelRef:l,children:c.jsxs(jD,{role:"alertdialog",...s,...i,ref:o,onOpenAutoFocus:Bt(i.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=l.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[c.jsx(g9e,{children:r}),c.jsx(v9e,{contentRef:a})]})})})});Eee.displayName=Qf;var See="AlertDialogTitle",_ee=w.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=gl(n);return c.jsx(OD,{...i,...r,ref:t})});_ee.displayName=See;var Nee="AlertDialogDescription",Tee=w.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=gl(n);return c.jsx(PD,{...i,...r,ref:t})});Tee.displayName=Nee;var y9e="AlertDialogAction",Cee=w.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=gl(n);return c.jsx(ID,{...i,...r,ref:t})});Cee.displayName=y9e;var kee="AlertDialogCancel",Aee=w.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:i}=m9e(kee,n),s=gl(n),a=ln(t,i);return c.jsx(ID,{...s,...r,ref:a})});Aee.displayName=kee;var v9e=({contentRef:e})=>{const t=`\`${Qf}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Qf}\` by passing a \`${Nee}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Qf}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return w.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},x9e=xee,b9e=bee,jee=wee,Oee=Eee,Pee=Cee,Iee=Aee,Dee=_ee,Mee=Tee;const Ree=x9e,w9e=b9e,Lee=w.forwardRef(({className:e,...t},n)=>c.jsx(jee,{className:Ve("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Lee.displayName=jee.displayName;const VD=w.forwardRef(({className:e,...t},n)=>c.jsxs(w9e,{children:[c.jsx(Lee,{}),c.jsx(Oee,{ref:n,className:Ve("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));VD.displayName=Oee.displayName;const WD=({className:e,...t})=>c.jsx("div",{className:Ve("flex flex-col space-y-2 text-center sm:text-left",e),...t});WD.displayName="AlertDialogHeader";const qD=({className:e,...t})=>c.jsx("div",{className:Ve("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});qD.displayName="AlertDialogFooter";const KD=w.forwardRef(({className:e,...t},n)=>c.jsx(Dee,{ref:n,className:Ve("text-lg font-semibold",e),...t}));KD.displayName=Dee.displayName;const GD=w.forwardRef(({className:e,...t},n)=>c.jsx(Mee,{ref:n,className:Ve("text-sm text-muted-foreground",e),...t}));GD.displayName=Mee.displayName;const YD=w.forwardRef(({className:e,...t},n)=>c.jsx(Pee,{ref:n,className:Ve(sO(),e),...t}));YD.displayName=Pee.displayName;const XD=w.forwardRef(({className:e,...t},n)=>c.jsx(Iee,{ref:n,className:Ve(sO({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));XD.displayName=Iee.displayName;function Ir(e){this.content=e}Ir.prototype={constructor:Ir,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),s=r.content.slice();return i==-1?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new Ir(s)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new Ir(n)},addToStart:function(e,t){return new Ir([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Ir(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),s=r.find(e);return i.splice(s==-1?i.length:s,0,t,n),new Ir(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Ir.from(e),e.size?new Ir(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Ir.from(e),e.size?new Ir(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Ir.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};Ir.from=function(e){if(e instanceof Ir)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Ir(t)};function Fee(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),s=t.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let a=0;i.text[a]==s.text[a];a++)n++;return n}if(i.content.size||s.content.size){let a=Fee(i.content,s.content,n+1);if(a!=null)return a}n+=i.nodeSize}}function Bee(e,t,n,r){for(let i=e.childCount,s=t.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let a=e.child(--i),o=t.child(--s),l=a.nodeSize;if(a==o){n-=l,r-=l;continue}if(!a.sameMarkup(o))return{a:n,b:r};if(a.isText&&a.text!=o.text){let u=0,d=Math.min(a.text.length,o.text.length);for(;u<d&&a.text[a.text.length-u-1]==o.text[o.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(a.content.size||o.content.size){let u=Bee(a.content,o.content,n-1,r-1);if(u)return u}n-=l,r-=l}}class me{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,i=0,s){for(let a=0,o=0;o<n;a++){let l=this.content[a],u=o+l.nodeSize;if(u>t&&r(l,i+o,s||null,a)!==!1&&l.content.size){let d=o+1;l.nodesBetween(Math.max(0,t-d),Math.min(l.content.size,n-d),r,i+d)}o=u}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,i){let s="",a=!0;return this.nodesBetween(t,n,(o,l)=>{let u=o.isText?o.text.slice(Math.max(t,l)-l,n-l):o.isLeaf?i?typeof i=="function"?i(o):i:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&u||o.isTextblock)&&r&&(a?a=!1:s+=r),s+=u},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<t.content.length;s++)i.push(t.content[s]);return new me(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],i=0;if(n>t)for(let s=0,a=0;a<n;s++){let o=this.content[s],l=a+o.nodeSize;l>t&&((a<t||l>n)&&(o.isText?o=o.cut(Math.max(0,t-a),Math.min(o.text.length,n-a)):o=o.cut(Math.max(0,t-a-1),Math.min(o.content.size,n-a-1))),r.push(o),i+=o.nodeSize),a=l}return new me(r,i)}cutByIndex(t,n){return t==n?me.empty:t==0&&n==this.content.length?this:new me(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new me(i,s)}addToStart(t){return new me([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new me(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];t(i,r,n),r+=i.nodeSize}}findDiffStart(t,n=0){return Fee(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return Bee(this,t,n,r)}findIndex(t){if(t==0)return _v(0,t);if(t==this.size)return _v(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=t)return s==t?_v(n+1,s):_v(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return me.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new me(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return me.empty;let n,r=0;for(let i=0;i<t.length;i++){let s=t[i];r+=s.nodeSize,i&&s.isText&&t[i-1].sameMarkup(s)?(n||(n=t.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new me(n||t,r)}static from(t){if(!t)return me.empty;if(t instanceof me)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new me([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}me.empty=new me([],0);const ZN={index:0,offset:0};function _v(e,t){return ZN.index=e,ZN.offset=t,ZN}function x1(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!x1(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!x1(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let Ut=class qk{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let i=0;i<t.length;i++){let s=t[i];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,i));else{if(s.type.excludes(this.type))return t;!r&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&x1(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return qk.none;if(t instanceof qk)return[t];let n=t.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Ut.none=[];class b1 extends Error{}class Pe{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=Uee(this.content,t+this.openStart,n);return r&&new Pe(r,this.openStart,this.openEnd)}removeBetween(t,n){return new Pe($ee(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return Pe.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Pe(me.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let s=t.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new Pe(t,r,i)}}Pe.empty=new Pe(me.empty,0,0);function $ee(e,t,n){let{index:r,offset:i}=e.findIndex(t),s=e.maybeChild(r),{index:a,offset:o}=e.findIndex(n);if(i==t||s.isText){if(o!=n&&!e.child(a).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=a)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy($ee(s.content,t-i-1,n-i-1)))}function Uee(e,t,n,r){let{index:i,offset:s}=e.findIndex(t),a=e.maybeChild(i);if(s==t||a.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let o=Uee(a.content,t-s-1,n,a);return o&&e.replaceChild(i,a.copy(o))}function E9e(e,t,n){if(n.openStart>e.depth)throw new b1("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new b1("Inconsistent open depths");return zee(e,t,n,0)}function zee(e,t,n,r){let i=e.index(r),s=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let a=zee(e,t,n,r+1);return s.copy(s.content.replaceChild(i,a))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let a=e.parent,o=a.content;return Xu(a,o.cut(0,e.parentOffset).append(n.content).append(o.cut(t.parentOffset)))}else{let{start:a,end:o}=S9e(n,e);return Xu(s,Vee(e,a,o,t,r))}else return Xu(s,w1(e,t,r))}function Hee(e,t){if(!t.type.compatibleContent(e.type))throw new b1("Cannot join "+t.type.name+" onto "+e.type.name)}function Kk(e,t,n){let r=e.node(n);return Hee(r,t.node(n)),r}function Yu(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Fm(e,t,n,r){let i=(t||e).node(n),s=0,a=t?t.index(n):i.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(Yu(e.nodeAfter,r),s++));for(let o=s;o<a;o++)Yu(i.child(o),r);t&&t.depth==n&&t.textOffset&&Yu(t.nodeBefore,r)}function Xu(e,t){return e.type.checkContent(t),e.copy(t)}function Vee(e,t,n,r,i){let s=e.depth>i&&Kk(e,t,i+1),a=r.depth>i&&Kk(n,r,i+1),o=[];return Fm(null,e,i,o),s&&a&&t.index(i)==n.index(i)?(Hee(s,a),Yu(Xu(s,Vee(e,t,n,r,i+1)),o)):(s&&Yu(Xu(s,w1(e,t,i+1)),o),Fm(t,n,i,o),a&&Yu(Xu(a,w1(n,r,i+1)),o)),Fm(r,null,i,o),new me(o)}function w1(e,t,n){let r=[];if(Fm(null,e,n,r),e.depth>n){let i=Kk(e,t,n+1);Yu(Xu(i,w1(e,t,n+1)),r)}return Fm(t,null,n,r),new me(r)}function S9e(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let s=n-1;s>=0;s--)i=t.node(s).copy(me.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}class Qg{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(n);return r?t.child(n).cut(r):i}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<t;s++)i+=r.child(s).nodeSize;return i}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return Ut.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),i=t.maybeChild(n);if(!r){let o=r;r=i,i=o}let s=r.marks;for(var a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!i||!s[a].isInSet(i.marks))&&(s=s[a--].removeFromSet(s));return s}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=t.parent.maybeChild(t.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new E1(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let a=t;;){let{index:o,offset:l}=a.content.findIndex(s),u=s-l;if(r.push(a,o,i+l),!u||(a=a.child(o),a.isText))break;s=u-1,i+=l+1}return new Qg(n,r,s)}static resolveCached(t,n){let r=n8.get(t);if(r)for(let s=0;s<r.elts.length;s++){let a=r.elts[s];if(a.pos==n)return a}else n8.set(t,r=new _9e);let i=r.elts[r.i]=Qg.resolve(t,n);return r.i=(r.i+1)%N9e,i}}class _9e{constructor(){this.elts=[],this.i=0}}const N9e=12,n8=new WeakMap;class E1{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const T9e=Object.create(null);let mc=class Gk{constructor(t,n,r,i=Ut.none){this.type=t,this.attrs=n,this.marks=i,this.content=r||me.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,i=0){this.content.nodesBetween(t,n,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,i){return this.content.textBetween(t,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&x1(this.attrs,n||t.defaultAttrs||T9e)&&Ut.sameSet(this.marks,r||Ut.none)}copy(t=null){return t==this.content?this:new Gk(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new Gk(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return Pe.empty;let i=this.resolve(t),s=this.resolve(n),a=r?0:i.sharedDepth(n),o=i.start(a),u=i.node(a).content.cut(i.pos-o,s.pos-o);return new Pe(u,i.depth-a,s.depth-a)}replace(t,n,r){return E9e(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(i==t||n.isText)return n;t-=i+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(t){return Qg.resolveCached(this,t)}resolveNoCache(t){return Qg.resolve(this,t)}rangeHasMark(t,n,r){let i=!1;return n>t&&this.nodesBetween(t,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),Wee(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=me.empty,i=0,s=r.childCount){let a=this.contentMatchAt(t).matchFragment(r,i,s),o=a&&a.matchFragment(this.content,n);if(!o||!o.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(t,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(t).matchType(r),a=s&&s.matchFragment(this.content,n);return a?a.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=Ut.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!Ut.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let i=me.fromJSON(t,n.content),s=t.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};mc.prototype.text=void 0;class S1 extends mc{constructor(t,n,r,i){if(super(t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Wee(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new S1(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new S1(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function Wee(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class bd{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new C9e(t,n);if(r.next==null)return bd.empty;let i=qee(r);r.next&&r.err("Unexpected trailing text");let s=D9e(I9e(i));return M9e(s,r),s}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(t.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let i=[this];function s(a,o){let l=a.matchFragment(t,r);if(l&&(!n||l.validEnd))return me.from(o.map(u=>u.createAndFill()));for(let u=0;u<a.next.length;u++){let{type:d,next:f}=a.next[u];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let h=s(f,o.concat(d));if(h)return h}}return null}return s(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(t)){let a=[];for(let o=i;o.type;o=o.via)a.push(o.type);return a.reverse()}for(let a=0;a<s.next.length;a++){let{type:o,next:l}=s.next[a];!o.isLeaf&&!o.hasRequiredAttrs()&&!(o.name in n)&&(!i.type||l.validEnd)&&(r.push({match:o.contentMatch,type:o,via:i}),n[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),t.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)s+=(a?", ":"")+r.next[a].type.name+"->"+t.indexOf(r.next[a].next);return s}).join(`
`)}}bd.empty=new bd(!0);class C9e{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function qee(e){let t=[];do t.push(k9e(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function k9e(e){let t=[];do t.push(A9e(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function A9e(e){let t=P9e(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=j9e(e,t);else break;return t}function r8(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function j9e(e,t){let n=r8(e),r=n;return e.eat(",")&&(e.next!="}"?r=r8(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function O9e(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let s in n){let a=n[s];a.isInGroup(t)&&i.push(a)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function P9e(e){if(e.eat("(")){let t=qee(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=O9e(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function I9e(e){let t=[[]];return i(s(e,0),n()),t;function n(){return t.push([])-1}function r(a,o,l){let u={term:l,to:o};return t[a].push(u),u}function i(a,o){a.forEach(l=>l.to=o)}function s(a,o){if(a.type=="choice")return a.exprs.reduce((l,u)=>l.concat(s(u,o)),[]);if(a.type=="seq")for(let l=0;;l++){let u=s(a.exprs[l],o);if(l==a.exprs.length-1)return u;i(u,o=n())}else if(a.type=="star"){let l=n();return r(o,l),i(s(a.expr,l),l),[r(l)]}else if(a.type=="plus"){let l=n();return i(s(a.expr,o),l),i(s(a.expr,l),l),[r(l)]}else{if(a.type=="opt")return[r(o)].concat(s(a.expr,o));if(a.type=="range"){let l=o;for(let u=0;u<a.min;u++){let d=n();i(s(a.expr,l),d),l=d}if(a.max==-1)i(s(a.expr,l),l);else for(let u=a.min;u<a.max;u++){let d=n();r(l,d),i(s(a.expr,l),d),l=d}return[r(l)]}else{if(a.type=="name")return[r(o,void 0,a.value)];throw new Error("Unknown expr type")}}}}function Kee(e,t){return t-e}function i8(e,t){let n=[];return r(t),n.sort(Kee);function r(i){let s=e[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let a=0;a<s.length;a++){let{term:o,to:l}=s[a];!o&&n.indexOf(l)==-1&&r(l)}}}function D9e(e){let t=Object.create(null);return n(i8(e,0));function n(r){let i=[];r.forEach(a=>{e[a].forEach(({term:o,to:l})=>{if(!o)return;let u;for(let d=0;d<i.length;d++)i[d][0]==o&&(u=i[d][1]);i8(e,l).forEach(d=>{u||i.push([o,u=[]]),u.indexOf(d)==-1&&u.push(d)})})});let s=t[r.join(",")]=new bd(r.indexOf(e.length-1)>-1);for(let a=0;a<i.length;a++){let o=i[a][1].sort(Kee);s.next.push({type:i[a][0],next:t[o.join(",")]||n(o)})}return s}}function M9e(e,t){for(let n=0,r=[e];n<r.length;n++){let i=r[n],s=!i.validEnd,a=[];for(let o=0;o<i.next.length;o++){let{type:l,next:u}=i.next[o];a.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(u)==-1&&r.push(u)}s&&t.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Gee(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function Yee(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(i===void 0){let s=e[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function Xee(e,t,n,r){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in e){let s=e[i];s.validate&&s.validate(t[i])}}function Qee(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new L9e(e,r,t[r]);return n}let s8=class Jee{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Qee(t,r.attrs),this.defaultAttrs=Gee(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==bd.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:Yee(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new mc(this,this.computeAttrs(t),me.from(n),Ut.setFrom(r))}createChecked(t=null,n,r){return n=me.from(n),this.checkContent(n),new mc(this,this.computeAttrs(t),n,Ut.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=me.from(n),n.size){let a=this.contentMatch.fillBefore(n);if(!a)return null;n=a.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(me.empty,!0);return s?new mc(this,t,n.append(s),Ut.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){Xee(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:Ut.none:t}static compile(t,n){let r=Object.create(null);t.forEach((s,a)=>r[s]=new Jee(s,n,a));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function R9e(e,t,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${s}`)}}class L9e{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?R9e(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class CS{constructor(t,n,r,i){this.name=t,this.rank=n,this.schema=r,this.spec=i,this.attrs=Qee(t,i.attrs),this.excluded=null;let s=Gee(this.attrs);this.instance=s?new Ut(this,s):null}create(t=null){return!t&&this.instance?this.instance:new Ut(this,Yee(this.attrs,t))}static compile(t,n){let r=Object.create(null),i=0;return t.forEach((s,a)=>r[s]=new CS(s,i++,n,a)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){Xee(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}let Zee=class{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in t)n[i]=t[i];n.nodes=Ir.from(t.nodes),n.marks=Ir.from(t.marks||{}),this.nodes=s8.compile(this.spec.nodes,this),this.marks=CS.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],a=s.spec.content||"",o=s.spec.marks;if(s.contentMatch=r[a]||(r[a]=bd.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=o=="_"?null:o?a8(this,o.split(" ")):o==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],a=s.spec.excludes;s.excluded=a==null?[s]:a==""?[]:a8(this,a.split(" "))}this.nodeFromJSON=i=>mc.fromJSON(this,i),this.markFromJSON=i=>Ut.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof s8){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,i)}text(t,n){let r=this.nodes.text;return new S1(r,r.defaultAttrs,t,Ut.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}};function a8(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],s=e.marks[i],a=s;if(s)n.push(s);else for(let o in e.marks){let l=e.marks[o];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(a=l)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function F9e(e){return e.tag!=null}function B9e(e){return e.style!=null}class gc{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(F9e(i))this.tags.push(i);else if(B9e(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=t.nodes[i.node];return s.contentMatch.matchType(s)})}parse(t,n={}){let r=new l8(this,n,!1);return r.addAll(t,Ut.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new l8(this,n,!0);return r.addAll(t,Ut.none,n.from,n.to),Pe.maxOpen(r.finish())}matchTag(t,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(z9e(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let a=s.getAttrs(t);if(a===!1)continue;s.attrs=a||void 0}return s}}}matchStyle(t,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let a=this.styles[s],o=a.style;if(!(o.indexOf(t)!=0||a.context&&!r.matchesContext(a.context)||o.length>t.length&&(o.charCodeAt(t.length)!=61||o.slice(t.length+1)!=n))){if(a.getAttrs){let l=a.getAttrs(n);if(l===!1)continue;a.attrs=l||void 0}return a}}}static schemaRules(t){let n=[];function r(i){let s=i.priority==null?50:i.priority,a=0;for(;a<n.length;a++){let o=n[a];if((o.priority==null?50:o.priority)<s)break}n.splice(a,0,i)}for(let i in t.marks){let s=t.marks[i].spec.parseDOM;s&&s.forEach(a=>{r(a=c8(a)),a.mark||a.ignore||a.clearMark||(a.mark=i)})}for(let i in t.nodes){let s=t.nodes[i].spec.parseDOM;s&&s.forEach(a=>{r(a=c8(a)),a.node||a.ignore||a.mark||(a.node=i)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new gc(t,gc.schemaRules(t)))}}const ete={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},$9e={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},tte={ol:!0,ul:!0},Jg=1,Yk=2,Bm=4;function o8(e,t,n){return t!=null?(t?Jg:0)|(t==="full"?Yk:0):e&&e.whitespace=="pre"?Jg|Yk:n&~Bm}class Nv{constructor(t,n,r,i,s,a){this.type=t,this.attrs=n,this.marks=r,this.solid=i,this.options=a,this.content=[],this.activeMarks=Ut.none,this.match=s||(a&Bm?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(me.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&Jg)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=me.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(me.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!ete.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class l8{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,a=o8(null,n.preserveWhitespace,0)|(r?Bm:0);i?s=new Nv(i.type,i.attrs,Ut.none,!0,n.topMatch||i.type.contentMatch,a):r?s=new Nv(null,null,Ut.none,!0,null,a):s=new Nv(t.schema.topNodeType,null,Ut.none,!0,null,a),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,i=this.top,s=i.options&Yk?"full":this.localPreserveWS||(i.options&Jg)>0;if(s==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],o=t.previousSibling;(!a||o&&o.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let i=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let a=t.nodeName.toLowerCase(),o;tte.hasOwnProperty(a)&&this.parser.normalizeLists&&U9e(t);let l=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(o=this.parser.matchTag(t,this,r));e:if(l?l.ignore:$9e.hasOwnProperty(a))this.findInside(t),this.ignoreFallback(t,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(t=l.skip);let u,d=this.needsBlock;if(ete.hasOwnProperty(a))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),u=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let f=l&&l.skip?n:this.readStyles(t,n);f&&this.addAll(t,f),u&&this.sync(s),this.needsBlock=d}else{let u=this.readStyles(t,n);u&&this.addElementByRule(t,l,u,l.consuming===!1?o:void 0)}this.localPreserveWS=i}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],a=r.getPropertyValue(s);if(a)for(let o=void 0;;){let l=this.parser.matchStyle(s,a,this,o);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(u=>!l.clearMark(u)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)o=l;else break}}return n}addElementByRule(t,n,r,i){let s,a;if(n.node)if(a=this.parser.schema.nodes[n.node],a.isLeaf)this.insertNode(a.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let l=this.enter(a,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let o=this.top;if(a&&a.isLeaf)this.findInside(t);else if(i)this.addElement(t,r,i);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=t;typeof n.contentElement=="string"?l=t.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(t):n.contentElement&&(l=n.contentElement),this.findAround(t,l,!0),this.addAll(l,r),this.findAround(t,l,!1)}s&&this.sync(o)&&this.open--}addAll(t,n,r,i){let s=r||0;for(let a=r?t.childNodes[r]:t.firstChild,o=i==null?null:t.childNodes[i];a!=o;a=a.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(a,n);this.findAtPoint(t,s)}findPlace(t,n,r){let i,s;for(let a=this.open,o=0;a>=0;a--){let l=this.nodes[a],u=l.findWrapping(t);if(u&&(!i||i.length>u.length+o)&&(i=u,s=l,!u.length))break;if(l.solid){if(r)break;o+=2}}if(!i)return null;this.sync(s);for(let a=0;a<i.length;a++)n=this.enterInner(i[a],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(t,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let a=Ut.none;for(let o of i.concat(t.marks))(s.type?s.type.allowsMarkType(o.type):u8(o.type,t.type))&&(a=o.addToSet(a));return s.content.push(t.mark(a)),!0}return!1}enter(t,n,r,i){let s=this.findPlace(t.create(n),r,!1);return s&&(s=this.enterInner(t,n,r,!0,i)),s}enterInner(t,n,r,i=!1,s){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(t);let o=o8(t,s,a.options);a.options&Bm&&a.content.length==0&&(o|=Bm);let l=Ut.none;return r=r.filter(u=>(a.type?a.type.allowsMarkType(u.type):u8(u.type,t))?(l=u.addToSet(l),!1):!0),this.nodes.push(new Nv(t,n,l,i,null,o)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Jg)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),a=(o,l)=>{for(;o>=0;o--){let u=n[o];if(u==""){if(o==n.length-1||o==0)continue;for(;l>=s;l--)if(a(o-1,l))return!0;return!1}else{let d=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!d||d.name!=u&&!d.isInGroup(u))return!1;l--}}return!0};return a(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function U9e(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&tte.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function z9e(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function c8(e){let t={};for(let n in e)t[n]=e[n];return t}function u8(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let s=[],a=o=>{s.push(o);for(let l=0;l<o.edgeCount;l++){let{type:u,next:d}=o.edge(l);if(u==t||s.indexOf(d)<0&&a(d))return!0}};if(a(i.contentMatch))return!0}}class Rd{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=eT(n).createDocumentFragment());let i=r,s=[];return t.forEach(a=>{if(s.length||a.marks.length){let o=0,l=0;for(;o<s.length&&l<a.marks.length;){let u=a.marks[l];if(!this.marks[u.type.name]){l++;continue}if(!u.eq(s[o][0])||u.type.spec.spanning===!1)break;o++,l++}for(;o<s.length;)i=s.pop()[1];for(;l<a.marks.length;){let u=a.marks[l++],d=this.serializeMark(u,a.isInline,n);d&&(s.push([u,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(a,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:i}=xx(eT(n),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let i=t.marks.length-1;i>=0;i--){let s=this.serializeMark(t.marks[i],t.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(t,n,r={}){let i=this.marks[t.type.name];return i&&xx(eT(r),i(t,n),null,t.attrs)}static renderSpec(t,n,r=null,i){return xx(t,n,r,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new Rd(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=d8(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return d8(t.marks)}}function d8(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function eT(e){return e.document||window.document}const f8=new WeakMap;function H9e(e){let t=f8.get(e);return t===void 0&&f8.set(e,t=V9e(e)),t}function V9e(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(e),t}function xx(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=H9e(r))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=i.indexOf(" ");a>0&&(n=i.slice(0,a),i=i.slice(a+1));let o,l=n?e.createElementNS(n,i):e.createElement(i),u=t[1],d=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){d=2;for(let f in u)if(u[f]!=null){let h=f.indexOf(" ");h>0?l.setAttributeNS(f.slice(0,h),f.slice(h+1),u[f]):f=="style"&&l.style?l.style.cssText=u[f]:l.setAttribute(f,u[f])}}for(let f=d;f<t.length;f++){let h=t[f];if(h===0){if(f<t.length-1||f>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:m}=xx(e,h,n,r);if(l.appendChild(p),m){if(o)throw new RangeError("Multiple content holes");o=m}}}return{dom:l,contentDOM:o}}const nte=65535,rte=Math.pow(2,16);function W9e(e,t){return e+t*rte}function h8(e){return e&nte}function q9e(e){return(e-(e&nte))/rte}const ite=1,ste=2,bx=4,ate=8;class Xk{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&ate)>0}get deletedBefore(){return(this.delInfo&(ite|bx))>0}get deletedAfter(){return(this.delInfo&(ste|bx))>0}get deletedAcross(){return(this.delInfo&bx)>0}}class es{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&es.empty)return es.empty}recover(t){let n=0,r=h8(t);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+q9e(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let i=0,s=this.inverted?2:1,a=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let l=this.ranges[o]-(this.inverted?i:0);if(l>t)break;let u=this.ranges[o+s],d=this.ranges[o+a],f=l+u;if(t<=f){let h=u?t==l?-1:t==f?1:n:n,p=l+i+(h<0?0:d);if(r)return p;let m=t==(n<0?l:f)?null:W9e(o/3,t-l),g=t==l?ste:t==f?ite:bx;return(n<0?t!=l:t!=f)&&(g|=ate),new Xk(p,g,m)}i+=d-u}return r?t+i:new Xk(t+i,0,null)}touches(t,n){let r=0,i=h8(n),s=this.inverted?2:1,a=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let l=this.ranges[o]-(this.inverted?r:0);if(l>t)break;let u=this.ranges[o+s],d=l+u;if(t<=d&&o==i*3)return!0;r+=this.ranges[o+a]-u}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let a=this.ranges[i],o=a-(this.inverted?s:0),l=a+(this.inverted?0:s),u=this.ranges[i+n],d=this.ranges[i+r];t(o,o+u,l,l+d),s+=d-u}}invert(){return new es(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?es.empty:new es(t<0?[0,-t,0]:[0,0,t])}}es.empty=new es([]);class Zg{constructor(t,n,r=0,i=t?t.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new Zg(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let i=t.getMirror(n);this.appendMap(t._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let i=t.getMirror(n);this.appendMap(t._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let t=new Zg;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let i=0;for(let s=this.from;s<this.to;s++){let a=this._maps[s],o=a.mapResult(t,n);if(o.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,t=this._maps[l].recover(o.recover);continue}}i|=o.delInfo,t=o.pos}return r?t:new Xk(t,i,null)}}const tT=Object.create(null);class oi{getMap(){return es.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=tT[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in tT)throw new RangeError("Duplicate use of step JSON ID "+t);return tT[t]=n,n.prototype.jsonID=t,n}}class Yn{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new Yn(t,null)}static fail(t){return new Yn(null,t)}static fromReplace(t,n,r,i){try{return Yn.ok(t.replace(n,r,i))}catch(s){if(s instanceof b1)return Yn.fail(s.message);throw s}}}function QD(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(QD(s.content,t,s))),s.isInline&&(s=t(s,n,i)),r.push(s)}return me.fromArray(r)}class Yl extends oi{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new Pe(QD(n.content,(a,o)=>!a.isAtom||!o.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),i),n.openStart,n.openEnd);return Yn.fromReplace(t,this.from,this.to,s)}invert(){return new ga(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Yl(n.pos,r.pos,this.mark)}merge(t){return t instanceof Yl&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Yl(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Yl(n.from,n.to,t.markFromJSON(n.mark))}}oi.jsonID("addMark",Yl);class ga extends oi{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new Pe(QD(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return Yn.fromReplace(t,this.from,this.to,r)}invert(){return new Yl(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ga(n.pos,r.pos,this.mark)}merge(t){return t instanceof ga&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new ga(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ga(n.from,n.to,t.markFromJSON(n.mark))}}oi.jsonID("removeMark",ga);class Xl extends oi{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Yn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Yn.fromReplace(t,this.pos,this.pos+1,new Pe(me.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Xl(this.pos,n.marks[i]);return new Xl(this.pos,this.mark)}}return new wd(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Xl(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Xl(n.pos,t.markFromJSON(n.mark))}}oi.jsonID("addNodeMark",Xl);class wd extends oi{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Yn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Yn.fromReplace(t,this.pos,this.pos+1,new Pe(me.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Xl(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new wd(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new wd(n.pos,t.markFromJSON(n.mark))}}oi.jsonID("removeNodeMark",wd);class mr extends oi{constructor(t,n,r,i=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=i}apply(t){return this.structure&&Qk(t,this.from,this.to)?Yn.fail("Structure replace would overwrite content"):Yn.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new es([this.from,this.to-this.from,this.slice.size])}invert(t){return new mr(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new mr(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof mr)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?Pe.empty:new Pe(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new mr(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?Pe.empty:new Pe(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new mr(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new mr(n.from,n.to,Pe.fromJSON(t,n.slice),!!n.structure)}}oi.jsonID("replace",mr);class Sr extends oi{constructor(t,n,r,i,s,a,o=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=a,this.structure=o}apply(t){if(this.structure&&(Qk(t,this.from,this.gapFrom)||Qk(t,this.gapTo,this.to)))return Yn.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Yn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Yn.fromReplace(t,this.from,this.to,r):Yn.fail("Content does not fit in gap")}getMap(){return new es([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new Sr(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Sr(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Sr(n.from,n.to,n.gapFrom,n.gapTo,Pe.fromJSON(t,n.slice),n.insert,!!n.structure)}}oi.jsonID("replaceAround",Sr);function Qk(e,t,n){let r=e.resolve(t),i=n-t,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let a=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}}return!1}function K9e(e,t,n,r){let i=[],s=[],a,o;e.doc.nodesBetween(t,n,(l,u,d)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&d.type.allowsMarkType(r.type)){let h=Math.max(u,t),p=Math.min(u+l.nodeSize,n),m=r.addToSet(f);for(let g=0;g<f.length;g++)f[g].isInSet(m)||(a&&a.to==h&&a.mark.eq(f[g])?a.to=p:i.push(a=new ga(h,p,f[g])));o&&o.to==h?o.to=p:s.push(o=new Yl(h,p,r))}}),i.forEach(l=>e.step(l)),s.forEach(l=>e.step(l))}function G9e(e,t,n,r){let i=[],s=0;e.doc.nodesBetween(t,n,(a,o)=>{if(!a.isInline)return;s++;let l=null;if(r instanceof CS){let u=a.marks,d;for(;d=r.isInSet(u);)(l||(l=[])).push(d),u=d.removeFromSet(u)}else r?r.isInSet(a.marks)&&(l=[r]):l=a.marks;if(l&&l.length){let u=Math.min(o+a.nodeSize,n);for(let d=0;d<l.length;d++){let f=l[d],h;for(let p=0;p<i.length;p++){let m=i[p];m.step==s-1&&f.eq(i[p].style)&&(h=m)}h?(h.to=u,h.step=s):i.push({style:f,from:Math.max(o,t),to:u,step:s})}}}),i.forEach(a=>e.step(new ga(a.from,a.to,a.style)))}function JD(e,t,n,r=n.contentMatch,i=!0){let s=e.doc.nodeAt(t),a=[],o=t+1;for(let l=0;l<s.childCount;l++){let u=s.child(l),d=o+u.nodeSize,f=r.matchType(u.type);if(!f)a.push(new mr(o,d,Pe.empty));else{r=f;for(let h=0;h<u.marks.length;h++)n.allowsMarkType(u.marks[h].type)||e.step(new ga(o,d,u.marks[h]));if(i&&u.isText&&n.whitespace!="pre"){let h,p=/\r?\n|\r/g,m;for(;h=p.exec(u.text);)m||(m=new Pe(me.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),a.push(new mr(o+h.index,o+h.index+h[0].length,m))}}o=d}if(!r.validEnd){let l=r.fillBefore(me.empty,!0);e.replace(o,o,new Pe(l,0,0))}for(let l=a.length-1;l>=0;l--)e.step(a[l])}function Y9e(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function pp(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let i=e.$from.node(r),s=e.$from.index(r),a=e.$to.indexAfter(r);if(r<e.depth&&i.canReplace(s,a,n))return r;if(r==0||i.type.spec.isolating||!Y9e(i,s,a))break}return null}function X9e(e,t,n){let{$from:r,$to:i,depth:s}=t,a=r.before(s+1),o=i.after(s+1),l=a,u=o,d=me.empty,f=0;for(let m=s,g=!1;m>n;m--)g||r.index(m)>0?(g=!0,d=me.from(r.node(m).copy(d)),f++):l--;let h=me.empty,p=0;for(let m=s,g=!1;m>n;m--)g||i.after(m+1)<i.end(m)?(g=!0,h=me.from(i.node(m).copy(h)),p++):u++;e.step(new Sr(l,u,a,o,new Pe(d.append(h),f,p),d.size-f,!0))}function ZD(e,t,n=null,r=e){let i=Q9e(e,t),s=i&&J9e(r,t);return s?i.map(p8).concat({type:t,attrs:n}).concat(s.map(p8)):null}function p8(e){return{type:e,attrs:null}}function Q9e(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.contentMatchAt(r).findWrapping(t);if(!s)return null;let a=s.length?s[0]:t;return n.canReplaceWith(r,i,a)?s:null}function J9e(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.child(r),a=t.contentMatch.findWrapping(s.type);if(!a)return null;let l=(a.length?a[a.length-1]:t).contentMatch;for(let u=r;l&&u<i;u++)l=l.matchType(n.child(u).type);return!l||!l.validEnd?null:a}function Z9e(e,t,n){let r=me.empty;for(let a=n.length-1;a>=0;a--){if(r.size){let o=n[a].type.contentMatch.matchFragment(r);if(!o||!o.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=me.from(n[a].type.create(n[a].attrs,r))}let i=t.start,s=t.end;e.step(new Sr(i,s,i,s,new Pe(r,0,0),n.length,!0))}function e7e(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(a,o)=>{let l=typeof i=="function"?i(a):i;if(a.isTextblock&&!a.hasMarkup(r,l)&&t7e(e.doc,e.mapping.slice(s).map(o),r)){let u=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!m?u=!1:!p&&m&&(u=!0)}u===!1&&lte(e,a,o,s),JD(e,e.mapping.slice(s).map(o,1),r,void 0,u===null);let d=e.mapping.slice(s),f=d.map(o,1),h=d.map(o+a.nodeSize,1);return e.step(new Sr(f,h,f+1,h-1,new Pe(me.from(r.create(l,null,a.marks)),0,0),1,!0)),u===!0&&ote(e,a,o,s),!1}})}function ote(e,t,n,r){t.forEach((i,s)=>{if(i.isText){let a,o=/\r?\n|\r/g;for(;a=o.exec(i.text);){let l=e.mapping.slice(r).map(n+1+s+a.index);e.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}}})}function lte(e,t,n,r){t.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let a=e.mapping.slice(r).map(n+1+s);e.replaceWith(a,a+1,t.type.schema.text(`
`))}})}function t7e(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function n7e(e,t,n,r,i){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let a=n.create(r,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,a);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new Sr(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new Pe(me.from(a),0,0),1,!0))}function Wo(e,t,n=1,r){let i=e.resolve(t),s=i.depth-n,a=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,d=n-2;u>s;u--,d--){let f=i.node(u),h=i.index(u);if(f.type.spec.isolating)return!1;let p=f.content.cutByIndex(h,f.childCount),m=r&&r[d+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let g=r&&r[d]||f;if(!f.canReplace(h+1,f.childCount)||!g.type.validContent(p))return!1}let o=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(o,o,l?l.type:i.node(s+1).type)}function r7e(e,t,n=1,r){let i=e.doc.resolve(t),s=me.empty,a=me.empty;for(let o=i.depth,l=i.depth-n,u=n-1;o>l;o--,u--){s=me.from(i.node(o).copy(s));let d=r&&r[u];a=me.from(d?d.type.create(d.attrs,a):i.node(o).copy(a))}e.step(new mr(t,t,new Pe(s.append(a),n,n),!0))}function Qc(e,t){let n=e.resolve(t),r=n.index();return cte(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function i7e(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let s=t.child(i),a=s.type==r?e.type.schema.nodes.text:s.type;if(n=n.matchType(a),!n||!e.type.allowsMarks(s.marks))return!1}return n.validEnd}function cte(e,t){return!!(e&&t&&!e.isLeaf&&i7e(e,t))}function kS(e,t,n=-1){let r=e.resolve(t);for(let i=r.depth;;i--){let s,a,o=r.index(i);if(i==r.depth?(s=r.nodeBefore,a=r.nodeAfter):n>0?(s=r.node(i+1),o++,a=r.node(i).maybeChild(o)):(s=r.node(i).maybeChild(o-1),a=r.node(i+1)),s&&!s.isTextblock&&cte(s,a)&&r.node(i).canReplace(o,o+1))return t;if(i==0)break;t=n<0?r.before(i):r.after(i)}}function s7e(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-n),a=s.node().type;if(i&&a.inlineContent){let d=a.whitespace=="pre",f=!!a.contentMatch.matchType(i);d&&!f?r=!1:!d&&f&&(r=!0)}let o=e.steps.length;if(r===!1){let d=e.doc.resolve(t+n);lte(e,d.node(),d.before(),o)}a.inlineContent&&JD(e,t+n-1,a,s.node().contentMatchAt(s.index()),r==null);let l=e.mapping.slice(o),u=l.map(t-n);if(e.step(new mr(u,l.map(t+n,-1),Pe.empty,!0)),r===!0){let d=e.doc.resolve(u);ote(e,d.node(),d.before(),e.steps.length)}return e}function a7e(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function ute(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let a=r.depth;a>=0;a--){let o=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,l=r.index(a)+(o>0?1:0),u=r.node(a),d=!1;if(s==1)d=u.canReplace(l,l,i);else{let f=u.contentMatchAt(l).findWrapping(i.firstChild.type);d=f&&u.canReplaceWith(l,l,f[0])}if(d)return o==0?r.pos:o<0?r.before(a+1):r.after(a+1)}return null}function AS(e,t,n=t,r=Pe.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),s=e.resolve(n);return dte(i,s,r)?new mr(t,n,r):new o7e(i,s,r).fit()}function dte(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class o7e{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=me.empty;for(let i=0;i<=t.depth;i++){let s=t.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=me.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let s=this.placed,a=r.depth,o=i.depth;for(;a&&o&&s.childCount==1;)s=s.firstChild.content,a--,o--;let l=new Pe(s,a,o);return t>-1?new Sr(r.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new mr(r.pos,i.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){t=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=nT(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let a=i.firstChild;for(let o=this.depth;o>=0;o--){let{type:l,match:u}=this.frontier[o],d,f=null;if(n==1&&(a?u.matchType(a.type)||(f=u.fillBefore(me.from(a),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:o,parent:s,inject:f};if(n==2&&a&&(d=u.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:o,parent:s,wrap:d};if(s&&u.matchType(s.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=nT(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Pe(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=nT(t,n);if(i.childCount<=1&&n>0){let s=t.size-n<=n+i.size;this.unplaced=new Pe(dm(t,n-1,1),n-1,s?n-1:r)}else this.unplaced=new Pe(dm(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let a=this.unplaced,o=r?r.content:a.content,l=a.openStart-t,u=0,d=[],{match:f,type:h}=this.frontier[n];if(i){for(let g=0;g<i.childCount;g++)d.push(i.child(g));f=f.matchFragment(i)}let p=o.size+t-(a.content.size-a.openEnd);for(;u<o.childCount;){let g=o.child(u),v=f.matchType(g.type);if(!v)break;u++,(u>1||l==0||g.content.size)&&(f=v,d.push(fte(g.mark(h.allowedMarks(g.marks)),u==1?l:0,u==o.childCount?p:-1)))}let m=u==o.childCount;m||(p=-1),this.placed=fm(this.placed,n,me.from(d)),this.frontier[n].match=f,m&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,v=o;g<p;g++){let y=v.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),v=y.content}this.unplaced=m?t==0?Pe.empty:new Pe(dm(a.content,t-1,1),t-1,p<0?a.openEnd:t-1):new Pe(dm(a.content,t,u),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!rT(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),a=rT(t,n,i,r,s);if(a){for(let o=n-1;o>=0;o--){let{match:l,type:u}=this.frontier[o],d=rT(t,o,u,l,!0);if(!d||d.childCount)continue e}return{depth:n,fit:a,move:s?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=fm(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let i=t.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,s)}return t}openFrontierNode(t,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=fm(this.placed,this.depth,me.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(me.empty,!0);n.childCount&&(this.placed=fm(this.placed,this.frontier.length,n))}}function dm(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(dm(e.firstChild.content,t-1,n)))}function fm(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(fm(e.lastChild.content,t-1,n)))}function nT(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function fte(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,fte(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(me.empty,!0)))),e.copy(r)}function rT(e,t,n,r,i){let s=e.node(t),a=i?e.indexAfter(t):e.index(t);if(a==s.childCount&&!n.compatibleContent(s.type))return null;let o=r.fillBefore(s.content,!0,a);return o&&!l7e(n,s.content,a)?o:null}function l7e(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function c7e(e){return e.spec.defining||e.spec.definingForContent}function u7e(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),s=e.doc.resolve(n);if(dte(i,s,r))return e.step(new mr(t,n,r));let a=pte(i,e.doc.resolve(n));a[a.length-1]==0&&a.pop();let o=-(i.depth+1);a.unshift(o);for(let h=i.depth,p=i.pos-1;h>0;h--,p--){let m=i.node(h).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;a.indexOf(h)>-1?o=h:i.before(h)==p&&a.splice(1,0,-h)}let l=a.indexOf(o),u=[],d=r.openStart;for(let h=r.content,p=0;;p++){let m=h.firstChild;if(u.push(m),p==r.openStart)break;h=m.content}for(let h=d-1;h>=0;h--){let p=u[h],m=c7e(p.type);if(m&&!p.sameMarkup(i.node(Math.abs(o)-1)))d=h;else if(m||!p.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let p=(h+d+1)%(r.openStart+1),m=u[p];if(m)for(let g=0;g<a.length;g++){let v=a[(g+l)%a.length],y=!0;v<0&&(y=!1,v=-v);let b=i.node(v-1),x=i.index(v-1);if(b.canReplaceWith(x,x,m.type,m.marks))return e.replace(i.before(v),y?s.after(v):n,new Pe(hte(r.content,0,r.openStart,p),p,r.openEnd))}}let f=e.steps.length;for(let h=a.length-1;h>=0&&(e.replace(t,n,r),!(e.steps.length>f));h--){let p=a[h];p<0||(t=i.before(p),n=s.after(p))}}function hte(e,t,n,r,i){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy(hte(s.content,t+1,n,r,s)))}if(t>r){let s=i.contentMatchAt(0),a=s.fillBefore(e).append(e);e=a.append(s.matchFragment(a).fillBefore(me.empty,!0))}return e}function d7e(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=a7e(e.doc,t,r.type);i!=null&&(t=n=i)}e.replaceRange(t,n,new Pe(me.from(r),0,0))}function f7e(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),s=pte(r,i);for(let a=0;a<s.length;a++){let o=s[a],l=a==s.length-1;if(l&&o==0||r.node(o).type.contentMatch.validEnd)return e.delete(r.start(o),i.end(o));if(o>0&&(l||r.node(o-1).canReplace(r.index(o-1),i.indexAfter(o-1))))return e.delete(r.before(o),i.after(o))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(t-r.start(a)==r.depth-a&&n>r.end(a)&&i.end(a)-n!=i.depth-a&&r.start(a-1)==i.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),i.index(a-1)))return e.delete(r.before(a),n);e.delete(t,n)}function pte(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let s=e.start(i);if(s<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(s==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==s-1)&&n.push(i)}return n}class Jf extends oi{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return Yn.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Yn.fromReplace(t,this.pos,this.pos+1,new Pe(me.from(i),0,n.isLeaf?0:1))}getMap(){return es.empty}invert(t){return new Jf(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Jf(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Jf(n.pos,n.attr,n.value)}}oi.jsonID("attr",Jf);class e0 extends oi{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return Yn.ok(r)}getMap(){return es.empty}invert(t){return new e0(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new e0(n.attr,n.value)}}oi.jsonID("docAttr",e0);let jh=class extends Error{};jh=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};jh.prototype=Object.create(Error.prototype);jh.prototype.constructor=jh;jh.prototype.name="TransformError";class eM{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Zg}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new jh(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=Pe.empty){let i=AS(this.doc,t,n,r);return i&&this.step(i),this}replaceWith(t,n,r){return this.replace(t,n,new Pe(me.from(r),0,0))}delete(t,n){return this.replace(t,n,Pe.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return u7e(this,t,n,r),this}replaceRangeWith(t,n,r){return d7e(this,t,n,r),this}deleteRange(t,n){return f7e(this,t,n),this}lift(t,n){return X9e(this,t,n),this}join(t,n=1){return s7e(this,t,n),this}wrap(t,n){return Z9e(this,t,n),this}setBlockType(t,n=t,r,i=null){return e7e(this,t,n,r,i),this}setNodeMarkup(t,n,r=null,i){return n7e(this,t,n,r,i),this}setNodeAttribute(t,n,r){return this.step(new Jf(t,n,r)),this}setDocAttribute(t,n){return this.step(new e0(t,n)),this}addNodeMark(t,n){return this.step(new Xl(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof Ut)n.isInSet(r.marks)&&this.step(new wd(t,n));else{let i=r.marks,s,a=[];for(;s=n.isInSet(i);)a.push(new wd(t,s)),i=s.removeFromSet(i);for(let o=a.length-1;o>=0;o--)this.step(a[o])}return this}split(t,n=1,r){return r7e(this,t,n,r),this}addMark(t,n,r){return K9e(this,t,n,r),this}removeMark(t,n,r){return G9e(this,t,n,r),this}clearIncompatible(t,n,r){return JD(this,t,n,r),this}}const iT=Object.create(null);class Ze{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new mte(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=Pe.empty){let r=n.content.lastChild,i=null;for(let o=0;o<n.openEnd;o++)i=r,r=r.lastChild;let s=t.steps.length,a=this.ranges;for(let o=0;o<a.length;o++){let{$from:l,$to:u}=a[o],d=t.mapping.slice(s);t.replaceRange(d.map(l.pos),d.map(u.pos),o?Pe.empty:n),o==0&&y8(t,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:a,$to:o}=i[s],l=t.mapping.slice(r),u=l.map(a.pos),d=l.map(o.pos);s?t.deleteRange(u,d):(t.replaceRangeWith(u,d,n),y8(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let i=t.parent.inlineContent?new Ye(t):cf(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(let s=t.depth-1;s>=0;s--){let a=n<0?cf(t.node(0),t.node(s),t.before(s+1),t.index(s),n,r):cf(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,n,r);if(a)return a}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new us(t.node(0))}static atStart(t){return cf(t,t,0,0,1)||new us(t)}static atEnd(t){return cf(t,t,t.content.size,t.childCount,-1)||new us(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=iT[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in iT)throw new RangeError("Duplicate use of selection JSON ID "+t);return iT[t]=n,n.prototype.jsonID=t,n}getBookmark(){return Ye.between(this.$anchor,this.$head).getBookmark()}}Ze.prototype.visible=!0;class mte{constructor(t,n){this.$from=t,this.$to=n}}let m8=!1;function g8(e){!m8&&!e.parent.inlineContent&&(m8=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Ye extends Ze{constructor(t,n=t){g8(t),g8(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return Ze.near(r);let i=t.resolve(n.map(this.anchor));return new Ye(i.parent.inlineContent?i:r,r)}replace(t,n=Pe.empty){if(super.replace(t,n),n==Pe.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof Ye&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new jS(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ye(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let i=t.resolve(n);return new this(i,r==n?i:t.resolve(r))}static between(t,n,r){let i=t.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Ze.findFrom(n,r,!0)||Ze.findFrom(n,-r,!0);if(s)n=s.$head;else return Ze.near(n,r)}return t.parent.inlineContent||(i==0?t=n:(t=(Ze.findFrom(t,-r,!0)||Ze.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new Ye(t,n)}}Ze.jsonID("text",Ye);class jS{constructor(t,n){this.anchor=t,this.head=n}map(t){return new jS(t.map(this.anchor),t.map(this.head))}resolve(t){return Ye.between(t.resolve(this.anchor),t.resolve(this.head))}}class Ge extends Ze{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=t.resolve(i);return r?Ze.near(s):new Ge(s)}content(){return new Pe(me.from(this.node),0,0)}eq(t){return t instanceof Ge&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new tM(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ge(t.resolve(n.anchor))}static create(t,n){return new Ge(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}Ge.prototype.visible=!1;Ze.jsonID("node",Ge);class tM{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new jS(r,r):new tM(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&Ge.isSelectable(r)?new Ge(n):Ze.near(n)}}class us extends Ze{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=Pe.empty){if(n==Pe.empty){t.delete(0,t.doc.content.size);let r=Ze.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new us(t)}map(t){return new us(t)}eq(t){return t instanceof us}getBookmark(){return h7e}}Ze.jsonID("all",us);const h7e={map(){return this},resolve(e){return new us(e)}};function cf(e,t,n,r,i,s=!1){if(t.inlineContent)return Ye.create(e,n);for(let a=r-(i>0?0:1);i>0?a<t.childCount:a>=0;a+=i){let o=t.child(a);if(o.isAtom){if(!s&&Ge.isSelectable(o))return Ge.create(e,n-(i<0?o.nodeSize:0))}else{let l=cf(e,o,n+i,i<0?o.childCount:0,i,s);if(l)return l}n+=o.nodeSize*i}return null}function y8(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof mr||i instanceof Sr))return;let s=e.mapping.maps[r],a;s.forEach((o,l,u,d)=>{a==null&&(a=d)}),e.setSelection(Ze.near(e.doc.resolve(a),n))}const v8=1,Tv=2,x8=4;class p7e extends eM{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|v8)&~Tv,this.storedMarks=null,this}get selectionSet(){return(this.updated&v8)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=Tv,this}ensureMarks(t){return Ut.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Tv)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~Tv,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ut.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let i=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!t)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let a=this.doc.resolve(n);s=r==n?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(t,s)),this.selection.empty||this.setSelection(Ze.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=x8,this}get scrolledIntoView(){return(this.updated&x8)>0}}function b8(e,t){return!t||!e?e:e.bind(t)}class hm{constructor(t,n,r){this.name=t,this.init=b8(n.init,r),this.apply=b8(n.apply,r)}}const m7e=[new hm("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new hm("selection",{init(e,t){return e.selection||Ze.atStart(t.doc)},apply(e){return e.selection}}),new hm("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new hm("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class sT{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=m7e.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new hm(r.key,r.spec.state,r))})}}class Mf{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),i=null;for(;;){let s=!1;for(let a=0;a<this.config.plugins.length;a++){let o=this.config.plugins[a];if(o.spec.appendTransaction){let l=i?i[a].n:0,u=i?i[a].state:this,d=l<n.length&&o.spec.appendTransaction.call(o,l?n.slice(l):n,u,r);if(d&&r.filterTransaction(d,a)){if(d.setMeta("appendedTransaction",t),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<a?{state:r,n:n.length}:{state:this,n:0})}n.push(d),r=r.applyInner(d),s=!0}i&&(i[a]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Mf(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(t,this[s.name],this,n)}return n}get tr(){return new p7e(this)}static create(t){let n=new sT(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new Mf(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}reconfigure(t){let n=new sT(this.schema,t.plugins),r=n.fields,i=new Mf(n);for(let s=0;s<r.length;s++){let a=r[s].name;i[a]=this.hasOwnProperty(a)?this[a]:r[s].init(t,i)}return i}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new sT(t.schema,t.plugins),s=new Mf(i);return i.fields.forEach(a=>{if(a.name=="doc")s.doc=mc.fromJSON(t.schema,n.doc);else if(a.name=="selection")s.selection=Ze.fromJSON(s.doc,n.selection);else if(a.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let o in r){let l=r[o],u=l.spec.state;if(l.key==a.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,o)){s[a.name]=u.fromJSON.call(l,t,n[o],s);return}}s[a.name]=a.init(t,s)}}),s}}function gte(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=gte(i,t,{})),n[r]=i}return n}class cn{constructor(t){this.spec=t,this.props={},t.props&&gte(t.props,this,this.props),this.key=t.key?t.key.key:yte("plugin")}getState(t){return t[this.key]}}const aT=Object.create(null);function yte(e){return e in aT?e+"$"+ ++aT[e]:(aT[e]=0,e+"$")}class Mn{constructor(t="key"){this.key=yte(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const Lr=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Oh=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let Jk=null;const jo=function(e,t,n){let r=Jk||(Jk=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},g7e=function(){Jk=null},Ed=function(e,t,n,r){return n&&(w8(e,t,n,r,-1)||w8(e,t,n,r,1))},y7e=/^(img|br|input|textarea|hr)$/i;function w8(e,t,n,r,i){for(var s;;){if(e==n&&t==r)return!0;if(t==(i<0?0:Ms(e))){let a=e.parentNode;if(!a||a.nodeType!=1||hy(e)||y7e.test(e.nodeName)||e.contentEditable=="false")return!1;t=Lr(e)+(i<0?0:1),e=a}else if(e.nodeType==1){let a=e.childNodes[t+(i<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")if(!((s=a.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)t+=i;else return!1;else e=a,t=i<0?Ms(e):0}else return!1}}function Ms(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function v7e(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=Ms(e)}else if(e.parentNode&&!hy(e))t=Lr(e),e=e.parentNode;else return null}}function x7e(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!hy(e))t=Lr(e)+1,e=e.parentNode;else return null}}function b7e(e,t,n){for(let r=t==0,i=t==Ms(e);r||i;){if(e==n)return!0;let s=Lr(e);if(e=e.parentNode,!e)return!1;r=r&&s==0,i=i&&s==Ms(e)}}function hy(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const OS=function(e){return e.focusNode&&Ed(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function xu(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function w7e(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function E7e(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(Ms(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(Ms(r.startContainer),r.startOffset)}}}const ho=typeof navigator<"u"?navigator:null,E8=typeof document<"u"?document:null,Jc=ho&&ho.userAgent||"",Zk=/Edge\/(\d+)/.exec(Jc),vte=/MSIE \d/.exec(Jc),eA=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Jc),Bi=!!(vte||eA||Zk),yc=vte?document.documentMode:eA?+eA[1]:Zk?+Zk[1]:0,ka=!Bi&&/gecko\/(\d+)/i.test(Jc);ka&&+(/Firefox\/(\d+)/.exec(Jc)||[0,0])[1];const tA=!Bi&&/Chrome\/(\d+)/.exec(Jc),Qr=!!tA,xte=tA?+tA[1]:0,xi=!Bi&&!!ho&&/Apple Computer/.test(ho.vendor),Ph=xi&&(/Mobile\/\w+/.test(Jc)||!!ho&&ho.maxTouchPoints>2),As=Ph||(ho?/Mac/.test(ho.platform):!1),S7e=ho?/Win/.test(ho.platform):!1,Bo=/Android \d/.test(Jc),py=!!E8&&"webkitFontSmoothing"in E8.documentElement.style,_7e=py?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function N7e(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Eo(e,t){return typeof e=="number"?e:e[t]}function T7e(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function S8(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let a=n||e.dom;a;){if(a.nodeType!=1){a=Oh(a);continue}let o=a,l=o==s.body,u=l?N7e(s):T7e(o),d=0,f=0;if(t.top<u.top+Eo(r,"top")?f=-(u.top-t.top+Eo(i,"top")):t.bottom>u.bottom-Eo(r,"bottom")&&(f=t.bottom-t.top>u.bottom-u.top?t.top+Eo(i,"top")-u.top:t.bottom-u.bottom+Eo(i,"bottom")),t.left<u.left+Eo(r,"left")?d=-(u.left-t.left+Eo(i,"left")):t.right>u.right-Eo(r,"right")&&(d=t.right-u.right+Eo(i,"right")),d||f)if(l)s.defaultView.scrollBy(d,f);else{let p=o.scrollLeft,m=o.scrollTop;f&&(o.scrollTop+=f),d&&(o.scrollLeft+=d);let g=o.scrollLeft-p,v=o.scrollTop-m;t={left:t.left-g,top:t.top-v,right:t.right-g,bottom:t.bottom-v}}let h=l?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(h))break;a=h=="absolute"?a.offsetParent:Oh(a)}}function C7e(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i;for(let s=(t.left+t.right)/2,a=n+1;a<Math.min(innerHeight,t.bottom);a+=5){let o=e.root.elementFromPoint(s,a);if(!o||o==e.dom||!e.dom.contains(o))continue;let l=o.getBoundingClientRect();if(l.top>=n-20){r=o,i=l.top;break}}return{refDOM:r,refTop:i,stack:bte(e.dom)}}function bte(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=Oh(r));return t}function k7e({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;wte(n,r==0?0:r-t)}function wte(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:s}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}let tf=null;function A7e(e){if(e.setActive)return e.setActive();if(tf)return e.focus(tf);let t=bte(e);e.focus(tf==null?{get preventScroll(){return tf={preventScroll:!0},!0}}:void 0),tf||(tf=!1,wte(t,0))}function Ete(e,t){let n,r=2e8,i,s=0,a=t.top,o=t.top,l,u;for(let d=e.firstChild,f=0;d;d=d.nextSibling,f++){let h;if(d.nodeType==1)h=d.getClientRects();else if(d.nodeType==3)h=jo(d).getClientRects();else continue;for(let p=0;p<h.length;p++){let m=h[p];if(m.top<=a&&m.bottom>=o){a=Math.max(m.bottom,a),o=Math.min(m.top,o);let g=m.left>t.left?m.left-t.left:m.right<t.left?t.left-m.right:0;if(g<r){n=d,r=g,i=g&&n.nodeType==3?{left:m.right<t.left?m.right:m.left,top:t.top}:t,d.nodeType==1&&g&&(s=f+(t.left>=(m.left+m.right)/2?1:0));continue}}else m.top>t.top&&!l&&m.left<=t.left&&m.right>=t.left&&(l=d,u={left:Math.max(m.left,Math.min(m.right,t.left)),top:m.top});!n&&(t.left>=m.right&&t.top>=m.top||t.left>=m.left&&t.top>=m.bottom)&&(s=f+1)}}return!n&&l&&(n=l,i=u,r=0),n&&n.nodeType==3?j7e(n,i):!n||r&&n.nodeType==1?{node:e,offset:s}:Ete(n,i)}function j7e(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let s=jl(r,1);if(s.top!=s.bottom&&nM(t,s))return{node:e,offset:i+(t.left>=(s.left+s.right)/2?1:0)}}return{node:e,offset:0}}function nM(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function O7e(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function P7e(e,t,n){let{node:r,offset:i}=Ete(t,n),s=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}function I7e(e,t,n,r){let i=-1;for(let s=t,a=!1;s!=e.dom;){let o=e.docView.nearestDesc(s,!0),l;if(!o)return null;if(o.dom.nodeType==1&&(o.node.isBlock&&o.parent||!o.contentDOM)&&((l=o.dom.getBoundingClientRect()).width||l.height)&&(o.node.isBlock&&o.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(o.dom.nodeName)&&(!a&&l.left>r.left||l.top>r.top?i=o.posBefore:(!a&&l.right<r.left||l.bottom<r.top)&&(i=o.posAfter),a=!0),!o.contentDOM&&i<0&&!o.node.isText))return(o.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?o.posBefore:o.posAfter;s=o.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function Ste(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let a=e.childNodes[s];if(a.nodeType==1){let o=a.getClientRects();for(let l=0;l<o.length;l++){let u=o[l];if(nM(t,u))return Ste(a,t,u)}}if((s=(s+1)%r)==i)break}return e}function D7e(e,t){let n=e.dom.ownerDocument,r,i=0,s=E7e(n,t.left,t.top);s&&({node:r,offset:i}=s);let a=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),o;if(!a||!e.dom.contains(a.nodeType!=1?a.parentNode:a)){let u=e.dom.getBoundingClientRect();if(!nM(t,u)||(a=Ste(e.dom,t,u),!a))return null}if(xi)for(let u=a;r&&u;u=Oh(u))u.draggable&&(r=void 0);if(a=O7e(a,t),r){if(ka&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let d=r.childNodes[i],f;d.nodeName=="IMG"&&(f=d.getBoundingClientRect()).right<=t.left&&f.bottom>t.top&&i++}let u;py&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=t.top&&i--,r==e.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?o=e.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(o=I7e(e,r,i,t))}o==null&&(o=P7e(e,a,t));let l=e.docView.nearestDesc(a,!0);return{pos:o,inside:l?l.posAtStart-l.border:-1}}function _8(e){return e.top<e.bottom||e.left<e.right}function jl(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(_8(r))return r}return Array.prototype.find.call(n,_8)||e.getBoundingClientRect()}const M7e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function _te(e,t,n){let{node:r,offset:i,atom:s}=e.docView.domFromPos(t,n<0?-1:1),a=py||ka;if(r.nodeType==3)if(a&&(M7e.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=jl(jo(r,i,i),n);if(ka&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=jl(jo(r,i-1,i-1),-1);if(u.top==l.top){let d=jl(jo(r,i,i+1),-1);if(d.top!=l.top)return Gp(d,d.left<u.left)}}return l}else{let l=i,u=i,d=n<0?1:-1;return n<0&&!i?(u++,d=-1):n>=0&&i==r.nodeValue.length?(l--,d=1):n<0?l--:u++,Gp(jl(jo(r,l,u),d),d<0)}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Ms(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return oT(l.getBoundingClientRect(),!1)}if(s==null&&i<Ms(r)){let l=r.childNodes[i];if(l.nodeType==1)return oT(l.getBoundingClientRect(),!0)}return oT(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Ms(r))){let l=r.childNodes[i-1],u=l.nodeType==3?jo(l,Ms(l)-(a?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(u)return Gp(jl(u,1),!1)}if(s==null&&i<Ms(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let u=l?l.nodeType==3?jo(l,0,a?0:1):l.nodeType==1?l:null:null;if(u)return Gp(jl(u,-1),!0)}return Gp(jl(r.nodeType==3?jo(r):r,-n),n>=0)}function Gp(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function oT(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function Nte(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function R7e(e,t,n){let r=t.selection,i=n=="up"?r.$from:r.$to;return Nte(e,t,()=>{let{node:s}=e.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let o=e.docView.nearestDesc(s,!0);if(!o)break;if(o.node.isBlock){s=o.contentDOM||o.dom;break}s=o.dom.parentNode}let a=_te(e,i.pos,1);for(let o=s.firstChild;o;o=o.nextSibling){let l;if(o.nodeType==1)l=o.getClientRects();else if(o.nodeType==3)l=jo(o,0,o.nodeValue.length).getClientRects();else continue;for(let u=0;u<l.length;u++){let d=l[u];if(d.bottom>d.top+1&&(n=="up"?a.top-d.top>(d.bottom-a.top)*2:d.bottom-a.bottom>(a.bottom-d.top)*2))return!1}}return!0})}const L7e=/[\u0590-\u08ac]/;function F7e(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,a=i==r.parent.content.size,o=e.domSelection();return o?!L7e.test(r.parent.textContent)||!o.modify?n=="left"||n=="backward"?s:a:Nte(e,t,()=>{let{focusNode:l,focusOffset:u,anchorNode:d,anchorOffset:f}=e.domSelectionRange(),h=o.caretBidiLevel;o.modify("move",n,"character");let p=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:m,focusOffset:g}=e.domSelectionRange(),v=m&&!p.contains(m.nodeType==1?m:m.parentNode)||l==m&&u==g;try{o.collapse(d,f),l&&(l!=d||u!=f)&&o.extend&&o.extend(l,u)}catch{}return h!=null&&(o.caretBidiLevel=h),v}):r.pos==r.start()||r.pos==r.end()}let N8=null,T8=null,C8=!1;function B7e(e,t,n){return N8==t&&T8==n?C8:(N8=t,T8=n,C8=n=="up"||n=="down"?R7e(e,t,n):F7e(e,t,n))}const Vs=0,k8=1,Iu=2,po=3;class my{constructor(t,n,r,i){this.parent=t,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Vs,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let s,a;if(t==this.contentDOM)s=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(a)+a.size:this.posAtStart}else{let s,a;if(t==this.contentDOM)s=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=n>Lr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,i=t;i;i=i.parentNode){let s=this.getDesc(i),a;if(s&&(!n||s.node))if(r&&(a=s.nodeDOM)&&!(a.nodeType==1?a.contains(t.nodeType==1?t:t.parentNode):a==t))r=!1;else return s}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let i=t;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==t&&s!=r){for(;!i.border&&i.children.length;)for(let a=0;a<i.children.length;a++){let o=i.children[a];if(o.size){i=o;break}}return i}if(t<s)return i.descAt(t-r-i.border);r=s}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let a=this.children[r],o=s+a.size;if(o>t||a instanceof Cte){i=t-s;break}s=o}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof Tte&&s.side>=0;r--);if(n<=0){let s,a=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,a=!1);return s&&n&&a&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Lr(s.dom)+1:0}}else{let s,a=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,a=!1);return s&&a&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Lr(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let a=r,o=0;;o++){let l=this.children[o],u=a+l.size;if(i==-1&&t<=u){let d=a+l.border;if(t>=d&&n<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,n,d);t=a;for(let f=o;f>0;f--){let h=this.children[f-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){i=Lr(h.dom)+1;break}t-=h.size}i==-1&&(i=0)}if(i>-1&&(u>n||o==this.children.length-1)){n=u;for(let d=o+1;d<this.children.length;d++){let f=this.children[d];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){s=Lr(f.dom);break}n+=f.size}s==-1&&(s=this.contentDOM.childNodes.length);break}a=u}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,i=!1){let s=Math.min(t,n),a=Math.max(t,n);for(let p=0,m=0;p<this.children.length;p++){let g=this.children[p],v=m+g.size;if(s>m&&a<v)return g.setSelection(t-m-g.border,n-m-g.border,r,i);m=v}let o=this.domFromPos(t,t?-1:1),l=n==t?o:this.domFromPos(n,n?-1:1),u=r.root.getSelection(),d=r.domSelectionRange(),f=!1;if((ka||xi)&&t==n){let{node:p,offset:m}=o;if(p.nodeType==3){if(f=!!(m&&p.nodeValue[m-1]==`
`),f&&m==p.nodeValue.length)for(let g=p,v;g;g=g.parentNode){if(v=g.nextSibling){v.nodeName=="BR"&&(o=l={node:v.parentNode,offset:Lr(v)+1});break}let y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let g=p.childNodes[m-1];f=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(ka&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let p=d.focusNode.childNodes[d.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||f&&xi)&&Ed(o.node,o.offset,d.anchorNode,d.anchorOffset)&&Ed(l.node,l.offset,d.focusNode,d.focusOffset))return;let h=!1;if((u.extend||t==n)&&!f){u.collapse(o.node,o.offset);try{t!=n&&u.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(t>n){let m=o;o=l,l=m}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(o.node,o.offset),u.removeAllRanges(),u.addRange(p)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],a=r+s.size;if(r==a?t<=a&&n>=r:t<a&&n>r){let o=r+s.border,l=a-s.border;if(t>=o&&n<=l){this.dirty=t==r||n==a?Iu:k8,t==o&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=po:s.markDirty(t-o,n-o);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Iu:po}r=a}this.dirty=Iu}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?Iu:k8;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class Tte extends my{constructor(t,n,r,i){let s,a=n.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(a.nodeType!=1){let o=document.createElement("span");o.appendChild(a),a=o}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(t,[],a,null),this.widget=n,this.widget=n,s=this}matchesWidget(t){return this.dirty==Vs&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class $7e extends my{constructor(t,n,r,i){super(t,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class Sd extends my{constructor(t,n,r,i,s){super(t,[],r,i),this.mark=n,this.spec=s}static create(t,n,r,i){let s=i.nodeViews[n.type.name],a=s&&s(n,i,r);return(!a||!a.dom)&&(a=Rd.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Sd(t,n,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&po||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=po&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=Vs){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Vs}}slice(t,n,r){let i=Sd.create(this.parent,this.mark,!0,r),s=this.children,a=this.size;n<a&&(s=rA(s,n,a,r)),t>0&&(s=rA(s,0,t,r));for(let o=0;o<s.length;o++)s[o].parent=i;return i.children=s,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class vc extends my{constructor(t,n,r,i,s,a,o,l,u){super(t,[],s,a),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=o}static create(t,n,r,i,s,a){let o=s.nodeViews[n.type.name],l,u=o&&o(n,s,()=>{if(!l)return a;if(l.parent)return l.parent.posBeforeChild(l)},r,i),d=u&&u.dom,f=u&&u.contentDOM;if(n.isText){if(!d)d=document.createTextNode(n.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:f}=Rd.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),n.type.spec.draggable&&(d.draggable=!0));let h=d;return d=jte(d,r,n),u?l=new U7e(t,n,r,i,d,f||null,h,u,s,a+1):n.isText?new PS(t,n,r,i,d,h,s):new vc(t,n,r,i,d,f||null,h,s,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>me.empty)}return t}matchesNode(t,n,r){return this.dirty==Vs&&t.eq(this.node)&&_1(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,i=n,s=t.composing?this.localCompositionInfo(t,n):null,a=s&&s.pos>-1?s:null,o=s&&s.pos<0,l=new H7e(this,a&&a.node,t);q7e(this.node,this.innerDeco,(u,d,f)=>{u.spec.marks?l.syncToMarks(u.spec.marks,r,t):u.type.side>=0&&!f&&l.syncToMarks(d==this.node.childCount?Ut.none:this.node.child(d).marks,r,t),l.placeWidget(u,t,i)},(u,d,f,h)=>{l.syncToMarks(u.marks,r,t);let p;l.findNodeMatch(u,d,f,h)||o&&t.state.selection.from>i&&t.state.selection.to<i+u.nodeSize&&(p=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(u,d,f,p,t)||l.updateNextNode(u,d,f,t,h,i)||l.addNode(u,d,f,t,i),i+=u.nodeSize}),l.syncToMarks([],r,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Iu)&&(a&&this.protectLocalComposition(t,a),kte(this.contentDOM,this.children,t),Ph&&K7e(this.dom))}localCompositionInfo(t,n){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof Ye)||r<n||i>n+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,o=G7e(this.node.content,a,r-n,i-n);return o<0?null:{node:s,pos:o,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let a=new $7e(this,s,n,i);t.input.compositionNodes.push(a),this.children=rA(this.children,r,r+i.length,t,a)}update(t,n,r,i){return this.dirty==po||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,i),!0)}updateInner(t,n,r,i){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Vs}updateOuterDeco(t){if(_1(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Ate(this.dom,this.nodeDOM,nA(this.outerDeco,this.node,n),nA(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function A8(e,t,n,r,i){jte(r,t,e);let s=new vc(void 0,e,t,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class PS extends vc{constructor(t,n,r,i,s,a,o){super(t,n,r,i,s,null,a,o,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,i){return this.dirty==po||this.dirty!=Vs&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Vs||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=Vs,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let i=this.node.cut(t,n),s=document.createTextNode(i.text);return new PS(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=po)}get domAtom(){return!1}isText(t){return this.node.text==t}}class Cte extends my{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==Vs&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class U7e extends vc{constructor(t,n,r,i,s,a,o,l,u,d){super(t,n,r,i,s,a,o,u,d),this.spec=l}update(t,n,r,i){if(this.dirty==po)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,n,r);return s&&this.updateInner(t,n,r,i),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function kte(e,t,n){let r=e.firstChild,i=!1;for(let s=0;s<t.length;s++){let a=t[s],o=a.dom;if(o.parentNode==e){for(;o!=r;)r=j8(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(o,r);if(a instanceof Sd){let l=r?r.previousSibling:e.lastChild;kte(a.contentDOM,a.children,n),r=l?l.nextSibling:e.firstChild}}for(;r;)r=j8(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const $m=function(e){e&&(this.nodeName=e)};$m.prototype=Object.create(null);const Du=[new $m];function nA(e,t,n){if(e.length==0)return Du;let r=n?Du[0]:new $m,i=[r];for(let s=0;s<e.length;s++){let a=e[s].type.attrs;if(a){a.nodeName&&i.push(r=new $m(a.nodeName));for(let o in a){let l=a[o];l!=null&&(n&&i.length==1&&i.push(r=new $m(t.isInline?"span":"div")),o=="class"?r.class=(r.class?r.class+" ":"")+l:o=="style"?r.style=(r.style?r.style+";":"")+l:o!="nodeName"&&(r[o]=l))}}}return i}function Ate(e,t,n,r){if(n==Du&&r==Du)return t;let i=t;for(let s=0;s<r.length;s++){let a=r[s],o=n[s];if(s){let l;o&&o.nodeName==a.nodeName&&i!=e&&(l=i.parentNode)&&l.nodeName.toLowerCase()==a.nodeName||(l=document.createElement(a.nodeName),l.pmIsDeco=!0,l.appendChild(i),o=Du[0]),i=l}z7e(i,o||Du[0],a)}return i}function z7e(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&e.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&e.classList.add(i[s]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}}function jte(e,t,n){return Ate(e,e,Du,nA(t,n,e.nodeType!=1))}function _1(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function j8(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class H7e{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=V7e(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let i=0,s=this.stack.length>>1,a=Math.min(s,t.length);for(;i<a&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Vs,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<t.length;){this.stack.push(this.top,this.index+1);let o=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let u=this.top.children[l];if(u.matchesMark(t[s])&&!this.isLocked(u.dom)){o=l;break}}if(o>-1)o>this.index&&(this.changed=!0,this.destroyBetween(this.index,o)),this.top=this.top.children[this.index];else{let l=Sd.create(this.top,t[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(t,n,r,i){let s=-1,a;if(i>=this.preMatch.index&&(a=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&a.matchesNode(t,n,r))s=this.top.children.indexOf(a,this.index);else for(let o=this.index,l=Math.min(this.top.children.length,o+5);o<l;o++){let u=this.top.children[o];if(u.matchesNode(t,n,r)&&!this.preMatch.matched.has(u)){s=o;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,n,r,i,s){let a=this.top.children[i];return a.dirty==po&&a.dom==a.contentDOM&&(a.dirty=Iu),a.update(t,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=n}}updateNextNode(t,n,r,i,s,a){for(let o=this.index;o<this.top.children.length;o++){let l=this.top.children[o];if(l instanceof vc){let u=this.preMatch.matched.get(l);if(u!=null&&u!=s)return!1;let d=l.dom,f,h=this.isLocked(d)&&!(t.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==t.text&&l.dirty!=po&&_1(n,l.outerDeco));if(!h&&l.update(t,n,r,i))return this.destroyBetween(this.index,o),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!h&&(f=this.recreateWrapper(l,t,n,r,i,a)))return this.destroyBetween(this.index,o),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Iu,f.updateChildren(i,a+1),f.dirty=Vs),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,i,s,a){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!_1(r,t.outerDeco)||!i.eq(t.innerDeco))return null;let o=vc.create(this.top,n,r,i,s,a);if(o.contentDOM){o.children=t.children,t.children=[];for(let l of o.children)l.parent=o}return t.destroy(),o}addNode(t,n,r,i,s){let a=vc.create(this.top,t,n,r,i,s);a.contentDOM&&a.updateChildren(i,s+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(t,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Tte(this.top,t,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof Sd;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof PS)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((xi||Qr)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Cte(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function V7e(e,t){let n=t,r=n.children.length,i=e.childCount,s=new Map,a=[];e:for(;i>0;){let o;for(;;)if(r){let u=n.children[r-1];if(u instanceof Sd)n=u,r=u.children.length;else{o=u,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=o.node;if(l){if(l!=e.child(i-1))break;--i,s.set(o,i),a.push(o)}}return{index:i,matched:s,matches:a.reverse()}}function W7e(e,t){return e.type.side-t.type.side}function q7e(e,t,n,r){let i=t.locals(e),s=0;if(i.length==0){for(let u=0;u<e.childCount;u++){let d=e.child(u);r(d,i,t.forChild(s,d),u),s+=d.nodeSize}return}let a=0,o=[],l=null;for(let u=0;;){let d,f;for(;a<i.length&&i[a].to==s;){let v=i[a++];v.widget&&(d?(f||(f=[d])).push(v):d=v)}if(d)if(f){f.sort(W7e);for(let v=0;v<f.length;v++)n(f[v],u,!!l)}else n(d,u,!!l);let h,p;if(l)p=-1,h=l,l=null;else if(u<e.childCount)p=u,h=e.child(u++);else break;for(let v=0;v<o.length;v++)o[v].to<=s&&o.splice(v--,1);for(;a<i.length&&i[a].from<=s&&i[a].to>s;)o.push(i[a++]);let m=s+h.nodeSize;if(h.isText){let v=m;a<i.length&&i[a].from<v&&(v=i[a].from);for(let y=0;y<o.length;y++)o[y].to<v&&(v=o[y].to);v<m&&(l=h.cut(v-s),h=h.cut(0,v-s),m=v,p=-1)}else for(;a<i.length&&i[a].to<m;)a++;let g=h.isInline&&!h.isLeaf?o.filter(v=>!v.inline):o.slice();r(h,g,t.forChild(s,h),p),s=m}}function K7e(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function G7e(e,t,n,r){for(let i=0,s=0;i<e.childCount&&s<=r;){let a=e.child(i++),o=s;if(s+=a.nodeSize,!a.isText)continue;let l=a.text;for(;i<e.childCount;){let u=e.child(i++);if(s+=u.nodeSize,!u.isText)break;l+=u.text}if(s>=n){if(s>=r&&l.slice(r-t.length-o,r-o)==t)return r-t.length;let u=o<r?l.lastIndexOf(t,r-o-1):-1;if(u>=0&&u+t.length+o>=n)return o+u;if(n==r&&l.length>=r+t.length-o&&l.slice(r-o,r-o+t.length)==t)return r}}return-1}function rA(e,t,n,r,i){let s=[];for(let a=0,o=0;a<e.length;a++){let l=e[a],u=o,d=o+=l.size;u>=n||d<=t?s.push(l):(u<t&&s.push(l.slice(0,t-u,r)),i&&(s.push(i),i=void 0),d>n&&s.push(l.slice(n-u,l.size,r)))}return s}function rM(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),s=i&&i.size==0,a=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;let o=r.resolve(a),l,u;if(OS(n)){for(l=a;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&Ge.isSelectable(f)&&i.parent&&!(f.isInline&&b7e(n.focusNode,n.focusOffset,i.dom))){let h=i.posBefore;u=new Ge(a==h?o:r.resolve(h))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=a,h=a;for(let p=0;p<n.rangeCount;p++){let m=n.getRangeAt(p);f=Math.min(f,e.docView.posFromDOM(m.startContainer,m.startOffset,1)),h=Math.max(h,e.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(f<0)return null;[l,a]=h==e.state.selection.anchor?[h,f]:[f,h],o=r.resolve(a)}else l=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let d=r.resolve(l);if(!u){let f=t=="pointer"||e.state.selection.head<o.pos&&!s?1:-1;u=iM(e,d,o,f)}return u}function Ote(e){return e.editable?e.hasFocus():Ite(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function qo(e,t=!1){let n=e.state.selection;if(Pte(e,n),!!Ote(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&Qr){let r=e.domSelectionRange(),i=e.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Ed(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)X7e(e);else{let{anchor:r,head:i}=n,s,a;O8&&!(n instanceof Ye)&&(n.$from.parent.inlineContent||(s=P8(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(a=P8(e,n.to))),e.docView.setSelection(r,i,e,t),O8&&(s&&I8(s),a&&I8(a)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Y7e(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const O8=xi||Qr&&xte<63;function P8(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(xi&&i&&i.contentEditable=="false")return lT(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return lT(i);if(s)return lT(s)}}function lT(e){return e.contentEditable="true",xi&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function I8(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Y7e(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!Ote(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function X7e(e){let t=e.domSelection(),n=document.createRange();if(!t)return;let r=e.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,Lr(r)+1):n.setStart(r,0),n.collapse(!0),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&Bi&&yc<=11&&(r.disabled=!0,r.disabled=!1)}function Pte(e,t){if(t instanceof Ge){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(D8(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else D8(e)}function D8(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function iM(e,t,n,r){return e.someProp("createSelectionBetween",i=>i(e,t,n))||Ye.between(t,n,r)}function M8(e){return e.editable&&!e.hasFocus()?!1:Ite(e)}function Ite(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function Q7e(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return Ed(t.node,t.offset,n.anchorNode,n.anchorOffset)}function iA(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&Ze.findFrom(s,t)}function Rl(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function R8(e,t,n){let r=e.state.selection;if(r instanceof Ye)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let a=e.state.doc.resolve(i.pos+s.nodeSize*(t<0?-1:1));return Rl(e,new Ye(r.$anchor,a))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=iA(e.state,t);return i&&i instanceof Ge?Rl(e,i):!1}else if(!(As&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,a;if(!s||s.isText)return!1;let o=t<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(a=e.docView.descAt(o))&&!a.contentDOM?Ge.isSelectable(s)?Rl(e,new Ge(t<0?e.state.doc.resolve(i.pos-s.nodeSize):i)):py?Rl(e,new Ye(e.state.doc.resolve(t<0?o:o+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Ge&&r.node.isInline)return Rl(e,new Ye(t>0?r.$to:r.$from));{let i=iA(e.state,t);return i?Rl(e,i):!1}}}function N1(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Um(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function nf(e,t){return t<0?J7e(e):Z7e(e)}function J7e(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,s,a=!1;for(ka&&n.nodeType==1&&r<N1(n)&&Um(n.childNodes[r],-1)&&(a=!0);;)if(r>0){if(n.nodeType!=1)break;{let o=n.childNodes[r-1];if(Um(o,-1))i=n,s=--r;else if(o.nodeType==3)n=o,r=n.nodeValue.length;else break}}else{if(Dte(n))break;{let o=n.previousSibling;for(;o&&Um(o,-1);)i=n.parentNode,s=Lr(o),o=o.previousSibling;if(o)n=o,r=N1(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}a?sA(e,n,r):i&&sA(e,i,s)}function Z7e(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i=N1(n),s,a;for(;;)if(r<i){if(n.nodeType!=1)break;let o=n.childNodes[r];if(Um(o,1))s=n,a=++r;else break}else{if(Dte(n))break;{let o=n.nextSibling;for(;o&&Um(o,1);)s=o.parentNode,a=Lr(o)+1,o=o.nextSibling;if(o)n=o,r=0,i=N1(n);else{if(n=n.parentNode,n==e.dom)break;r=i=0}}}s&&sA(e,s,a)}function Dte(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function eUe(e,t){for(;e&&t==e.childNodes.length&&!hy(e);)t=Lr(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function tUe(e,t){for(;e&&!t&&!hy(e);)t=Lr(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function sA(e,t,n){if(t.nodeType!=3){let s,a;(a=eUe(t,n))?(t=a,n=0):(s=tUe(t,n))&&(t=s,n=s.nodeValue.length)}let r=e.domSelection();if(!r)return;if(OS(r)){let s=document.createRange();s.setEnd(t,n),s.setStart(t,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&qo(e)},50)}function L8(e,t){let n=e.state.doc.resolve(t);if(!(Qr||S7e)&&n.parent.inlineContent){let i=e.coordsAtPos(t);if(t>n.start()){let s=e.coordsAtPos(t-1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(t<n.end()){let s=e.coordsAtPos(t+1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function F8(e,t,n){let r=e.state.selection;if(r instanceof Ye&&!r.empty||n.indexOf("s")>-1||As&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let a=iA(e.state,t);if(a&&a instanceof Ge)return Rl(e,a)}if(!i.parent.inlineContent){let a=t<0?i:s,o=r instanceof us?Ze.near(a,t):Ze.findFrom(a,t);return o?Rl(e,o):!1}return!1}function B8(e,t){if(!(e.state.selection instanceof Ye))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let a=e.state.tr;return t<0?a.delete(n.pos-s.nodeSize,n.pos):a.delete(n.pos,n.pos+s.nodeSize),e.dispatch(a),!0}return!1}function $8(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function nUe(e){if(!xi||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;$8(e,r,"true"),setTimeout(()=>$8(e,r,"false"),20)}return!1}function rUe(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function iUe(e,t){let n=t.keyCode,r=rUe(t);if(n==8||As&&n==72&&r=="c")return B8(e,-1)||nf(e,-1);if(n==46&&!t.shiftKey||As&&n==68&&r=="c")return B8(e,1)||nf(e,1);if(n==13||n==27)return!0;if(n==37||As&&n==66&&r=="c"){let i=n==37?L8(e,e.state.selection.from)=="ltr"?-1:1:-1;return R8(e,i,r)||nf(e,i)}else if(n==39||As&&n==70&&r=="c"){let i=n==39?L8(e,e.state.selection.from)=="ltr"?1:-1:1;return R8(e,i,r)||nf(e,i)}else{if(n==38||As&&n==80&&r=="c")return F8(e,-1,r)||nf(e,-1);if(n==40||As&&n==78&&r=="c")return nUe(e)||F8(e,1,r)||nf(e,1);if(r==(As?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function sM(e,t){e.someProp("transformCopied",p=>{t=p(t,e)});let n=[],{content:r,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let a=e.someProp("clipboardSerializer")||Rd.fromSchema(e.state.schema),o=$te(),l=o.createElement("div");l.appendChild(a.serializeFragment(r,{document:o}));let u=l.firstChild,d,f=0;for(;u&&u.nodeType==1&&(d=Bte[u.nodeName.toLowerCase()]);){for(let p=d.length-1;p>=0;p--){let m=o.createElement(d[p]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),f++}u=l.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${s}${f?` -${f}`:""} ${JSON.stringify(n)}`);let h=e.someProp("clipboardTextSerializer",p=>p(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:h,slice:t}}function Mte(e,t,n,r,i){let s=i.parent.type.spec.code,a,o;if(!n&&!t)return null;let l=t&&(r||s||!n);if(l){if(e.someProp("transformPastedText",h=>{t=h(t,s||r,e)}),s)return t?new Pe(me.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):Pe.empty;let f=e.someProp("clipboardTextParser",h=>h(t,i,r,e));if(f)o=f;else{let h=i.marks(),{schema:p}=e.state,m=Rd.fromSchema(p);a=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(g=>{let v=a.appendChild(document.createElement("p"));g&&v.appendChild(m.serializeNode(p.text(g,h)))})}}else e.someProp("transformPastedHTML",f=>{n=f(n,e)}),a=lUe(n),py&&cUe(a);let u=a&&a.querySelector("[data-pm-slice]"),d=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let f=+d[3];f>0;f--){let h=a.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;a=h}if(o||(o=(e.someProp("clipboardParser")||e.someProp("domParser")||gc.fromSchema(e.state.schema)).parseSlice(a,{preserveWhitespace:!!(l||d),context:i,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!sUe.test(h.parentNode.nodeName)?{ignore:!0}:null}})),d)o=uUe(U8(o,+d[1],+d[2]),d[4]);else if(o=Pe.maxOpen(aUe(o.content,i),!0),o.openStart||o.openEnd){let f=0,h=0;for(let p=o.content.firstChild;f<o.openStart&&!p.type.spec.isolating;f++,p=p.firstChild);for(let p=o.content.lastChild;h<o.openEnd&&!p.type.spec.isolating;h++,p=p.lastChild);o=U8(o,f,h)}return e.someProp("transformPasted",f=>{o=f(o,e)}),o}const sUe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function aUe(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),s,a=[];if(e.forEach(o=>{if(!a)return;let l=i.findWrapping(o.type),u;if(!l)return a=null;if(u=a.length&&s.length&&Lte(l,s,o,a[a.length-1],0))a[a.length-1]=u;else{a.length&&(a[a.length-1]=Fte(a[a.length-1],s.length));let d=Rte(o,l);a.push(d),i=i.matchType(d.type),s=l}}),a)return me.from(a)}return e}function Rte(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,me.from(e));return e}function Lte(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let s=Lte(e,t,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(me.from(Rte(n,e,i+1))))}}function Fte(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,Fte(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(me.empty,!0);return e.copy(n.append(r))}function aA(e,t,n,r,i,s){let a=t<0?e.firstChild:e.lastChild,o=a.content;return e.childCount>1&&(s=0),i<r-1&&(o=aA(o,t,n,r,i+1,s)),i>=n&&(o=t<0?a.contentMatchAt(0).fillBefore(o,s<=i).append(o):o.append(a.contentMatchAt(a.childCount).fillBefore(me.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(o))}function U8(e,t,n){return t<e.openStart&&(e=new Pe(aA(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new Pe(aA(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const Bte={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let z8=null;function $te(){return z8||(z8=document.implementation.createHTMLDocument("title"))}let cT=null;function oUe(e){let t=window.trustedTypes;return t?(cT||(cT=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),cT.createHTML(e)):e}function lUe(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=$te().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&Bte[r[1].toLowerCase()])&&(e=i.map(s=>"<"+s+">").join("")+e+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=oUe(e),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function cUe(e){let t=e.querySelectorAll(Qr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function uUe(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:i,openStart:s,openEnd:a}=e;for(let o=r.length-2;o>=0;o-=2){let l=n.nodes[r[o]];if(!l||l.hasRequiredAttrs())break;i=me.from(l.create(r[o+1],i)),s++,a++}return new Pe(i,s,a)}const bi={},wi={},dUe={touchstart:!0,touchmove:!0};class fUe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function hUe(e){for(let t in bi){let n=bi[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{mUe(e,r)&&!aM(e,r)&&(e.editable||!(r.type in wi))&&n(e,r)},dUe[t]?{passive:!0}:void 0)}xi&&e.dom.addEventListener("input",()=>null),oA(e)}function Ql(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function pUe(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function oA(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>aM(e,r))})}function aM(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function mUe(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function gUe(e,t){!aM(e,t)&&bi[t.type]&&(e.editable||!(t.type in wi))&&bi[t.type](e,t)}wi.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!zte(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(Bo&&Qr&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),Ph&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",i=>i(e,xu(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||iUe(e,n)?n.preventDefault():Ql(e,"key")};wi.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};wi.keypress=(e,t)=>{let n=t;if(zte(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||As&&n.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof Ye)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",a=>a(e,r.$from.pos,r.$to.pos,i,s))&&e.dispatch(s()),n.preventDefault()}};function IS(e){return{left:e.clientX,top:e.clientY}}function yUe(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function oM(e,t,n,r,i){if(r==-1)return!1;let s=e.state.doc.resolve(r);for(let a=s.depth+1;a>0;a--)if(e.someProp(t,o=>a>s.depth?o(e,n,s.nodeAfter,s.before(a),i,!0):o(e,n,s.node(a),s.before(a),i,!1)))return!0;return!1}function Zf(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function vUe(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&Ge.isSelectable(r)?(Zf(e,new Ge(n)),!0):!1}function xUe(e,t){if(t==-1)return!1;let n=e.state.selection,r,i;n instanceof Ge&&(r=n.node);let s=e.state.doc.resolve(t);for(let a=s.depth+1;a>0;a--){let o=a>s.depth?s.nodeAfter:s.node(a);if(Ge.isSelectable(o)){r&&n.$from.depth>0&&a>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(a);break}}return i!=null?(Zf(e,Ge.create(e.state.doc,i)),!0):!1}function bUe(e,t,n,r,i){return oM(e,"handleClickOn",t,n,r)||e.someProp("handleClick",s=>s(e,t,r))||(i?xUe(e,n):vUe(e,n))}function wUe(e,t,n,r){return oM(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",i=>i(e,t,r))}function EUe(e,t,n,r){return oM(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",i=>i(e,t,r))||SUe(e,n,r)}function SUe(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(Zf(e,Ye.create(r,0,r.content.size)),!0):!1;let i=r.resolve(t);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s),o=i.before(s);if(a.inlineContent)Zf(e,Ye.create(r,o+1,o+1+a.content.size));else if(Ge.isSelectable(a))Zf(e,Ge.create(r,o));else continue;return!0}}function lM(e){return T1(e)}const Ute=As?"metaKey":"ctrlKey";bi.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=lM(e),i=Date.now(),s="singleClick";i-e.input.lastClick.time<500&&yUe(n,e.input.lastClick)&&!n[Ute]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?s="doubleClick":e.input.lastClick.type=="doubleClick"&&(s="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let a=e.posAtCoords(IS(n));a&&(s=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new _Ue(e,a,n,!!r)):(s=="doubleClick"?wUe:EUe)(e,a.pos,a.inside,n)?n.preventDefault():Ql(e,"pointer"))};class _Ue{constructor(t,n,r,i){this.view=t,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[Ute],this.allowDefault=r.shiftKey;let s,a;if(n.inside>-1)s=t.state.doc.nodeAt(n.inside),a=n.inside;else{let d=t.state.doc.resolve(n.pos);s=d.parent,a=d.depth?d.before():0}const o=i?null:r.target,l=o?t.docView.nearestDesc(o,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:u}=t.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||u instanceof Ge&&u.from<=a&&u.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&ka&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ql(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>qo(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(IS(t))),this.updateAllowDefault(t),this.allowDefault||!n?Ql(this.view,"pointer"):bUe(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||xi&&this.mightDrag&&!this.mightDrag.node.isAtom||Qr&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Zf(this.view,Ze.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):Ql(this.view,"pointer")}move(t){this.updateAllowDefault(t),Ql(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}bi.touchstart=e=>{e.input.lastTouch=Date.now(),lM(e),Ql(e,"pointer")};bi.touchmove=e=>{e.input.lastTouch=Date.now(),Ql(e,"pointer")};bi.contextmenu=e=>lM(e);function zte(e,t){return e.composing?!0:xi&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const NUe=Bo?5e3:-1;wi.compositionstart=wi.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof Ye&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),T1(e,!0),e.markCursor=null;else if(T1(e,!t.selection.empty),ka&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let a=s<0?i.lastChild:i.childNodes[s-1];if(!a)break;if(a.nodeType==3){let o=e.domSelection();o&&o.collapse(a,a.nodeValue.length);break}else i=a,s=-1}}e.input.composing=!0}Hte(e,NUe)};wi.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,Hte(e,20))};function Hte(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>T1(e),t))}function Vte(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=CUe());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function TUe(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=v7e(t.focusNode,t.focusOffset),r=x7e(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=e.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let a=n.pmViewDesc;if(!(!a||!a.isText(n.nodeValue)))return r}}return n||r}function CUe(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function T1(e,t=!1){if(!(Bo&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),Vte(e),t||e.docView&&e.docView.dirty){let n=rM(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function kUe(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const t0=Bi&&yc<15||Ph&&_7e<604;bi.copy=wi.cut=(e,t)=>{let n=t,r=e.state.selection,i=n.type=="cut";if(r.empty)return;let s=t0?null:n.clipboardData,a=r.content(),{dom:o,text:l}=sM(e,a);s?(n.preventDefault(),s.clearData(),s.setData("text/html",o.innerHTML),s.setData("text/plain",l)):kUe(e,o),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function AUe(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function jUe(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?n0(e,r.value,null,i,t):n0(e,r.textContent,r.innerHTML,i,t)},50)}function n0(e,t,n,r,i){let s=Mte(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",l=>l(e,i,s||Pe.empty)))return!0;if(!s)return!1;let a=AUe(s),o=a?e.state.tr.replaceSelectionWith(a,r):e.state.tr.replaceSelection(s);return e.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Wte(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}wi.paste=(e,t)=>{let n=t;if(e.composing&&!Bo)return;let r=t0?null:n.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&n0(e,Wte(r),r.getData("text/html"),i,n)?n.preventDefault():jUe(e,n)};class qte{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const OUe=As?"altKey":"ctrlKey";function Kte(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[OUe]}bi.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=e.state.selection,s=i.empty?null:e.posAtCoords(IS(n)),a;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Ge?i.to-1:i.to))){if(r&&r.mightDrag)a=Ge.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=e.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=e.docView&&(a=Ge.create(e.state.doc,f.posBefore))}}let o=(a||e.state.selection).content(),{dom:l,text:u,slice:d}=sM(e,o);(!n.dataTransfer.files.length||!Qr||xte>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(t0?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",t0||n.dataTransfer.setData("text/plain",u),e.dragging=new qte(d,Kte(e,n),a)};bi.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};wi.dragover=wi.dragenter=(e,t)=>t.preventDefault();wi.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(IS(n));if(!i)return;let s=e.state.doc.resolve(i.pos),a=r&&r.slice;a?e.someProp("transformPasted",m=>{a=m(a,e)}):a=Mte(e,Wte(n.dataTransfer),t0?null:n.dataTransfer.getData("text/html"),!1,s);let o=!!(r&&Kte(e,n));if(e.someProp("handleDrop",m=>m(e,n,a||Pe.empty,o))){n.preventDefault();return}if(!a)return;n.preventDefault();let l=a?ute(e.state.doc,s.pos,a):s.pos;l==null&&(l=s.pos);let u=e.state.tr;if(o){let{node:m}=r;m?m.replace(u):u.deleteSelection()}let d=u.mapping.map(l),f=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,h=u.doc;if(f?u.replaceRangeWith(d,d,a.content.firstChild):u.replaceRange(d,d,a),u.doc.eq(h))return;let p=u.doc.resolve(d);if(f&&Ge.isSelectable(a.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(a.content.firstChild))u.setSelection(new Ge(p));else{let m=u.mapping.map(l);u.mapping.maps[u.mapping.maps.length-1].forEach((g,v,y,b)=>m=b),u.setSelection(iM(e,p,u.doc.resolve(m)))}e.focus(),e.dispatch(u.setMeta("uiEvent","drop"))};bi.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&qo(e)},20))};bi.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};bi.beforeinput=(e,t)=>{if(Qr&&Bo&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",s=>s(e,xu(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in wi)bi[e]=wi[e];function r0(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class C1{constructor(t,n){this.toDOM=t,this.spec=n||Qu,this.side=this.spec.side||0}map(t,n,r,i){let{pos:s,deleted:a}=t.mapResult(n.from+i,this.side<0?-1:1);return a?null:new ar(s-r,s-r,this)}valid(){return!0}eq(t){return this==t||t instanceof C1&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&r0(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class xc{constructor(t,n){this.attrs=t,this.spec=n||Qu}map(t,n,r,i){let s=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,a=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=a?null:new ar(s,a,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof xc&&r0(this.attrs,t.attrs)&&r0(this.spec,t.spec)}static is(t){return t.type instanceof xc}destroy(){}}class cM{constructor(t,n){this.attrs=t,this.spec=n||Qu}map(t,n,r,i){let s=t.mapResult(n.from+i,1);if(s.deleted)return null;let a=t.mapResult(n.to+i,-1);return a.deleted||a.pos<=s.pos?null:new ar(s.pos-r,a.pos-r,this)}valid(t,n){let{index:r,offset:i}=t.content.findIndex(n.from),s;return i==n.from&&!(s=t.child(r)).isText&&i+s.nodeSize==n.to}eq(t){return this==t||t instanceof cM&&r0(this.attrs,t.attrs)&&r0(this.spec,t.spec)}destroy(){}}class ar{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new ar(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new ar(t,t,new C1(n,r))}static inline(t,n,r,i){return new ar(t,n,new xc(r,i))}static node(t,n,r,i){return new ar(t,n,new cM(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof xc}get widget(){return this.type instanceof C1}}const uf=[],Qu={};class $t{constructor(t,n){this.local=t.length?t:uf,this.children=n.length?n:uf}static create(t,n){return n.length?k1(n,t,0,Qu):qr}find(t,n,r){let i=[];return this.findInner(t??0,n??1e9,i,0,r),i}findInner(t,n,r,i,s){for(let a=0;a<this.local.length;a++){let o=this.local[a];o.from<=n&&o.to>=t&&(!s||s(o.spec))&&r.push(o.copy(o.from+i,o.to+i))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<n&&this.children[a+1]>t){let o=this.children[a]+1;this.children[a+2].findInner(t-o,n-o,r,i+o,s)}}map(t,n,r){return this==qr||t.maps.length==0?this:this.mapInner(t,n,0,0,r||Qu)}mapInner(t,n,r,i,s){let a;for(let o=0;o<this.local.length;o++){let l=this.local[o].map(t,r,i);l&&l.type.valid(n,l)?(a||(a=[])).push(l):s.onRemove&&s.onRemove(this.local[o].spec)}return this.children.length?PUe(this.children,a||[],t,n,r,i,s):a?new $t(a.sort(Ju),uf):qr}add(t,n){return n.length?this==qr?$t.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let i,s=0;t.forEach((o,l)=>{let u=l+r,d;if(d=Yte(n,o,u)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(o,d,u+1):i.splice(s,0,l,l+o.nodeSize,k1(d,o,u+1,Qu)),s+=3}});let a=Gte(s?Xte(n):n,-r);for(let o=0;o<a.length;o++)a[o].type.valid(t,a[o])||a.splice(o--,1);return new $t(a.length?this.local.concat(a).sort(Ju):this.local,i||this.children)}remove(t){return t.length==0||this==qr?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let a,o=r[s]+n,l=r[s+1]+n;for(let d=0,f;d<t.length;d++)(f=t[d])&&f.from>o&&f.to<l&&(t[d]=null,(a||(a=[])).push(f));if(!a)continue;r==this.children&&(r=this.children.slice());let u=r[s+2].removeInner(a,o+1);u!=qr?r[s+2]=u:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,a;s<t.length;s++)if(a=t[s])for(let o=0;o<i.length;o++)i[o].eq(a,n)&&(i==this.local&&(i=this.local.slice()),i.splice(o--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new $t(i,r):qr}forChild(t,n){if(this==qr)return this;if(n.isLeaf)return $t.empty;let r,i;for(let o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(r=this.children[o+2]);break}let s=t+1,a=s+n.content.size;for(let o=0;o<this.local.length;o++){let l=this.local[o];if(l.from<a&&l.to>s&&l.type instanceof xc){let u=Math.max(s,l.from)-s,d=Math.min(a,l.to)-s;u<d&&(i||(i=[])).push(l.copy(u,d))}}if(i){let o=new $t(i.sort(Ju),uf);return r?new Hl([o,r]):o}return r||qr}eq(t){if(this==t)return!0;if(!(t instanceof $t)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return uM(this.localsInner(t))}localsInner(t){if(this==qr)return uf;if(t.inlineContent||!this.local.some(xc.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof xc||n.push(this.local[r]);return n}forEachSet(t){t(this)}}$t.empty=new $t([],[]);$t.removeOverlap=uM;const qr=$t.empty;class Hl{constructor(t){this.members=t}map(t,n){const r=this.members.map(i=>i.map(t,n,Qu));return Hl.from(r)}forChild(t,n){if(n.isLeaf)return $t.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(t,n);s!=qr&&(s instanceof Hl?r=r.concat(s.members):r.push(s))}return Hl.from(r)}eq(t){if(!(t instanceof Hl)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(t);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let a=0;a<s.length;a++)n.push(s[a])}}return n?uM(r?n:n.sort(Ju)):uf}static from(t){switch(t.length){case 0:return qr;case 1:return t[0];default:return new Hl(t.every(n=>n instanceof $t)?t:t.reduce((n,r)=>n.concat(r instanceof $t?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function PUe(e,t,n,r,i,s,a){let o=e.slice();for(let u=0,d=s;u<n.maps.length;u++){let f=0;n.maps[u].forEach((h,p,m,g)=>{let v=g-m-(p-h);for(let y=0;y<o.length;y+=3){let b=o[y+1];if(b<0||h>b+d-f)continue;let x=o[y]+d-f;p>=x?o[y+1]=h<=x?-2:-1:h>=d&&v&&(o[y]+=v,o[y+1]+=v)}f+=v}),d=n.maps[u].map(d,-1)}let l=!1;for(let u=0;u<o.length;u+=3)if(o[u+1]<0){if(o[u+1]==-2){l=!0,o[u+1]=-1;continue}let d=n.map(e[u]+s),f=d-i;if(f<0||f>=r.content.size){l=!0;continue}let h=n.map(e[u+1]+s,-1),p=h-i,{index:m,offset:g}=r.content.findIndex(f),v=r.maybeChild(m);if(v&&g==f&&g+v.nodeSize==p){let y=o[u+2].mapInner(n,v,d+1,e[u]+s+1,a);y!=qr?(o[u]=f,o[u+1]=p,o[u+2]=y):(o[u+1]=-2,l=!0)}else l=!0}if(l){let u=IUe(o,e,t,n,i,s,a),d=k1(u,r,0,a);t=d.local;for(let f=0;f<o.length;f+=3)o[f+1]<0&&(o.splice(f,3),f-=3);for(let f=0,h=0;f<d.children.length;f+=3){let p=d.children[f];for(;h<o.length&&o[h]<p;)h+=3;o.splice(h,0,d.children[f],d.children[f+1],d.children[f+2])}}return new $t(t.sort(Ju),o)}function Gte(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new ar(i.from+t,i.to+t,i.type))}return n}function IUe(e,t,n,r,i,s,a){function o(l,u){for(let d=0;d<l.local.length;d++){let f=l.local[d].map(r,i,u);f?n.push(f):a.onRemove&&a.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)o(l.children[d+2],l.children[d]+u+1)}for(let l=0;l<e.length;l+=3)e[l+1]==-1&&o(e[l+2],t[l]+s+1);return n}function Yte(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let s=0,a;s<e.length;s++)(a=e[s])&&a.from>n&&a.to<r&&((i||(i=[])).push(a),e[s]=null);return i}function Xte(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function k1(e,t,n,r){let i=[],s=!1;t.forEach((o,l)=>{let u=Yte(e,o,l+n);if(u){s=!0;let d=k1(u,o,n+l+1,r);d!=qr&&i.push(l,l+o.nodeSize,d)}});let a=Gte(s?Xte(e):e,-n).sort(Ju);for(let o=0;o<a.length;o++)a[o].type.valid(t,a[o])||(r.onRemove&&r.onRemove(a[o].spec),a.splice(o--,1));return a.length||i.length?new $t(a,i):qr}function Ju(e,t){return e.from-t.from||e.to-t.to}function uM(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let s=t[i];if(s.from==r.from){s.to!=r.to&&(t==e&&(t=e.slice()),t[i]=s.copy(s.from,r.to),H8(t,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,s.from),H8(t,i,r.copy(s.from,r.to)));break}}}return t}function H8(e,t,n){for(;t<e.length&&Ju(n,e[t])>0;)t++;e.splice(t,0,n)}function uT(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=qr&&t.push(r)}),e.cursorWrapper&&t.push($t.create(e.state.doc,[e.cursorWrapper.deco])),Hl.from(t)}const DUe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},MUe=Bi&&yc<=11;class RUe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class LUe{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new RUe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Bi&&yc<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),MUe&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,DUe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(M8(this.view)){if(this.suppressingSelectionUpdates)return qo(this.view);if(Bi&&yc<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&Ed(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let s=t.focusNode;s;s=Oh(s))n.add(s);for(let s=t.anchorNode;s;s=Oh(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&M8(t)&&!this.ignoreSelectionChange(r),s=-1,a=-1,o=!1,l=[];if(t.editable)for(let d=0;d<n.length;d++){let f=this.registerMutation(n[d],l);f&&(s=s<0?f.from:Math.min(f.from,s),a=a<0?f.to:Math.max(f.to,a),f.typeOver&&(o=!0))}if(ka&&l.length){let d=l.filter(f=>f.nodeName=="BR");if(d.length==2){let[f,h]=d;f.parentNode&&f.parentNode.parentNode==h.parentNode?h.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let h of d){let p=h.parentNode;p&&p.nodeName=="LI"&&(!f||$Ue(t,f)!=p)&&h.remove()}}}let u=null;s<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&OS(r)&&(u=rM(t))&&u.eq(Ze.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,qo(t),this.currentSelection.set(r),t.scrollToSelection()):(s>-1||i)&&(s>-1&&(t.docView.markDirty(s,a),FUe(t)),this.handleDOMChange(s,a,o,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||qo(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let d=0;d<t.addedNodes.length;d++){let f=t.addedNodes[d];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,s=t.nextSibling;if(Bi&&yc<=11&&t.addedNodes.length)for(let d=0;d<t.addedNodes.length;d++){let{previousSibling:f,nextSibling:h}=t.addedNodes[d];(!f||Array.prototype.indexOf.call(t.addedNodes,f)<0)&&(i=f),(!h||Array.prototype.indexOf.call(t.addedNodes,h)<0)&&(s=h)}let a=i&&i.parentNode==t.target?Lr(i)+1:0,o=r.localPosFromDOM(t.target,a,-1),l=s&&s.parentNode==t.target?Lr(s):t.target.childNodes.length,u=r.localPosFromDOM(t.target,l,1);return{from:o,to:u}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let V8=new WeakMap,W8=!1;function FUe(e){if(!V8.has(e)&&(V8.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=ka,W8)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),W8=!0}}function q8(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,s=t.endOffset,a=e.domAtPos(e.state.selection.anchor);return Ed(a.node,a.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function BUe(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return q8(e,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?q8(e,n):null}function $Ue(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function UUe(e,t,n){let{node:r,fromOffset:i,toOffset:s,from:a,to:o}=e.docView.parseRange(t,n),l=e.domSelectionRange(),u,d=l.anchorNode;if(d&&e.dom.contains(d.nodeType==1?d:d.parentNode)&&(u=[{node:d,offset:l.anchorOffset}],OS(l)||u.push({node:l.focusNode,offset:l.focusOffset})),Qr&&e.input.lastKeyCode===8)for(let v=s;v>i;v--){let y=r.childNodes[v-1],b=y.pmViewDesc;if(y.nodeName=="BR"&&!b){s=v;break}if(!b||b.size)break}let f=e.state.doc,h=e.someProp("domParser")||gc.fromSchema(e.state.schema),p=f.resolve(a),m=null,g=h.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:zUe,context:p});if(u&&u[0].pos!=null){let v=u[0].pos,y=u[1]&&u[1].pos;y==null&&(y=v),m={anchor:v+a,head:y+a}}return{doc:g,sel:m,from:a,to:o}}function zUe(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(xi&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||xi&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const HUe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function VUe(e,t,n,r,i){let s=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let C=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,k=rM(e,C);if(k&&!e.state.selection.eq(k)){if(Qr&&Bo&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",j=>j(e,xu(13,"Enter"))))return;let A=e.state.tr.setSelection(k);C=="pointer"?A.setMeta("pointer",!0):C=="key"&&A.scrollIntoView(),s&&A.setMeta("composition",s),e.dispatch(A)}return}let a=e.state.doc.resolve(t),o=a.sharedDepth(n);t=a.before(o+1),n=e.state.doc.resolve(n).after(o+1);let l=e.state.selection,u=UUe(e,t,n),d=e.state.doc,f=d.slice(u.from,u.to),h,p;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(h=e.state.selection.to,p="end"):(h=e.state.selection.from,p="start"),e.input.lastKeyCode=null;let m=KUe(f.content,u.doc.content,u.from,h,p);if(m&&e.input.domChangeCount++,(Ph&&e.input.lastIOSEnter>Date.now()-225||Bo)&&i.some(C=>C.nodeType==1&&!HUe.test(C.nodeName))&&(!m||m.endA>=m.endB)&&e.someProp("handleKeyDown",C=>C(e,xu(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!m)if(r&&l instanceof Ye&&!l.empty&&l.$head.sameParent(l.$anchor)&&!e.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(u.sel){let C=K8(e,e.state.doc,u.sel);if(C&&!C.eq(e.state.selection)){let k=e.state.tr.setSelection(C);s&&k.setMeta("composition",s),e.dispatch(k)}}return}e.state.selection.from<e.state.selection.to&&m.start==m.endB&&e.state.selection instanceof Ye&&(m.start>e.state.selection.from&&m.start<=e.state.selection.from+2&&e.state.selection.from>=u.from?m.start=e.state.selection.from:m.endA<e.state.selection.to&&m.endA>=e.state.selection.to-2&&e.state.selection.to<=u.to&&(m.endB+=e.state.selection.to-m.endA,m.endA=e.state.selection.to)),Bi&&yc<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>u.from&&u.doc.textBetween(m.start-u.from-1,m.start-u.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=u.doc.resolveNoCache(m.start-u.from),v=u.doc.resolveNoCache(m.endB-u.from),y=d.resolve(m.start),b=g.sameParent(v)&&g.parent.inlineContent&&y.end()>=m.endA,x;if((Ph&&e.input.lastIOSEnter>Date.now()-225&&(!b||i.some(C=>C.nodeName=="DIV"||C.nodeName=="P"))||!b&&g.pos<u.doc.content.size&&(!g.sameParent(v)||!g.parent.inlineContent)&&!/\S/.test(u.doc.textBetween(g.pos,v.pos,"",""))&&(x=Ze.findFrom(u.doc.resolve(g.pos+1),1,!0))&&x.head>g.pos)&&e.someProp("handleKeyDown",C=>C(e,xu(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>m.start&&qUe(d,m.start,m.endA,g,v)&&e.someProp("handleKeyDown",C=>C(e,xu(8,"Backspace")))){Bo&&Qr&&e.domObserver.suppressSelectionUpdates();return}Qr&&m.endB==m.start&&(e.input.lastChromeDelete=Date.now()),Bo&&!b&&g.start()!=v.start()&&v.parentOffset==0&&g.depth==v.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==m.endA&&(m.endB-=2,v=u.doc.resolveNoCache(m.endB-u.from),setTimeout(()=>{e.someProp("handleKeyDown",function(C){return C(e,xu(13,"Enter"))})},20));let S=m.start,E=m.endA,_=C=>{let k=C||e.state.tr.replace(S,E,u.doc.slice(m.start-u.from,m.endB-u.from));if(u.sel){let A=K8(e,k.doc,u.sel);A&&!(Qr&&e.composing&&A.empty&&(m.start!=m.endB||e.input.lastChromeDelete<Date.now()-100)&&(A.head==S||A.head==k.mapping.map(E)-1)||Bi&&A.empty&&A.head==S)&&k.setSelection(A)}return s&&k.setMeta("composition",s),k.scrollIntoView()},T;if(b){if(g.pos==v.pos){Bi&&yc<=11&&g.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>qo(e),20));let C=_(e.state.tr.delete(S,E)),k=d.resolve(m.start).marksAcross(d.resolve(m.endA));k&&C.ensureMarks(k),e.dispatch(C)}else if(m.endA==m.endB&&(T=WUe(g.parent.content.cut(g.parentOffset,v.parentOffset),y.parent.content.cut(y.parentOffset,m.endA-y.start())))){let C=_(e.state.tr);T.type=="add"?C.addMark(S,E,T.mark):C.removeMark(S,E,T.mark),e.dispatch(C)}else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let C=g.parent.textBetween(g.parentOffset,v.parentOffset),k=()=>_(e.state.tr.insertText(C,S,E));e.someProp("handleTextInput",A=>A(e,S,E,C,k))||e.dispatch(k())}}else e.dispatch(_())}function K8(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:iM(e,t.resolve(n.anchor),t.resolve(n.head))}function WUe(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,s=r,a,o,l;for(let d=0;d<r.length;d++)i=r[d].removeFromSet(i);for(let d=0;d<n.length;d++)s=n[d].removeFromSet(s);if(i.length==1&&s.length==0)o=i[0],a="add",l=d=>d.mark(o.addToSet(d.marks));else if(i.length==0&&s.length==1)o=s[0],a="remove",l=d=>d.mark(o.removeFromSet(d.marks));else return null;let u=[];for(let d=0;d<t.childCount;d++)u.push(l(t.child(d)));if(me.from(u).eq(e))return{mark:o,type:a}}function qUe(e,t,n,r,i){if(n-t<=i.pos-r.pos||dT(r,!0,!1)<i.pos)return!1;let s=e.resolve(t);if(!r.parent.isTextblock){let o=s.nodeAfter;return o!=null&&n==t+o.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let a=e.resolve(dT(s,!0,!0));return!a.parent.isTextblock||a.pos>n||dT(a,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function dT(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let s=e.node(r).maybeChild(e.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function KUe(e,t,n,r,i){let s=e.findDiffStart(t,n);if(s==null)return null;let{a,b:o}=e.findDiffEnd(t,n+e.size,n+t.size);if(i=="end"){let l=Math.max(0,s-Math.min(a,o));r-=a+l-s}if(a<s&&e.size<t.size){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&G8(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}else if(o<s){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&G8(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}return{start:s,endA:a,endB:o}}function G8(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class Qte{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new fUe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Z8),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Q8(this),X8(this),this.nodeViews=J8(this),this.docView=A8(this.state.doc,Y8(this),uT(this),this.dom,this),this.domObserver=new LUe(this,(r,i,s,a)=>VUe(this,r,i,s,a)),this.domObserver.start(),hUe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&oA(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(Z8),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let i=this.state,s=!1,a=!1;t.storedMarks&&this.composing&&(Vte(this),a=!0),this.state=t;let o=i.plugins!=t.plugins||this._props.plugins!=n.plugins;if(o||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let p=J8(this);YUe(p,this.nodeViews)&&(this.nodeViews=p,s=!0)}(o||n.handleDOMEvents!=this._props.handleDOMEvents)&&oA(this),this.editable=Q8(this),X8(this);let l=uT(this),u=Y8(this),d=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=s||!this.docView.matchesNode(t.doc,u,l);(f||!t.selection.eq(i.selection))&&(a=!0);let h=d=="preserve"&&a&&this.dom.style.overflowAnchor==null&&C7e(this);if(a){this.domObserver.stop();let p=f&&(Bi||Qr)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&GUe(i.selection,t.selection);if(f){let m=Qr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=TUe(this)),(s||!this.docView.update(t.doc,u,l,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=A8(t.doc,u,l,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Q7e(this))?qo(this,p):(Pte(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():h&&k7e(h)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Ge){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&S8(this,n.getBoundingClientRect(),t)}else S8(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new qte(t.slice,t.move,i<0?void 0:Ge.create(this.state.doc,i))}someProp(t,n){let r=this._props&&this._props[t],i;if(r!=null&&(i=n?n(r):r))return i;for(let a=0;a<this.directPlugins.length;a++){let o=this.directPlugins[a].props[t];if(o!=null&&(i=n?n(o):o))return i}let s=this.state.plugins;if(s)for(let a=0;a<s.length;a++){let o=s[a].props[t];if(o!=null&&(i=n?n(o):o))return i}}hasFocus(){if(Bi){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&A7e(this.dom),qo(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return D7e(this,t)}coordsAtPos(t,n=1){return _te(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let i=this.docView.posFromDOM(t,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,n){return B7e(this,n||this.state,t)}pasteHTML(t,n){return n0(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return n0(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return sM(this,t)}destroy(){this.docView&&(pUe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],uT(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,g7e())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return gUe(this,t)}domSelectionRange(){let t=this.domSelection();return t?xi&&this.root.nodeType===11&&w7e(this.dom.ownerDocument)==this.dom&&BUe(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Qte.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function Y8(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[ar.node(0,e.state.doc.content.size,t)]}function X8(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:ar.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function Q8(e){return!e.someProp("editable",t=>t(e.state)===!1)}function GUe(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function J8(e){let t=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function YUe(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r}function Z8(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var jc={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},A1={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},XUe=typeof navigator<"u"&&/Mac/.test(navigator.platform),QUe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Fr=0;Fr<10;Fr++)jc[48+Fr]=jc[96+Fr]=String(Fr);for(var Fr=1;Fr<=24;Fr++)jc[Fr+111]="F"+Fr;for(var Fr=65;Fr<=90;Fr++)jc[Fr]=String.fromCharCode(Fr+32),A1[Fr]=String.fromCharCode(Fr);for(var fT in jc)A1.hasOwnProperty(fT)||(A1[fT]=jc[fT]);function JUe(e){var t=XUe&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||QUe&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?A1:jc)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const ZUe=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),eze=typeof navigator<"u"&&/Win/.test(navigator.platform);function tze(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,i,s,a;for(let o=0;o<t.length-1;o++){let l=t[o];if(/^(cmd|meta|m)$/i.test(l))a=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))ZUe?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),a&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function nze(e){let t=Object.create(null);for(let n in e)t[tze(n)]=e[n];return t}function hT(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function rze(e){return new cn({props:{handleKeyDown:dM(e)}})}function dM(e){let t=nze(e);return function(n,r){let i=JUe(r),s,a=t[hT(i,r)];if(a&&a(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let o=t[hT(i,r,!1)];if(o&&o(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(eze&&r.ctrlKey&&r.altKey)&&(s=jc[r.keyCode])&&s!=i){let o=t[hT(s,r)];if(o&&o(n.state,n.dispatch,n))return!0}}return!1}}const fM=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function Jte(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const Zte=(e,t,n)=>{let r=Jte(e,n);if(!r)return!1;let i=hM(r);if(!i){let a=r.blockRange(),o=a&&pp(a);return o==null?!1:(t&&t(e.tr.lift(a,o).scrollIntoView()),!0)}let s=i.nodeBefore;if(lne(e,i,t,-1))return!0;if(r.parent.content.size==0&&(Ih(s,"end")||Ge.isSelectable(s)))for(let a=r.depth;;a--){let o=AS(e.doc,r.before(a),r.after(a),Pe.empty);if(o&&o.slice.size<o.to-o.from){if(t){let l=e.tr.step(o);l.setSelection(Ih(s,"end")?Ze.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):Ge.create(l.doc,i.pos-s.nodeSize)),t(l.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},ize=(e,t,n)=>{let r=Jte(e,n);if(!r)return!1;let i=hM(r);return i?ene(e,i,t):!1},sze=(e,t,n)=>{let r=nne(e,n);if(!r)return!1;let i=pM(r);return i?ene(e,i,t):!1};function ene(e,t,n){let r=t.nodeBefore,i=r,s=t.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let a=t.nodeAfter,o=a,l=t.pos+1;for(;!o.isTextblock;l++){if(o.type.spec.isolating)return!1;let d=o.firstChild;if(!d)return!1;o=d}let u=AS(e.doc,s,l,Pe.empty);if(!u||u.from!=s||u instanceof mr&&u.slice.size>=l-s)return!1;if(n){let d=e.tr.step(u);d.setSelection(Ye.create(d.doc,s)),n(d.scrollIntoView())}return!0}function Ih(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const tne=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=hM(r)}let a=s&&s.nodeBefore;return!a||!Ge.isSelectable(a)?!1:(t&&t(e.tr.setSelection(Ge.create(e.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function hM(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function nne(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const rne=(e,t,n)=>{let r=nne(e,n);if(!r)return!1;let i=pM(r);if(!i)return!1;let s=i.nodeAfter;if(lne(e,i,t,1))return!0;if(r.parent.content.size==0&&(Ih(s,"start")||Ge.isSelectable(s))){let a=AS(e.doc,r.before(),r.after(),Pe.empty);if(a&&a.slice.size<a.to-a.from){if(t){let o=e.tr.step(a);o.setSelection(Ih(s,"start")?Ze.findFrom(o.doc.resolve(o.mapping.map(i.pos)),1):Ge.create(o.doc,o.mapping.map(i.pos))),t(o.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},ine=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=pM(r)}let a=s&&s.nodeAfter;return!a||!Ge.isSelectable(a)?!1:(t&&t(e.tr.setSelection(Ge.create(e.doc,s.pos)).scrollIntoView()),!0)};function pM(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const aze=(e,t)=>{let n=e.selection,r=n instanceof Ge,i;if(r){if(n.node.isTextblock||!Qc(e.doc,n.from))return!1;i=n.from}else if(i=kS(e.doc,n.from,-1),i==null)return!1;if(t){let s=e.tr.join(i);r&&s.setSelection(Ge.create(s.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},oze=(e,t)=>{let n=e.selection,r;if(n instanceof Ge){if(n.node.isTextblock||!Qc(e.doc,n.to))return!1;r=n.to}else if(r=kS(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},lze=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),s=i&&pp(i);return s==null?!1:(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)},sne=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function mM(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const cze=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),a=mM(i.contentMatchAt(s));if(!a||!i.canReplaceWith(s,s,a))return!1;if(t){let o=n.after(),l=e.tr.replaceWith(o,o,a.createAndFill());l.setSelection(Ze.near(l.doc.resolve(o),1)),t(l.scrollIntoView())}return!0},ane=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof us||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=mM(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,o=e.tr.insert(a,s.createAndFill());o.setSelection(Ye.create(o.doc,a+1)),t(o.scrollIntoView())}return!0},one=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Wo(e.doc,s))return t&&t(e.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&pp(r);return i==null?!1:(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)};function uze(e){return(t,n)=>{let{$from:r,$to:i}=t.selection;if(t.selection instanceof Ge&&t.selection.node.isBlock)return!r.parentOffset||!Wo(t.doc,r.pos)?!1:(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],a,o,l=!1,u=!1;for(let p=r.depth;;p--)if(r.node(p).isBlock){l=r.end(p)==r.pos+(r.depth-p),u=r.start(p)==r.pos-(r.depth-p),o=mM(r.node(p-1).contentMatchAt(r.indexAfter(p-1))),s.unshift(l&&o?{type:o}:null),a=p;break}else{if(p==1)return!1;s.unshift(null)}let d=t.tr;(t.selection instanceof Ye||t.selection instanceof us)&&d.deleteSelection();let f=d.mapping.map(r.pos),h=Wo(d.doc,f,s.length,s);if(h||(s[0]=o?{type:o}:null,h=Wo(d.doc,f,s.length,s)),!h)return!1;if(d.split(f,s.length,s),!l&&u&&r.node(a).type!=o){let p=d.mapping.map(r.before(a)),m=d.doc.resolve(p);o&&r.node(a-1).canReplaceWith(m.index(),m.index()+1,o)&&d.setNodeMarkup(d.mapping.map(r.before(a)),o)}return n&&n(d.scrollIntoView()),!0}}const dze=uze(),fze=(e,t)=>{let{$from:n,to:r}=e.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),t&&t(e.tr.setSelection(Ge.create(e.doc,i))),!0)};function hze(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,s=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(i.isTextblock||Qc(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function lne(e,t,n,r){let i=t.nodeBefore,s=t.nodeAfter,a,o,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&hze(e,t,n))return!0;let u=!l&&t.parent.canReplace(t.index(),t.index()+1);if(u&&(a=(o=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&o.matchType(a[0]||s.type).validEnd){if(n){let p=t.pos+s.nodeSize,m=me.empty;for(let y=a.length-1;y>=0;y--)m=me.from(a[y].create(null,m));m=me.from(i.copy(m));let g=e.tr.step(new Sr(t.pos-1,p,t.pos,p,new Pe(m,1,0),a.length,!0)),v=g.doc.resolve(p+2*a.length);v.nodeAfter&&v.nodeAfter.type==i.type&&Qc(g.doc,v.pos)&&g.join(v.pos),n(g.scrollIntoView())}return!0}let d=s.type.spec.isolating||r>0&&l?null:Ze.findFrom(t,1),f=d&&d.$from.blockRange(d.$to),h=f&&pp(f);if(h!=null&&h>=t.depth)return n&&n(e.tr.lift(f,h).scrollIntoView()),!0;if(u&&Ih(s,"start",!0)&&Ih(i,"end")){let p=i,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let g=s,v=1;for(;!g.isTextblock;g=g.firstChild)v++;if(p.canReplace(p.childCount,p.childCount,g.content)){if(n){let y=me.empty;for(let x=m.length-1;x>=0;x--)y=me.from(m[x].copy(y));let b=e.tr.step(new Sr(t.pos-m.length,t.pos+s.nodeSize,t.pos+v,t.pos+s.nodeSize-v,new Pe(y,m.length,0),0,!0));n(b.scrollIntoView())}return!0}}return!1}function cne(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(t.tr.setSelection(Ye.create(t.doc,e<0?i.start(s):i.end(s)))),!0):!1}}const pze=cne(-1),mze=cne(1);function gze(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,a=i.blockRange(s),o=a&&ZD(a,e,t);return o?(r&&r(n.tr.wrap(a,o).scrollIntoView()),!0):!1}}function e$(e,t=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:a},$to:{pos:o}}=n.selection.ranges[s];n.doc.nodesBetween(a,o,(l,u)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)i=!0;else{let d=n.doc.resolve(u),f=d.index();i=d.parent.canReplaceWith(f,f+1,e)}})}if(!i)return!1;if(r){let s=n.tr;for(let a=0;a<n.selection.ranges.length;a++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[a];s.setBlockType(o,l,e,t)}r(s.scrollIntoView())}return!0}}function gM(...e){return function(t,n,r){for(let i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}gM(fM,Zte,tne);gM(fM,rne,ine);gM(sne,ane,one,dze);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function yze(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,a=i.blockRange(s);if(!a)return!1;let o=r?n.tr:null;return vze(o,a,e,t)?(r&&r(o.scrollIntoView()),!0):!1}}function vze(e,t,n,r=null){let i=!1,s=t,a=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let l=a.resolve(t.start-2);s=new E1(l,l,t.depth),t.endIndex<t.parent.childCount&&(t=new E1(t.$from,a.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let o=ZD(s,n,r,t);return o?(e&&xze(e,t,o,i,n),!0):!1}function xze(e,t,n,r,i){let s=me.empty;for(let d=n.length-1;d>=0;d--)s=me.from(n[d].type.create(n[d].attrs,s));e.step(new Sr(t.start-(r?2:0),t.end,t.start,t.end,new Pe(s,0,0),n.length,!0));let a=0;for(let d=0;d<n.length;d++)n[d].type==i&&(a=d+1);let o=n.length-a,l=t.start+n.length-(r?2:0),u=t.parent;for(let d=t.startIndex,f=t.endIndex,h=!0;d<f;d++,h=!1)!h&&Wo(e.doc,l,o)&&(e.split(l,o),l+=2*o),l+=u.child(d).nodeSize;return e}function bze(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,a=>a.childCount>0&&a.firstChild.type==e);return s?n?r.node(s.depth-1).type==e?wze(t,n,e,s):Eze(t,n,s):!0:!1}}function wze(e,t,n,r){let i=e.tr,s=r.end,a=r.$to.end(r.depth);s<a&&(i.step(new Sr(s-1,a,s,a,new Pe(me.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new E1(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth));const o=pp(r);if(o==null)return!1;i.lift(r,o);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return Qc(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),t(i.scrollIntoView()),!0}function Eze(e,t,n){let r=e.tr,i=n.parent;for(let p=n.end,m=n.endIndex-1,g=n.startIndex;m>g;m--)p-=i.child(m).nodeSize,r.delete(p-1,p+1);let s=r.doc.resolve(n.start),a=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let o=n.startIndex==0,l=n.endIndex==i.childCount,u=s.node(-1),d=s.index(-1);if(!u.canReplace(d+(o?0:1),d+1,a.content.append(l?me.empty:me.from(i))))return!1;let f=s.pos,h=f+a.nodeSize;return r.step(new Sr(f-(o?1:0),h+(l?1:0),f+1,h-1,new Pe((o?me.empty:me.from(i.copy(me.empty))).append(l?me.empty:me.from(i.copy(me.empty))),o?0:1,l?0:1),o?0:1)),t(r.scrollIntoView()),!0}function Sze(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==e);if(!s)return!1;let a=s.startIndex;if(a==0)return!1;let o=s.parent,l=o.child(a-1);if(l.type!=e)return!1;if(n){let u=l.lastChild&&l.lastChild.type==o.type,d=me.from(u?e.create():null),f=new Pe(me.from(e.create(null,me.from(o.type.create(null,d)))),u?3:1,0),h=s.start,p=s.end;n(t.tr.step(new Sr(h-(u?3:1),p,h,p,f,1,!0)).scrollIntoView())}return!0}}var _ze=Object.defineProperty,une=(e,t)=>{for(var n in t)_ze(e,n,{get:t[n],enumerable:!0})};function DS(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var MS=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([a,o])=>[a,(...u)=>{const d=o(...u)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,a=[],o=!!e,l=e||i.tr,u=()=>(!o&&t&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(n).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(l,t),v=h(...m)(g);return a.push(v),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(t).map(([o,l])=>[o,(...u)=>l(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,a={tr:e,editor:r,view:s,state:DS({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([o,l])=>[o,(...u)=>l(...u)(a)]))}};return a}},Nze=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}};function dne(e,t){const n=new eM(e);return t.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}var fne=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&fne(r)}return e};function Cv(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return fne(n)}function i0(e,t,n){if(e instanceof mc||e instanceof me)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,i=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return me.fromArray(e.map(o=>t.nodeFromJSON(o)));const a=t.nodeFromJSON(e);return n.errorOnInvalidContent&&a.check(),a}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",s),i0("",t,n)}if(i){if(n.errorOnInvalidContent){let a=!1,o="";const l=new Zee({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(a=!0,o=typeof u=="string"?u:u.outerHTML,null)}]}})});if(n.slice?gc.fromSchema(l).parseSlice(Cv(e),n.parseOptions):gc.fromSchema(l).parse(Cv(e),n.parseOptions),n.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${o}`)})}const s=gc.fromSchema(t);return n.slice?s.parseSlice(Cv(e),n.parseOptions).content:s.parse(Cv(e),n.parseOptions)}return i0("",t,n)}function lA(e,t,n={},r={}){return i0(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function Tze(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function cA(e,t){const n=[];return e.descendants((r,i)=>{t(r)&&n.push({node:r,pos:i})}),n}function Cze(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function hne(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function RS(e){return t=>hne(t.$from,e)}function qe(e,t,n){return e.config[t]===void 0&&e.parent?qe(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?qe(e.parent,t,n):null}):e.config[t]}function yM(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=qe(t,"addExtensions",n);return r?[t,...yM(r())]:t}).flat(10)}function vM(e,t){const n=Rd.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function pne(e){return typeof e=="function"}function Ct(e,t=void 0,...n){return pne(e)?t?e.bind(t)(...n):e(...n):e}function kze(e={}){return Object.keys(e).length===0&&e.constructor===Object}function s0(e){const t=e.filter(i=>i.type==="extension"),n=e.filter(i=>i.type==="node"),r=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function mne(e){const t=[],{nodeExtensions:n,markExtensions:r}=s0(e),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(a=>{const o={name:a.name,options:a.options,storage:a.storage,extensions:i},l=qe(a,"addGlobalAttributes",o);if(!l)return;l().forEach(d=>{d.types.forEach(f=>{Object.entries(d.attributes).forEach(([h,p])=>{t.push({type:f,name:h,attribute:{...s,...p}})})})})}),i.forEach(a=>{const o={name:a.name,options:a.options,storage:a.storage},l=qe(a,"addAttributes",o);if(!l)return;const u=l();Object.entries(u).forEach(([d,f])=>{const h={...s,...f};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,t.push({type:a.name,name:d,attribute:h})})}),t}function tn(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const o=s?String(s).split(" "):[],l=r[i]?r[i].split(" "):[],u=o.filter(d=>!l.includes(d));r[i]=[...l,...u].join(" ")}else if(i==="style"){const o=s?s.split(";").map(d=>d.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(d=>d.trim()).filter(Boolean):[],u=new Map;l.forEach(d=>{const[f,h]=d.split(":").map(p=>p.trim());u.set(f,h)}),o.forEach(d=>{const[f,h]=d.split(":").map(p=>p.trim());u.set(f,h)}),r[i]=Array.from(u.entries()).map(([d,f])=>`${d}: ${f}`).join("; ")}else r[i]=s}),r},{})}function j1(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>tn(n,r),{})}function Aze(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function t$(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const i=t.reduce((s,a)=>{const o=a.attribute.parseHTML?a.attribute.parseHTML(n):Aze(n.getAttribute(a.name));return o==null?s:{...s,[a.name]:o}},{});return{...r,...i}}}}function n$(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&kze(n)?!1:n!=null))}function jze(e,t){var n;const r=mne(e),{nodeExtensions:i,markExtensions:s}=s0(e),a=(n=i.find(u=>qe(u,"topNode")))==null?void 0:n.name,o=Object.fromEntries(i.map(u=>{const d=r.filter(y=>y.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:t},h=e.reduce((y,b)=>{const x=qe(b,"extendNodeSchema",f);return{...y,...x?x(u):{}}},{}),p=n$({...h,content:Ct(qe(u,"content",f)),marks:Ct(qe(u,"marks",f)),group:Ct(qe(u,"group",f)),inline:Ct(qe(u,"inline",f)),atom:Ct(qe(u,"atom",f)),selectable:Ct(qe(u,"selectable",f)),draggable:Ct(qe(u,"draggable",f)),code:Ct(qe(u,"code",f)),whitespace:Ct(qe(u,"whitespace",f)),linebreakReplacement:Ct(qe(u,"linebreakReplacement",f)),defining:Ct(qe(u,"defining",f)),isolating:Ct(qe(u,"isolating",f)),attrs:Object.fromEntries(d.map(y=>{var b,x;return[y.name,{default:(b=y==null?void 0:y.attribute)==null?void 0:b.default,validate:(x=y==null?void 0:y.attribute)==null?void 0:x.validate}]}))}),m=Ct(qe(u,"parseHTML",f));m&&(p.parseDOM=m.map(y=>t$(y,d)));const g=qe(u,"renderHTML",f);g&&(p.toDOM=y=>g({node:y,HTMLAttributes:j1(y,d)}));const v=qe(u,"renderText",f);return v&&(p.toText=v),[u.name,p]})),l=Object.fromEntries(s.map(u=>{const d=r.filter(v=>v.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:t},h=e.reduce((v,y)=>{const b=qe(y,"extendMarkSchema",f);return{...v,...b?b(u):{}}},{}),p=n$({...h,inclusive:Ct(qe(u,"inclusive",f)),excludes:Ct(qe(u,"excludes",f)),group:Ct(qe(u,"group",f)),spanning:Ct(qe(u,"spanning",f)),code:Ct(qe(u,"code",f)),attrs:Object.fromEntries(d.map(v=>{var y,b;return[v.name,{default:(y=v==null?void 0:v.attribute)==null?void 0:y.default,validate:(b=v==null?void 0:v.attribute)==null?void 0:b.validate}]}))}),m=Ct(qe(u,"parseHTML",f));m&&(p.parseDOM=m.map(v=>t$(v,d)));const g=qe(u,"renderHTML",f);return g&&(p.toDOM=v=>g({mark:v,HTMLAttributes:j1(v,d)})),[u.name,p]}));return new Zee({topNode:a,nodes:o,marks:l})}function Oze(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function xM(e){return e.sort((n,r)=>{const i=qe(n,"priority")||100,s=qe(r,"priority")||100;return i>s?-1:i<s?1:0})}function gne(e){const t=xM(yM(e)),n=Oze(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function yne(e,t,n){const{from:r,to:i}=t,{blockSeparator:s=`

`,textSerializers:a={}}=n||{};let o="";return e.nodesBetween(r,i,(l,u,d,f)=>{var h;l.isBlock&&u>r&&(o+=s);const p=a==null?void 0:a[l.type.name];if(p)return d&&(o+=p({node:l,pos:u,parent:d,index:f,range:t})),!1;l.isText&&(o+=(h=l==null?void 0:l.text)==null?void 0:h.slice(Math.max(r,u)-u,i-u))}),o}function Pze(e,t){const n={from:0,to:e.content.size};return yne(e,n,t)}function vne(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function yl(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function xne(e,t){const n=yl(t,e.schema),{from:r,to:i,empty:s}=e.selection,a=[];s?(e.storedMarks&&a.push(...e.storedMarks),a.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,l=>{a.push(...l.marks)});const o=a.find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function Qn(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function Ize(e,t){const n=Qn(t,e.schema),{from:r,to:i}=e.selection,s=[];e.doc.nodesBetween(r,i,o=>{s.push(o)});const a=s.reverse().find(o=>o.type.name===n.name);return a?{...a.attrs}:{}}function LS(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function bne(e,t){const n=LS(typeof t=="string"?t:t.name,e.schema);return n==="node"?Ize(e,t):n==="mark"?xne(e,t):{}}function Dze(e,t=JSON.stringify){const n={};return e.filter(r=>{const i=t(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function Mze(e){const t=Dze(e);return t.length===1?t:t.filter((n,r)=>!t.filter((s,a)=>a!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function wne(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((i,s)=>{const a=[];if(i.ranges.length)i.forEach((o,l)=>{a.push({from:o,to:l})});else{const{from:o,to:l}=n[s];if(o===void 0||l===void 0)return;a.push({from:o,to:l})}a.forEach(({from:o,to:l})=>{const u=t.slice(s).map(o,-1),d=t.slice(s).map(l),f=t.invert().map(u,-1),h=t.invert().map(d);r.push({oldRange:{from:f,to:h},newRange:{from:u,to:d}})})}),Mze(r)}function bM(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function O1(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(i=>n.strict?t[i]===e[i]:bM(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function Ene(e,t,n={}){return e.find(r=>r.type===t&&O1(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function r$(e,t,n={}){return!!Ene(e,t,n)}function wM(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===t))&&(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===t)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!Ene([...i.node.marks],t,n)))return;let a=i.index,o=e.start()+i.offset,l=a+1,u=o+i.node.nodeSize;for(;a>0&&r$([...e.parent.child(a-1).marks],t,n);)a-=1,o-=e.parent.child(a).nodeSize;for(;l<e.parent.childCount&&r$([...e.parent.child(l).marks],t,n);)u+=e.parent.child(l).nodeSize,l+=1;return{from:o,to:u}}function EM(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(i=>{const s=n.resolve(e),a=wM(s,i.type);a&&r.push({mark:i,...a})}):n.nodesBetween(e,t,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(a=>({from:s,to:s+i.nodeSize,mark:a})))}),r}var Rze=(e,t,n,r=20)=>{const i=e.doc.resolve(n);let s=r,a=null;for(;s>0&&a===null;){const o=i.node(s);(o==null?void 0:o.type.name)===t?a=o:s-=1}return[a,s]};function pT(e,t){return t.nodes[e]||t.marks[e]||null}function wx(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=e.find(s=>s.type===t&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var Lze=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(i,s,a,o)=>{var l,u;const d=((u=(l=i.type.spec).toText)==null?void 0:u.call(l,{node:i,pos:s,parent:a,index:o}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,r-s))}),n};function uA(e,t,n={}){const{empty:r,ranges:i}=e.selection,s=t?yl(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(f=>s?s.name===f.type.name:!0).find(f=>O1(f.attrs,n,{strict:!1}));let a=0;const o=[];if(i.forEach(({$from:f,$to:h})=>{const p=f.pos,m=h.pos;e.doc.nodesBetween(p,m,(g,v)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(p,v),b=Math.min(m,v+g.nodeSize),x=b-y;a+=x,o.push(...g.marks.map(S=>({mark:S,from:y,to:b})))})}),a===0)return!1;const l=o.filter(f=>s?s.name===f.mark.type.name:!0).filter(f=>O1(f.mark.attrs,n,{strict:!1})).reduce((f,h)=>f+h.to-h.from,0),u=o.filter(f=>s?f.mark.type!==s&&f.mark.type.excludes(s):!0).reduce((f,h)=>f+h.to-h.from,0);return(l>0?l+u:l)>=a}function Oc(e,t,n={}){const{from:r,to:i,empty:s}=e.selection,a=t?Qn(t,e.schema):null,o=[];e.doc.nodesBetween(r,i,(f,h)=>{if(f.isText)return;const p=Math.max(r,h),m=Math.min(i,h+f.nodeSize);o.push({node:f,from:p,to:m})});const l=i-r,u=o.filter(f=>a?a.name===f.node.type.name:!0).filter(f=>O1(f.node.attrs,n,{strict:!1}));return s?!!u.length:u.reduce((f,h)=>f+h.to-h.from,0)>=l}function Fze(e,t,n={}){if(!t)return Oc(e,null,n)||uA(e,null,n);const r=LS(t,e.schema);return r==="node"?Oc(e,t,n):r==="mark"?uA(e,t,n):!1}var Bze=(e,t)=>{const{$from:n,$to:r,$anchor:i}=e.selection;if(t){const s=RS(o=>o.type.name===t)(e.selection);if(!s)return!1;const a=e.doc.resolve(s.pos+1);return i.pos+1===a.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},$ze=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function i$(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function s$(e,t){const{nodeExtensions:n}=s0(t),r=n.find(a=>a.name===e);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Ct(qe(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function FS(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let i=!0;return e.content.forEach(s=>{i!==!1&&(FS(s,{ignoreWhitespace:n,checkChildren:t})||(i=!1))}),i}return!1}function Sne(e){return e instanceof Ge}function _ne(e){return e instanceof Ye}function Mu(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function Nne(e,t=null){if(!t)return null;const n=Ze.atStart(e),r=Ze.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const i=n.from,s=r.to;return t==="all"?Ye.create(e,Mu(0,i,s),Mu(e.content.size,i,s)):Ye.create(e,Mu(t,i,s),Mu(t,i,s))}function Uze(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof mr||i instanceof Sr))return;const s=e.mapping.maps[r];let a=0;s.forEach((o,l,u,d)=>{a===0&&(a=d)}),e.setSelection(Ze.near(e.doc.resolve(a),n))}var BS=class{constructor(e){this.find=e.find,this.handler=e.handler}},zze=(e,t)=>{if(bM(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function kv(e){var t;const{editor:n,from:r,to:i,text:s,rules:a,plugin:o}=e,{view:l}=n;if(l.composing)return!1;const u=l.state.doc.resolve(r);if(u.parent.type.spec.code||(t=u.nodeBefore||u.nodeAfter)!=null&&t.marks.find(h=>h.type.spec.code))return!1;let d=!1;const f=Lze(u)+s;return a.forEach(h=>{if(d)return;const p=zze(f,h.find);if(!p)return;const m=l.state.tr,g=DS({state:l.state,transaction:m}),v={from:r-(p[0].length-s.length),to:i},{commands:y,chain:b,can:x}=new MS({editor:n,state:g});h.handler({state:g,range:v,match:p,commands:y,chain:b,can:x})===null||!m.steps.length||(m.setMeta(o,{transform:m,from:r,to:i,text:s}),l.dispatch(m),d=!0)}),d}function Hze(e){const{editor:t,rules:n}=e,r=new cn({state:{init(){return null},apply(i,s,a){const o=i.getMeta(r);if(o)return o;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=vM(me.from(d),a.schema);const{from:f}=l,h=f+d.length;kv({editor:t,from:f,to:h,text:d,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,a,o){return kv({editor:t,from:s,to:a,text:o,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&kv({editor:t,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:a}=i.state.selection;return a?kv({editor:t,from:a.pos,to:a.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function Vze(e){return Object.prototype.toString.call(e).slice(8,-1)}function Av(e){return Vze(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function Tne(e,t){const n={...e};return Av(e)&&Av(t)&&Object.keys(t).forEach(r=>{Av(t[r])&&Av(e[r])?n[r]=Tne(e[r],t[r]):n[r]=t[r]}),n}var SM=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...Ct(qe(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Ct(qe(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Tne(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},Zc=class Cne extends SM{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new Cne(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const a=i.marks();if(!!!a.find(u=>(u==null?void 0:u.type.name)===n.name))return!1;const l=a.find(u=>(u==null?void 0:u.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function Wze(e){return typeof e=="number"}var qze=class{constructor(e){this.find=e.find,this.handler=e.handler}},Kze=(e,t,n)=>{if(bM(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=e,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function Gze(e){const{editor:t,state:n,from:r,to:i,rule:s,pasteEvent:a,dropEvent:o}=e,{commands:l,chain:u,can:d}=new MS({editor:t,state:n}),f=[];return n.doc.nodesBetween(r,i,(p,m)=>{var g,v,y,b,x;if((v=(g=p.type)==null?void 0:g.spec)!=null&&v.code||!(p.isText||p.isTextblock||p.isInline))return;const S=(x=(b=(y=p.content)==null?void 0:y.size)!=null?b:p.nodeSize)!=null?x:0,E=Math.max(r,m),_=Math.min(i,m+S);if(E>=_)return;const T=p.isText?p.text||"":p.textBetween(E-m,_-m,void 0,"");Kze(T,s.find,a).forEach(k=>{if(k.index===void 0)return;const A=E+k.index+1,j=A+k[0].length,D={from:n.tr.mapping.map(A),to:n.tr.mapping.map(j)},P=s.handler({state:n,range:D,match:k,commands:l,chain:u,can:d,pasteEvent:a,dropEvent:o});f.push(P)})}),f.every(p=>p!==null)}var jv=null,Yze=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function Xze(e){const{editor:t,rules:n}=e;let r=null,i=!1,s=!1,a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,o;try{o=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{o=null}const l=({state:d,from:f,to:h,rule:p,pasteEvt:m})=>{const g=d.tr,v=DS({state:d,transaction:g});if(!(!Gze({editor:t,state:v,from:Math.max(f-1,0),to:h.b-1,rule:p,pasteEvent:m,dropEvent:o})||!g.steps.length)){try{o=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{o=null}return a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(d=>new cn({view(f){const h=m=>{var g;r=(g=f.dom.parentElement)!=null&&g.contains(m.target)?f.dom.parentElement:null,r&&(jv=t)},p=()=>{jv&&(jv=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(f,h)=>{if(s=r===f.dom.parentElement,o=h,!s){const p=jv;p!=null&&p.isEditable&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(f,h)=>{var p;const m=(p=h.clipboardData)==null?void 0:p.getData("text/html");return a=h,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(f,h,p)=>{const m=f[0],g=m.getMeta("uiEvent")==="paste"&&!i,v=m.getMeta("uiEvent")==="drop"&&!s,y=m.getMeta("applyPasteRules"),b=!!y;if(!g&&!v&&!b)return;if(b){let{text:E}=y;typeof E=="string"?E=E:E=vM(me.from(E),p.schema);const{from:_}=y,T=_+E.length,C=Yze(E);return l({rule:d,state:p,from:_,to:{b:T},pasteEvt:C})}const x=h.doc.content.findDiffStart(p.doc.content),S=h.doc.content.findDiffEnd(p.doc.content);if(!(!Wze(x)||!S||x===S.b))return l({rule:d,state:p,from:x,to:S,pasteEvt:a})}}))}var $S=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=gne(e),this.schema=jze(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:pT(t.name,this.schema)},r=qe(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this;return xM([...this.extensions].reverse()).map(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:pT(r.name,this.schema)},s=[],a=qe(r,"addKeyboardShortcuts",i);let o={};if(r.type==="mark"&&qe(r,"exitable",i)&&(o.ArrowRight=()=>Zc.handleExit({editor:e,mark:r})),a){const h=Object.fromEntries(Object.entries(a()).map(([p,m])=>[p,()=>m({editor:e})]));o={...o,...h}}const l=rze(o);s.push(l);const u=qe(r,"addInputRules",i);if(i$(r,e.options.enableInputRules)&&u){const h=u();if(h&&h.length){const p=Hze({editor:e,rules:h}),m=Array.isArray(p)?p:[p];s.push(...m)}}const d=qe(r,"addPasteRules",i);if(i$(r,e.options.enablePasteRules)&&d){const h=d();if(h&&h.length){const p=Xze({editor:e,rules:h});s.push(...p)}}const f=qe(r,"addProseMirrorPlugins",i);if(f){const h=f();s.push(...h)}return s}).flat()}get attributes(){return mne(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=s0(this.extensions);return Object.fromEntries(t.filter(n=>!!qe(n,"addNodeView")).map(n=>{const r=this.attributes.filter(o=>o.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Qn(n.name,this.schema)},s=qe(n,"addNodeView",i);if(!s)return[];const a=(o,l,u,d,f)=>{const h=j1(o,r);return s()({node:o,view:l,getPos:u,decorations:d,innerDecorations:f,editor:e,extension:n,HTMLAttributes:h})};return[n.name,a]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=s0(this.extensions);return Object.fromEntries(t.filter(n=>!!qe(n,"addMarkView")).map(n=>{const r=this.attributes.filter(o=>o.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:yl(n.name,this.schema)},s=qe(n,"addMarkView",i);if(!s)return[];const a=(o,l,u)=>{const d=j1(o,r);return s()({mark:o,view:l,inline:u,editor:e,extension:n,HTMLAttributes:d,updateAttributes:f=>{dVe(o,e,f)}})};return[n.name,a]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:pT(t.name,this.schema)};t.type==="mark"&&((n=Ct(qe(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const i=qe(t,"onBeforeCreate",r),s=qe(t,"onCreate",r),a=qe(t,"onUpdate",r),o=qe(t,"onSelectionUpdate",r),l=qe(t,"onTransaction",r),u=qe(t,"onFocus",r),d=qe(t,"onBlur",r),f=qe(t,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),a&&this.editor.on("update",a),o&&this.editor.on("selectionUpdate",o),l&&this.editor.on("transaction",l),u&&this.editor.on("focus",u),d&&this.editor.on("blur",d),f&&this.editor.on("destroy",f)})}};$S.resolve=gne;$S.sort=xM;$S.flatten=yM;var Qze={};une(Qze,{ClipboardTextSerializer:()=>Ane,Commands:()=>Pne,Delete:()=>Ine,Drop:()=>Dne,Editable:()=>Mne,FocusEvents:()=>Lne,Keymap:()=>Fne,Paste:()=>Bne,Tabindex:()=>$ne,focusEventsPluginKey:()=>Rne});var Rn=class kne extends SM{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new kne(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},Ane=Rn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new cn({key:new Mn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:s}=i,a=Math.min(...s.map(d=>d.$from.pos)),o=Math.max(...s.map(d=>d.$to.pos)),l=vne(n);return yne(r,{from:a,to:o},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),jne={};une(jne,{blur:()=>Jze,clearContent:()=>Zze,clearNodes:()=>eHe,command:()=>tHe,createParagraphNear:()=>nHe,cut:()=>rHe,deleteCurrentNode:()=>iHe,deleteNode:()=>sHe,deleteRange:()=>aHe,deleteSelection:()=>oHe,enter:()=>lHe,exitCode:()=>cHe,extendMarkRange:()=>uHe,first:()=>dHe,focus:()=>hHe,forEach:()=>pHe,insertContent:()=>mHe,insertContentAt:()=>yHe,joinBackward:()=>bHe,joinDown:()=>xHe,joinForward:()=>wHe,joinItemBackward:()=>EHe,joinItemForward:()=>SHe,joinTextblockBackward:()=>_He,joinTextblockForward:()=>NHe,joinUp:()=>vHe,keyboardShortcut:()=>CHe,lift:()=>kHe,liftEmptyBlock:()=>AHe,liftListItem:()=>jHe,newlineInCode:()=>OHe,resetAttributes:()=>PHe,scrollIntoView:()=>IHe,selectAll:()=>DHe,selectNodeBackward:()=>MHe,selectNodeForward:()=>RHe,selectParentNode:()=>LHe,selectTextblockEnd:()=>FHe,selectTextblockStart:()=>BHe,setContent:()=>$He,setMark:()=>zHe,setMeta:()=>HHe,setNode:()=>VHe,setNodeSelection:()=>WHe,setTextSelection:()=>qHe,sinkListItem:()=>KHe,splitBlock:()=>GHe,splitListItem:()=>YHe,toggleList:()=>XHe,toggleMark:()=>QHe,toggleNode:()=>JHe,toggleWrap:()=>ZHe,undoInputRule:()=>eVe,unsetAllMarks:()=>tVe,unsetMark:()=>nVe,updateAttributes:()=>rVe,wrapIn:()=>iVe,wrapInList:()=>sVe});var Jze=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),Zze=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),eHe=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:a})=>{e.doc.nodesBetween(s.pos,a.pos,(o,l)=>{if(o.type.isText)return;const{doc:u,mapping:d}=t,f=u.resolve(d.map(l)),h=u.resolve(d.map(l+o.nodeSize)),p=f.blockRange(h);if(!p)return;const m=pp(p);if(o.type.isTextblock){const{defaultType:g}=f.parent.contentMatchAt(f.index());t.setNodeMarkup(p.start,g)}(m||m===0)&&t.lift(p,m)})}),!0},tHe=e=>t=>e(t),nHe=()=>({state:e,dispatch:t})=>ane(e,t),rHe=(e,t)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const a=r.mapping.map(t);return r.insert(a,s.content),r.setSelection(new Ye(r.doc.resolve(Math.max(a-1,0)))),!0},iHe=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(t){const o=i.before(s),l=i.after(s);e.delete(o,l).scrollIntoView()}return!0}return!1},sHe=e=>({tr:t,state:n,dispatch:r})=>{const i=Qn(e,n.schema),s=t.selection.$anchor;for(let a=s.depth;a>0;a-=1)if(s.node(a).type===i){if(r){const l=s.before(a),u=s.after(a);t.delete(l,u).scrollIntoView()}return!0}return!1},aHe=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},oHe=()=>({state:e,dispatch:t})=>fM(e,t),lHe=()=>({commands:e})=>e.keyboardShortcut("Enter"),cHe=()=>({state:e,dispatch:t})=>cze(e,t),uHe=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const s=yl(e,r.schema),{doc:a,selection:o}=n,{$from:l,from:u,to:d}=o;if(i){const f=wM(l,s,t);if(f&&f.from<=u&&f.to>=d){const h=Ye.create(a,f.from,f.to);n.setSelection(h)}}return!0},dHe=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function fHe(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function _M(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var hHe=(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:s})=>{t={scrollIntoView:!0,...t};const a=()=>{(_M()||fHe())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t!=null&&t.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(s&&e===null&&!_ne(n.state.selection))return a(),!0;const o=Nne(i.doc,e)||n.state.selection,l=n.state.selection.eq(o);return s&&(l||i.setSelection(o),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0},pHe=(e,t)=>n=>e.every((r,i)=>t(r,{...n,index:i})),mHe=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),gHe=e=>!("type"in e),yHe=(e,t,n)=>({tr:r,dispatch:i,editor:s})=>{var a;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let o;const{selection:l}=s.state,u=y=>{s.emit("contentError",{editor:s,error:y,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{i0(t,s.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(y){u(y)}try{o=i0(t,s.schema,{parseOptions:d,errorOnInvalidContent:(a=n.errorOnInvalidContent)!=null?a:s.options.enableContentCheck})}catch(y){return u(y),!1}let{from:f,to:h}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},p=!0,m=!0;if((gHe(o)?o:[o]).forEach(y=>{y.check(),p=p?y.isText&&y.marks.length===0:!1,m=m?y.isBlock:!1}),f===h&&m){const{parent:y}=r.doc.resolve(f);y.isTextblock&&!y.type.spec.code&&!y.childCount&&(f-=1,h+=1)}let v;if(p){if(Array.isArray(t))v=t.map(y=>y.text||"").join("");else if(t instanceof me){let y="";t.forEach(b=>{b.text&&(y+=b.text)}),v=y}else typeof t=="object"&&t&&t.text?v=t.text:v=t;r.insertText(v,f,h)}else{v=o;const y=l.$from.parentOffset===0,b=l.$from.node().isText||l.$from.node().isTextblock,x=l.$from.node().content.size>0;y&&b&&x&&(f=Math.max(0,f-1)),r.replaceWith(f,h,v)}n.updateSelection&&Uze(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:f,text:v}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:f,text:v})}return!0},vHe=()=>({state:e,dispatch:t})=>aze(e,t),xHe=()=>({state:e,dispatch:t})=>oze(e,t),bHe=()=>({state:e,dispatch:t})=>Zte(e,t),wHe=()=>({state:e,dispatch:t})=>rne(e,t),EHe=()=>({state:e,dispatch:t,tr:n})=>{try{const r=kS(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},SHe=()=>({state:e,dispatch:t,tr:n})=>{try{const r=kS(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},_He=()=>({state:e,dispatch:t})=>ize(e,t),NHe=()=>({state:e,dispatch:t})=>sze(e,t);function One(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function THe(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,i,s,a;for(let o=0;o<t.length-1;o+=1){const l=t[o];if(/^(cmd|meta|m)$/i.test(l))a=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))_M()||One()?a=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),a&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var CHe=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const s=THe(e).split(/-(?!$)/),a=s.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),o=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,o))});return l==null||l.steps.forEach(u=>{const d=u.map(r.mapping);d&&i&&r.maybeStep(d)}),!0},kHe=(e,t={})=>({state:n,dispatch:r})=>{const i=Qn(e,n.schema);return Oc(n,i,t)?lze(n,r):!1},AHe=()=>({state:e,dispatch:t})=>one(e,t),jHe=e=>({state:t,dispatch:n})=>{const r=Qn(e,t.schema);return bze(r)(t,n)},OHe=()=>({state:e,dispatch:t})=>sne(e,t);function a$(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,i)=>(n.includes(i)||(r[i]=e[i]),r),{})}var PHe=(e,t)=>({tr:n,state:r,dispatch:i})=>{let s=null,a=null;const o=LS(typeof e=="string"?e:e.name,r.schema);return o?(o==="node"&&(s=Qn(e,r.schema)),o==="mark"&&(a=yl(e,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(u,d)=>{s&&s===u.type&&n.setNodeMarkup(d,void 0,a$(u.attrs,t)),a&&u.marks.length&&u.marks.forEach(f=>{a===f.type&&n.addMark(d,d+u.nodeSize,a.create(a$(f.attrs,t)))})})}),!0):!1},IHe=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),DHe=()=>({tr:e,dispatch:t})=>{if(t){const n=new us(e.doc);e.setSelection(n)}return!0},MHe=()=>({state:e,dispatch:t})=>tne(e,t),RHe=()=>({state:e,dispatch:t})=>ine(e,t),LHe=()=>({state:e,dispatch:t})=>fze(e,t),FHe=()=>({state:e,dispatch:t})=>mze(e,t),BHe=()=>({state:e,dispatch:t})=>pze(e,t),$He=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:a,commands:o})=>{const{doc:l}=s;if(r.preserveWhitespace!=="full"){const u=lA(e,i.schema,r,{errorOnInvalidContent:t??i.options.enableContentCheck});return a&&s.replaceWith(0,l.content.size,u).setMeta("preventUpdate",!n),!0}return a&&s.setMeta("preventUpdate",!n),o.insertContentAt({from:0,to:l.content.size},e,{parseOptions:r,errorOnInvalidContent:t??i.options.enableContentCheck})};function UHe(e,t,n){var r;const{selection:i}=t;let s=null;if(_ne(i)&&(s=i.$cursor),s){const o=(r=e.storedMarks)!=null?r:s.marks();return!!n.isInSet(o)||!o.some(l=>l.type.excludes(n))}const{ranges:a}=i;return a.some(({$from:o,$to:l})=>{let u=o.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(o.pos,l.pos,(d,f,h)=>{if(u)return!1;if(d.isInline){const p=!h||h.type.allowsMarkType(n),m=!!n.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(n));u=p&&m}return!u}),u})}var zHe=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:a,ranges:o}=s,l=yl(e,r.schema);if(i)if(a){const u=xne(r,l);n.addStoredMark(l.create({...u,...t}))}else o.forEach(u=>{const d=u.$from.pos,f=u.$to.pos;r.doc.nodesBetween(d,f,(h,p)=>{const m=Math.max(p,d),g=Math.min(p+h.nodeSize,f);h.marks.find(y=>y.type===l)?h.marks.forEach(y=>{l===y.type&&n.addMark(m,g,l.create({...y.attrs,...t}))}):n.addMark(m,g,l.create(t))})});return UHe(r,n,l)},HHe=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),VHe=(e,t={})=>({state:n,dispatch:r,chain:i})=>{const s=Qn(e,n.schema);let a;return n.selection.$anchor.sameParent(n.selection.$head)&&(a=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:o})=>e$(s,{...a,...t})(n)?!0:o.clearNodes()).command(({state:o})=>e$(s,{...a,...t})(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},WHe=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,i=Mu(e,0,r.content.size),s=Ge.create(r,i);t.setSelection(s)}return!0},qHe=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:i,to:s}=typeof e=="number"?{from:e,to:e}:e,a=Ye.atStart(r).from,o=Ye.atEnd(r).to,l=Mu(i,a,o),u=Mu(s,a,o),d=Ye.create(r,l,u);t.setSelection(d)}return!0},KHe=e=>({state:t,dispatch:n})=>{const r=Qn(e,t.schema);return Sze(r)(t,n)};function o$(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(i=>t==null?void 0:t.includes(i.type.name));e.tr.ensureMarks(r)}}var GHe=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:a}=t,{$from:o,$to:l}=s,u=i.extensionManager.attributes,d=wx(u,o.node().type.name,o.node().attrs);if(s instanceof Ge&&s.node.isBlock)return!o.parentOffset||!Wo(a,o.pos)?!1:(r&&(e&&o$(n,i.extensionManager.splittableMarks),t.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;const f=l.parentOffset===l.parent.content.size,h=o.depth===0?void 0:Tze(o.node(-1).contentMatchAt(o.indexAfter(-1)));let p=f&&h?[{type:h,attrs:d}]:void 0,m=Wo(t.doc,t.mapping.map(o.pos),1,p);if(!p&&!m&&Wo(t.doc,t.mapping.map(o.pos),1,h?[{type:h}]:void 0)&&(m=!0,p=h?[{type:h,attrs:d}]:void 0),r){if(m&&(s instanceof Ye&&t.deleteSelection(),t.split(t.mapping.map(o.pos),1,p),h&&!f&&!o.parentOffset&&o.parent.type!==h)){const g=t.mapping.map(o.before()),v=t.doc.resolve(g);o.node(-1).canReplaceWith(v.index(),v.index()+1,h)&&t.setNodeMarkup(t.mapping.map(o.before()),h)}e&&o$(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return m},YHe=(e,t={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var a;const o=Qn(e,r.schema),{$from:l,$to:u}=r.selection,d=r.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(u))return!1;const f=l.node(-1);if(f.type!==o)return!1;const h=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==o||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let y=me.empty;const b=l.index(-1)?1:l.index(-2)?2:3;for(let C=l.depth-b;C>=l.depth-3;C-=1)y=me.from(l.node(C).copy(y));const x=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,S={...wx(h,l.node().type.name,l.node().attrs),...t},E=((a=o.contentMatch.defaultType)==null?void 0:a.createAndFill(S))||void 0;y=y.append(me.from(o.createAndFill(null,E)||void 0));const _=l.before(l.depth-(b-1));n.replace(_,l.after(-x),new Pe(y,4-b,0));let T=-1;n.doc.nodesBetween(_,n.doc.content.size,(C,k)=>{if(T>-1)return!1;C.isTextblock&&C.content.size===0&&(T=k+1)}),T>-1&&n.setSelection(Ye.near(n.doc.resolve(T))),n.scrollIntoView()}return!0}const p=u.pos===l.end()?f.contentMatchAt(0).defaultType:null,m={...wx(h,f.type.name,f.attrs),...t},g={...wx(h,l.node().type.name,l.node().attrs),...t};n.delete(l.pos,u.pos);const v=p?[{type:o,attrs:m},{type:p,attrs:g}]:[{type:o,attrs:m}];if(!Wo(n.doc,l.pos,2))return!1;if(i){const{selection:y,storedMarks:b}=r,{splittableMarks:x}=s.extensionManager,S=b||y.$to.parentOffset&&y.$from.marks();if(n.split(l.pos,2,v).scrollIntoView(),!S||!i)return!0;const E=S.filter(_=>x.includes(_.type.name));n.ensureMarks(E)}return!0},mT=(e,t)=>{const n=RS(a=>a.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Qc(e.doc,n.pos)&&e.join(n.pos),!0},gT=(e,t)=>{const n=RS(a=>a.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Qc(e.doc,r)&&e.join(r),!0},XHe=(e,t,n,r={})=>({editor:i,tr:s,state:a,dispatch:o,chain:l,commands:u,can:d})=>{const{extensions:f,splittableMarks:h}=i.extensionManager,p=Qn(e,a.schema),m=Qn(t,a.schema),{selection:g,storedMarks:v}=a,{$from:y,$to:b}=g,x=y.blockRange(b),S=v||g.$to.parentOffset&&g.$from.marks();if(!x)return!1;const E=RS(_=>s$(_.type.name,f))(g);if(x.depth>=1&&E&&x.depth-E.depth<=1){if(E.node.type===p)return u.liftListItem(m);if(s$(E.node.type.name,f)&&p.validContent(E.node.content)&&o)return l().command(()=>(s.setNodeMarkup(E.pos,p),!0)).command(()=>mT(s,p)).command(()=>gT(s,p)).run()}return!n||!S||!o?l().command(()=>d().wrapInList(p,r)?!0:u.clearNodes()).wrapInList(p,r).command(()=>mT(s,p)).command(()=>gT(s,p)).run():l().command(()=>{const _=d().wrapInList(p,r),T=S.filter(C=>h.includes(C.type.name));return s.ensureMarks(T),_?!0:u.clearNodes()}).wrapInList(p,r).command(()=>mT(s,p)).command(()=>gT(s,p)).run()},QHe=(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,a=yl(e,r.schema);return uA(r,a,t)?i.unsetMark(a,{extendEmptyMarkRange:s}):i.setMark(a,t)},JHe=(e,t,n={})=>({state:r,commands:i})=>{const s=Qn(e,r.schema),a=Qn(t,r.schema),o=Oc(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),o?i.setNode(a,l):i.setNode(s,{...l,...n})},ZHe=(e,t={})=>({state:n,commands:r})=>{const i=Qn(e,n.schema);return Oc(n,i,t)?r.lift(i):r.wrapIn(i,t)},eVe=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(e))){if(t){const a=e.tr,o=s.transform;for(let l=o.steps.length-1;l>=0;l-=1)a.step(o.steps[l].invert(o.docs[l]));if(s.text){const l=a.doc.resolve(s.from).marks();a.replaceWith(s.from,s.to,e.schema.text(s.text,l))}else a.delete(s.from,s.to)}return!0}}return!1},tVe=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach(s=>{e.removeMark(s.$from.pos,s.$to.pos)}),!0},nVe=(e,t={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:a=!1}=t,{selection:o}=n,l=yl(e,r.schema),{$from:u,empty:d,ranges:f}=o;if(!i)return!0;if(d&&a){let{from:h,to:p}=o;const m=(s=u.marks().find(v=>v.type===l))==null?void 0:s.attrs,g=wM(u,l,m);g&&(h=g.from,p=g.to),n.removeMark(h,p,l)}else f.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,l)});return n.removeStoredMark(l),!0},rVe=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let s=null,a=null;const o=LS(typeof e=="string"?e:e.name,r.schema);return o?(o==="node"&&(s=Qn(e,r.schema)),o==="mark"&&(a=yl(e,r.schema)),i&&n.selection.ranges.forEach(l=>{const u=l.$from.pos,d=l.$to.pos;let f,h,p,m;n.selection.empty?r.doc.nodesBetween(u,d,(g,v)=>{s&&s===g.type&&(p=Math.max(v,u),m=Math.min(v+g.nodeSize,d),f=v,h=g)}):r.doc.nodesBetween(u,d,(g,v)=>{v<u&&s&&s===g.type&&(p=Math.max(v,u),m=Math.min(v+g.nodeSize,d),f=v,h=g),v>=u&&v<=d&&(s&&s===g.type&&n.setNodeMarkup(v,void 0,{...g.attrs,...t}),a&&g.marks.length&&g.marks.forEach(y=>{if(a===y.type){const b=Math.max(v,u),x=Math.min(v+g.nodeSize,d);n.addMark(b,x,a.create({...y.attrs,...t}))}}))}),h&&(f!==void 0&&n.setNodeMarkup(f,void 0,{...h.attrs,...t}),a&&h.marks.length&&h.marks.forEach(g=>{a===g.type&&n.addMark(p,m,a.create({...g.attrs,...t}))}))}),!0):!1},iVe=(e,t={})=>({state:n,dispatch:r})=>{const i=Qn(e,n.schema);return gze(i,t)(n,r)},sVe=(e,t={})=>({state:n,dispatch:r})=>{const i=Qn(e,n.schema);return yze(i,t)(n,r)},Pne=Rn.create({name:"commands",addCommands(){return{...jne}}}),Ine=Rn.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,i;const s=()=>{var a,o,l,u;if((u=(l=(o=(a=this.editor.options.coreExtensionOptions)==null?void 0:a.delete)==null?void 0:o.filterTransaction)==null?void 0:l.call(o,e))!=null?u:e.getMeta("y-sync$"))return;const d=dne(e.before,[e,...t]);wne(d).forEach(p=>{d.mapping.mapResult(p.oldRange.from).deletedAfter&&d.mapping.mapResult(p.oldRange.to).deletedBefore&&d.before.nodesBetween(p.oldRange.from,p.oldRange.to,(m,g)=>{const v=g+m.nodeSize-2,y=p.oldRange.from<=g&&v<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:g,to:v,newFrom:d.mapping.map(g),newTo:d.mapping.map(v),deletedRange:p.oldRange,newRange:p.newRange,partial:!y,editor:this.editor,transaction:e,combinedTransform:d})})});const h=d.mapping;d.steps.forEach((p,m)=>{var g,v;if(p instanceof ga){const y=h.slice(m).map(p.from,-1),b=h.slice(m).map(p.to),x=h.invert().map(y,-1),S=h.invert().map(b),E=(g=d.doc.nodeAt(y-1))==null?void 0:g.marks.some(T=>T.eq(p.mark)),_=(v=d.doc.nodeAt(b))==null?void 0:v.marks.some(T=>T.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:x,to:S},newRange:{from:y,to:b},partial:!!(_||E),editor:this.editor,transaction:e,combinedTransform:d})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),Dne=Rn.create({name:"drop",addProseMirrorPlugins(){return[new cn({key:new Mn("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),Mne=Rn.create({name:"editable",addProseMirrorPlugins(){return[new cn({key:new Mn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Rne=new Mn("focusEvents"),Lne=Rn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new cn({key:Rne,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),Fne=Rn.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:o})=>{const{selection:l,doc:u}=o,{empty:d,$anchor:f}=l,{pos:h,parent:p}=f,m=f.parent.isTextblock&&h>0?o.doc.resolve(h-1):f,g=m.parent.type.spec.isolating,v=f.pos-f.parentOffset,y=g&&m.parent.childCount===1?v===f.pos:Ze.atStart(u).from===h;return!d||!p.type.isTextblock||p.textContent.length||!y||y&&f.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return _M()||One()?s:i},addProseMirrorPlugins(){return[new cn({key:new Mn("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(g=>g.getMeta("composition")))return;const r=e.some(g=>g.docChanged)&&!t.doc.eq(n.doc),i=e.some(g=>g.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:a,to:o}=t.selection,l=Ze.atStart(t.doc).from,u=Ze.atEnd(t.doc).to;if(s||!(a===l&&o===u)||!FS(n.doc))return;const h=n.tr,p=DS({state:n,transaction:h}),{commands:m}=new MS({editor:this.editor,state:p});if(m.clearNodes(),!!h.steps.length)return h}})]}}),Bne=Rn.create({name:"paste",addProseMirrorPlugins(){return[new cn({key:new Mn("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),$ne=Rn.create({name:"tabindex",addProseMirrorPlugins(){return[new cn({key:new Mn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),aVe=class df{constructor(t,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new df(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new df(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new df(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,a=this.pos+r+(s?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const o=this.resolvedPos.doc.resolve(a);if(!i&&o.depth<=this.depth)return;const l=new df(o,this.editor,i,i?n:null);i&&(l.actualDepth=this.depth+1),t.push(new df(o,this.editor,i,i?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===t)if(Object.keys(n).length>0){const s=i.node.attrs,a=Object.keys(n);for(let o=0;o<a.length;o+=1){const l=a[o];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(a=>{r&&i.length>0||(a.node.type.name===t&&s.every(l=>n[l]===a.node.attrs[l])&&i.push(a),!(r&&i.length>0)&&(i=i.concat(a.querySelectorAll(t,n,r))))}),i}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},oVe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function lVe(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var cVe=class extends Nze{constructor(e={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=Nne(t,this.options.autofocus);this.editorState=Mf.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e!=null&&e.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=lVe(oVe,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.editorState=this.state.apply(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=pne(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(a=>!a.key.startsWith(s))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[Mne,Ane.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),Pne,Lne,Fne,$ne,Dne,Bne,Ine].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new $S(r,this)}createCommandManager(){this.commandManager=new MS({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=lA(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=lA(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new Qte(e,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews(),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(u=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(u)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),i=n.includes(e),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const a=n.findLast(u=>u.getMeta("focus")||u.getMeta("blur")),o=a==null?void 0:a.getMeta("focus"),l=a==null?void 0:a.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:a}),l&&this.emit("blur",{editor:this,event:l.event,transaction:a}),!(e.getMeta("preventUpdate")||!n.some(u=>u.docChanged)||s.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return bne(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return Fze(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return vM(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return Pze(this.state.doc,{blockSeparator:t,textSerializers:{...vne(this.schema),...n}})}get isEmpty(){return FS(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new aVe(t,this)}get $doc(){return this.$pos(0)}};function _d(e){return new BS({find:e.find,handler:({state:t,range:n,match:r})=>{const i=Ct(e.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=t,a=r[r.length-1],o=r[0];if(a){const l=o.search(/\S/),u=n.from+o.indexOf(a),d=u+a.length;if(EM(n.from,n.to,t.doc).filter(p=>p.mark.type.excluded.find(g=>g===e.type&&g!==p.mark.type)).filter(p=>p.to>u).length)return null;d<n.to&&s.delete(d,n.to),u>n.from&&s.delete(n.from+l,u);const h=n.from+l+a.length;s.addMark(n.from+l,h,e.type.create(i||{})),s.removeStoredMark(e.type)}}})}function Une(e){return new BS({find:e.find,handler:({state:t,range:n,match:r})=>{const i=Ct(e.getAttributes,void 0,r)||{},{tr:s}=t,a=n.from;let o=n.to;const l=e.type.create(i);if(r[1]){const u=r[0].lastIndexOf(r[1]);let d=a+u;d>o?d=o:o=d+r[1].length;const f=r[0][r[0].length-1];s.insertText(f,a+r[0].length-1),s.replaceWith(d,o,l)}else if(r[0]){const u=e.type.isInline?a:a-1;s.insert(u,e.type.create(i)).delete(s.mapping.map(a),s.mapping.map(o))}s.scrollIntoView()}})}function dA(e){return new BS({find:e.find,handler:({state:t,range:n,match:r})=>{const i=t.doc.resolve(n.from),s=Ct(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,s)}})}function Dh(e){return new BS({find:e.find,handler:({state:t,range:n,match:r,chain:i})=>{const s=Ct(e.getAttributes,void 0,r)||{},a=t.tr.delete(n.from,n.to),l=a.doc.resolve(n.from).blockRange(),u=l&&ZD(l,e.type,s);if(!u)return null;if(a.wrap(l,u),e.keepMarks&&e.editor){const{selection:f,storedMarks:h}=t,{splittableMarks:p}=e.editor.extensionManager,m=h||f.$to.parentOffset&&f.$from.marks();if(m){const g=m.filter(v=>p.includes(v.type.name));a.ensureMarks(g)}}if(e.keepAttributes){const f=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,s).run()}const d=a.doc.resolve(n.from-1).nodeBefore;d&&d.type===e.type&&Qc(a.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,d))&&a.join(n.from-1)}})}function uVe(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof Ge){const s=r.index();return r.parent.canReplaceWith(s,s+1,t)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(t))return!0;i-=1}return!1}function dVe(e,t,n={}){const{state:r}=t,{doc:i,tr:s}=r,a=e;i.descendants((o,l)=>{const u=s.mapping.map(l),d=s.mapping.map(l)+o.nodeSize;let f=null;if(o.marks.forEach(p=>{if(p!==a)return!1;f=p}),!f)return;let h=!1;if(Object.keys(n).forEach(p=>{n[p]!==f.attrs[p]&&(h=!0)}),h){const p=e.type.create({...e.attrs,...n});s.removeMark(u,d,e.type),s.addMark(u,d,p)}}),s.docChanged&&t.view.dispatch(s)}var Ar=class zne extends SM{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new zne(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function Pc(e){return new qze({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:i})=>{const s=Ct(e.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:a}=t,o=r[r.length-1],l=r[0];let u=n.to;if(o){const d=l.search(/\S/),f=n.from+l.indexOf(o),h=f+o.length;if(EM(n.from,n.to,t.doc).filter(m=>m.mark.type.excluded.find(v=>v===e.type&&v!==m.mark.type)).filter(m=>m.to>f).length)return null;h<n.to&&a.delete(h,n.to),f>n.from&&a.delete(n.from+d,f),u=n.from+d+o.length,a.addMark(n.from+d,u,e.type.create(s||{})),a.removeStoredMark(e.type)}}})}var fVe=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;for(i of t.entries())if(!e(i[1],n.get(i[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(t[i]!==n[i])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var a=s[i];if(!(a==="_owner"&&t.$$typeof)&&!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n};const hVe=ii(fVe);var pVe=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},mVe=({contentComponent:e})=>{const t=DP.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return c.jsx(c.Fragment,{children:Object.values(t)})};function gVe(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:Hj.createPortal(r.reactElement,r.element,n)},e.forEach(i=>i())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(i=>i())}}}var yVe=class extends at.Component{constructor(e){var t;super(e),this.editorContentRef=at.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=gVe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(!t||(this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null,!((e=t.options.element)!=null&&e.firstChild)))return;const n=document.createElement("div");n.append(...t.options.element.childNodes),t.setOptions({element:n})}render(){const{editor:e,innerRef:t,...n}=this.props;return c.jsxs(c.Fragment,{children:[c.jsx("div",{ref:pVe(t,this.editorContentRef),...n}),(e==null?void 0:e.contentComponent)&&c.jsx(mVe,{contentComponent:e.contentComponent})]})}},vVe=w.forwardRef((e,t)=>{const n=at.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return at.createElement(yVe,{key:n,innerRef:t,...e})}),xVe=at.memo(vVe),bVe=typeof window<"u"?w.useLayoutEffect:w.useEffect,wVe=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function EVe(e){var t;const[n]=w.useState(()=>new wVe(e.editor)),r=BK.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:hVe);return bVe(()=>n.watch(e.editor),[e.editor,n]),w.useDebugValue(r),r}var SVe=!1,fA=typeof window>"u",_Ve=fA||!!(typeof window<"u"&&window.next),NVe=class Hne{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?fA||_Ve?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new cVe(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((i,s)=>{var a;return i===((a=n.extensions)==null?void 0:a[s])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?Hne.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,i)=>r===t[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function TVe(e={},t=[]){const n=w.useRef(e);n.current=e;const[r]=w.useState(()=>new NVe(n)),i=DP.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return w.useDebugValue(i),w.useEffect(r.onRender(t)),EVe({editor:i,selector:({transactionNumber:s})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&s===0?0:s+1}),i}var CVe=w.createContext({editor:null});CVe.Consumer;var kVe=w.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),AVe=()=>w.useContext(kVe);at.forwardRef((e,t)=>{const{onDragStart:n}=AVe(),r=e.as||"div";return c.jsx(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});at.createContext({markViewContentRef:()=>{}});var P1=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...r}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},jVe=/^\s*>\s$/,OVe=Ar.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return P1("blockquote",{...tn(this.options.HTMLAttributes,e),children:P1("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Dh({find:jVe,type:this.type})]}}),PVe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,IVe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,DVe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,MVe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,RVe=Zc.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return P1("strong",{...tn(this.options.HTMLAttributes,e),children:P1("slot",{})})},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[_d({find:PVe,type:this.type}),_d({find:DVe,type:this.type})]},addPasteRules(){return[Pc({find:IVe,type:this.type}),Pc({find:MVe,type:this.type})]}}),LVe=/(^|[^`])`([^`]+)`(?!`)/,FVe=/(^|[^`])`([^`]+)`(?!`)/g,BVe=Zc.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",tn(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[_d({find:LVe,type:this.type})]},addPasteRules(){return[Pc({find:FVe,type:this.type})]}}),$Ve=/^```([a-z]+)?[\s\n]$/,UVe=/^~~~([a-z]+)?[\s\n]$/,Vne=Ar.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,s=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(a=>a.startsWith(n)).map(a=>a.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",tn(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith(`

`);return!s||!a?!1:e.chain().command(({tr:o})=>(o.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const o=i.after();return o===void 0?!1:r.nodeAt(o)?e.commands.command(({tr:u})=>(u.setSelection(Ze.near(r.resolve(o))),!0)):e.commands.exitCode()}}},addInputRules(){return[dA({find:$Ve,type:this.type,getAttributes:e=>({language:e[1]})}),dA({find:UVe,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new cn({key:new Mn("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:a,schema:o}=e.state,l=o.text(n.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:s},l)),a.selection.$from.parent.type!==this.type&&a.setSelection(Ye.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),e.dispatch(a),!0}}})]}}),zVe=Vne,HVe=Ar.create({name:"doc",topNode:!0,content:"block+"}),VVe=Ar.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",tn(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:o}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:u,dispatch:d})=>{if(d&&l&&a){const f=l.filter(h=>o.includes(h.type.name));u.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),WVe=Ar.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,tn(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>dA({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),qVe=Ar.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",tn(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!uVe(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,i=e();return Sne(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:a})=>{var o;if(a){const{$to:l}=s.selection,u=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?s.setSelection(Ye.create(s.doc,l.pos+1)):l.nodeAfter.isBlock?s.setSelection(Ge.create(s.doc,l.pos)):s.setSelection(Ye.create(s.doc,l.pos));else{const d=(o=l.parent.type.contentMatch.defaultType)==null?void 0:o.create();d&&(s.insert(u,d),s.setSelection(Ye.create(s.doc,u+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Une({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),KVe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,GVe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,YVe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,XVe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,QVe=Zc.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",tn(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[_d({find:KVe,type:this.type}),_d({find:YVe,type:this.type})]},addPasteRules(){return[Pc({find:GVe,type:this.type}),Pc({find:XVe,type:this.type})]}});const JVe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",ZVe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",hA="numeric",pA="ascii",mA="alpha",zm="asciinumeric",pm="alphanumeric",gA="domain",Wne="emoji",eWe="scheme",tWe="slashscheme",yT="whitespace";function nWe(e,t){return e in t||(t[e]=[]),t[e]}function Ru(e,t,n){t[hA]&&(t[zm]=!0,t[pm]=!0),t[pA]&&(t[zm]=!0,t[mA]=!0),t[zm]&&(t[pm]=!0),t[mA]&&(t[pm]=!0),t[pm]&&(t[gA]=!0),t[Wne]&&(t[gA]=!0);for(const r in t){const i=nWe(r,n);i.indexOf(e)<0&&i.push(e)}}function rWe(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function Oi(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}Oi.groups={};Oi.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const i=t.jr[r][0],s=t.jr[r][1];if(s&&i.test(e))return s}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let i=0;i<e.length;i++)this.tt(e[i],t,n,r)},tr(e,t,n,r){r=r||Oi.groups;let i;return t&&t.j?i=t:(i=new Oi(t),n&&r&&Ru(t,n,r)),this.jr.push([e,i]),i},ts(e,t,n,r){let i=this;const s=e.length;if(!s)return i;for(let a=0;a<s-1;a++)i=i.tt(e[a]);return i.tt(e[s-1],t,n,r)},tt(e,t,n,r){r=r||Oi.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const s=t;let a,o=i.go(e);if(o?(a=new Oi,Object.assign(a.j,o.j),a.jr.push.apply(a.jr,o.jr),a.jd=o.jd,a.t=o.t):a=new Oi,s){if(r)if(a.t&&typeof a.t=="string"){const l=Object.assign(rWe(a.t,r),n);Ru(s,l,r)}else n&&Ru(s,n,r);a.t=s}return i.j[e]=a,a}};const ot=(e,t,n,r,i)=>e.ta(t,n,r,i),Nn=(e,t,n,r,i)=>e.tr(t,n,r,i),l$=(e,t,n,r,i)=>e.ts(t,n,r,i),_e=(e,t,n,r,i)=>e.tt(t,n,r,i),To="WORD",yA="UWORD",qne="ASCIINUMERICAL",Kne="ALPHANUMERICAL",a0="LOCALHOST",vA="TLD",xA="UTLD",Ex="SCHEME",ff="SLASH_SCHEME",NM="NUM",bA="WS",TM="NL",Hm="OPENBRACE",Vm="CLOSEBRACE",I1="OPENBRACKET",D1="CLOSEBRACKET",M1="OPENPAREN",R1="CLOSEPAREN",L1="OPENANGLEBRACKET",F1="CLOSEANGLEBRACKET",B1="FULLWIDTHLEFTPAREN",$1="FULLWIDTHRIGHTPAREN",U1="LEFTCORNERBRACKET",z1="RIGHTCORNERBRACKET",H1="LEFTWHITECORNERBRACKET",V1="RIGHTWHITECORNERBRACKET",W1="FULLWIDTHLESSTHAN",q1="FULLWIDTHGREATERTHAN",K1="AMPERSAND",G1="APOSTROPHE",Y1="ASTERISK",Ll="AT",X1="BACKSLASH",Q1="BACKTICK",J1="CARET",Vl="COLON",CM="COMMA",Z1="DOLLAR",Ua="DOT",ew="EQUALS",kM="EXCLAMATION",ks="HYPHEN",Wm="PERCENT",tw="PIPE",nw="PLUS",rw="POUND",qm="QUERY",AM="QUOTE",Gne="FULLWIDTHMIDDLEDOT",jM="SEMI",za="SLASH",Km="TILDE",iw="UNDERSCORE",Yne="EMOJI",sw="SYM";var Xne=Object.freeze({__proto__:null,ALPHANUMERICAL:Kne,AMPERSAND:K1,APOSTROPHE:G1,ASCIINUMERICAL:qne,ASTERISK:Y1,AT:Ll,BACKSLASH:X1,BACKTICK:Q1,CARET:J1,CLOSEANGLEBRACKET:F1,CLOSEBRACE:Vm,CLOSEBRACKET:D1,CLOSEPAREN:R1,COLON:Vl,COMMA:CM,DOLLAR:Z1,DOT:Ua,EMOJI:Yne,EQUALS:ew,EXCLAMATION:kM,FULLWIDTHGREATERTHAN:q1,FULLWIDTHLEFTPAREN:B1,FULLWIDTHLESSTHAN:W1,FULLWIDTHMIDDLEDOT:Gne,FULLWIDTHRIGHTPAREN:$1,HYPHEN:ks,LEFTCORNERBRACKET:U1,LEFTWHITECORNERBRACKET:H1,LOCALHOST:a0,NL:TM,NUM:NM,OPENANGLEBRACKET:L1,OPENBRACE:Hm,OPENBRACKET:I1,OPENPAREN:M1,PERCENT:Wm,PIPE:tw,PLUS:nw,POUND:rw,QUERY:qm,QUOTE:AM,RIGHTCORNERBRACKET:z1,RIGHTWHITECORNERBRACKET:V1,SCHEME:Ex,SEMI:jM,SLASH:za,SLASH_SCHEME:ff,SYM:sw,TILDE:Km,TLD:vA,UNDERSCORE:iw,UTLD:xA,UWORD:yA,WORD:To,WS:bA});const So=/[a-z]/,Yp=new RegExp("\\p{L}","u"),vT=new RegExp("\\p{Emoji}","u"),_o=/\d/,xT=/\s/,c$="\r",bT=`
`,iWe="",sWe="",wT="";let Ov=null,Pv=null;function aWe(e=[]){const t={};Oi.groups=t;const n=new Oi;Ov==null&&(Ov=u$(JVe)),Pv==null&&(Pv=u$(ZVe)),_e(n,"'",G1),_e(n,"{",Hm),_e(n,"}",Vm),_e(n,"[",I1),_e(n,"]",D1),_e(n,"(",M1),_e(n,")",R1),_e(n,"<",L1),_e(n,">",F1),_e(n,"",B1),_e(n,"",$1),_e(n,"",U1),_e(n,"",z1),_e(n,"",H1),_e(n,"",V1),_e(n,"",W1),_e(n,"",q1),_e(n,"&",K1),_e(n,"*",Y1),_e(n,"@",Ll),_e(n,"`",Q1),_e(n,"^",J1),_e(n,":",Vl),_e(n,",",CM),_e(n,"$",Z1),_e(n,".",Ua),_e(n,"=",ew),_e(n,"!",kM),_e(n,"-",ks),_e(n,"%",Wm),_e(n,"|",tw),_e(n,"+",nw),_e(n,"#",rw),_e(n,"?",qm),_e(n,'"',AM),_e(n,"/",za),_e(n,";",jM),_e(n,"~",Km),_e(n,"_",iw),_e(n,"\\",X1),_e(n,"",Gne);const r=Nn(n,_o,NM,{[hA]:!0});Nn(r,_o,r);const i=Nn(r,So,qne,{[zm]:!0}),s=Nn(r,Yp,Kne,{[pm]:!0}),a=Nn(n,So,To,{[pA]:!0});Nn(a,_o,i),Nn(a,So,a),Nn(i,_o,i),Nn(i,So,i);const o=Nn(n,Yp,yA,{[mA]:!0});Nn(o,So),Nn(o,_o,s),Nn(o,Yp,o),Nn(s,_o,s),Nn(s,So),Nn(s,Yp,s);const l=_e(n,bT,TM,{[yT]:!0}),u=_e(n,c$,bA,{[yT]:!0}),d=Nn(n,xT,bA,{[yT]:!0});_e(n,wT,d),_e(u,bT,l),_e(u,wT,d),Nn(u,xT,d),_e(d,c$),_e(d,bT),Nn(d,xT,d),_e(d,wT,d);const f=Nn(n,vT,Yne,{[Wne]:!0});_e(f,"#"),Nn(f,vT,f),_e(f,iWe,f);const h=_e(f,sWe);_e(h,"#"),Nn(h,vT,f);const p=[[So,a],[_o,i]],m=[[So,null],[Yp,o],[_o,s]];for(let g=0;g<Ov.length;g++)Nl(n,Ov[g],vA,To,p);for(let g=0;g<Pv.length;g++)Nl(n,Pv[g],xA,yA,m);Ru(vA,{tld:!0,ascii:!0},t),Ru(xA,{utld:!0,alpha:!0},t),Nl(n,"file",Ex,To,p),Nl(n,"mailto",Ex,To,p),Nl(n,"http",ff,To,p),Nl(n,"https",ff,To,p),Nl(n,"ftp",ff,To,p),Nl(n,"ftps",ff,To,p),Ru(Ex,{scheme:!0,ascii:!0},t),Ru(ff,{slashscheme:!0,ascii:!0},t),e=e.sort((g,v)=>g[0]>v[0]?1:-1);for(let g=0;g<e.length;g++){const v=e[g][0],b=e[g][1]?{[eWe]:!0}:{[tWe]:!0};v.indexOf("-")>=0?b[gA]=!0:So.test(v)?_o.test(v)?b[zm]=!0:b[pA]=!0:b[hA]=!0,l$(n,v,v,b)}return l$(n,"localhost",a0,{ascii:!0}),n.jd=new Oi(sw),{start:n,tokens:Object.assign({groups:t},Xne)}}function Qne(e,t){const n=oWe(t.replace(/[A-Z]/g,o=>o.toLowerCase())),r=n.length,i=[];let s=0,a=0;for(;a<r;){let o=e,l=null,u=0,d=null,f=-1,h=-1;for(;a<r&&(l=o.go(n[a]));)o=l,o.accepts()?(f=0,h=0,d=o):f>=0&&(f+=n[a].length,h++),u+=n[a].length,s+=n[a].length,a++;s-=f,a-=h,u-=f,i.push({t:d.t,v:t.slice(s-u,s),s:s-u,e:s})}return i}function oWe(e){const t=[],n=e.length;let r=0;for(;r<n;){let i=e.charCodeAt(r),s,a=i<55296||i>56319||r+1===n||(s=e.charCodeAt(r+1))<56320||s>57343?e[r]:e.slice(r,r+2);t.push(a),r+=a.length}return t}function Nl(e,t,n,r,i){let s;const a=t.length;for(let o=0;o<a-1;o++){const l=t[o];e.j[l]?s=e.j[l]:(s=new Oi(r),s.jr=i.slice(),e.j[l]=s),e=s}return s=new Oi(n),s.jr=i.slice(),e.j[t[a-1]]=s,s}function u$(e){const t=[],n=[];let r=0,i="0123456789";for(;r<e.length;){let s=0;for(;i.indexOf(e[r+s])>=0;)s++;if(s>0){t.push(n.join(""));for(let a=parseInt(e.substring(r,r+s),10);a>0;a--)n.pop();r+=s}else n.push(e[r]),r++}return t}const o0={defaultProtocol:"http",events:null,format:d$,formatHref:d$,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function OM(e,t=null){let n=Object.assign({},o0);e&&(n=Object.assign(n,e instanceof OM?e.o:e));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=i}OM.prototype={o:o0,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:o0[e],typeof i=="function"&&r&&(i=i(t,n))):typeof i=="function"&&r&&(i=i(t,n.t,n)),i)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function d$(e){return e}function Jne(e,t){this.t="token",this.v=e,this.tk=t}Jne.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=o0.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),i=e.get("tagName",n,t),s=this.toFormattedString(e),a={},o=e.get("className",n,t),l=e.get("target",n,t),u=e.get("rel",n,t),d=e.getObj("attributes",n,t),f=e.getObj("events",n,t);return a.href=r,o&&(a.class=o),l&&(a.target=l),u&&(a.rel=u),d&&Object.assign(a,d),{tagName:i,attributes:a,content:s,eventListeners:f}}};function US(e,t){class n extends Jne{constructor(i,s){super(i,s),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const f$=US("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),h$=US("text"),lWe=US("nl"),Iv=US("url",{isLink:!0,toHref(e=o0.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==a0&&e[1].t===Vl}}),Ns=e=>new Oi(e);function cWe({groups:e}){const t=e.domain.concat([K1,Y1,Ll,X1,Q1,J1,Z1,ew,ks,NM,Wm,tw,nw,rw,za,sw,Km,iw]),n=[G1,Vl,CM,Ua,kM,Wm,qm,AM,jM,L1,F1,Hm,Vm,D1,I1,M1,R1,B1,$1,U1,z1,H1,V1,W1,q1],r=[K1,G1,Y1,X1,Q1,J1,Z1,ew,ks,Hm,Vm,Wm,tw,nw,rw,qm,za,sw,Km,iw],i=Ns(),s=_e(i,Km);ot(s,r,s),ot(s,e.domain,s);const a=Ns(),o=Ns(),l=Ns();ot(i,e.domain,a),ot(i,e.scheme,o),ot(i,e.slashscheme,l),ot(a,r,s),ot(a,e.domain,a);const u=_e(a,Ll);_e(s,Ll,u),_e(o,Ll,u),_e(l,Ll,u);const d=_e(s,Ua);ot(d,r,s),ot(d,e.domain,s);const f=Ns();ot(u,e.domain,f),ot(f,e.domain,f);const h=_e(f,Ua);ot(h,e.domain,f);const p=Ns(f$);ot(h,e.tld,p),ot(h,e.utld,p),_e(u,a0,p);const m=_e(f,ks);_e(m,ks,m),ot(m,e.domain,f),ot(p,e.domain,f),_e(p,Ua,h),_e(p,ks,m);const g=_e(p,Vl);ot(g,e.numeric,f$);const v=_e(a,ks),y=_e(a,Ua);_e(v,ks,v),ot(v,e.domain,a),ot(y,r,s),ot(y,e.domain,a);const b=Ns(Iv);ot(y,e.tld,b),ot(y,e.utld,b),ot(b,e.domain,a),ot(b,r,s),_e(b,Ua,y),_e(b,ks,v),_e(b,Ll,u);const x=_e(b,Vl),S=Ns(Iv);ot(x,e.numeric,S);const E=Ns(Iv),_=Ns();ot(E,t,E),ot(E,n,_),ot(_,t,E),ot(_,n,_),_e(b,za,E),_e(S,za,E);const T=_e(o,Vl),C=_e(l,Vl),k=_e(C,za),A=_e(k,za);ot(o,e.domain,a),_e(o,Ua,y),_e(o,ks,v),ot(l,e.domain,a),_e(l,Ua,y),_e(l,ks,v),ot(T,e.domain,E),_e(T,za,E),_e(T,qm,E),ot(A,e.domain,E),ot(A,t,E),_e(A,za,E);const j=[[Hm,Vm],[I1,D1],[M1,R1],[L1,F1],[B1,$1],[U1,z1],[H1,V1],[W1,q1]];for(let D=0;D<j.length;D++){const[P,M]=j[D],L=_e(E,P);_e(_,P,L),_e(L,M,E);const O=Ns(Iv);ot(L,t,O);const B=Ns();ot(L,n),ot(O,t,O),ot(O,n,B),ot(B,t,O),ot(B,n,B),_e(O,M,E),_e(B,M,E)}return _e(i,a0,b),_e(i,TM,lWe),{start:i,tokens:Xne}}function uWe(e,t,n){let r=n.length,i=0,s=[],a=[];for(;i<r;){let o=e,l=null,u=null,d=0,f=null,h=-1;for(;i<r&&!(l=o.go(n[i].t));)a.push(n[i++]);for(;i<r&&(u=l||o.go(n[i].t));)l=null,o=u,o.accepts()?(h=0,f=o):h>=0&&h++,i++,d++;if(h<0)i-=d,i<r&&(a.push(n[i]),i++);else{a.length>0&&(s.push(ET(h$,t,a)),a=[]),i-=h,d-=h;const p=f.t,m=n.slice(i-d,i);s.push(ET(p,t,m))}}return a.length>0&&s.push(ET(h$,t,a)),s}function ET(e,t,n){const r=n[0].s,i=n[n.length-1].e,s=t.slice(r,i);return new e(s,n)}const dWe=typeof console<"u"&&console&&console.warn||(()=>{}),fWe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",rn={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function hWe(){return Oi.groups={},rn.scanner=null,rn.parser=null,rn.tokenQueue=[],rn.pluginQueue=[],rn.customSchemes=[],rn.initialized=!1,rn}function p$(e,t=!1){if(rn.initialized&&dWe(`linkifyjs: already initialized - will not register custom scheme "${e}" ${fWe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);rn.customSchemes.push([e,t])}function pWe(){rn.scanner=aWe(rn.customSchemes);for(let e=0;e<rn.tokenQueue.length;e++)rn.tokenQueue[e][1]({scanner:rn.scanner});rn.parser=cWe(rn.scanner.tokens);for(let e=0;e<rn.pluginQueue.length;e++)rn.pluginQueue[e][1]({scanner:rn.scanner,parser:rn.parser});return rn.initialized=!0,rn}function PM(e){return rn.initialized||pWe(),uWe(rn.parser.start,e,Qne(rn.scanner.start,e))}PM.scan=Qne;function Zne(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new OM(n),i=PM(e),s=[];for(let a=0;a<i.length;a++){const o=i[a];o.isLink&&(!t||o.t===t)&&r.check(o)&&s.push(o.toFormattedObject(r))}return s}var IM="[\0- -\u2029]",mWe=new RegExp(IM),gWe=new RegExp(`${IM}$`),yWe=new RegExp(IM,"g");function vWe(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function xWe(e){return new cn({key:new Mn("autolink"),appendTransaction:(t,n,r)=>{const i=t.some(u=>u.docChanged)&&!n.doc.eq(r.doc),s=t.some(u=>u.getMeta("preventAutolink"));if(!i||s)return;const{tr:a}=r,o=dne(n.doc,[...t]);if(wne(o).forEach(({newRange:u})=>{const d=Cze(r.doc,u,p=>p.isTextblock);let f,h;if(d.length>1)f=d[0],h=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(d.length){const p=r.doc.textBetween(u.from,u.to," "," ");if(!gWe.test(p))return;f=d[0],h=r.doc.textBetween(f.pos,u.to,void 0," ")}if(f&&h){const p=h.split(mWe).filter(Boolean);if(p.length<=0)return!1;const m=p[p.length-1],g=f.pos+h.lastIndexOf(m);if(!m)return!1;const v=PM(m).map(y=>y.toObject(e.defaultProtocol));if(!vWe(v))return!1;v.filter(y=>y.isLink).map(y=>({...y,from:g+y.start+1,to:g+y.end+1})).filter(y=>r.schema.marks.code?!r.doc.rangeHasMark(y.from,y.to,r.schema.marks.code):!0).filter(y=>e.validate(y.value)).filter(y=>e.shouldAutoLink(y.value)).forEach(y=>{EM(y.from,y.to,r.doc).some(b=>b.mark.type===e.type)||a.addMark(y.from,y.to,e.type.create({href:y.href}))})}}),!!a.steps.length)return a}})}function bWe(e){return new cn({key:new Mn("handleClickLink"),props:{handleClick:(t,n,r)=>{var i,s;if(r.button!==0||!t.editable)return!1;let a=null;if(r.target instanceof HTMLAnchorElement)a=r.target;else{let d=r.target;const f=[];for(;d.nodeName!=="DIV";)f.push(d),d=d.parentNode;a=f.find(h=>h.nodeName==="A")}if(!a)return!1;const o=bne(t.state,e.type.name),l=(i=a==null?void 0:a.href)!=null?i:o.href,u=(s=a==null?void 0:a.target)!=null?s:o.target;return e.enableClickSelection&&e.editor.commands.extendMarkRange(e.type.name),a&&l?(window.open(l,u),!0):!1}}})}function wWe(e){return new cn({key:new Mn("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:i}=t,{selection:s}=i,{empty:a}=s;if(a)return!1;let o="";r.content.forEach(u=>{o+=u.textContent});const l=Zne(o,{defaultProtocol:e.defaultProtocol}).find(u=>u.isLink&&u.value===o);return!o||!l?!1:e.editor.commands.setMark(e.type,{href:l.href})}}})}function ou(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!e||e.replace(yWe,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var ere=Zc.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){p$(e);return}p$(e.scheme,e.optionalSlashes)})},onDestroy(){hWe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!ou(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!ou(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!ou(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",tn(this.options.HTMLAttributes,e),0]:["a",tn(this.options.HTMLAttributes,{...e,href:""}),0]},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!ou(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!ou(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Pc({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,i=Zne(e).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:a=>!!ou(a,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>t.push({text:s.value,data:{href:s.href},index:s.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(xWe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!ou(i,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&e.push(bWe({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(wWe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}}),EWe=ere,SWe=Object.defineProperty,_We=(e,t)=>{for(var n in t)SWe(e,n,{get:t[n],enumerable:!0})},NWe="listItem",m$="textStyle",g$=/^\s*([-+*])\s$/,tre=Ar.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",tn(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(NWe,this.editor.getAttributes(m$)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=Dh({find:g$,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Dh({find:g$,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(m$),editor:this.editor})),[e]}}),nre=Ar.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",tn(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),TWe={};_We(TWe,{findListItemPos:()=>gy,getNextListDepth:()=>DM,handleBackspace:()=>wA,handleDelete:()=>EA,hasListBefore:()=>rre,hasListItemAfter:()=>CWe,hasListItemBefore:()=>ire,listItemHasSubList:()=>sre,nextListIsDeeper:()=>are,nextListIsHigher:()=>ore});var gy=(e,t)=>{const{$from:n}=t.selection,r=Qn(e,t.schema);let i=null,s=n.depth,a=n.pos,o=null;for(;s>0&&o===null;)i=n.node(s),i.type===r?o=s:(s-=1,a-=1);return o===null?null:{$pos:t.doc.resolve(a),depth:o}},DM=(e,t)=>{const n=gy(e,t);if(!n)return!1;const[,r]=Rze(t,e,n.$pos.pos+4);return r},rre=(e,t,n)=>{const{$anchor:r}=e.selection,i=Math.max(0,r.pos-2),s=e.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},ire=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==e)},sre=(e,t,n)=>{if(!n)return!1;const r=Qn(e,t.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},wA=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!Oc(e.state,t)&&rre(e.state,t,n)){const{$anchor:o}=e.state.selection,l=e.state.doc.resolve(o.before()-1),u=[];l.node().descendants((h,p)=>{h.type.name===t&&u.push({node:h,pos:p})});const d=u.at(-1);if(!d)return!1;const f=e.state.doc.resolve(l.start()+d.pos+1);return e.chain().cut({from:o.start()-1,to:o.end()+1},f.end()).joinForward().run()}if(!Oc(e.state,t)||!$ze(e.state))return!1;const r=gy(t,e.state);if(!r)return!1;const s=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),a=sre(t,e.state,s);return ire(t,e.state)&&!a?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},are=(e,t)=>{const n=DM(e,t),r=gy(e,t);return!r||!n?!1:n>r.depth},ore=(e,t)=>{const n=DM(e,t),r=gy(e,t);return!r||!n?!1:n<r.depth},EA=(e,t)=>{if(!Oc(e.state,t)||!Bze(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:are(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():ore(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},CWe=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==e)},lre=Rn.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&EA(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&EA(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&wA(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&wA(e,n,r)&&(t=!0)}),t}}}}),kWe="listItem",y$="textStyle",v$=/^(\d+)\.\s$/,cre=Ar.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",tn(this.options.HTMLAttributes,n),0]:["ol",tn(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(kWe,this.editor.getAttributes(y$)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=Dh({find:v$,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Dh({find:v$,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(y$)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),AWe=/^\s*(\[([( |x])?\])\s$/,ure=Ar.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",tn(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),a=document.createElement("span"),o=document.createElement("input"),l=document.createElement("div"),u=d=>{var f,h;o.ariaLabel=((h=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:h.call(f,d,o.checked))||`Task item checkbox for ${d.textContent||"empty task item"}`};return u(e),s.contentEditable="false",o.type="checkbox",o.addEventListener("mousedown",d=>d.preventDefault()),o.addEventListener("change",d=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){o.checked=!o.checked;return}const{checked:f}=d.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:h})=>{const p=n();if(typeof p!="number")return!1;const m=h.doc.nodeAt(p);return h.setNodeMarkup(p,void 0,{...m==null?void 0:m.attrs,checked:f}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,f)||(o.checked=!o.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,f])=>{i.setAttribute(d,f)}),i.dataset.checked=e.attrs.checked,o.checked=e.attrs.checked,s.append(o,a),i.append(s,l),Object.entries(t).forEach(([d,f])=>{i.setAttribute(d,f)}),{dom:i,contentDOM:l,update:d=>d.type!==this.type?!1:(i.dataset.checked=d.attrs.checked,o.checked=d.attrs.checked,u(d),!0)}}},addInputRules(){return[Dh({find:AWe,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),dre=Ar.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",tn(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Rn.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(tre.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(nre.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(lre.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(cre.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(ure.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(dre.configure(this.options.taskList)),e}});var jWe=Ar.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",tn(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),OWe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,PWe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,IWe=Zc.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",tn(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[_d({find:OWe,type:this.type})]},addPasteRules(){return[Pc({find:PWe,type:this.type})]}}),DWe=Ar.create({name:"text",group:"inline"}),MWe=Zc.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",tn(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function RWe(e={}){return new cn({view(t){return new LWe(t,e)}})}class LWe{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=a=>{this[i](a)};return t.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),a=s.width/i.offsetWidth,o=s.height/i.offsetHeight;if(n){let f=t.nodeBefore,h=t.nodeAfter;if(f||h){let p=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(p){let m=p.getBoundingClientRect(),g=f?m.bottom:m.top;f&&h&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*o;r={left:m.left,right:m.right,top:g-v,bottom:g+v}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*a;r={left:f.left-h,right:f.left+h,top:f.top,bottom:f.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let u,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")u=-pageXOffset,d=-pageYOffset;else{let f=l.getBoundingClientRect(),h=f.width/l.offsetWidth,p=f.height/l.offsetHeight;u=f.left-l.scrollLeft*h,d=f.top-l.scrollTop*p}this.element.style.left=(r.left-u)/a+"px",this.element.style.top=(r.top-d)/o+"px",this.element.style.width=(r.right-r.left)/a+"px",this.element.style.height=(r.bottom-r.top)/o+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,t):i;if(n&&!s){let a=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let o=ute(this.editorView.state.doc,a,this.editorView.dragging.slice);o!=null&&(a=o)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class Pn extends Ze{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return Pn.valid(r)?new Pn(r):Ze.near(r)}content(){return Pe.empty}eq(t){return t instanceof Pn&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Pn(t.resolve(n.pos))}getBookmark(){return new MM(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!FWe(t)||!BWe(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&Pn.valid(t))return t;let i=t.pos,s=null;for(let a=t.depth;;a--){let o=t.node(a);if(n>0?t.indexAfter(a)<o.childCount:t.index(a)>0){s=o.child(n>0?t.indexAfter(a):t.index(a)-1);break}else if(a==0)return null;i+=n;let l=t.doc.resolve(i);if(Pn.valid(l))return l}for(;;){let a=n>0?s.firstChild:s.lastChild;if(!a){if(s.isAtom&&!s.isText&&!Ge.isSelectable(s)){t=t.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=a,i+=n;let o=t.doc.resolve(i);if(Pn.valid(o))return o}return null}}}Pn.prototype.visible=!1;Pn.findFrom=Pn.findGapCursorFrom;Ze.jsonID("gapcursor",Pn);class MM{constructor(t){this.pos=t}map(t){return new MM(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return Pn.valid(n)?new Pn(n):Ze.near(n)}}function FWe(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function BWe(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function $We(){return new cn({props:{decorations:VWe,createSelectionBetween(e,t,n){return t.pos==n.pos&&Pn.valid(n)?new Pn(n):null},handleClick:zWe,handleKeyDown:UWe,handleDOMEvents:{beforeinput:HWe}}})}const UWe=dM({ArrowLeft:Dv("horiz",-1),ArrowRight:Dv("horiz",1),ArrowUp:Dv("vert",-1),ArrowDown:Dv("vert",1)});function Dv(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,s){let a=r.selection,o=t>0?a.$to:a.$from,l=a.empty;if(a instanceof Ye){if(!s.endOfTextblock(n)||o.depth==0)return!1;l=!1,o=r.doc.resolve(t>0?o.after():o.before())}let u=Pn.findGapCursorFrom(o,t,l);return u?(i&&i(r.tr.setSelection(new Pn(u))),!0):!1}}function zWe(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!Pn.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Ge.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new Pn(r))),!0)}function HWe(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof Pn))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=me.empty;for(let a=r.length-1;a>=0;a--)i=me.from(r[a].createAndFill(null,i));let s=e.state.tr.replace(n.pos,n.pos,new Pe(i,0,0));return s.setSelection(Ye.near(s.doc.resolve(n.pos+1))),e.dispatch(s),!1}function VWe(e){if(!(e.selection instanceof Pn))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",$t.create(e.doc,[ar.widget(e.selection.head,t,{key:"gapcursor"})])}var aw=200,_r=function(){};_r.prototype.append=function(t){return t.length?(t=_r.from(t),!this.length&&t||t.length<aw&&this.leafAppend(t)||this.length<aw&&t.leafPrepend(this)||this.appendInner(t)):this};_r.prototype.prepend=function(t){return t.length?_r.from(t).append(this):this};_r.prototype.appendInner=function(t){return new WWe(this,t)};_r.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?_r.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};_r.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};_r.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};_r.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,a){return i.push(t(s,a))},n,r),i};_r.from=function(t){return t instanceof _r?t:t&&t.length?new fre(t):_r.empty};var fre=function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new t(this.values.slice(i,s))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,s,a,o){for(var l=s;l<a;l++)if(i(this.values[l],o+l)===!1)return!1},t.prototype.forEachInvertedInner=function(i,s,a,o){for(var l=s-1;l>=a;l--)if(i(this.values[l],o+l)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=aw)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=aw)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(_r);_r.empty=new fre([]);var WWe=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,s,a){var o=this.left.length;if(i<o&&this.left.forEachInner(r,i,Math.min(s,o),a)===!1||s>o&&this.right.forEachInner(r,Math.max(i-o,0),Math.min(this.length,s)-o,a+o)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,s,a){var o=this.left.length;if(i>o&&this.right.forEachInvertedInner(r,i-o,Math.max(s,o)-o,a+o)===!1||s<o&&this.left.forEachInvertedInner(r,Math.min(i,o),s,a)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(_r);const qWe=500;class ha{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let a=t.tr,o,l,u=[],d=[];return this.items.forEach((f,h)=>{if(!f.step){i||(i=this.remapping(r,h+1),s=i.maps.length),s--,d.push(f);return}if(i){d.push(new Ha(f.map));let p=f.step.map(i.slice(s)),m;p&&a.maybeStep(p).doc&&(m=a.mapping.maps[a.mapping.maps.length-1],u.push(new Ha(m,void 0,void 0,u.length+d.length))),s--,m&&i.appendMap(m,s)}else a.maybeStep(f.step);if(f.selection)return o=i?f.selection.map(i.slice(s)):f.selection,l=new ha(this.items.slice(0,r).append(d.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:a,selection:o}}addTransform(t,n,r,i){let s=[],a=this.eventCount,o=this.items,l=!i&&o.length?o.get(o.length-1):null;for(let d=0;d<t.steps.length;d++){let f=t.steps[d].invert(t.docs[d]),h=new Ha(t.mapping.maps[d],f,n),p;(p=l&&l.merge(h))&&(h=p,d?s.pop():o=o.slice(0,o.length-1)),s.push(h),n&&(a++,n=void 0),i||(l=h)}let u=a-r.depth;return u>GWe&&(o=KWe(o,u),a-=u),new ha(o.append(s),a)}remapping(t,n){let r=new Zg;return this.items.forEach((i,s)=>{let a=i.mirrorOffset!=null&&s-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,a)},t,n),r}addMaps(t){return this.eventCount==0?this:new ha(this.items.append(t.map(n=>new Ha(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=t.mapping,a=t.steps.length,o=this.eventCount;this.items.forEach(h=>{h.selection&&o--},i);let l=n;this.items.forEach(h=>{let p=s.getMirror(--l);if(p==null)return;a=Math.min(a,p);let m=s.maps[p];if(h.step){let g=t.steps[p].invert(t.docs[p]),v=h.selection&&h.selection.map(s.slice(l+1,p));v&&o++,r.push(new Ha(m,g,v))}else r.push(new Ha(m))},i);let u=[];for(let h=n;h<a;h++)u.push(new Ha(s.maps[h]));let d=this.items.slice(0,i).append(u).append(r),f=new ha(d,o);return f.emptyItemCount()>qWe&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,i=[],s=0;return this.items.forEach((a,o)=>{if(o>=t)i.push(a),a.selection&&s++;else if(a.step){let l=a.step.map(n.slice(r)),u=l&&l.getMap();if(r--,u&&n.appendMap(u,r),l){let d=a.selection&&a.selection.map(n.slice(r));d&&s++;let f=new Ha(u.invert(),l,d),h,p=i.length-1;(h=i.length&&i[p].merge(f))?i[p]=h:i.push(f)}}else a.map&&r--},this.items.length,0),new ha(_r.from(i.reverse()),s)}}ha.empty=new ha(_r.empty,0);function KWe(e,t){let n;return e.forEach((r,i)=>{if(r.selection&&t--==0)return n=i,!1}),e.slice(n)}class Ha{constructor(t,n,r,i){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new Ha(n.getMap().invert(),n,this.selection)}}}class Fl{constructor(t,n,r,i,s){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const GWe=20;function YWe(e,t,n,r){let i=n.getMeta(Zu),s;if(i)return i.historyState;n.getMeta(JWe)&&(e=new Fl(e.done,e.undone,null,0,-1));let a=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(a&&a.getMeta(Zu))return a.getMeta(Zu).redo?new Fl(e.done.addTransform(n,void 0,r,Sx(t)),e.undone,x$(n.mapping.maps),e.prevTime,e.prevComposition):new Fl(e.done,e.undone.addTransform(n,void 0,r,Sx(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let o=n.getMeta("composition"),l=e.prevTime==0||!a&&e.prevComposition!=o&&(e.prevTime<(n.time||0)-r.newGroupDelay||!XWe(n,e.prevRanges)),u=a?ST(e.prevRanges,n.mapping):x$(n.mapping.maps);return new Fl(e.done.addTransform(n,l?t.selection.getBookmark():void 0,r,Sx(t)),ha.empty,u,n.time,o??e.prevComposition)}else return(s=n.getMeta("rebased"))?new Fl(e.done.rebased(n,s),e.undone.rebased(n,s),ST(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Fl(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),ST(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function XWe(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<t.length;s+=2)r<=t[s+1]&&i>=t[s]&&(n=!0)}),n}function x$(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,i,s,a)=>t.push(s,a));return t}function ST(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),s=t.map(e[r+1],-1);i<=s&&n.push(i,s)}return n}function QWe(e,t,n){let r=Sx(t),i=Zu.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,r);if(!s)return null;let a=s.selection.resolve(s.transform.doc),o=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,r),l=new Fl(n?o:s.remaining,n?s.remaining:o,null,0,-1);return s.transform.setSelection(a).setMeta(Zu,{redo:n,historyState:l})}let _T=!1,b$=null;function Sx(e){let t=e.plugins;if(b$!=t){_T=!1,b$=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){_T=!0;break}}return _T}const Zu=new Mn("history"),JWe=new Mn("closeHistory");function ZWe(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new cn({key:Zu,state:{init(){return new Fl(ha.empty,ha.empty,null,0,-1)},apply(t,n,r){return YWe(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,i=r=="historyUndo"?pre:r=="historyRedo"?mre:null;return i?(n.preventDefault(),i(t.state,t.dispatch)):!1}}}})}function hre(e,t){return(n,r)=>{let i=Zu.getState(n);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(r){let s=QWe(i,n,e);s&&r(t?s.scrollIntoView():s)}return!0}}const pre=hre(!1,!0),mre=hre(!0,!0);var eqe=Rn.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc;if(((e==null?void 0:e.mode)||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new cn({key:new Mn("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const a=s-i,o=0,l=a;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const u=r.tr.deleteRange(o,l);return e=!0,u}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:t.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!t.getMeta("paste"))return!1;const o=t.selection.$head.pos,l=s-r,u=o-l,d=o;return t.deleteRange(u,d),!(this.storage.characters({node:t.doc})>r)}})]}}),tqe=Rn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[RWe(this.options)]}});Rn.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new cn({key:new Mn("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=t,s=[];if(!n||!r)return $t.create(e,[]);let a=0;this.options.mode==="deepest"&&e.descendants((l,u)=>{if(l.isText)return;if(!(i>=u&&i<=u+l.nodeSize-1))return!1;a+=1});let o=0;return e.descendants((l,u)=>{if(l.isText||!(i>=u&&i<=u+l.nodeSize-1))return!1;if(o+=1,this.options.mode==="deepest"&&a-o>0||this.options.mode==="shallowest"&&o>1)return this.options.mode==="deepest";s.push(ar.node(u,u+l.nodeSize,{class:this.options.className}))}),$t.create(e,s)}}})]}});var nqe=Rn.create({name:"gapCursor",addProseMirrorPlugins(){return[$We()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=Ct(qe(e,"allowGapCursor",n)))!=null?t:null}}}),rqe=Rn.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new cn({key:new Mn("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,i=[];if(!n)return null;const s=this.editor.isEmpty;return e.descendants((a,o)=>{const l=r>=o&&r<=o+a.nodeSize,u=!a.isLeaf&&FS(a);if((l||!this.options.showOnlyCurrent)&&u){const d=[this.options.emptyNodeClass];s&&d.push(this.options.emptyEditorClass);const f=ar.node(o,o+a.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:o,hasAnchor:l}):this.options.placeholder});i.push(f)}return this.options.includeChildren}),$t.create(e,i)}}})]}});Rn.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new cn({key:new Mn("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||Sne(n.selection)||e.view.dragging?null:$t.create(n.doc,[ar.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function w$({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||(t==null?void 0:t.type)===e}var iqe=Rn.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const e=new Mn(this.name),t=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>(this.options.notAfter||[]).concat(this.options.node).includes(n.name));return[new cn({key:e,appendTransaction:(n,r,i)=>{const{doc:s,tr:a,schema:o}=i,l=e.getState(i),u=s.content.size,d=o.nodes[this.options.node];if(l)return a.insert(u,d.create())},state:{init:(n,r)=>{const i=r.tr.doc.lastChild;return!w$({node:i,types:t})},apply:(n,r)=>{if(!n.docChanged)return r;const i=n.doc.lastChild;return!w$({node:i,types:t})}}})]}}),sqe=Rn.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>pre(e,t),redo:()=>({state:e,dispatch:t})=>mre(e,t)}},addProseMirrorPlugins(){return[ZWe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),aqe=Rn.create({name:"starterKit",addExtensions(){var e,t,n,r;const i=[];return this.options.bold!==!1&&i.push(RVe.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(OVe.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(tre.configure(this.options.bulletList)),this.options.code!==!1&&i.push(BVe.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(Vne.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(HVe.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(tqe.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(nqe.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(VVe.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(WVe.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(sqe.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(qVe.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(QVe.configure(this.options.italic)),this.options.listItem!==!1&&i.push(nre.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(lre.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&i.push(ere.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&i.push(cre.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(jWe.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(IWe.configure(this.options.strike)),this.options.text!==!1&&i.push(DWe.configure(this.options.text)),this.options.underline!==!1&&i.push(MWe.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(iqe.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),oqe=aqe,lqe=rqe,cqe=eqe,uqe=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,dqe=Ar.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",tn(this.options.HTMLAttributes,e)]},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[Une({find:uqe,type:this.type,getAttributes:e=>{const[,,t,n,r]=e;return{src:n,alt:t,title:r}}})]}}),fqe=dqe;function gre(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach(t=>{const n=e[t],r=typeof n;(r==="object"||r==="function")&&!Object.isFrozen(n)&&gre(n)}),e}let E$=class{constructor(t){t.data===void 0&&(t.data={}),this.data=t.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}};function yre(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Jl(e,...t){const n=Object.create(null);for(const r in e)n[r]=e[r];return t.forEach(function(r){for(const i in r)n[i]=r[i]}),n}const hqe="</span>",S$=e=>!!e.scope,pqe=(e,{prefix:t})=>{if(e.startsWith("language:"))return e.replace("language:","language-");if(e.includes(".")){const n=e.split(".");return[`${t}${n.shift()}`,...n.map((r,i)=>`${r}${"_".repeat(i+1)}`)].join(" ")}return`${t}${e}`};class mqe{constructor(t,n){this.buffer="",this.classPrefix=n.classPrefix,t.walk(this)}addText(t){this.buffer+=yre(t)}openNode(t){if(!S$(t))return;const n=pqe(t.scope,{prefix:this.classPrefix});this.span(n)}closeNode(t){S$(t)&&(this.buffer+=hqe)}value(){return this.buffer}span(t){this.buffer+=`<span class="${t}">`}}const _$=(e={})=>{const t={children:[]};return Object.assign(t,e),t};class RM{constructor(){this.rootNode=_$(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(t){this.top.children.push(t)}openNode(t){const n=_$({scope:t});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(t){return this.constructor._walk(t,this.rootNode)}static _walk(t,n){return typeof n=="string"?t.addText(n):n.children&&(t.openNode(n),n.children.forEach(r=>this._walk(t,r)),t.closeNode(n)),t}static _collapse(t){typeof t!="string"&&t.children&&(t.children.every(n=>typeof n=="string")?t.children=[t.children.join("")]:t.children.forEach(n=>{RM._collapse(n)}))}}class gqe extends RM{constructor(t){super(),this.options=t}addText(t){t!==""&&this.add(t)}startScope(t){this.openNode(t)}endScope(){this.closeNode()}__addSublanguage(t,n){const r=t.root;n&&(r.scope=`language:${n}`),this.add(r)}toHTML(){return new mqe(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function l0(e){return e?typeof e=="string"?e:e.source:null}function vre(e){return Ld("(?=",e,")")}function yqe(e){return Ld("(?:",e,")*")}function vqe(e){return Ld("(?:",e,")?")}function Ld(...e){return e.map(n=>l0(n)).join("")}function xqe(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function LM(...e){return"("+(xqe(e).capture?"":"?:")+e.map(r=>l0(r)).join("|")+")"}function xre(e){return new RegExp(e.toString()+"|").exec("").length-1}function bqe(e,t){const n=e&&e.exec(t);return n&&n.index===0}const wqe=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function FM(e,{joinWith:t}){let n=0;return e.map(r=>{n+=1;const i=n;let s=l0(r),a="";for(;s.length>0;){const o=wqe.exec(s);if(!o){a+=s;break}a+=s.substring(0,o.index),s=s.substring(o.index+o[0].length),o[0][0]==="\\"&&o[1]?a+="\\"+String(Number(o[1])+i):(a+=o[0],o[0]==="("&&n++)}return a}).map(r=>`(${r})`).join(t)}const Eqe=/\b\B/,bre="[a-zA-Z]\\w*",BM="[a-zA-Z_]\\w*",wre="\\b\\d+(\\.\\d+)?",Ere="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",Sre="\\b(0b[01]+)",Sqe="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",_qe=(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=Ld(t,/.*\b/,e.binary,/\b.*/)),Jl({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(n,r)=>{n.index!==0&&r.ignoreMatch()}},e)},c0={begin:"\\\\[\\s\\S]",relevance:0},Nqe={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[c0]},Tqe={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[c0]},Cqe={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},zS=function(e,t,n={}){const r=Jl({scope:"comment",begin:e,end:t,contains:[]},n);r.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const i=LM("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return r.contains.push({begin:Ld(/[ ]+/,"(",i,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),r},kqe=zS("//","$"),Aqe=zS("/\\*","\\*/"),jqe=zS("#","$"),Oqe={scope:"number",begin:wre,relevance:0},Pqe={scope:"number",begin:Ere,relevance:0},Iqe={scope:"number",begin:Sre,relevance:0},Dqe={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[c0,{begin:/\[/,end:/\]/,relevance:0,contains:[c0]}]},Mqe={scope:"title",begin:bre,relevance:0},Rqe={scope:"title",begin:BM,relevance:0},Lqe={begin:"\\.\\s*"+BM,relevance:0},Fqe=function(e){return Object.assign(e,{"on:begin":(t,n)=>{n.data._beginMatch=t[1]},"on:end":(t,n)=>{n.data._beginMatch!==t[1]&&n.ignoreMatch()}})};var Mv=Object.freeze({__proto__:null,APOS_STRING_MODE:Nqe,BACKSLASH_ESCAPE:c0,BINARY_NUMBER_MODE:Iqe,BINARY_NUMBER_RE:Sre,COMMENT:zS,C_BLOCK_COMMENT_MODE:Aqe,C_LINE_COMMENT_MODE:kqe,C_NUMBER_MODE:Pqe,C_NUMBER_RE:Ere,END_SAME_AS_BEGIN:Fqe,HASH_COMMENT_MODE:jqe,IDENT_RE:bre,MATCH_NOTHING_RE:Eqe,METHOD_GUARD:Lqe,NUMBER_MODE:Oqe,NUMBER_RE:wre,PHRASAL_WORDS_MODE:Cqe,QUOTE_STRING_MODE:Tqe,REGEXP_MODE:Dqe,RE_STARTERS_RE:Sqe,SHEBANG:_qe,TITLE_MODE:Mqe,UNDERSCORE_IDENT_RE:BM,UNDERSCORE_TITLE_MODE:Rqe});function Bqe(e,t){e.input[e.index-1]==="."&&t.ignoreMatch()}function $qe(e,t){e.className!==void 0&&(e.scope=e.className,delete e.className)}function Uqe(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=Bqe,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,e.relevance===void 0&&(e.relevance=0))}function zqe(e,t){Array.isArray(e.illegal)&&(e.illegal=LM(...e.illegal))}function Hqe(e,t){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function Vqe(e,t){e.relevance===void 0&&(e.relevance=1)}const Wqe=(e,t)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},e);Object.keys(e).forEach(r=>{delete e[r]}),e.keywords=n.keywords,e.begin=Ld(n.beforeMatch,vre(n.begin)),e.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},e.relevance=0,delete n.beforeMatch},qqe=["of","and","for","in","not","or","if","then","parent","list","value"],Kqe="keyword";function _re(e,t,n=Kqe){const r=Object.create(null);return typeof e=="string"?i(n,e.split(" ")):Array.isArray(e)?i(n,e):Object.keys(e).forEach(function(s){Object.assign(r,_re(e[s],t,s))}),r;function i(s,a){t&&(a=a.map(o=>o.toLowerCase())),a.forEach(function(o){const l=o.split("|");r[l[0]]=[s,Gqe(l[0],l[1])]})}}function Gqe(e,t){return t?Number(t):Yqe(e)?0:1}function Yqe(e){return qqe.includes(e.toLowerCase())}const N$={},ed=e=>{console.error(e)},T$=(e,...t)=>{console.log(`WARN: ${e}`,...t)},rf=(e,t)=>{N$[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),N$[`${e}/${t}`]=!0)},ow=new Error;function Nre(e,t,{key:n}){let r=0;const i=e[n],s={},a={};for(let o=1;o<=t.length;o++)a[o+r]=i[o],s[o+r]=!0,r+=xre(t[o-1]);e[n]=a,e[n]._emit=s,e[n]._multi=!0}function Xqe(e){if(Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw ed("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),ow;if(typeof e.beginScope!="object"||e.beginScope===null)throw ed("beginScope must be object"),ow;Nre(e,e.begin,{key:"beginScope"}),e.begin=FM(e.begin,{joinWith:""})}}function Qqe(e){if(Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw ed("skip, excludeEnd, returnEnd not compatible with endScope: {}"),ow;if(typeof e.endScope!="object"||e.endScope===null)throw ed("endScope must be object"),ow;Nre(e,e.end,{key:"endScope"}),e.end=FM(e.end,{joinWith:""})}}function Jqe(e){e.scope&&typeof e.scope=="object"&&e.scope!==null&&(e.beginScope=e.scope,delete e.scope)}function Zqe(e){Jqe(e),typeof e.beginScope=="string"&&(e.beginScope={_wrap:e.beginScope}),typeof e.endScope=="string"&&(e.endScope={_wrap:e.endScope}),Xqe(e),Qqe(e)}function eKe(e){function t(a,o){return new RegExp(l0(a),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(o?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(o,l){l.position=this.position++,this.matchIndexes[this.matchAt]=l,this.regexes.push([l,o]),this.matchAt+=xre(o)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const o=this.regexes.map(l=>l[1]);this.matcherRe=t(FM(o,{joinWith:"|"}),!0),this.lastIndex=0}exec(o){this.matcherRe.lastIndex=this.lastIndex;const l=this.matcherRe.exec(o);if(!l)return null;const u=l.findIndex((f,h)=>h>0&&f!==void 0),d=this.matchIndexes[u];return l.splice(0,u),Object.assign(l,d)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(o){if(this.multiRegexes[o])return this.multiRegexes[o];const l=new n;return this.rules.slice(o).forEach(([u,d])=>l.addRule(u,d)),l.compile(),this.multiRegexes[o]=l,l}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(o,l){this.rules.push([o,l]),l.type==="begin"&&this.count++}exec(o){const l=this.getMatcher(this.regexIndex);l.lastIndex=this.lastIndex;let u=l.exec(o);if(this.resumingScanAtSamePosition()&&!(u&&u.index===this.lastIndex)){const d=this.getMatcher(0);d.lastIndex=this.lastIndex+1,u=d.exec(o)}return u&&(this.regexIndex+=u.position+1,this.regexIndex===this.count&&this.considerAll()),u}}function i(a){const o=new r;return a.contains.forEach(l=>o.addRule(l.begin,{rule:l,type:"begin"})),a.terminatorEnd&&o.addRule(a.terminatorEnd,{type:"end"}),a.illegal&&o.addRule(a.illegal,{type:"illegal"}),o}function s(a,o){const l=a;if(a.isCompiled)return l;[$qe,Hqe,Zqe,Wqe].forEach(d=>d(a,o)),e.compilerExtensions.forEach(d=>d(a,o)),a.__beforeBegin=null,[Uqe,zqe,Vqe].forEach(d=>d(a,o)),a.isCompiled=!0;let u=null;return typeof a.keywords=="object"&&a.keywords.$pattern&&(a.keywords=Object.assign({},a.keywords),u=a.keywords.$pattern,delete a.keywords.$pattern),u=u||/\w+/,a.keywords&&(a.keywords=_re(a.keywords,e.case_insensitive)),l.keywordPatternRe=t(u,!0),o&&(a.begin||(a.begin=/\B|\b/),l.beginRe=t(l.begin),!a.end&&!a.endsWithParent&&(a.end=/\B|\b/),a.end&&(l.endRe=t(l.end)),l.terminatorEnd=l0(l.end)||"",a.endsWithParent&&o.terminatorEnd&&(l.terminatorEnd+=(a.end?"|":"")+o.terminatorEnd)),a.illegal&&(l.illegalRe=t(a.illegal)),a.contains||(a.contains=[]),a.contains=[].concat(...a.contains.map(function(d){return tKe(d==="self"?a:d)})),a.contains.forEach(function(d){s(d,l)}),a.starts&&s(a.starts,o),l.matcher=i(l),l}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=Jl(e.classNameAliases||{}),s(e)}function Tre(e){return e?e.endsWithParent||Tre(e.starts):!1}function tKe(e){return e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map(function(t){return Jl(e,{variants:null},t)})),e.cachedVariants?e.cachedVariants:Tre(e)?Jl(e,{starts:e.starts?Jl(e.starts):null}):Object.isFrozen(e)?Jl(e):e}var nKe="11.11.1";class rKe extends Error{constructor(t,n){super(t),this.name="HTMLInjectionError",this.html=n}}const NT=yre,C$=Jl,k$=Symbol("nomatch"),iKe=7,Cre=function(e){const t=Object.create(null),n=Object.create(null),r=[];let i=!0;const s="Could not find the language '{}', did you forget to load/include a language module?",a={disableAutodetect:!0,name:"Plain text",contains:[]};let o={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:gqe};function l(O){return o.noHighlightRe.test(O)}function u(O){let B=O.className+" ";B+=O.parentNode?O.parentNode.className:"";const R=o.languageDetectRe.exec(B);if(R){const F=C(R[1]);return F||(T$(s.replace("{}",R[1])),T$("Falling back to no-highlight mode for this block.",O)),F?R[1]:"no-highlight"}return B.split(/\s+/).find(F=>l(F)||C(F))}function d(O,B,R){let F="",I="";typeof B=="object"?(F=O,R=B.ignoreIllegals,I=B.language):(rf("10.7.0","highlight(lang, code, ...args) has been deprecated."),rf("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),I=O,F=B),R===void 0&&(R=!0);const X={code:F,language:I};M("before:highlight",X);const G=X.result?X.result:f(X.language,X.code,R);return G.code=X.code,M("after:highlight",G),G}function f(O,B,R,F){const I=Object.create(null);function X(q,te){return q.keywords[te]}function G(){if(!W.keywords){Fe.addText(ze);return}let q=0;W.keywordPatternRe.lastIndex=0;let te=W.keywordPatternRe.exec(ze),ye="";for(;te;){ye+=ze.substring(q,te.index);const Oe=tt.case_insensitive?te[0].toLowerCase():te[0],Be=X(W,Oe);if(Be){const[bt,ve]=Be;if(Fe.addText(ye),ye="",I[Oe]=(I[Oe]||0)+1,I[Oe]<=iKe&&(ct+=ve),bt.startsWith("_"))ye+=te[0];else{const Et=tt.classNameAliases[bt]||bt;je(te[0],Et)}}else ye+=te[0];q=W.keywordPatternRe.lastIndex,te=W.keywordPatternRe.exec(ze)}ye+=ze.substring(q),Fe.addText(ye)}function $(){if(ze==="")return;let q=null;if(typeof W.subLanguage=="string"){if(!t[W.subLanguage]){Fe.addText(ze);return}q=f(W.subLanguage,ze,!0,fe[W.subLanguage]),fe[W.subLanguage]=q._top}else q=p(ze,W.subLanguage.length?W.subLanguage:null);W.relevance>0&&(ct+=q.relevance),Fe.__addSublanguage(q._emitter,q.language)}function be(){W.subLanguage!=null?$():G(),ze=""}function je(q,te){q!==""&&(Fe.startScope(te),Fe.addText(q),Fe.endScope())}function Q(q,te){let ye=1;const Oe=te.length-1;for(;ye<=Oe;){if(!q._emit[ye]){ye++;continue}const Be=tt.classNameAliases[q[ye]]||q[ye],bt=te[ye];Be?je(bt,Be):(ze=bt,G(),ze=""),ye++}}function K(q,te){return q.scope&&typeof q.scope=="string"&&Fe.openNode(tt.classNameAliases[q.scope]||q.scope),q.beginScope&&(q.beginScope._wrap?(je(ze,tt.classNameAliases[q.beginScope._wrap]||q.beginScope._wrap),ze=""):q.beginScope._multi&&(Q(q.beginScope,te),ze="")),W=Object.create(q,{parent:{value:W}}),W}function xe(q,te,ye){let Oe=bqe(q.endRe,ye);if(Oe){if(q["on:end"]){const Be=new E$(q);q["on:end"](te,Be),Be.isMatchIgnored&&(Oe=!1)}if(Oe){for(;q.endsParent&&q.parent;)q=q.parent;return q}}if(q.endsWithParent)return xe(q.parent,te,ye)}function ae(q){return W.matcher.regexIndex===0?(ze+=q[0],1):(Me=!0,0)}function ue(q){const te=q[0],ye=q.rule,Oe=new E$(ye),Be=[ye.__beforeBegin,ye["on:begin"]];for(const bt of Be)if(bt&&(bt(q,Oe),Oe.isMatchIgnored))return ae(te);return ye.skip?ze+=te:(ye.excludeBegin&&(ze+=te),be(),!ye.returnBegin&&!ye.excludeBegin&&(ze=te)),K(ye,q),ye.returnBegin?0:te.length}function Ee(q){const te=q[0],ye=B.substring(q.index),Oe=xe(W,q,ye);if(!Oe)return k$;const Be=W;W.endScope&&W.endScope._wrap?(be(),je(te,W.endScope._wrap)):W.endScope&&W.endScope._multi?(be(),Q(W.endScope,q)):Be.skip?ze+=te:(Be.returnEnd||Be.excludeEnd||(ze+=te),be(),Be.excludeEnd&&(ze=te));do W.scope&&Fe.closeNode(),!W.skip&&!W.subLanguage&&(ct+=W.relevance),W=W.parent;while(W!==Oe.parent);return Oe.starts&&K(Oe.starts,q),Be.returnEnd?0:te.length}function re(){const q=[];for(let te=W;te!==tt;te=te.parent)te.scope&&q.unshift(te.scope);q.forEach(te=>Fe.openNode(te))}let Je={};function De(q,te){const ye=te&&te[0];if(ze+=q,ye==null)return be(),0;if(Je.type==="begin"&&te.type==="end"&&Je.index===te.index&&ye===""){if(ze+=B.slice(te.index,te.index+1),!i){const Oe=new Error(`0 width match regex (${O})`);throw Oe.languageName=O,Oe.badRule=Je.rule,Oe}return 1}if(Je=te,te.type==="begin")return ue(te);if(te.type==="illegal"&&!R){const Oe=new Error('Illegal lexeme "'+ye+'" for mode "'+(W.scope||"<unnamed>")+'"');throw Oe.mode=W,Oe}else if(te.type==="end"){const Oe=Ee(te);if(Oe!==k$)return Oe}if(te.type==="illegal"&&ye==="")return ze+=`
`,1;if(un>1e5&&un>te.index*3)throw new Error("potential infinite loop, way more iterations than matches");return ze+=ye,ye.length}const tt=C(O);if(!tt)throw ed(s.replace("{}",O)),new Error('Unknown language: "'+O+'"');const Y=eKe(tt);let pe="",W=F||Y;const fe={},Fe=new o.__emitter(o);re();let ze="",ct=0,Ot=0,un=0,Me=!1;try{if(tt.__emitTokens)tt.__emitTokens(B,Fe);else{for(W.matcher.considerAll();;){un++,Me?Me=!1:W.matcher.considerAll(),W.matcher.lastIndex=Ot;const q=W.matcher.exec(B);if(!q)break;const te=B.substring(Ot,q.index),ye=De(te,q);Ot=q.index+ye}De(B.substring(Ot))}return Fe.finalize(),pe=Fe.toHTML(),{language:O,value:pe,relevance:ct,illegal:!1,_emitter:Fe,_top:W}}catch(q){if(q.message&&q.message.includes("Illegal"))return{language:O,value:NT(B),illegal:!0,relevance:0,_illegalBy:{message:q.message,index:Ot,context:B.slice(Ot-100,Ot+100),mode:q.mode,resultSoFar:pe},_emitter:Fe};if(i)return{language:O,value:NT(B),illegal:!1,relevance:0,errorRaised:q,_emitter:Fe,_top:W};throw q}}function h(O){const B={value:NT(O),illegal:!1,relevance:0,_top:a,_emitter:new o.__emitter(o)};return B._emitter.addText(O),B}function p(O,B){B=B||o.languages||Object.keys(t);const R=h(O),F=B.filter(C).filter(A).map(be=>f(be,O,!1));F.unshift(R);const I=F.sort((be,je)=>{if(be.relevance!==je.relevance)return je.relevance-be.relevance;if(be.language&&je.language){if(C(be.language).supersetOf===je.language)return 1;if(C(je.language).supersetOf===be.language)return-1}return 0}),[X,G]=I,$=X;return $.secondBest=G,$}function m(O,B,R){const F=B&&n[B]||R;O.classList.add("hljs"),O.classList.add(`language-${F}`)}function g(O){let B=null;const R=u(O);if(l(R))return;if(M("before:highlightElement",{el:O,language:R}),O.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",O);return}if(O.children.length>0&&(o.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(O)),o.throwUnescapedHTML))throw new rKe("One of your code blocks includes unescaped HTML.",O.innerHTML);B=O;const F=B.textContent,I=R?d(F,{language:R,ignoreIllegals:!0}):p(F);O.innerHTML=I.value,O.dataset.highlighted="yes",m(O,R,I.language),O.result={language:I.language,re:I.relevance,relevance:I.relevance},I.secondBest&&(O.secondBest={language:I.secondBest.language,relevance:I.secondBest.relevance}),M("after:highlightElement",{el:O,result:I,text:F})}function v(O){o=C$(o,O)}const y=()=>{S(),rf("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function b(){S(),rf("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let x=!1;function S(){function O(){S()}if(document.readyState==="loading"){x||window.addEventListener("DOMContentLoaded",O,!1),x=!0;return}document.querySelectorAll(o.cssSelector).forEach(g)}function E(O,B){let R=null;try{R=B(e)}catch(F){if(ed("Language definition for '{}' could not be registered.".replace("{}",O)),i)ed(F);else throw F;R=a}R.name||(R.name=O),t[O]=R,R.rawDefinition=B.bind(null,e),R.aliases&&k(R.aliases,{languageName:O})}function _(O){delete t[O];for(const B of Object.keys(n))n[B]===O&&delete n[B]}function T(){return Object.keys(t)}function C(O){return O=(O||"").toLowerCase(),t[O]||t[n[O]]}function k(O,{languageName:B}){typeof O=="string"&&(O=[O]),O.forEach(R=>{n[R.toLowerCase()]=B})}function A(O){const B=C(O);return B&&!B.disableAutodetect}function j(O){O["before:highlightBlock"]&&!O["before:highlightElement"]&&(O["before:highlightElement"]=B=>{O["before:highlightBlock"](Object.assign({block:B.el},B))}),O["after:highlightBlock"]&&!O["after:highlightElement"]&&(O["after:highlightElement"]=B=>{O["after:highlightBlock"](Object.assign({block:B.el},B))})}function D(O){j(O),r.push(O)}function P(O){const B=r.indexOf(O);B!==-1&&r.splice(B,1)}function M(O,B){const R=O;r.forEach(function(F){F[R]&&F[R](B)})}function L(O){return rf("10.7.0","highlightBlock will be removed entirely in v12.0"),rf("10.7.0","Please use highlightElement now."),g(O)}Object.assign(e,{highlight:d,highlightAuto:p,highlightAll:S,highlightElement:g,highlightBlock:L,configure:v,initHighlighting:y,initHighlightingOnLoad:b,registerLanguage:E,unregisterLanguage:_,listLanguages:T,getLanguage:C,registerAliases:k,autoDetection:A,inherit:C$,addPlugin:D,removePlugin:P}),e.debugMode=function(){i=!1},e.safeMode=function(){i=!0},e.versionString=nKe,e.regex={concat:Ld,lookahead:vre,either:LM,optional:vqe,anyNumberOfTimes:yqe};for(const O in Mv)typeof Mv[O]=="object"&&gre(Mv[O]);return Object.assign(e,Mv),e},Mh=Cre({});Mh.newInstance=()=>Cre({});var sKe=Mh;Mh.HighlightJS=Mh;Mh.default=Mh;const kre=ii(sKe);function Are(e,t=[]){return e.map(n=>{const r=[...t,...n.properties?n.properties.className:[]];return n.children?Are(n.children,r):{text:n.value,classes:r}}).flat()}function A$(e){return e.value||e.children||[]}function aKe(e){return!!kre.getLanguage(e)}function j$({doc:e,name:t,lowlight:n,defaultLanguage:r}){const i=[];return cA(e,s=>s.type.name===t).forEach(s=>{var a;let o=s.pos+1;const l=s.node.attrs.language||r,u=n.listLanguages(),d=l&&(u.includes(l)||aKe(l)||(a=n.registered)!=null&&a.call(n,l))?A$(n.highlight(l,s.node.textContent)):A$(n.highlightAuto(s.node.textContent));Are(d).forEach(f=>{const h=o+f.text.length;if(f.classes.length){const p=ar.inline(o,h,{class:f.classes.join(" ")});i.push(p)}o=h})}),$t.create(e,i)}function oKe(e){return typeof e=="function"}function lKe({name:e,lowlight:t,defaultLanguage:n}){if(!["highlight","highlightAuto","listLanguages"].every(i=>oKe(t[i])))throw Error("You should provide an instance of lowlight to use the code-block-lowlight extension");const r=new cn({key:new Mn("lowlight"),state:{init:(i,{doc:s})=>j$({doc:s,name:e,lowlight:t,defaultLanguage:n}),apply:(i,s,a,o)=>{const l=a.selection.$head.parent.type.name,u=o.selection.$head.parent.type.name,d=cA(a.doc,h=>h.type.name===e),f=cA(o.doc,h=>h.type.name===e);return i.docChanged&&([l,u].includes(e)||f.length!==d.length||i.steps.some(h=>h.from!==void 0&&h.to!==void 0&&d.some(p=>p.pos>=h.from&&p.pos+p.node.nodeSize<=h.to)))?j$({doc:i.doc,name:e,lowlight:t,defaultLanguage:n}):s.map(i.mapping,i.doc)}},props:{decorations(i){return r.getState(i)}}});return r}var cKe=zVe.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),lowlight:{},languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},addProseMirrorPlugins(){var e;return[...((e=this.parent)==null?void 0:e.call(this))||[],lKe({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}}),uKe=cKe,SA,_A;if(typeof WeakMap<"u"){let e=new WeakMap;SA=t=>e.get(t),_A=(t,n)=>(e.set(t,n),n)}else{const e=[];let n=0;SA=r=>{for(let i=0;i<e.length;i+=2)if(e[i]==r)return e[i+1]},_A=(r,i)=>(n==10&&(n=0),e[n++]=r,e[n++]=i)}var In=class{constructor(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const r=t%this.width,i=t/this.width|0;let s=r+1,a=i+1;for(let o=1;s<this.width&&this.map[t+o]==n;o++)s++;for(let o=1;a<this.height&&this.map[t+this.width*o]==n;o++)a++;return{left:r,top:i,right:s,bottom:a}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){const{left:r,right:i,top:s,bottom:a}=this.findCell(e);return t=="horiz"?(n<0?r==0:i==this.width)?null:this.map[s*this.width+(n<0?r-1:i)]:(n<0?s==0:a==this.height)?null:this.map[r+this.width*(n<0?s-1:a)]}rectBetween(e,t){const{left:n,right:r,top:i,bottom:s}=this.findCell(e),{left:a,right:o,top:l,bottom:u}=this.findCell(t);return{left:Math.min(n,a),top:Math.min(i,l),right:Math.max(r,o),bottom:Math.max(s,u)}}cellsInRect(e){const t=[],n={};for(let r=e.top;r<e.bottom;r++)for(let i=e.left;i<e.right;i++){const s=r*this.width+i,a=this.map[s];n[a]||(n[a]=!0,!(i==e.left&&i&&this.map[s-1]==a||r==e.top&&r&&this.map[s-this.width]==a)&&t.push(a))}return t}positionAt(e,t,n){for(let r=0,i=0;;r++){const s=i+n.child(r).nodeSize;if(r==e){let a=t+e*this.width;const o=(e+1)*this.width;for(;a<o&&this.map[a]<i;)a++;return a==o?s-1:this.map[a]}i=s}}static get(e){return SA(e)||_A(e,dKe(e))}};function dKe(e){if(e.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+e.type.name);const t=fKe(e),n=e.childCount,r=[];let i=0,s=null;const a=[];for(let u=0,d=t*n;u<d;u++)r[u]=0;for(let u=0,d=0;u<n;u++){const f=e.child(u);d++;for(let m=0;;m++){for(;i<r.length&&r[i]!=0;)i++;if(m==f.childCount)break;const g=f.child(m),{colspan:v,rowspan:y,colwidth:b}=g.attrs;for(let x=0;x<y;x++){if(x+u>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:d,n:y-x});break}const S=i+x*t;for(let E=0;E<v;E++){r[S+E]==0?r[S+E]=d:(s||(s=[])).push({type:"collision",row:u,pos:d,n:v-E});const _=b&&b[E];if(_){const T=(S+E)%t*2,C=a[T];C==null||C!=_&&a[T+1]==1?(a[T]=_,a[T+1]=1):C==_&&a[T+1]++}}}i+=v,d+=g.nodeSize}const h=(u+1)*t;let p=0;for(;i<h;)r[i++]==0&&p++;p&&(s||(s=[])).push({type:"missing",row:u,n:p}),d++}(t===0||n===0)&&(s||(s=[])).push({type:"zero_sized"});const o=new In(t,n,r,s);let l=!1;for(let u=0;!l&&u<a.length;u+=2)a[u]!=null&&a[u+1]<n&&(l=!0);return l&&hKe(o,a,e),o}function fKe(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){const i=e.child(r);let s=0;if(n)for(let a=0;a<r;a++){const o=e.child(a);for(let l=0;l<o.childCount;l++){const u=o.child(l);a+u.attrs.rowspan>r&&(s+=u.attrs.colspan)}}for(let a=0;a<i.childCount;a++){const o=i.child(a);s+=o.attrs.colspan,o.attrs.rowspan>1&&(n=!0)}t==-1?t=s:t!=s&&(t=Math.max(t,s))}return t}function hKe(e,t,n){e.problems||(e.problems=[]);const r={};for(let i=0;i<e.map.length;i++){const s=e.map[i];if(r[s])continue;r[s]=!0;const a=n.nodeAt(s);if(!a)throw new RangeError(`No cell with offset ${s} found`);let o=null;const l=a.attrs;for(let u=0;u<l.colspan;u++){const d=(i+u)%e.width,f=t[d*2];f!=null&&(!l.colwidth||l.colwidth[u]!=f)&&((o||(o=pKe(l)))[u]=f)}o&&e.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:o})}}function pKe(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function ri(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const r=e.nodes[n],i=r.spec.tableRole;i&&(t[i]=r)}}return t}var Wl=new Mn("selectingCells");function mp(e){for(let t=e.depth-1;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return e.node(0).resolve(e.before(t+1));return null}function mKe(e){for(let t=e.depth;t>0;t--){const n=e.node(t).type.spec.tableRole;if(n==="cell"||n==="header_cell")return e.node(t)}return null}function Da(e){const t=e.selection.$head;for(let n=t.depth;n>0;n--)if(t.node(n).type.spec.tableRole=="row")return!0;return!1}function HS(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&t.node.type.spec.tableRole=="cell")return t.$anchor;const n=mp(t.$head)||gKe(t.$head);if(n)return n;throw new RangeError(`No cell found around position ${t.head}`)}function gKe(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n-t.nodeSize)}}function NA(e){return e.parent.type.spec.tableRole=="row"&&!!e.nodeAfter}function yKe(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function $M(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function jre(e,t,n){const r=e.node(-1),i=In.get(r),s=e.start(-1),a=i.nextCell(e.pos-s,t,n);return a==null?null:e.node(0).resolve(s+a)}function Nd(e,t,n=1){const r={...e,colspan:e.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function Ore(e,t,n=1){const r={...e,colspan:e.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<n;i++)r.colwidth.splice(t,0,0)}return r}function vKe(e,t,n){const r=ri(t.type.schema).header_cell;for(let i=0;i<e.height;i++)if(t.nodeAt(e.map[n+i*e.width]).type!=r)return!1;return!0}var en=class Co extends Ze{constructor(t,n=t){const r=t.node(-1),i=In.get(r),s=t.start(-1),a=i.rectBetween(t.pos-s,n.pos-s),o=t.node(0),l=i.cellsInRect(a).filter(d=>d!=n.pos-s);l.unshift(n.pos-s);const u=l.map(d=>{const f=r.nodeAt(d);if(!f)throw RangeError(`No cell with offset ${d} found`);const h=s+d+1;return new mte(o.resolve(h),o.resolve(h+f.content.size))});super(u[0].$from,u[0].$to,u),this.$anchorCell=t,this.$headCell=n}map(t,n){const r=t.resolve(n.map(this.$anchorCell.pos)),i=t.resolve(n.map(this.$headCell.pos));if(NA(r)&&NA(i)&&$M(r,i)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?Co.rowSelection(r,i):s&&this.isColSelection()?Co.colSelection(r,i):new Co(r,i)}return Ye.between(r,i)}content(){const t=this.$anchorCell.node(-1),n=In.get(t),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},a=[];for(let l=i.top;l<i.bottom;l++){const u=[];for(let d=l*n.width+i.left,f=i.left;f<i.right;f++,d++){const h=n.map[d];if(s[h])continue;s[h]=!0;const p=n.findCell(h);let m=t.nodeAt(h);if(!m)throw RangeError(`No cell with offset ${h} found`);const g=i.left-p.left,v=p.right-i.right;if(g>0||v>0){let y=m.attrs;if(g>0&&(y=Nd(y,0,g)),v>0&&(y=Nd(y,y.colspan-v,v)),p.left<i.left){if(m=m.type.createAndFill(y),!m)throw RangeError(`Could not create cell with attrs ${JSON.stringify(y)}`)}else m=m.type.create(y,m.content)}if(p.top<i.top||p.bottom>i.bottom){const y={...m.attrs,rowspan:Math.min(p.bottom,i.bottom)-Math.max(p.top,i.top)};p.top<i.top?m=m.type.createAndFill(y):m=m.type.create(y,m.content)}u.push(m)}a.push(t.child(l).copy(me.from(u)))}const o=this.isColSelection()&&this.isRowSelection()?t:a;return new Pe(me.from(o),1,1)}replace(t,n=Pe.empty){const r=t.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){const{$from:o,$to:l}=i[a],u=t.mapping.slice(r);t.replace(u.map(o.pos),u.map(l.pos),a?Pe.empty:n)}const s=Ze.findFrom(t.doc.resolve(t.mapping.slice(r).map(this.to)),-1);s&&t.setSelection(s)}replaceWith(t,n){this.replace(t,new Pe(me.from(n),0,0))}forEachCell(t){const n=this.$anchorCell.node(-1),r=In.get(n),i=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let a=0;a<s.length;a++)t(n.nodeAt(s[a]),i+s[a])}isColSelection(){const t=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(t,n)>0)return!1;const r=t+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(t,n=t){const r=t.node(-1),i=In.get(r),s=t.start(-1),a=i.findCell(t.pos-s),o=i.findCell(n.pos-s),l=t.node(0);return a.top<=o.top?(a.top>0&&(t=l.resolve(s+i.map[a.left])),o.bottom<i.height&&(n=l.resolve(s+i.map[i.width*(i.height-1)+o.right-1]))):(o.top>0&&(n=l.resolve(s+i.map[o.left])),a.bottom<i.height&&(t=l.resolve(s+i.map[i.width*(i.height-1)+a.right-1]))),new Co(t,n)}isRowSelection(){const t=this.$anchorCell.node(-1),n=In.get(t),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(i,s)>0)return!1;const a=i+this.$anchorCell.nodeAfter.attrs.colspan,o=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(a,o)==n.width}eq(t){return t instanceof Co&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,n=t){const r=t.node(-1),i=In.get(r),s=t.start(-1),a=i.findCell(t.pos-s),o=i.findCell(n.pos-s),l=t.node(0);return a.left<=o.left?(a.left>0&&(t=l.resolve(s+i.map[a.top*i.width])),o.right<i.width&&(n=l.resolve(s+i.map[i.width*(o.top+1)-1]))):(o.left>0&&(n=l.resolve(s+i.map[o.top*i.width])),a.right<i.width&&(t=l.resolve(s+i.map[i.width*(a.top+1)-1]))),new Co(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new Co(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){return new Co(t.resolve(n),t.resolve(r))}getBookmark(){return new xKe(this.$anchorCell.pos,this.$headCell.pos)}};en.prototype.visible=!1;Ze.jsonID("cell",en);var xKe=class Pre{constructor(t,n){this.anchor=t,this.head=n}map(t){return new Pre(t.map(this.anchor),t.map(this.head))}resolve(t){const n=t.resolve(this.anchor),r=t.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&$M(n,r)?new en(n,r):Ze.near(r,1)}};function bKe(e){if(!(e.selection instanceof en))return null;const t=[];return e.selection.forEachCell((n,r)=>{t.push(ar.node(r,r+n.nodeSize,{class:"selectedCell"}))}),$t.create(e.doc,t)}function wKe({$from:e,$to:t}){if(e.pos==t.pos||e.pos<t.pos-6)return!1;let n=e.pos,r=t.pos,i=e.depth;for(;i>=0&&!(e.after(i+1)<e.end(i));i--,n++);for(let s=t.depth;s>=0&&!(t.before(s+1)>t.start(s));s--,r--);return n==r&&/row|table/.test(e.node(i).type.spec.tableRole)}function EKe({$from:e,$to:t}){let n,r;for(let i=e.depth;i>0;i--){const s=e.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let i=t.depth;i>0;i--){const s=t.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return n!==r&&t.parentOffset===0}function SKe(e,t,n){const r=(t||e).selection,i=(t||e).doc;let s,a;if(r instanceof Ge&&(a=r.node.type.spec.tableRole)){if(a=="cell"||a=="header_cell")s=en.create(i,r.from);else if(a=="row"){const o=i.resolve(r.from+1);s=en.rowSelection(o,o)}else if(!n){const o=In.get(r.node),l=r.from+1,u=l+o.map[o.width*o.height-1];s=en.create(i,l+1,u)}}else r instanceof Ye&&wKe(r)?s=Ye.create(i,r.from):r instanceof Ye&&EKe(r)&&(s=Ye.create(i,r.$from.start(),r.$from.end()));return s&&(t||(t=e.tr)).setSelection(s),t}var _Ke=new Mn("fix-tables");function Ire(e,t,n,r){const i=e.childCount,s=t.childCount;e:for(let a=0,o=0;a<s;a++){const l=t.child(a);for(let u=o,d=Math.min(i,a+3);u<d;u++)if(e.child(u)==l){o=u+1,n+=l.nodeSize;continue e}r(l,n),o<i&&e.child(o).sameMarkup(l)?Ire(e.child(o),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function Dre(e,t){let n;const r=(i,s)=>{i.type.spec.tableRole=="table"&&(n=NKe(e,i,s,n))};return t?t.doc!=e.doc&&Ire(t.doc,e.doc,0,r):e.doc.descendants(r),n}function NKe(e,t,n,r){const i=In.get(t);if(!i.problems)return r;r||(r=e.tr);const s=[];for(let l=0;l<i.height;l++)s.push(0);for(let l=0;l<i.problems.length;l++){const u=i.problems[l];if(u.type=="collision"){const d=t.nodeAt(u.pos);if(!d)continue;const f=d.attrs;for(let h=0;h<f.rowspan;h++)s[u.row+h]+=u.n;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,Nd(f,f.colspan-u.n,u.n))}else if(u.type=="missing")s[u.row]+=u.n;else if(u.type=="overlong_rowspan"){const d=t.nodeAt(u.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,{...d.attrs,rowspan:d.attrs.rowspan-u.n})}else if(u.type=="colwidth mismatch"){const d=t.nodeAt(u.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,{...d.attrs,colwidth:u.colwidth})}else if(u.type=="zero_sized"){const d=r.mapping.map(n);r.delete(d,d+t.nodeSize)}}let a,o;for(let l=0;l<s.length;l++)s[l]&&(a==null&&(a=l),o=l);for(let l=0,u=n+1;l<i.height;l++){const d=t.child(l),f=u+d.nodeSize,h=s[l];if(h>0){let p="cell";d.firstChild&&(p=d.firstChild.type.spec.tableRole);const m=[];for(let v=0;v<h;v++){const y=ri(e.schema)[p].createAndFill();y&&m.push(y)}const g=(l==0||a==l-1)&&o==l?u+1:f-1;r.insert(r.mapping.map(g),m)}u=f}return r.setMeta(_Ke,{fixTables:!0})}function vo(e){const t=e.selection,n=HS(e),r=n.node(-1),i=n.start(-1),s=In.get(r);return{...t instanceof en?s.rectBetween(t.$anchorCell.pos-i,t.$headCell.pos-i):s.findCell(n.pos-i),tableStart:i,map:s,table:r}}function Mre(e,{map:t,tableStart:n,table:r},i){let s=i>0?-1:0;vKe(t,r,i+s)&&(s=i==0||i==t.width?null:0);for(let a=0;a<t.height;a++){const o=a*t.width+i;if(i>0&&i<t.width&&t.map[o-1]==t.map[o]){const l=t.map[o],u=r.nodeAt(l);e.setNodeMarkup(e.mapping.map(n+l),null,Ore(u.attrs,i-t.colCount(l))),a+=u.attrs.rowspan-1}else{const l=s==null?ri(r.type.schema).cell:r.nodeAt(t.map[o+s]).type,u=t.positionAt(a,i,r);e.insert(e.mapping.map(n+u),l.createAndFill())}}return e}function TKe(e,t){if(!Da(e))return!1;if(t){const n=vo(e);t(Mre(e.tr,n,n.left))}return!0}function CKe(e,t){if(!Da(e))return!1;if(t){const n=vo(e);t(Mre(e.tr,n,n.right))}return!0}function kKe(e,{map:t,table:n,tableStart:r},i){const s=e.mapping.maps.length;for(let a=0;a<t.height;){const o=a*t.width+i,l=t.map[o],u=n.nodeAt(l),d=u.attrs;if(i>0&&t.map[o-1]==l||i<t.width-1&&t.map[o+1]==l)e.setNodeMarkup(e.mapping.slice(s).map(r+l),null,Nd(d,i-t.colCount(l)));else{const f=e.mapping.slice(s).map(r+l);e.delete(f,f+u.nodeSize)}a+=d.rowspan}}function AKe(e,t){if(!Da(e))return!1;if(t){const n=vo(e),r=e.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let i=n.right-1;kKe(r,n,i),i!=n.left;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=In.get(s)}t(r)}return!0}function jKe(e,t,n){var r;const i=ri(t.type.schema).header_cell;for(let s=0;s<e.width;s++)if(((r=t.nodeAt(e.map[s+n*e.width]))==null?void 0:r.type)!=i)return!1;return!0}function Rre(e,{map:t,tableStart:n,table:r},i){var s;let a=n;for(let u=0;u<i;u++)a+=r.child(u).nodeSize;const o=[];let l=i>0?-1:0;jKe(t,r,i+l)&&(l=i==0||i==t.height?null:0);for(let u=0,d=t.width*i;u<t.width;u++,d++)if(i>0&&i<t.height&&t.map[d]==t.map[d-t.width]){const f=t.map[d],h=r.nodeAt(f).attrs;e.setNodeMarkup(n+f,null,{...h,rowspan:h.rowspan+1}),u+=h.colspan-1}else{const f=l==null?ri(r.type.schema).cell:(s=r.nodeAt(t.map[d+l*t.width]))==null?void 0:s.type,h=f==null?void 0:f.createAndFill();h&&o.push(h)}return e.insert(a,ri(r.type.schema).row.create(null,o)),e}function OKe(e,t){if(!Da(e))return!1;if(t){const n=vo(e);t(Rre(e.tr,n,n.top))}return!0}function PKe(e,t){if(!Da(e))return!1;if(t){const n=vo(e);t(Rre(e.tr,n,n.bottom))}return!0}function IKe(e,{map:t,table:n,tableStart:r},i){let s=0;for(let u=0;u<i;u++)s+=n.child(u).nodeSize;const a=s+n.child(i).nodeSize,o=e.mapping.maps.length;e.delete(s+r,a+r);const l=new Set;for(let u=0,d=i*t.width;u<t.width;u++,d++){const f=t.map[d];if(!l.has(f)){if(l.add(f),i>0&&f==t.map[d-t.width]){const h=n.nodeAt(f).attrs;e.setNodeMarkup(e.mapping.slice(o).map(f+r),null,{...h,rowspan:h.rowspan-1}),u+=h.colspan-1}else if(i<t.height&&f==t.map[d+t.width]){const h=n.nodeAt(f),p=h.attrs,m=h.type.create({...p,rowspan:h.attrs.rowspan-1},h.content),g=t.positionAt(i+1,u,n);e.insert(e.mapping.slice(o).map(r+g),m),u+=p.colspan-1}}}}function DKe(e,t){if(!Da(e))return!1;if(t){const n=vo(e),r=e.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let i=n.bottom-1;IKe(r,n,i),i!=n.top;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=In.get(n.table)}t(r)}return!0}function O$(e){const t=e.content;return t.childCount==1&&t.child(0).isTextblock&&t.child(0).childCount==0}function MKe({width:e,height:t,map:n},r){let i=r.top*e+r.left,s=i,a=(r.bottom-1)*e+r.left,o=i+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[s]==n[s-1]||r.right<e&&n[o]==n[o+1])return!0;s+=e,o+=e}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[i]==n[i-e]||r.bottom<t&&n[a]==n[a+e])return!0;i++,a++}return!1}function P$(e,t){const n=e.selection;if(!(n instanceof en)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=vo(e),{map:i}=r;if(MKe(i,r))return!1;if(t){const s=e.tr,a={};let o=me.empty,l,u;for(let d=r.top;d<r.bottom;d++)for(let f=r.left;f<r.right;f++){const h=i.map[d*i.width+f],p=r.table.nodeAt(h);if(!(a[h]||!p))if(a[h]=!0,l==null)l=h,u=p;else{O$(p)||(o=o.append(p.content));const m=s.mapping.map(h+r.tableStart);s.delete(m,m+p.nodeSize)}}if(l==null||u==null)return!0;if(s.setNodeMarkup(l+r.tableStart,null,{...Ore(u.attrs,u.attrs.colspan,r.right-r.left-u.attrs.colspan),rowspan:r.bottom-r.top}),o.size){const d=l+1+u.content.size,f=O$(u)?l+1:d;s.replaceWith(f+r.tableStart,d+r.tableStart,o)}s.setSelection(new en(s.doc.resolve(l+r.tableStart))),t(s)}return!0}function I$(e,t){const n=ri(e.schema);return RKe(({node:r})=>n[r.type.spec.tableRole])(e,t)}function RKe(e){return(t,n)=>{var r;const i=t.selection;let s,a;if(i instanceof en){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;s=i.$anchorCell.nodeAfter,a=i.$anchorCell.pos}else{if(s=mKe(i.$from),!s)return!1;a=(r=mp(i.$from))==null?void 0:r.pos}if(s==null||a==null||s.attrs.colspan==1&&s.attrs.rowspan==1)return!1;if(n){let o=s.attrs;const l=[],u=o.colwidth;o.rowspan>1&&(o={...o,rowspan:1}),o.colspan>1&&(o={...o,colspan:1});const d=vo(t),f=t.tr;for(let p=0;p<d.right-d.left;p++)l.push(u?{...o,colwidth:u&&u[p]?[u[p]]:null}:o);let h;for(let p=d.top;p<d.bottom;p++){let m=d.map.positionAt(p,d.left,d.table);p==d.top&&(m+=s.nodeSize);for(let g=d.left,v=0;g<d.right;g++,v++)g==d.left&&p==d.top||f.insert(h=f.mapping.map(m+d.tableStart,1),e({node:s,row:p,col:g}).createAndFill(l[v]))}f.setNodeMarkup(a,e({node:s,row:d.top,col:d.left}),l[0]),i instanceof en&&f.setSelection(new en(f.doc.resolve(i.$anchorCell.pos),h?f.doc.resolve(h):void 0)),n(f)}return!0}}function LKe(e,t){return function(n,r){if(!Da(n))return!1;const i=HS(n);if(i.nodeAfter.attrs[e]===t)return!1;if(r){const s=n.tr;n.selection instanceof en?n.selection.forEachCell((a,o)=>{a.attrs[e]!==t&&s.setNodeMarkup(o,null,{...a.attrs,[e]:t})}):s.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[e]:t}),r(s)}return!0}}function FKe(e){return function(t,n){if(!Da(t))return!1;if(n){const r=ri(t.schema),i=vo(t),s=t.tr,a=i.map.cellsInRect(e=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:e=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),o=a.map(l=>i.table.nodeAt(l));for(let l=0;l<a.length;l++)o[l].type==r.header_cell&&s.setNodeMarkup(i.tableStart+a[l],r.cell,o[l].attrs);if(s.steps.length==0)for(let l=0;l<a.length;l++)s.setNodeMarkup(i.tableStart+a[l],r.header_cell,o[l].attrs);n(s)}return!0}}function D$(e,t,n){const r=t.map.cellsInRect({left:0,top:0,right:e=="row"?t.map.width:1,bottom:e=="column"?t.map.height:1});for(let i=0;i<r.length;i++){const s=t.table.nodeAt(r[i]);if(s&&s.type!==n.header_cell)return!1}return!0}function u0(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?FKe(e):function(n,r){if(!Da(n))return!1;if(r){const i=ri(n.schema),s=vo(n),a=n.tr,o=D$("row",s,i),l=D$("column",s,i),d=(e==="column"?o:e==="row"?l:!1)?1:0,f=e=="column"?{left:0,top:d,right:1,bottom:s.map.height}:e=="row"?{left:d,top:0,right:s.map.width,bottom:1}:s,h=e=="column"?l?i.cell:i.header_cell:e=="row"?o?i.cell:i.header_cell:i.cell;s.map.cellsInRect(f).forEach(p=>{const m=p+s.tableStart,g=a.doc.nodeAt(m);g&&a.setNodeMarkup(m,h,g.attrs)}),r(a)}return!0}}u0("row",{useDeprecatedLogic:!0});u0("column",{useDeprecatedLogic:!0});var BKe=u0("cell",{useDeprecatedLogic:!0});function $Ke(e,t){if(t<0){const n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(let r=e.index(-1)-1,i=e.before();r>=0;r--){const s=e.node(-1).child(r),a=s.lastChild;if(a)return i-1-a.nodeSize;i-=s.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;const n=e.node(-1);for(let r=e.indexAfter(-1),i=e.after();r<n.childCount;r++){const s=n.child(r);if(s.childCount)return i+1;i+=s.nodeSize}}return null}function M$(e){return function(t,n){if(!Da(t))return!1;const r=$Ke(HS(t),e);if(r==null)return!1;if(n){const i=t.doc.resolve(r);n(t.tr.setSelection(Ye.between(i,yKe(i))).scrollIntoView())}return!0}}function UKe(e,t){const n=e.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function Rv(e,t){const n=e.selection;if(!(n instanceof en))return!1;if(t){const r=e.tr,i=ri(e.schema).cell.createAndFill().content;n.forEachCell((s,a)=>{s.content.eq(i)||r.replace(r.mapping.map(a+1),r.mapping.map(a+s.nodeSize-1),new Pe(i,0,0))}),r.docChanged&&t(r)}return!0}function zKe(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:r}=e;for(;t.childCount==1&&(n>0&&r>0||t.child(0).type.spec.tableRole=="table");)n--,r--,t=t.child(0).content;const i=t.child(0),s=i.type.spec.tableRole,a=i.type.schema,o=[];if(s=="row")for(let l=0;l<t.childCount;l++){let u=t.child(l).content;const d=l?0:Math.max(0,n-1),f=l<t.childCount-1?0:Math.max(0,r-1);(d||f)&&(u=TA(ri(a).row,new Pe(u,d,f)).content),o.push(u)}else if(s=="cell"||s=="header_cell")o.push(n||r?TA(ri(a).row,new Pe(t,n,r)).content:t);else return null;return HKe(a,o)}function HKe(e,t){const n=[];for(let i=0;i<t.length;i++){const s=t[i];for(let a=s.childCount-1;a>=0;a--){const{rowspan:o,colspan:l}=s.child(a).attrs;for(let u=i;u<i+o;u++)n[u]=(n[u]||0)+l}}let r=0;for(let i=0;i<n.length;i++)r=Math.max(r,n[i]);for(let i=0;i<n.length;i++)if(i>=t.length&&t.push(me.empty),n[i]<r){const s=ri(e).cell.createAndFill(),a=[];for(let o=n[i];o<r;o++)a.push(s);t[i]=t[i].append(me.from(a))}return{height:t.length,width:r,rows:t}}function TA(e,t){const n=e.createAndFill();return new eM(n).replace(0,n.content.size,t).doc}function VKe({width:e,height:t,rows:n},r,i){if(e!=r){const s=[],a=[];for(let o=0;o<n.length;o++){const l=n[o],u=[];for(let d=s[o]||0,f=0;d<r;f++){let h=l.child(f%l.childCount);d+h.attrs.colspan>r&&(h=h.type.createChecked(Nd(h.attrs,h.attrs.colspan,d+h.attrs.colspan-r),h.content)),u.push(h),d+=h.attrs.colspan;for(let p=1;p<h.attrs.rowspan;p++)s[o+p]=(s[o+p]||0)+h.attrs.colspan}a.push(me.from(u))}n=a,e=r}if(t!=i){const s=[];for(let a=0,o=0;a<i;a++,o++){const l=[],u=n[o%t];for(let d=0;d<u.childCount;d++){let f=u.child(d);a+f.attrs.rowspan>i&&(f=f.type.create({...f.attrs,rowspan:Math.max(1,i-f.attrs.rowspan)},f.content)),l.push(f)}s.push(me.from(l))}n=s,t=i}return{width:e,height:t,rows:n}}function WKe(e,t,n,r,i,s,a){const o=e.doc.type.schema,l=ri(o);let u,d;if(i>t.width)for(let f=0,h=0;f<t.height;f++){const p=n.child(f);h+=p.nodeSize;const m=[];let g;p.lastChild==null||p.lastChild.type==l.cell?g=u||(u=l.cell.createAndFill()):g=d||(d=l.header_cell.createAndFill());for(let v=t.width;v<i;v++)m.push(g);e.insert(e.mapping.slice(a).map(h-1+r),m)}if(s>t.height){const f=[];for(let m=0,g=(t.height-1)*t.width;m<Math.max(t.width,i);m++){const v=m>=t.width?!1:n.nodeAt(t.map[g+m]).type==l.header_cell;f.push(v?d||(d=l.header_cell.createAndFill()):u||(u=l.cell.createAndFill()))}const h=l.row.create(null,me.from(f)),p=[];for(let m=t.height;m<s;m++)p.push(h);e.insert(e.mapping.slice(a).map(r+n.nodeSize-2),p)}return!!(u||d)}function R$(e,t,n,r,i,s,a,o){if(a==0||a==t.height)return!1;let l=!1;for(let u=i;u<s;u++){const d=a*t.width+u,f=t.map[d];if(t.map[d-t.width]==f){l=!0;const h=n.nodeAt(f),{top:p,left:m}=t.findCell(f);e.setNodeMarkup(e.mapping.slice(o).map(f+r),null,{...h.attrs,rowspan:a-p}),e.insert(e.mapping.slice(o).map(t.positionAt(a,m,n)),h.type.createAndFill({...h.attrs,rowspan:p+h.attrs.rowspan-a})),u+=h.attrs.colspan-1}}return l}function L$(e,t,n,r,i,s,a,o){if(a==0||a==t.width)return!1;let l=!1;for(let u=i;u<s;u++){const d=u*t.width+a,f=t.map[d];if(t.map[d-1]==f){l=!0;const h=n.nodeAt(f),p=t.colCount(f),m=e.mapping.slice(o).map(f+r);e.setNodeMarkup(m,null,Nd(h.attrs,a-p,h.attrs.colspan-(a-p))),e.insert(m+h.nodeSize,h.type.createAndFill(Nd(h.attrs,0,a-p))),u+=h.attrs.rowspan-1}}return l}function F$(e,t,n,r,i){let s=n?e.doc.nodeAt(n-1):e.doc;if(!s)throw new Error("No table found");let a=In.get(s);const{top:o,left:l}=r,u=l+i.width,d=o+i.height,f=e.tr;let h=0;function p(){if(s=n?f.doc.nodeAt(n-1):f.doc,!s)throw new Error("No table found");a=In.get(s),h=f.mapping.maps.length}WKe(f,a,s,n,u,d,h)&&p(),R$(f,a,s,n,l,u,o,h)&&p(),R$(f,a,s,n,l,u,d,h)&&p(),L$(f,a,s,n,o,d,l,h)&&p(),L$(f,a,s,n,o,d,u,h)&&p();for(let m=o;m<d;m++){const g=a.positionAt(m,l,s),v=a.positionAt(m,u,s);f.replace(f.mapping.slice(h).map(g+n),f.mapping.slice(h).map(v+n),new Pe(i.rows[m-o],0,0))}p(),f.setSelection(new en(f.doc.resolve(n+a.positionAt(o,l,s)),f.doc.resolve(n+a.positionAt(d-1,u-1,s)))),t(f)}var qKe=dM({ArrowLeft:Lv("horiz",-1),ArrowRight:Lv("horiz",1),ArrowUp:Lv("vert",-1),ArrowDown:Lv("vert",1),"Shift-ArrowLeft":Fv("horiz",-1),"Shift-ArrowRight":Fv("horiz",1),"Shift-ArrowUp":Fv("vert",-1),"Shift-ArrowDown":Fv("vert",1),Backspace:Rv,"Mod-Backspace":Rv,Delete:Rv,"Mod-Delete":Rv});function _x(e,t,n){return n.eq(e.selection)?!1:(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function Lv(e,t){return(n,r,i)=>{if(!i)return!1;const s=n.selection;if(s instanceof en)return _x(n,r,Ze.near(s.$headCell,t));if(e!="horiz"&&!s.empty)return!1;const a=Lre(i,e,t);if(a==null)return!1;if(e=="horiz")return _x(n,r,Ze.near(n.doc.resolve(s.head+t),t));{const o=n.doc.resolve(a),l=jre(o,e,t);let u;return l?u=Ze.near(l,1):t<0?u=Ze.near(n.doc.resolve(o.before(-1)),-1):u=Ze.near(n.doc.resolve(o.after(-1)),1),_x(n,r,u)}}}function Fv(e,t){return(n,r,i)=>{if(!i)return!1;const s=n.selection;let a;if(s instanceof en)a=s;else{const l=Lre(i,e,t);if(l==null)return!1;a=new en(n.doc.resolve(l))}const o=jre(a.$headCell,e,t);return o?_x(n,r,new en(a.$anchorCell,o)):!1}}function KKe(e,t){const n=e.state.doc,r=mp(n.resolve(t));return r?(e.dispatch(e.state.tr.setSelection(new en(r))),!0):!1}function GKe(e,t,n){if(!Da(e.state))return!1;let r=zKe(n);const i=e.state.selection;if(i instanceof en){r||(r={width:1,height:1,rows:[me.from(TA(ri(e.state.schema).cell,n))]});const s=i.$anchorCell.node(-1),a=i.$anchorCell.start(-1),o=In.get(s).rectBetween(i.$anchorCell.pos-a,i.$headCell.pos-a);return r=VKe(r,o.right-o.left,o.bottom-o.top),F$(e.state,e.dispatch,a,o,r),!0}else if(r){const s=HS(e.state),a=s.start(-1);return F$(e.state,e.dispatch,a,In.get(s.node(-1)).findCell(s.pos-a),r),!0}else return!1}function YKe(e,t){var n;if(t.ctrlKey||t.metaKey)return;const r=B$(e,t.target);let i;if(t.shiftKey&&e.state.selection instanceof en)s(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&(i=mp(e.state.selection.$anchor))!=null&&((n=TT(e,t))==null?void 0:n.pos)!=i.pos)s(i,t),t.preventDefault();else if(!r)return;function s(l,u){let d=TT(e,u);const f=Wl.getState(e.state)==null;if(!d||!$M(l,d))if(f)d=l;else return;const h=new en(l,d);if(f||!e.state.selection.eq(h)){const p=e.state.tr.setSelection(h);f&&p.setMeta(Wl,l.pos),e.dispatch(p)}}function a(){e.root.removeEventListener("mouseup",a),e.root.removeEventListener("dragstart",a),e.root.removeEventListener("mousemove",o),Wl.getState(e.state)!=null&&e.dispatch(e.state.tr.setMeta(Wl,-1))}function o(l){const u=l,d=Wl.getState(e.state);let f;if(d!=null)f=e.state.doc.resolve(d);else if(B$(e,u.target)!=r&&(f=TT(e,t),!f))return a();f&&s(f,u)}e.root.addEventListener("mouseup",a),e.root.addEventListener("dragstart",a),e.root.addEventListener("mousemove",o)}function Lre(e,t,n){if(!(e.state.selection instanceof Ye))return null;const{$head:r}=e.state.selection;for(let i=r.depth-1;i>=0;i--){const s=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const o=r.before(i),l=t=="vert"?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(l)?o:null}}return null}function B$(e,t){for(;t&&t!=e.dom;t=t.parentNode)if(t.nodeName=="TD"||t.nodeName=="TH")return t;return null}function TT(e,t){const n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?mp(e.state.doc.resolve(n.pos)):null}var XKe=class{constructor(t,n){this.node=t,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${n}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),CA(t,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,CA(t,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function CA(e,t,n,r,i,s){var a;let o=0,l=!0,u=t.firstChild;const d=e.firstChild;if(d){for(let f=0,h=0;f<d.childCount;f++){const{colspan:p,colwidth:m}=d.child(f).attrs;for(let g=0;g<p;g++,h++){const v=i==h?s:m&&m[g],y=v?v+"px":"";if(o+=v||r,v||(l=!1),u)u.style.width!=y&&(u.style.width=y),u=u.nextSibling;else{const b=document.createElement("col");b.style.width=y,t.appendChild(b)}}}for(;u;){const f=u.nextSibling;(a=u.parentNode)==null||a.removeChild(u),u=f}l?(n.style.width=o+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=o+"px")}}var ts=new Mn("tableColumnResizing");function QKe({handleWidth:e=5,cellMinWidth:t=25,defaultCellMinWidth:n=100,View:r=XKe,lastColumnResizable:i=!0}={}){const s=new cn({key:ts,state:{init(a,o){var l,u;const d=(u=(l=s.spec)==null?void 0:l.props)==null?void 0:u.nodeViews,f=ri(o.schema).table.name;return r&&d&&(d[f]=(h,p)=>new r(h,n,p)),new JKe(-1,!1)},apply(a,o){return o.apply(a)}},props:{attributes:a=>{const o=ts.getState(a);return o&&o.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(a,o)=>{ZKe(a,o,e,i)},mouseleave:a=>{eGe(a)},mousedown:(a,o)=>{tGe(a,o,t,n)}},decorations:a=>{const o=ts.getState(a);if(o&&o.activeHandle>-1)return aGe(a,o.activeHandle)},nodeViews:{}}});return s}var JKe=class Nx{constructor(t,n){this.activeHandle=t,this.dragging=n}apply(t){const n=this,r=t.getMeta(ts);if(r&&r.setHandle!=null)return new Nx(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new Nx(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&t.docChanged){let i=t.mapping.map(n.activeHandle,-1);return NA(t.doc.resolve(i))||(i=-1),new Nx(i,n.dragging)}return n}};function ZKe(e,t,n,r){if(!e.editable)return;const i=ts.getState(e.state);if(i&&!i.dragging){const s=rGe(t.target);let a=-1;if(s){const{left:o,right:l}=s.getBoundingClientRect();t.clientX-o<=n?a=$$(e,t,"left",n):l-t.clientX<=n&&(a=$$(e,t,"right",n))}if(a!=i.activeHandle){if(!r&&a!==-1){const o=e.state.doc.resolve(a),l=o.node(-1),u=In.get(l),d=o.start(-1);if(u.colCount(o.pos-d)+o.nodeAfter.attrs.colspan-1==u.width-1)return}Fre(e,a)}}}function eGe(e){if(!e.editable)return;const t=ts.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&Fre(e,-1)}function tGe(e,t,n,r){var i;if(!e.editable)return!1;const s=(i=e.dom.ownerDocument.defaultView)!=null?i:window,a=ts.getState(e.state);if(!a||a.activeHandle==-1||a.dragging)return!1;const o=e.state.doc.nodeAt(a.activeHandle),l=nGe(e,a.activeHandle,o.attrs);e.dispatch(e.state.tr.setMeta(ts,{setDragging:{startX:t.clientX,startWidth:l}}));function u(f){s.removeEventListener("mouseup",u),s.removeEventListener("mousemove",d);const h=ts.getState(e.state);h!=null&&h.dragging&&(iGe(e,h.activeHandle,U$(h.dragging,f,n)),e.dispatch(e.state.tr.setMeta(ts,{setDragging:null})))}function d(f){if(!f.which)return u(f);const h=ts.getState(e.state);if(h&&h.dragging){const p=U$(h.dragging,f,n);z$(e,h.activeHandle,p,r)}}return z$(e,a.activeHandle,l,r),s.addEventListener("mouseup",u),s.addEventListener("mousemove",d),t.preventDefault(),!0}function nGe(e,t,{colspan:n,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const s=e.domAtPos(t);let o=s.node.childNodes[s.offset].offsetWidth,l=n;if(r)for(let u=0;u<n;u++)r[u]&&(o-=r[u],l--);return o/l}function rGe(e){for(;e&&e.nodeName!="TD"&&e.nodeName!="TH";)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}function $$(e,t,n,r){const i=n=="right"?-r:r,s=e.posAtCoords({left:t.clientX+i,top:t.clientY});if(!s)return-1;const{pos:a}=s,o=mp(e.state.doc.resolve(a));if(!o)return-1;if(n=="right")return o.pos;const l=In.get(o.node(-1)),u=o.start(-1),d=l.map.indexOf(o.pos-u);return d%l.width==0?-1:u+l.map[d-1]}function U$(e,t,n){const r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function Fre(e,t){e.dispatch(e.state.tr.setMeta(ts,{setHandle:t}))}function iGe(e,t,n){const r=e.state.doc.resolve(t),i=r.node(-1),s=In.get(i),a=r.start(-1),o=s.colCount(r.pos-a)+r.nodeAfter.attrs.colspan-1,l=e.state.tr;for(let u=0;u<s.height;u++){const d=u*s.width+o;if(u&&s.map[d]==s.map[d-s.width])continue;const f=s.map[d],h=i.nodeAt(f).attrs,p=h.colspan==1?0:o-s.colCount(f);if(h.colwidth&&h.colwidth[p]==n)continue;const m=h.colwidth?h.colwidth.slice():sGe(h.colspan);m[p]=n,l.setNodeMarkup(a+f,null,{...h,colwidth:m})}l.docChanged&&e.dispatch(l)}function z$(e,t,n,r){const i=e.state.doc.resolve(t),s=i.node(-1),a=i.start(-1),o=In.get(s).colCount(i.pos-a)+i.nodeAfter.attrs.colspan-1;let l=e.domAtPos(i.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&CA(s,l.firstChild,l,r,o,n)}function sGe(e){return Array(e).fill(0)}function aGe(e,t){var n;const r=[],i=e.doc.resolve(t),s=i.node(-1);if(!s)return $t.empty;const a=In.get(s),o=i.start(-1),l=a.colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1;for(let u=0;u<a.height;u++){const d=l+u*a.width;if((l==a.width-1||a.map[d]!=a.map[d+1])&&(u==0||a.map[d]!=a.map[d-a.width])){const f=a.map[d],h=o+f+s.nodeAt(f).nodeSize-1,p=document.createElement("div");p.className="column-resize-handle",(n=ts.getState(e))!=null&&n.dragging&&r.push(ar.node(o+f,o+f+s.nodeAt(f).nodeSize,{class:"column-resize-dragging"})),r.push(ar.widget(h,p))}}return $t.create(e.doc,r)}function oGe({allowTableNodeSelection:e=!1}={}){return new cn({key:Wl,state:{init(){return null},apply(t,n){const r=t.getMeta(Wl);if(r!=null)return r==-1?null:r;if(n==null||!t.docChanged)return n;const{deleted:i,pos:s}=t.mapping.mapResult(n);return i?null:s}},props:{decorations:bKe,handleDOMEvents:{mousedown:YKe},createSelectionBetween(t){return Wl.getState(t.state)!=null?t.state.selection:null},handleTripleClick:KKe,handleKeyDown:qKe,handlePaste:GKe},appendTransaction(t,n,r){return SKe(r,Dre(r,n),e)}})}var Bre=Ar.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?t.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:e}){return["td",tn(this.options.HTMLAttributes,e),0]}}),$re=Ar.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?t.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:e}){return["th",tn(this.options.HTMLAttributes,e),0]}}),Ure=Ar.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:e}){return["tr",tn(this.options.HTMLAttributes,e),0]}});function kA(e,t){return t?["width",`${Math.max(t,e)}px`]:["min-width",`${e}px`]}function H$(e,t,n,r,i,s){var a;let o=0,l=!0,u=t.firstChild;const d=e.firstChild;if(d!==null)for(let f=0,h=0;f<d.childCount;f+=1){const{colspan:p,colwidth:m}=d.child(f).attrs;for(let g=0;g<p;g+=1,h+=1){const v=i===h?s:m&&m[g],y=v?`${v}px`:"";if(o+=v||r,v||(l=!1),u){if(u.style.width!==y){const[b,x]=kA(r,v);u.style.setProperty(b,x)}u=u.nextSibling}else{const b=document.createElement("col"),[x,S]=kA(r,v);b.style.setProperty(x,S),t.appendChild(b)}}}for(;u;){const f=u.nextSibling;(a=u.parentNode)==null||a.removeChild(u),u=f}l?(n.style.width=`${o}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${o}px`)}var lGe=class{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),H$(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!==this.node.type?!1:(this.node=e,H$(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type==="attributes"&&(e.target===this.table||this.colgroup.contains(e.target))}};function cGe(e,t,n,r){let i=0,s=!0;const a=[],o=e.firstChild;if(!o)return{};for(let f=0,h=0;f<o.childCount;f+=1){const{colspan:p,colwidth:m}=o.child(f).attrs;for(let g=0;g<p;g+=1,h+=1){const v=n===h?r:m&&m[g];i+=v||t,v||(s=!1);const[y,b]=kA(t,v);a.push(["col",{style:`${y}: ${b}`}])}}const l=s?`${i}px`:"",u=s?"":`${i}px`;return{colgroup:["colgroup",{},...a],tableWidth:l,tableMinWidth:u}}function V$(e,t){return e.createAndFill()}function uGe(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;const t={};return Object.keys(e.nodes).forEach(n=>{const r=e.nodes[n];r.spec.tableRole&&(t[r.spec.tableRole]=r)}),e.cached.tableNodeTypes=t,t}function dGe(e,t,n,r,i){const s=uGe(e),a=[],o=[];for(let u=0;u<n;u+=1){const d=V$(s.cell);if(d&&o.push(d),r){const f=V$(s.header_cell);f&&a.push(f)}}const l=[];for(let u=0;u<t;u+=1)l.push(s.row.createChecked(null,r&&u===0?a:o));return s.table.createChecked(null,l)}function fGe(e){return e instanceof en}var Bv=({editor:e})=>{const{selection:t}=e.state;if(!fGe(t))return!1;let n=0;const r=hne(t.ranges[0].$from,s=>s.type.name==="table");return r==null||r.node.descendants(s=>{if(s.type.name==="table")return!1;["tableCell","tableHeader"].includes(s.type.name)&&(n+=1)}),n===t.ranges.length?(e.commands.deleteTable(),!0):!1},zre=Ar.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:lGe,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:e,HTMLAttributes:t}){const{colgroup:n,tableWidth:r,tableMinWidth:i}=cGe(e,this.options.cellMinWidth);return["table",tn(this.options.HTMLAttributes,t,{style:r?`width: ${r}`:`min-width: ${i}`}),n,["tbody",0]]},addCommands(){return{insertTable:({rows:e=3,cols:t=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:i,editor:s})=>{const a=dGe(s.schema,e,t,n);if(i){const o=r.selection.from+1;r.replaceSelectionWith(a).scrollIntoView().setSelection(Ye.near(r.doc.resolve(o)))}return!0},addColumnBefore:()=>({state:e,dispatch:t})=>TKe(e,t),addColumnAfter:()=>({state:e,dispatch:t})=>CKe(e,t),deleteColumn:()=>({state:e,dispatch:t})=>AKe(e,t),addRowBefore:()=>({state:e,dispatch:t})=>OKe(e,t),addRowAfter:()=>({state:e,dispatch:t})=>PKe(e,t),deleteRow:()=>({state:e,dispatch:t})=>DKe(e,t),deleteTable:()=>({state:e,dispatch:t})=>UKe(e,t),mergeCells:()=>({state:e,dispatch:t})=>P$(e,t),splitCell:()=>({state:e,dispatch:t})=>I$(e,t),toggleHeaderColumn:()=>({state:e,dispatch:t})=>u0("column")(e,t),toggleHeaderRow:()=>({state:e,dispatch:t})=>u0("row")(e,t),toggleHeaderCell:()=>({state:e,dispatch:t})=>BKe(e,t),mergeOrSplit:()=>({state:e,dispatch:t})=>P$(e,t)?!0:I$(e,t),setCellAttribute:(e,t)=>({state:n,dispatch:r})=>LKe(e,t)(n,r),goToNextCell:()=>({state:e,dispatch:t})=>M$(1)(e,t),goToPreviousCell:()=>({state:e,dispatch:t})=>M$(-1)(e,t),fixTables:()=>({state:e,dispatch:t})=>(t&&Dre(e),!0),setCellSelection:e=>({tr:t,dispatch:n})=>{if(n){const r=en.create(t.doc,e.anchorCell,e.headCell);t.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:Bv,"Mod-Backspace":Bv,Delete:Bv,"Mod-Delete":Bv}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[QKe({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],oGe({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(e){const t={name:e.name,options:e.options,storage:e.storage};return{tableRole:Ct(qe(e,"tableRole",t))}}});Rn.create({name:"tableKit",addExtensions(){const e=[];return this.options.table!==!1&&e.push(zre.configure(this.options.table)),this.options.tableCell!==!1&&e.push(Bre.configure(this.options.tableCell)),this.options.tableHeader!==!1&&e.push($re.configure(this.options.tableHeader)),this.options.tableRow!==!1&&e.push(Ure.configure(this.options.tableRow)),e}});var hGe=Rn.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(n=>t.updateAttributes(n,{textAlign:e})).every(n=>n):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).every(t=>t),toggleTextAlign:e=>({editor:t,commands:n})=>this.options.alignments.includes(e)?t.isActive({textAlign:e})?n.unsetTextAlign():n.setTextAlign(e):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),pGe=hGe,mGe=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,gGe=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,yGe=Zc.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:e=>e.getAttribute("data-color")||e.style.backgroundColor,renderHTML:e=>e.color?{"data-color":e.color,style:`background-color: ${e.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:e}){return["mark",tn(this.options.HTMLAttributes,e),0]},addCommands(){return{setHighlight:e=>({commands:t})=>t.setMark(this.name,e),toggleHighlight:e=>({commands:t})=>t.toggleMark(this.name,e),unsetHighlight:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[_d({find:mGe,type:this.type})]},addPasteRules(){return[Pc({find:gGe,type:this.type})]}}),vGe=yGe,xGe=dre,bGe=ure;function wGe(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",a="(?!struct)("+r+"|"+t.optional(i)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",o={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},h={className:"title",begin:t.optional(i)+e.IDENT_RE,relevance:0},p=t.optional(i)+e.IDENT_RE+"\\s*\\(",m=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],g=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],v=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],y=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],S={type:g,keyword:m,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:v},E={className:"function.dispatch",relevance:0,keywords:{_hint:y},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},_=[E,f,o,n,e.C_BLOCK_COMMENT_MODE,d,u],T={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:S,contains:_.concat([{begin:/\(/,end:/\)/,keywords:S,contains:_.concat(["self"]),relevance:0}]),relevance:0},C={className:"function",begin:"("+a+"[\\*&\\s]+)+"+p,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:S,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:S,relevance:0},{begin:p,returnBegin:!0,contains:[h],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[u,d]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:S,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,u,d,o,{begin:/\(/,end:/\)/,keywords:S,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,u,d,o]}]},o,n,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:S,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(T,C,E,_,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:S,contains:["self",o]},{begin:e.IDENT_RE+"::",keywords:S},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function EGe(e){const t={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},n=wGe(e),r=n.keywords;return r.type=[...r.type,...t.type],r.literal=[...r.literal,...t.literal],r.built_in=[...r.built_in,...t.built_in],r._hints=t._hints,n.name="Arduino",n.aliases=["ino"],n.supersetOf="cpp",n}function SGe(e){const t=e.regex,n={},r={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:t.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},r]});const i={className:"subst",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]},s=e.inherit(e.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),a={begin:/<<-?\s*(?=\w+)/,starts:{contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},o={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,n,i]};i.contains.push(o);const l={match:/\\"/},u={className:"string",begin:/'/,end:/'/},d={match:/\\'/},f={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},e.NUMBER_MODE,n]},h=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],p=e.SHEBANG({binary:`(${h.join("|")})`,relevance:10}),m={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},g=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],v=["true","false"],y={match:/(\/[a-z._-]+)+/},b=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],x=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],S=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],E=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:g,literal:v,built_in:[...b,...x,"set","shopt",...S,...E]},contains:[p,e.SHEBANG(),m,f,s,a,y,o,l,u,d,n]}}function _Ge(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",a="("+r+"|"+t.optional(i)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",o={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},h={className:"title",begin:t.optional(i)+e.IDENT_RE,relevance:0},p=t.optional(i)+e.IDENT_RE+"\\s*\\(",v={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},y=[f,o,n,e.C_BLOCK_COMMENT_MODE,d,u],b={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:v,contains:y.concat([{begin:/\(/,end:/\)/,keywords:v,contains:y.concat(["self"]),relevance:0}]),relevance:0},x={begin:"("+a+"[\\*&\\s]+)+"+p,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:v,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:v,relevance:0},{begin:p,returnBegin:!0,contains:[e.inherit(h,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,u,d,o,{begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,u,d,o]}]},o,n,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C",aliases:["h"],keywords:v,disableAutodetect:!0,illegal:"</",contains:[].concat(b,x,y,[f,{begin:e.IDENT_RE+"::",keywords:v},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},e.TITLE_MODE]}]),exports:{preprocessor:f,strings:u,keywords:v}}}function NGe(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",a="(?!struct)("+r+"|"+t.optional(i)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",o={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},h={className:"title",begin:t.optional(i)+e.IDENT_RE,relevance:0},p=t.optional(i)+e.IDENT_RE+"\\s*\\(",m=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],g=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],v=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],y=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],S={type:g,keyword:m,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:v},E={className:"function.dispatch",relevance:0,keywords:{_hint:y},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},_=[E,f,o,n,e.C_BLOCK_COMMENT_MODE,d,u],T={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:S,contains:_.concat([{begin:/\(/,end:/\)/,keywords:S,contains:_.concat(["self"]),relevance:0}]),relevance:0},C={className:"function",begin:"("+a+"[\\*&\\s]+)+"+p,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:S,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:S,relevance:0},{begin:p,returnBegin:!0,contains:[h],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[u,d]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:S,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,u,d,o,{begin:/\(/,end:/\)/,keywords:S,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,u,d,o]}]},o,n,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:S,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(T,C,E,_,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:S,contains:["self",o]},{begin:e.IDENT_RE+"::",keywords:S},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function TGe(e){const t=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],n=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],r=["default","false","null","true"],i=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],s=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],a={keyword:i.concat(s),built_in:t,literal:r},o=e.inherit(e.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),l={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},u={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},d={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},f=e.inherit(d,{illegal:/\n/}),h={className:"subst",begin:/\{/,end:/\}/,keywords:a},p=e.inherit(h,{illegal:/\n/}),m={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},e.BACKSLASH_ESCAPE,p]},g={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},h]},v=e.inherit(g,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},p]});h.contains=[g,m,d,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,l,e.C_BLOCK_COMMENT_MODE],p.contains=[v,m,f,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,l,e.inherit(e.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const y={variants:[u,g,m,d,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},b={begin:"<",end:">",contains:[{beginKeywords:"in out"},o]},x=e.IDENT_RE+"(<"+e.IDENT_RE+"(\\s*,\\s*"+e.IDENT_RE+")*>)?(\\[\\])?",S={begin:"@"+e.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:a,illegal:/::/,contains:[e.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},y,l,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},o,b,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[o,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[o,b,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+x+"\\s+)+"+e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:a,contains:[{beginKeywords:n.join(" "),relevance:0},{begin:e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[e.TITLE_MODE,b],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,relevance:0,contains:[y,l,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},S]}}const CGe=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),kGe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],AGe=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],jGe=[...kGe,...AGe],OGe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),PGe=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),IGe=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),DGe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function MGe(e){const t=e.regex,n=CGe(e),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},i="and or not only",s=/@-?\w[\w]*(-\w+)*/,a="[a-zA-Z-][a-zA-Z0-9_-]*",o=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,r,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+a,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+PGe.join("|")+")"},{begin:":(:)?("+IGe.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+DGe.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...o,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...o,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:s},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:i,attribute:OGe.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...o,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+jGe.join("|")+")\\b"}]}}function RGe(e){const t=e.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:t.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:t.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function LGe(e){const s={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:s,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:s,illegal:/["']/}]}]}}function FGe(e){const t=e.regex,n=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[e.HASH_COMMENT_MODE,e.QUOTE_STRING_MODE,e.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:t.concat(n,t.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function BGe(e){const t=e.regex,n={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:e.NUMBER_RE}]},r=e.COMMENT();r.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const i={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},s={className:"literal",begin:/\bon|off|true|false|yes|no\b/},a={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},o={begin:/\[/,end:/\]/,contains:[r,s,i,a,n,"self"],relevance:0},l=/[A-Za-z0-9_-]+/,u=/"(\\"|[^"])*"/,d=/'[^']*'/,f=t.either(l,u,d),h=t.concat(f,"(\\s*\\.\\s*",f,")*",t.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[r,{className:"section",begin:/\[+/,end:/\]+/},{begin:h,className:"attr",starts:{end:/$/,contains:[r,o,s,i,a,n]}}]}}var hf="[0-9](_*[0-9])*",$v=`\\.(${hf})`,Uv="[0-9a-fA-F](_*[0-9a-fA-F])*",W$={className:"number",variants:[{begin:`(\\b(${hf})((${$v})|\\.)?|(${$v}))[eE][+-]?(${hf})[fFdD]?\\b`},{begin:`\\b(${hf})((${$v})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${$v})[fFdD]?\\b`},{begin:`\\b(${hf})[fFdD]\\b`},{begin:`\\b0[xX]((${Uv})\\.?|(${Uv})?\\.(${Uv}))[pP][+-]?(${hf})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${Uv})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function Hre(e,t,n){return n===-1?"":e.replace(t,r=>Hre(e,t,n-1))}function $Ge(e){const t=e.regex,n="[-a-zA-Z_$][-a-zA-Z_$0-9]*",r=n+Hre("(?:<"+n+"~~~(?:\\s*,\\s*"+n+"~~~)*>)?",/~~~/g,2),l={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},u={className:"meta",begin:"@"+n,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},d={className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[e.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:l,illegal:/<\/|#/,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[e.BACKSLASH_ESCAPE]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[t.concat(/(?!else)/,n),/\s+/,n,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,n],className:{1:"keyword",3:"title.class"},contains:[d,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+r+"\\s+)",e.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:l,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[u,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,W$,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},W$,u]}}const q$="[A-Za-z$_][0-9A-Za-z$_]*",UGe=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],zGe=["true","false","null","undefined","NaN","Infinity"],Vre=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],Wre=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],qre=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],HGe=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],VGe=[].concat(qre,Vre,Wre);function WGe(e){const t=e.regex,n=(R,{after:F})=>{const I="</"+R[0].slice(1);return R.input.indexOf(I,F)!==-1},r=q$,i={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,a={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(R,F)=>{const I=R[0].length+R.index,X=R.input[I];if(X==="<"||X===","){F.ignoreMatch();return}X===">"&&(n(R,{after:I})||F.ignoreMatch());let G;const $=R.input.substring(I);if(G=$.match(/^\s*=/)){F.ignoreMatch();return}if((G=$.match(/^\s+extends\s+/))&&G.index===0){F.ignoreMatch();return}}},o={$pattern:q$,keyword:UGe,literal:zGe,built_in:VGe,"variable.language":HGe},l="[0-9](_?[0-9])*",u=`\\.(${l})`,d="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${d})((${u})|\\.)?|(${u}))[eE][+-]?(${l})\\b`},{begin:`\\b(${d})\\b((${u})\\b|\\.)?|(${u})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},h={className:"subst",begin:"\\$\\{",end:"\\}",keywords:o,contains:[]},p={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,h],subLanguage:"xml"}},m={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,h],subLanguage:"css"}},g={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,h],subLanguage:"graphql"}},v={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,h]},b={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},x=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,p,m,g,v,{match:/\$\d+/},f];h.contains=x.concat({begin:/\{/,end:/\}/,keywords:o,contains:["self"].concat(x)});const S=[].concat(b,h.contains),E=S.concat([{begin:/(\s*)\(/,end:/\)/,keywords:o,contains:["self"].concat(S)}]),_={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:E},T={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,t.concat(r,"(",t.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},C={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...Vre,...Wre]}},k={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},A={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[_],illegal:/%/},j={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function D(R){return t.concat("(?!",R.join("|"),")")}const P={match:t.concat(/\b/,D([...qre,"super","import"].map(R=>`${R}\\s*\\(`)),r,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},M={begin:t.concat(/\./,t.lookahead(t.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},L={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},_]},O="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",B={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(O)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[_]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:o,exports:{PARAMS_CONTAINS:E,CLASS_REFERENCE:C},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),k,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,p,m,g,v,b,{match:/\$\d+/},f,C,{scope:"attr",match:r+t.lookahead(":"),relevance:0},B,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[b,e.REGEXP_MODE,{className:"function",begin:O,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:E}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i.begin,end:i.end},{match:s},{begin:a.begin,"on:begin":a.isTrulyOpeningTag,end:a.end}],subLanguage:"xml",contains:[{begin:a.begin,end:a.end,skip:!0,contains:["self"]}]}]},A,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[_,e.inherit(e.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},M,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[_]},P,j,T,L,{match:/\$[(.]/}]}}function qGe(e){const t={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},n={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],i={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:r},contains:[t,n,e.QUOTE_STRING_MODE,i,e.C_NUMBER_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var pf="[0-9](_*[0-9])*",zv=`\\.(${pf})`,Hv="[0-9a-fA-F](_*[0-9a-fA-F])*",KGe={className:"number",variants:[{begin:`(\\b(${pf})((${zv})|\\.)?|(${zv}))[eE][+-]?(${pf})[fFdD]?\\b`},{begin:`\\b(${pf})((${zv})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${zv})[fFdD]?\\b`},{begin:`\\b(${pf})[fFdD]\\b`},{begin:`\\b0[xX]((${Hv})\\.?|(${Hv})?\\.(${Hv}))[pP][+-]?(${pf})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${Hv})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function GGe(e){const t={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},n={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},r={className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"@"},i={className:"subst",begin:/\$\{/,end:/\}/,contains:[e.C_NUMBER_MODE]},s={className:"variable",begin:"\\$"+e.UNDERSCORE_IDENT_RE},a={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[s,i]},{begin:"'",end:"'",illegal:/\n/,contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[e.BACKSLASH_ESCAPE,s,i]}]};i.contains.push(a);const o={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+e.UNDERSCORE_IDENT_RE+")?"},l={className:"meta",begin:"@"+e.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[e.inherit(a,{className:"string"}),"self"]}]},u=KGe,d=e.COMMENT("/\\*","\\*/",{contains:[e.C_BLOCK_COMMENT_MODE]}),f={variants:[{className:"type",begin:e.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},h=f;return h.variants[1].contains=[f],f.variants[1].contains=[h],{name:"Kotlin",aliases:["kt","kts"],keywords:t,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),e.C_LINE_COMMENT_MODE,d,n,r,o,l,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:t,relevance:5,contains:[{begin:e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[e.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:t,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[f,e.C_LINE_COMMENT_MODE,d],relevance:0},e.C_LINE_COMMENT_MODE,d,o,l,a,e.C_NUMBER_MODE]},d]},{begin:[/class|interface|trait/,/\s+/,e.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},e.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},o,l]},a,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},u]}}const YGe=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),XGe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],QGe=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],JGe=[...XGe,...QGe],ZGe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),Kre=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),Gre=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),eYe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),tYe=Kre.concat(Gre).sort().reverse();function nYe(e){const t=YGe(e),n=tYe,r="and or not only",i="[\\w-]+",s="("+i+"|@\\{"+i+"\\})",a=[],o=[],l=function(x){return{className:"string",begin:"~?"+x+".*?"+x}},u=function(x,S,E){return{className:x,begin:S,relevance:E}},d={$pattern:/[a-z-]+/,keyword:r,attribute:ZGe.join(" ")},f={begin:"\\(",end:"\\)",contains:o,keywords:d,relevance:0};o.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,l("'"),l('"'),t.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},t.HEXCOLOR,f,u("variable","@@?"+i,10),u("variable","@\\{"+i+"\\}"),u("built_in","~?`[^`]*?`"),{className:"attribute",begin:i+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},t.IMPORTANT,{beginKeywords:"and not"},t.FUNCTION_DISPATCH);const h=o.concat({begin:/\{/,end:/\}/,contains:a}),p={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(o)},m={begin:s+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+eYe.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:o}}]},g={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:d,returnEnd:!0,contains:o,relevance:0}},v={className:"variable",variants:[{begin:"@"+i+"\\s*:",relevance:15},{begin:"@"+i}],starts:{end:"[;}]",returnEnd:!0,contains:h}},y={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:s,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,p,u("keyword","all\\b"),u("variable","@\\{"+i+"\\}"),{begin:"\\b("+JGe.join("|")+")\\b",className:"selector-tag"},t.CSS_NUMBER_MODE,u("selector-tag",s,0),u("selector-id","#"+s),u("selector-class","\\."+s,0),u("selector-tag","&",0),t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+Kre.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+Gre.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:h},{begin:"!important"},t.FUNCTION_DISPATCH]},b={begin:i+`:(:)?(${n.join("|")})`,returnBegin:!0,contains:[y]};return a.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,g,v,b,m,y,p,t.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:a}}function rYe(e){const t="\\[=*\\[",n="\\]=*\\]",r={begin:t,end:n,contains:["self"]},i=[e.COMMENT("--(?!"+t+")","$"),e.COMMENT("--"+t,n,{contains:[r],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:e.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:i.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[e.inherit(e.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:i}].concat(i)},e.C_NUMBER_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"string",begin:t,end:n,contains:[r],relevance:5}])}}function iYe(e){const t={className:"variable",variants:[{begin:"\\$\\("+e.UNDERSCORE_IDENT_RE+"\\)",contains:[e.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},n={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,t]},r={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[t,n]},i={begin:"^"+e.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},s={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},a={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[t]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[e.HASH_COMMENT_MODE,t,n,r,i,s,a]}}function sYe(e){const t=e.regex,n={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},r={begin:"^[-\\*]{3,}",end:"$"},i={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},s={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},a={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},o=/[A-Za-z][A-Za-z0-9+.-]*/,l={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:t.concat(/\[.+?\]\(/,o,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},u={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},d={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},f=e.inherit(u,{contains:[]}),h=e.inherit(d,{contains:[]});u.contains.push(h),d.contains.push(f);let p=[n,l];return[u,d,f,h].forEach(y=>{y.contains=y.contains.concat(p)}),p=p.concat(u,d),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:p},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:p}]}]},n,s,u,d,{className:"quote",begin:"^>\\s+",contains:p,end:"$"},i,r,l,a,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function aYe(e){const t={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},n=/[a-zA-Z@][a-zA-Z0-9_]*/,o={"variable.language":["this","super"],$pattern:n,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},l={$pattern:n,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:o,illegal:"</",contains:[t,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.C_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+l.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:l,contains:[e.UNDERSCORE_TITLE_MODE]},{begin:"\\."+e.UNDERSCORE_IDENT_RE,relevance:0}]}}function oYe(e){const t=e.regex,n=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],r=/[dualxmsipngr]{0,12}/,i={$pattern:/[\w.]+/,keyword:n.join(" ")},s={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:i},a={begin:/->\{/,end:/\}/},o={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},l={scope:"variable",variants:[{begin:/\$\d/},{begin:t.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[o]},u={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},d=[e.BACKSLASH_ESCAPE,s,l],f=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],h=(g,v,y="\\1")=>{const b=y==="\\1"?y:t.concat(y,v);return t.concat(t.concat("(?:",g,")"),v,/(?:\\.|[^\\\/])*?/,b,/(?:\\.|[^\\\/])*?/,y,r)},p=(g,v,y)=>t.concat(t.concat("(?:",g,")"),v,/(?:\\.|[^\\\/])*?/,y,r),m=[l,e.HASH_COMMENT_MODE,e.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),a,{className:"string",contains:d,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},u,{begin:"(\\/\\/|"+e.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[e.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:h("s|tr|y",t.either(...f,{capture:!0}))},{begin:h("s|tr|y","\\(","\\)")},{begin:h("s|tr|y","\\[","\\]")},{begin:h("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:p("(?:m|qr)?",/\//,/\//)},{begin:p("m|qr",t.either(...f,{capture:!0}),/\1/)},{begin:p("m|qr",/\(/,/\)/)},{begin:p("m|qr",/\[/,/\]/)},{begin:p("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,o]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,o,u]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return s.contains=m,a.contains=m,{name:"Perl",aliases:["pl","pm"],keywords:i,contains:m}}function lYe(e){const t=e.regex,n=/(?![A-Za-z0-9])(?![$])/,r=t.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,n),i=t.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,n),s=t.concat(/[A-Z]+/,n),a={scope:"variable",match:"\\$+"+r},o={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},l={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},u=e.inherit(e.APOS_STRING_MODE,{illegal:null}),d=e.inherit(e.QUOTE_STRING_MODE,{illegal:null,contains:e.QUOTE_STRING_MODE.contains.concat(l)}),f={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:e.QUOTE_STRING_MODE.contains.concat(l),"on:begin":(M,L)=>{L.data._beginMatch=M[1]||M[2]},"on:end":(M,L)=>{L.data._beginMatch!==M[1]&&L.ignoreMatch()}},h=e.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),p=`[ 	
]`,m={scope:"string",variants:[d,u,f,h]},g={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},v=["false","null","true"],y=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],b=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],S={keyword:y,literal:(M=>{const L=[];return M.forEach(O=>{L.push(O),O.toLowerCase()===O?L.push(O.toUpperCase()):L.push(O.toLowerCase())}),L})(v),built_in:b},E=M=>M.map(L=>L.replace(/\|\d+$/,"")),_={variants:[{match:[/new/,t.concat(p,"+"),t.concat("(?!",E(b).join("\\b|"),"\\b)"),i],scope:{1:"keyword",4:"title.class"}}]},T=t.concat(r,"\\b(?!\\()"),C={variants:[{match:[t.concat(/::/,t.lookahead(/(?!class\b)/)),T],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[i,t.concat(/::/,t.lookahead(/(?!class\b)/)),T],scope:{1:"title.class",3:"variable.constant"}},{match:[i,t.concat("::",t.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[i,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},k={scope:"attr",match:t.concat(r,t.lookahead(":"),t.lookahead(/(?!::)/))},A={relevance:0,begin:/\(/,end:/\)/,keywords:S,contains:[k,a,C,e.C_BLOCK_COMMENT_MODE,m,g,_]},j={relevance:0,match:[/\b/,t.concat("(?!fn\\b|function\\b|",E(y).join("\\b|"),"|",E(b).join("\\b|"),"\\b)"),r,t.concat(p,"*"),t.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[A]};A.contains.push(j);const D=[k,C,e.C_BLOCK_COMMENT_MODE,m,g,_],P={begin:t.concat(/#\[\s*\\?/,t.either(i,s)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:v,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:v,keyword:["new","array"]},contains:["self",...D]},...D,{scope:"meta",variants:[{match:i},{match:s}]}]};return{case_insensitive:!1,keywords:S,contains:[P,e.HASH_COMMENT_MODE,e.COMMENT("//","$"),e.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:e.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},o,{scope:"variable.language",match:/\$this\b/},a,j,C,{match:[/const/,/\s/,r],scope:{1:"keyword",3:"variable.constant"}},_,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},e.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:S,contains:["self",P,a,C,e.C_BLOCK_COMMENT_MODE,m,g]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[e.inherit(e.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},e.UNDERSCORE_TITLE_MODE]},m,g]}}function cYe(e){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},e.inherit(e.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),e.inherit(e.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function uYe(e){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function dYe(e){const t=e.regex,n=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],o={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},l={className:"meta",begin:/^(>>>|\.\.\.) /},u={className:"subst",begin:/\{/,end:/\}/,keywords:o,illegal:/#/},d={begin:/\{\{/,relevance:0},f={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,l,d,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,l,d,u]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,d,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,d,u]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},h="[0-9](_?[0-9])*",p=`(\\b(${h}))?\\.(${h})|\\b(${h})\\.`,m=`\\b|${r.join("|")}`,g={className:"number",relevance:0,variants:[{begin:`(\\b(${h})|(${p}))[eE][+-]?(${h})[jJ]?(?=${m})`},{begin:`(${p})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${m})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${m})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${m})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${m})`},{begin:`\\b(${h})[jJ](?=${m})`}]},v={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:o,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},y={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:["self",l,g,f,e.HASH_COMMENT_MODE]}]};return u.contains=[f,g,l],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:o,illegal:/(<\/|\?)|=>/,contains:[l,g,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},f,v,e.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[y]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[g,y,f]}]}}function fYe(e){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function hYe(e){const t=e.regex,n=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,r=t.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),i=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,s=t.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:n,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[e.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:t.lookahead(t.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:n},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),e.HASH_COMMENT_MODE,{scope:"string",contains:[e.BACKSLASH_ESCAPE],variants:[e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[i,r]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,r]},{scope:{1:"punctuation",2:"number"},match:[s,r]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,r]}]},{scope:{3:"operator"},match:[n,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:i},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:s},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}function pYe(e){const t=e.regex,n="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",r=t.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),i=t.concat(r,/(::\w+)*/),a={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},o={className:"doctag",begin:"@[A-Za-z]+"},l={begin:"#<",end:">"},u=[e.COMMENT("#","$",{contains:[o]}),e.COMMENT("^=begin","^=end",{contains:[o],relevance:10}),e.COMMENT("^__END__",e.MATCH_NOTHING_RE)],d={className:"subst",begin:/#\{/,end:/\}/,keywords:a},f={className:"string",contains:[e.BACKSLASH_ESCAPE,d],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:t.concat(/<<[-~]?'?/,t.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[e.BACKSLASH_ESCAPE,d]})]}]},h="[1-9](_?[0-9])*|0",p="[0-9](_?[0-9])*",m={className:"number",relevance:0,variants:[{begin:`\\b(${h})(\\.(${p}))?([eE][+-]?(${p})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},g={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:a}]},_=[f,{variants:[{match:[/class\s+/,i,/\s+<\s+/,i]},{match:[/\b(class|module)\s+/,i]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:a},{match:[/(include|extend)\s+/,i],scope:{2:"title.class"},keywords:a},{relevance:0,match:[i,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:r,scope:"title.class"},{match:[/def/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[g]},{begin:e.IDENT_RE+"::"},{className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[f,{begin:n}],relevance:0},m,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:a},{begin:"("+e.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[e.BACKSLASH_ESCAPE,d],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(l,u),relevance:0}].concat(l,u);d.contains=_,g.contains=_;const A=[{begin:/^\s*=>/,starts:{end:"$",contains:_}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:a,contains:_}}];return u.unshift(l),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:a,illegal:/\/\*/,contains:[e.SHEBANG({binary:"ruby"})].concat(A).concat(u).concat(_)}}function mYe(e){const t=e.regex,n=/(r#)?/,r=t.concat(n,e.UNDERSCORE_IDENT_RE),i=t.concat(n,e.IDENT_RE),s={className:"title.function.invoke",relevance:0,begin:t.concat(/\b/,/(?!let|for|while|if|else|match\b)/,i,t.lookahead(/\s*\(/))},a="([ui](8|16|32|64|128|size)|f(32|64))?",o=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],l=["true","false","Some","None","Ok","Err"],u=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],d=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:e.IDENT_RE+"!?",type:d,keyword:o,literal:l,built_in:u},illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.COMMENT("/\\*","\\*/",{contains:["self"]}),e.inherit(e.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+a},{begin:"\\b0o([0-7_]+)"+a},{begin:"\\b0x([A-Fa-f0-9_]+)"+a},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+a}],relevance:0},{begin:[/fn/,/\s+/,r],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,r],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,r,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:e.IDENT_RE+"::",keywords:{keyword:"Self",built_in:u,type:d}},{className:"punctuation",begin:"->"},s]}}const gYe=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),yYe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],vYe=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],xYe=[...yYe,...vYe],bYe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),wYe=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),EYe=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),SYe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function _Ye(e){const t=gYe(e),n=EYe,r=wYe,i="@[a-z-]+",s="and or not only",o={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+xYe.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},o,{begin:/\(/,end:/\)/,contains:[t.CSS_NUMBER_MODE]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+SYe.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[t.BLOCK_COMMENT,o,t.HEXCOLOR,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.IMPORTANT,t.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:i,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:bYe.join(" ")},contains:[{begin:i,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},o,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.HEXCOLOR,t.CSS_NUMBER_MODE]},t.FUNCTION_DISPATCH]}}function NYe(e){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function TYe(e){const t=e.regex,n=e.COMMENT("--","$"),r={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},i={begin:/"/,end:/"/,contains:[{match:/""/}]},s=["true","false","unknown"],a=["double precision","large object","with timezone","without timezone"],o=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],l=["add","asc","collation","desc","final","first","last","view"],u=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],d=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],f=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],h=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],p=d,m=[...u,...l].filter(E=>!d.includes(E)),g={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},v={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},y={match:t.concat(/\b/,t.either(...p),/\s*\(/),relevance:0,keywords:{built_in:p}};function b(E){return t.concat(/\b/,t.either(...E.map(_=>_.replace(/\s+/,"\\s+"))),/\b/)}const x={scope:"keyword",match:b(h),relevance:0};function S(E,{exceptions:_,when:T}={}){const C=T;return _=_||[],E.map(k=>k.match(/\|\d+$/)||_.includes(k)?k:C(k)?`${k}|0`:k)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:S(m,{when:E=>E.length<3}),literal:s,type:o,built_in:f},contains:[{scope:"type",match:b(a)},x,y,g,r,i,e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,n,v]}}function Yre(e){return e?typeof e=="string"?e:e.source:null}function Xp(e){return Lt("(?=",e,")")}function Lt(...e){return e.map(n=>Yre(n)).join("")}function CYe(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function fi(...e){return"("+(CYe(e).capture?"":"?:")+e.map(r=>Yre(r)).join("|")+")"}const UM=e=>Lt(/\b/,e,/\w$/.test(e)?/\b/:/\B/),kYe=["Protocol","Type"].map(UM),K$=["init","self"].map(UM),AYe=["Any","Self"],CT=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],G$=["false","nil","true"],jYe=["assignment","associativity","higherThan","left","lowerThan","none","right"],OYe=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],Y$=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],Xre=fi(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),Qre=fi(Xre,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),kT=Lt(Xre,Qre,"*"),Jre=fi(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),lw=fi(Jre,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),Fa=Lt(Jre,lw,"*"),Vv=Lt(/[A-Z]/,lw,"*"),PYe=["attached","autoclosure",Lt(/convention\(/,fi("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",Lt(/objc\(/,Fa,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],IYe=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function DYe(e){const t={match:/\s+/,relevance:0},n=e.COMMENT("/\\*","\\*/",{contains:["self"]}),r=[e.C_LINE_COMMENT_MODE,n],i={match:[/\./,fi(...kYe,...K$)],className:{2:"keyword"}},s={match:Lt(/\./,fi(...CT)),relevance:0},a=CT.filter(Y=>typeof Y=="string").concat(["_|0"]),o=CT.filter(Y=>typeof Y!="string").concat(AYe).map(UM),l={variants:[{className:"keyword",match:fi(...o,...K$)}]},u={$pattern:fi(/\b\w+/,/#\w+/),keyword:a.concat(OYe),literal:G$},d=[i,s,l],f={match:Lt(/\./,fi(...Y$)),relevance:0},h={className:"built_in",match:Lt(/\b/,fi(...Y$),/(?=\()/)},p=[f,h],m={match:/->/,relevance:0},g={className:"operator",relevance:0,variants:[{match:kT},{match:`\\.(\\.|${Qre})+`}]},v=[m,g],y="([0-9]_*)+",b="([0-9a-fA-F]_*)+",x={className:"number",relevance:0,variants:[{match:`\\b(${y})(\\.(${y}))?([eE][+-]?(${y}))?\\b`},{match:`\\b0x(${b})(\\.(${b}))?([pP][+-]?(${y}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},S=(Y="")=>({className:"subst",variants:[{match:Lt(/\\/,Y,/[0\\tnr"']/)},{match:Lt(/\\/,Y,/u\{[0-9a-fA-F]{1,8}\}/)}]}),E=(Y="")=>({className:"subst",match:Lt(/\\/,Y,/[\t ]*(?:[\r\n]|\r\n)/)}),_=(Y="")=>({className:"subst",label:"interpol",begin:Lt(/\\/,Y,/\(/),end:/\)/}),T=(Y="")=>({begin:Lt(Y,/"""/),end:Lt(/"""/,Y),contains:[S(Y),E(Y),_(Y)]}),C=(Y="")=>({begin:Lt(Y,/"/),end:Lt(/"/,Y),contains:[S(Y),_(Y)]}),k={className:"string",variants:[T(),T("#"),T("##"),T("###"),C(),C("#"),C("##"),C("###")]},A=[e.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[e.BACKSLASH_ESCAPE]}],j={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:A},D=Y=>{const pe=Lt(Y,/\//),W=Lt(/\//,Y);return{begin:pe,end:W,contains:[...A,{scope:"comment",begin:`#(?!.*${W})`,end:/$/}]}},P={scope:"regexp",variants:[D("###"),D("##"),D("#"),j]},M={match:Lt(/`/,Fa,/`/)},L={className:"variable",match:/\$\d+/},O={className:"variable",match:`\\$${lw}+`},B=[M,L,O],R={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:IYe,contains:[...v,x,k]}]}},F={scope:"keyword",match:Lt(/@/,fi(...PYe),Xp(fi(/\(/,/\s+/)))},I={scope:"meta",match:Lt(/@/,Fa)},X=[R,F,I],G={match:Xp(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:Lt(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,lw,"+")},{className:"type",match:Vv,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:Lt(/\s+&\s+/,Xp(Vv)),relevance:0}]},$={begin:/</,end:/>/,keywords:u,contains:[...r,...d,...X,m,G]};G.contains.push($);const be={match:Lt(Fa,/\s*:/),keywords:"_|0",relevance:0},je={begin:/\(/,end:/\)/,relevance:0,keywords:u,contains:["self",be,...r,P,...d,...p,...v,x,k,...B,...X,G]},Q={begin:/</,end:/>/,keywords:"repeat each",contains:[...r,G]},K={begin:fi(Xp(Lt(Fa,/\s*:/)),Xp(Lt(Fa,/\s+/,Fa,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:Fa}]},xe={begin:/\(/,end:/\)/,keywords:u,contains:[K,...r,...d,...v,x,k,...X,G,je],endsParent:!0,illegal:/["']/},ae={match:[/(func|macro)/,/\s+/,fi(M.match,Fa,kT)],className:{1:"keyword",3:"title.function"},contains:[Q,xe,t],illegal:[/\[/,/%/]},ue={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[Q,xe,t],illegal:/\[|%/},Ee={match:[/operator/,/\s+/,kT],className:{1:"keyword",3:"title"}},re={begin:[/precedencegroup/,/\s+/,Vv],className:{1:"keyword",3:"title"},contains:[G],keywords:[...jYe,...G$],end:/}/},Je={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},De={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},tt={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,Fa,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:u,contains:[Q,...d,{begin:/:/,end:/\{/,keywords:u,contains:[{scope:"title.class.inherited",match:Vv},...d],relevance:0}]};for(const Y of k.variants){const pe=Y.contains.find(fe=>fe.label==="interpol");pe.keywords=u;const W=[...d,...p,...v,x,k,...B];pe.contains=[...W,{begin:/\(/,end:/\)/,contains:["self",...W]}]}return{name:"Swift",keywords:u,contains:[...r,ae,ue,Je,De,tt,Ee,re,{beginKeywords:"import",end:/$/,contains:[...r],relevance:0},P,...d,...p,...v,x,k,...B,...X,G,je]}}const cw="[A-Za-z$_][0-9A-Za-z$_]*",Zre=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],eie=["true","false","null","undefined","NaN","Infinity"],tie=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],nie=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],rie=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],iie=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],sie=[].concat(rie,tie,nie);function MYe(e){const t=e.regex,n=(R,{after:F})=>{const I="</"+R[0].slice(1);return R.input.indexOf(I,F)!==-1},r=cw,i={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,a={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(R,F)=>{const I=R[0].length+R.index,X=R.input[I];if(X==="<"||X===","){F.ignoreMatch();return}X===">"&&(n(R,{after:I})||F.ignoreMatch());let G;const $=R.input.substring(I);if(G=$.match(/^\s*=/)){F.ignoreMatch();return}if((G=$.match(/^\s+extends\s+/))&&G.index===0){F.ignoreMatch();return}}},o={$pattern:cw,keyword:Zre,literal:eie,built_in:sie,"variable.language":iie},l="[0-9](_?[0-9])*",u=`\\.(${l})`,d="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${d})((${u})|\\.)?|(${u}))[eE][+-]?(${l})\\b`},{begin:`\\b(${d})\\b((${u})\\b|\\.)?|(${u})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},h={className:"subst",begin:"\\$\\{",end:"\\}",keywords:o,contains:[]},p={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,h],subLanguage:"xml"}},m={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,h],subLanguage:"css"}},g={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,h],subLanguage:"graphql"}},v={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,h]},b={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},x=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,p,m,g,v,{match:/\$\d+/},f];h.contains=x.concat({begin:/\{/,end:/\}/,keywords:o,contains:["self"].concat(x)});const S=[].concat(b,h.contains),E=S.concat([{begin:/(\s*)\(/,end:/\)/,keywords:o,contains:["self"].concat(S)}]),_={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:E},T={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,t.concat(r,"(",t.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},C={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...tie,...nie]}},k={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},A={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[_],illegal:/%/},j={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function D(R){return t.concat("(?!",R.join("|"),")")}const P={match:t.concat(/\b/,D([...rie,"super","import"].map(R=>`${R}\\s*\\(`)),r,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},M={begin:t.concat(/\./,t.lookahead(t.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},L={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},_]},O="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",B={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(O)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[_]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:o,exports:{PARAMS_CONTAINS:E,CLASS_REFERENCE:C},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),k,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,p,m,g,v,b,{match:/\$\d+/},f,C,{scope:"attr",match:r+t.lookahead(":"),relevance:0},B,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[b,e.REGEXP_MODE,{className:"function",begin:O,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:E}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i.begin,end:i.end},{match:s},{begin:a.begin,"on:begin":a.isTrulyOpeningTag,end:a.end}],subLanguage:"xml",contains:[{begin:a.begin,end:a.end,skip:!0,contains:["self"]}]}]},A,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[_,e.inherit(e.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},M,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[_]},P,j,T,L,{match:/\$[(.]/}]}}function RYe(e){const t=e.regex,n=MYe(e),r=cw,i=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],s={begin:[/namespace/,/\s+/,e.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},a={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:i},contains:[n.exports.CLASS_REFERENCE]},o={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},l=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],u={$pattern:cw,keyword:Zre.concat(l),literal:eie,built_in:sie.concat(i),"variable.language":iie},d={className:"meta",begin:"@"+r},f=(g,v,y)=>{const b=g.contains.findIndex(x=>x.label===v);if(b===-1)throw new Error("can not find mode to replace");g.contains.splice(b,1,y)};Object.assign(n.keywords,u),n.exports.PARAMS_CONTAINS.push(d);const h=n.contains.find(g=>g.scope==="attr"),p=Object.assign({},h,{match:t.concat(r,t.lookahead(/\s*\?:/))});n.exports.PARAMS_CONTAINS.push([n.exports.CLASS_REFERENCE,h,p]),n.contains=n.contains.concat([d,s,a,p]),f(n,"shebang",e.SHEBANG()),f(n,"use_strict",o);const m=n.contains.find(g=>g.label==="func.def");return m.relevance=0,Object.assign(n,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),n}function LYe(e){const t=e.regex,n={className:"string",begin:/"(""|[^/n])"C\b/},r={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},i=/\d{1,2}\/\d{1,2}\/\d{4}/,s=/\d{4}-\d{1,2}-\d{1,2}/,a=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,o=/\d{1,2}(:\d{1,2}){1,2}/,l={className:"literal",variants:[{begin:t.concat(/# */,t.either(s,i),/ *#/)},{begin:t.concat(/# */,o,/ *#/)},{begin:t.concat(/# */,a,/ *#/)},{begin:t.concat(/# */,t.either(s,i),/ +/,t.either(a,o),/ *#/)}]},u={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},d={className:"label",begin:/^\w+:/},f=e.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),h=e.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[n,r,l,u,d,f,h,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[h]}]}}function FYe(e){e.regex;const t=e.COMMENT(/\(;/,/;\)/);t.contains.push("self");const n=e.COMMENT(/;;/,/$/),r=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],i={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},s={className:"variable",begin:/\$[\w_]+/},a={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},o={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},l={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},u={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:r},contains:[n,t,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},s,a,i,e.QUOTE_STRING_MODE,l,u,o]}}function BYe(e){const t=e.regex,n=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,i={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},s={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},a=e.inherit(s,{begin:/\(/,end:/\)/}),o=e.inherit(e.APOS_STRING_MODE,{className:"string"}),l=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),u={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[i]},{begin:/'/,end:/'/,contains:[i]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[s,l,o,a,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[s,a,l,o]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},i,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[l]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[u],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[u],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(n,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:u}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function $Ye(e){const t="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",r={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},i={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},s={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},a={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,i]},o=e.inherit(a,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),h={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},p={end:",",endsWithParent:!0,excludeEnd:!0,keywords:t,relevance:0},m={begin:/\{/,end:/\}/,contains:[p],illegal:"\\n",relevance:0},g={begin:"\\[",end:"\\]",contains:[p],illegal:"\\n",relevance:0},v=[r,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:t,keywords:{literal:t}},h,{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},m,g,s,a],y=[...v];return y.pop(),y.push(o),p.contains=y,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:v}}const aie={arduino:EGe,bash:SGe,c:_Ge,cpp:NGe,csharp:TGe,css:MGe,diff:RGe,go:LGe,graphql:FGe,ini:BGe,java:$Ge,javascript:WGe,json:qGe,kotlin:GGe,less:nYe,lua:rYe,makefile:iYe,markdown:sYe,objectivec:aYe,perl:oYe,php:lYe,"php-template":cYe,plaintext:uYe,python:dYe,"python-repl":fYe,r:hYe,ruby:pYe,rust:mYe,scss:_Ye,shell:NYe,sql:TYe,swift:DYe,typescript:RYe,vbnet:LYe,wasm:FYe,xml:BYe,yaml:$Ye};const X$={},UYe="hljs-";function oie(e){const t=kre.newInstance();return e&&s(e),{highlight:n,highlightAuto:r,listLanguages:i,register:s,registerAlias:a,registered:o};function n(l,u,d){const f=d||X$,h=typeof f.prefix=="string"?f.prefix:UYe;if(!t.getLanguage(l))throw new Error("Unknown language: `"+l+"` is not registered");t.configure({__emitter:zYe,classPrefix:h});const p=t.highlight(u,{ignoreIllegals:!0,language:l});if(p.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:p.errorRaised});const m=p._emitter.root,g=m.data;return g.language=p.language,g.relevance=p.relevance,m}function r(l,u){const f=(u||X$).subset||i();let h=-1,p=0,m;for(;++h<f.length;){const g=f[h];if(!t.getLanguage(g))continue;const v=n(g,l,u);v.data&&v.data.relevance!==void 0&&v.data.relevance>p&&(p=v.data.relevance,m=v)}return m||{type:"root",children:[],data:{language:void 0,relevance:p}}}function i(){return t.listLanguages()}function s(l,u){if(typeof l=="string")t.registerLanguage(l,u);else{let d;for(d in l)Object.hasOwn(l,d)&&t.registerLanguage(d,l[d])}}function a(l,u){if(typeof l=="string")t.registerAliases(typeof u=="string"?u:[...u],{languageName:l});else{let d;for(d in l)if(Object.hasOwn(l,d)){const f=l[d];t.registerAliases(typeof f=="string"?f:[...f],{languageName:d})}}}function o(l){return!!t.getLanguage(l)}}class zYe{constructor(t){this.options=t,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(t){if(t==="")return;const n=this.stack[this.stack.length-1],r=n.children[n.children.length-1];r&&r.type==="text"?r.value+=t:n.children.push({type:"text",value:t})}startScope(t){this.openNode(String(t))}endScope(){this.closeNode()}__addSublanguage(t,n){const r=this.stack[this.stack.length-1],i=t.root.children;n?r.children.push({type:"element",tagName:"span",properties:{className:[n]},children:i}):r.children.push(...i)}openNode(t){const n=this,r=t.split(".").map(function(a,o){return o?a+"_".repeat(o):n.options.classPrefix+a}),i=this.stack[this.stack.length-1],s={type:"element",tagName:"span",properties:{className:r},children:[]};i.children.push(s),this.stack.push(s)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}const HYe=oie(aie);function Q$({content:e,placeholder:t="Start writing your document...",onChange:n,onSave:r,onPreview:i,className:s,readOnly:a=!1,isSensitive:o=!1,onSensitivityToggle:l,showSaveButton:u=!0,showPreviewButton:d=!0,saveButtonText:f="Save",isLoading:h=!1,characterLimit:p=5e4}){const[m,g]=w.useState(!1),v=TVe({extensions:[oqe,lqe.configure({placeholder:t}),cqe,EWe.configure({openOnClick:!1}),fqe,uKe.configure({lowlight:HYe}),zre.configure({resizable:!0}),Ure,$re,Bre,pGe.configure({types:["heading","paragraph"]}),vGe.configure({multicolor:!0}),xGe,bGe.configure({nested:!0})],content:e||"",onUpdate:({editor:C})=>{const k=C.getJSON();JSON.stringify(k)!==JSON.stringify(e)&&n&&n(k,C.getHTML(),C.getText())},editorProps:{attributes:{class:"prose prose-sm sm:prose-base lg:prose-lg xl:prose-xl mx-auto focus:outline-none min-h-[500px] p-8 max-w-none"},handleKeyDown:(C,k)=>k.key==="F11"?(k.preventDefault(),g(!m),!0):!1},editable:!a}),y=()=>{if(!v)return;const C=window.prompt("Enter URL:");C&&v.chain().focus().setLink({href:C}).run()},b=()=>{if(!v)return;const C=window.prompt("Enter image URL:");C&&v.chain().focus().setImage({src:C}).run()},x=()=>{v&&v.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run()};if(!v)return c.jsx("div",{className:"border rounded-lg p-4 bg-gray-50",children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),c.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),c.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})});const S=v.storage.characterCount.characters(),E=v.storage.characterCount.words(),_=p&&S>p*.8,T=p&&S>p;return c.jsxs("div",{className:Ve("border rounded-lg bg-white transition-all duration-300",m&&"fixed inset-0 z-50 rounded-none border-0 h-screen flex flex-col",s),children:[!a&&c.jsxs("div",{className:"border-b p-3 flex flex-wrap gap-1 bg-gray-50/50 flex-shrink-0",children:[c.jsxs("div",{className:"flex gap-1 mr-3",children:[c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleBold().run(),className:v.isActive("bold")?"bg-gray-200":"",children:c.jsx(Mfe,{className:"h-4 w-4"})}),c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleItalic().run(),className:v.isActive("italic")?"bg-gray-200":"",children:c.jsx(Yfe,{className:"h-4 w-4"})}),c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleStrike().run(),className:v.isActive("strike")?"bg-gray-200":"",children:c.jsx(hhe,{className:"h-4 w-4"})}),c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleCode().run(),className:v.isActive("code")?"bg-gray-200":"",children:c.jsx($fe,{className:"h-4 w-4"})})]}),c.jsxs("div",{className:"flex gap-1 mr-3",children:[c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleHeading({level:1}).run(),className:v.isActive("heading",{level:1})?"bg-gray-200":"",children:c.jsx(Vfe,{className:"h-4 w-4"})}),c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleHeading({level:2}).run(),className:v.isActive("heading",{level:2})?"bg-gray-200":"",children:c.jsx(Wfe,{className:"h-4 w-4"})}),c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleHeading({level:3}).run(),className:v.isActive("heading",{level:3})?"bg-gray-200":"",children:c.jsx(qfe,{className:"h-4 w-4"})}),c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().setParagraph().run(),className:v.isActive("paragraph")?"bg-gray-200":"",children:c.jsx(mhe,{className:"h-4 w-4"})})]}),c.jsxs("div",{className:"flex gap-1 mr-3",children:[c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleBulletList().run(),className:v.isActive("bulletList")?"bg-gray-200":"",children:c.jsx(ehe,{className:"h-4 w-4"})}),c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleOrderedList().run(),className:v.isActive("orderedList")?"bg-gray-200":"",children:c.jsx(Zfe,{className:"h-4 w-4"})}),c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleTaskList().run(),className:v.isActive("taskList")?"bg-gray-200":"",children:c.jsx(Ffe,{className:"h-4 w-4"})}),c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleBlockquote().run(),className:v.isActive("blockquote")?"bg-gray-200":"",children:c.jsx(dhe,{className:"h-4 w-4"})})]}),c.jsxs("div",{className:"flex gap-1 mr-3",children:[c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().setTextAlign("left").run(),className:v.isActive({textAlign:"left"})?"bg-gray-200":"",children:c.jsx(Ofe,{className:"h-4 w-4"})}),c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().setTextAlign("center").run(),className:v.isActive({textAlign:"center"})?"bg-gray-200":"",children:c.jsx(jfe,{className:"h-4 w-4"})}),c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().setTextAlign("right").run(),className:v.isActive({textAlign:"right"})?"bg-gray-200":"",children:c.jsx(Pfe,{className:"h-4 w-4"})})]}),c.jsx("div",{className:"flex gap-1 mr-3",children:c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleHighlight().run(),className:v.isActive("highlight")?"bg-yellow-200":"",children:c.jsx(AH,{className:"h-4 w-4"})})}),c.jsxs("div",{className:"flex gap-1 mr-3",children:[c.jsx(H,{variant:"ghost",size:"sm",onClick:y,children:c.jsx(Jfe,{className:"h-4 w-4"})}),c.jsx(H,{variant:"ghost",size:"sm",onClick:b,children:c.jsx(Gfe,{className:"h-4 w-4"})}),c.jsx(H,{variant:"ghost",size:"sm",onClick:x,children:c.jsx(nO,{className:"h-4 w-4"})})]}),c.jsxs("div",{className:"flex gap-1 mr-3",children:[c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().undo().run(),disabled:!v.can().undo(),children:c.jsx(ghe,{className:"h-4 w-4"})}),c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().redo().run(),disabled:!v.can().redo(),children:c.jsx(fhe,{className:"h-4 w-4"})})]}),c.jsxs("div",{className:"flex gap-2 ml-auto",children:[c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>g(!m),title:m?"Exit full screen (F11)":"Enter full screen (F11)",children:m?c.jsx(ahe,{className:"h-4 w-4"}):c.jsx(ihe,{className:"h-4 w-4"})}),c.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),l&&c.jsx(H,{variant:"ghost",size:"sm",onClick:l,className:o?"text-red-600":"text-gray-600",children:o?c.jsx(Uu,{className:"h-4 w-4"}):c.jsx(PH,{className:"h-4 w-4"})}),d&&i&&c.jsx(H,{variant:"ghost",size:"sm",onClick:i,children:c.jsx(xa,{className:"h-4 w-4"})}),u&&r&&c.jsxs(H,{size:"sm",onClick:r,disabled:h||!!T,children:[c.jsx(qh,{className:"h-4 w-4 mr-1"}),f]})]})]}),c.jsx("div",{className:Ve("flex-1 overflow-auto",m?"p-8":"p-6"),children:c.jsx(xVe,{editor:v,className:Ve("prose prose-sm max-w-none focus:outline-none","prose-headings:font-bold prose-h1:text-2xl prose-h2:text-xl prose-h3:text-lg","prose-p:leading-relaxed prose-li:leading-relaxed","prose-pre:bg-gray-100 prose-code:bg-gray-100 prose-code:px-1 prose-code:py-0.5 prose-code:rounded","prose-blockquote:border-l-4 prose-blockquote:border-blue-500 prose-blockquote:pl-4 prose-blockquote:italic","prose-table:table-auto prose-th:text-left prose-th:font-semibold",a&&"cursor-default")})}),c.jsxs("div",{className:"border-t p-3 flex items-center justify-between text-sm text-gray-500 bg-gray-50/50 flex-shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("span",{children:[E," words"]}),c.jsxs("span",{className:Ve(T&&"text-red-600 font-semibold",_&&!T&&"text-yellow-600"),children:[S,p&&` / ${p}`," characters"]}),o&&c.jsxs(Tt,{variant:"destructive",className:"text-xs",children:[c.jsx(Uu,{className:"h-3 w-3 mr-1"}),"Sensitive"]})]}),T&&c.jsx("span",{className:"text-red-600 text-xs font-medium",children:"Character limit exceeded"})]})]})}function J$(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const a=n.slice(i,r).trim();(a||!s)&&t.push(a),i=r+1,r=n.indexOf(",",i)}return t}function lie(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const VYe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,WYe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,qYe={};function Z$(e,t){return(qYe.jsx?WYe:VYe).test(e)}const KYe=/[ \t\n\f\r]/g;function GYe(e){return typeof e=="object"?e.type==="text"?e9(e.value):!1:e9(e)}function e9(e){return e.replace(KYe,"")===""}let yy=class{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}};yy.prototype.normal={};yy.prototype.property={};yy.prototype.space=void 0;function cie(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new yy(n,r,t)}function d0(e){return e.toLowerCase()}let Hi=class{constructor(t,n){this.attribute=n,this.property=t}};Hi.prototype.attribute="";Hi.prototype.booleanish=!1;Hi.prototype.boolean=!1;Hi.prototype.commaOrSpaceSeparated=!1;Hi.prototype.commaSeparated=!1;Hi.prototype.defined=!1;Hi.prototype.mustUseProperty=!1;Hi.prototype.number=!1;Hi.prototype.overloadedBoolean=!1;Hi.prototype.property="";Hi.prototype.spaceSeparated=!1;Hi.prototype.space=void 0;let YYe=0;const st=Fd(),Vn=Fd(),AA=Fd(),Te=Fd(),Gt=Fd(),eh=Fd(),Wi=Fd();function Fd(){return 2**++YYe}const jA=Object.freeze(Object.defineProperty({__proto__:null,boolean:st,booleanish:Vn,commaOrSpaceSeparated:Wi,commaSeparated:eh,number:Te,overloadedBoolean:AA,spaceSeparated:Gt},Symbol.toStringTag,{value:"Module"})),AT=Object.keys(jA);let zM=class extends Hi{constructor(t,n,r,i){let s=-1;if(super(t,n),t9(this,"space",i),typeof r=="number")for(;++s<AT.length;){const a=AT[s];t9(this,AT[s],(r&jA[a])===jA[a])}}};zM.prototype.defined=!0;function t9(e,t,n){n&&(e[t]=n)}function gp(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const s=new zM(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[d0(r)]=r,n[d0(s.attribute)]=r}return new yy(t,n,e.space)}const uie=gp({properties:{ariaActiveDescendant:null,ariaAtomic:Vn,ariaAutoComplete:null,ariaBusy:Vn,ariaChecked:Vn,ariaColCount:Te,ariaColIndex:Te,ariaColSpan:Te,ariaControls:Gt,ariaCurrent:null,ariaDescribedBy:Gt,ariaDetails:null,ariaDisabled:Vn,ariaDropEffect:Gt,ariaErrorMessage:null,ariaExpanded:Vn,ariaFlowTo:Gt,ariaGrabbed:Vn,ariaHasPopup:null,ariaHidden:Vn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Gt,ariaLevel:Te,ariaLive:null,ariaModal:Vn,ariaMultiLine:Vn,ariaMultiSelectable:Vn,ariaOrientation:null,ariaOwns:Gt,ariaPlaceholder:null,ariaPosInSet:Te,ariaPressed:Vn,ariaReadOnly:Vn,ariaRelevant:null,ariaRequired:Vn,ariaRoleDescription:Gt,ariaRowCount:Te,ariaRowIndex:Te,ariaRowSpan:Te,ariaSelected:Vn,ariaSetSize:Te,ariaSort:null,ariaValueMax:Te,ariaValueMin:Te,ariaValueNow:Te,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function die(e,t){return t in e?e[t]:t}function fie(e,t){return die(e,t.toLowerCase())}const XYe=gp({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:eh,acceptCharset:Gt,accessKey:Gt,action:null,allow:null,allowFullScreen:st,allowPaymentRequest:st,allowUserMedia:st,alt:null,as:null,async:st,autoCapitalize:null,autoComplete:Gt,autoFocus:st,autoPlay:st,blocking:Gt,capture:null,charSet:null,checked:st,cite:null,className:Gt,cols:Te,colSpan:null,content:null,contentEditable:Vn,controls:st,controlsList:Gt,coords:Te|eh,crossOrigin:null,data:null,dateTime:null,decoding:null,default:st,defer:st,dir:null,dirName:null,disabled:st,download:AA,draggable:Vn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:st,formTarget:null,headers:Gt,height:Te,hidden:AA,high:Te,href:null,hrefLang:null,htmlFor:Gt,httpEquiv:Gt,id:null,imageSizes:null,imageSrcSet:null,inert:st,inputMode:null,integrity:null,is:null,isMap:st,itemId:null,itemProp:Gt,itemRef:Gt,itemScope:st,itemType:Gt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:st,low:Te,manifest:null,max:null,maxLength:Te,media:null,method:null,min:null,minLength:Te,multiple:st,muted:st,name:null,nonce:null,noModule:st,noValidate:st,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:st,optimum:Te,pattern:null,ping:Gt,placeholder:null,playsInline:st,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:st,referrerPolicy:null,rel:Gt,required:st,reversed:st,rows:Te,rowSpan:Te,sandbox:Gt,scope:null,scoped:st,seamless:st,selected:st,shadowRootClonable:st,shadowRootDelegatesFocus:st,shadowRootMode:null,shape:null,size:Te,sizes:null,slot:null,span:Te,spellCheck:Vn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Te,step:null,style:null,tabIndex:Te,target:null,title:null,translate:null,type:null,typeMustMatch:st,useMap:null,value:Vn,width:Te,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Gt,axis:null,background:null,bgColor:null,border:Te,borderColor:null,bottomMargin:Te,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:st,declare:st,event:null,face:null,frame:null,frameBorder:null,hSpace:Te,leftMargin:Te,link:null,longDesc:null,lowSrc:null,marginHeight:Te,marginWidth:Te,noResize:st,noHref:st,noShade:st,noWrap:st,object:null,profile:null,prompt:null,rev:null,rightMargin:Te,rules:null,scheme:null,scrolling:Vn,standby:null,summary:null,text:null,topMargin:Te,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Te,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:st,disableRemotePlayback:st,prefix:null,property:null,results:Te,security:null,unselectable:null},space:"html",transform:fie}),QYe=gp({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Wi,accentHeight:Te,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Te,amplitude:Te,arabicForm:null,ascent:Te,attributeName:null,attributeType:null,azimuth:Te,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Te,by:null,calcMode:null,capHeight:Te,className:Gt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Te,diffuseConstant:Te,direction:null,display:null,dur:null,divisor:Te,dominantBaseline:null,download:st,dx:null,dy:null,edgeMode:null,editable:null,elevation:Te,enableBackground:null,end:null,event:null,exponent:Te,externalResourcesRequired:null,fill:null,fillOpacity:Te,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:eh,g2:eh,glyphName:eh,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Te,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Te,horizOriginX:Te,horizOriginY:Te,id:null,ideographic:Te,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Te,k:Te,k1:Te,k2:Te,k3:Te,k4:Te,kernelMatrix:Wi,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Te,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Te,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Te,overlineThickness:Te,paintOrder:null,panose1:null,path:null,pathLength:Te,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Gt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Te,pointsAtY:Te,pointsAtZ:Te,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Wi,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Wi,rev:Wi,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Wi,requiredFeatures:Wi,requiredFonts:Wi,requiredFormats:Wi,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Te,specularExponent:Te,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Te,strikethroughThickness:Te,string:null,stroke:null,strokeDashArray:Wi,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Te,strokeOpacity:Te,strokeWidth:null,style:null,surfaceScale:Te,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Wi,tabIndex:Te,tableValues:null,target:null,targetX:Te,targetY:Te,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Wi,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Te,underlineThickness:Te,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Te,values:null,vAlphabetic:Te,vMathematical:Te,vectorEffect:null,vHanging:Te,vIdeographic:Te,version:null,vertAdvY:Te,vertOriginX:Te,vertOriginY:Te,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Te,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:die}),hie=gp({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),pie=gp({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:fie}),mie=gp({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),JYe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},ZYe=/[A-Z]/g,n9=/-[a-z]/g,eXe=/^data[-\w.:]+$/i;function HM(e,t){const n=d0(t);let r=t,i=Hi;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&eXe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(n9,nXe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!n9.test(s)){let a=s.replace(ZYe,tXe);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}i=zM}return new i(r,t)}function tXe(e){return"-"+e.toLowerCase()}function nXe(e){return e.charAt(1).toUpperCase()}const VS=cie([uie,XYe,hie,pie,mie],"html"),yp=cie([uie,QYe,hie,pie,mie],"svg");function r9(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function gie(e){return e.join(" ").trim()}var VM={},i9=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,rXe=/\n/g,iXe=/^\s*/,sXe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,aXe=/^:\s*/,oXe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,lXe=/^[;\s]*/,cXe=/^\s+|\s+$/g,uXe=`
`,s9="/",a9="*",bu="",dXe="comment",fXe="declaration",hXe=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(m){var g=m.match(rXe);g&&(n+=g.length);var v=m.lastIndexOf(uXe);r=~v?m.length-v:r+m.length}function s(){var m={line:n,column:r};return function(g){return g.position=new a(m),u(),g}}function a(m){this.start=m,this.end={line:n,column:r},this.source=t.source}a.prototype.content=e;function o(m){var g=new Error(t.source+":"+n+":"+r+": "+m);if(g.reason=m,g.filename=t.source,g.line=n,g.column=r,g.source=e,!t.silent)throw g}function l(m){var g=m.exec(e);if(g){var v=g[0];return i(v),e=e.slice(v.length),g}}function u(){l(iXe)}function d(m){var g;for(m=m||[];g=f();)g!==!1&&m.push(g);return m}function f(){var m=s();if(!(s9!=e.charAt(0)||a9!=e.charAt(1))){for(var g=2;bu!=e.charAt(g)&&(a9!=e.charAt(g)||s9!=e.charAt(g+1));)++g;if(g+=2,bu===e.charAt(g-1))return o("End of comment missing");var v=e.slice(2,g-2);return r+=2,i(v),e=e.slice(g),r+=2,m({type:dXe,comment:v})}}function h(){var m=s(),g=l(sXe);if(g){if(f(),!l(aXe))return o("property missing ':'");var v=l(oXe),y=m({type:fXe,property:o9(g[0].replace(i9,bu)),value:v?o9(v[0].replace(i9,bu)):bu});return l(lXe),y}}function p(){var m=[];d(m);for(var g;g=h();)g!==!1&&(m.push(g),d(m));return m}return u(),p()};function o9(e){return e?e.replace(cXe,bu):bu}var pXe=Zr&&Zr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(VM,"__esModule",{value:!0});VM.default=gXe;var mXe=pXe(hXe);function gXe(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,mXe.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var a=s.property,o=s.value;i?t(a,o,s):o&&(n=n||{},n[a]=o)}}),n}var WS={};Object.defineProperty(WS,"__esModule",{value:!0});WS.camelCase=void 0;var yXe=/^--[a-zA-Z0-9_-]+$/,vXe=/-([a-z])/g,xXe=/^[^-]+$/,bXe=/^-(webkit|moz|ms|o|khtml)-/,wXe=/^-(ms)-/,EXe=function(e){return!e||xXe.test(e)||yXe.test(e)},SXe=function(e,t){return t.toUpperCase()},l9=function(e,t){return"".concat(t,"-")},_Xe=function(e,t){return t===void 0&&(t={}),EXe(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(wXe,l9):e=e.replace(bXe,l9),e.replace(vXe,SXe))};WS.camelCase=_Xe;var NXe=Zr&&Zr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},TXe=NXe(VM),CXe=WS;function OA(e,t){var n={};return!e||typeof e!="string"||(0,TXe.default)(e,function(r,i){r&&i&&(n[(0,CXe.camelCase)(r,t)]=i)}),n}OA.default=OA;var kXe=OA;const AXe=ii(kXe),qS=yie("end"),xo=yie("start");function yie(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function jXe(e){const t=xo(e),n=qS(e);if(t&&n)return{start:t,end:n}}function Gm(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?c9(e.position):"start"in e||"end"in e?c9(e):"line"in e||"column"in e?PA(e):""}function PA(e){return u9(e&&e.line)+":"+u9(e&&e.column)}function c9(e){return PA(e&&e.start)+"-"+PA(e&&e.end)}function u9(e){return e&&typeof e=="number"?e:1}class li extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},a=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(a=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const o=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=o?o.line:void 0,this.name=Gm(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}li.prototype.file="";li.prototype.name="";li.prototype.reason="";li.prototype.message="";li.prototype.stack="";li.prototype.column=void 0;li.prototype.line=void 0;li.prototype.ancestors=void 0;li.prototype.cause=void 0;li.prototype.fatal=void 0;li.prototype.place=void 0;li.prototype.ruleId=void 0;li.prototype.source=void 0;const WM={}.hasOwnProperty,OXe=new Map,PXe=/[A-Z]/g,IXe=new Set(["table","tbody","thead","tfoot","tr"]),DXe=new Set(["td","th"]),vie="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function MXe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=HXe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=zXe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?yp:VS,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=xie(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function xie(e,t,n){if(t.type==="element")return RXe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return LXe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return BXe(e,t,n);if(t.type==="mdxjsEsm")return FXe(e,t);if(t.type==="root")return $Xe(e,t,n);if(t.type==="text")return UXe(e,t)}function RXe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=yp,e.schema=i),e.ancestors.push(t);const s=wie(e,t.tagName,!1),a=VXe(e,t);let o=KM(e,t);return IXe.has(t.tagName)&&(o=o.filter(function(l){return typeof l=="string"?!GYe(l):!0})),bie(e,a,s,t),qM(a,o),e.ancestors.pop(),e.schema=r,e.create(t,s,a,n)}function LXe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}f0(e,t.position)}function FXe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);f0(e,t.position)}function BXe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=yp,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:wie(e,t.name,!0),a=WXe(e,t),o=KM(e,t);return bie(e,a,s,t),qM(a,o),e.ancestors.pop(),e.schema=r,e.create(t,s,a,n)}function $Xe(e,t,n){const r={};return qM(r,KM(e,t)),e.create(t,e.Fragment,r,n)}function UXe(e,t){return t.value}function bie(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function qM(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function zXe(e,t,n){return r;function r(i,s,a,o){const u=Array.isArray(a.children)?n:t;return o?u(s,a,o):u(s,a)}}function HXe(e,t){return n;function n(r,i,s,a){const o=Array.isArray(s.children),l=xo(r);return t(i,s,a,o,{columnNumber:l?l.column-1:void 0,fileName:e,lineNumber:l?l.line:void 0},void 0)}}function VXe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&WM.call(t.properties,i)){const s=qXe(e,i,t.properties[i]);if(s){const[a,o]=s;e.tableCellAlignToStyle&&a==="align"&&typeof o=="string"&&DXe.has(t.tagName)?r=o:n[a]=o}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function WXe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const a=s.expression;a.type;const o=a.properties[0];o.type,Object.assign(n,e.evaluater.evaluateExpression(o.argument))}else f0(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const o=r.value.data.estree.body[0];o.type,s=e.evaluater.evaluateExpression(o.expression)}else f0(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function KM(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:OXe;for(;++r<t.children.length;){const s=t.children[r];let a;if(e.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const u=i.get(l)||0;a=l+"-"+u,i.set(l,u+1)}}const o=xie(e,s,a);o!==void 0&&n.push(o)}return n}function qXe(e,t,n){const r=HM(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?lie(n):gie(n)),r.property==="style"){let i=typeof n=="object"?n:KXe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=GXe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?JYe[r.property]||r.property:r.attribute,n]}}function KXe(e,t){try{return AXe(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new li("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=vie+"#cannot-parse-style-attribute",i}}function wie(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,a;for(;++s<i.length;){const o=Z$(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};a=a?{type:"MemberExpression",object:a,property:o,computed:!!(s&&o.type==="Literal"),optional:!1}:o}r=a}else r=Z$(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return WM.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);f0(e)}function f0(e,t){const n=new li("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=vie+"#cannot-handle-mdx-estrees-without-createevaluater",n}function GXe(e){const t={};let n;for(n in e)WM.call(e,n)&&(t[YXe(n)]=e[n]);return t}function YXe(e){let t=e.replace(PXe,XXe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function XXe(e){return"-"+e.toLowerCase()}const jT={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},QXe={};function GM(e,t){const n=QXe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Eie(e,r,i)}function Eie(e,t,n){if(JXe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return d9(e.children,t,n)}return Array.isArray(e)?d9(e,t,n):""}function d9(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Eie(e[i],t,n);return r.join("")}function JXe(e){return!!(e&&typeof e=="object")}const f9=document.createElement("i");function YM(e){const t="&"+e+";";f9.innerHTML=t;const n=f9.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function ds(e,t,n,r){const i=e.length;let s=0,a;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);s<r.length;)a=r.slice(s,s+1e4),a.unshift(t,0),e.splice(...a),s+=1e4,t+=1e4}function Is(e,t){return e.length>0?(ds(e,e.length,0,t),e):t}const h9={}.hasOwnProperty;function Sie(e){const t={};let n=-1;for(;++n<e.length;)ZXe(t,e[n]);return t}function ZXe(e,t){let n;for(n in t){const i=(h9.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let a;if(s)for(a in s){h9.call(i,a)||(i[a]=[]);const o=s[a];eQe(i[a],Array.isArray(o)?o:o?[o]:[])}}}function eQe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);ds(e,0,0,r)}function _ie(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function ba(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const pi=eu(/[A-Za-z]/),Jr=eu(/[\dA-Za-z]/),tQe=eu(/[#-'*+\--9=?A-Z^-~]/);function uw(e){return e!==null&&(e<32||e===127)}const IA=eu(/\d/),nQe=eu(/[\dA-Fa-f]/),rQe=eu(/[!-/:-@[-`{-~]/);function Xe(e){return e!==null&&e<-2}function Ht(e){return e!==null&&(e<0||e===32)}function ft(e){return e===-2||e===-1||e===32}const KS=eu(new RegExp("\\p{P}|\\p{S}","u")),Td=eu(/\s/);function eu(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function vp(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let a="";if(s===37&&Jr(e.charCodeAt(n+1))&&Jr(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(a=String.fromCharCode(s));else if(s>55295&&s<57344){const o=e.charCodeAt(n+1);s<56320&&o>56319&&o<57344?(a=String.fromCharCode(s,o),i=1):a=""}else a=String.fromCharCode(s);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+i+1,a=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function yt(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(l){return ft(l)?(e.enter(n),o(l)):t(l)}function o(l){return ft(l)&&s++<i?(e.consume(l),o):(e.exit(n),t(l))}}const iQe={tokenize:sQe};function sQe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),yt(e,t,"linePrefix")}function i(o){return e.enter("paragraph"),s(o)}function s(o){const l=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,a(o)}function a(o){if(o===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(o);return}return Xe(o)?(e.consume(o),e.exit("chunkText"),s):(e.consume(o),a)}}const aQe={tokenize:oQe},p9={tokenize:lQe};function oQe(e){const t=this,n=[];let r=0,i,s,a;return o;function o(x){if(r<n.length){const S=n[r];return t.containerState=S[1],e.attempt(S[0].continuation,l,u)(x)}return u(x)}function l(x){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&b();const S=t.events.length;let E=S,_;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){_=t.events[E][1].end;break}y(r);let T=S;for(;T<t.events.length;)t.events[T][1].end={..._},T++;return ds(t.events,E+1,0,t.events.slice(S)),t.events.length=T,u(x)}return o(x)}function u(x){if(r===n.length){if(!i)return h(x);if(i.currentConstruct&&i.currentConstruct.concrete)return m(x);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(p9,d,f)(x)}function d(x){return i&&b(),y(r),h(x)}function f(x){return t.parser.lazy[t.now().line]=r!==n.length,a=t.now().offset,m(x)}function h(x){return t.containerState={},e.attempt(p9,p,m)(x)}function p(x){return r++,n.push([t.currentConstruct,t.containerState]),h(x)}function m(x){if(x===null){i&&b(),y(0),e.consume(x);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),g(x)}function g(x){if(x===null){v(e.exit("chunkFlow"),!0),y(0),e.consume(x);return}return Xe(x)?(e.consume(x),v(e.exit("chunkFlow")),r=0,t.interrupt=void 0,o):(e.consume(x),g)}function v(x,S){const E=t.sliceStream(x);if(S&&E.push(null),x.previous=s,s&&(s.next=x),s=x,i.defineSkip(x.start),i.write(E),t.parser.lazy[x.start.line]){let _=i.events.length;for(;_--;)if(i.events[_][1].start.offset<a&&(!i.events[_][1].end||i.events[_][1].end.offset>a))return;const T=t.events.length;let C=T,k,A;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){if(k){A=t.events[C][1].end;break}k=!0}for(y(r),_=T;_<t.events.length;)t.events[_][1].end={...A},_++;ds(t.events,C+1,0,t.events.slice(T)),t.events.length=_}}function y(x){let S=n.length;for(;S-- >x;){const E=n[S];t.containerState=E[1],E[0].exit.call(t,e)}n.length=x}function b(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function lQe(e,t,n){return yt(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Rh(e){if(e===null||Ht(e)||Td(e))return 1;if(KS(e))return 2}function GS(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const DA={name:"attention",resolveAll:cQe,tokenize:uQe};function cQe(e,t){let n=-1,r,i,s,a,o,l,u,d;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f={...e[r][1].end},h={...e[n][1].start};m9(f,-l),m9(h,l),a={type:l>1?"strongSequence":"emphasisSequence",start:f,end:{...e[r][1].end}},o={type:l>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:h},s={type:l>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...a.start},end:{...o.end}},e[r][1].end={...a.start},e[n][1].start={...o.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=Is(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=Is(u,[["enter",i,t],["enter",a,t],["exit",a,t],["enter",s,t]]),u=Is(u,GS(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=Is(u,[["exit",s,t],["enter",o,t],["exit",o,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(d=2,u=Is(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):d=0,ds(e,r-1,n-r+3,u),n=r+u.length-d-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function uQe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Rh(r);let s;return a;function a(l){return s=l,e.enter("attentionSequence"),o(l)}function o(l){if(l===s)return e.consume(l),o;const u=e.exit("attentionSequence"),d=Rh(l),f=!d||d===2&&i||n.includes(l),h=!i||i===2&&d||n.includes(r);return u._open=!!(s===42?f:f&&(i||!h)),u._close=!!(s===42?h:h&&(d||!f)),t(l)}}function m9(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const dQe={name:"autolink",tokenize:fQe};function fQe(e,t,n){let r=0;return i;function i(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(p){return pi(p)?(e.consume(p),a):p===64?n(p):u(p)}function a(p){return p===43||p===45||p===46||Jr(p)?(r=1,o(p)):u(p)}function o(p){return p===58?(e.consume(p),r=0,l):(p===43||p===45||p===46||Jr(p))&&r++<32?(e.consume(p),o):(r=0,u(p))}function l(p){return p===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):p===null||p===32||p===60||uw(p)?n(p):(e.consume(p),l)}function u(p){return p===64?(e.consume(p),d):tQe(p)?(e.consume(p),u):n(p)}function d(p){return Jr(p)?f(p):n(p)}function f(p){return p===46?(e.consume(p),r=0,d):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):h(p)}function h(p){if((p===45||Jr(p))&&r++<63){const m=p===45?h:f;return e.consume(p),m}return n(p)}}const vy={partial:!0,tokenize:hQe};function hQe(e,t,n){return r;function r(s){return ft(s)?yt(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Xe(s)?t(s):n(s)}}const Nie={continuation:{tokenize:mQe},exit:gQe,name:"blockQuote",tokenize:pQe};function pQe(e,t,n){const r=this;return i;function i(a){if(a===62){const o=r.containerState;return o.open||(e.enter("blockQuote",{_container:!0}),o.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),s}return n(a)}function s(a){return ft(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function mQe(e,t,n){const r=this;return i;function i(a){return ft(a)?yt(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return e.attempt(Nie,t,n)(a)}}function gQe(e){e.exit("blockQuote")}const Tie={name:"characterEscape",tokenize:yQe};function yQe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return rQe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Cie={name:"characterReference",tokenize:vQe};function vQe(e,t,n){const r=this;let i=0,s,a;return o;function o(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),l}function l(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),s=31,a=Jr,d(f))}function u(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,a=nQe,d):(e.enter("characterReferenceValue"),s=7,a=IA,d(f))}function d(f){if(f===59&&i){const h=e.exit("characterReferenceValue");return a===Jr&&!YM(r.sliceSerialize(h))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(f)&&i++<s?(e.consume(f),d):n(f)}}const g9={partial:!0,tokenize:bQe},y9={concrete:!0,name:"codeFenced",tokenize:xQe};function xQe(e,t,n){const r=this,i={partial:!0,tokenize:E};let s=0,a=0,o;return l;function l(_){return u(_)}function u(_){const T=r.events[r.events.length-1];return s=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,o=_,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(_)}function d(_){return _===o?(a++,e.consume(_),d):a<3?n(_):(e.exit("codeFencedFenceSequence"),ft(_)?yt(e,f,"whitespace")(_):f(_))}function f(_){return _===null||Xe(_)?(e.exit("codeFencedFence"),r.interrupt?t(_):e.check(g9,g,S)(_)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(_))}function h(_){return _===null||Xe(_)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(_)):ft(_)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),yt(e,p,"whitespace")(_)):_===96&&_===o?n(_):(e.consume(_),h)}function p(_){return _===null||Xe(_)?f(_):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(_))}function m(_){return _===null||Xe(_)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(_)):_===96&&_===o?n(_):(e.consume(_),m)}function g(_){return e.attempt(i,S,v)(_)}function v(_){return e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),y}function y(_){return s>0&&ft(_)?yt(e,b,"linePrefix",s+1)(_):b(_)}function b(_){return _===null||Xe(_)?e.check(g9,g,S)(_):(e.enter("codeFlowValue"),x(_))}function x(_){return _===null||Xe(_)?(e.exit("codeFlowValue"),b(_)):(e.consume(_),x)}function S(_){return e.exit("codeFenced"),t(_)}function E(_,T,C){let k=0;return A;function A(L){return _.enter("lineEnding"),_.consume(L),_.exit("lineEnding"),j}function j(L){return _.enter("codeFencedFence"),ft(L)?yt(_,D,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):D(L)}function D(L){return L===o?(_.enter("codeFencedFenceSequence"),P(L)):C(L)}function P(L){return L===o?(k++,_.consume(L),P):k>=a?(_.exit("codeFencedFenceSequence"),ft(L)?yt(_,M,"whitespace")(L):M(L)):C(L)}function M(L){return L===null||Xe(L)?(_.exit("codeFencedFence"),T(L)):C(L)}}}function bQe(e,t,n){const r=this;return i;function i(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s)}function s(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}const OT={name:"codeIndented",tokenize:EQe},wQe={partial:!0,tokenize:SQe};function EQe(e,t,n){const r=this;return i;function i(u){return e.enter("codeIndented"),yt(e,s,"linePrefix",5)(u)}function s(u){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?a(u):n(u)}function a(u){return u===null?l(u):Xe(u)?e.attempt(wQe,a,l)(u):(e.enter("codeFlowValue"),o(u))}function o(u){return u===null||Xe(u)?(e.exit("codeFlowValue"),a(u)):(e.consume(u),o)}function l(u){return e.exit("codeIndented"),t(u)}}function SQe(e,t,n){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?n(a):Xe(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):yt(e,s,"linePrefix",5)(a)}function s(a){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):Xe(a)?i(a):n(a)}}const _Qe={name:"codeText",previous:TQe,resolve:NQe,tokenize:CQe};function NQe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function TQe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function CQe(e,t,n){let r=0,i,s;return a;function a(f){return e.enter("codeText"),e.enter("codeTextSequence"),o(f)}function o(f){return f===96?(e.consume(f),r++,o):(e.exit("codeTextSequence"),l(f))}function l(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),l):f===96?(s=e.enter("codeTextSequence"),i=0,d(f)):Xe(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),l):(e.enter("codeTextData"),u(f))}function u(f){return f===null||f===32||f===96||Xe(f)?(e.exit("codeTextData"),l(f)):(e.consume(f),u)}function d(f){return f===96?(e.consume(f),i++,d):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",u(f))}}class kQe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Qp(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Qp(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Qp(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Qp(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Qp(this.left,n.reverse())}}}function Qp(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function kie(e){const t={};let n=-1,r,i,s,a,o,l,u;const d=new kQe(e);for(;++n<d.length;){for(;n in t;)n=t[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,AQe(d,n)),n=t[n],u=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(a=d.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(d.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(r[1].end={...d.get(i)[1].start},o=d.slice(i,n),o.unshift(r),d.splice(i,n-i+1,o))}}return ds(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function AQe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const o=a.events,l=[],u={};let d,f,h=-1,p=n,m=0,g=0;const v=[g];for(;p;){for(;e.get(++i)[1]!==p;);s.push(i),p._tokenizer||(d=r.sliceStream(p),p.next||d.push(null),f&&a.defineSkip(p.start),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(d),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),f=p,p=p.next}for(p=n;++h<o.length;)o[h][0]==="exit"&&o[h-1][0]==="enter"&&o[h][1].type===o[h-1][1].type&&o[h][1].start.line!==o[h][1].end.line&&(g=h+1,v.push(g),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(a.events=[],p?(p._tokenizer=void 0,p.previous=void 0):v.pop(),h=v.length;h--;){const y=o.slice(v[h],v[h+1]),b=s.pop();l.push([b,b+y.length-1]),e.splice(b,2,y)}for(l.reverse(),h=-1;++h<l.length;)u[m+l[h][0]]=m+l[h][1],m+=l[h][1]-l[h][0]-1;return u}const jQe={resolve:PQe,tokenize:IQe},OQe={partial:!0,tokenize:DQe};function PQe(e){return kie(e),e}function IQe(e,t){let n;return r;function r(o){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(o)}function i(o){return o===null?s(o):Xe(o)?e.check(OQe,a,s)(o):(e.consume(o),i)}function s(o){return e.exit("chunkContent"),e.exit("content"),t(o)}function a(o){return e.consume(o),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function DQe(e,t,n){const r=this;return i;function i(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),yt(e,s,"linePrefix")}function s(a){if(a===null||Xe(a))return n(a);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):e.interrupt(r.parser.constructs.flow,n,t)(a)}}function Aie(e,t,n,r,i,s,a,o,l){const u=l||Number.POSITIVE_INFINITY;let d=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),h):y===null||y===32||y===41||uw(y)?n(y):(e.enter(r),e.enter(a),e.enter(o),e.enter("chunkString",{contentType:"string"}),g(y))}function h(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===62?(e.exit("chunkString"),e.exit(o),h(y)):y===null||y===60||Xe(y)?n(y):(e.consume(y),y===92?m:p)}function m(y){return y===60||y===62||y===92?(e.consume(y),p):p(y)}function g(y){return!d&&(y===null||y===41||Ht(y))?(e.exit("chunkString"),e.exit(o),e.exit(a),e.exit(r),t(y)):d<u&&y===40?(e.consume(y),d++,g):y===41?(e.consume(y),d--,g):y===null||y===32||y===40||uw(y)?n(y):(e.consume(y),y===92?v:g)}function v(y){return y===40||y===41||y===92?(e.consume(y),g):g(y)}}function jie(e,t,n,r,i,s){const a=this;let o=0,l;return u;function u(p){return e.enter(r),e.enter(i),e.consume(p),e.exit(i),e.enter(s),d}function d(p){return o>999||p===null||p===91||p===93&&!l||p===94&&!o&&"_hiddenFootnoteSupport"in a.parser.constructs?n(p):p===93?(e.exit(s),e.enter(i),e.consume(p),e.exit(i),e.exit(r),t):Xe(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),f(p))}function f(p){return p===null||p===91||p===93||Xe(p)||o++>999?(e.exit("chunkString"),d(p)):(e.consume(p),l||(l=!ft(p)),p===92?h:f)}function h(p){return p===91||p===92||p===93?(e.consume(p),o++,f):f(p)}}function Oie(e,t,n,r,i,s){let a;return o;function o(h){return h===34||h===39||h===40?(e.enter(r),e.enter(i),e.consume(h),e.exit(i),a=h===40?41:h,l):n(h)}function l(h){return h===a?(e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):(e.enter(s),u(h))}function u(h){return h===a?(e.exit(s),l(a)):h===null?n(h):Xe(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),yt(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===a||h===null||Xe(h)?(e.exit("chunkString"),u(h)):(e.consume(h),h===92?f:d)}function f(h){return h===a||h===92?(e.consume(h),d):d(h)}}function Ym(e,t){let n;return r;function r(i){return Xe(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):ft(i)?yt(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const MQe={name:"definition",tokenize:LQe},RQe={partial:!0,tokenize:FQe};function LQe(e,t,n){const r=this;let i;return s;function s(p){return e.enter("definition"),a(p)}function a(p){return jie.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function o(p){return i=ba(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),l):n(p)}function l(p){return Ht(p)?Ym(e,u)(p):u(p)}function u(p){return Aie(e,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function d(p){return e.attempt(RQe,f,f)(p)}function f(p){return ft(p)?yt(e,h,"whitespace")(p):h(p)}function h(p){return p===null||Xe(p)?(e.exit("definition"),r.parser.defined.push(i),t(p)):n(p)}}function FQe(e,t,n){return r;function r(o){return Ht(o)?Ym(e,i)(o):n(o)}function i(o){return Oie(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function s(o){return ft(o)?yt(e,a,"whitespace")(o):a(o)}function a(o){return o===null||Xe(o)?t(o):n(o)}}const BQe={name:"hardBreakEscape",tokenize:$Qe};function $Qe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Xe(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const UQe={name:"headingAtx",resolve:zQe,tokenize:HQe};function zQe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},ds(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function HQe(e,t,n){let r=0;return i;function i(d){return e.enter("atxHeading"),s(d)}function s(d){return e.enter("atxHeadingSequence"),a(d)}function a(d){return d===35&&r++<6?(e.consume(d),a):d===null||Ht(d)?(e.exit("atxHeadingSequence"),o(d)):n(d)}function o(d){return d===35?(e.enter("atxHeadingSequence"),l(d)):d===null||Xe(d)?(e.exit("atxHeading"),t(d)):ft(d)?yt(e,o,"whitespace")(d):(e.enter("atxHeadingText"),u(d))}function l(d){return d===35?(e.consume(d),l):(e.exit("atxHeadingSequence"),o(d))}function u(d){return d===null||d===35||Ht(d)?(e.exit("atxHeadingText"),o(d)):(e.consume(d),u)}}const VQe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],v9=["pre","script","style","textarea"],WQe={concrete:!0,name:"htmlFlow",resolveTo:GQe,tokenize:YQe},qQe={partial:!0,tokenize:QQe},KQe={partial:!0,tokenize:XQe};function GQe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function YQe(e,t,n){const r=this;let i,s,a,o,l;return u;function u($){return d($)}function d($){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume($),f}function f($){return $===33?(e.consume($),h):$===47?(e.consume($),s=!0,g):$===63?(e.consume($),i=3,r.interrupt?t:I):pi($)?(e.consume($),a=String.fromCharCode($),v):n($)}function h($){return $===45?(e.consume($),i=2,p):$===91?(e.consume($),i=5,o=0,m):pi($)?(e.consume($),i=4,r.interrupt?t:I):n($)}function p($){return $===45?(e.consume($),r.interrupt?t:I):n($)}function m($){const be="CDATA[";return $===be.charCodeAt(o++)?(e.consume($),o===be.length?r.interrupt?t:D:m):n($)}function g($){return pi($)?(e.consume($),a=String.fromCharCode($),v):n($)}function v($){if($===null||$===47||$===62||Ht($)){const be=$===47,je=a.toLowerCase();return!be&&!s&&v9.includes(je)?(i=1,r.interrupt?t($):D($)):VQe.includes(a.toLowerCase())?(i=6,be?(e.consume($),y):r.interrupt?t($):D($)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n($):s?b($):x($))}return $===45||Jr($)?(e.consume($),a+=String.fromCharCode($),v):n($)}function y($){return $===62?(e.consume($),r.interrupt?t:D):n($)}function b($){return ft($)?(e.consume($),b):A($)}function x($){return $===47?(e.consume($),A):$===58||$===95||pi($)?(e.consume($),S):ft($)?(e.consume($),x):A($)}function S($){return $===45||$===46||$===58||$===95||Jr($)?(e.consume($),S):E($)}function E($){return $===61?(e.consume($),_):ft($)?(e.consume($),E):x($)}function _($){return $===null||$===60||$===61||$===62||$===96?n($):$===34||$===39?(e.consume($),l=$,T):ft($)?(e.consume($),_):C($)}function T($){return $===l?(e.consume($),l=null,k):$===null||Xe($)?n($):(e.consume($),T)}function C($){return $===null||$===34||$===39||$===47||$===60||$===61||$===62||$===96||Ht($)?E($):(e.consume($),C)}function k($){return $===47||$===62||ft($)?x($):n($)}function A($){return $===62?(e.consume($),j):n($)}function j($){return $===null||Xe($)?D($):ft($)?(e.consume($),j):n($)}function D($){return $===45&&i===2?(e.consume($),O):$===60&&i===1?(e.consume($),B):$===62&&i===4?(e.consume($),X):$===63&&i===3?(e.consume($),I):$===93&&i===5?(e.consume($),F):Xe($)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(qQe,G,P)($)):$===null||Xe($)?(e.exit("htmlFlowData"),P($)):(e.consume($),D)}function P($){return e.check(KQe,M,G)($)}function M($){return e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),L}function L($){return $===null||Xe($)?P($):(e.enter("htmlFlowData"),D($))}function O($){return $===45?(e.consume($),I):D($)}function B($){return $===47?(e.consume($),a="",R):D($)}function R($){if($===62){const be=a.toLowerCase();return v9.includes(be)?(e.consume($),X):D($)}return pi($)&&a.length<8?(e.consume($),a+=String.fromCharCode($),R):D($)}function F($){return $===93?(e.consume($),I):D($)}function I($){return $===62?(e.consume($),X):$===45&&i===2?(e.consume($),I):D($)}function X($){return $===null||Xe($)?(e.exit("htmlFlowData"),G($)):(e.consume($),X)}function G($){return e.exit("htmlFlow"),t($)}}function XQe(e,t,n){const r=this;return i;function i(a){return Xe(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s):n(a)}function s(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}function QQe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(vy,t,n)}}const JQe={name:"htmlText",tokenize:ZQe};function ZQe(e,t,n){const r=this;let i,s,a;return o;function o(I){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(I),l}function l(I){return I===33?(e.consume(I),u):I===47?(e.consume(I),E):I===63?(e.consume(I),x):pi(I)?(e.consume(I),C):n(I)}function u(I){return I===45?(e.consume(I),d):I===91?(e.consume(I),s=0,m):pi(I)?(e.consume(I),b):n(I)}function d(I){return I===45?(e.consume(I),p):n(I)}function f(I){return I===null?n(I):I===45?(e.consume(I),h):Xe(I)?(a=f,B(I)):(e.consume(I),f)}function h(I){return I===45?(e.consume(I),p):f(I)}function p(I){return I===62?O(I):I===45?h(I):f(I)}function m(I){const X="CDATA[";return I===X.charCodeAt(s++)?(e.consume(I),s===X.length?g:m):n(I)}function g(I){return I===null?n(I):I===93?(e.consume(I),v):Xe(I)?(a=g,B(I)):(e.consume(I),g)}function v(I){return I===93?(e.consume(I),y):g(I)}function y(I){return I===62?O(I):I===93?(e.consume(I),y):g(I)}function b(I){return I===null||I===62?O(I):Xe(I)?(a=b,B(I)):(e.consume(I),b)}function x(I){return I===null?n(I):I===63?(e.consume(I),S):Xe(I)?(a=x,B(I)):(e.consume(I),x)}function S(I){return I===62?O(I):x(I)}function E(I){return pi(I)?(e.consume(I),_):n(I)}function _(I){return I===45||Jr(I)?(e.consume(I),_):T(I)}function T(I){return Xe(I)?(a=T,B(I)):ft(I)?(e.consume(I),T):O(I)}function C(I){return I===45||Jr(I)?(e.consume(I),C):I===47||I===62||Ht(I)?k(I):n(I)}function k(I){return I===47?(e.consume(I),O):I===58||I===95||pi(I)?(e.consume(I),A):Xe(I)?(a=k,B(I)):ft(I)?(e.consume(I),k):O(I)}function A(I){return I===45||I===46||I===58||I===95||Jr(I)?(e.consume(I),A):j(I)}function j(I){return I===61?(e.consume(I),D):Xe(I)?(a=j,B(I)):ft(I)?(e.consume(I),j):k(I)}function D(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(e.consume(I),i=I,P):Xe(I)?(a=D,B(I)):ft(I)?(e.consume(I),D):(e.consume(I),M)}function P(I){return I===i?(e.consume(I),i=void 0,L):I===null?n(I):Xe(I)?(a=P,B(I)):(e.consume(I),P)}function M(I){return I===null||I===34||I===39||I===60||I===61||I===96?n(I):I===47||I===62||Ht(I)?k(I):(e.consume(I),M)}function L(I){return I===47||I===62||Ht(I)?k(I):n(I)}function O(I){return I===62?(e.consume(I),e.exit("htmlTextData"),e.exit("htmlText"),t):n(I)}function B(I){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(I),e.exit("lineEnding"),R}function R(I){return ft(I)?yt(e,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):F(I)}function F(I){return e.enter("htmlTextData"),a(I)}}const XM={name:"labelEnd",resolveAll:rJe,resolveTo:iJe,tokenize:sJe},eJe={tokenize:aJe},tJe={tokenize:oJe},nJe={tokenize:lJe};function rJe(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&ds(e,0,e.length,n),e}function iJe(e,t){let n=e.length,r=0,i,s,a,o;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=n);const l={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[s][1].start},end:{...e[a][1].end}},d={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[a-2][1].start}};return o=[["enter",l,t],["enter",u,t]],o=Is(o,e.slice(s+1,s+r+3)),o=Is(o,[["enter",d,t]]),o=Is(o,GS(t.parser.constructs.insideSpan.null,e.slice(s+r+4,a-3),t)),o=Is(o,[["exit",d,t],e[a-2],e[a-1],["exit",u,t]]),o=Is(o,e.slice(a+1)),o=Is(o,[["exit",l,t]]),ds(e,s,e.length,o),e}function sJe(e,t,n){const r=this;let i=r.events.length,s,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return o;function o(h){return s?s._inactive?f(h):(a=r.parser.defined.includes(ba(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelEnd"),l):n(h)}function l(h){return h===40?e.attempt(eJe,d,a?d:f)(h):h===91?e.attempt(tJe,d,a?u:f)(h):a?d(h):f(h)}function u(h){return e.attempt(nJe,d,f)(h)}function d(h){return t(h)}function f(h){return s._balanced=!0,n(h)}}function aJe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Ht(f)?Ym(e,s)(f):s(f)}function s(f){return f===41?d(f):Aie(e,a,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function a(f){return Ht(f)?Ym(e,l)(f):d(f)}function o(f){return n(f)}function l(f){return f===34||f===39||f===40?Oie(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):d(f)}function u(f){return Ht(f)?Ym(e,d)(f):d(f)}function d(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function oJe(e,t,n){const r=this;return i;function i(o){return jie.call(r,e,s,a,"reference","referenceMarker","referenceString")(o)}function s(o){return r.parser.defined.includes(ba(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(o):n(o)}function a(o){return n(o)}}function lJe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const cJe={name:"labelStartImage",resolveAll:XM.resolveAll,tokenize:uJe};function uJe(e,t,n){const r=this;return i;function i(o){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(o),e.exit("labelImageMarker"),s}function s(o){return o===91?(e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelImage"),a):n(o)}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const dJe={name:"labelStartLink",resolveAll:XM.resolveAll,tokenize:fJe};function fJe(e,t,n){const r=this;return i;function i(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const PT={name:"lineEnding",tokenize:hJe};function hJe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),yt(e,t,"linePrefix")}}const Tx={name:"thematicBreak",tokenize:pJe};function pJe(e,t,n){let r=0,i;return s;function s(u){return e.enter("thematicBreak"),a(u)}function a(u){return i=u,o(u)}function o(u){return u===i?(e.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||Xe(u))?(e.exit("thematicBreak"),t(u)):n(u)}function l(u){return u===i?(e.consume(u),r++,l):(e.exit("thematicBreakSequence"),ft(u)?yt(e,o,"whitespace")(u):o(u))}}const Ti={continuation:{tokenize:vJe},exit:bJe,name:"list",tokenize:yJe},mJe={partial:!0,tokenize:wJe},gJe={partial:!0,tokenize:xJe};function yJe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return o;function o(p){const m=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:IA(p)){if(r.containerState.type||(r.containerState.type=m,e.enter(m,{_container:!0})),m==="listUnordered")return e.enter("listItemPrefix"),p===42||p===45?e.check(Tx,n,u)(p):u(p);if(!r.interrupt||p===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(p)}return n(p)}function l(p){return IA(p)&&++a<10?(e.consume(p),l):(!r.interrupt||a<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(e.exit("listItemValue"),u(p)):n(p)}function u(p){return e.enter("listItemMarker"),e.consume(p),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,e.check(vy,r.interrupt?n:d,e.attempt(mJe,h,f))}function d(p){return r.containerState.initialBlankLine=!0,s++,h(p)}function f(p){return ft(p)?(e.enter("listItemPrefixWhitespace"),e.consume(p),e.exit("listItemPrefixWhitespace"),h):n(p)}function h(p){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(p)}}function vJe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(vy,i,s);function i(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,yt(e,t,"listItemIndent",r.containerState.size+1)(o)}function s(o){return r.containerState.furtherBlankLines||!ft(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(gJe,t,a)(o))}function a(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,yt(e,e.attempt(Ti,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function xJe(e,t,n){const r=this;return yt(e,i,"listItemIndent",r.containerState.size+1);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?t(s):n(s)}}function bJe(e){e.exit(this.containerState.type)}function wJe(e,t,n){const r=this;return yt(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const a=r.events[r.events.length-1];return!ft(s)&&a&&a[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const x9={name:"setextUnderline",resolveTo:EJe,tokenize:SJe};function EJe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const a={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",a,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=a,e.push(["exit",a,t]),e}function SJe(e,t,n){const r=this;let i;return s;function s(u){let d=r.events.length,f;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){f=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=u,a(u)):n(u)}function a(u){return e.enter("setextHeadingLineSequence"),o(u)}function o(u){return u===i?(e.consume(u),o):(e.exit("setextHeadingLineSequence"),ft(u)?yt(e,l,"lineSuffix")(u):l(u))}function l(u){return u===null||Xe(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const _Je={tokenize:NJe};function NJe(e){const t=this,n=e.attempt(vy,r,e.attempt(this.parser.constructs.flowInitial,i,yt(e,e.attempt(this.parser.constructs.flow,i,e.attempt(jQe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const TJe={resolveAll:Iie()},CJe=Pie("string"),kJe=Pie("text");function Pie(e){return{resolveAll:Iie(e==="text"?AJe:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,a,o);return a;function a(d){return u(d)?s(d):o(d)}function o(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),l}function l(d){return u(d)?(n.exit("data"),s(d)):(n.consume(d),l)}function u(d){if(d===null)return!0;const f=i[d];let h=-1;if(f)for(;++h<f.length;){const p=f[h];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function Iie(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function AJe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,a=-1,o=0,l;for(;s--;){const u=i[s];if(typeof u=="string"){for(a=u.length;u.charCodeAt(a-1)===32;)o++,a--;if(a)break;a=-1}else if(u===-2)l=!0,o++;else if(u!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(o=0),o){const u={type:n===e.length||l||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:r.start._bufferIndex+a,_index:r.start._index+s,line:r.end.line,column:r.end.column-o,offset:r.end.offset-o},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const jJe={42:Ti,43:Ti,45:Ti,48:Ti,49:Ti,50:Ti,51:Ti,52:Ti,53:Ti,54:Ti,55:Ti,56:Ti,57:Ti,62:Nie},OJe={91:MQe},PJe={[-2]:OT,[-1]:OT,32:OT},IJe={35:UQe,42:Tx,45:[x9,Tx],60:WQe,61:x9,95:Tx,96:y9,126:y9},DJe={38:Cie,92:Tie},MJe={[-5]:PT,[-4]:PT,[-3]:PT,33:cJe,38:Cie,42:DA,60:[dQe,JQe],91:dJe,92:[BQe,Tie],93:XM,95:DA,96:_Qe},RJe={null:[DA,TJe]},LJe={null:[42,95]},FJe={null:[]},BJe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:LJe,contentInitial:OJe,disable:FJe,document:jJe,flow:IJe,flowInitial:PJe,insideSpan:RJe,string:DJe,text:MJe},Symbol.toStringTag,{value:"Module"}));function $Je(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let a=[],o=[];const l={attempt:T(E),check:T(_),consume:b,enter:x,exit:S,interrupt:T(_,{interrupt:!0})},u={code:null,containerState:{},defineSkip:g,events:[],now:m,parser:e,previous:null,sliceSerialize:h,sliceStream:p,write:f};let d=t.tokenize.call(u,l);return t.resolveAll&&s.push(t),u;function f(j){return a=Is(a,j),v(),a[a.length-1]!==null?[]:(C(t,0),u.events=GS(s,u.events,u),u.events)}function h(j,D){return zJe(p(j),D)}function p(j){return UJe(a,j)}function m(){const{_bufferIndex:j,_index:D,line:P,column:M,offset:L}=r;return{_bufferIndex:j,_index:D,line:P,column:M,offset:L}}function g(j){i[j.line]=j.column,A()}function v(){let j;for(;r._index<a.length;){const D=a[r._index];if(typeof D=="string")for(j=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===j&&r._bufferIndex<D.length;)y(D.charCodeAt(r._bufferIndex));else y(D)}}function y(j){d=d(j)}function b(j){Xe(j)?(r.line++,r.column=1,r.offset+=j===-3?2:1,A()):j!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=j}function x(j,D){const P=D||{};return P.type=j,P.start=m(),u.events.push(["enter",P,u]),o.push(P),P}function S(j){const D=o.pop();return D.end=m(),u.events.push(["exit",D,u]),D}function E(j,D){C(j,D.from)}function _(j,D){D.restore()}function T(j,D){return P;function P(M,L,O){let B,R,F,I;return Array.isArray(M)?G(M):"tokenize"in M?G([M]):X(M);function X(Q){return K;function K(xe){const ae=xe!==null&&Q[xe],ue=xe!==null&&Q.null,Ee=[...Array.isArray(ae)?ae:ae?[ae]:[],...Array.isArray(ue)?ue:ue?[ue]:[]];return G(Ee)(xe)}}function G(Q){return B=Q,R=0,Q.length===0?O:$(Q[R])}function $(Q){return K;function K(xe){return I=k(),F=Q,Q.partial||(u.currentConstruct=Q),Q.name&&u.parser.constructs.disable.null.includes(Q.name)?je():Q.tokenize.call(D?Object.assign(Object.create(u),D):u,l,be,je)(xe)}}function be(Q){return j(F,I),L}function je(Q){return I.restore(),++R<B.length?$(B[R]):O}}}function C(j,D){j.resolveAll&&!s.includes(j)&&s.push(j),j.resolve&&ds(u.events,D,u.events.length-D,j.resolve(u.events.slice(D),u)),j.resolveTo&&(u.events=j.resolveTo(u.events,u))}function k(){const j=m(),D=u.previous,P=u.currentConstruct,M=u.events.length,L=Array.from(o);return{from:M,restore:O};function O(){r=j,u.previous=D,u.currentConstruct=P,u.events.length=M,o=L,A()}}function A(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function UJe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let a;if(n===i)a=[e[n].slice(r,s)];else{if(a=e.slice(n,i),r>-1){const o=a[0];typeof o=="string"?a[0]=o.slice(r):a.shift()}s>0&&a.push(e[i].slice(0,s))}return a}function zJe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&i)continue;a=" ";break}default:a=String.fromCharCode(s)}i=s===-2,r.push(a)}return r.join("")}function HJe(e){const r={constructs:Sie([BJe,...(e||{}).extensions||[]]),content:i(iQe),defined:[],document:i(aQe),flow:i(_Je),lazy:{},string:i(CJe),text:i(kJe)};return r;function i(s){return a;function a(o){return $Je(r,s,o)}}}function VJe(e){for(;!kie(e););return e}const b9=/[\0\t\n\r]/g;function WJe(){let e=1,t="",n=!0,r;return i;function i(s,a,o){const l=[];let u,d,f,h,p;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(b9.lastIndex=f,u=b9.exec(s),h=u&&u.index!==void 0?u.index:s.length,p=s.charCodeAt(h),!u){t=s.slice(f);break}if(p===10&&f===h&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),f<h&&(l.push(s.slice(f,h)),e+=h-f),p){case 0:{l.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,l.push(-2);e++<d;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:r=!0,e=1}f=h+1}return o&&(r&&l.push(-5),t&&l.push(t),l.push(null)),l}}const qJe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function KJe(e){return e.replace(qJe,GJe)}function GJe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return _ie(n.slice(s?2:1),s?16:10)}return YM(n)||e}const Die={}.hasOwnProperty;function YJe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),XJe(n)(VJe(HJe(n).document().write(WJe()(e,t,!0))))}function XJe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(fe),autolinkProtocol:k,autolinkEmail:k,atxHeading:s(tt),blockQuote:s(ue),characterEscape:k,characterReference:k,codeFenced:s(Ee),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(Ee,a),codeText:s(re,a),codeTextData:k,data:k,codeFlowValue:k,definition:s(Je),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(De),hardBreakEscape:s(Y),hardBreakTrailing:s(Y),htmlFlow:s(pe,a),htmlFlowData:k,htmlText:s(pe,a),htmlTextData:k,image:s(W),label:a,link:s(fe),listItem:s(ze),listItemValue:h,listOrdered:s(Fe,f),listUnordered:s(Fe),paragraph:s(ct),reference:$,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(tt),strong:s(Ot),thematicBreak:s(Me)},exit:{atxHeading:l(),atxHeadingSequence:E,autolink:l(),autolinkEmail:ae,autolinkProtocol:xe,blockQuote:l(),characterEscapeValue:A,characterReferenceMarkerHexadecimal:je,characterReferenceMarkerNumeric:je,characterReferenceValue:Q,characterReference:K,codeFenced:l(v),codeFencedFence:g,codeFencedFenceInfo:p,codeFencedFenceMeta:m,codeFlowValue:A,codeIndented:l(y),codeText:l(L),codeTextData:A,data:A,definition:l(),definitionDestinationString:S,definitionLabelString:b,definitionTitleString:x,emphasis:l(),hardBreakEscape:l(D),hardBreakTrailing:l(D),htmlFlow:l(P),htmlFlowData:A,htmlText:l(M),htmlTextData:A,image:l(B),label:F,labelText:R,lineEnding:j,link:l(O),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:be,resourceDestinationString:I,resourceTitleString:X,resource:G,setextHeading:l(C),setextHeadingLineSequence:T,setextHeadingText:_,strong:l(),thematicBreak:l()}};Mie(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(q){let te={type:"root",children:[]};const ye={stack:[te],tokenStack:[],config:t,enter:o,exit:u,buffer:a,resume:d,data:n},Oe=[];let Be=-1;for(;++Be<q.length;)if(q[Be][1].type==="listOrdered"||q[Be][1].type==="listUnordered")if(q[Be][0]==="enter")Oe.push(Be);else{const bt=Oe.pop();Be=i(q,bt,Be)}for(Be=-1;++Be<q.length;){const bt=t[q[Be][0]];Die.call(bt,q[Be][1].type)&&bt[q[Be][1].type].call(Object.assign({sliceSerialize:q[Be][2].sliceSerialize},ye),q[Be][1])}if(ye.tokenStack.length>0){const bt=ye.tokenStack[ye.tokenStack.length-1];(bt[1]||w9).call(ye,void 0,bt[0])}for(te.position={start:Tl(q.length>0?q[0][1].start:{line:1,column:1,offset:0}),end:Tl(q.length>0?q[q.length-2][1].end:{line:1,column:1,offset:0})},Be=-1;++Be<t.transforms.length;)te=t.transforms[Be](te)||te;return te}function i(q,te,ye){let Oe=te-1,Be=-1,bt=!1,ve,Et,qt,dr;for(;++Oe<=ye;){const _n=q[Oe];switch(_n[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{_n[0]==="enter"?Be++:Be--,dr=void 0;break}case"lineEndingBlank":{_n[0]==="enter"&&(ve&&!dr&&!Be&&!qt&&(qt=Oe),dr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:dr=void 0}if(!Be&&_n[0]==="enter"&&_n[1].type==="listItemPrefix"||Be===-1&&_n[0]==="exit"&&(_n[1].type==="listUnordered"||_n[1].type==="listOrdered")){if(ve){let ea=Oe;for(Et=void 0;ea--;){const ta=q[ea];if(ta[1].type==="lineEnding"||ta[1].type==="lineEndingBlank"){if(ta[0]==="exit")continue;Et&&(q[Et][1].type="lineEndingBlank",bt=!0),ta[1].type="lineEnding",Et=ea}else if(!(ta[1].type==="linePrefix"||ta[1].type==="blockQuotePrefix"||ta[1].type==="blockQuotePrefixWhitespace"||ta[1].type==="blockQuoteMarker"||ta[1].type==="listItemIndent"))break}qt&&(!Et||qt<Et)&&(ve._spread=!0),ve.end=Object.assign({},Et?q[Et][1].start:_n[1].end),q.splice(Et||Oe,0,["exit",ve,_n[2]]),Oe++,ye++}if(_n[1].type==="listItemPrefix"){const ea={type:"listItem",_spread:!1,start:Object.assign({},_n[1].start),end:void 0};ve=ea,q.splice(Oe,0,["enter",ea,_n[2]]),Oe++,ye++,qt=void 0,dr=!0}}}return q[te][1]._spread=bt,ye}function s(q,te){return ye;function ye(Oe){o.call(this,q(Oe),Oe),te&&te.call(this,Oe)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(q,te,ye){this.stack[this.stack.length-1].children.push(q),this.stack.push(q),this.tokenStack.push([te,ye||void 0]),q.position={start:Tl(te.start),end:void 0}}function l(q){return te;function te(ye){q&&q.call(this,ye),u.call(this,ye)}}function u(q,te){const ye=this.stack.pop(),Oe=this.tokenStack.pop();if(Oe)Oe[0].type!==q.type&&(te?te.call(this,q,Oe[0]):(Oe[1]||w9).call(this,q,Oe[0]));else throw new Error("Cannot close `"+q.type+"` ("+Gm({start:q.start,end:q.end})+"): its not open");ye.position.end=Tl(q.end)}function d(){return GM(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function h(q){if(this.data.expectingFirstListItemValue){const te=this.stack[this.stack.length-2];te.start=Number.parseInt(this.sliceSerialize(q),10),this.data.expectingFirstListItemValue=void 0}}function p(){const q=this.resume(),te=this.stack[this.stack.length-1];te.lang=q}function m(){const q=this.resume(),te=this.stack[this.stack.length-1];te.meta=q}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function v(){const q=this.resume(),te=this.stack[this.stack.length-1];te.value=q.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const q=this.resume(),te=this.stack[this.stack.length-1];te.value=q.replace(/(\r?\n|\r)$/g,"")}function b(q){const te=this.resume(),ye=this.stack[this.stack.length-1];ye.label=te,ye.identifier=ba(this.sliceSerialize(q)).toLowerCase()}function x(){const q=this.resume(),te=this.stack[this.stack.length-1];te.title=q}function S(){const q=this.resume(),te=this.stack[this.stack.length-1];te.url=q}function E(q){const te=this.stack[this.stack.length-1];if(!te.depth){const ye=this.sliceSerialize(q).length;te.depth=ye}}function _(){this.data.setextHeadingSlurpLineEnding=!0}function T(q){const te=this.stack[this.stack.length-1];te.depth=this.sliceSerialize(q).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function k(q){const ye=this.stack[this.stack.length-1].children;let Oe=ye[ye.length-1];(!Oe||Oe.type!=="text")&&(Oe=un(),Oe.position={start:Tl(q.start),end:void 0},ye.push(Oe)),this.stack.push(Oe)}function A(q){const te=this.stack.pop();te.value+=this.sliceSerialize(q),te.position.end=Tl(q.end)}function j(q){const te=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ye=te.children[te.children.length-1];ye.position.end=Tl(q.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(te.type)&&(k.call(this,q),A.call(this,q))}function D(){this.data.atHardBreak=!0}function P(){const q=this.resume(),te=this.stack[this.stack.length-1];te.value=q}function M(){const q=this.resume(),te=this.stack[this.stack.length-1];te.value=q}function L(){const q=this.resume(),te=this.stack[this.stack.length-1];te.value=q}function O(){const q=this.stack[this.stack.length-1];if(this.data.inReference){const te=this.data.referenceType||"shortcut";q.type+="Reference",q.referenceType=te,delete q.url,delete q.title}else delete q.identifier,delete q.label;this.data.referenceType=void 0}function B(){const q=this.stack[this.stack.length-1];if(this.data.inReference){const te=this.data.referenceType||"shortcut";q.type+="Reference",q.referenceType=te,delete q.url,delete q.title}else delete q.identifier,delete q.label;this.data.referenceType=void 0}function R(q){const te=this.sliceSerialize(q),ye=this.stack[this.stack.length-2];ye.label=KJe(te),ye.identifier=ba(te).toLowerCase()}function F(){const q=this.stack[this.stack.length-1],te=this.resume(),ye=this.stack[this.stack.length-1];if(this.data.inReference=!0,ye.type==="link"){const Oe=q.children;ye.children=Oe}else ye.alt=te}function I(){const q=this.resume(),te=this.stack[this.stack.length-1];te.url=q}function X(){const q=this.resume(),te=this.stack[this.stack.length-1];te.title=q}function G(){this.data.inReference=void 0}function $(){this.data.referenceType="collapsed"}function be(q){const te=this.resume(),ye=this.stack[this.stack.length-1];ye.label=te,ye.identifier=ba(this.sliceSerialize(q)).toLowerCase(),this.data.referenceType="full"}function je(q){this.data.characterReferenceType=q.type}function Q(q){const te=this.sliceSerialize(q),ye=this.data.characterReferenceType;let Oe;ye?(Oe=_ie(te,ye==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Oe=YM(te);const Be=this.stack[this.stack.length-1];Be.value+=Oe}function K(q){const te=this.stack.pop();te.position.end=Tl(q.end)}function xe(q){A.call(this,q);const te=this.stack[this.stack.length-1];te.url=this.sliceSerialize(q)}function ae(q){A.call(this,q);const te=this.stack[this.stack.length-1];te.url="mailto:"+this.sliceSerialize(q)}function ue(){return{type:"blockquote",children:[]}}function Ee(){return{type:"code",lang:null,meta:null,value:""}}function re(){return{type:"inlineCode",value:""}}function Je(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function De(){return{type:"emphasis",children:[]}}function tt(){return{type:"heading",depth:0,children:[]}}function Y(){return{type:"break"}}function pe(){return{type:"html",value:""}}function W(){return{type:"image",title:null,url:"",alt:null}}function fe(){return{type:"link",title:null,url:"",children:[]}}function Fe(q){return{type:"list",ordered:q.type==="listOrdered",start:null,spread:q._spread,children:[]}}function ze(q){return{type:"listItem",spread:q._spread,checked:null,children:[]}}function ct(){return{type:"paragraph",children:[]}}function Ot(){return{type:"strong",children:[]}}function un(){return{type:"text",value:""}}function Me(){return{type:"thematicBreak"}}}function Tl(e){return{line:e.line,column:e.column,offset:e.offset}}function Mie(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Mie(e,r):QJe(e,r)}}function QJe(e,t){let n;for(n in t)if(Die.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function w9(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Gm({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Gm({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Gm({start:t.start,end:t.end})+") is still open")}function JJe(e){const t=this;t.parser=n;function n(r){return YJe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function ZJe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function eZe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function tZe(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function nZe(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function rZe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function iZe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=vp(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let a,o=e.footnoteCounts.get(r);o===void 0?(o=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=s+1,o+=1,e.footnoteCounts.set(r,o);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,u),e.applyData(t,u)}function sZe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function aZe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Rie(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&a.type==="text"?a.value+=r:i.push({type:"text",value:r}),i}function oZe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Rie(e,t);const i={src:vp(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function lZe(e,t){const n={src:vp(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function cZe(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function uZe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Rie(e,t);const i={href:vp(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function dZe(e,t){const n={href:vp(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function fZe(e,t,n){const r=e.all(t),i=n?hZe(n):Lie(t),s={},a=[];if(typeof t.checked=="boolean"){const d=r[0];let f;d&&d.type==="element"&&d.tagName==="p"?f=d:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const d=r[o];(i||o!==0||d.type!=="element"||d.tagName!=="p")&&a.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!i?a.push(...d.children):a.push(d)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&a.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:a};return e.patch(t,u),e.applyData(t,u)}function hZe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Lie(n[r])}return t}function Lie(e){const t=e.spread;return t??e.children.length>1}function pZe(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const a=r[i];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function mZe(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function gZe(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function yZe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function vZe(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],a),i.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},o=xo(t.children[1]),l=qS(t.children[t.children.length-1]);o&&l&&(a.position={start:o,end:l}),i.push(a)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function xZe(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,o=a?a.length:t.children.length;let l=-1;const u=[];for(;++l<o;){const f=t.children[l],h={},p=a?a[l]:void 0;p&&(h.align=p);let m={type:"element",tagName:s,properties:h,children:[]};f&&(m.children=e.all(f),e.patch(f,m),m=e.applyData(f,m)),u.push(m)}const d={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,d),e.applyData(t,d)}function bZe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const E9=9,S9=32;function wZe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(_9(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(_9(t.slice(i),i>0,!1)),s.join("")}function _9(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===E9||s===S9;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===E9||s===S9;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function EZe(e,t){const n={type:"text",value:wZe(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function SZe(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const _Ze={blockquote:ZJe,break:eZe,code:tZe,delete:nZe,emphasis:rZe,footnoteReference:iZe,heading:sZe,html:aZe,imageReference:oZe,image:lZe,inlineCode:cZe,linkReference:uZe,link:dZe,listItem:fZe,list:pZe,paragraph:mZe,root:gZe,strong:yZe,table:vZe,tableCell:bZe,tableRow:xZe,text:EZe,thematicBreak:SZe,toml:Wv,yaml:Wv,definition:Wv,footnoteDefinition:Wv};function Wv(){}const Fie=-1,YS=0,Xm=1,dw=2,QM=3,JM=4,ZM=5,e3=6,Bie=7,$ie=8,N9=typeof self=="object"?self:globalThis,NZe=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,a]=t[i];switch(s){case YS:case Fie:return n(a,i);case Xm:{const o=n([],i);for(const l of a)o.push(r(l));return o}case dw:{const o=n({},i);for(const[l,u]of a)o[r(l)]=r(u);return o}case QM:return n(new Date(a),i);case JM:{const{source:o,flags:l}=a;return n(new RegExp(o,l),i)}case ZM:{const o=n(new Map,i);for(const[l,u]of a)o.set(r(l),r(u));return o}case e3:{const o=n(new Set,i);for(const l of a)o.add(r(l));return o}case Bie:{const{name:o,message:l}=a;return n(new N9[o](l),i)}case $ie:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:o}=new Uint8Array(a);return n(new DataView(o),a)}}return n(new N9[s](a),i)};return r},T9=e=>NZe(new Map,e)(0),sf="",{toString:TZe}={},{keys:CZe}=Object,Jp=e=>{const t=typeof e;if(t!=="object"||!e)return[YS,t];const n=TZe.call(e).slice(8,-1);switch(n){case"Array":return[Xm,sf];case"Object":return[dw,sf];case"Date":return[QM,sf];case"RegExp":return[JM,sf];case"Map":return[ZM,sf];case"Set":return[e3,sf];case"DataView":return[Xm,n]}return n.includes("Array")?[Xm,n]:n.includes("Error")?[Bie,n]:[dw,n]},qv=([e,t])=>e===YS&&(t==="function"||t==="symbol"),kZe=(e,t,n,r)=>{const i=(a,o)=>{const l=r.push(a)-1;return n.set(o,l),l},s=a=>{if(n.has(a))return n.get(a);let[o,l]=Jp(a);switch(o){case YS:{let d=a;switch(l){case"bigint":o=$ie,d=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);d=null;break;case"undefined":return i([Fie],a)}return i([o,d],a)}case Xm:{if(l){let h=a;return l==="DataView"?h=new Uint8Array(a.buffer):l==="ArrayBuffer"&&(h=new Uint8Array(a)),i([l,[...h]],a)}const d=[],f=i([o,d],a);for(const h of a)d.push(s(h));return f}case dw:{if(l)switch(l){case"BigInt":return i([l,a.toString()],a);case"Boolean":case"Number":case"String":return i([l,a.valueOf()],a)}if(t&&"toJSON"in a)return s(a.toJSON());const d=[],f=i([o,d],a);for(const h of CZe(a))(e||!qv(Jp(a[h])))&&d.push([s(h),s(a[h])]);return f}case QM:return i([o,a.toISOString()],a);case JM:{const{source:d,flags:f}=a;return i([o,{source:d,flags:f}],a)}case ZM:{const d=[],f=i([o,d],a);for(const[h,p]of a)(e||!(qv(Jp(h))||qv(Jp(p))))&&d.push([s(h),s(p)]);return f}case e3:{const d=[],f=i([o,d],a);for(const h of a)(e||!qv(Jp(h)))&&d.push(s(h));return f}}const{message:u}=a;return i([o,{name:l,message:u}],a)};return s},C9=(e,{json:t,lossy:n}={})=>{const r=[];return kZe(!(t||n),!!t,new Map,r)(e),r},Lh=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?T9(C9(e,t)):structuredClone(e):(e,t)=>T9(C9(e,t));function AZe(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function jZe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function OZe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||AZe,r=e.options.footnoteBackLabel||jZe,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let l=-1;for(;++l<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[l]);if(!u)continue;const d=e.all(u),f=String(u.identifier).toUpperCase(),h=vp(f.toLowerCase());let p=0;const m=[],g=e.footnoteCounts.get(f);for(;g!==void 0&&++p<=g;){m.length>0&&m.push({type:"text",value:" "});let b=typeof n=="string"?n:n(l,p);typeof b=="string"&&(b={type:"text",value:b}),m.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+h+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,p),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const v=d[d.length-1];if(v&&v.type==="element"&&v.tagName==="p"){const b=v.children[v.children.length-1];b&&b.type==="text"?b.value+=" ":v.children.push({type:"text",value:" "}),v.children.push(...m)}else d.push(...m);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+h},children:e.wrap(d,!0)};e.patch(u,y),o.push(y)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Lh(a),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(o,!0)},{type:"text",value:`
`}]}}const xy=function(e){if(e==null)return MZe;if(typeof e=="function")return XS(e);if(typeof e=="object")return Array.isArray(e)?PZe(e):IZe(e);if(typeof e=="string")return DZe(e);throw new Error("Expected function, string, or object as test")};function PZe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=xy(e[n]);return XS(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function IZe(e){const t=e;return XS(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function DZe(e){return XS(t);function t(n){return n&&n.type===e}}function XS(e){return t;function t(n,r,i){return!!(RZe(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function MZe(){return!0}function RZe(e){return e!==null&&typeof e=="object"&&"type"in e}const Uie=[],LZe=!0,MA=!1,FZe="skip";function zie(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=xy(i),a=r?-1:1;o(e,void 0,[])();function o(l,u,d){const f=l&&typeof l=="object"?l:{};if(typeof f.type=="string"){const p=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(l.type+(p?"<"+p+">":""))+")"})}return h;function h(){let p=Uie,m,g,v;if((!t||s(l,u,d[d.length-1]||void 0))&&(p=BZe(n(l,d)),p[0]===MA))return p;if("children"in l&&l.children){const y=l;if(y.children&&p[0]!==FZe)for(g=(r?y.children.length:-1)+a,v=d.concat(y);g>-1&&g<y.children.length;){const b=y.children[g];if(m=o(b,g,v)(),m[0]===MA)return m;g=typeof m[1]=="number"?m[1]:g+a}}return p}}}function BZe(e){return Array.isArray(e)?e:typeof e=="number"?[LZe,e]:e==null?Uie:[e]}function by(e,t,n,r){let i,s,a;typeof t=="function"&&typeof n!="function"?(s=void 0,a=t,i=n):(s=t,a=n,i=r),zie(e,s,o,i);function o(l,u){const d=u[u.length-1],f=d?d.children.indexOf(l):void 0;return a(l,f,d)}}const RA={}.hasOwnProperty,$Ze={};function UZe(e,t){const n=t||$Ze,r=new Map,i=new Map,s=new Map,a={..._Ze,...n.handlers},o={all:u,applyData:HZe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:a,one:l,options:n,patch:zZe,wrap:WZe};return by(e,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const f=d.type==="definition"?r:i,h=String(d.identifier).toUpperCase();f.has(h)||f.set(h,d)}}),o;function l(d,f){const h=d.type,p=o.handlers[h];if(RA.call(o.handlers,h)&&p)return p(o,d,f);if(o.options.passThrough&&o.options.passThrough.includes(h)){if("children"in d){const{children:g,...v}=d,y=Lh(v);return y.children=o.all(d),y}return Lh(d)}return(o.options.unknownHandler||VZe)(o,d,f)}function u(d){const f=[];if("children"in d){const h=d.children;let p=-1;for(;++p<h.length;){const m=o.one(h[p],d);if(m){if(p&&h[p-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=k9(m.value)),!Array.isArray(m)&&m.type==="element")){const g=m.children[0];g&&g.type==="text"&&(g.value=k9(g.value))}Array.isArray(m)?f.push(...m):f.push(m)}}}return f}}function zZe(e,t){e.position&&(t.position=jXe(e))}function HZe(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&s&&Object.assign(n.properties,Lh(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function VZe(e,t){const n=t.data||{},r="value"in t&&!(RA.call(n,"hProperties")||RA.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function WZe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function k9(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function A9(e,t){const n=UZe(e,t),r=n.one(e,void 0),i=OZe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function qZe(e,t){return e&&"run"in e?async function(n,r){const i=A9(n,{file:r,...t});await e.run(i,r)}:function(n,r){return A9(n,{file:r,...e||t})}}function j9(e){if(e)throw e}var Cx=Object.prototype.hasOwnProperty,Hie=Object.prototype.toString,O9=Object.defineProperty,P9=Object.getOwnPropertyDescriptor,I9=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Hie.call(t)==="[object Array]"},D9=function(t){if(!t||Hie.call(t)!=="[object Object]")return!1;var n=Cx.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&Cx.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||Cx.call(t,i)},M9=function(t,n){O9&&n.name==="__proto__"?O9(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},R9=function(t,n){if(n==="__proto__")if(Cx.call(t,n)){if(P9)return P9(t,n).value}else return;return t[n]},KZe=function e(){var t,n,r,i,s,a,o=arguments[0],l=1,u=arguments.length,d=!1;for(typeof o=="boolean"&&(d=o,o=arguments[1]||{},l=2),(o==null||typeof o!="object"&&typeof o!="function")&&(o={});l<u;++l)if(t=arguments[l],t!=null)for(n in t)r=R9(o,n),i=R9(t,n),o!==i&&(d&&i&&(D9(i)||(s=I9(i)))?(s?(s=!1,a=r&&I9(r)?r:[]):a=r&&D9(r)?r:{},M9(o,{name:n,newValue:e(d,a,i)})):typeof i<"u"&&M9(o,{name:n,newValue:i}));return o};const IT=ii(KZe);function LA(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function GZe(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);o(null,...i);function o(l,...u){const d=e[++s];let f=-1;if(l){a(l);return}for(;++f<i.length;)(u[f]===null||u[f]===void 0)&&(u[f]=i[f]);i=u,d?YZe(d,o)(...u):a(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function YZe(e,t){let n;return r;function r(...a){const o=e.length>a.length;let l;o&&a.push(i);try{l=e.apply(this,a)}catch(u){const d=u;if(o&&n)throw d;return i(d)}o||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(a,...o){n||(n=!0,t(a,...o))}function s(a){i(null,a)}}const Va={basename:XZe,dirname:QZe,extname:JZe,join:ZZe,sep:"/"};function XZe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');wy(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let a=-1,o=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else a<0&&(s=!0,a=i+1),o>-1&&(e.codePointAt(i)===t.codePointAt(o--)?o<0&&(r=i):(o=-1,r=a));return n===r?r=a:r<0&&(r=e.length),e.slice(n,r)}function QZe(e){if(wy(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function JZe(e){wy(e);let t=e.length,n=-1,r=0,i=-1,s=0,a;for(;t--;){const o=e.codePointAt(t);if(o===47){if(a){r=t+1;break}continue}n<0&&(a=!0,n=t+1),o===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function ZZe(...e){let t=-1,n;for(;++t<e.length;)wy(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":eet(n)}function eet(e){wy(e);const t=e.codePointAt(0)===47;let n=tet(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function tet(e,t){let n="",r=0,i=-1,s=0,a=-1,o,l;for(;++a<=e.length;){if(a<e.length)o=e.codePointAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(n.length>0){n="",r=0,i=a,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,a):n=e.slice(i+1,a),r=a-i-1;i=a,s=0}else o===46&&s>-1?s++:s=-1}return n}function wy(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const net={cwd:ret};function ret(){return"/"}function FA(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function iet(e){if(typeof e=="string")e=new URL(e);else if(!FA(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return set(e)}function set(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const DT=["history","path","basename","stem","extname","dirname"];class Vie{constructor(t){let n;t?FA(t)?n={path:t}:typeof t=="string"||aet(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":net.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<DT.length;){const s=DT[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)DT.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Va.basename(this.path):void 0}set basename(t){RT(t,"basename"),MT(t,"basename"),this.path=Va.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Va.dirname(this.path):void 0}set dirname(t){L9(this.basename,"dirname"),this.path=Va.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Va.extname(this.path):void 0}set extname(t){if(MT(t,"extname"),L9(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Va.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){FA(t)&&(t=iet(t)),RT(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Va.basename(this.path,this.extname):void 0}set stem(t){RT(t,"stem"),MT(t,"stem"),this.path=Va.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new li(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function MT(e,t){if(e&&e.includes(Va.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Va.sep+"`")}function RT(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function L9(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function aet(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const oet=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},cet={}.hasOwnProperty;class t3 extends oet{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=GZe()}copy(){const t=new t3;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(IT(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(BT("data",this.frozen),this.namespace[t]=n,this):cet.call(this.namespace,t)&&this.namespace[t]||void 0:t?(BT("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Kv(t),r=this.parser||this.Parser;return LT("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),LT("process",this.parser||this.Parser),FT("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,a){const o=Kv(t),l=r.parse(o);r.run(l,o,function(d,f,h){if(d||!f||!h)return u(d);const p=f,m=r.stringify(p,h);fet(m)?h.value=m:h.result=m,u(d,h)});function u(d,f){d||!f?a(d):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),LT("processSync",this.parser||this.Parser),FT("processSync",this.compiler||this.Compiler),this.process(t,i),B9("processSync","process",n),r;function i(s,a){n=!0,j9(s),r=a}}run(t,n,r){F9(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(a,o){const l=Kv(n);i.run(t,l,u);function u(d,f,h){const p=f||t;d?o(d):a?a(p):r(void 0,p,h)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),B9("runSync","run",r),i;function s(a,o){j9(a),i=o,r=!0}}stringify(t,n){this.freeze();const r=Kv(n),i=this.compiler||this.Compiler;return FT("stringify",i),F9(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(BT("use",this.frozen),t!=null)if(typeof t=="function")l(t,n);else if(typeof t=="object")Array.isArray(t)?o(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[d,...f]=u;l(d,f)}else a(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function a(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(u.plugins),u.settings&&(i.settings=IT(!0,i.settings,u.settings))}function o(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){const f=u[d];s(f)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,d){let f=-1,h=-1;for(;++f<r.length;)if(r[f][0]===u){h=f;break}if(h===-1)r.push([u,...d]);else if(d.length>0){let[p,...m]=d;const g=r[h][1];LA(g)&&LA(p)&&(p=IT(!0,g,p)),r[h]=[u,p,...m]}}}}const uet=new t3().freeze();function LT(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function FT(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function BT(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function F9(e){if(!LA(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function B9(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Kv(e){return det(e)?e:new Vie(e)}function det(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function fet(e){return typeof e=="string"||het(e)}function het(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const pet="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",$9=[],U9={allowDangerousHtml:!0},met=/^(https?|ircs?|mailto|xmpp)$/i,get=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function yet(e){const t=vet(e),n=xet(e);return bet(t.runSync(t.parse(n),n),e)}function vet(e){const t=e.rehypePlugins||$9,n=e.remarkPlugins||$9,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...U9}:U9;return uet().use(JJe).use(n).use(qZe,r).use(t)}function xet(e){const t=e.children||"",n=new Vie;return typeof t=="string"&&(n.value=t),n}function bet(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,s=t.disallowedElements,a=t.skipHtml,o=t.unwrapDisallowed,l=t.urlTransform||wet;for(const d of get)Object.hasOwn(t,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+pet+d.id,void 0);return by(e,u),MXe(e,{Fragment:c.Fragment,components:i,ignoreInvalidStyle:!0,jsx:c.jsx,jsxs:c.jsxs,passKeys:!0,passNode:!0});function u(d,f,h){if(d.type==="raw"&&h&&typeof f=="number")return a?h.children.splice(f,1):h.children[f]={type:"text",value:d.value},f;if(d.type==="element"){let p;for(p in jT)if(Object.hasOwn(jT,p)&&Object.hasOwn(d.properties,p)){const m=d.properties[p],g=jT[p];(g===null||g.includes(d.tagName))&&(d.properties[p]=l(String(m||""),p,d))}}if(d.type==="element"){let p=n?!n.includes(d.tagName):s?s.includes(d.tagName):!1;if(!p&&r&&typeof f=="number"&&(p=!r(d,f,h)),p&&h&&typeof f=="number")return o&&d.children?h.children.splice(f,1,...d.children):h.children.splice(f,1),f}}}function wet(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||met.test(e.slice(0,t))?e:""}function z9(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function Eet(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function _et(e,t,n){const i=xy((n||{}).ignore||[]),s=Net(t);let a=-1;for(;++a<s.length;)zie(e,"text",o);function o(u,d){let f=-1,h;for(;++f<d.length;){const p=d[f],m=h?h.children:void 0;if(i(p,m?m.indexOf(p):void 0,h))return;h=p}if(h)return l(u,d)}function l(u,d){const f=d[d.length-1],h=s[a][0],p=s[a][1];let m=0;const v=f.children.indexOf(u);let y=!1,b=[];h.lastIndex=0;let x=h.exec(u.value);for(;x;){const S=x.index,E={index:x.index,input:x.input,stack:[...d,u]};let _=p(...x,E);if(typeof _=="string"&&(_=_.length>0?{type:"text",value:_}:void 0),_===!1?h.lastIndex=S+1:(m!==S&&b.push({type:"text",value:u.value.slice(m,S)}),Array.isArray(_)?b.push(..._):_&&b.push(_),m=S+x[0].length,y=!0),!h.global)break;x=h.exec(u.value)}return y?(m<u.value.length&&b.push({type:"text",value:u.value.slice(m)}),f.children.splice(v,1,...b)):b=[u],v+b.length}}function Net(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([Tet(i[0]),Cet(i[1])])}return t}function Tet(e){return typeof e=="string"?new RegExp(Eet(e),"g"):e}function Cet(e){return typeof e=="function"?e:function(){return e}}const $T="phrasing",UT=["autolink","link","image","label"];function ket(){return{transforms:[Met],enter:{literalAutolink:jet,literalAutolinkEmail:zT,literalAutolinkHttp:zT,literalAutolinkWww:zT},exit:{literalAutolink:Det,literalAutolinkEmail:Iet,literalAutolinkHttp:Oet,literalAutolinkWww:Pet}}}function Aet(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:$T,notInConstruct:UT},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:$T,notInConstruct:UT},{character:":",before:"[ps]",after:"\\/",inConstruct:$T,notInConstruct:UT}]}}function jet(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function zT(e){this.config.enter.autolinkProtocol.call(this,e)}function Oet(e){this.config.exit.autolinkProtocol.call(this,e)}function Pet(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function Iet(e){this.config.exit.autolinkEmail.call(this,e)}function Det(e){this.exit(e)}function Met(e){_et(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Ret],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Let]],{ignore:["link","linkReference"]})}function Ret(e,t,n,r,i){let s="";if(!Wie(i)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!Fet(n)))return!1;const a=Bet(n+r);if(!a[0])return!1;const o={type:"link",title:null,url:s+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[o,{type:"text",value:a[1]}]:o}function Let(e,t,n,r){return!Wie(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function Fet(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function Bet(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=z9(e,"(");let s=z9(e,")");for(;r!==-1&&i>s;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[e,n]}function Wie(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Td(n)||KS(n))&&(!t||n!==47)}qie.peek=Get;function $et(){this.buffer()}function Uet(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function zet(){this.buffer()}function Het(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function Vet(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ba(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Wet(e){this.exit(e)}function qet(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ba(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Ket(e){this.exit(e)}function Get(){return"["}function qie(e,t,n,r){const i=n.createTracker(r);let s=i.move("[^");const a=n.enter("footnoteReference"),o=n.enter("reference");return s+=i.move(n.safe(n.associationId(e),{after:"]",before:s})),o(),a(),s+=i.move("]"),s}function Yet(){return{enter:{gfmFootnoteCallString:$et,gfmFootnoteCall:Uet,gfmFootnoteDefinitionLabelString:zet,gfmFootnoteDefinition:Het},exit:{gfmFootnoteCallString:Vet,gfmFootnoteCall:Wet,gfmFootnoteDefinitionLabelString:qet,gfmFootnoteDefinition:Ket}}}function Xet(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:qie},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,a){const o=s.createTracker(a);let l=o.move("[^");const u=s.enter("footnoteDefinition"),d=s.enter("label");return l+=o.move(s.safe(s.associationId(r),{before:l,after:"]"})),d(),l+=o.move("]:"),r.children&&r.children.length>0&&(o.shift(4),l+=o.move((t?`
`:" ")+s.indentLines(s.containerFlow(r,o.current()),t?Kie:Qet))),u(),l}}function Qet(e,t,n){return t===0?e:Kie(e,t,n)}function Kie(e,t,n){return(n?"":"    ")+e}const Jet=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Gie.peek=rtt;function Zet(){return{canContainEols:["delete"],enter:{strikethrough:ttt},exit:{strikethrough:ntt}}}function ett(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Jet}],handlers:{delete:Gie}}}function ttt(e){this.enter({type:"delete",children:[]},e)}function ntt(e){this.exit(e)}function Gie(e,t,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let a=i.move("~~");return a+=n.containerPhrasing(e,{...i.current(),before:a,after:"~"}),a+=i.move("~~"),s(),a}function rtt(){return"~"}function itt(e){return e.length}function stt(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||itt,s=[],a=[],o=[],l=[];let u=0,d=-1;for(;++d<e.length;){const g=[],v=[];let y=-1;for(e[d].length>u&&(u=e[d].length);++y<e[d].length;){const b=att(e[d][y]);if(n.alignDelimiters!==!1){const x=i(b);v[y]=x,(l[y]===void 0||x>l[y])&&(l[y]=x)}g.push(b)}a[d]=g,o[d]=v}let f=-1;if(typeof r=="object"&&"length"in r)for(;++f<u;)s[f]=H9(r[f]);else{const g=H9(r);for(;++f<u;)s[f]=g}f=-1;const h=[],p=[];for(;++f<u;){const g=s[f];let v="",y="";g===99?(v=":",y=":"):g===108?v=":":g===114&&(y=":");let b=n.alignDelimiters===!1?1:Math.max(1,l[f]-v.length-y.length);const x=v+"-".repeat(b)+y;n.alignDelimiters!==!1&&(b=v.length+b+y.length,b>l[f]&&(l[f]=b),p[f]=b),h[f]=x}a.splice(1,0,h),o.splice(1,0,p),d=-1;const m=[];for(;++d<a.length;){const g=a[d],v=o[d];f=-1;const y=[];for(;++f<u;){const b=g[f]||"";let x="",S="";if(n.alignDelimiters!==!1){const E=l[f]-(v[f]||0),_=s[f];_===114?x=" ".repeat(E):_===99?E%2?(x=" ".repeat(E/2+.5),S=" ".repeat(E/2-.5)):(x=" ".repeat(E/2),S=x):S=" ".repeat(E)}n.delimiterStart!==!1&&!f&&y.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&b==="")&&(n.delimiterStart!==!1||f)&&y.push(" "),n.alignDelimiters!==!1&&y.push(x),y.push(b),n.alignDelimiters!==!1&&y.push(S),n.padding!==!1&&y.push(" "),(n.delimiterEnd!==!1||f!==u-1)&&y.push("|")}m.push(n.delimiterEnd===!1?y.join("").replace(/ +$/,""):y.join(""))}return m.join(`
`)}function att(e){return e==null?"":String(e)}function H9(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}const V9={}.hasOwnProperty;function Yie(e,t){const n=t||{};function r(i,...s){let a=r.invalid;const o=r.handlers;if(i&&V9.call(i,e)){const l=String(i[e]);a=V9.call(o,l)?o[l]:r.unknown}if(a)return a.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}function ott(e,t,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const a=n.indentLines(n.containerFlow(e,s.current()),ltt);return i(),a}function ltt(e,t,n){return">"+(n?"":" ")+e}function ctt(e,t){return W9(e,t.inConstruct,!0)&&!W9(e,t.notInConstruct,!1)}function W9(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function q9(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&ctt(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function utt(e,t){const n=String(e);let r=n.indexOf(t),i=r,s=0,a=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>a&&(a=s):s=1,i=r+t.length,r=n.indexOf(t,i);return a}function dtt(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function ftt(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function htt(e,t,n,r){const i=ftt(n),s=e.value||"",a=i==="`"?"GraveAccent":"Tilde";if(dtt(e,n)){const f=n.enter("codeIndented"),h=n.indentLines(s,ptt);return f(),h}const o=n.createTracker(r),l=i.repeat(Math.max(utt(s,i)+1,3)),u=n.enter("codeFenced");let d=o.move(l);if(e.lang){const f=n.enter(`codeFencedLang${a}`);d+=o.move(n.safe(e.lang,{before:d,after:" ",encode:["`"],...o.current()})),f()}if(e.lang&&e.meta){const f=n.enter(`codeFencedMeta${a}`);d+=o.move(" "),d+=o.move(n.safe(e.meta,{before:d,after:`
`,encode:["`"],...o.current()})),f()}return d+=o.move(`
`),s&&(d+=o.move(s+`
`)),d+=o.move(l),u(),d}function ptt(e,t,n){return(n?"":"    ")+e}function n3(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function mtt(e,t,n,r){const i=n3(n),s=i==='"'?"Quote":"Apostrophe",a=n.enter("definition");let o=n.enter("label");const l=n.createTracker(r);let u=l.move("[");return u+=l.move(n.safe(n.associationId(e),{before:u,after:"]",...l.current()})),u+=l.move("]: "),o(),!e.url||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(e.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(o=n.enter("destinationRaw"),u+=l.move(n.safe(e.url,{before:u,after:e.title?" ":`
`,...l.current()}))),o(),e.title&&(o=n.enter(`title${s}`),u+=l.move(" "+i),u+=l.move(n.safe(e.title,{before:u,after:i,...l.current()})),u+=l.move(i),o()),a(),u}function gtt(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function h0(e){return"&#x"+e.toString(16).toUpperCase()+";"}function fw(e,t,n){const r=Rh(e),i=Rh(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Xie.peek=ytt;function Xie(e,t,n,r){const i=gtt(n),s=n.enter("emphasis"),a=n.createTracker(r),o=a.move(i);let l=a.move(n.containerPhrasing(e,{after:i,before:o,...a.current()}));const u=l.charCodeAt(0),d=fw(r.before.charCodeAt(r.before.length-1),u,i);d.inside&&(l=h0(u)+l.slice(1));const f=l.charCodeAt(l.length-1),h=fw(r.after.charCodeAt(0),f,i);h.inside&&(l=l.slice(0,-1)+h0(f));const p=a.move(i);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:d.outside},o+l+p}function ytt(e,t,n){return n.options.emphasis||"*"}function vtt(e,t){let n=!1;return by(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,MA}),!!((!e.depth||e.depth<3)&&GM(e)&&(t.options.setext||n))}function xtt(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(r);if(vtt(e,n)){const d=n.enter("headingSetext"),f=n.enter("phrasing"),h=n.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return f(),d(),h+`
`+(i===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const a="#".repeat(i),o=n.enter("headingAtx"),l=n.enter("phrasing");s.move(a+" ");let u=n.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=h0(u.charCodeAt(0))+u.slice(1)),u=u?a+" "+u:a,n.options.closeAtx&&(u+=" "+a),l(),o(),u}Qie.peek=btt;function Qie(e){return e.value||""}function btt(){return"<"}Jie.peek=wtt;function Jie(e,t,n,r){const i=n3(n),s=i==='"'?"Quote":"Apostrophe",a=n.enter("image");let o=n.enter("label");const l=n.createTracker(r);let u=l.move("![");return u+=l.move(n.safe(e.alt,{before:u,after:"]",...l.current()})),u+=l.move("]("),o(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(e.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(o=n.enter("destinationRaw"),u+=l.move(n.safe(e.url,{before:u,after:e.title?" ":")",...l.current()}))),o(),e.title&&(o=n.enter(`title${s}`),u+=l.move(" "+i),u+=l.move(n.safe(e.title,{before:u,after:i,...l.current()})),u+=l.move(i),o()),u+=l.move(")"),a(),u}function wtt(){return"!"}Zie.peek=Ett;function Zie(e,t,n,r){const i=e.referenceType,s=n.enter("imageReference");let a=n.enter("label");const o=n.createTracker(r);let l=o.move("![");const u=n.safe(e.alt,{before:l,after:"]",...o.current()});l+=o.move(u+"]["),a();const d=n.stack;n.stack=[],a=n.enter("reference");const f=n.safe(n.associationId(e),{before:l,after:"]",...o.current()});return a(),n.stack=d,s(),i==="full"||!u||u!==f?l+=o.move(f+"]"):i==="shortcut"?l=l.slice(0,-1):l+=o.move("]"),l}function Ett(){return"!"}ese.peek=Stt;function ese(e,t,n){let r=e.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const a=n.unsafe[s],o=n.compilePattern(a);let l;if(a.atBreak)for(;l=o.exec(r);){let u=l.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(l.index+1)}}return i+r+i}function Stt(){return"`"}function tse(e,t){const n=GM(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}nse.peek=_tt;function nse(e,t,n,r){const i=n3(n),s=i==='"'?"Quote":"Apostrophe",a=n.createTracker(r);let o,l;if(tse(e,n)){const d=n.stack;n.stack=[],o=n.enter("autolink");let f=a.move("<");return f+=a.move(n.containerPhrasing(e,{before:f,after:">",...a.current()})),f+=a.move(">"),o(),n.stack=d,f}o=n.enter("link"),l=n.enter("label");let u=a.move("[");return u+=a.move(n.containerPhrasing(e,{before:u,after:"](",...a.current()})),u+=a.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=a.move("<"),u+=a.move(n.safe(e.url,{before:u,after:">",...a.current()})),u+=a.move(">")):(l=n.enter("destinationRaw"),u+=a.move(n.safe(e.url,{before:u,after:e.title?" ":")",...a.current()}))),l(),e.title&&(l=n.enter(`title${s}`),u+=a.move(" "+i),u+=a.move(n.safe(e.title,{before:u,after:i,...a.current()})),u+=a.move(i),l()),u+=a.move(")"),o(),u}function _tt(e,t,n){return tse(e,n)?"<":"["}rse.peek=Ntt;function rse(e,t,n,r){const i=e.referenceType,s=n.enter("linkReference");let a=n.enter("label");const o=n.createTracker(r);let l=o.move("[");const u=n.containerPhrasing(e,{before:l,after:"]",...o.current()});l+=o.move(u+"]["),a();const d=n.stack;n.stack=[],a=n.enter("reference");const f=n.safe(n.associationId(e),{before:l,after:"]",...o.current()});return a(),n.stack=d,s(),i==="full"||!u||u!==f?l+=o.move(f+"]"):i==="shortcut"?l=l.slice(0,-1):l+=o.move("]"),l}function Ntt(){return"["}function r3(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function Ttt(e){const t=r3(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Ctt(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function ise(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function ktt(e,t,n,r){const i=n.enter("list"),s=n.bulletCurrent;let a=e.ordered?Ctt(n):r3(n);const o=e.ordered?a==="."?")":".":Ttt(n);let l=t&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!e.ordered){const d=e.children?e.children[0]:void 0;if((a==="*"||a==="-")&&d&&(!d.children||!d.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),ise(n)===a&&d){let f=-1;for(;++f<e.children.length;){const h=e.children[f];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(a=o),n.bulletCurrent=a;const u=n.containerFlow(e,r);return n.bulletLastUsed=a,n.bulletCurrent=s,i(),u}function Att(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function jtt(e,t,n,r){const i=Att(n);let s=n.bulletCurrent||r3(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let a=s.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(a=Math.ceil(a/4)*4);const o=n.createTracker(r);o.move(s+" ".repeat(a-s.length)),o.shift(a);const l=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,o.current()),d);return l(),u;function d(f,h,p){return h?(p?"":" ".repeat(a))+f:(p?s:s+" ".repeat(a-s.length))+f}}function Ott(e,t,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),a=n.containerPhrasing(e,r);return s(),i(),a}const Ptt=xy(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Itt(e,t,n,r){return(e.children.some(function(a){return Ptt(a)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function Dtt(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}sse.peek=Mtt;function sse(e,t,n,r){const i=Dtt(n),s=n.enter("strong"),a=n.createTracker(r),o=a.move(i+i);let l=a.move(n.containerPhrasing(e,{after:i,before:o,...a.current()}));const u=l.charCodeAt(0),d=fw(r.before.charCodeAt(r.before.length-1),u,i);d.inside&&(l=h0(u)+l.slice(1));const f=l.charCodeAt(l.length-1),h=fw(r.after.charCodeAt(0),f,i);h.inside&&(l=l.slice(0,-1)+h0(f));const p=a.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:d.outside},o+l+p}function Mtt(e,t,n){return n.options.strong||"*"}function Rtt(e,t,n,r){return n.safe(e.value,r)}function Ltt(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function Ftt(e,t,n){const r=(ise(n)+(n.options.ruleSpaces?" ":"")).repeat(Ltt(n));return n.options.ruleSpaces?r.slice(0,-1):r}const ase={blockquote:ott,break:q9,code:htt,definition:mtt,emphasis:Xie,hardBreak:q9,heading:xtt,html:Qie,image:Jie,imageReference:Zie,inlineCode:ese,link:nse,linkReference:rse,list:ktt,listItem:jtt,paragraph:Ott,root:Itt,strong:sse,text:Rtt,thematicBreak:Ftt};function Btt(){return{enter:{table:$tt,tableData:K9,tableHeader:K9,tableRow:ztt},exit:{codeText:Htt,table:Utt,tableData:HT,tableHeader:HT,tableRow:HT}}}function $tt(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function Utt(e){this.exit(e),this.data.inTable=void 0}function ztt(e){this.enter({type:"tableRow",children:[]},e)}function HT(e){this.exit(e)}function K9(e){this.enter({type:"tableCell",children:[]},e)}function Htt(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,Vtt));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function Vtt(e,t){return t==="|"?t:e}function Wtt(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:a,tableCell:l,tableRow:o}};function a(p,m,g,v){return u(d(p,g,v),p.align)}function o(p,m,g,v){const y=f(p,g,v),b=u([y]);return b.slice(0,b.indexOf(`
`))}function l(p,m,g,v){const y=g.enter("tableCell"),b=g.enter("phrasing"),x=g.containerPhrasing(p,{...v,before:s,after:s});return b(),y(),x}function u(p,m){return stt(p,{align:m,alignDelimiters:r,padding:n,stringLength:i})}function d(p,m,g){const v=p.children;let y=-1;const b=[],x=m.enter("table");for(;++y<v.length;)b[y]=f(v[y],m,g);return x(),b}function f(p,m,g){const v=p.children;let y=-1;const b=[],x=m.enter("tableRow");for(;++y<v.length;)b[y]=l(v[y],p,m,g);return x(),b}function h(p,m,g){let v=ase.inlineCode(p,m,g);return g.stack.includes("tableCell")&&(v=v.replace(/\|/g,"\\$&")),v}}function qtt(){return{exit:{taskListCheckValueChecked:G9,taskListCheckValueUnchecked:G9,paragraph:Gtt}}}function Ktt(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Ytt}}}function G9(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function Gtt(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let s=-1,a;for(;++s<i.length;){const o=i[s];if(o.type==="paragraph"){a=o;break}}a===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function Ytt(e,t,n,r){const i=e.children[0],s=typeof e.checked=="boolean"&&i&&i.type==="paragraph",a="["+(e.checked?"x":" ")+"] ",o=n.createTracker(r);s&&o.move(a);let l=ase.listItem(e,t,n,{...r,...o.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),l;function u(d){return d+a}}function Xtt(){return[ket(),Yet(),Zet(),Btt(),qtt()]}function Qtt(e){return{extensions:[Aet(),Xet(e),ett(),Wtt(e),Ktt()]}}const Jtt={tokenize:int,partial:!0},ose={tokenize:snt,partial:!0},lse={tokenize:ant,partial:!0},cse={tokenize:ont,partial:!0},Ztt={tokenize:lnt,partial:!0},use={name:"wwwAutolink",tokenize:nnt,previous:fse},dse={name:"protocolAutolink",tokenize:rnt,previous:hse},vl={name:"emailAutolink",tokenize:tnt,previous:pse},bo={};function ent(){return{text:bo}}let lu=48;for(;lu<123;)bo[lu]=vl,lu++,lu===58?lu=65:lu===91&&(lu=97);bo[43]=vl;bo[45]=vl;bo[46]=vl;bo[95]=vl;bo[72]=[vl,dse];bo[104]=[vl,dse];bo[87]=[vl,use];bo[119]=[vl,use];function tnt(e,t,n){const r=this;let i,s;return a;function a(f){return!BA(f)||!pse.call(r,r.previous)||i3(r.events)?n(f):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),o(f))}function o(f){return BA(f)?(e.consume(f),o):f===64?(e.consume(f),l):n(f)}function l(f){return f===46?e.check(Ztt,d,u)(f):f===45||f===95||Jr(f)?(s=!0,e.consume(f),l):d(f)}function u(f){return e.consume(f),i=!0,l}function d(f){return s&&i&&pi(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(f)):n(f)}}function nnt(e,t,n){const r=this;return i;function i(a){return a!==87&&a!==119||!fse.call(r,r.previous)||i3(r.events)?n(a):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Jtt,e.attempt(ose,e.attempt(lse,s),n),n)(a))}function s(a){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(a)}}function rnt(e,t,n){const r=this;let i="",s=!1;return a;function a(f){return(f===72||f===104)&&hse.call(r,r.previous)&&!i3(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(f),e.consume(f),o):n(f)}function o(f){if(pi(f)&&i.length<5)return i+=String.fromCodePoint(f),e.consume(f),o;if(f===58){const h=i.toLowerCase();if(h==="http"||h==="https")return e.consume(f),l}return n(f)}function l(f){return f===47?(e.consume(f),s?u:(s=!0,l)):n(f)}function u(f){return f===null||uw(f)||Ht(f)||Td(f)||KS(f)?n(f):e.attempt(ose,e.attempt(lse,d),n)(f)}function d(f){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(f)}}function int(e,t,n){let r=0;return i;function i(a){return(a===87||a===119)&&r<3?(r++,e.consume(a),i):a===46&&r===3?(e.consume(a),s):n(a)}function s(a){return a===null?n(a):t(a)}}function snt(e,t,n){let r,i,s;return a;function a(u){return u===46||u===95?e.check(cse,l,o)(u):u===null||Ht(u)||Td(u)||u!==45&&KS(u)?l(u):(s=!0,e.consume(u),a)}function o(u){return u===95?r=!0:(i=r,r=void 0),e.consume(u),a}function l(u){return i||r||!s?n(u):t(u)}}function ant(e,t){let n=0,r=0;return i;function i(a){return a===40?(n++,e.consume(a),i):a===41&&r<n?s(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?e.check(cse,t,s)(a):a===null||Ht(a)||Td(a)?t(a):(e.consume(a),i)}function s(a){return a===41&&r++,e.consume(a),i}}function ont(e,t,n){return r;function r(o){return o===33||o===34||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===63||o===95||o===126?(e.consume(o),r):o===38?(e.consume(o),s):o===93?(e.consume(o),i):o===60||o===null||Ht(o)||Td(o)?t(o):n(o)}function i(o){return o===null||o===40||o===91||Ht(o)||Td(o)?t(o):r(o)}function s(o){return pi(o)?a(o):n(o)}function a(o){return o===59?(e.consume(o),r):pi(o)?(e.consume(o),a):n(o)}}function lnt(e,t,n){return r;function r(s){return e.consume(s),i}function i(s){return Jr(s)?n(s):t(s)}}function fse(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Ht(e)}function hse(e){return!pi(e)}function pse(e){return!(e===47||BA(e))}function BA(e){return e===43||e===45||e===46||e===95||Jr(e)}function i3(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const cnt={tokenize:ynt,partial:!0};function unt(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:pnt,continuation:{tokenize:mnt},exit:gnt}},text:{91:{name:"gfmFootnoteCall",tokenize:hnt},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:dnt,resolveTo:fnt}}}}function dnt(e,t,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){a=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return o;function o(l){if(!a||!a._balanced)return n(l);const u=ba(r.sliceSerialize({start:a.end,end:r.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?n(l):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(l),e.exit("gfmFootnoteCallLabelMarker"),t(l))}}function fnt(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},o=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",s,t],["enter",a,t],["exit",a,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...o),e}function hnt(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,a;return o;function o(f){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),l}function l(f){return f!==94?n(f):(e.enter("gfmFootnoteCallMarker"),e.consume(f),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(f){if(s>999||f===93&&!a||f===null||f===91||Ht(f))return n(f);if(f===93){e.exit("chunkString");const h=e.exit("gfmFootnoteCallString");return i.includes(ba(r.sliceSerialize(h)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(f)}return Ht(f)||(a=!0),s++,e.consume(f),f===92?d:u}function d(f){return f===91||f===92||f===93?(e.consume(f),s++,u):u(f)}}function pnt(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,a=0,o;return l;function l(m){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(m){return m===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",d):n(m)}function d(m){if(a>999||m===93&&!o||m===null||m===91||Ht(m))return n(m);if(m===93){e.exit("chunkString");const g=e.exit("gfmFootnoteDefinitionLabelString");return s=ba(r.sliceSerialize(g)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),h}return Ht(m)||(o=!0),a++,e.consume(m),m===92?f:d}function f(m){return m===91||m===92||m===93?(e.consume(m),a++,d):d(m)}function h(m){return m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),i.includes(s)||i.push(s),yt(e,p,"gfmFootnoteDefinitionWhitespace")):n(m)}function p(m){return t(m)}}function mnt(e,t,n){return e.check(vy,t,e.attempt(cnt,t,n))}function gnt(e){e.exit("gfmFootnoteDefinition")}function ynt(e,t,n){const r=this;return yt(e,i,"gfmFootnoteDefinitionIndent",5);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?t(s):n(s)}}function vnt(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(a,o){let l=-1;for(;++l<a.length;)if(a[l][0]==="enter"&&a[l][1].type==="strikethroughSequenceTemporary"&&a[l][1]._close){let u=l;for(;u--;)if(a[u][0]==="exit"&&a[u][1].type==="strikethroughSequenceTemporary"&&a[u][1]._open&&a[l][1].end.offset-a[l][1].start.offset===a[u][1].end.offset-a[u][1].start.offset){a[l][1].type="strikethroughSequence",a[u][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},a[u][1].start),end:Object.assign({},a[l][1].end)},f={type:"strikethroughText",start:Object.assign({},a[u][1].end),end:Object.assign({},a[l][1].start)},h=[["enter",d,o],["enter",a[u][1],o],["exit",a[u][1],o],["enter",f,o]],p=o.parser.constructs.insideSpan.null;p&&ds(h,h.length,0,GS(p,a.slice(u+1,l),o)),ds(h,h.length,0,[["exit",f,o],["enter",a[l][1],o],["exit",a[l][1],o],["exit",d,o]]),ds(a,u-1,l-u+3,h),l=u+h.length-2;break}}for(l=-1;++l<a.length;)a[l][1].type==="strikethroughSequenceTemporary"&&(a[l][1].type="data");return a}function s(a,o,l){const u=this.previous,d=this.events;let f=0;return h;function h(m){return u===126&&d[d.length-1][1].type!=="characterEscape"?l(m):(a.enter("strikethroughSequenceTemporary"),p(m))}function p(m){const g=Rh(u);if(m===126)return f>1?l(m):(a.consume(m),f++,p);if(f<2&&!n)return l(m);const v=a.exit("strikethroughSequenceTemporary"),y=Rh(m);return v._open=!y||y===2&&!!g,v._close=!g||g===2&&!!y,o(m)}}}class xnt{constructor(){this.map=[]}add(t,n,r){bnt(this,t,n,r)}consume(t){if(this.map.sort(function(s,a){return s[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const s of i)t.push(s);i=r.pop()}this.map.length=0}}function bnt(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function wnt(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function Ent(){return{flow:{null:{name:"table",tokenize:Snt,resolveAll:_nt}}}}function Snt(e,t,n){const r=this;let i=0,s=0,a;return o;function o(A){let j=r.events.length-1;for(;j>-1;){const M=r.events[j][1].type;if(M==="lineEnding"||M==="linePrefix")j--;else break}const D=j>-1?r.events[j][1].type:null,P=D==="tableHead"||D==="tableRow"?_:l;return P===_&&r.parser.lazy[r.now().line]?n(A):P(A)}function l(A){return e.enter("tableHead"),e.enter("tableRow"),u(A)}function u(A){return A===124||(a=!0,s+=1),d(A)}function d(A){return A===null?n(A):Xe(A)?s>1?(s=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),p):n(A):ft(A)?yt(e,d,"whitespace")(A):(s+=1,a&&(a=!1,i+=1),A===124?(e.enter("tableCellDivider"),e.consume(A),e.exit("tableCellDivider"),a=!0,d):(e.enter("data"),f(A)))}function f(A){return A===null||A===124||Ht(A)?(e.exit("data"),d(A)):(e.consume(A),A===92?h:f)}function h(A){return A===92||A===124?(e.consume(A),f):f(A)}function p(A){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(A):(e.enter("tableDelimiterRow"),a=!1,ft(A)?yt(e,m,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A):m(A))}function m(A){return A===45||A===58?v(A):A===124?(a=!0,e.enter("tableCellDivider"),e.consume(A),e.exit("tableCellDivider"),g):E(A)}function g(A){return ft(A)?yt(e,v,"whitespace")(A):v(A)}function v(A){return A===58?(s+=1,a=!0,e.enter("tableDelimiterMarker"),e.consume(A),e.exit("tableDelimiterMarker"),y):A===45?(s+=1,y(A)):A===null||Xe(A)?S(A):E(A)}function y(A){return A===45?(e.enter("tableDelimiterFiller"),b(A)):E(A)}function b(A){return A===45?(e.consume(A),b):A===58?(a=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(A),e.exit("tableDelimiterMarker"),x):(e.exit("tableDelimiterFiller"),x(A))}function x(A){return ft(A)?yt(e,S,"whitespace")(A):S(A)}function S(A){return A===124?m(A):A===null||Xe(A)?!a||i!==s?E(A):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(A)):E(A)}function E(A){return n(A)}function _(A){return e.enter("tableRow"),T(A)}function T(A){return A===124?(e.enter("tableCellDivider"),e.consume(A),e.exit("tableCellDivider"),T):A===null||Xe(A)?(e.exit("tableRow"),t(A)):ft(A)?yt(e,T,"whitespace")(A):(e.enter("data"),C(A))}function C(A){return A===null||A===124||Ht(A)?(e.exit("data"),T(A)):(e.consume(A),A===92?k:C)}function k(A){return A===92||A===124?(e.consume(A),C):C(A)}}function _nt(e,t){let n=-1,r=!0,i=0,s=[0,0,0,0],a=[0,0,0,0],o=!1,l=0,u,d,f;const h=new xnt;for(;++n<e.length;){const p=e[n],m=p[1];p[0]==="enter"?m.type==="tableHead"?(o=!1,l!==0&&(Y9(h,t,l,u,d),d=void 0,l=0),u={type:"table",start:Object.assign({},m.start),end:Object.assign({},m.end)},h.add(n,0,[["enter",u,t]])):m.type==="tableRow"||m.type==="tableDelimiterRow"?(r=!0,f=void 0,s=[0,0,0,0],a=[0,n+1,0,0],o&&(o=!1,d={type:"tableBody",start:Object.assign({},m.start),end:Object.assign({},m.end)},h.add(n,0,[["enter",d,t]])),i=m.type==="tableDelimiterRow"?2:d?3:1):i&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")?(r=!1,a[2]===0&&(s[1]!==0&&(a[0]=a[1],f=Gv(h,t,s,i,void 0,f),s=[0,0,0,0]),a[2]=n)):m.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(a[0]=a[1],f=Gv(h,t,s,i,void 0,f)),s=a,a=[s[1],n,0,0])):m.type==="tableHead"?(o=!0,l=n):m.type==="tableRow"||m.type==="tableDelimiterRow"?(l=n,s[1]!==0?(a[0]=a[1],f=Gv(h,t,s,i,n,f)):a[1]!==0&&(f=Gv(h,t,a,i,n,f)),i=0):i&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")&&(a[3]=n)}for(l!==0&&Y9(h,t,l,u,d),h.consume(t.events),n=-1;++n<t.events.length;){const p=t.events[n];p[0]==="enter"&&p[1].type==="table"&&(p[1]._align=wnt(t.events,n))}return e}function Gv(e,t,n,r,i,s){const a=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",o="tableContent";n[0]!==0&&(s.end=Object.assign({},mf(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const l=mf(t.events,n[1]);if(s={type:a,start:Object.assign({},l),end:Object.assign({},l)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const u=mf(t.events,n[2]),d=mf(t.events,n[3]),f={type:o,start:Object.assign({},u),end:Object.assign({},d)};if(e.add(n[2],0,[["enter",f,t]]),r!==2){const h=t.events[n[2]],p=t.events[n[3]];if(h[1].end=Object.assign({},p[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const m=n[2]+1,g=n[3]-n[2]-1;e.add(m,g,[])}}e.add(n[3]+1,0,[["exit",f,t]])}return i!==void 0&&(s.end=Object.assign({},mf(t.events,i)),e.add(i,0,[["exit",s,t]]),s=void 0),s}function Y9(e,t,n,r,i){const s=[],a=mf(t.events,n);i&&(i.end=Object.assign({},a),s.push(["exit",i,t])),r.end=Object.assign({},a),s.push(["exit",r,t]),e.add(n+1,0,s)}function mf(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const Nnt={name:"tasklistCheck",tokenize:Cnt};function Tnt(){return{text:{91:Nnt}}}function Cnt(e,t,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),s)}function s(l){return Ht(l)?(e.enter("taskListCheckValueUnchecked"),e.consume(l),e.exit("taskListCheckValueUnchecked"),a):l===88||l===120?(e.enter("taskListCheckValueChecked"),e.consume(l),e.exit("taskListCheckValueChecked"),a):n(l)}function a(l){return l===93?(e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),o):n(l)}function o(l){return Xe(l)?t(l):ft(l)?e.check({tokenize:knt},t,n)(l):n(l)}}function knt(e,t,n){return yt(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function Ant(e){return Sie([ent(),unt(),vnt(e),Ent(),Tnt()])}const jnt={};function Ont(e){const t=this,n=e||jnt,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(Ant(n)),s.push(Xtt()),a.push(Qtt(n))}const X9=function(e,t,n){const r=xy(n);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if(typeof t=="number"){if(t<0||t===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(t=e.children.indexOf(t),t<0)throw new Error("Expected child node or index");for(;++t<e.children.length;)if(r(e.children[t],t,e))return e.children[t]},Bd=function(e){if(e==null)return Dnt;if(typeof e=="string")return Int(e);if(typeof e=="object")return Pnt(e);if(typeof e=="function")return s3(e);throw new Error("Expected function, string, or array as `test`")};function Pnt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Bd(e[n]);return s3(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function Int(e){return s3(t);function t(n){return n.tagName===e}}function s3(e){return t;function t(n,r,i){return!!(Mnt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Dnt(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="element"&&"tagName"in e&&typeof e.tagName=="string")}function Mnt(e){return e!==null&&typeof e=="object"&&"type"in e&&"tagName"in e}const Q9=/\n/g,J9=/[\t ]+/g,$A=Bd("br"),Z9=Bd(Hnt),Rnt=Bd("p"),e7=Bd("tr"),Lnt=Bd(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",znt,Vnt]),mse=Bd(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function Fnt(e,t){const n=t||{},r="children"in e?e.children:[],i=mse(e),s=vse(e,{whitespace:n.whitespace||"normal"}),a=[];(e.type==="text"||e.type==="comment")&&a.push(...yse(e,{breakBefore:!0,breakAfter:!0}));let o=-1;for(;++o<r.length;)a.push(...gse(r[o],e,{whitespace:s,breakBefore:o?void 0:i,breakAfter:o<r.length-1?$A(r[o+1]):i}));const l=[];let u;for(o=-1;++o<a.length;){const d=a[o];typeof d=="number"?u!==void 0&&d>u&&(u=d):d&&(u!==void 0&&u>-1&&l.push(`
`.repeat(u)||" "),u=-1,l.push(d))}return l.join("")}function gse(e,t,n){return e.type==="element"?Bnt(e,t,n):e.type==="text"?n.whitespace==="normal"?yse(e,n):$nt(e):[]}function Bnt(e,t,n){const r=vse(e,n),i=e.children||[];let s=-1,a=[];if(Lnt(e))return a;let o,l;for($A(e)||e7(e)&&X9(t,e,e7)?l=`
`:Rnt(e)?(o=2,l=2):mse(e)&&(o=1,l=1);++s<i.length;)a=a.concat(gse(i[s],e,{whitespace:r,breakBefore:s?void 0:o,breakAfter:s<i.length-1?$A(i[s+1]):l}));return Z9(e)&&X9(t,e,Z9)&&a.push("	"),o&&a.unshift(o),l&&a.push(l),a}function yse(e,t){const n=String(e.value),r=[],i=[];let s=0;for(;s<=n.length;){Q9.lastIndex=s;const l=Q9.exec(n),u=l&&"index"in l?l.index:n.length;r.push(Unt(n.slice(s,u).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),s===0?t.breakBefore:!0,u===n.length?t.breakAfter:!0)),s=u+1}let a=-1,o;for(;++a<r.length;)r[a].charCodeAt(r[a].length-1)===8203||a<r.length-1&&r[a+1].charCodeAt(0)===8203?(i.push(r[a]),o=void 0):r[a]?(typeof o=="number"&&i.push(o),i.push(r[a]),o=0):(a===0||a===r.length-1)&&i.push(0);return i}function $nt(e){return[String(e.value)]}function Unt(e,t,n){const r=[];let i=0,s;for(;i<e.length;){J9.lastIndex=i;const a=J9.exec(e);s=a?a.index:e.length,!i&&!s&&a&&!t&&r.push(""),i!==s&&r.push(e.slice(i,s)),i=a?s+a[0].length:s}return i!==s&&!n&&r.push(""),r.join(" ")}function vse(e,t){if(e.type==="element"){const n=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return n.wrap?"pre-wrap":"pre";case"td":case"th":return n.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}}return t.whitespace}function znt(e){return!!(e.properties||{}).hidden}function Hnt(e){return e.tagName==="td"||e.tagName==="th"}function Vnt(e){return e.tagName==="dialog"&&!(e.properties||{}).open}const Wnt={};function qnt(e){const t=e||Wnt,n=t.aliases,r=t.detect||!1,i=t.languages||aie,s=t.plainText,a=t.prefix,o=t.subset;let l="hljs";const u=oie(i);if(n&&u.registerAlias(n),a){const d=a.indexOf("-");l=d===-1?a:a.slice(0,d)}return function(d,f){by(d,"element",function(h,p,m){if(h.tagName!=="code"||!m||m.type!=="element"||m.tagName!=="pre")return;const g=Knt(h);if(g===!1||!g&&!r||g&&s&&s.includes(g))return;Array.isArray(h.properties.className)||(h.properties.className=[]),h.properties.className.includes(l)||h.properties.className.unshift(l);const v=Fnt(h,{whitespace:"pre"});let y;try{y=g?u.highlight(g,v,{prefix:a}):u.highlightAuto(v,{prefix:a,subset:o})}catch(b){const x=b;if(g&&/Unknown language/.test(x.message)){f.message("Cannot highlight as `"+g+"`, its not registered",{ancestors:[m,h],cause:x,place:h.position,ruleId:"missing-language",source:"rehype-highlight"});return}throw x}!g&&y.data&&y.data.language&&h.properties.className.push("language-"+y.data.language),y.children.length>0&&(h.children=y.children)})}}function Knt(e){const t=e.properties.className;let n=-1;if(!Array.isArray(t))return;let r;for(;++n<t.length;){const i=String(t[n]);if(i==="no-highlight"||i==="nohighlight")return!1;!r&&i.slice(0,5)==="lang-"&&(r=i.slice(5)),!r&&i.slice(0,9)==="language-"&&(r=i.slice(9))}return r}const t7=/[#.]/g;function Gnt(e,t){const n=e||"",r={};let i=0,s,a;for(;i<n.length;){t7.lastIndex=i;const o=t7.exec(n),l=n.slice(i,o?o.index:n.length);l&&(s?s==="#"?r.id=l:Array.isArray(r.className)?r.className.push(l):r.className=[l]:a=l,i+=l.length),o&&(s=o[0],i++)}return{type:"element",tagName:a||t||"div",properties:r,children:[]}}function xse(e,t,n){const r=n?Jnt(n):void 0;function i(s,a,...o){let l;if(s==null){l={type:"root",children:[]};const u=a;o.unshift(u)}else{l=Gnt(s,t);const u=l.tagName.toLowerCase(),d=r?r.get(u):void 0;if(l.tagName=d||u,Ynt(a))o.unshift(a);else for(const[f,h]of Object.entries(a))Xnt(e,l.properties,f,h)}for(const u of o)UA(l.children,u);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function Ynt(e){if(e===null||typeof e!="object"||Array.isArray(e))return!0;if(typeof e.type!="string")return!1;const t=e,n=Object.keys(e);for(const r of n){const i=t[r];if(i&&typeof i=="object"){if(!Array.isArray(i))return!0;const s=i;for(const a of s)if(typeof a!="number"&&typeof a!="string")return!0}}return!!("children"in e&&Array.isArray(e.children))}function Xnt(e,t,n,r){const i=HM(e,n);let s;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;s=r}else typeof r=="boolean"?s=r:typeof r=="string"?i.spaceSeparated?s=r9(r):i.commaSeparated?s=J$(r):i.commaOrSpaceSeparated?s=r9(J$(r).join(" ")):s=n7(i,i.property,r):Array.isArray(r)?s=[...r]:s=i.property==="style"?Qnt(r):String(r);if(Array.isArray(s)){const a=[];for(const o of s)a.push(n7(i,i.property,o));s=a}i.property==="className"&&Array.isArray(t.className)&&(s=t.className.concat(s)),t[i.property]=s}}function UA(e,t){if(t!=null)if(typeof t=="number"||typeof t=="string")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(const n of t)UA(e,n);else if(typeof t=="object"&&"type"in t)t.type==="root"?UA(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function n7(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||d0(n)===d0(t)))return!0}return n}function Qnt(e){const t=[];for(const[n,r]of Object.entries(e))t.push([n,r].join(": "));return t.join("; ")}function Jnt(e){const t=new Map;for(const n of e)t.set(n.toLowerCase(),n);return t}const Znt=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],ert=xse(VS,"div"),trt=xse(yp,"g",Znt);function nrt(e){const t=String(e),n=[];return{toOffset:i,toPoint:r};function r(s){if(typeof s=="number"&&s>-1&&s<=t.length){let a=0;for(;;){let o=n[a];if(o===void 0){const l=r7(t,n[a-1]);o=l===-1?t.length+1:l+1,n[a]=o}if(o>s)return{line:a+1,column:s-(a>0?n[a-1]:0)+1,offset:s};a++}}}function i(s){if(s&&typeof s.line=="number"&&typeof s.column=="number"&&!Number.isNaN(s.line)&&!Number.isNaN(s.column)){for(;n.length<s.line;){const o=n[n.length-1],l=r7(t,o),u=l===-1?t.length+1:l+1;if(o===u)break;n.push(u)}const a=(s.line>1?n[s.line-2]:0)+s.column-1;if(a<n[s.line-1])return a}}}function r7(e,t){const n=e.indexOf("\r",t),r=e.indexOf(`
`,t);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const Lu={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},bse={}.hasOwnProperty,rrt=Object.prototype;function irt(e,t){const n=t||{};return a3({file:n.file||void 0,location:!1,schema:n.space==="svg"?yp:VS,verbose:n.verbose||!1},e)}function a3(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},kx(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:wse(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),a=nrt(s),o=a.toPoint(0),l=a.toPoint(s.length);n.position={start:o,end:l}}return n}case"#documentType":{const r=t;return n={type:"doctype"},kx(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},kx(e,r,n),n}default:return n=srt(e,t),n}}function wse(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=a3(e,t[n]);r.push(i)}return r}function srt(e,t){const n=e.schema;e.schema=t.namespaceURI===Lu.svg?yp:VS;let r=-1;const i={};for(;++r<t.attrs.length;){const o=t.attrs[r],l=(o.prefix?o.prefix+":":"")+o.name;bse.call(rrt,l)||(i[l]=o.value)}const a=(e.schema.space==="svg"?trt:ert)(t.tagName,i,wse(e,t.childNodes));if(kx(e,t,a),a.tagName==="template"){const o=t,l=o.sourceCodeLocation,u=l&&l.startTag&&Rf(l.startTag),d=l&&l.endTag&&Rf(l.endTag),f=a3(e,o.content);u&&d&&e.file&&(f.position={start:u.end,end:d.start}),a.content=f}return e.schema=n,a}function kx(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=art(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function art(e,t,n){const r=Rf(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let a;if(n.attrs)for(a in n.attrs)bse.call(n.attrs,a)&&(s[HM(e.schema,a).property]=Rf(n.attrs[a]));n.startTag;const o=Rf(n.startTag),l=n.endTag?Rf(n.endTag):void 0,u={opening:o};l&&(u.closing=l),u.properties=s,t.data={position:u}}}return r}function Rf(e){const t=i7({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=i7({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function i7(e){return e.line&&e.column?e:void 0}class Ey{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}Ey.prototype.property={};Ey.prototype.normal={};Ey.prototype.space=null;function Ese(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new Ey(n,r,t)}function zA(e){return e.toLowerCase()}class Zs{constructor(t,n){this.property=t,this.attribute=n}}Zs.prototype.space=null;Zs.prototype.boolean=!1;Zs.prototype.booleanish=!1;Zs.prototype.overloadedBoolean=!1;Zs.prototype.number=!1;Zs.prototype.commaSeparated=!1;Zs.prototype.spaceSeparated=!1;Zs.prototype.commaOrSpaceSeparated=!1;Zs.prototype.mustUseProperty=!1;Zs.prototype.defined=!1;let ort=0;const rt=$d(),Wn=$d(),Sse=$d(),Ce=$d(),Yt=$d(),th=$d(),qi=$d();function $d(){return 2**++ort}const HA=Object.freeze(Object.defineProperty({__proto__:null,boolean:rt,booleanish:Wn,commaOrSpaceSeparated:qi,commaSeparated:th,number:Ce,overloadedBoolean:Sse,spaceSeparated:Yt},Symbol.toStringTag,{value:"Module"})),VT=Object.keys(HA);class o3 extends Zs{constructor(t,n,r,i){let s=-1;if(super(t,n),s7(this,"space",i),typeof r=="number")for(;++s<VT.length;){const a=VT[s];s7(this,VT[s],(r&HA[a])===HA[a])}}}o3.prototype.defined=!0;function s7(e,t,n){n&&(e[t]=n)}const lrt={}.hasOwnProperty;function xp(e){const t={},n={};let r;for(r in e.properties)if(lrt.call(e.properties,r)){const i=e.properties[r],s=new o3(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[zA(r)]=r,n[zA(s.attribute)]=r}return new Ey(t,n,e.space)}const _se=xp({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Nse=xp({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Tse(e,t){return t in e?e[t]:t}function Cse(e,t){return Tse(e,t.toLowerCase())}const kse=xp({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Cse,properties:{xmlns:null,xmlnsXLink:null}}),Ase=xp({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Wn,ariaAutoComplete:null,ariaBusy:Wn,ariaChecked:Wn,ariaColCount:Ce,ariaColIndex:Ce,ariaColSpan:Ce,ariaControls:Yt,ariaCurrent:null,ariaDescribedBy:Yt,ariaDetails:null,ariaDisabled:Wn,ariaDropEffect:Yt,ariaErrorMessage:null,ariaExpanded:Wn,ariaFlowTo:Yt,ariaGrabbed:Wn,ariaHasPopup:null,ariaHidden:Wn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Yt,ariaLevel:Ce,ariaLive:null,ariaModal:Wn,ariaMultiLine:Wn,ariaMultiSelectable:Wn,ariaOrientation:null,ariaOwns:Yt,ariaPlaceholder:null,ariaPosInSet:Ce,ariaPressed:Wn,ariaReadOnly:Wn,ariaRelevant:null,ariaRequired:Wn,ariaRoleDescription:Yt,ariaRowCount:Ce,ariaRowIndex:Ce,ariaRowSpan:Ce,ariaSelected:Wn,ariaSetSize:Ce,ariaSort:null,ariaValueMax:Ce,ariaValueMin:Ce,ariaValueNow:Ce,ariaValueText:null,role:null}}),crt=xp({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Cse,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:th,acceptCharset:Yt,accessKey:Yt,action:null,allow:null,allowFullScreen:rt,allowPaymentRequest:rt,allowUserMedia:rt,alt:null,as:null,async:rt,autoCapitalize:null,autoComplete:Yt,autoFocus:rt,autoPlay:rt,blocking:Yt,capture:null,charSet:null,checked:rt,cite:null,className:Yt,cols:Ce,colSpan:null,content:null,contentEditable:Wn,controls:rt,controlsList:Yt,coords:Ce|th,crossOrigin:null,data:null,dateTime:null,decoding:null,default:rt,defer:rt,dir:null,dirName:null,disabled:rt,download:Sse,draggable:Wn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:rt,formTarget:null,headers:Yt,height:Ce,hidden:rt,high:Ce,href:null,hrefLang:null,htmlFor:Yt,httpEquiv:Yt,id:null,imageSizes:null,imageSrcSet:null,inert:rt,inputMode:null,integrity:null,is:null,isMap:rt,itemId:null,itemProp:Yt,itemRef:Yt,itemScope:rt,itemType:Yt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:rt,low:Ce,manifest:null,max:null,maxLength:Ce,media:null,method:null,min:null,minLength:Ce,multiple:rt,muted:rt,name:null,nonce:null,noModule:rt,noValidate:rt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:rt,optimum:Ce,pattern:null,ping:Yt,placeholder:null,playsInline:rt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:rt,referrerPolicy:null,rel:Yt,required:rt,reversed:rt,rows:Ce,rowSpan:Ce,sandbox:Yt,scope:null,scoped:rt,seamless:rt,selected:rt,shadowRootClonable:rt,shadowRootDelegatesFocus:rt,shadowRootMode:null,shape:null,size:Ce,sizes:null,slot:null,span:Ce,spellCheck:Wn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ce,step:null,style:null,tabIndex:Ce,target:null,title:null,translate:null,type:null,typeMustMatch:rt,useMap:null,value:Wn,width:Ce,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Yt,axis:null,background:null,bgColor:null,border:Ce,borderColor:null,bottomMargin:Ce,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:rt,declare:rt,event:null,face:null,frame:null,frameBorder:null,hSpace:Ce,leftMargin:Ce,link:null,longDesc:null,lowSrc:null,marginHeight:Ce,marginWidth:Ce,noResize:rt,noHref:rt,noShade:rt,noWrap:rt,object:null,profile:null,prompt:null,rev:null,rightMargin:Ce,rules:null,scheme:null,scrolling:Wn,standby:null,summary:null,text:null,topMargin:Ce,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ce,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:rt,disableRemotePlayback:rt,prefix:null,property:null,results:Ce,security:null,unselectable:null}}),urt=xp({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Tse,properties:{about:qi,accentHeight:Ce,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ce,amplitude:Ce,arabicForm:null,ascent:Ce,attributeName:null,attributeType:null,azimuth:Ce,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ce,by:null,calcMode:null,capHeight:Ce,className:Yt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ce,diffuseConstant:Ce,direction:null,display:null,dur:null,divisor:Ce,dominantBaseline:null,download:rt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ce,enableBackground:null,end:null,event:null,exponent:Ce,externalResourcesRequired:null,fill:null,fillOpacity:Ce,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:th,g2:th,glyphName:th,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ce,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ce,horizOriginX:Ce,horizOriginY:Ce,id:null,ideographic:Ce,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ce,k:Ce,k1:Ce,k2:Ce,k3:Ce,k4:Ce,kernelMatrix:qi,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ce,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ce,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ce,overlineThickness:Ce,paintOrder:null,panose1:null,path:null,pathLength:Ce,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Yt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ce,pointsAtY:Ce,pointsAtZ:Ce,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:qi,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:qi,rev:qi,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:qi,requiredFeatures:qi,requiredFonts:qi,requiredFormats:qi,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ce,specularExponent:Ce,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ce,strikethroughThickness:Ce,string:null,stroke:null,strokeDashArray:qi,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ce,strokeOpacity:Ce,strokeWidth:null,style:null,surfaceScale:Ce,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:qi,tabIndex:Ce,tableValues:null,target:null,targetX:Ce,targetY:Ce,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:qi,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ce,underlineThickness:Ce,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ce,values:null,vAlphabetic:Ce,vMathematical:Ce,vectorEffect:null,vHanging:Ce,vIdeographic:Ce,version:null,vertAdvY:Ce,vertOriginX:Ce,vertOriginY:Ce,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ce,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),drt=/^data[-\w.:]+$/i,a7=/-[a-z]/g,frt=/[A-Z]/g;function hrt(e,t){const n=zA(t);let r=t,i=Zs;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&drt.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(a7,mrt);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!a7.test(s)){let a=s.replace(frt,prt);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}i=o3}return new i(r,t)}function prt(e){return"-"+e.toLowerCase()}function mrt(e){return e.charAt(1).toUpperCase()}const grt=Ese([Nse,_se,kse,Ase,crt],"html"),jse=Ese([Nse,_se,kse,Ase,urt],"svg"),yrt={},vrt={}.hasOwnProperty,Ose=Yie("type",{handlers:{root:brt,element:Nrt,text:Srt,comment:_rt,doctype:Ert}});function xrt(e,t){const r=(t||yrt).space;return Ose(e,r==="svg"?jse:grt)}function brt(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=l3(e.children,n,t),bp(e,n),n}function wrt(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=l3(e.children,n,t),bp(e,n),n}function Ert(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return bp(e,t),t}function Srt(e){const t={nodeName:"#text",value:e.value,parentNode:null};return bp(e,t),t}function _rt(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return bp(e,t),t}function Nrt(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=jse);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&vrt.call(e.properties,s)){const l=Trt(r,s,e.properties[s]);l&&i.push(l)}}const a=r.space,o={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:Lu[a],childNodes:[],parentNode:null};return o.childNodes=l3(e.children,o,r),bp(e,o),e.tagName==="template"&&e.content&&(o.content=wrt(e.content,r)),o}function Trt(e,t,n){const r=hrt(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?lie(n):gie(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=Lu[r.space]}return i}function l3(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=Ose(e[r],n);s.parentNode=t,i.push(s)}return i}function bp(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Crt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],krt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),dn="";var U;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(U||(U={}));const Ni={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function Pse(e){return e>=55296&&e<=57343}function Art(e){return e>=56320&&e<=57343}function jrt(e,t){return(e-55296)*1024+9216+t}function Ise(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function Dse(e){return e>=64976&&e<=65007||krt.has(e)}var oe;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(oe||(oe={}));const Ort=65536;class Prt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Ort,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t,n){const{line:r,col:i,offset:s}=this,a=i+n,o=s+n;return{code:t,startLine:r,endLine:r,startCol:a,endCol:a,startOffset:o,endOffset:o}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Art(n))return this.pos++,this._addGap(),jrt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,U.EOF;return this._err(oe.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,U.EOF;const r=this.html.charCodeAt(n);return r===U.CARRIAGE_RETURN?U.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,U.EOF;let t=this.html.charCodeAt(this.pos);return t===U.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,U.LINE_FEED):t===U.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,Pse(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===U.LINE_FEED||t===U.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){Ise(t)?this._err(oe.controlCharacterInInputStream):Dse(t)&&this._err(oe.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var ut;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(ut||(ut={}));function Mse(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Irt=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Drt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function Mrt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Drt.get(e))!==null&&t!==void 0?t:e}var yr;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(yr||(yr={}));const Rrt=32;var Zl;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Zl||(Zl={}));function VA(e){return e>=yr.ZERO&&e<=yr.NINE}function Lrt(e){return e>=yr.UPPER_A&&e<=yr.UPPER_F||e>=yr.LOWER_A&&e<=yr.LOWER_F}function Frt(e){return e>=yr.UPPER_A&&e<=yr.UPPER_Z||e>=yr.LOWER_A&&e<=yr.LOWER_Z||VA(e)}function Brt(e){return e===yr.EQUALS||Frt(e)}var fr;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(fr||(fr={}));var Do;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Do||(Do={}));class $rt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=fr.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Do.Strict}startEntity(t){this.decodeMode=t,this.state=fr.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case fr.EntityStart:return t.charCodeAt(n)===yr.NUM?(this.state=fr.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=fr.NamedEntity,this.stateNamedEntity(t,n));case fr.NumericStart:return this.stateNumericStart(t,n);case fr.NumericDecimal:return this.stateNumericDecimal(t,n);case fr.NumericHex:return this.stateNumericHex(t,n);case fr.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Rrt)===yr.LOWER_X?(this.state=fr.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=fr.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+Number.parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(VA(i)||Lrt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(VA(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===yr.SEMI)this.consumed+=1;else if(this.decodeMode===Do.Strict)return 0;return this.emitCodePoint(Mrt(this.result),this.consumed),this.errors&&(t!==yr.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Zl.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const a=t.charCodeAt(n);if(this.treeIndex=Urt(r,i,this.treeIndex+Math.max(1,s),a),this.treeIndex<0)return this.result===0||this.decodeMode===Do.Attribute&&(s===0||Brt(a))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Zl.VALUE_LENGTH)>>14,s!==0){if(a===yr.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Do.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Zl.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Zl.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case fr.NamedEntity:return this.result!==0&&(this.decodeMode!==Do.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case fr.NumericDecimal:return this.emitNumericEntity(0,2);case fr.NumericHex:return this.emitNumericEntity(0,3);case fr.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case fr.EntityStart:return 0}}}function Urt(e,t,n,r){const i=(t&Zl.BRANCH_LENGTH)>>7,s=t&Zl.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const l=r-s;return l<0||l>=i?-1:e[n+l]-1}let a=n,o=a+i-1;for(;a<=o;){const l=a+o>>>1,u=e[l];if(u<r)a=l+1;else if(u>r)o=l-1;else return e[l+i]}return-1}var we;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(we||(we={}));var td;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(td||(td={}));var Ds;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Ds||(Ds={}));var ne;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(ne||(ne={}));var N;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"})(N||(N={}));const zrt=new Map([[ne.A,N.A],[ne.ADDRESS,N.ADDRESS],[ne.ANNOTATION_XML,N.ANNOTATION_XML],[ne.APPLET,N.APPLET],[ne.AREA,N.AREA],[ne.ARTICLE,N.ARTICLE],[ne.ASIDE,N.ASIDE],[ne.B,N.B],[ne.BASE,N.BASE],[ne.BASEFONT,N.BASEFONT],[ne.BGSOUND,N.BGSOUND],[ne.BIG,N.BIG],[ne.BLOCKQUOTE,N.BLOCKQUOTE],[ne.BODY,N.BODY],[ne.BR,N.BR],[ne.BUTTON,N.BUTTON],[ne.CAPTION,N.CAPTION],[ne.CENTER,N.CENTER],[ne.CODE,N.CODE],[ne.COL,N.COL],[ne.COLGROUP,N.COLGROUP],[ne.DD,N.DD],[ne.DESC,N.DESC],[ne.DETAILS,N.DETAILS],[ne.DIALOG,N.DIALOG],[ne.DIR,N.DIR],[ne.DIV,N.DIV],[ne.DL,N.DL],[ne.DT,N.DT],[ne.EM,N.EM],[ne.EMBED,N.EMBED],[ne.FIELDSET,N.FIELDSET],[ne.FIGCAPTION,N.FIGCAPTION],[ne.FIGURE,N.FIGURE],[ne.FONT,N.FONT],[ne.FOOTER,N.FOOTER],[ne.FOREIGN_OBJECT,N.FOREIGN_OBJECT],[ne.FORM,N.FORM],[ne.FRAME,N.FRAME],[ne.FRAMESET,N.FRAMESET],[ne.H1,N.H1],[ne.H2,N.H2],[ne.H3,N.H3],[ne.H4,N.H4],[ne.H5,N.H5],[ne.H6,N.H6],[ne.HEAD,N.HEAD],[ne.HEADER,N.HEADER],[ne.HGROUP,N.HGROUP],[ne.HR,N.HR],[ne.HTML,N.HTML],[ne.I,N.I],[ne.IMG,N.IMG],[ne.IMAGE,N.IMAGE],[ne.INPUT,N.INPUT],[ne.IFRAME,N.IFRAME],[ne.KEYGEN,N.KEYGEN],[ne.LABEL,N.LABEL],[ne.LI,N.LI],[ne.LINK,N.LINK],[ne.LISTING,N.LISTING],[ne.MAIN,N.MAIN],[ne.MALIGNMARK,N.MALIGNMARK],[ne.MARQUEE,N.MARQUEE],[ne.MATH,N.MATH],[ne.MENU,N.MENU],[ne.META,N.META],[ne.MGLYPH,N.MGLYPH],[ne.MI,N.MI],[ne.MO,N.MO],[ne.MN,N.MN],[ne.MS,N.MS],[ne.MTEXT,N.MTEXT],[ne.NAV,N.NAV],[ne.NOBR,N.NOBR],[ne.NOFRAMES,N.NOFRAMES],[ne.NOEMBED,N.NOEMBED],[ne.NOSCRIPT,N.NOSCRIPT],[ne.OBJECT,N.OBJECT],[ne.OL,N.OL],[ne.OPTGROUP,N.OPTGROUP],[ne.OPTION,N.OPTION],[ne.P,N.P],[ne.PARAM,N.PARAM],[ne.PLAINTEXT,N.PLAINTEXT],[ne.PRE,N.PRE],[ne.RB,N.RB],[ne.RP,N.RP],[ne.RT,N.RT],[ne.RTC,N.RTC],[ne.RUBY,N.RUBY],[ne.S,N.S],[ne.SCRIPT,N.SCRIPT],[ne.SEARCH,N.SEARCH],[ne.SECTION,N.SECTION],[ne.SELECT,N.SELECT],[ne.SOURCE,N.SOURCE],[ne.SMALL,N.SMALL],[ne.SPAN,N.SPAN],[ne.STRIKE,N.STRIKE],[ne.STRONG,N.STRONG],[ne.STYLE,N.STYLE],[ne.SUB,N.SUB],[ne.SUMMARY,N.SUMMARY],[ne.SUP,N.SUP],[ne.TABLE,N.TABLE],[ne.TBODY,N.TBODY],[ne.TEMPLATE,N.TEMPLATE],[ne.TEXTAREA,N.TEXTAREA],[ne.TFOOT,N.TFOOT],[ne.TD,N.TD],[ne.TH,N.TH],[ne.THEAD,N.THEAD],[ne.TITLE,N.TITLE],[ne.TR,N.TR],[ne.TRACK,N.TRACK],[ne.TT,N.TT],[ne.U,N.U],[ne.UL,N.UL],[ne.SVG,N.SVG],[ne.VAR,N.VAR],[ne.WBR,N.WBR],[ne.XMP,N.XMP]]);function wp(e){var t;return(t=zrt.get(e))!==null&&t!==void 0?t:N.UNKNOWN}const Se=N,Hrt={[we.HTML]:new Set([Se.ADDRESS,Se.APPLET,Se.AREA,Se.ARTICLE,Se.ASIDE,Se.BASE,Se.BASEFONT,Se.BGSOUND,Se.BLOCKQUOTE,Se.BODY,Se.BR,Se.BUTTON,Se.CAPTION,Se.CENTER,Se.COL,Se.COLGROUP,Se.DD,Se.DETAILS,Se.DIR,Se.DIV,Se.DL,Se.DT,Se.EMBED,Se.FIELDSET,Se.FIGCAPTION,Se.FIGURE,Se.FOOTER,Se.FORM,Se.FRAME,Se.FRAMESET,Se.H1,Se.H2,Se.H3,Se.H4,Se.H5,Se.H6,Se.HEAD,Se.HEADER,Se.HGROUP,Se.HR,Se.HTML,Se.IFRAME,Se.IMG,Se.INPUT,Se.LI,Se.LINK,Se.LISTING,Se.MAIN,Se.MARQUEE,Se.MENU,Se.META,Se.NAV,Se.NOEMBED,Se.NOFRAMES,Se.NOSCRIPT,Se.OBJECT,Se.OL,Se.P,Se.PARAM,Se.PLAINTEXT,Se.PRE,Se.SCRIPT,Se.SECTION,Se.SELECT,Se.SOURCE,Se.STYLE,Se.SUMMARY,Se.TABLE,Se.TBODY,Se.TD,Se.TEMPLATE,Se.TEXTAREA,Se.TFOOT,Se.TH,Se.THEAD,Se.TITLE,Se.TR,Se.TRACK,Se.UL,Se.WBR,Se.XMP]),[we.MATHML]:new Set([Se.MI,Se.MO,Se.MN,Se.MS,Se.MTEXT,Se.ANNOTATION_XML]),[we.SVG]:new Set([Se.TITLE,Se.FOREIGN_OBJECT,Se.DESC]),[we.XLINK]:new Set,[we.XML]:new Set,[we.XMLNS]:new Set},WA=new Set([Se.H1,Se.H2,Se.H3,Se.H4,Se.H5,Se.H6]);ne.STYLE,ne.SCRIPT,ne.XMP,ne.IFRAME,ne.NOEMBED,ne.NOFRAMES,ne.PLAINTEXT;var z;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(z||(z={}));const Un={DATA:z.DATA,RCDATA:z.RCDATA,RAWTEXT:z.RAWTEXT,SCRIPT_DATA:z.SCRIPT_DATA,PLAINTEXT:z.PLAINTEXT,CDATA_SECTION:z.CDATA_SECTION};function Vrt(e){return e>=U.DIGIT_0&&e<=U.DIGIT_9}function mm(e){return e>=U.LATIN_CAPITAL_A&&e<=U.LATIN_CAPITAL_Z}function Wrt(e){return e>=U.LATIN_SMALL_A&&e<=U.LATIN_SMALL_Z}function Ol(e){return Wrt(e)||mm(e)}function o7(e){return Ol(e)||Vrt(e)}function Yv(e){return e+32}function Rse(e){return e===U.SPACE||e===U.LINE_FEED||e===U.TABULATION||e===U.FORM_FEED}function l7(e){return Rse(e)||e===U.SOLIDUS||e===U.GREATER_THAN_SIGN}function qrt(e){return e===U.NULL?oe.nullCharacterReference:e>1114111?oe.characterReferenceOutsideUnicodeRange:Pse(e)?oe.surrogateCharacterReference:Dse(e)?oe.noncharacterCharacterReference:Ise(e)||e===U.CARRIAGE_RETURN?oe.controlCharacterReference:null}class Krt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=z.DATA,this.returnState=z.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Prt(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new $rt(Irt,(r,i)=>{this.preprocessor.pos=this.entityStartPos+i-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(oe.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(oe.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const i=qrt(r);i&&this._err(i,1)}}:void 0)}_err(t,n=0){var r,i;(i=(r=this.handler).onParseError)===null||i===void 0||i.call(r,this.preprocessor.getError(t,n))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:ut.START_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:ut.END_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:ut.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:ut.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(Mse(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(oe.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=wp(t.tagName),t.type===ut.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(oe.endTagWithAttributes),t.selfClosing&&this._err(oe.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case ut.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case ut.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case ut.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:ut.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===t){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(t,n)}_emitCodePoint(t){const n=Rse(t)?ut.WHITESPACE_CHARACTER:t===U.NULL?ut.NULL_CHARACTER:ut.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(ut.CHARACTER,t)}_startCharacterReference(){this.returnState=this.state,this.state=z.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Do.Attribute:Do.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===z.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===z.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===z.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case z.DATA:{this._stateData(t);break}case z.RCDATA:{this._stateRcdata(t);break}case z.RAWTEXT:{this._stateRawtext(t);break}case z.SCRIPT_DATA:{this._stateScriptData(t);break}case z.PLAINTEXT:{this._statePlaintext(t);break}case z.TAG_OPEN:{this._stateTagOpen(t);break}case z.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case z.TAG_NAME:{this._stateTagName(t);break}case z.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case z.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case z.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case z.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case z.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case z.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case z.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case z.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case z.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case z.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case z.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case z.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case z.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case z.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case z.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case z.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case z.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case z.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case z.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case z.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case z.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case z.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case z.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case z.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case z.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case z.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case z.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case z.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case z.BOGUS_COMMENT:{this._stateBogusComment(t);break}case z.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case z.COMMENT_START:{this._stateCommentStart(t);break}case z.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case z.COMMENT:{this._stateComment(t);break}case z.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case z.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case z.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case z.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case z.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case z.COMMENT_END:{this._stateCommentEnd(t);break}case z.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case z.DOCTYPE:{this._stateDoctype(t);break}case z.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case z.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case z.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case z.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case z.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case z.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case z.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case z.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case z.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case z.CDATA_SECTION:{this._stateCdataSection(t);break}case z.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case z.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case z.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case z.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case U.LESS_THAN_SIGN:{this.state=z.TAG_OPEN;break}case U.AMPERSAND:{this._startCharacterReference();break}case U.NULL:{this._err(oe.unexpectedNullCharacter),this._emitCodePoint(t);break}case U.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case U.AMPERSAND:{this._startCharacterReference();break}case U.LESS_THAN_SIGN:{this.state=z.RCDATA_LESS_THAN_SIGN;break}case U.NULL:{this._err(oe.unexpectedNullCharacter),this._emitChars(dn);break}case U.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case U.LESS_THAN_SIGN:{this.state=z.RAWTEXT_LESS_THAN_SIGN;break}case U.NULL:{this._err(oe.unexpectedNullCharacter),this._emitChars(dn);break}case U.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case U.LESS_THAN_SIGN:{this.state=z.SCRIPT_DATA_LESS_THAN_SIGN;break}case U.NULL:{this._err(oe.unexpectedNullCharacter),this._emitChars(dn);break}case U.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case U.NULL:{this._err(oe.unexpectedNullCharacter),this._emitChars(dn);break}case U.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Ol(t))this._createStartTagToken(),this.state=z.TAG_NAME,this._stateTagName(t);else switch(t){case U.EXCLAMATION_MARK:{this.state=z.MARKUP_DECLARATION_OPEN;break}case U.SOLIDUS:{this.state=z.END_TAG_OPEN;break}case U.QUESTION_MARK:{this._err(oe.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=z.BOGUS_COMMENT,this._stateBogusComment(t);break}case U.EOF:{this._err(oe.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(oe.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=z.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Ol(t))this._createEndTagToken(),this.state=z.TAG_NAME,this._stateTagName(t);else switch(t){case U.GREATER_THAN_SIGN:{this._err(oe.missingEndTagName),this.state=z.DATA;break}case U.EOF:{this._err(oe.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(oe.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=z.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:{this.state=z.BEFORE_ATTRIBUTE_NAME;break}case U.SOLIDUS:{this.state=z.SELF_CLOSING_START_TAG;break}case U.GREATER_THAN_SIGN:{this.state=z.DATA,this.emitCurrentTagToken();break}case U.NULL:{this._err(oe.unexpectedNullCharacter),n.tagName+=dn;break}case U.EOF:{this._err(oe.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(mm(t)?Yv(t):t)}}_stateRcdataLessThanSign(t){t===U.SOLIDUS?this.state=z.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=z.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Ol(t)?(this.state=z.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=z.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=z.BEFORE_ATTRIBUTE_NAME,!1;case U.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=z.SELF_CLOSING_START_TAG,!1;case U.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=z.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=z.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===U.SOLIDUS?this.state=z.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=z.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Ol(t)?(this.state=z.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=z.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=z.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case U.SOLIDUS:{this.state=z.SCRIPT_DATA_END_TAG_OPEN;break}case U.EXCLAMATION_MARK:{this.state=z.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=z.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Ol(t)?(this.state=z.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===U.HYPHEN_MINUS?(this.state=z.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===U.HYPHEN_MINUS?(this.state=z.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case U.HYPHEN_MINUS:{this.state=z.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case U.LESS_THAN_SIGN:{this.state=z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case U.NULL:{this._err(oe.unexpectedNullCharacter),this._emitChars(dn);break}case U.EOF:{this._err(oe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case U.HYPHEN_MINUS:{this.state=z.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case U.LESS_THAN_SIGN:{this.state=z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case U.NULL:{this._err(oe.unexpectedNullCharacter),this.state=z.SCRIPT_DATA_ESCAPED,this._emitChars(dn);break}case U.EOF:{this._err(oe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=z.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case U.HYPHEN_MINUS:{this._emitChars("-");break}case U.LESS_THAN_SIGN:{this.state=z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case U.GREATER_THAN_SIGN:{this.state=z.SCRIPT_DATA,this._emitChars(">");break}case U.NULL:{this._err(oe.unexpectedNullCharacter),this.state=z.SCRIPT_DATA_ESCAPED,this._emitChars(dn);break}case U.EOF:{this._err(oe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=z.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===U.SOLIDUS?this.state=z.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Ol(t)?(this._emitChars("<"),this.state=z.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Ol(t)?(this.state=z.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Ni.SCRIPT,!1)&&l7(this.preprocessor.peek(Ni.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Ni.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case U.HYPHEN_MINUS:{this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case U.LESS_THAN_SIGN:{this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case U.NULL:{this._err(oe.unexpectedNullCharacter),this._emitChars(dn);break}case U.EOF:{this._err(oe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case U.HYPHEN_MINUS:{this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case U.LESS_THAN_SIGN:{this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case U.NULL:{this._err(oe.unexpectedNullCharacter),this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(dn);break}case U.EOF:{this._err(oe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case U.HYPHEN_MINUS:{this._emitChars("-");break}case U.LESS_THAN_SIGN:{this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case U.GREATER_THAN_SIGN:{this.state=z.SCRIPT_DATA,this._emitChars(">");break}case U.NULL:{this._err(oe.unexpectedNullCharacter),this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(dn);break}case U.EOF:{this._err(oe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===U.SOLIDUS?(this.state=z.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Ni.SCRIPT,!1)&&l7(this.preprocessor.peek(Ni.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Ni.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=z.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=z.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:break;case U.SOLIDUS:case U.GREATER_THAN_SIGN:case U.EOF:{this.state=z.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case U.EQUALS_SIGN:{this._err(oe.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=z.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=z.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:case U.SOLIDUS:case U.GREATER_THAN_SIGN:case U.EOF:{this._leaveAttrName(),this.state=z.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case U.EQUALS_SIGN:{this._leaveAttrName(),this.state=z.BEFORE_ATTRIBUTE_VALUE;break}case U.QUOTATION_MARK:case U.APOSTROPHE:case U.LESS_THAN_SIGN:{this._err(oe.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case U.NULL:{this._err(oe.unexpectedNullCharacter),this.currentAttr.name+=dn;break}default:this.currentAttr.name+=String.fromCodePoint(mm(t)?Yv(t):t)}}_stateAfterAttributeName(t){switch(t){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:break;case U.SOLIDUS:{this.state=z.SELF_CLOSING_START_TAG;break}case U.EQUALS_SIGN:{this.state=z.BEFORE_ATTRIBUTE_VALUE;break}case U.GREATER_THAN_SIGN:{this.state=z.DATA,this.emitCurrentTagToken();break}case U.EOF:{this._err(oe.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=z.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:break;case U.QUOTATION_MARK:{this.state=z.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case U.APOSTROPHE:{this.state=z.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case U.GREATER_THAN_SIGN:{this._err(oe.missingAttributeValue),this.state=z.DATA,this.emitCurrentTagToken();break}default:this.state=z.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case U.QUOTATION_MARK:{this.state=z.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case U.AMPERSAND:{this._startCharacterReference();break}case U.NULL:{this._err(oe.unexpectedNullCharacter),this.currentAttr.value+=dn;break}case U.EOF:{this._err(oe.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case U.APOSTROPHE:{this.state=z.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case U.AMPERSAND:{this._startCharacterReference();break}case U.NULL:{this._err(oe.unexpectedNullCharacter),this.currentAttr.value+=dn;break}case U.EOF:{this._err(oe.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:{this._leaveAttrValue(),this.state=z.BEFORE_ATTRIBUTE_NAME;break}case U.AMPERSAND:{this._startCharacterReference();break}case U.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=z.DATA,this.emitCurrentTagToken();break}case U.NULL:{this._err(oe.unexpectedNullCharacter),this.currentAttr.value+=dn;break}case U.QUOTATION_MARK:case U.APOSTROPHE:case U.LESS_THAN_SIGN:case U.EQUALS_SIGN:case U.GRAVE_ACCENT:{this._err(oe.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case U.EOF:{this._err(oe.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:{this._leaveAttrValue(),this.state=z.BEFORE_ATTRIBUTE_NAME;break}case U.SOLIDUS:{this._leaveAttrValue(),this.state=z.SELF_CLOSING_START_TAG;break}case U.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=z.DATA,this.emitCurrentTagToken();break}case U.EOF:{this._err(oe.eofInTag),this._emitEOFToken();break}default:this._err(oe.missingWhitespaceBetweenAttributes),this.state=z.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case U.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=z.DATA,this.emitCurrentTagToken();break}case U.EOF:{this._err(oe.eofInTag),this._emitEOFToken();break}default:this._err(oe.unexpectedSolidusInTag),this.state=z.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case U.GREATER_THAN_SIGN:{this.state=z.DATA,this.emitCurrentComment(n);break}case U.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case U.NULL:{this._err(oe.unexpectedNullCharacter),n.data+=dn;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Ni.DASH_DASH,!0)?(this._createCommentToken(Ni.DASH_DASH.length+1),this.state=z.COMMENT_START):this._consumeSequenceIfMatch(Ni.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Ni.DOCTYPE.length+1),this.state=z.DOCTYPE):this._consumeSequenceIfMatch(Ni.CDATA_START,!0)?this.inForeignNode?this.state=z.CDATA_SECTION:(this._err(oe.cdataInHtmlContent),this._createCommentToken(Ni.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=z.BOGUS_COMMENT):this._ensureHibernation()||(this._err(oe.incorrectlyOpenedComment),this._createCommentToken(2),this.state=z.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case U.HYPHEN_MINUS:{this.state=z.COMMENT_START_DASH;break}case U.GREATER_THAN_SIGN:{this._err(oe.abruptClosingOfEmptyComment),this.state=z.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=z.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case U.HYPHEN_MINUS:{this.state=z.COMMENT_END;break}case U.GREATER_THAN_SIGN:{this._err(oe.abruptClosingOfEmptyComment),this.state=z.DATA,this.emitCurrentComment(n);break}case U.EOF:{this._err(oe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=z.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case U.HYPHEN_MINUS:{this.state=z.COMMENT_END_DASH;break}case U.LESS_THAN_SIGN:{n.data+="<",this.state=z.COMMENT_LESS_THAN_SIGN;break}case U.NULL:{this._err(oe.unexpectedNullCharacter),n.data+=dn;break}case U.EOF:{this._err(oe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case U.EXCLAMATION_MARK:{n.data+="!",this.state=z.COMMENT_LESS_THAN_SIGN_BANG;break}case U.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=z.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===U.HYPHEN_MINUS?this.state=z.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=z.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===U.HYPHEN_MINUS?this.state=z.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=z.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==U.GREATER_THAN_SIGN&&t!==U.EOF&&this._err(oe.nestedComment),this.state=z.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case U.HYPHEN_MINUS:{this.state=z.COMMENT_END;break}case U.EOF:{this._err(oe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=z.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case U.GREATER_THAN_SIGN:{this.state=z.DATA,this.emitCurrentComment(n);break}case U.EXCLAMATION_MARK:{this.state=z.COMMENT_END_BANG;break}case U.HYPHEN_MINUS:{n.data+="-";break}case U.EOF:{this._err(oe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=z.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case U.HYPHEN_MINUS:{n.data+="--!",this.state=z.COMMENT_END_DASH;break}case U.GREATER_THAN_SIGN:{this._err(oe.incorrectlyClosedComment),this.state=z.DATA,this.emitCurrentComment(n);break}case U.EOF:{this._err(oe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=z.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:{this.state=z.BEFORE_DOCTYPE_NAME;break}case U.GREATER_THAN_SIGN:{this.state=z.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case U.EOF:{this._err(oe.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(oe.missingWhitespaceBeforeDoctypeName),this.state=z.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(mm(t))this._createDoctypeToken(String.fromCharCode(Yv(t))),this.state=z.DOCTYPE_NAME;else switch(t){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:break;case U.NULL:{this._err(oe.unexpectedNullCharacter),this._createDoctypeToken(dn),this.state=z.DOCTYPE_NAME;break}case U.GREATER_THAN_SIGN:{this._err(oe.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=z.DATA;break}case U.EOF:{this._err(oe.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=z.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:{this.state=z.AFTER_DOCTYPE_NAME;break}case U.GREATER_THAN_SIGN:{this.state=z.DATA,this.emitCurrentDoctype(n);break}case U.NULL:{this._err(oe.unexpectedNullCharacter),n.name+=dn;break}case U.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(mm(t)?Yv(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:break;case U.GREATER_THAN_SIGN:{this.state=z.DATA,this.emitCurrentDoctype(n);break}case U.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Ni.PUBLIC,!1)?this.state=z.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Ni.SYSTEM,!1)?this.state=z.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(oe.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=z.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:{this.state=z.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case U.QUOTATION_MARK:{this._err(oe.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case U.APOSTROPHE:{this._err(oe.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case U.GREATER_THAN_SIGN:{this._err(oe.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=z.DATA,this.emitCurrentDoctype(n);break}case U.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(oe.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:break;case U.QUOTATION_MARK:{n.publicId="",this.state=z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case U.APOSTROPHE:{n.publicId="",this.state=z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case U.GREATER_THAN_SIGN:{this._err(oe.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=z.DATA,this.emitCurrentDoctype(n);break}case U.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(oe.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case U.QUOTATION_MARK:{this.state=z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case U.NULL:{this._err(oe.unexpectedNullCharacter),n.publicId+=dn;break}case U.GREATER_THAN_SIGN:{this._err(oe.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=z.DATA;break}case U.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case U.APOSTROPHE:{this.state=z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case U.NULL:{this._err(oe.unexpectedNullCharacter),n.publicId+=dn;break}case U.GREATER_THAN_SIGN:{this._err(oe.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=z.DATA;break}case U.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:{this.state=z.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case U.GREATER_THAN_SIGN:{this.state=z.DATA,this.emitCurrentDoctype(n);break}case U.QUOTATION_MARK:{this._err(oe.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case U.APOSTROPHE:{this._err(oe.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case U.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(oe.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:break;case U.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=z.DATA;break}case U.QUOTATION_MARK:{n.systemId="",this.state=z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case U.APOSTROPHE:{n.systemId="",this.state=z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case U.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(oe.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:{this.state=z.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case U.QUOTATION_MARK:{this._err(oe.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case U.APOSTROPHE:{this._err(oe.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case U.GREATER_THAN_SIGN:{this._err(oe.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=z.DATA,this.emitCurrentDoctype(n);break}case U.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(oe.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:break;case U.QUOTATION_MARK:{n.systemId="",this.state=z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case U.APOSTROPHE:{n.systemId="",this.state=z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case U.GREATER_THAN_SIGN:{this._err(oe.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=z.DATA,this.emitCurrentDoctype(n);break}case U.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(oe.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case U.QUOTATION_MARK:{this.state=z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case U.NULL:{this._err(oe.unexpectedNullCharacter),n.systemId+=dn;break}case U.GREATER_THAN_SIGN:{this._err(oe.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=z.DATA;break}case U.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case U.APOSTROPHE:{this.state=z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case U.NULL:{this._err(oe.unexpectedNullCharacter),n.systemId+=dn;break}case U.GREATER_THAN_SIGN:{this._err(oe.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=z.DATA;break}case U.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case U.SPACE:case U.LINE_FEED:case U.TABULATION:case U.FORM_FEED:break;case U.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=z.DATA;break}case U.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(oe.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case U.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=z.DATA;break}case U.NULL:{this._err(oe.unexpectedNullCharacter);break}case U.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case U.RIGHT_SQUARE_BRACKET:{this.state=z.CDATA_SECTION_BRACKET;break}case U.EOF:{this._err(oe.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===U.RIGHT_SQUARE_BRACKET?this.state=z.CDATA_SECTION_END:(this._emitChars("]"),this.state=z.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case U.GREATER_THAN_SIGN:{this.state=z.DATA;break}case U.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=z.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(){let t=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(t<0)if(this.preprocessor.lastChunkWritten)t=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}t===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(U.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&o7(this.preprocessor.peek(1))?z.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(t){o7(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===U.SEMICOLON&&this._err(oe.unknownNamedCharacterReference),this.state=this.returnState,this._callState(t))}}const Lse=new Set([N.DD,N.DT,N.LI,N.OPTGROUP,N.OPTION,N.P,N.RB,N.RP,N.RT,N.RTC]),c7=new Set([...Lse,N.CAPTION,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]),hw=new Set([N.APPLET,N.CAPTION,N.HTML,N.MARQUEE,N.OBJECT,N.TABLE,N.TD,N.TEMPLATE,N.TH]),Grt=new Set([...hw,N.OL,N.UL]),Yrt=new Set([...hw,N.BUTTON]),u7=new Set([N.ANNOTATION_XML,N.MI,N.MN,N.MO,N.MS,N.MTEXT]),d7=new Set([N.DESC,N.FOREIGN_OBJECT,N.TITLE]),Xrt=new Set([N.TR,N.TEMPLATE,N.HTML]),Qrt=new Set([N.TBODY,N.TFOOT,N.THEAD,N.TEMPLATE,N.HTML]),Jrt=new Set([N.TABLE,N.TEMPLATE,N.HTML]),Zrt=new Set([N.TD,N.TH]);class eit{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=N.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===N.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===we.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==we.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(Math.max(n,0))}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(WA,we.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Zrt,we.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(Jrt,we.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Qrt,we.HTML)}clearBackToTableRowContext(){this.clearBackTo(Xrt,we.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===N.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===N.HTML}hasInDynamicScope(t,n){for(let r=this.stackTop;r>=0;r--){const i=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case we.HTML:{if(i===t)return!0;if(n.has(i))return!1;break}case we.SVG:{if(d7.has(i))return!1;break}case we.MATHML:{if(u7.has(i))return!1;break}}}return!0}hasInScope(t){return this.hasInDynamicScope(t,hw)}hasInListItemScope(t){return this.hasInDynamicScope(t,Grt)}hasInButtonScope(t){return this.hasInDynamicScope(t,Yrt)}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];switch(this.treeAdapter.getNamespaceURI(this.items[t])){case we.HTML:{if(WA.has(n))return!0;if(hw.has(n))return!1;break}case we.SVG:{if(d7.has(n))return!1;break}case we.MATHML:{if(u7.has(n))return!1;break}}}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===we.HTML)switch(this.tagIDs[n]){case t:return!0;case N.TABLE:case N.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===we.HTML)switch(this.tagIDs[t]){case N.TBODY:case N.THEAD:case N.TFOOT:return!0;case N.TABLE:case N.HTML:return!1}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===we.HTML)switch(this.tagIDs[n]){case t:return!0;case N.OPTION:case N.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&Lse.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&c7.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==void 0&&this.currentTagId!==t&&c7.has(this.currentTagId);)this.pop()}}const WT=3;var Wa;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Wa||(Wa={}));const f7={type:Wa.Marker};class tit{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),a=this.treeAdapter.getNamespaceURI(t);for(let o=0;o<this.entries.length;o++){const l=this.entries[o];if(l.type===Wa.Marker)break;const{element:u}=l;if(this.treeAdapter.getTagName(u)===s&&this.treeAdapter.getNamespaceURI(u)===a){const d=this.treeAdapter.getAttrList(u);d.length===i&&r.push({idx:o,attrs:d})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<WT)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<WT)return;const i=new Map(n.map(a=>[a.name,a.value]));let s=0;for(let a=0;a<r.length;a++){const o=r[a];o.attrs.every(l=>i.get(l.name)===l.value)&&(s+=1,s>=WT&&this.entries.splice(o.idx,1))}}insertMarker(){this.entries.unshift(f7)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Wa.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Wa.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(f7);t===-1?this.entries.length=0:this.entries.splice(0,t+1)}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Wa.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Wa.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Wa.Element&&n.element===t)}}const Pl={createDocument(){return{nodeName:"#document",mode:Ds.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},createTextNode(e){return{nodeName:"#text",value:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};Pl.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(Pl.isTextNode(n)){n.value+=t;return}}Pl.appendChild(e,Pl.createTextNode(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&Pl.isTextNode(r)?r.value+=t:Pl.insertBefore(e,Pl.createTextNode(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},Fse="html",nit="about:legacy-compat",rit="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Bse=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],iit=[...Bse,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],sit=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),$se=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],ait=[...$se,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function h7(e,t){return t.some(n=>e.startsWith(n))}function oit(e){return e.name===Fse&&e.publicId===null&&(e.systemId===null||e.systemId===nit)}function lit(e){if(e.name!==Fse)return Ds.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===rit)return Ds.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),sit.has(n))return Ds.QUIRKS;let r=t===null?iit:Bse;if(h7(n,r))return Ds.QUIRKS;if(r=t===null?$se:ait,h7(n,r))return Ds.LIMITED_QUIRKS}return Ds.NO_QUIRKS}const p7={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},cit="definitionurl",uit="definitionURL",dit=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),fit=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:we.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:we.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:we.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:we.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:we.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:we.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:we.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:we.XML}],["xml:space",{prefix:"xml",name:"space",namespace:we.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:we.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:we.XMLNS}]]),hit=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),pit=new Set([N.B,N.BIG,N.BLOCKQUOTE,N.BODY,N.BR,N.CENTER,N.CODE,N.DD,N.DIV,N.DL,N.DT,N.EM,N.EMBED,N.H1,N.H2,N.H3,N.H4,N.H5,N.H6,N.HEAD,N.HR,N.I,N.IMG,N.LI,N.LISTING,N.MENU,N.META,N.NOBR,N.OL,N.P,N.PRE,N.RUBY,N.S,N.SMALL,N.SPAN,N.STRONG,N.STRIKE,N.SUB,N.SUP,N.TABLE,N.TT,N.U,N.UL,N.VAR]);function mit(e){const t=e.tagID;return t===N.FONT&&e.attrs.some(({name:r})=>r===td.COLOR||r===td.SIZE||r===td.FACE)||pit.has(t)}function Use(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===cit){e.attrs[t].name=uit;break}}function zse(e){for(let t=0;t<e.attrs.length;t++){const n=dit.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function c3(e){for(let t=0;t<e.attrs.length;t++){const n=fit.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function git(e){const t=hit.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=wp(e.tagName))}function yit(e,t){return t===we.MATHML&&(e===N.MI||e===N.MO||e===N.MN||e===N.MS||e===N.MTEXT)}function vit(e,t,n){if(t===we.MATHML&&e===N.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===td.ENCODING){const i=n[r].value.toLowerCase();return i===p7.TEXT_HTML||i===p7.APPLICATION_XML}}return t===we.SVG&&(e===N.FOREIGN_OBJECT||e===N.DESC||e===N.TITLE)}function xit(e,t,n,r){return(!r||r===we.HTML)&&vit(e,t,n)||(!r||r===we.MATHML)&&yit(e,t)}const bit="hidden",wit=8,Eit=3;var V;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(V||(V={}));const Sit={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Hse=new Set([N.TABLE,N.TBODY,N.TFOOT,N.THEAD,N.TR]),m7={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Pl,onParseError:null};class g7{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=V.INITIAL,this.originalInsertionMode=V.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...m7,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Krt(this.options,this),this.activeFormattingElements=new tit(this.treeAdapter),this.fragmentContextID=r?wp(this.treeAdapter.getTagName(r)):N.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new eit(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...m7,...n};t??(t=r.treeAdapter.createElement(ne.TEMPLATE,we.HTML,[]));const i=r.treeAdapter.createElement("documentmock",we.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===N.TEMPLATE&&s.tmplInsertionModeStack.unshift(V.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:Sit,a={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(a)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,a;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,a=this.fragmentContextID):{current:s,currentTagId:a}=this.openElements,this._setContextModes(s,a)}}_setContextModes(t,n){const r=t===this.document||t&&this.treeAdapter.getNamespaceURI(t)===we.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&t!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,we.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=V.TEXT}switchToPlaintextParsing(){this.insertionMode=V.TEXT,this.originalInsertionMode=V.IN_BODY,this.tokenizer.state=Un.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===ne.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==we.HTML))switch(this.fragmentContextID){case N.TITLE:case N.TEXTAREA:{this.tokenizer.state=Un.RCDATA;break}case N.STYLE:case N.XMP:case N.IFRAME:case N.NOEMBED:case N.NOFRAMES:case N.NOSCRIPT:{this.tokenizer.state=Un.RAWTEXT;break}case N.SCRIPT:{this.tokenizer.state=Un.SCRIPT_DATA;break}case N.PLAINTEXT:{this.tokenizer.state=Un.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const a=this.treeAdapter.getChildNodes(this.document).find(o=>this.treeAdapter.isDocumentTypeNode(o));a&&this.treeAdapter.setNodeSourceCodeLocation(a,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r??this.document,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,we.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,we.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(ne.HTML,we.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,N.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,a=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(a)){const{endLine:l,endCol:u,endOffset:d}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(a,{endLine:l,endCol:u,endOffset:d})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(a,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===ut.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===N.SVG&&this.treeAdapter.getTagName(n)===ne.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===we.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===N.MGLYPH||t.tagID===N.MALIGNMARK)&&r!==void 0&&!this._isIntegrationPoint(r,n,we.HTML)}_processToken(t){switch(t.type){case ut.CHARACTER:{this.onCharacter(t);break}case ut.NULL_CHARACTER:{this.onNullCharacter(t);break}case ut.COMMENT:{this.onComment(t);break}case ut.DOCTYPE:{this.onDoctype(t);break}case ut.START_TAG:{this._processStartTag(t);break}case ut.END_TAG:{this.onEndTag(t);break}case ut.EOF:{this.onEof(t);break}case ut.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return xit(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Wa.Marker||this.openElements.contains(i.element)),r=n===-1?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=V.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(N.P),this.openElements.popUntilTagNamePopped(N.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case N.TR:{this.insertionMode=V.IN_ROW;return}case N.TBODY:case N.THEAD:case N.TFOOT:{this.insertionMode=V.IN_TABLE_BODY;return}case N.CAPTION:{this.insertionMode=V.IN_CAPTION;return}case N.COLGROUP:{this.insertionMode=V.IN_COLUMN_GROUP;return}case N.TABLE:{this.insertionMode=V.IN_TABLE;return}case N.BODY:{this.insertionMode=V.IN_BODY;return}case N.FRAMESET:{this.insertionMode=V.IN_FRAMESET;return}case N.SELECT:{this._resetInsertionModeForSelect(t);return}case N.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case N.HTML:{this.insertionMode=this.headElement?V.AFTER_HEAD:V.BEFORE_HEAD;return}case N.TD:case N.TH:{if(t>0){this.insertionMode=V.IN_CELL;return}break}case N.HEAD:{if(t>0){this.insertionMode=V.IN_HEAD;return}break}}this.insertionMode=V.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===N.TEMPLATE)break;if(r===N.TABLE){this.insertionMode=V.IN_SELECT_IN_TABLE;return}}this.insertionMode=V.IN_SELECT}_isElementCausesFosterParenting(t){return Hse.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case N.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===we.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case N.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return Hrt[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Zst(this,t);return}switch(this.insertionMode){case V.INITIAL:{Zp(this,t);break}case V.BEFORE_HTML:{Qm(this,t);break}case V.BEFORE_HEAD:{Jm(this,t);break}case V.IN_HEAD:{Zm(this,t);break}case V.IN_HEAD_NO_SCRIPT:{eg(this,t);break}case V.AFTER_HEAD:{tg(this,t);break}case V.IN_BODY:case V.IN_CAPTION:case V.IN_CELL:case V.IN_TEMPLATE:{Wse(this,t);break}case V.TEXT:case V.IN_SELECT:case V.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case V.IN_TABLE:case V.IN_TABLE_BODY:case V.IN_ROW:{qT(this,t);break}case V.IN_TABLE_TEXT:{Qse(this,t);break}case V.IN_COLUMN_GROUP:{pw(this,t);break}case V.AFTER_BODY:{mw(this,t);break}case V.AFTER_AFTER_BODY:{Ax(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Jst(this,t);return}switch(this.insertionMode){case V.INITIAL:{Zp(this,t);break}case V.BEFORE_HTML:{Qm(this,t);break}case V.BEFORE_HEAD:{Jm(this,t);break}case V.IN_HEAD:{Zm(this,t);break}case V.IN_HEAD_NO_SCRIPT:{eg(this,t);break}case V.AFTER_HEAD:{tg(this,t);break}case V.TEXT:{this._insertCharacters(t);break}case V.IN_TABLE:case V.IN_TABLE_BODY:case V.IN_ROW:{qT(this,t);break}case V.IN_COLUMN_GROUP:{pw(this,t);break}case V.AFTER_BODY:{mw(this,t);break}case V.AFTER_AFTER_BODY:{Ax(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){qA(this,t);return}switch(this.insertionMode){case V.INITIAL:case V.BEFORE_HTML:case V.BEFORE_HEAD:case V.IN_HEAD:case V.IN_HEAD_NO_SCRIPT:case V.AFTER_HEAD:case V.IN_BODY:case V.IN_TABLE:case V.IN_CAPTION:case V.IN_COLUMN_GROUP:case V.IN_TABLE_BODY:case V.IN_ROW:case V.IN_CELL:case V.IN_SELECT:case V.IN_SELECT_IN_TABLE:case V.IN_TEMPLATE:case V.IN_FRAMESET:case V.AFTER_FRAMESET:{qA(this,t);break}case V.IN_TABLE_TEXT:{em(this,t);break}case V.AFTER_BODY:{jit(this,t);break}case V.AFTER_AFTER_BODY:case V.AFTER_AFTER_FRAMESET:{Oit(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case V.INITIAL:{Pit(this,t);break}case V.BEFORE_HEAD:case V.IN_HEAD:case V.IN_HEAD_NO_SCRIPT:case V.AFTER_HEAD:{this._err(t,oe.misplacedDoctype);break}case V.IN_TABLE_TEXT:{em(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,oe.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?eat(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case V.INITIAL:{Zp(this,t);break}case V.BEFORE_HTML:{Iit(this,t);break}case V.BEFORE_HEAD:{Mit(this,t);break}case V.IN_HEAD:{Ma(this,t);break}case V.IN_HEAD_NO_SCRIPT:{Fit(this,t);break}case V.AFTER_HEAD:{$it(this,t);break}case V.IN_BODY:{ci(this,t);break}case V.IN_TABLE:{Fh(this,t);break}case V.IN_TABLE_TEXT:{em(this,t);break}case V.IN_CAPTION:{Rst(this,t);break}case V.IN_COLUMN_GROUP:{f3(this,t);break}case V.IN_TABLE_BODY:{ZS(this,t);break}case V.IN_ROW:{e_(this,t);break}case V.IN_CELL:{Bst(this,t);break}case V.IN_SELECT:{eae(this,t);break}case V.IN_SELECT_IN_TABLE:{Ust(this,t);break}case V.IN_TEMPLATE:{Hst(this,t);break}case V.AFTER_BODY:{Wst(this,t);break}case V.IN_FRAMESET:{qst(this,t);break}case V.AFTER_FRAMESET:{Gst(this,t);break}case V.AFTER_AFTER_BODY:{Xst(this,t);break}case V.AFTER_AFTER_FRAMESET:{Qst(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?tat(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case V.INITIAL:{Zp(this,t);break}case V.BEFORE_HTML:{Dit(this,t);break}case V.BEFORE_HEAD:{Rit(this,t);break}case V.IN_HEAD:{Lit(this,t);break}case V.IN_HEAD_NO_SCRIPT:{Bit(this,t);break}case V.AFTER_HEAD:{Uit(this,t);break}case V.IN_BODY:{JS(this,t);break}case V.TEXT:{Tst(this,t);break}case V.IN_TABLE:{p0(this,t);break}case V.IN_TABLE_TEXT:{em(this,t);break}case V.IN_CAPTION:{Lst(this,t);break}case V.IN_COLUMN_GROUP:{Fst(this,t);break}case V.IN_TABLE_BODY:{KA(this,t);break}case V.IN_ROW:{Zse(this,t);break}case V.IN_CELL:{$st(this,t);break}case V.IN_SELECT:{tae(this,t);break}case V.IN_SELECT_IN_TABLE:{zst(this,t);break}case V.IN_TEMPLATE:{Vst(this,t);break}case V.AFTER_BODY:{rae(this,t);break}case V.IN_FRAMESET:{Kst(this,t);break}case V.AFTER_FRAMESET:{Yst(this,t);break}case V.AFTER_AFTER_BODY:{Ax(this,t);break}}}onEof(t){switch(this.insertionMode){case V.INITIAL:{Zp(this,t);break}case V.BEFORE_HTML:{Qm(this,t);break}case V.BEFORE_HEAD:{Jm(this,t);break}case V.IN_HEAD:{Zm(this,t);break}case V.IN_HEAD_NO_SCRIPT:{eg(this,t);break}case V.AFTER_HEAD:{tg(this,t);break}case V.IN_BODY:case V.IN_TABLE:case V.IN_CAPTION:case V.IN_COLUMN_GROUP:case V.IN_TABLE_BODY:case V.IN_ROW:case V.IN_CELL:case V.IN_SELECT:case V.IN_SELECT_IN_TABLE:{Yse(this,t);break}case V.TEXT:{Cst(this,t);break}case V.IN_TABLE_TEXT:{em(this,t);break}case V.IN_TEMPLATE:{nae(this,t);break}case V.AFTER_BODY:case V.IN_FRAMESET:case V.AFTER_FRAMESET:case V.AFTER_AFTER_BODY:case V.AFTER_AFTER_FRAMESET:{d3(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===U.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case V.IN_HEAD:case V.IN_HEAD_NO_SCRIPT:case V.AFTER_HEAD:case V.TEXT:case V.IN_COLUMN_GROUP:case V.IN_SELECT:case V.IN_SELECT_IN_TABLE:case V.IN_FRAMESET:case V.AFTER_FRAMESET:{this._insertCharacters(t);break}case V.IN_BODY:case V.IN_CAPTION:case V.IN_CELL:case V.IN_TEMPLATE:case V.AFTER_BODY:case V.AFTER_AFTER_BODY:case V.AFTER_AFTER_FRAMESET:{Vse(this,t);break}case V.IN_TABLE:case V.IN_TABLE_BODY:case V.IN_ROW:{qT(this,t);break}case V.IN_TABLE_TEXT:{Xse(this,t);break}}}}function _it(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Gse(e,t),n}function Nit(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(Math.max(r,0)),e.activeFormattingElements.removeEntry(t)),n}function Tit(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,a=i;a!==n;s++,a=i){i=e.openElements.getCommonAncestor(a);const o=e.activeFormattingElements.getElementEntry(a),l=o&&s>=Eit;!o||l?(l&&e.activeFormattingElements.removeEntry(o),e.openElements.remove(a)):(a=Cit(e,o),r===t&&(e.activeFormattingElements.bookmark=o),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(a,r),r=a)}return r}function Cit(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function kit(e,t,n){const r=e.treeAdapter.getTagName(t),i=wp(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===N.TEMPLATE&&s===we.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Ait(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function u3(e,t){for(let n=0;n<wit;n++){const r=_it(e,t);if(!r)break;const i=Nit(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=Tit(e,i,r.element),a=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),a&&kit(e,a,s),Ait(e,i,r)}}function qA(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function jit(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Oit(e,t){e._appendCommentNode(t,e.document)}function d3(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],a=e.treeAdapter.getNodeSourceCodeLocation(s);a&&!a.endTag&&e._setEndLocation(s,t)}}}}function Pit(e,t){e._setDocumentType(t);const n=t.forceQuirks?Ds.QUIRKS:lit(t);oit(t)||e._err(t,oe.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=V.BEFORE_HTML}function Zp(e,t){e._err(t,oe.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Ds.QUIRKS),e.insertionMode=V.BEFORE_HTML,e._processToken(t)}function Iit(e,t){t.tagID===N.HTML?(e._insertElement(t,we.HTML),e.insertionMode=V.BEFORE_HEAD):Qm(e,t)}function Dit(e,t){const n=t.tagID;(n===N.HTML||n===N.HEAD||n===N.BODY||n===N.BR)&&Qm(e,t)}function Qm(e,t){e._insertFakeRootElement(),e.insertionMode=V.BEFORE_HEAD,e._processToken(t)}function Mit(e,t){switch(t.tagID){case N.HTML:{ci(e,t);break}case N.HEAD:{e._insertElement(t,we.HTML),e.headElement=e.openElements.current,e.insertionMode=V.IN_HEAD;break}default:Jm(e,t)}}function Rit(e,t){const n=t.tagID;n===N.HEAD||n===N.BODY||n===N.HTML||n===N.BR?Jm(e,t):e._err(t,oe.endTagWithoutMatchingOpenElement)}function Jm(e,t){e._insertFakeElement(ne.HEAD,N.HEAD),e.headElement=e.openElements.current,e.insertionMode=V.IN_HEAD,e._processToken(t)}function Ma(e,t){switch(t.tagID){case N.HTML:{ci(e,t);break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:{e._appendElement(t,we.HTML),t.ackSelfClosing=!0;break}case N.TITLE:{e._switchToTextParsing(t,Un.RCDATA);break}case N.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Un.RAWTEXT):(e._insertElement(t,we.HTML),e.insertionMode=V.IN_HEAD_NO_SCRIPT);break}case N.NOFRAMES:case N.STYLE:{e._switchToTextParsing(t,Un.RAWTEXT);break}case N.SCRIPT:{e._switchToTextParsing(t,Un.SCRIPT_DATA);break}case N.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=V.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(V.IN_TEMPLATE);break}case N.HEAD:{e._err(t,oe.misplacedStartTagForHeadElement);break}default:Zm(e,t)}}function Lit(e,t){switch(t.tagID){case N.HEAD:{e.openElements.pop(),e.insertionMode=V.AFTER_HEAD;break}case N.BODY:case N.BR:case N.HTML:{Zm(e,t);break}case N.TEMPLATE:{Ud(e,t);break}default:e._err(t,oe.endTagWithoutMatchingOpenElement)}}function Ud(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==N.TEMPLATE&&e._err(t,oe.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(N.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,oe.endTagWithoutMatchingOpenElement)}function Zm(e,t){e.openElements.pop(),e.insertionMode=V.AFTER_HEAD,e._processToken(t)}function Fit(e,t){switch(t.tagID){case N.HTML:{ci(e,t);break}case N.BASEFONT:case N.BGSOUND:case N.HEAD:case N.LINK:case N.META:case N.NOFRAMES:case N.STYLE:{Ma(e,t);break}case N.NOSCRIPT:{e._err(t,oe.nestedNoscriptInHead);break}default:eg(e,t)}}function Bit(e,t){switch(t.tagID){case N.NOSCRIPT:{e.openElements.pop(),e.insertionMode=V.IN_HEAD;break}case N.BR:{eg(e,t);break}default:e._err(t,oe.endTagWithoutMatchingOpenElement)}}function eg(e,t){const n=t.type===ut.EOF?oe.openElementsLeftAfterEof:oe.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=V.IN_HEAD,e._processToken(t)}function $it(e,t){switch(t.tagID){case N.HTML:{ci(e,t);break}case N.BODY:{e._insertElement(t,we.HTML),e.framesetOk=!1,e.insertionMode=V.IN_BODY;break}case N.FRAMESET:{e._insertElement(t,we.HTML),e.insertionMode=V.IN_FRAMESET;break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{e._err(t,oe.abandonedHeadElementChild),e.openElements.push(e.headElement,N.HEAD),Ma(e,t),e.openElements.remove(e.headElement);break}case N.HEAD:{e._err(t,oe.misplacedStartTagForHeadElement);break}default:tg(e,t)}}function Uit(e,t){switch(t.tagID){case N.BODY:case N.HTML:case N.BR:{tg(e,t);break}case N.TEMPLATE:{Ud(e,t);break}default:e._err(t,oe.endTagWithoutMatchingOpenElement)}}function tg(e,t){e._insertFakeElement(ne.BODY,N.BODY),e.insertionMode=V.IN_BODY,QS(e,t)}function QS(e,t){switch(t.type){case ut.CHARACTER:{Wse(e,t);break}case ut.WHITESPACE_CHARACTER:{Vse(e,t);break}case ut.COMMENT:{qA(e,t);break}case ut.START_TAG:{ci(e,t);break}case ut.END_TAG:{JS(e,t);break}case ut.EOF:{Yse(e,t);break}}}function Vse(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Wse(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function zit(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Hit(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Vit(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,we.HTML),e.insertionMode=V.IN_FRAMESET)}function Wit(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,we.HTML)}function qit(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e.openElements.currentTagId!==void 0&&WA.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,we.HTML)}function Kit(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,we.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Git(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,we.HTML),n||(e.formElement=e.openElements.current))}function Yit(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===N.LI&&i===N.LI||(n===N.DD||n===N.DT)&&(i===N.DD||i===N.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==N.ADDRESS&&i!==N.DIV&&i!==N.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,we.HTML)}function Xit(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,we.HTML),e.tokenizer.state=Un.PLAINTEXT}function Qit(e,t){e.openElements.hasInScope(N.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,we.HTML),e.framesetOk=!1}function Jit(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(ne.A);n&&(u3(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,we.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Zit(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,we.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function est(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(N.NOBR)&&(u3(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,we.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function tst(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,we.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function nst(e,t){e.treeAdapter.getDocumentMode(e.document)!==Ds.QUIRKS&&e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,we.HTML),e.framesetOk=!1,e.insertionMode=V.IN_TABLE}function qse(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,we.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Kse(e){const t=Mse(e,td.TYPE);return t!=null&&t.toLowerCase()===bit}function rst(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,we.HTML),Kse(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function ist(e,t){e._appendElement(t,we.HTML),t.ackSelfClosing=!0}function sst(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._appendElement(t,we.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function ast(e,t){t.tagName=ne.IMG,t.tagID=N.IMG,qse(e,t)}function ost(e,t){e._insertElement(t,we.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Un.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=V.TEXT}function lst(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Un.RAWTEXT)}function cst(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Un.RAWTEXT)}function y7(e,t){e._switchToTextParsing(t,Un.RAWTEXT)}function ust(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,we.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===V.IN_TABLE||e.insertionMode===V.IN_CAPTION||e.insertionMode===V.IN_TABLE_BODY||e.insertionMode===V.IN_ROW||e.insertionMode===V.IN_CELL?V.IN_SELECT_IN_TABLE:V.IN_SELECT}function dst(e,t){e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,we.HTML)}function fst(e,t){e.openElements.hasInScope(N.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,we.HTML)}function hst(e,t){e.openElements.hasInScope(N.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(N.RTC),e._insertElement(t,we.HTML)}function pst(e,t){e._reconstructActiveFormattingElements(),Use(t),c3(t),t.selfClosing?e._appendElement(t,we.MATHML):e._insertElement(t,we.MATHML),t.ackSelfClosing=!0}function mst(e,t){e._reconstructActiveFormattingElements(),zse(t),c3(t),t.selfClosing?e._appendElement(t,we.SVG):e._insertElement(t,we.SVG),t.ackSelfClosing=!0}function v7(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,we.HTML)}function ci(e,t){switch(t.tagID){case N.I:case N.S:case N.B:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.SMALL:case N.STRIKE:case N.STRONG:{Zit(e,t);break}case N.A:{Jit(e,t);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{qit(e,t);break}case N.P:case N.DL:case N.OL:case N.UL:case N.DIV:case N.DIR:case N.NAV:case N.MAIN:case N.MENU:case N.ASIDE:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.DETAILS:case N.ADDRESS:case N.ARTICLE:case N.SEARCH:case N.SECTION:case N.SUMMARY:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{Wit(e,t);break}case N.LI:case N.DD:case N.DT:{Yit(e,t);break}case N.BR:case N.IMG:case N.WBR:case N.AREA:case N.EMBED:case N.KEYGEN:{qse(e,t);break}case N.HR:{sst(e,t);break}case N.RB:case N.RTC:{fst(e,t);break}case N.RT:case N.RP:{hst(e,t);break}case N.PRE:case N.LISTING:{Kit(e,t);break}case N.XMP:{lst(e,t);break}case N.SVG:{mst(e,t);break}case N.HTML:{zit(e,t);break}case N.BASE:case N.LINK:case N.META:case N.STYLE:case N.TITLE:case N.SCRIPT:case N.BGSOUND:case N.BASEFONT:case N.TEMPLATE:{Ma(e,t);break}case N.BODY:{Hit(e,t);break}case N.FORM:{Git(e,t);break}case N.NOBR:{est(e,t);break}case N.MATH:{pst(e,t);break}case N.TABLE:{nst(e,t);break}case N.INPUT:{rst(e,t);break}case N.PARAM:case N.TRACK:case N.SOURCE:{ist(e,t);break}case N.IMAGE:{ast(e,t);break}case N.BUTTON:{Qit(e,t);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{tst(e,t);break}case N.IFRAME:{cst(e,t);break}case N.SELECT:{ust(e,t);break}case N.OPTION:case N.OPTGROUP:{dst(e,t);break}case N.NOEMBED:case N.NOFRAMES:{y7(e,t);break}case N.FRAMESET:{Vit(e,t);break}case N.TEXTAREA:{ost(e,t);break}case N.NOSCRIPT:{e.options.scriptingEnabled?y7(e,t):v7(e,t);break}case N.PLAINTEXT:{Xit(e,t);break}case N.COL:case N.TH:case N.TD:case N.TR:case N.HEAD:case N.FRAME:case N.TBODY:case N.TFOOT:case N.THEAD:case N.CAPTION:case N.COLGROUP:break;default:v7(e,t)}}function gst(e,t){if(e.openElements.hasInScope(N.BODY)&&(e.insertionMode=V.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function yst(e,t){e.openElements.hasInScope(N.BODY)&&(e.insertionMode=V.AFTER_BODY,rae(e,t))}function vst(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function xst(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(N.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(N.FORM):n&&e.openElements.remove(n))}function bst(e){e.openElements.hasInButtonScope(N.P)||e._insertFakeElement(ne.P,N.P),e._closePElement()}function wst(e){e.openElements.hasInListItemScope(N.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(N.LI),e.openElements.popUntilTagNamePopped(N.LI))}function Est(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Sst(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function _st(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function Nst(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(ne.BR,N.BR),e.openElements.pop(),e.framesetOk=!1}function Gse(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],a=e.openElements.tagIDs[i];if(r===a&&(r!==N.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,a))break}}function JS(e,t){switch(t.tagID){case N.A:case N.B:case N.I:case N.S:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.NOBR:case N.SMALL:case N.STRIKE:case N.STRONG:{u3(e,t);break}case N.P:{bst(e);break}case N.DL:case N.UL:case N.OL:case N.DIR:case N.DIV:case N.NAV:case N.PRE:case N.MAIN:case N.MENU:case N.ASIDE:case N.BUTTON:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.ADDRESS:case N.ARTICLE:case N.DETAILS:case N.SEARCH:case N.SECTION:case N.SUMMARY:case N.LISTING:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{vst(e,t);break}case N.LI:{wst(e);break}case N.DD:case N.DT:{Est(e,t);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{Sst(e);break}case N.BR:{Nst(e);break}case N.BODY:{gst(e,t);break}case N.HTML:{yst(e,t);break}case N.FORM:{xst(e);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{_st(e,t);break}case N.TEMPLATE:{Ud(e,t);break}default:Gse(e,t)}}function Yse(e,t){e.tmplInsertionModeStack.length>0?nae(e,t):d3(e,t)}function Tst(e,t){var n;t.tagID===N.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Cst(e,t){e._err(t,oe.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function qT(e,t){if(e.openElements.currentTagId!==void 0&&Hse.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=V.IN_TABLE_TEXT,t.type){case ut.CHARACTER:{Qse(e,t);break}case ut.WHITESPACE_CHARACTER:{Xse(e,t);break}}else Sy(e,t)}function kst(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,we.HTML),e.insertionMode=V.IN_CAPTION}function Ast(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,we.HTML),e.insertionMode=V.IN_COLUMN_GROUP}function jst(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(ne.COLGROUP,N.COLGROUP),e.insertionMode=V.IN_COLUMN_GROUP,f3(e,t)}function Ost(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,we.HTML),e.insertionMode=V.IN_TABLE_BODY}function Pst(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(ne.TBODY,N.TBODY),e.insertionMode=V.IN_TABLE_BODY,ZS(e,t)}function Ist(e,t){e.openElements.hasInTableScope(N.TABLE)&&(e.openElements.popUntilTagNamePopped(N.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Dst(e,t){Kse(t)?e._appendElement(t,we.HTML):Sy(e,t),t.ackSelfClosing=!0}function Mst(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,we.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function Fh(e,t){switch(t.tagID){case N.TD:case N.TH:case N.TR:{Pst(e,t);break}case N.STYLE:case N.SCRIPT:case N.TEMPLATE:{Ma(e,t);break}case N.COL:{jst(e,t);break}case N.FORM:{Mst(e,t);break}case N.TABLE:{Ist(e,t);break}case N.TBODY:case N.TFOOT:case N.THEAD:{Ost(e,t);break}case N.INPUT:{Dst(e,t);break}case N.CAPTION:{kst(e,t);break}case N.COLGROUP:{Ast(e,t);break}default:Sy(e,t)}}function p0(e,t){switch(t.tagID){case N.TABLE:{e.openElements.hasInTableScope(N.TABLE)&&(e.openElements.popUntilTagNamePopped(N.TABLE),e._resetInsertionMode());break}case N.TEMPLATE:{Ud(e,t);break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:Sy(e,t)}}function Sy(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,QS(e,t),e.fosterParentingEnabled=n}function Xse(e,t){e.pendingCharacterTokens.push(t)}function Qse(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function em(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)Sy(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Jse=new Set([N.CAPTION,N.COL,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]);function Rst(e,t){const n=t.tagID;Jse.has(n)?e.openElements.hasInTableScope(N.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=V.IN_TABLE,Fh(e,t)):ci(e,t)}function Lst(e,t){const n=t.tagID;switch(n){case N.CAPTION:case N.TABLE:{e.openElements.hasInTableScope(N.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=V.IN_TABLE,n===N.TABLE&&p0(e,t));break}case N.BODY:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:JS(e,t)}}function f3(e,t){switch(t.tagID){case N.HTML:{ci(e,t);break}case N.COL:{e._appendElement(t,we.HTML),t.ackSelfClosing=!0;break}case N.TEMPLATE:{Ma(e,t);break}default:pw(e,t)}}function Fst(e,t){switch(t.tagID){case N.COLGROUP:{e.openElements.currentTagId===N.COLGROUP&&(e.openElements.pop(),e.insertionMode=V.IN_TABLE);break}case N.TEMPLATE:{Ud(e,t);break}case N.COL:break;default:pw(e,t)}}function pw(e,t){e.openElements.currentTagId===N.COLGROUP&&(e.openElements.pop(),e.insertionMode=V.IN_TABLE,e._processToken(t))}function ZS(e,t){switch(t.tagID){case N.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,we.HTML),e.insertionMode=V.IN_ROW;break}case N.TH:case N.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(ne.TR,N.TR),e.insertionMode=V.IN_ROW,e_(e,t);break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=V.IN_TABLE,Fh(e,t));break}default:Fh(e,t)}}function KA(e,t){const n=t.tagID;switch(t.tagID){case N.TBODY:case N.TFOOT:case N.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=V.IN_TABLE);break}case N.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=V.IN_TABLE,p0(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:case N.TR:break;default:p0(e,t)}}function e_(e,t){switch(t.tagID){case N.TH:case N.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,we.HTML),e.insertionMode=V.IN_CELL,e.activeFormattingElements.insertMarker();break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=V.IN_TABLE_BODY,ZS(e,t));break}default:Fh(e,t)}}function Zse(e,t){switch(t.tagID){case N.TR:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=V.IN_TABLE_BODY);break}case N.TABLE:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=V.IN_TABLE_BODY,KA(e,t));break}case N.TBODY:case N.TFOOT:case N.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(N.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=V.IN_TABLE_BODY,KA(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:break;default:p0(e,t)}}function Bst(e,t){const n=t.tagID;Jse.has(n)?(e.openElements.hasInTableScope(N.TD)||e.openElements.hasInTableScope(N.TH))&&(e._closeTableCell(),e_(e,t)):ci(e,t)}function $st(e,t){const n=t.tagID;switch(n){case N.TD:case N.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=V.IN_ROW);break}case N.TABLE:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),Zse(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:break;default:JS(e,t)}}function eae(e,t){switch(t.tagID){case N.HTML:{ci(e,t);break}case N.OPTION:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e._insertElement(t,we.HTML);break}case N.OPTGROUP:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e.openElements.currentTagId===N.OPTGROUP&&e.openElements.pop(),e._insertElement(t,we.HTML);break}case N.HR:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e.openElements.currentTagId===N.OPTGROUP&&e.openElements.pop(),e._appendElement(t,we.HTML),t.ackSelfClosing=!0;break}case N.INPUT:case N.KEYGEN:case N.TEXTAREA:case N.SELECT:{e.openElements.hasInSelectScope(N.SELECT)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),t.tagID!==N.SELECT&&e._processStartTag(t));break}case N.SCRIPT:case N.TEMPLATE:{Ma(e,t);break}}}function tae(e,t){switch(t.tagID){case N.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===N.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===N.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===N.OPTGROUP&&e.openElements.pop();break}case N.OPTION:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop();break}case N.SELECT:{e.openElements.hasInSelectScope(N.SELECT)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode());break}case N.TEMPLATE:{Ud(e,t);break}}}function Ust(e,t){const n=t.tagID;n===N.CAPTION||n===N.TABLE||n===N.TBODY||n===N.TFOOT||n===N.THEAD||n===N.TR||n===N.TD||n===N.TH?(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),e._processStartTag(t)):eae(e,t)}function zst(e,t){const n=t.tagID;n===N.CAPTION||n===N.TABLE||n===N.TBODY||n===N.TFOOT||n===N.THEAD||n===N.TR||n===N.TD||n===N.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),e.onEndTag(t)):tae(e,t)}function Hst(e,t){switch(t.tagID){case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{Ma(e,t);break}case N.CAPTION:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{e.tmplInsertionModeStack[0]=V.IN_TABLE,e.insertionMode=V.IN_TABLE,Fh(e,t);break}case N.COL:{e.tmplInsertionModeStack[0]=V.IN_COLUMN_GROUP,e.insertionMode=V.IN_COLUMN_GROUP,f3(e,t);break}case N.TR:{e.tmplInsertionModeStack[0]=V.IN_TABLE_BODY,e.insertionMode=V.IN_TABLE_BODY,ZS(e,t);break}case N.TD:case N.TH:{e.tmplInsertionModeStack[0]=V.IN_ROW,e.insertionMode=V.IN_ROW,e_(e,t);break}default:e.tmplInsertionModeStack[0]=V.IN_BODY,e.insertionMode=V.IN_BODY,ci(e,t)}}function Vst(e,t){t.tagID===N.TEMPLATE&&Ud(e,t)}function nae(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(N.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):d3(e,t)}function Wst(e,t){t.tagID===N.HTML?ci(e,t):mw(e,t)}function rae(e,t){var n;if(t.tagID===N.HTML){if(e.fragmentContext||(e.insertionMode=V.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===N.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else mw(e,t)}function mw(e,t){e.insertionMode=V.IN_BODY,QS(e,t)}function qst(e,t){switch(t.tagID){case N.HTML:{ci(e,t);break}case N.FRAMESET:{e._insertElement(t,we.HTML);break}case N.FRAME:{e._appendElement(t,we.HTML),t.ackSelfClosing=!0;break}case N.NOFRAMES:{Ma(e,t);break}}}function Kst(e,t){t.tagID===N.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==N.FRAMESET&&(e.insertionMode=V.AFTER_FRAMESET))}function Gst(e,t){switch(t.tagID){case N.HTML:{ci(e,t);break}case N.NOFRAMES:{Ma(e,t);break}}}function Yst(e,t){t.tagID===N.HTML&&(e.insertionMode=V.AFTER_AFTER_FRAMESET)}function Xst(e,t){t.tagID===N.HTML?ci(e,t):Ax(e,t)}function Ax(e,t){e.insertionMode=V.IN_BODY,QS(e,t)}function Qst(e,t){switch(t.tagID){case N.HTML:{ci(e,t);break}case N.NOFRAMES:{Ma(e,t);break}}}function Jst(e,t){t.chars=dn,e._insertCharacters(t)}function Zst(e,t){e._insertCharacters(t),e.framesetOk=!1}function iae(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==we.HTML&&e.openElements.currentTagId!==void 0&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function eat(e,t){if(mit(t))iae(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===we.MATHML?Use(t):r===we.SVG&&(git(t),zse(t)),c3(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function tat(e,t){if(t.tagID===N.P||t.tagID===N.BR){iae(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===we.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}ne.AREA,ne.BASE,ne.BASEFONT,ne.BGSOUND,ne.BR,ne.COL,ne.EMBED,ne.FRAME,ne.HR,ne.IMG,ne.INPUT,ne.KEYGEN,ne.LINK,ne.META,ne.PARAM,ne.SOURCE,ne.TRACK,ne.WBR;const nat=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,rat=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),x7={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function sae(e,t){const n=hat(e),r=Yie("type",{handlers:{root:iat,element:sat,text:aat,comment:oae,doctype:oat,raw:cat},unknown:uat}),i={parser:n?new g7(x7):g7.getFragmentParser(void 0,x7),handle(o){r(o,i)},stitches:!1,options:t||{}};r(e,i),Ep(i,xo());const s=n?i.parser.document:i.parser.getFragment(),a=irt(s,{file:i.options.file});return i.stitches&&by(a,"comment",function(o,l,u){const d=o;if(d.value.stitch&&u&&l!==void 0){const f=u.children;return f[l]=d.value.stitch,l}}),a.type==="root"&&a.children.length===1&&a.children[0].type===e.type?a.children[0]:a}function aae(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function iat(e,t){aae(e.children,t)}function sat(e,t){dat(e,t),aae(e.children,t),fat(e,t)}function aat(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const n={type:ut.CHARACTER,chars:e.value,location:_y(e)};Ep(t,xo(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function oat(e,t){const n={type:ut.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:_y(e)};Ep(t,xo(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function lat(e,t){t.stitches=!0;const n=pat(e);if("children"in e&&"children"in n){const r=sae({type:"root",children:e.children},t.options);n.children=r.children}oae({type:"comment",value:{stitch:n}},t)}function oae(e,t){const n=e.value,r={type:ut.COMMENT,data:n,location:_y(e)};Ep(t,xo(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function cat(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,lae(t,xo(e)),t.parser.tokenizer.write(t.options.tagfilter?e.value.replace(nat,"&lt;$1$2"):e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function uat(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))lat(n,t);else{let r="";throw rat.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function Ep(e,t){lae(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Un.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function lae(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function dat(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===Un.PLAINTEXT)return;Ep(t,xo(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:Lu.html;i===Lu.html&&n==="svg"&&(i=Lu.svg);const s=xrt({...e,children:[]},{space:i===Lu.svg?"svg":"html"}),a={type:ut.START_TAG,tagName:n,tagID:wp(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:_y(e)};t.parser.currentToken=a,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function fat(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&Crt.includes(n)||t.parser.tokenizer.state===Un.PLAINTEXT)return;Ep(t,qS(e));const r={type:ut.END_TAG,tagName:n,tagID:wp(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:_y(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Un.RCDATA||t.parser.tokenizer.state===Un.RAWTEXT||t.parser.tokenizer.state===Un.SCRIPT_DATA)&&(t.parser.tokenizer.state=Un.DATA)}function hat(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function _y(e){const t=xo(e)||{line:void 0,column:void 0,offset:void 0},n=qS(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function pat(e){return"children"in e?Lh({...e,children:[]}):Lh(e)}function mat(e){return function(t,n){return sae(t,{...e,file:n})}}function b7({content:e,className:t,variant:n="default"}){return c.jsx("div",{className:Ve("markdown-content prose prose-lg max-w-none","prose-headings:font-bold prose-headings:tracking-tight","prose-p:text-gray-700 dark:prose-p:text-gray-300","prose-strong:text-gray-900 dark:prose-strong:text-gray-100",n==="compact"&&"prose-compact",t),children:c.jsx(yet,{remarkPlugins:[Ont],rehypePlugins:[qnt,mat],components:{h1:({children:r,...i})=>c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-4 mt-12 first:mt-0 pb-2 border-b-2 border-gray-200 dark:border-gray-700",...i,children:r}),h2:({children:r,...i})=>c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-3 mt-10 pb-1 border-b border-gray-200 dark:border-gray-700",...i,children:r}),h3:({children:r,...i})=>c.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-3 mt-8",...i,children:r}),h4:({children:r,...i})=>c.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2 mt-6",...i,children:r}),h5:({children:r,...i})=>c.jsx("h5",{className:"text-base font-semibold text-gray-900 dark:text-gray-100 mb-2 mt-5",...i,children:r}),h6:({children:r,...i})=>c.jsx("h6",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2 mt-4 uppercase tracking-wider",...i,children:r}),p:({children:r,...i})=>c.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-5 mt-1 leading-normal text-base",...i,children:r}),ul:({children:r,...i})=>c.jsx("ul",{className:"mb-5 space-y-1 pl-0 list-none",...i,children:r}),ol:({children:r,...i})=>c.jsx("ol",{className:"mb-5 space-y-1 pl-0 list-none markdown-ordered-list",...i,children:r}),li:({children:r,...i})=>c.jsxs("li",{className:"text-gray-700 dark:text-gray-300 leading-snug pl-8 relative markdown-list-item",...i,children:[c.jsx("span",{className:"absolute left-2 top-1 w-3 h-3 bg-blue-500 rounded-full flex-shrink-0 markdown-bullet"}),c.jsx("div",{className:"min-h-[1.2rem]",children:r})]}),blockquote:({children:r,...i})=>c.jsx("blockquote",{className:"border-l-4 border-blue-500 pl-6 py-4 my-8 bg-gradient-to-r from-blue-50 to-transparent dark:from-blue-900/20 dark:to-transparent italic rounded-r-lg",...i,children:c.jsx("div",{className:"text-gray-700 dark:text-gray-300",children:r})}),code:({children:r,className:i,...s})=>i!=null&&i.includes("language-")?c.jsx("code",{className:"block bg-gray-50 dark:bg-gray-900 p-4 rounded-lg text-sm font-mono overflow-x-auto border",...s,children:r}):c.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded-md text-sm font-mono text-pink-600 dark:text-pink-400 border",...s,children:r}),pre:({children:r,...i})=>c.jsx("pre",{className:"bg-gray-50 dark:bg-gray-900 p-6 rounded-lg overflow-x-auto mb-8 border shadow-sm",...i,children:r}),a:({children:r,href:i,...s})=>c.jsx("a",{href:i,className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline decoration-2 underline-offset-2 hover:decoration-blue-800 dark:hover:decoration-blue-300 transition-colors",target:"_blank",rel:"noopener noreferrer",...s,children:r}),img:({src:r,alt:i,...s})=>c.jsxs("div",{className:"my-8",children:[c.jsx("img",{src:r,alt:i,className:"max-w-full h-auto rounded-lg shadow-lg border",...s}),i&&c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 text-center italic",children:i})]}),table:({children:r,...i})=>c.jsx("div",{className:"overflow-x-auto my-8 rounded-lg border shadow-sm",children:c.jsx("table",{className:"min-w-full border-collapse bg-white dark:bg-gray-800",...i,children:r})}),thead:({children:r,...i})=>c.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",...i,children:r}),th:({children:r,...i})=>c.jsx("th",{className:"border-b border-gray-300 dark:border-gray-600 px-6 py-3 text-left font-semibold text-gray-900 dark:text-gray-100 text-sm uppercase tracking-wider",...i,children:r}),td:({children:r,...i})=>c.jsx("td",{className:"border-b border-gray-200 dark:border-gray-700 px-6 py-4 text-gray-700 dark:text-gray-300",...i,children:r}),hr:({...r})=>c.jsxs("div",{className:"my-12 flex items-center justify-center",children:[c.jsx("hr",{className:"flex-1 border-gray-300 dark:border-gray-600",...r}),c.jsx("div",{className:"mx-4 w-2 h-2 bg-gray-300 dark:bg-gray-600 rounded-full"}),c.jsx("hr",{className:"flex-1 border-gray-300 dark:border-gray-600"})]}),strong:({children:r,...i})=>c.jsx("strong",{className:"font-bold text-gray-900 dark:text-gray-100",...i,children:r}),em:({children:r,...i})=>c.jsx("em",{className:"italic text-gray-800 dark:text-gray-200",...i,children:r})},children:e})})}function gat({documents:e,loading:t=!1,onDocumentClick:n,onEditDocument:r,onDeleteDocument:i,onDuplicateDocument:s,onCreateNew:a,showClientFilter:o=!0,selectedClientId:l,onClientFilterChange:u,className:d}){const[f,h]=w.useState(""),[p,m]=w.useState("all"),[g,v]=w.useState("all"),[y,b]=w.useState("updated_at"),[x,S]=w.useState("desc"),[E,_]=w.useState(!1),[T,C]=w.useState(!1),[k,A]=w.useState(null),j=F=>{A(F),C(!0)},D=async()=>{if(!(!k||!i))try{await i(k.id),C(!1),A(null),console.log("Document deleted successfully")}catch(F){console.error("Failed to delete document:",F),alert(`Failed to delete document: ${F instanceof Error?F.message:"Unknown error"}`)}},P=()=>{C(!1),A(null)},M=Array.from(new Map(e.filter(F=>F.client_name).map(F=>[F.client_id,{id:F.client_id,name:F.client_name,company:F.client_company}])).values()),L=e.filter(F=>{const I=!f||F.title.toLowerCase().includes(f.toLowerCase())||F.tags.some(be=>be.toLowerCase().includes(f.toLowerCase())),X=p==="all"||F.document_type===p,G=g==="all"||F.status===g,$=!l||F.client_id===l;return I&&X&&G&&$}).sort((F,I)=>{let X=F[y],G=I[y];(y==="updated_at"||y==="created_at")&&(X=new Date(X).getTime(),G=new Date(G).getTime()),typeof X=="string"&&typeof G=="string"&&(X=X.toLowerCase(),G=G.toLowerCase());const $=X<G?-1:X>G?1:0;return x==="asc"?$:-$}),O=F=>{y===F?S(x==="asc"?"desc":"asc"):(b(F),S("desc"))},B=F=>{switch(F){case"contract":return"";case"specification":return"";case"note":return"";default:return""}},R=F=>{switch(F){case"published":return"bg-green-100 text-green-700 border-green-200";case"draft":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"archived":return"bg-gray-100 text-gray-700 border-gray-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}};return t?c.jsxs(Z,{className:d,children:[c.jsx(de,{children:c.jsx(he,{children:"Loading documents..."})}),c.jsx(ee,{children:c.jsx("div",{className:"space-y-4",children:[1,2,3].map(F=>c.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),c.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"})]}),c.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4 mb-2"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded w-12"}),c.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"})]})]},F))})})]}):c.jsxs(Z,{className:d,children:[c.jsxs(de,{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs(he,{className:"flex items-center gap-2",children:[c.jsx(bn,{className:"h-5 w-5"}),"Documents (",L.length,")"]}),a&&c.jsxs(H,{onClick:a,size:"sm",children:[c.jsx(nt,{className:"h-4 w-4 mr-1"}),"New Document"]})]}),c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Kh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),c.jsx(ce,{placeholder:"Search documents and tags...",value:f,onChange:F=>h(F.target.value),className:"pl-10"})]}),c.jsx(H,{variant:"outline",size:"sm",onClick:()=>_(!E),className:E?"bg-gray-100":"",children:c.jsx(eO,{className:"h-4 w-4"})})]}),E&&c.jsxs("div",{className:"flex flex-wrap gap-2",children:[o&&M.length>1&&c.jsxs("select",{value:l||"all",onChange:F=>u==null?void 0:u(F.target.value==="all"?"":F.target.value),className:"px-3 py-1 border rounded text-sm","aria-label":"Filter by client",children:[c.jsx("option",{value:"all",children:"All Clients"}),M.map(F=>c.jsxs("option",{value:F.id,children:[F.name," ",F.company&&`(${F.company})`]},F.id))]}),c.jsxs("select",{value:p,onChange:F=>m(F.target.value),className:"px-3 py-1 border rounded text-sm","aria-label":"Filter by document type",children:[c.jsx("option",{value:"all",children:"All Types"}),c.jsx("option",{value:"page",children:"Pages"}),c.jsx("option",{value:"note",children:"Notes"}),c.jsx("option",{value:"contract",children:"Contracts"}),c.jsx("option",{value:"specification",children:"Specifications"})]}),c.jsxs("select",{value:g,onChange:F=>v(F.target.value),className:"px-3 py-1 border rounded text-sm","aria-label":"Filter by document status",children:[c.jsx("option",{value:"all",children:"All Status"}),c.jsx("option",{value:"draft",children:"Draft"}),c.jsx("option",{value:"published",children:"Published"}),c.jsx("option",{value:"archived",children:"Archived"})]}),c.jsxs(H,{variant:"outline",size:"sm",onClick:()=>O("updated_at"),className:"text-xs",children:[c.jsx(At,{className:"h-3 w-3 mr-1"}),"Updated",y==="updated_at"&&(x==="asc"?c.jsx(JR,{className:"h-3 w-3 ml-1"}):c.jsx(XR,{className:"h-3 w-3 ml-1"}))]}),c.jsxs(H,{variant:"outline",size:"sm",onClick:()=>O("title"),className:"text-xs",children:["Title",y==="title"&&(x==="asc"?c.jsx(JR,{className:"h-3 w-3 ml-1"}):c.jsx(XR,{className:"h-3 w-3 ml-1"}))]})]})]})]}),c.jsx(ee,{children:L.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx(bn,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),c.jsx("h3",{className:"text-lg font-medium mb-2",children:"No documents found"}),c.jsx("p",{className:"text-sm mb-4",children:f||p!=="all"||g!=="all"||l?"Try adjusting your search or filter criteria.":"Get started by creating your first document."}),a&&!f&&c.jsxs(H,{onClick:a,variant:"outline",children:[c.jsx(nt,{className:"h-4 w-4 mr-2"}),"Create First Document"]})]}):c.jsx("div",{className:"space-y-3",children:L.map(F=>c.jsxs("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>n==null?void 0:n(F),children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("h3",{className:"font-medium text-gray-900 truncate flex items-center gap-2",children:[c.jsx("span",{className:"text-lg",children:B(F.document_type)}),F.title,F.is_sensitive&&c.jsx(Uu,{className:"h-4 w-4 text-red-500"})]}),c.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500 mt-1",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(Gs,{className:"h-3 w-3"}),F.client_name,F.client_company&&` (${F.client_company})`]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(ht,{className:"h-3 w-3"}),v1(new Date(F.updated_at))," ago"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(xa,{className:"h-3 w-3"}),F.view_count," views"]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[c.jsx(Tt,{className:Ve("text-xs",R(F.status)),children:F.status}),c.jsxs("div",{className:"flex gap-1",children:[r&&c.jsx(H,{variant:"ghost",size:"sm",onClick:I=>{I.stopPropagation(),r(F)},children:c.jsx(ao,{className:"h-3 w-3"})}),s&&c.jsx(H,{variant:"ghost",size:"sm",onClick:I=>{I.stopPropagation(),s(F)},children:c.jsx(CH,{className:"h-3 w-3"})}),i&&c.jsx(H,{variant:"ghost",size:"sm",onClick:I=>{I.stopPropagation(),j(F)},className:"text-red-600 hover:text-red-700",children:c.jsx($i,{className:"h-3 w-3"})})]})]})]}),F.tags.length>0&&c.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[c.jsx(o2,{className:"h-3 w-3 text-gray-400"}),c.jsxs("div",{className:"flex flex-wrap gap-1",children:[F.tags.slice(0,3).map(I=>c.jsx(Tt,{variant:"secondary",className:"text-xs",children:I},I)),F.tags.length>3&&c.jsxs(Tt,{variant:"secondary",className:"text-xs",children:["+",F.tags.length-3," more"]})]})]}),c.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("span",{children:[F.word_count," words"]}),c.jsxs("span",{children:[F.reading_time_minutes," min read"]}),c.jsxs("span",{children:["Created by ",F.created_by_name||"Unknown"]})]}),c.jsx("span",{className:"capitalize",children:F.document_type})]})]},F.id))})}),c.jsx(Ree,{open:T,onOpenChange:C,children:c.jsxs(VD,{children:[c.jsxs(WD,{children:[c.jsx(KD,{children:"Delete Document"}),c.jsxs(GD,{children:['Are you sure you want to delete "',k==null?void 0:k.title,'"? This action cannot be undone.']})]}),c.jsxs(qD,{children:[c.jsx(XD,{onClick:P,children:"Cancel"}),c.jsx(YD,{onClick:D,className:"bg-red-600 hover:bg-red-700 focus:ring-red-600",children:"Delete"})]})]})})]})}const yat=iO("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Cd=w.forwardRef(({className:e,variant:t,...n},r)=>c.jsx("div",{ref:r,role:"alert",className:Ve(yat({variant:t}),e),...n}));Cd.displayName="Alert";const kd=w.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:Ve("text-sm [&_p]:leading-relaxed",e),...t}));kd.displayName="AlertDescription";async function vat(e,t){try{const n=crypto.getRandomValues(new Uint8Array(16)),r=crypto.getRandomValues(new Uint8Array(12)),i=new TextEncoder,s=i.encode(t),a=await crypto.subtle.importKey("raw",s,"PBKDF2",!1,["deriveKey"]),o=await crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:1e5,hash:"SHA-256"},a,{name:"AES-GCM",length:256},!1,["encrypt"]),l=i.encode(e),u=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},o,l),d={data:btoa(String.fromCharCode(...new Uint8Array(u))),salt:btoa(String.fromCharCode(...n)),iv:btoa(String.fromCharCode(...r))};return JSON.stringify(d)}catch(n){throw console.error("Encryption failed:",n),new Error("Failed to encrypt sensitive content")}}async function xat(e,t){try{const n=JSON.parse(e),r=Uint8Array.from(atob(n.data),h=>h.charCodeAt(0)),i=Uint8Array.from(atob(n.salt),h=>h.charCodeAt(0)),s=Uint8Array.from(atob(n.iv),h=>h.charCodeAt(0)),o=new TextEncoder().encode(t),l=await crypto.subtle.importKey("raw",o,"PBKDF2",!1,["deriveKey"]),u=await crypto.subtle.deriveKey({name:"PBKDF2",salt:i,iterations:1e5,hash:"SHA-256"},l,{name:"AES-GCM",length:256},!1,["decrypt"]),d=await crypto.subtle.decrypt({name:"AES-GCM",iv:s},u,r);return new TextDecoder().decode(d)}catch(n){throw console.error("Decryption failed:",n),new Error("Failed to decrypt content. Invalid password or corrupted data.")}}function bat(e){const t=[];return e.length<8&&t.push("Password must be at least 8 characters long"),/[A-Z]/.test(e)||t.push("Password must contain at least one uppercase letter"),/[a-z]/.test(e)||t.push("Password must contain at least one lowercase letter"),/[0-9]/.test(e)||t.push("Password must contain at least one number"),{valid:t.length===0,errors:t}}function wat(e=16){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*",n=new Uint8Array(e);return crypto.getRandomValues(n),Array.from(n,r=>t[r%t.length]).join("")}class Eat{constructor(){Ra(this,"password",null);Ra(this,"expiryTime",0);Ra(this,"SESSION_DURATION",30*60*1e3)}setPassword(t){this.password=t,this.expiryTime=Date.now()+this.SESSION_DURATION}getPassword(){return this.password&&Date.now()<this.expiryTime?this.password:(this.clearSession(),null)}clearSession(){this.password=null,this.expiryTime=0}extendSession(){this.password&&(this.expiryTime=Date.now()+this.SESSION_DURATION)}isActive(){return this.password!==null&&Date.now()<this.expiryTime}}const tm=new Eat;function Sat({open:e,onOpenChange:t,onPasswordSet:n,mode:r,title:i,description:s}){const[a,o]=w.useState(""),[l,u]=w.useState(""),[d,f]=w.useState(!1),[h,p]=w.useState(null),[m,g]=w.useState(!1),v=r==="setup",y=bat(a),b=async E=>{E.preventDefault(),p(null),g(!0);try{if(v){if(!y.valid){p(y.errors[0]);return}if(a!==l){p("Passwords do not match");return}}if(!a){p("Password is required");return}n(a),o(""),u(""),p(null),t(!1)}catch(_){p(_ instanceof Error?_.message:"An error occurred")}finally{g(!1)}},x=()=>{const E=wat(16);o(E),u(E),f(!0)},S=()=>{o(""),u(""),p(null),f(!1)};return c.jsx(kt,{open:e,onOpenChange:E=>{t(E),E||S()},children:c.jsxs(St,{className:"sm:max-w-md",children:[c.jsxs(_t,{children:[c.jsx(Nt,{className:"flex items-center gap-2",children:v?c.jsxs(c.Fragment,{children:[c.jsx(OH,{className:"h-5 w-5 text-blue-600"}),i||"Set Up Document Encryption"]}):c.jsxs(c.Fragment,{children:[c.jsx(Uu,{className:"h-5 w-5 text-yellow-600"}),i||"Unlock Sensitive Documents"]})}),c.jsx(Gc,{children:s||(v?"Create a master password to encrypt sensitive documents. This password will be required to view or edit sensitive content.":"Enter your master password to access sensitive documents.")})]}),c.jsxs("form",{onSubmit:b,className:"space-y-4",children:[v&&c.jsxs(Cd,{className:"border-blue-200 bg-blue-50",children:[c.jsx(Za,{className:"h-4 w-4 text-blue-600"}),c.jsxs(kd,{className:"text-blue-700",children:[c.jsx("strong",{children:"Important:"})," Store this password safely. If you lose it, your encrypted documents cannot be recovered."]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:v?"Master Password":"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx(ce,{type:d?"text":"password",value:a,onChange:E=>o(E.target.value),placeholder:"Enter your encryption password",className:"pr-10",required:!0}),c.jsx("button",{type:"button",onClick:()=>f(!d),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:d?c.jsx(Ufe,{className:"h-4 w-4"}):c.jsx(xa,{className:"h-4 w-4"})})]}),v&&a&&c.jsxs("div",{className:"mt-2 space-y-1",children:[c.jsx("div",{className:"text-xs text-gray-600",children:"Password strength:"}),c.jsxs("div",{className:"space-y-1",children:[y.errors.map((E,_)=>c.jsxs("div",{className:"text-xs text-red-600 flex items-center gap-1",children:[c.jsx("div",{className:"w-1 h-1 bg-red-600 rounded-full"}),E]},_)),y.valid&&c.jsxs("div",{className:"text-xs text-green-600 flex items-center gap-1",children:[c.jsx("div",{className:"w-1 h-1 bg-green-600 rounded-full"}),"Strong password"]})]})]})]}),v&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Confirm Password"}),c.jsx(ce,{type:d?"text":"password",value:l,onChange:E=>u(E.target.value),placeholder:"Confirm your encryption password",required:!0})]}),c.jsxs(H,{type:"button",variant:"outline",onClick:x,className:"w-full",children:[c.jsx(Xfe,{className:"h-4 w-4 mr-2"}),"Generate Secure Password"]})]})]}),h&&c.jsxs(Cd,{className:"border-red-200 bg-red-50",children:[c.jsx(Za,{className:"h-4 w-4 text-red-600"}),c.jsx(kd,{className:"text-red-700",children:h})]}),c.jsxs("div",{className:"flex gap-2 pt-2",children:[c.jsx(H,{type:"button",variant:"outline",onClick:()=>t(!1),className:"flex-1",children:"Cancel"}),c.jsx(H,{type:"submit",disabled:m||v&&(!y.valid||a!==l),className:"flex-1",children:m?c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):v?"Set Up Encryption":"Unlock"})]})]})]})})}function _at(){const[e,t]=w.useState([]),[n,r]=w.useState(!0),[i,s]=w.useState(null),a=w.useCallback(async()=>{try{r(!0),s(null);const{data:y,error:b}=await J.from("client_documents").select(`
          *,
          clients(
            name,
            company
          )
        `).order("updated_at",{ascending:!1});if(b)throw b;const x=(y||[]).map(S=>{var E,_;return{...S,client_name:((E=S.clients)==null?void 0:E.name)||"Unknown Client",client_company:(_=S.clients)==null?void 0:_.company,created_by_name:"User"}});t(x)}catch(y){console.error("Error fetching documents:",y),s(y instanceof Error?y.message:"Failed to fetch documents")}finally{r(!1)}},[]);w.useEffect(()=>{a()},[a]);const o=w.useCallback(async y=>{try{const{data:b,error:x}=await J.from("client_documents").select(`
          *,
          clients(
            name,
            company
          )
        `).eq("client_id",y).order("updated_at",{ascending:!1});if(x)throw x;return(b==null?void 0:b.map(S=>{var E,_;return{...S,client_name:((E=S.clients)==null?void 0:E.name)||"Unknown Client",client_company:(_=S.clients)==null?void 0:_.company,created_by_name:"User"}}))||[]}catch(b){throw console.error("Error fetching client documents:",b),b}},[]),l=async y=>{var b,x;try{const{data:S,error:E}=await J.from("client_documents").select(`
          *,
          clients(
            name,
            company
          )
        `).eq("id",y).single();if(E)throw E;await J.from("client_documents").update({view_count:(S.view_count||0)+1,last_viewed_at:new Date().toISOString()}).eq("id",y);const _={...S,client_name:((b=S.clients)==null?void 0:b.name)||"Unknown Client",client_company:(x=S.clients)==null?void 0:x.company,created_by_name:"User"};if(_.is_sensitive&&_.encrypted_content){const T=tm.getPassword();if(T)try{const C=await xat(_.encrypted_content,T);return{..._,content:JSON.parse(C),content_html:"[Decrypted Content - Render from JSON]"}}catch(C){console.error("Failed to decrypt document content:",C)}}return _}catch(S){throw console.error("Error fetching document:",S),S}},u=async y=>{try{let b=J.from("client_documents").select(`
          *,
          clients!inner(
            name,
            company
          )
        `);y.client_id&&(b=b.eq("client_id",y.client_id)),y.document_type&&(b=b.eq("document_type",y.document_type)),y.status&&(b=b.eq("status",y.status)),y.is_sensitive!==void 0&&(b=b.eq("is_sensitive",y.is_sensitive)),y.tags&&y.tags.length>0&&(b=b.overlaps("tags",y.tags)),y.query&&(b=b.or(`title.ilike.%${y.query}%,content_html.ilike.%${y.query}%`)),b=b.order("updated_at",{ascending:!1});const{data:x,error:S}=await b;if(S)throw S;return(x==null?void 0:x.map(E=>{var _,T;return{...E,client_name:(_=E.clients)==null?void 0:_.name,client_company:(T=E.clients)==null?void 0:T.company,created_by_name:"User"}}))||[]}catch(b){throw console.error("Error searching documents:",b),b}},d=async y=>{try{const{data:b}=await J.auth.getUser();if(!b.user)throw new Error("User not authenticated");const x=y.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");let S={...y,slug:x,created_by:b.user.id,updated_by:b.user.id};if(y.is_sensitive){const T=tm.getPassword();if(!T)throw new Error("Encryption password required for sensitive documents");const C=await vat(JSON.stringify(y.content),T);S={...S,encrypted_content:C,content:{},content_html:"[Encrypted Content]",content_markdown:"[Encrypted Content]"}}const{data:E,error:_}=await J.from("client_documents").insert(S).select().single();if(_)throw _;return await a(),E}catch(b){throw console.error("Error adding document:",b),b}};return{documents:e,loading:n,error:i,fetchDocuments:a,getDocumentsByClient:o,getDocument:l,searchDocuments:u,addDocument:d,updateDocument:async y=>{try{const{data:b}=await J.auth.getUser();if(!b.user)throw new Error("User not authenticated");const x={...y,updated_by:b.user.id,updated_at:new Date().toISOString()};y.title&&(x.slug=y.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""));const{data:S,error:E}=await J.from("client_documents").update(x).eq("id",y.id).select().single();if(E)throw E;return await a(),S}catch(b){throw console.error("Error updating document:",b),b}},deleteDocument:async y=>{try{console.log("Starting document deletion:",y);const{data:{user:b}}=await J.auth.getUser();if(!b)throw new Error("User not authenticated");console.log("User authenticated:",b.id);const{data:x,error:S}=await J.from("client_documents").select("id, title, created_by").eq("id",y).single();if(S)throw console.error("Error fetching document before delete:",S),new Error(`Cannot find document: ${S.message}`);if(!x)throw new Error("Document not found");console.log("Document found for deletion:",{id:x.id,title:x.title,created_by:x.created_by,current_user:b.id,can_delete:x.created_by===b.id});const{error:E}=await J.from("client_documents").delete().eq("id",y);if(E)throw console.error("Delete error details:",{message:E.message,details:E.details,hint:E.hint,code:E.code}),new Error(`Delete failed: ${E.message}`);console.log("Document deleted successfully"),await a()}catch(b){throw console.error("Error deleting document:",b),b}},duplicateDocument:async(y,b)=>{try{const x=await l(y);if(!x)throw new Error("Document not found");const{data:S}=await J.auth.getUser();if(!S.user)throw new Error("User not authenticated");const E={client_id:x.client_id,title:b,content:x.content,content_html:x.content_html,content_markdown:x.content_markdown,is_sensitive:x.is_sensitive,document_type:x.document_type,status:"draft",tags:[...x.tags||[]]};return await d(E)}catch(x){throw console.error("Error duplicating document:",x),x}},isEncryptionActive:()=>tm.isActive(),setEncryptionPassword:y=>{tm.setPassword(y)},clearEncryptionSession:()=>{tm.clearSession()}}}function Nat(e){const[t,n]=w.useState([]),[r,i]=w.useState(!1),[s,a]=w.useState(null),o=w.useCallback(async()=>{if(e)try{i(!0),a(null);const{data:u,error:d}=await J.from("document_versions").select("*").eq("document_id",e).order("version_number",{ascending:!1});if(d)throw d;const f=(u==null?void 0:u.map(h=>({...h,created_by_name:"User"})))||[];n(f)}catch(u){console.error("Error fetching versions:",u),a(u instanceof Error?u.message:"Failed to fetch versions")}finally{i(!1)}},[e]);return w.useEffect(()=>{e&&o()},[e,o]),{versions:t,loading:r,error:s,fetchVersions:o,getVersion:async u=>{try{const{data:d,error:f}=await J.from("document_versions").select("*").eq("id",u).single();if(f)throw f;return{...d,created_by_name:"User"}}catch(d){throw console.error("Error fetching version:",d),d}}}}function Tat(e){const[t,n]=w.useState([]),[r,i]=w.useState(!1),[s,a]=w.useState(null),o=w.useCallback(async()=>{if(e)try{i(!0),a(null);const{data:d,error:f}=await J.from("document_permissions").select("*").eq("document_id",e).eq("is_active",!0).order("granted_at",{ascending:!1});if(f)throw f;n(d||[])}catch(d){console.error("Error fetching permissions:",d),a(d instanceof Error?d.message:"Failed to fetch permissions")}finally{i(!1)}},[e]);return w.useEffect(()=>{e&&o()},[e,o]),{permissions:t,loading:r,error:s,fetchPermissions:o,grantPermission:async(d,f,h,p)=>{if(!e)throw new Error("Document ID is required");try{const{data:m}=await J.auth.getUser();if(!m.user)throw new Error("User not authenticated");const{error:g}=await J.from("document_permissions").insert({document_id:e,user_id:d,permission_level:f,role_type:h,granted_by:m.user.id,expires_at:p});if(g)throw g;await o()}catch(m){throw console.error("Error granting permission:",m),m}},revokePermission:async d=>{try{const{error:f}=await J.from("document_permissions").update({is_active:!1}).eq("id",d);if(f)throw f;await o()}catch(f){throw console.error("Error revoking permission:",f),f}}}}function Cat({clientId:e,onBack:t,className:n}){const[r,i]=w.useState(null),[s,a]=w.useState(!1),[o,l]=w.useState("view"),[u,d]=w.useState(!1),[f,h]=w.useState("setup"),[p,m]=w.useState(null),[g,v]=w.useState({client_id:e||"",title:"",content:{type:"doc",content:[]},content_html:"",content_markdown:"",is_sensitive:!1,document_type:"page",status:"draft",tags:[]}),[y,b]=w.useState(""),[x,S]=w.useState(""),{documents:E,loading:_,error:T,fetchDocuments:C,getDocumentsByClient:k,getDocument:A,addDocument:j,updateDocument:D,deleteDocument:P,duplicateDocument:M,isEncryptionActive:L,setEncryptionPassword:O}=_at(),{versions:B,loading:R}=Nat(r==null?void 0:r.id),{permissions:F,loading:I}=Tat(r==null?void 0:r.id);w.useEffect(()=>{(async()=>{try{e?await k(e):await C()}catch(pe){console.error("Error loading documents:",pe)}})()},[e,k,C]);const X=async()=>{try{e?await k(e):await C()}catch(Y){console.error("Error reloading documents:",Y)}},G=()=>{v({client_id:e||"",title:"",content:{type:"doc",content:[]},content_html:"",content_markdown:"",is_sensitive:!1,document_type:"page",status:"draft",tags:[]}),S(""),a(!0)},$=Y=>{O(Y),d(!1),p&&(p(),m(null))},be=(Y,pe=!1)=>{pe||!L()?(h(pe?"setup":"unlock"),m(()=>Y),d(!0)):Y()},je=async Y=>{if(Y.is_sensitive&&!L())be(async()=>{const pe=await A(Y.id);i(pe)});else{const pe=await A(Y.id);i(pe)}},Q=Y=>{i(Y),v({client_id:Y.client_id,title:Y.title,content:Y.content,content_html:Y.content_html||"",content_markdown:Y.content_markdown||"",is_sensitive:Y.is_sensitive,document_type:Y.document_type,status:Y.status,tags:Y.tags}),S(Y.content_html||""),l("edit")},K=async()=>{try{const Y={...g,content_html:x,tags:y?y.split(",").map(pe=>pe.trim()).filter(Boolean):g.tags};if(r&&o==="edit"){await D({...Y,id:r.id});const pe=await A(r.id);pe&&i(pe)}else{const pe=await j(Y);i(pe),a(!1)}l("view"),await X()}catch(Y){console.error("Error saving document:",Y)}},xe=async Y=>{try{console.log("Starting delete process for document:",Y),await P(Y),console.log("Delete successful, updating UI"),(r==null?void 0:r.id)===Y&&(i(null),l("view")),await X(),console.log("Document deleted successfully")}catch(pe){console.error("Error deleting document:",pe);const W=pe instanceof Error?pe.message:"Failed to delete document";alert(`Error deleting document: ${W}`)}},ae=async Y=>{try{const pe=`${Y.title} (Copy)`;await M(Y.id,pe),await X()}catch(pe){console.error("Error duplicating document:",pe)}},ue=(Y,pe)=>{v(W=>({...W,content:Y})),S(pe)},Ee=()=>{if(y.trim()){const Y=y.split(",").map(pe=>pe.trim()).filter(Boolean);v(pe=>({...pe,tags:[...new Set([...pe.tags||[],...Y])]})),b("")}},re=Y=>{v(pe=>({...pe,tags:(pe.tags||[]).filter(W=>W!==Y)}))},Je=e?E.filter(Y=>Y.client_id===e):E,De=e?null:E.reduce((Y,pe)=>{const W=`${pe.client_id}-${pe.client_name||"Unknown"}`;return Y[W]||(Y[W]={clientId:pe.client_id,clientName:pe.client_name||"Unknown Client",clientCompany:pe.client_company,documents:[]}),Y[W].documents.push(pe),Y},{}),tt=()=>e?c.jsx(gat,{documents:Je,loading:_,onDocumentClick:je,onEditDocument:Q,onDeleteDocument:xe,onDuplicateDocument:ae,onCreateNew:G,showClientFilter:!1,selectedClientId:e}):_?c.jsxs(Z,{children:[c.jsx(de,{children:c.jsx(he,{children:"Loading documents..."})}),c.jsx(ee,{children:c.jsx("div",{className:"space-y-6",children:[1,2,3].map(Y=>c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 animate-pulse"}),c.jsx("div",{className:"space-y-2",children:[1,2].map(pe=>c.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3 mb-2"}),c.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},pe))})]},Y))})})]}):!De||Object.keys(De).length===0?c.jsxs(Z,{children:[c.jsx(de,{children:c.jsxs(he,{className:"flex items-center gap-2",children:[c.jsx(bn,{className:"h-5 w-5"}),"All Documents"]})}),c.jsx(ee,{children:c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx(bn,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),c.jsx("h3",{className:"text-lg font-medium mb-2",children:"No documents found"}),c.jsx("p",{className:"text-sm mb-4",children:"Start by creating documentation for your clients."})]})})]}):c.jsx("div",{className:"space-y-6",children:Object.values(De).sort((Y,pe)=>Y.clientName.localeCompare(pe.clientName)).map(Y=>c.jsxs(Z,{children:[c.jsx(de,{children:c.jsxs(he,{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Gs,{className:"h-5 w-5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold",children:Y.clientName}),Y.clientCompany&&c.jsx("p",{className:"text-sm text-gray-500 font-normal",children:Y.clientCompany})]})]}),c.jsxs(Tt,{variant:"outline",children:[Y.documents.length," document",Y.documents.length!==1?"s":""]})]})}),c.jsx(ee,{children:c.jsx("div",{className:"space-y-3",children:Y.documents.sort((pe,W)=>new Date(W.updated_at).getTime()-new Date(pe.updated_at).getTime()).map(pe=>c.jsxs("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>je(pe),children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("h4",{className:"font-medium text-gray-900 truncate flex items-center gap-2",children:[c.jsx("span",{className:"text-lg",children:pe.document_type==="contract"?"":pe.document_type==="specification"?"":pe.document_type==="note"?"":""}),pe.title,pe.is_sensitive&&c.jsx(Uu,{className:"h-4 w-4 text-red-500"})]}),c.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500 mt-1",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(ht,{className:"h-3 w-3"}),v1(new Date(pe.updated_at))," ago"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(xa,{className:"h-3 w-3"}),pe.view_count," views"]}),c.jsxs("span",{children:[pe.word_count," words"]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[c.jsx(Tt,{className:Ve("text-xs",pe.status==="published"?"bg-green-100 text-green-700 border-green-200":pe.status==="draft"?"bg-yellow-100 text-yellow-700 border-yellow-200":"bg-gray-100 text-gray-700 border-gray-200"),children:pe.status}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx(H,{variant:"ghost",size:"sm",onClick:W=>{W.stopPropagation(),Q(pe)},children:c.jsx(ao,{className:"h-3 w-3"})}),c.jsx(H,{variant:"ghost",size:"sm",onClick:W=>{W.stopPropagation(),ae(pe)},children:c.jsx(CH,{className:"h-3 w-3"})}),c.jsx(H,{variant:"ghost",size:"sm",onClick:W=>{W.stopPropagation(),window.confirm("Are you sure you want to delete this document?")&&xe(pe.id)},className:"text-red-600 hover:text-red-700",children:c.jsx($i,{className:"h-3 w-3"})})]})]})]}),pe.tags.length>0&&c.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[c.jsx(o2,{className:"h-3 w-3 text-gray-400"}),c.jsxs("div",{className:"flex flex-wrap gap-1",children:[pe.tags.slice(0,3).map(W=>c.jsx(Tt,{variant:"secondary",className:"text-xs",children:W},W)),pe.tags.length>3&&c.jsxs(Tt,{variant:"secondary",className:"text-xs",children:["+",pe.tags.length-3," more"]})]})]})]},pe.id))})})]},Y.clientId))});return c.jsxs("div",{className:Ve("space-y-6",n),children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center gap-3",children:[t&&c.jsx(H,{variant:"ghost",size:"sm",onClick:t,children:c.jsx(QR,{className:"h-4 w-4"})}),c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[c.jsx(bn,{className:"h-6 w-6"}),"Client Documentation"]}),c.jsx("p",{className:"text-gray-600",children:e?"Manage documentation for this client":"Manage all client documentation"})]})]})}),T&&c.jsx(Z,{className:"border-red-200 bg-red-50",children:c.jsx(ee,{className:"pt-6",children:c.jsx("p",{className:"text-red-600",children:T})})}),r?c.jsxs(Z,{children:[c.jsx(de,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>i(null),children:c.jsx(QR,{className:"h-4 w-4"})}),c.jsxs("div",{children:[c.jsxs(he,{className:"flex items-center gap-2",children:[r.title,r.is_sensitive&&c.jsxs(Tt,{variant:"destructive",className:"text-xs",children:[c.jsx(Uu,{className:"h-3 w-3 mr-1"}),"Sensitive"]})]}),c.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mt-1",children:[c.jsxs("span",{children:["Type: ",r.document_type]}),c.jsxs("span",{children:["Status: ",r.status]}),c.jsxs("span",{children:["Words: ",r.word_count]}),c.jsxs("span",{children:["Views: ",r.view_count]})]})]})]}),c.jsxs("div",{className:"flex gap-2",children:[o==="view"&&c.jsxs(c.Fragment,{children:[c.jsxs(H,{variant:"outline",size:"sm",onClick:()=>Q(r),children:[c.jsx(ao,{className:"h-4 w-4 mr-1"}),"Edit"]}),c.jsxs(H,{variant:"outline",size:"sm",onClick:()=>l("preview"),children:[c.jsx(xa,{className:"h-4 w-4 mr-1"}),"Preview"]})]}),(o==="edit"||o==="preview")&&c.jsxs(c.Fragment,{children:[c.jsxs(H,{variant:"outline",size:"sm",onClick:()=>l("view"),children:[c.jsx(xa,{className:"h-4 w-4 mr-1"}),"View"]}),o==="edit"&&c.jsxs(H,{size:"sm",onClick:K,children:[c.jsx(qh,{className:"h-4 w-4 mr-1"}),"Save"]})]})]})]})}),c.jsx(ee,{children:c.jsxs(Gu,{defaultValue:"content",children:[c.jsxs(hc,{children:[c.jsx(ir,{value:"content",children:"Content"}),c.jsxs(ir,{value:"versions",children:[c.jsx(Kfe,{className:"h-4 w-4 mr-1"}),"Versions (",B.length,")"]}),c.jsxs(ir,{value:"permissions",children:[c.jsx(Ui,{className:"h-4 w-4 mr-1"}),"Permissions (",F.length,")"]})]}),c.jsx(Ft,{value:"content",className:"mt-6",children:o==="edit"?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"lg:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title"}),c.jsx(ce,{value:g.title,onChange:Y=>v(pe=>({...pe,title:Y.target.value})),placeholder:"Document title"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Type"}),c.jsxs("select",{value:g.document_type,onChange:Y=>v(pe=>({...pe,document_type:Y.target.value})),className:"w-full px-3 py-2 border rounded-lg","aria-label":"Document type",children:[c.jsx("option",{value:"page",children:"Page"}),c.jsx("option",{value:"note",children:"Note"}),c.jsx("option",{value:"contract",children:"Contract"}),c.jsx("option",{value:"specification",children:"Specification"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),c.jsxs("select",{value:g.status,onChange:Y=>v(pe=>({...pe,status:Y.target.value})),className:"w-full px-3 py-2 border rounded-lg","aria-label":"Document status",children:[c.jsx("option",{value:"draft",children:"Draft"}),c.jsx("option",{value:"published",children:"Published"}),c.jsx("option",{value:"archived",children:"Archived"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Security"}),c.jsx(H,{type:"button",variant:g.is_sensitive?"destructive":"outline",onClick:()=>v(Y=>({...Y,is_sensitive:!Y.is_sensitive})),className:"w-full justify-start",children:g.is_sensitive?c.jsxs(c.Fragment,{children:[c.jsx(Uu,{className:"h-4 w-4 mr-2"}),"Sensitive Document"]}):c.jsxs(c.Fragment,{children:[c.jsx(PH,{className:"h-4 w-4 mr-2"}),"Public Document"]})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tags"}),c.jsxs("div",{className:"flex gap-2 mb-2",children:[c.jsx(ce,{value:y,onChange:Y=>b(Y.target.value),placeholder:"Add tags (comma separated)",onKeyPress:Y=>Y.key==="Enter"&&Ee()}),c.jsx(H,{type:"button",variant:"outline",onClick:Ee,children:c.jsx(o2,{className:"h-4 w-4"})})]}),c.jsx("div",{className:"flex flex-wrap gap-1",children:(g.tags||[]).map(Y=>c.jsxs(Tt,{variant:"secondary",className:"text-xs",children:[Y,c.jsx("button",{type:"button",onClick:()=>re(Y),className:"ml-1 hover:text-red-600","aria-label":`Remove tag ${Y}`,children:c.jsx(wr,{className:"h-3 w-3"})})]},Y))})]}),c.jsx(Q$,{content:g.content,onChange:ue,onSave:K,isSensitive:g.is_sensitive,onSensitivityToggle:()=>v(Y=>({...Y,is_sensitive:!Y.is_sensitive})),placeholder:"Start writing your document..."})]}):o==="preview"?c.jsx(b7,{content:x}):c.jsx(b7,{content:r.content_html||""})}),c.jsx(Ft,{value:"versions",className:"mt-6",children:c.jsx("div",{className:"space-y-4",children:R?c.jsx("p",{children:"Loading versions..."}):B.length===0?c.jsx("p",{className:"text-gray-500",children:"No versions available"}):B.map(Y=>c.jsx(Z,{children:c.jsx(ee,{className:"pt-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs("h4",{className:"font-medium",children:["Version ",Y.version_number]}),c.jsxs("p",{className:"text-sm text-gray-500",children:[Y.change_summary,"  ",Y.created_by_name,"  ",new Date(Y.created_at).toLocaleDateString()]})]}),c.jsx(H,{variant:"outline",size:"sm",children:"View"})]})})},Y.id))})}),c.jsx(Ft,{value:"permissions",className:"mt-6",children:c.jsx("div",{className:"space-y-4",children:I?c.jsx("p",{children:"Loading permissions..."}):c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx(OH,{className:"h-5 w-5"}),c.jsx("h3",{className:"font-medium",children:"Document Access Control"})]}),F.length===0?c.jsx("p",{className:"text-gray-500",children:"No special permissions set. Using default access rules."}):c.jsx("div",{className:"space-y-2",children:F.map(Y=>c.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:Y.permission_level}),c.jsx("span",{className:"text-sm text-gray-500 ml-2",children:Y.role_type&&`(${Y.role_type})`})]}),c.jsx(Tt,{variant:"outline",children:Y.permission_level})]},Y.id))})]})})})]})})]}):tt(),c.jsx(Ree,{open:s,onOpenChange:a,children:c.jsxs(VD,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[c.jsxs(WD,{children:[c.jsx(KD,{children:"Create New Document"}),c.jsx(GD,{children:"Create a new document for client documentation."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title"}),c.jsx(ce,{value:g.title,onChange:Y=>v(pe=>({...pe,title:Y.target.value})),placeholder:"Document title"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Type"}),c.jsxs("select",{value:g.document_type,onChange:Y=>v(pe=>({...pe,document_type:Y.target.value})),className:"w-full px-3 py-2 border rounded-lg","aria-label":"Document type",children:[c.jsx("option",{value:"page",children:"Page"}),c.jsx("option",{value:"note",children:"Note"}),c.jsx("option",{value:"contract",children:"Contract"}),c.jsx("option",{value:"specification",children:"Specification"})]})]})]}),c.jsx(Q$,{content:g.content,onChange:ue,isSensitive:g.is_sensitive,onSensitivityToggle:()=>v(Y=>({...Y,is_sensitive:!Y.is_sensitive})),placeholder:"Start writing your document...",showSaveButton:!1,showPreviewButton:!1})]}),c.jsxs(qD,{children:[c.jsx(XD,{children:"Cancel"}),c.jsx(YD,{onClick:K,children:"Create Document"})]})]})}),c.jsx(Sat,{open:u,onOpenChange:Y=>{d(Y),Y||m(null)},mode:f,onPasswordSet:$})]})}function kat(){const{clients:e,loading:t,error:n,addClient:r,updateClient:i,deleteClient:s,archiveClient:a,activateClient:o}=Sn(),l=Wh(),[u,d]=w.useState(""),[f,h]=w.useState(!1),[p,m]=w.useState(null),[g,v]=w.useState("all"),[y,b]=w.useState(null),[x,S]=w.useState("clients");w.useEffect(()=>{l.clientModalOpen&&(h(!0),l.setClientModalOpen(!1))},[l.clientModalOpen,l]);const[E,_]=w.useState({name:"",email:"",phone:"",company:"",address:"",hourly_rate:void 0,currency:"SEK",status:"active",notes:""}),T=e.filter(M=>{var B,R;const L=M.name.toLowerCase().includes(u.toLowerCase())||((B=M.company)==null?void 0:B.toLowerCase().includes(u.toLowerCase()))||((R=M.email)==null?void 0:R.toLowerCase().includes(u.toLowerCase())),O=g==="all"||M.status===g;return L&&O}),C=async M=>{M.preventDefault();try{p?(await i({...E,id:p.id}),m(null)):await r(E),_({name:"",email:"",phone:"",company:"",address:"",hourly_rate:void 0,currency:"SEK",status:"active",notes:""}),h(!1)}catch(L){console.error("Error saving client:",L)}},k=M=>{m(M),_({name:M.name,email:M.email||"",phone:M.phone||"",company:M.company||"",address:M.address||"",hourly_rate:M.hourly_rate||void 0,currency:M.currency||"SEK",status:M.status,notes:M.notes||""}),h(!0)},A=async M=>{if(window.confirm("Are you sure you want to delete this client? This action cannot be undone."))try{await s(M)}catch(L){console.error("Error deleting client:",L)}},j=async M=>{try{await a(M)}catch(L){console.error("Error archiving client:",L)}},D=async M=>{try{await o(M)}catch(L){console.error("Error activating client:",L)}},P=M=>{switch(M){case"active":return{icon:vr,color:"text-green-600",bg:"bg-green-50 dark:bg-green-900/20"};case"inactive":return{icon:ht,color:"text-yellow-600",bg:"bg-yellow-50 dark:bg-yellow-900/20"};case"archived":return{icon:T0,color:"text-gray-600",bg:"bg-gray-50 dark:bg-gray-900/20"};default:return{icon:vr,color:"text-green-600",bg:"bg-green-50 dark:bg-green-900/20"}}};return t?c.jsx("div",{className:"space-y-6",children:c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Clients"}),c.jsx("p",{className:"text-muted-foreground",children:"Loading clients..."})]})})}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Clients"}),c.jsx("p",{className:"text-muted-foreground",children:"Manage your clients and track relationships"})]}),c.jsxs(H,{onClick:()=>h(!0),className:"flex items-center gap-2","data-testid":"new-client-btn",children:[c.jsx(nt,{className:"h-4 w-4"}),"Add Client"]})]}),n&&c.jsx(Z,{className:"border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-900/20",children:c.jsx(ee,{className:"pt-6",children:c.jsx("p",{className:"text-red-600 dark:text-red-400",children:n})})}),c.jsxs(Gu,{value:x,onValueChange:S,className:"w-full",children:[c.jsxs(hc,{className:"grid w-full grid-cols-2",children:[c.jsxs(ir,{value:"clients",className:"flex items-center gap-2",children:[c.jsx(Ui,{className:"h-4 w-4"}),"Clients"]}),c.jsxs(ir,{value:"documentation",className:"flex items-center gap-2",children:[c.jsx(ZR,{className:"h-4 w-4"}),"Documentation"]})]}),c.jsxs(Ft,{value:"clients",className:"space-y-6",children:[c.jsx(Z,{children:c.jsx(ee,{className:"pt-6",children:c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(Kh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx(ce,{placeholder:"Search clients...",value:u,onChange:M=>d(M.target.value),className:"pl-10"})]}),c.jsxs("select",{value:g,onChange:M=>v(M.target.value),className:"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Filter clients by status",children:[c.jsx("option",{value:"all",children:"All Statuses"}),c.jsx("option",{value:"active",children:"Active"}),c.jsx("option",{value:"inactive",children:"Inactive"}),c.jsx("option",{value:"archived",children:"Archived"})]})]})})}),f&&c.jsxs(Z,{children:[c.jsx(de,{children:c.jsx(he,{children:p?"Edit Client":"Add New Client"})}),c.jsx(ee,{children:c.jsxs("form",{onSubmit:C,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Name *"}),c.jsx(ce,{value:E.name,onChange:M=>_({...E,name:M.target.value}),required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Company"}),c.jsx(ce,{value:E.company,onChange:M=>_({...E,company:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),c.jsx(ce,{type:"email",value:E.email,onChange:M=>_({...E,email:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone"}),c.jsx(ce,{value:E.phone,onChange:M=>_({...E,phone:M.target.value})})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Address"}),c.jsx(ce,{value:E.address,onChange:M=>_({...E,address:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Hourly Rate (SEK)"}),c.jsx(ce,{type:"number",step:"0.01",value:E.hourly_rate||"",onChange:M=>_({...E,hourly_rate:M.target.value?parseFloat(M.target.value):void 0})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),c.jsxs("select",{value:E.status,onChange:M=>_({...E,status:M.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Client status",children:[c.jsx("option",{value:"active",children:"Active"}),c.jsx("option",{value:"inactive",children:"Inactive"}),c.jsx("option",{value:"archived",children:"Archived"})]})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes"}),c.jsx("textarea",{value:E.notes,onChange:M=>_({...E,notes:M.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[80px]",placeholder:"Additional notes about this client..."})]})]}),c.jsxs("div",{className:"flex gap-2 pt-4",children:[c.jsx(H,{type:"submit",children:p?"Update Client":"Add Client"}),c.jsx(H,{type:"button",variant:"outline",onClick:()=>{h(!1),m(null),_({name:"",email:"",phone:"",company:"",address:"",hourly_rate:void 0,currency:"SEK",status:"active",notes:""})},children:"Cancel"})]})]})})]}),T.length===0?c.jsx(Z,{children:c.jsx(ee,{className:"pt-6",children:c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Ui,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),c.jsx("h3",{className:"text-lg font-medium mb-2",children:"No clients found"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:u||g!=="all"?"Try adjusting your search or filter criteria.":"Get started by adding your first client."}),!u&&g==="all"&&c.jsxs(H,{onClick:()=>h(!0),children:[c.jsx(nt,{className:"h-4 w-4 mr-2"}),"Add Your First Client"]})]})})}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.map(M=>{const L=P(M.status),O=L.icon;return c.jsxs(Z,{className:"hover:shadow-lg transition-shadow",children:[c.jsx(de,{className:"pb-3",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx(he,{className:"text-lg",children:M.name}),M.company&&c.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1 mt-1",children:[c.jsx(Xj,{className:"h-3 w-3"}),M.company]})]}),c.jsxs("div",{className:`px-2 py-1 rounded-full flex items-center gap-1 ${L.bg}`,children:[c.jsx(O,{className:`h-3 w-3 ${L.color}`}),c.jsx("span",{className:`text-xs font-medium capitalize ${L.color}`,children:M.status})]})]})}),c.jsxs(ee,{className:"space-y-3",children:[M.email&&c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx(rhe,{className:"h-4 w-4 text-muted-foreground"}),c.jsx("span",{className:"truncate",children:M.email})]}),M.phone&&c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx(uhe,{className:"h-4 w-4 text-muted-foreground"}),c.jsx("span",{children:M.phone})]}),M.hourly_rate&&c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx(ht,{className:"h-4 w-4 text-muted-foreground"}),c.jsxs("span",{children:[le(M.hourly_rate),"/hour"]})]}),M.notes&&c.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:M.notes}),c.jsxs("div",{className:"flex gap-2 pt-2",children:[c.jsxs(H,{size:"sm",variant:"outline",onClick:()=>k(M),className:"flex-1",children:[c.jsx(ao,{className:"h-3 w-3 mr-1"}),"Edit"]}),c.jsxs(H,{size:"sm",variant:"outline",onClick:()=>{b(M),S("documentation")},className:"flex-1",children:[c.jsx(bn,{className:"h-3 w-3 mr-1"}),"Docs"]}),M.status==="active"?c.jsx(H,{size:"sm",variant:"outline",onClick:()=>j(M.id),children:c.jsx(NH,{className:"h-3 w-3"})}):c.jsx(H,{size:"sm",variant:"outline",onClick:()=>D(M.id),children:c.jsx(vr,{className:"h-3 w-3"})}),c.jsx(H,{size:"sm",variant:"outline",onClick:()=>A(M.id),className:"text-red-600 hover:text-red-700",children:c.jsx($i,{className:"h-3 w-3"})})]})]})]},M.id)})}),c.jsx(Z,{children:c.jsx(ee,{className:"pt-6",children:c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 text-center",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.filter(M=>M.status==="active").length}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Clients"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:e.filter(M=>M.status==="inactive").length}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Inactive Clients"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-gray-600",children:e.filter(M=>M.status==="archived").length}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Archived Clients"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold",children:e.length}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Clients"})]})]})})})]}),c.jsx(Ft,{value:"documentation",className:"space-y-6",children:c.jsxs(Z,{children:[c.jsxs(de,{children:[c.jsxs(he,{className:"flex items-center gap-2",children:[c.jsx(ZR,{className:"h-5 w-5"}),"Client Documentation",y&&c.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:[" ",y.name]})]}),c.jsx("p",{className:"text-muted-foreground",children:y?`Managing documentation for ${y.name}${y.company?` (${y.company})`:""}`:"Manage all client documentation"})]}),c.jsx(ee,{children:c.jsx(Cat,{clientId:y==null?void 0:y.id,onBack:y?()=>b(null):void 0})})]})})]})]})}function Aat({dateRange:e}){const{invoiceItems:t,loading:n}=xs(),{entries:r,loading:i}=si(),{clients:s}=Sn(),{projects:a}=Jn(),[o,l]=w.useState({totalRevenue:0,totalHours:0,activeClients:0,growthRate:0,averageHourlyRate:0,productivityScore:0});w.useEffect(()=>{if(!t||!r||n||i)return;const h=t.filter(D=>{const P=$s(D.invoice_date);return pc(P,{start:e.from,end:e.to})}),p=r.filter(D=>{const P=$s(D.date);return pc(P,{start:e.from,end:e.to})}),m=h.reduce((D,P)=>D+P.total_amount,0),g=p.reduce((D,P)=>D+P.hours,0),y=new Set([...h.map(D=>{const P=a.find(M=>M.id===D.project_id);return P==null?void 0:P.client_id}).filter(Boolean),...p.map(D=>{const P=a.find(M=>M.id===D.project_id);return P==null?void 0:P.client_id}).filter(Boolean)]).size,b=e.to.getTime()-e.from.getTime(),x=new Date(e.from.getTime()-b),S=new Date(e.to.getTime()-b),_=t.filter(D=>{const P=$s(D.invoice_date);return pc(P,{start:x,end:S})}).reduce((D,P)=>D+P.total_amount,0),T=_>0?(m-_)/_*100:0,C=g>0?m/g:0,A=Math.ceil((e.to.getTime()-e.from.getTime())/(1e3*60*60*24))*8,j=A>0?Math.min(g/A*100,100):0;l({totalRevenue:m,totalHours:g,activeClients:y,growthRate:T,averageHourlyRate:C,productivityScore:j})},[t,r,n,i,e,s,a]);const u=h=>{const p=Math.floor(h),m=Math.round((h-p)*60);return`${p}h ${m}m`};if(n||i)return c.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((h,p)=>c.jsxs(Z,{className:"animate-pulse",children:[c.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"}),c.jsx("div",{className:"h-4 w-4 bg-gray-200 rounded"})]}),c.jsxs(ee,{children:[c.jsx("div",{className:"h-8 bg-gray-200 rounded w-24 mb-1"}),c.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]},p))});const f=[{title:"Total Revenue",value:le(o.totalRevenue),description:`${o.growthRate>=0?"+":""}${o.growthRate.toFixed(1)}% vs previous period`,icon:mn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Total Hours",value:u(o.totalHours),description:"Time tracked this period",icon:ht,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Active Clients",value:o.activeClients.toString(),description:"Clients with activity",icon:Ui,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Avg Hourly Rate",value:le(o.averageHourlyRate),description:"Revenue per hour",icon:ul,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Productivity",value:`${o.productivityScore.toFixed(1)}%`,description:"Of expected work hours",icon:Ec,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Growth Trend",value:`${o.growthRate>=0?"+":""}${o.growthRate.toFixed(1)}%`,description:"Revenue growth rate",icon:ti,color:o.growthRate>=0?"text-green-600":"text-red-600",bgColor:o.growthRate>=0?"bg-green-100":"bg-red-100"}];return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:f.map(h=>{const p=h.icon;return c.jsxs(Z,{className:"hover:shadow-md transition-shadow",children:[c.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c.jsx(he,{className:"text-sm font-medium text-gray-600",children:h.title}),c.jsx("div",{className:`p-2 rounded-full ${h.bgColor}`,children:c.jsx(p,{className:`h-4 w-4 ${h.color}`})})]}),c.jsxs(ee,{children:[c.jsx("div",{className:"text-2xl font-bold",children:h.value}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.description})]})]},h.title)})}),c.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[c.jsxs(Z,{children:[c.jsx(de,{children:c.jsxs(he,{className:"flex items-center gap-2",children:[c.jsx(Ks,{className:"h-5 w-5"}),"Revenue Summary"]})}),c.jsxs(ee,{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Total Revenue"}),c.jsx("span",{className:"font-semibold",children:le(o.totalRevenue)})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Average Hourly Rate"}),c.jsx("span",{className:"font-semibold",children:le(o.averageHourlyRate)})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Growth Rate"}),c.jsxs("span",{className:`font-semibold ${o.growthRate>=0?"text-green-600":"text-red-600"}`,children:[o.growthRate>=0?"+":"",o.growthRate.toFixed(1),"%"]})]})]})]}),c.jsxs(Z,{children:[c.jsx(de,{children:c.jsxs(he,{className:"flex items-center gap-2",children:[c.jsx(Ec,{className:"h-5 w-5"}),"Activity Summary"]})}),c.jsxs(ee,{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Total Hours"}),c.jsx("span",{className:"font-semibold",children:u(o.totalHours)})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Active Clients"}),c.jsx("span",{className:"font-semibold",children:o.activeClients})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Productivity Score"}),c.jsxs("span",{className:"font-semibold",children:[o.productivityScore.toFixed(1),"%"]})]})]})]})]})]})}function jat({dateRange:e}){const{invoiceItems:t,loading:n}=xs(),{clients:r}=Sn(),{projects:i}=Jn(),[s,a]=w.useState({totalRevenue:0,paidRevenue:0,pendingRevenue:0,overdueRevenue:0,averageInvoiceValue:0,invoiceCount:0,growthRate:0,collectionRate:0}),[o,l]=w.useState([]);if(w.useEffect(()=>{if(!t||n)return;const d=t.filter(k=>{const A=$s(k.invoice_date);return pc(A,{start:e.from,end:e.to})}),f=d.reduce((k,A)=>k+A.total_amount,0),h=d.filter(k=>k.status==="paid").reduce((k,A)=>k+A.total_amount,0),p=d.filter(k=>k.status==="sent").reduce((k,A)=>k+A.total_amount,0),m=d.filter(k=>{if(!k.due_date)return!1;const A=$s(k.due_date);return k.status==="sent"&&A<new Date}).reduce((k,A)=>k+A.total_amount,0),g=d.length>0?f/d.length:0,v=f>0?h/f*100:0,y=e.to.getTime()-e.from.getTime(),b=new Date(e.from.getTime()-y),x=new Date(e.to.getTime()-y),E=t.filter(k=>{const A=$s(k.invoice_date);return pc(A,{start:b,end:x})}).reduce((k,A)=>k+A.total_amount,0),_=E>0?(f-E)/E*100:0;a({totalRevenue:f,paidRevenue:h,pendingRevenue:p,overdueRevenue:m,averageInvoiceValue:g,invoiceCount:d.length,growthRate:_,collectionRate:v});const T=new Map;d.forEach(k=>{const A=i.find(L=>L.id===k.project_id),j=r.find(L=>L.id===(A==null?void 0:A.client_id)),D=(j==null?void 0:j.id)||"unknown",P=(j==null?void 0:j.name)||"Unknown Client",M=T.get(D)||{revenue:0,invoiceCount:0};T.set(D,{revenue:M.revenue+k.total_amount,invoiceCount:M.invoiceCount+1,name:P})});const C=Array.from(T.entries()).map(([k,A])=>({clientId:k,clientName:A.name,revenue:A.revenue,invoiceCount:A.invoiceCount,percentage:f>0?A.revenue/f*100:0}));C.sort((k,A)=>A.revenue-k.revenue),l(C)},[t,n,e,r,i]),n)return c.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((d,f)=>c.jsxs(Z,{className:"animate-pulse",children:[c.jsx(de,{className:"space-y-0 pb-2",children:c.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})}),c.jsxs(ee,{children:[c.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-2"}),c.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"})]})]},f))});const u=[{title:"Total Revenue",value:le(s.totalRevenue),description:`${s.growthRate>=0?"+":""}${s.growthRate.toFixed(1)}% vs previous period`,icon:mn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Collected Revenue",value:le(s.paidRevenue),description:`${s.collectionRate.toFixed(1)}% collection rate`,icon:ul,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Pending Revenue",value:le(s.pendingRevenue),description:"Awaiting payment",icon:At,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Average Invoice",value:le(s.averageInvoiceValue),description:`${s.invoiceCount} invoices`,icon:mn,color:"text-purple-600",bgColor:"bg-purple-100"}];return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:u.map(d=>{const f=d.icon;return c.jsxs(Z,{className:"hover:shadow-md transition-shadow",children:[c.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c.jsx(he,{className:"text-sm font-medium text-gray-600",children:d.title}),c.jsx("div",{className:`p-2 rounded-full ${d.bgColor}`,children:c.jsx(f,{className:`h-4 w-4 ${d.color}`})})]}),c.jsxs(ee,{children:[c.jsx("div",{className:"text-2xl font-bold",children:d.value}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:d.description})]})]},d.title)})}),s.growthRate!==0&&c.jsx(Z,{children:c.jsxs(de,{children:[c.jsxs(he,{className:"flex items-center gap-2",children:[s.growthRate>=0?c.jsx(ti,{className:"h-5 w-5 text-green-600"}):c.jsx(ob,{className:"h-5 w-5 text-red-600"}),"Revenue Trend"]}),c.jsxs(gr,{children:[s.growthRate>=0?"Revenue is growing":"Revenue has decreased"," by"," ",Math.abs(s.growthRate).toFixed(1),"% compared to the previous period"]})]})}),s.overdueRevenue>0&&c.jsx(Z,{className:"border-red-200 bg-red-50",children:c.jsxs(de,{children:[c.jsx(he,{className:"text-red-700",children:"Overdue Revenue"}),c.jsxs(gr,{className:"text-red-600",children:["You have ",le(s.overdueRevenue)," in overdue invoices that need attention"]})]})}),c.jsxs(Z,{children:[c.jsxs(de,{children:[c.jsx(he,{children:"Revenue by Client"}),c.jsx(gr,{children:"Revenue distribution across your clients for the selected period"})]}),c.jsx(ee,{children:o.length>0?c.jsxs("div",{className:"space-y-4",children:[o.slice(0,10).map(d=>c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"font-medium truncate",children:d.clientName}),c.jsxs("p",{className:"text-sm text-gray-500",children:[d.invoiceCount," invoice",d.invoiceCount!==1?"s":""]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[d.percentage.toFixed(1),"%"]}),c.jsx("span",{className:"font-medium",children:le(d.revenue)})]})]},d.clientId)),o.length>10&&c.jsxs("p",{className:"text-sm text-gray-500 text-center pt-2 border-t",children:["And ",o.length-10," more clients..."]})]}):c.jsx("div",{className:"text-center py-8 text-gray-500",children:"No revenue data found for the selected period"})})]}),c.jsxs(Z,{children:[c.jsxs(de,{children:[c.jsx(he,{children:"Period Summary"}),c.jsxs(gr,{children:["Revenue summary from ",xd(e.from,"MMM d, yyyy")," to ",xd(e.to,"MMM d, yyyy")]})]}),c.jsx(ee,{children:c.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600",children:le(s.paidRevenue)}),c.jsx("p",{className:"text-sm text-gray-500",children:"Collected"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600",children:le(s.pendingRevenue)}),c.jsx("p",{className:"text-sm text-gray-500",children:"Pending"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-red-600",children:le(s.overdueRevenue)}),c.jsx("p",{className:"text-sm text-gray-500",children:"Overdue"})]})]})})]})]})}function Oat({dateRange:e}){const{entries:t,loading:n}=si(),{projects:r}=Jn(),{clients:i}=Sn(),[s,a]=w.useState({totalHours:0,billableHours:0,billableRate:0,averageHoursPerDay:0,totalSessions:0,averageSessionLength:0,estimatedRevenue:0,productivity:0}),[o,l]=w.useState([]),[u,d]=w.useState([]);w.useEffect(()=>{if(!t||n)return;const p=t.filter(M=>{const L=$s(M.date);return pc(L,{start:e.from,end:e.to})}),m=p.reduce((M,L)=>M+L.hours,0),g=m,v=g>0?100:0,y=Math.max(1,Math.ceil((e.to.getTime()-e.from.getTime())/(1e3*60*60*24))),b=m/y,x=p.length,S=x>0?m/x:0,E=1e3,_=g*E,C=y*8,k=C>0?m/C*100:0;a({totalHours:m,billableHours:g,billableRate:v,averageHoursPerDay:b,totalSessions:x,averageSessionLength:S,estimatedRevenue:_,productivity:Math.min(k,100)});const A=new Map;p.forEach(M=>{const L=r.find(G=>G.id===M.project_id),O=i.find(G=>G.id===(L==null?void 0:L.client_id)),B=(L==null?void 0:L.id)||"unknown",R=(L==null?void 0:L.name)||"Unknown Project",F=(O==null?void 0:O.name)||"Unknown Client",I=(L==null?void 0:L.hourly_rate)||E,X=A.get(B)||{hours:0,name:R,clientName:F,rate:I};A.set(B,{...X,hours:X.hours+M.hours})});const j=Array.from(A.entries()).map(([M,L])=>({projectId:M,projectName:L.name,clientName:L.clientName,hours:L.hours,percentage:m>0?L.hours/m*100:0,estimatedValue:L.hours*L.rate}));j.sort((M,L)=>L.hours-M.hours),l(j);const D=new Map;p.forEach(M=>{const L=M.date,O=D.get(L)||{hours:0,sessions:0};D.set(L,{hours:O.hours+M.hours,sessions:O.sessions+1})});const P=Array.from(D.entries()).map(([M,L])=>({date:M,hours:L.hours,sessions:L.sessions}));P.sort((M,L)=>M.date.localeCompare(L.date)),d(P)},[t,n,e,r,i]);const f=p=>{const m=Math.floor(p),g=Math.round((p-m)*60);return`${m}h ${g}m`};if(n)return c.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((p,m)=>c.jsxs(Z,{className:"animate-pulse",children:[c.jsx(de,{className:"space-y-0 pb-2",children:c.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})}),c.jsxs(ee,{children:[c.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-2"}),c.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"})]})]},m))});const h=[{title:"Total Hours",value:f(s.totalHours),description:`${s.totalSessions} work sessions`,icon:ht,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Daily Average",value:f(s.averageHoursPerDay),description:"Per work day",icon:At,color:"text-green-600",bgColor:"bg-green-100"},{title:"Estimated Revenue",value:le(s.estimatedRevenue),description:"Based on tracked time",icon:ti,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Productivity",value:`${s.productivity.toFixed(1)}%`,description:"Of expected work hours",icon:Ec,color:"text-orange-600",bgColor:"bg-orange-100"}];return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:h.map(p=>{const m=p.icon;return c.jsxs(Z,{className:"hover:shadow-md transition-shadow",children:[c.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c.jsx(he,{className:"text-sm font-medium text-gray-600",children:p.title}),c.jsx("div",{className:`p-2 rounded-full ${p.bgColor}`,children:c.jsx(m,{className:`h-4 w-4 ${p.color}`})})]}),c.jsxs(ee,{children:[c.jsx("div",{className:"text-2xl font-bold",children:p.value}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:p.description})]})]},p.title)})}),c.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[c.jsxs(Z,{children:[c.jsxs(de,{children:[c.jsxs(he,{className:"flex items-center gap-2",children:[c.jsx(Ec,{className:"h-5 w-5"}),"Productivity Overview"]}),c.jsx(gr,{children:"Your work patterns and efficiency metrics"})]}),c.jsx(ee,{className:"space-y-4",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-lg font-semibold",children:f(s.averageSessionLength)}),c.jsx("p",{className:"text-xs text-gray-500",children:"Avg Session"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-lg font-semibold",children:[s.productivity.toFixed(1),"%"]}),c.jsx("p",{className:"text-xs text-gray-500",children:"Productivity"})]})]})})]}),c.jsxs(Z,{children:[c.jsxs(de,{children:[c.jsx(he,{children:"Recent Trends"}),c.jsx(gr,{children:"Daily time tracking patterns"})]}),c.jsx(ee,{children:u.length>0?c.jsx("div",{className:"space-y-2",children:u.slice(-7).map(p=>c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"text-gray-500",children:xd($s(p.date),"MMM d")}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{children:f(p.hours)}),c.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[p.sessions," sessions"]})]})]},p.date))}):c.jsx("div",{className:"text-center py-4 text-gray-500",children:"No time data for selected period"})})]})]}),c.jsxs(Z,{children:[c.jsxs(de,{children:[c.jsx(he,{children:"Time by Project"}),c.jsx(gr,{children:"How you've allocated your time across different projects"})]}),c.jsx(ee,{children:o.length>0?c.jsxs("div",{className:"space-y-4",children:[o.slice(0,10).map(p=>c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"font-medium truncate",children:p.projectName}),c.jsx("p",{className:"text-sm text-gray-500",children:p.clientName})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"font-medium",children:f(p.hours)}),c.jsx("div",{className:"text-xs text-gray-500",children:le(p.estimatedValue)})]}),c.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[p.percentage.toFixed(1),"%"]})]})]},p.projectId)),o.length>10&&c.jsxs("p",{className:"text-sm text-gray-500 text-center pt-2 border-t",children:["And ",o.length-10," more projects..."]})]}):c.jsx("div",{className:"text-center py-8 text-gray-500",children:"No time entries found for the selected period"})})]})]})}function Pat({dateRange:e}){const{clients:t}=Sn(),{projects:n}=Jn(),{invoiceItems:r,loading:i}=xs(),{entries:s,loading:a}=si(),[o,l]=w.useState({totalClients:0,activeClients:0,newClients:0,retentionRate:0,averageProjectValue:0}),[u,d]=w.useState([]);w.useEffect(()=>{if(!t||!n||!r||!s||i||a)return;const g=r.filter(j=>{const D=$s(j.invoice_date);return pc(D,{start:e.from,end:e.to})}),v=s.filter(j=>{const D=$s(j.date);return pc(D,{start:e.from,end:e.to})}),y=t.length,x=new Set([...g.map(j=>{const D=n.find(P=>P.id===j.project_id);return D==null?void 0:D.client_id}).filter(Boolean),...v.map(j=>{const D=n.find(P=>P.id===j.project_id);return D==null?void 0:D.client_id}).filter(Boolean)]).size,S=0,E=y>0?x/y*100:0,_=g.reduce((j,D)=>j+D.total_amount,0),T=new Set(g.map(j=>j.project_id)).size,C=T>0?_/T:0;l({totalClients:y,activeClients:x,newClients:S,retentionRate:E,averageProjectValue:C});const k=new Map;t.forEach(j=>{k.set(j.id,{name:j.name,revenue:0,hours:0,projects:new Set,invoices:0,lastActivity:new Date(0)})}),g.forEach(j=>{const D=n.find(P=>P.id===j.project_id);if(D!=null&&D.client_id&&j.project_id&&k.has(D.client_id)){const P=k.get(D.client_id);P.revenue+=j.total_amount,P.projects.add(j.project_id),P.invoices+=1;const M=$s(j.invoice_date);M>P.lastActivity&&(P.lastActivity=M)}}),v.forEach(j=>{const D=n.find(P=>P.id===j.project_id);if(D!=null&&D.client_id&&k.has(D.client_id)){const P=k.get(D.client_id);P.hours+=j.hours,P.projects.add(j.project_id);const M=$s(j.date);M>P.lastActivity&&(P.lastActivity=M)}});const A=Array.from(k.entries()).map(([j,D])=>{const P=D.projects.size,M=P>0?D.revenue/P:0,L=v8e(new Date,D.lastActivity);let O="inactive",B=0;return(D.revenue>0||D.hours>0)&&(L<=30?(O="active",B=90-Math.min(L*2,40)):L<=90?(O="at-risk",B=50-Math.min((L-30)*.5,25)):(O="inactive",B=Math.max(25-(L-90)*.1,0))),{clientId:j,clientName:D.name,revenue:D.revenue,hours:D.hours,projects:P,invoices:D.invoices,avgProjectValue:M,lastActivity:D.lastActivity.toISOString(),status:O,healthScore:Math.round(B)}});A.sort((j,D)=>j.revenue!==D.revenue?D.revenue-j.revenue:D.healthScore-j.healthScore),d(A)},[t,n,r,s,i,a,e]);const f=g=>{const v=Math.floor(g),y=Math.round((g-v)*60);return`${v}h ${y}m`},h=g=>{switch(g){case"active":return"bg-green-500";case"at-risk":return"bg-yellow-500";case"inactive":return"bg-red-500";default:return"bg-gray-500"}},p=g=>g>=90?"w-full":g>=80?"w-5/6":g>=70?"w-4/6":g>=60?"w-3/6":g>=50?"w-2/6":g>=25?"w-1/6":"w-1/12";if(i||a)return c.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((g,v)=>c.jsxs(Z,{className:"animate-pulse",children:[c.jsx(de,{className:"space-y-0 pb-2",children:c.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})}),c.jsxs(ee,{children:[c.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-2"}),c.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"})]})]},v))});const m=[{title:"Total Clients",value:o.totalClients.toString(),description:`${o.activeClients} active this period`,icon:Ui,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Client Retention",value:`${o.retentionRate.toFixed(1)}%`,description:"Activity retention rate",icon:ti,color:"text-green-600",bgColor:"bg-green-100"},{title:"New Clients",value:o.newClients.toString(),description:"Acquired this period",icon:a2,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Avg Project Value",value:le(o.averageProjectValue),description:"Per project average",icon:mn,color:"text-orange-600",bgColor:"bg-orange-100"}];return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:m.map(g=>{const v=g.icon;return c.jsxs(Z,{className:"hover:shadow-md transition-shadow",children:[c.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c.jsx(he,{className:"text-sm font-medium text-gray-600",children:g.title}),c.jsx("div",{className:`p-2 rounded-full ${g.bgColor}`,children:c.jsx(v,{className:`h-4 w-4 ${g.color}`})})]}),c.jsxs(ee,{children:[c.jsx("div",{className:"text-2xl font-bold",children:g.value}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:g.description})]})]},g.title)})}),c.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[c.jsxs(Z,{className:"bg-green-50 border-green-200",children:[c.jsx(de,{children:c.jsx(he,{className:"text-green-700",children:"Active Clients"})}),c.jsxs(ee,{children:[c.jsx("div",{className:"text-3xl font-bold text-green-600",children:u.filter(g=>g.status==="active").length}),c.jsx("p",{className:"text-sm text-green-600",children:"Recent activity within 30 days"})]})]}),c.jsxs(Z,{className:"bg-yellow-50 border-yellow-200",children:[c.jsx(de,{children:c.jsxs(he,{className:"text-yellow-700 flex items-center gap-2",children:[c.jsx(Za,{className:"h-4 w-4"}),"At-Risk Clients"]})}),c.jsxs(ee,{children:[c.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:u.filter(g=>g.status==="at-risk").length}),c.jsx("p",{className:"text-sm text-yellow-600",children:"No activity in 30-90 days"})]})]}),c.jsxs(Z,{className:"bg-red-50 border-red-200",children:[c.jsx(de,{children:c.jsx(he,{className:"text-red-700",children:"Inactive Clients"})}),c.jsxs(ee,{children:[c.jsx("div",{className:"text-3xl font-bold text-red-600",children:u.filter(g=>g.status==="inactive").length}),c.jsx("p",{className:"text-sm text-red-600",children:"No activity in 90+ days"})]})]})]}),c.jsxs(Z,{children:[c.jsxs(de,{children:[c.jsx(he,{children:"Client Performance"}),c.jsx(gr,{children:"Detailed performance metrics for each client"})]}),c.jsx(ee,{children:u.length>0?c.jsxs("div",{className:"space-y-4",children:[u.slice(0,15).map(g=>c.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[c.jsx("div",{className:`w-3 h-3 rounded-full ${h(g.status)}`}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"font-medium truncate",children:g.clientName}),c.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[c.jsxs("span",{children:[g.projects," projects"]}),c.jsxs("span",{children:[g.invoices," invoices"]}),c.jsx("span",{children:f(g.hours)})]})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"font-medium",children:le(g.revenue)}),c.jsxs("div",{className:"text-xs text-gray-500",children:["Avg: ",le(g.avgProjectValue)]})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-sm font-medium",children:[g.healthScore,"%"]}),c.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:c.jsx("div",{className:`h-full bg-blue-500 transition-all ${p(g.healthScore)}`})})]}),c.jsx("span",{className:`text-xs px-2 py-1 rounded capitalize ${g.status==="active"?"bg-green-100 text-green-700":g.status==="at-risk"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:g.status})]})]},g.clientId)),u.length>15&&c.jsx("div",{className:"text-center pt-4 border-t",children:c.jsxs(H,{variant:"outline",size:"sm",children:["View All ",u.length," Clients"]})})]}):c.jsx("div",{className:"text-center py-8 text-gray-500",children:"No client data found for the selected period"})})]})]})}function Iat(){const[e,t]=w.useState({from:YN(new Date),to:vx(new Date)}),[n,r]=w.useState("overview"),i=[{label:"This Month",range:{from:YN(new Date),to:vx(new Date)}},{label:"Last Month",range:{from:YN(Ev(new Date,30)),to:vx(Ev(new Date,30))}},{label:"Last 30 Days",range:{from:Ev(new Date,30),to:new Date}},{label:"Last 90 Days",range:{from:Ev(new Date,90),to:new Date}},{label:"This Year",range:{from:new Date(new Date().getFullYear(),0,1),to:new Date(new Date().getFullYear(),11,31)}}],s=[{id:"overview",label:"Overview",icon:eo},{id:"revenue",label:"Revenue",icon:mn},{id:"time",label:"Time & Productivity",icon:ht},{id:"clients",label:"Client Analytics",icon:Ui}];return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Business Analytics"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive insights and reports for your consulting business"})]}),c.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[c.jsx(Rfe,{className:"h-4 w-4"}),c.jsxs("span",{children:[xd(e.from,"MMM d")," - ",xd(e.to,"MMM d, yyyy")]})]})]}),c.jsxs(Z,{children:[c.jsxs(de,{children:[c.jsxs(he,{className:"flex items-center gap-2",children:[c.jsx(At,{className:"h-5 w-5"}),"Date Range"]}),c.jsx(gr,{children:"Select a date range to analyze your business performance"})]}),c.jsx(ee,{children:c.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(a=>c.jsx(H,{variant:e.from.getTime()===a.range.from.getTime()&&e.to.getTime()===a.range.to.getTime()?"default":"outline",size:"sm",onClick:()=>t(a.range),className:"text-xs",children:a.label},a.label))})})]}),c.jsx("div",{className:"flex space-x-1 rounded-lg bg-gray-100 p-1",children:s.map(a=>{const o=a.icon;return c.jsxs(H,{variant:n===a.id?"default":"ghost",className:"flex-1",onClick:()=>r(a.id),children:[c.jsx(o,{className:"h-4 w-4 mr-2"}),a.label]},a.id)})}),c.jsxs("div",{className:"space-y-6",children:[n==="overview"&&c.jsx(Aat,{dateRange:e}),n==="revenue"&&c.jsx(jat,{dateRange:e}),n==="time"&&c.jsx(Oat,{dateRange:e}),n==="clients"&&c.jsx(Pat,{dateRange:e})]})]})}function Dat({summary:e,loading:t}){const n=({className:i})=>c.jsx("span",{className:`font-bold ${i}`,children:"SEK"});if(t)return c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(i=>c.jsxs(Z,{className:"animate-pulse",children:[c.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c.jsx(he,{className:"text-sm font-medium",children:c.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"})}),c.jsx("div",{className:"h-4 w-4 bg-gray-200 rounded"})]}),c.jsxs(ee,{children:[c.jsx("div",{className:"h-8 bg-gray-200 rounded w-24 mb-1"}),c.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]},i))});const r=[{title:"Unbilled Work",value:le(e.totalUnbilled),description:`${e.itemCount} items pending`,icon:ht,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Invoiced",value:le(e.totalSent),description:"Awaiting payment",icon:Ks,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Paid",value:le(e.totalPaid),description:"Completed revenue",icon:n,color:"text-green-600",bgColor:"bg-green-100"},{title:"Active Clients",value:e.clientCount.toString(),description:"With unbilled work",icon:Ui,color:"text-purple-600",bgColor:"bg-purple-100"}];return c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:r.map(i=>{const s=i.icon;return c.jsxs(Z,{className:"hover:shadow-md transition-shadow",children:[c.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c.jsx(he,{className:"text-sm font-medium text-gray-600",children:i.title}),c.jsx("div",{className:`p-2 rounded-full ${i.bgColor}`,children:c.jsx(s,{className:`h-4 w-4 ${i.color}`})})]}),c.jsxs(ee,{children:[c.jsx("div",{className:"text-2xl font-bold",children:i.value}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i.description})]})]},i.title)})})}function Mat({clients:e,loading:t,onClientClick:n}){if(t)return c.jsxs(Z,{className:"h-full flex flex-col",children:[c.jsx(de,{children:c.jsx(he,{className:"text-lg",children:"Client Overview"})}),c.jsx(ee,{className:"flex-1",children:c.jsx("div",{className:"space-y-4 h-full",children:[1,2,3,4,5].map(i=>c.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg animate-pulse",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded w-32 mb-2"}),c.jsx("div",{className:"h-3 bg-gray-200 rounded w-20"})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded w-16 mb-1"}),c.jsx("div",{className:"h-3 bg-gray-200 rounded w-12"})]})]},i))})})]});const r=e.slice(0,8);return c.jsxs(Z,{className:"h-full flex flex-col",children:[c.jsxs(de,{className:"flex flex-row items-center justify-between flex-shrink-0",children:[c.jsx(he,{className:"text-lg",children:"Client Overview"}),c.jsx(H,{variant:"ghost",size:"sm",children:c.jsx(tO,{className:"h-4 w-4"})})]}),c.jsxs(ee,{className:"flex-1 flex flex-col",children:[c.jsx("div",{className:"space-y-3 flex-1 overflow-y-auto",children:r.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-500 flex-1 flex flex-col justify-center",children:[c.jsx(Hw,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),c.jsx("p",{children:"No client data available"}),c.jsx("p",{className:"text-sm",children:"Add some invoice items to see client overview"})]}):r.map(i=>c.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>n==null?void 0:n(i.client_id),children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("h4",{className:"font-medium truncate",children:i.client_name}),i.company&&c.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:i.company})]}),c.jsxs("div",{className:"flex gap-3 text-sm text-gray-600",children:[c.jsxs("span",{children:[i.itemCount," items"]}),c.jsxs("span",{children:[i.projectCount," projects"]})]})]}),c.jsxs("div",{className:"text-right",children:[i.totalUnbilled>0&&c.jsxs("div",{className:"flex items-center gap-1 text-orange-600 font-medium mb-1",children:[c.jsx("span",{className:"text-xs text-muted-foreground",children:"SEK"}),c.jsx("span",{className:"text-sm",children:le(i.totalUnbilled)})]}),c.jsxs("div",{className:"text-xs text-gray-500",children:["Total: ",le(i.totalPaid+i.totalSent+i.totalUnbilled)]})]})]},i.client_id))}),e.length>8&&c.jsx("div",{className:"mt-3 flex-shrink-0",children:c.jsxs(H,{variant:"outline",className:"w-full",size:"sm",children:["View All Clients (",e.length,")"]})})]})]})}function Rat({items:e,loading:t,onItemClick:n,clients:r,projects:i}){if(t)return c.jsxs(Z,{className:"h-full flex flex-col",children:[c.jsx(de,{children:c.jsx(he,{className:"text-lg",children:"Recent Items"})}),c.jsx(ee,{className:"flex-1",children:c.jsx("div",{className:"space-y-4 h-full",children:[1,2,3,4,5,6].map(u=>c.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg animate-pulse",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded w-48 mb-2"}),c.jsx("div",{className:"h-3 bg-gray-200 rounded w-32"})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded w-16 mb-1"}),c.jsx("div",{className:"h-3 bg-gray-200 rounded w-12"})]})]},u))})})]});const s=e.slice(0,10),a=u=>{switch(u){case"draft":return"text-orange-600 bg-orange-100";case"sent":return"text-blue-600 bg-blue-100";case"paid":return"text-green-600 bg-green-100";case"overdue":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},o=u=>{const d=r.find(f=>f.id===u);return(d==null?void 0:d.name)||"Unknown Client"},l=u=>i.find(f=>f.id===u)||{name:"Unknown Project",color:"#9CA3AF"};return c.jsxs(Z,{className:"h-full flex flex-col",children:[c.jsxs(de,{className:"flex flex-row items-center justify-between flex-shrink-0",children:[c.jsx(he,{className:"text-lg",children:"Recent Items"}),c.jsx(H,{variant:"ghost",size:"sm",children:c.jsx(tO,{className:"h-4 w-4"})})]}),c.jsxs(ee,{className:"flex-1 flex flex-col",children:[c.jsx("div",{className:"space-y-3 flex-1 overflow-y-auto",children:s.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-500 flex-1 flex flex-col justify-center",children:[c.jsx(ht,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),c.jsx("p",{children:"No invoice items yet"}),c.jsx("p",{className:"text-sm",children:"Create your first invoice item to track unbilled work"})]}):s.map(u=>{const d=o(u.client_id||""),f=l(u.project_id||"");return c.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>n==null?void 0:n(u.id),children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0 bg-gray-300",style:{backgroundColor:f.color||"#9CA3AF"}}),c.jsx("h4",{className:"font-medium truncate",children:u.description})]}),c.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[c.jsx("span",{children:d}),c.jsx("span",{children:""}),c.jsx("span",{children:f.name}),c.jsx("span",{children:""}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(At,{className:"h-3 w-3"}),new Date(u.invoice_date).toLocaleDateString()]})]})]}),c.jsxs("div",{className:"text-right flex flex-col items-end gap-1",children:[c.jsxs("div",{className:"flex items-center gap-1 font-medium",children:[c.jsx("span",{className:"text-xs text-muted-foreground",children:"SEK"}),c.jsx("span",{children:le(u.total_amount)})]}),c.jsx("span",{className:`px-2 py-1 rounded text-xs ${a(u.status)}`,children:u.status})]})]},u.id)})}),e.length>10&&c.jsx("div",{className:"mt-3 flex-shrink-0",children:c.jsxs(H,{variant:"outline",className:"w-full",size:"sm",children:["View All Items (",e.length,")"]})})]})]})}function Lat({onCreateInvoiceItem:e,onCreateFromTime:t,onMarkAsInvoiced:n,onMarkAsPaid:r,onExportToFortnox:i,onExportPlainText:s}){const a=[{title:"New Invoice Item",description:"Create manual invoice item",icon:nt,onClick:e,color:"text-blue-600 bg-blue-100",disabled:!1},{title:"From Time Entries",description:"Convert time to invoice items",icon:ht,onClick:t,color:"text-green-600 bg-green-100",disabled:!1},{title:"Mark as Invoiced",description:"Update status to invoiced",icon:Ks,onClick:n,color:"text-orange-600 bg-orange-100",disabled:!1},{title:"Mark as Paid",description:"Update status to paid",icon:mn,onClick:r,color:"text-green-600 bg-green-100",disabled:!1},{title:"Export to Fortnox",description:"Export to Fortnox API",icon:bn,onClick:i,color:"text-purple-600 bg-purple-100",disabled:!1},{title:"Export as Text",description:"Download readable text files",icon:$u,onClick:s,color:"text-teal-600 bg-teal-100",disabled:!1}];return c.jsxs(Z,{className:"h-full",children:[c.jsx(de,{className:"pb-4",children:c.jsx(he,{className:"text-lg",children:"Quick Actions"})}),c.jsx(ee,{children:c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:a.map(o=>{const l=o.icon;return c.jsxs(H,{variant:"outline",className:`h-auto p-4 flex-col gap-2 min-h-[100px] ${o.disabled?"opacity-50 cursor-not-allowed":"hover:bg-gray-50"}`,onClick:o.disabled?void 0:o.onClick,disabled:o.disabled,"data-testid":o.title==="New Invoice Item"?"new-invoice-btn":void 0,children:[c.jsx("div",{className:`p-3 rounded-full ${o.color} flex-shrink-0`,children:c.jsx(l,{className:"h-5 w-5"})}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"font-medium text-sm leading-tight",children:o.title}),c.jsx("div",{className:"text-xs text-gray-500 mt-1 leading-tight",children:o.description})]})]},o.title)})})})]})}function Fat({items:e,loading:t}){if(t)return c.jsxs(Z,{className:"h-full flex flex-col",children:[c.jsx(de,{children:c.jsx(he,{className:"text-lg",children:"Monthly Revenue"})}),c.jsx(ee,{className:"flex-1",children:c.jsx("div",{className:"w-full h-full bg-gray-100 rounded animate-pulse min-h-[300px]"})})]});const r=(()=>{const a=[],o=new Date;for(let l=5;l>=0;l--){const u=new Date(o.getFullYear(),o.getMonth()-l,1),d=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}`,f=u.toLocaleDateString("en-US",{month:"short"});a.push({month:f,monthKey:d,invoiced:0,paid:0,pending:0})}return e.forEach(l=>{const u=new Date(l.date),d=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}`,f=a.find(h=>h.monthKey===d);if(f)switch(l.status){case"invoiced":f.invoiced+=l.amount;break;case"paid":f.paid+=l.amount;break;case"pending":f.pending+=l.amount;break}}),a})(),i=r.some(a=>a.invoiced>0||a.paid>0||a.pending>0),s=({active:a,payload:o,label:l})=>a&&o&&o.length?c.jsxs("div",{className:"bg-white p-3 border rounded-lg shadow-lg",children:[c.jsx("p",{className:"font-medium",children:l}),o.map((u,d)=>c.jsxs("p",{className:"text-sm",children:[u.name,": ",le(u.value)]},d))]}):null;return c.jsxs(Z,{className:"h-full flex flex-col",children:[c.jsxs(de,{className:"flex flex-row items-center justify-between flex-shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ti,{className:"h-5 w-5 text-green-600"}),c.jsx(he,{className:"text-lg",children:"Monthly Revenue"})]}),c.jsx(H,{variant:"ghost",size:"sm",children:c.jsx(tO,{className:"h-4 w-4"})})]}),c.jsx(ee,{className:"flex-1 flex flex-col",children:i?c.jsx("div",{className:"flex-1 min-h-[300px]",children:c.jsx(Mi,{width:"100%",height:"100%",children:c.jsxs(l1,{data:r,margin:{top:20,right:30,left:20,bottom:5},children:[c.jsx(IQ,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),c.jsx(Ea,{dataKey:"month",axisLine:!1,tickLine:!1,fontSize:12}),c.jsx(Sa,{axisLine:!1,tickLine:!1,fontSize:12,tickFormatter:a=>`${a/1e3}k`}),c.jsx(Bs,{content:c.jsx(s,{})}),c.jsx(Ya,{dataKey:"paid",stackId:"a",fill:"#10B981",name:"Paid",radius:[0,0,0,0]}),c.jsx(Ya,{dataKey:"invoiced",stackId:"a",fill:"#3B82F6",name:"Invoiced",radius:[0,0,0,0]}),c.jsx(Ya,{dataKey:"pending",stackId:"a",fill:"#F59E0B",name:"Pending",radius:[4,4,0,0]})]})})}):c.jsx("div",{className:"flex items-center justify-center flex-1 text-gray-500 min-h-[300px]",children:c.jsxs("div",{className:"text-center",children:[c.jsx(ti,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),c.jsx("p",{children:"No revenue data yet"}),c.jsx("p",{className:"text-sm",children:"Data will appear as you add invoice items"})]})})})]})}function Bat({open:e,onOpenChange:t}){const{addInvoiceItem:n}=xs(),{clients:r}=Sn(),{projects:i}=Jn(),{toast:s}=mo();console.log("Dialog opened, clients:",r,"projects:",i);const[a,o]=w.useState({client_id:"",project_id:"",description:"",quantity:1,rate:0,type:"hourly",invoice_date:new Date().toISOString().split("T")[0],due_date:new Date(Date.now()+20*24*60*60*1e3).toISOString().split("T")[0],status:"draft"}),[l,u]=w.useState("20"),d=(x,S)=>{const E=new Date(x);return E.setDate(E.getDate()+S),E.toISOString().split("T")[0]},f=x=>{if(u(x),x!=="custom"&&a.invoice_date){const S=parseInt(x),E=d(a.invoice_date,S);o(_=>({..._,due_date:E}))}},[h,p]=w.useState(!1),m=r.find(x=>x.id===a.client_id),g=i.filter(x=>x.client_id===a.client_id),v=async x=>{if(x.preventDefault(),!a.client_id||!a.project_id||!a.description){s({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}if(a.invoice_date&&a.due_date){const S=new Date(a.invoice_date),E=new Date(a.due_date);if(S>E){s({title:"Error",description:"Invoice date cannot be after due date",variant:"destructive"});return}}p(!0);try{await n(a),s({title:"Success",description:"Invoice item created successfully"}),t(!1),o({client_id:"",project_id:"",description:"",quantity:1,rate:0,type:"hourly",invoice_date:new Date().toISOString().split("T")[0],due_date:new Date(Date.now()+20*24*60*60*1e3).toISOString().split("T")[0],status:"draft"}),u("20")}catch{s({title:"Error",description:"Failed to create invoice item",variant:"destructive"})}finally{p(!1)}},y=x=>{o(S=>{var E;return{...S,client_id:x,project_id:"",rate:((E=r.find(_=>_.id===x))==null?void 0:E.hourly_rate)||0}})},b=x=>{const S=i.find(E=>E.id===x);o(E=>({...E,project_id:x,rate:(S==null?void 0:S.hourly_rate)||(m==null?void 0:m.hourly_rate)||E.rate||0}))};return c.jsx(kt,{open:e,onOpenChange:t,children:c.jsxs(St,{className:"sm:max-w-[500px]",children:[c.jsx(_t,{children:c.jsx(Nt,{children:"Create Invoice Item"})}),c.jsxs("form",{onSubmit:v,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"client",children:"Client *"}),c.jsxs("select",{id:"client",title:"Select client",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:a.client_id,onChange:x=>y(x.target.value),required:!0,children:[c.jsx("option",{value:"",children:"Select client"}),r.map(x=>c.jsx("option",{value:x.id,children:x.name},x.id))]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"project",children:"Project *"}),c.jsxs("select",{id:"project",title:"Select project",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:a.project_id,onChange:x=>b(x.target.value),disabled:!a.client_id,required:!0,children:[c.jsx("option",{value:"",children:"Select project"}),g.map(x=>c.jsx("option",{value:x.id,children:x.name},x.id))]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"description",children:"Description *"}),c.jsx(Ca,{id:"description",value:a.description,onChange:x=>o(S=>({...S,description:x.target.value})),placeholder:"Describe the work performed...",required:!0})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"type",children:"Type"}),c.jsxs("select",{id:"type",title:"Select type",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:a.type,onChange:x=>o(S=>({...S,type:x.target.value})),children:[c.jsx("option",{value:"hourly",children:"Hourly"}),c.jsx("option",{value:"fixed",children:"Fixed Price"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"quantity",children:a.type==="hourly"?"Hours":"Quantity"}),c.jsx(ce,{id:"quantity",type:"number",step:"0.25",min:"0",value:a.quantity,onChange:x=>o(S=>({...S,quantity:parseFloat(x.target.value)||0})),required:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"rate",children:a.type==="hourly"?"Rate/Hour":"Total Price"}),c.jsx(ce,{id:"rate",type:"number",min:"0",value:a.rate,onChange:x=>o(S=>({...S,rate:parseFloat(x.target.value)||0})),required:!0})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"invoice_date",children:"Invoice Date"}),c.jsx(ce,{id:"invoice_date",type:"date",value:a.invoice_date,onChange:x=>{const S=x.target.value;if(o(E=>({...E,invoice_date:S})),l!=="custom"){const E=parseInt(l),_=d(S,E);o(T=>({...T,due_date:_}))}},required:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"due_date",children:"Due Date"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("select",{title:"Select due date option",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:l,onChange:x=>f(x.target.value),children:[c.jsx("option",{value:"20",children:"20 days"}),c.jsx("option",{value:"30",children:"30 days"}),c.jsx("option",{value:"90",children:"90 days"}),c.jsx("option",{value:"custom",children:"Custom date"})]}),l==="custom"&&c.jsx(ce,{id:"due_date",type:"date",value:a.due_date,onChange:x=>o(S=>({...S,due_date:x.target.value})),required:!0}),l!=="custom"&&c.jsxs("div",{className:"text-sm text-muted-foreground",children:["Due: ",a.due_date&&new Date(a.due_date).toLocaleDateString("sv-SE")]})]})]})]}),a.quantity&&a.rate&&c.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"text-sm text-gray-600",children:"Total Amount:"}),c.jsx("div",{className:"text-lg font-semibold",children:new Intl.NumberFormat("sv-SE",{style:"currency",currency:"SEK"}).format((a.quantity||0)*(a.rate||0))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx(H,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),c.jsx(H,{type:"submit",disabled:h,children:h?"Creating...":"Create Invoice Item"})]})]})]})})}function $at({open:e,onOpenChange:t}){const{createInvoiceFromTimeEntries:n}=xs(),{clients:r}=Sn(),{projects:i}=Jn(),{entries:s}=si(),{toast:a}=mo(),[o,l]=w.useState([]),[u,d]=w.useState(""),[f,h]=w.useState(""),[p,m]=w.useState(!1),g=s,v=g.reduce((T,C)=>{const k=i.find(D=>D.id===C.project_id),A=r.find(D=>D.id===(k==null?void 0:k.client_id));if(!k||!A)return T;const j=`${A.id}-${k.id}`;return T[j]||(T[j]={client:A,project:k,entries:[]}),T[j].entries.push(C),T},{}),y=g.filter(T=>o.includes(T.id)),b=y.reduce((T,C)=>T+C.hours,0),x=y.reduce((T,C)=>{const k=i.find(D=>D.id===C.project_id),A=r.find(D=>D.id===(k==null?void 0:k.client_id)),j=(k==null?void 0:k.hourly_rate)||(A==null?void 0:A.hourly_rate)||0;return T+C.hours*j},0),S=async T=>{if(T.preventDefault(),o.length===0||!u){a({title:"Error",description:"Please select time entries and a client",variant:"destructive"});return}m(!0);try{await n(o,u,f||`Time entries - ${b} hours`),a({title:"Success",description:"Invoice item created from time entries"}),t(!1),l([]),d(""),h("")}catch{a({title:"Error",description:"Failed to create invoice item",variant:"destructive"})}finally{m(!1)}},E=T=>{l(C=>C.includes(T)?C.filter(k=>k!==T):[...C,T])},_=T=>{const C=T.map(A=>A.id),k=C.every(A=>o.includes(A));l(k?A=>A.filter(j=>!C.includes(j)):A=>[...new Set([...A,...C])])};return w.useEffect(()=>{if(y.length>0){const T=y[0],C=i.find(k=>k.id===T.project_id);C!=null&&C.client_id&&!u&&d(C.client_id)}},[y,i,u]),c.jsx(kt,{open:e,onOpenChange:t,children:c.jsxs(St,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[c.jsx(_t,{children:c.jsx(Nt,{children:"Convert Time Entries to Invoice Item"})}),c.jsxs("form",{onSubmit:S,className:"space-y-4",children:[Object.keys(v).length===0?c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx("p",{children:"No unbilled time entries found"}),c.jsx("p",{className:"text-sm",children:"All your time entries have been converted to invoice items"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx(ie,{children:"Select Time Entries to Convert:"}),Object.values(v).map(({client:T,project:C,entries:k})=>{const A=k.reduce((M,L)=>M+L.hours,0),j=k.map(M=>M.id),D=j.every(M=>o.includes(M)),P=j.some(M=>o.includes(M));return c.jsxs("div",{className:"border rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{children:[c.jsxs("h4",{className:"font-medium",children:[T.name," - ",C.name]}),c.jsxs("p",{className:"text-sm text-gray-600",children:[A," hours total"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",title:"Select all entries for this project",checked:D,ref:M=>{M&&(M.indeterminate=P&&!D)},onChange:()=>_(k),className:"h-4 w-4"}),c.jsx(H,{type:"button",variant:"outline",size:"sm",onClick:()=>_(k),children:D?"Deselect All":"Select All"})]})]}),c.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:k.map(M=>c.jsx("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded text-sm",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",title:`Select time entry for ${new Date(M.date).toLocaleDateString()}`,checked:o.includes(M.id),onChange:()=>E(M.id),className:"h-4 w-4"}),c.jsx("span",{children:new Date(M.date).toLocaleDateString()}),c.jsxs("span",{children:[M.hours,"h"]}),M.comment&&c.jsxs("span",{className:"text-gray-600 truncate max-w-32",children:["- ",M.comment]})]})},M.id))})]},`${T.id}-${C.id}`)})]}),o.length>0&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"client",children:"Client"}),c.jsxs("select",{id:"client",title:"Select client",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:u,onChange:T=>d(T.target.value),required:!0,children:[c.jsx("option",{value:"",children:"Select client"}),r.map(T=>c.jsx("option",{value:T.id,children:T.name},T.id))]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"description",children:"Description (Optional)"}),c.jsx(Ca,{id:"description",value:f,onChange:T=>h(T.target.value),placeholder:`Time entries - ${b} hours`})]}),c.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[c.jsx("div",{className:"text-sm text-blue-700",children:c.jsx("strong",{children:"Summary:"})}),c.jsxs("div",{className:"text-sm text-blue-600",children:[o.length," entries  ",b," hours  ",le(x)]})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx(H,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),o.length>0&&c.jsx(H,{type:"submit",disabled:p,children:p?"Creating...":"Create Invoice Item"})]})]})]})})}const Aa=w.forwardRef(({className:e,checked:t,onCheckedChange:n,disabled:r,id:i,...s},a)=>c.jsxs("div",{className:"relative inline-flex items-center",children:[c.jsx("input",{ref:a,type:"checkbox",id:i,checked:t,onChange:o=>n==null?void 0:n(o.target.checked),disabled:r,className:"sr-only",...s}),c.jsx("div",{className:Ve("h-4 w-4 shrink-0 rounded-sm border border-gray-300 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer",t&&"bg-blue-600 text-white border-blue-600",r&&"cursor-not-allowed opacity-50",e),onClick:()=>!r&&(n==null?void 0:n(!t)),children:t&&c.jsx(sb,{className:"h-3 w-3 text-white"})})]}));Aa.displayName="Checkbox";class Uat{constructor(){Ra(this,"config",null)}configure(t){this.config={...t,baseUrl:t.baseUrl||"https://api.fortnox.se/3"}}async makeRequest(t,n="GET",r){if(!this.config)throw new Error("Fortnox service not configured. Please set API credentials.");const i=`${this.config.baseUrl}${t}`,s={"Access-Token":this.config.accessToken,"Client-Secret":this.config.clientSecret,"Content-Type":"application/json",Accept:"application/json"};try{const a=await fetch(i,{method:n,headers:s,body:r?JSON.stringify(r):void 0});if(!a.ok){const o=await a.text();throw new Error(`Fortnox API error (${a.status}): ${o}`)}return await a.json()}catch(a){throw console.error("Fortnox API request failed:",a),a}}async testConnection(){try{return await this.makeRequest("/companyinformation"),!0}catch(t){return console.error("Fortnox connection test failed:",t),!1}}async getCustomers(){try{return(await this.makeRequest("/customers")).Customers||[]}catch(t){return console.error("Failed to fetch Fortnox customers:",t),[]}}async createCustomer(t){try{return(await this.makeRequest("/customers","POST",{Customer:t})).Customer||null}catch(n){return console.error("Failed to create Fortnox customer:",n),null}}async findOrCreateCustomer(t,n,r){try{const s=(await this.getCustomers()).find(l=>l.Name===t||l.Name===r);if(s&&s.CustomerNumber)return s.CustomerNumber;const a={Name:r||t,Email:n},o=await this.createCustomer(a);return(o==null?void 0:o.CustomerNumber)||null}catch(i){return console.error("Failed to find or create customer:",i),null}}async createInvoice(t){try{const n=await this.makeRequest("/invoices","POST",{Invoice:t});return n.Invoice?{success:!0,invoiceNumber:n.Invoice.InvoiceNumber,documentNumber:n.Invoice.DocumentNumber}:{success:!1,error:"No invoice data returned from Fortnox"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}convertInvoiceItemsToFortnox(t,n,r){const i=t.map(o=>({Description:o.description,Price:o.hourly_rate||o.fixed_amount||0,Quantity:o.hours||1,Unit:o.hours?"h":"st",VAT:25})),s=new Date().toISOString().split("T")[0],a=new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0];return{CustomerNumber:n,InvoiceDate:s,DueDate:a,Currency:"SEK",Language:"SV",InvoiceRows:i,Remarks:`Exported from consultant time tracker - ${t.length} items for ${r}`}}async exportInvoiceItems(t,n,r,i){try{if(!this.config)return{success:!1,error:"Fortnox service not configured"};if(t.length===0)return{success:!1,error:"No invoice items to export"};const s=await this.findOrCreateCustomer(n,r,i);if(!s)return{success:!1,error:"Failed to find or create customer in Fortnox"};const a=this.convertInvoiceItemsToFortnox(t,s,n);return await this.createInvoice(a)}catch(s){return{success:!1,error:s instanceof Error?s.message:"Export failed"}}}generatePlainTextInvoice(t,n,r,i,s){if(t.length===0)return"No items to export";const a=new Date().toLocaleDateString("sv-SE"),o=new Date(Date.now()+30*24*60*60*1e3).toLocaleDateString("sv-SE"),l=t.reduce((m,g)=>m+g.total_amount,0),d=l*.25,f=l+d,h=m=>new Intl.NumberFormat("sv-SE",{style:"currency",currency:"SEK",minimumFractionDigits:2}).format(m);let p="";return p+="=".repeat(60)+`
`,p+=`                         FAKTURA
`,p+="=".repeat(60)+`

`,p+=`Fakturanummer: ${s||"XXXX"}
`,p+=`Fakturadatum: ${a}
`,p+=`Frfallodatum: ${o}
`,p+=`Valuta: SEK

`,p+=`KUND:
`,p+="-".repeat(20)+`
`,i&&(p+=`Fretag: ${i}
`),p+=`Namn: ${n}
`,r&&(p+=`E-post: ${r}
`),p+=`
`,p+=`FAKTURARADER:
`,p+="-".repeat(60)+`
`,p+=`${"Beskrivning".padEnd(30)} ${"Tim/Ant".padStart(8)} ${"Pris".padStart(10)} ${"Summa".padStart(10)}
`,p+="-".repeat(60)+`
`,t.forEach(m=>{const g=m.description.length>28?m.description.substring(0,25)+"...":m.description;let v,y;m.hours&&m.hourly_rate?(v=m.hours.toFixed(2),y=h(m.hourly_rate)):(v="1.00",y=h(m.fixed_amount||0));const b=h(m.total_amount);p+=`${g.padEnd(30)} ${v.padStart(8)} ${y.padStart(10)} ${b.padStart(10)}
`}),p+="-".repeat(60)+`
`,p+=`
SUMMERING:
`,p+="-".repeat(30)+`
`,p+=`Summa exkl. moms: ${h(l).padStart(15)}
`,p+=`Moms (25%): ${h(d).padStart(21)}
`,p+=`TOTALT: ${h(f).padStart(23)}

`,p+=`BETALNINGSINFORMATION:
`,p+="-".repeat(30)+`
`,p+=`Betalningsvillkor: 30 dagar
`,p+=`Drjsmlsrnta: 2% per mnad

`,t.some(m=>m.description.length>28||m.notes)&&(p+=`DETALJERADE BESKRIVNINGAR:
`,p+="-".repeat(40)+`
`,t.forEach((m,g)=>{p+=`${g+1}. ${m.description}
`,m.notes&&(p+=`   Anteckningar: ${m.notes}
`),m.hours&&m.hourly_rate&&(p+=`   ${m.hours} timmar  ${h(m.hourly_rate)}
`),p+=`
`})),p+="Exporterad frn Konsult Tid System - "+new Date().toLocaleString("sv-SE")+`
`,p+="=".repeat(60),p}downloadPlainTextInvoice(t,n,r,i,s){const a=this.generatePlainTextInvoice(t,n,r,i,s),o=new Blob([a],{type:"text/plain;charset=utf-8"}),l=URL.createObjectURL(o),u=document.createElement("a");u.href=l,u.download=`faktura_${n.replace(/[^a-zA-Z0-9]/g,"_")}_${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(l)}}const nd=new Uat;function GA(e){return!!(e.accessToken&&e.clientSecret)}function cae(){try{const e=localStorage.getItem("fortnox_config");if(!e)return null;const t=JSON.parse(e);return GA(t)?t:null}catch{return null}}function w7(e){localStorage.setItem("fortnox_config",JSON.stringify(e))}function zat(){localStorage.removeItem("fortnox_config")}function uae({open:e,onOpenChange:t,onConfigured:n}){const[r,i]=w.useState({accessToken:"",clientSecret:""}),[s,a]=w.useState(!1),[o,l]=w.useState("idle"),[u,d]=w.useState(""),[f,h]=w.useState(!1);w.useEffect(()=>{if(e){const x=cae();x?(i(x),h(!0),l("success")):(i({accessToken:"",clientSecret:""}),h(!1),l("idle"))}},[e]);const p=(x,S)=>{i(E=>({...E,[x]:S})),l("idle"),d("")},m=async()=>{if(!GA(r)){d("Please provide both Access Token and Client Secret"),l("error");return}a(!0),d("");try{nd.configure(r),await nd.testConnection()?(l("success"),w7(r),h(!0)):(l("error"),d("Failed to connect to Fortnox. Please check your credentials."))}catch(x){l("error"),d(x instanceof Error?x.message:"Connection test failed")}finally{a(!1)}},g=()=>{o==="success"&&GA(r)&&(w7(r),n==null||n(),t(!1))},v=()=>{zat(),i({accessToken:"",clientSecret:""}),h(!1),l("idle"),d("")},y=()=>{switch(o){case"success":return c.jsx(vr,{className:"h-4 w-4 text-green-600"});case"error":return c.jsx(T0,{className:"h-4 w-4 text-red-600"});default:return c.jsx(Qo,{className:"h-4 w-4 text-gray-400"})}},b=()=>{switch(o){case"success":return"Connected successfully";case"error":return"Connection failed";default:return"Not configured"}};return c.jsx(kt,{open:e,onOpenChange:t,children:c.jsxs(St,{className:"sm:max-w-md",children:[c.jsxs(_t,{children:[c.jsx(Nt,{children:"Fortnox Integration"}),c.jsx(Gc,{children:"Configure your Fortnox API credentials to export invoice items directly to Fortnox."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs(Z,{children:[c.jsx(de,{className:"pb-3",children:c.jsxs(he,{className:"text-sm flex items-center gap-2",children:[y(),"Connection Status: ",b()]})}),o==="success"&&c.jsx(ee,{className:"pt-0",children:c.jsx("p",{className:"text-sm text-green-600",children:"Your Fortnox integration is ready to use."})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"accessToken",children:"Access Token"}),c.jsx(ce,{id:"accessToken",type:"password",placeholder:"Enter your Fortnox Access Token",value:r.accessToken||"",onChange:x=>p("accessToken",x.target.value)})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"clientSecret",children:"Client Secret"}),c.jsx(ce,{id:"clientSecret",type:"password",placeholder:"Enter your Fortnox Client Secret",value:r.clientSecret||"",onChange:x=>p("clientSecret",x.target.value)})]}),c.jsx(Cd,{children:c.jsx(kd,{className:"text-sm",children:c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{children:"To get your Fortnox API credentials:"}),c.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-xs",children:[c.jsx("li",{children:"Log in to your Fortnox account"}),c.jsx("li",{children:"Go to Settings  Integrations  API"}),c.jsx("li",{children:"Create a new integration or use existing one"}),c.jsx("li",{children:"Copy the Access Token and Client Secret"})]}),c.jsxs("a",{href:"https://developer.fortnox.se/general/authentication/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 text-xs",children:["Learn more ",c.jsx(n2,{className:"h-3 w-3"})]})]})})}),u&&c.jsx(Cd,{variant:"destructive",children:c.jsx(kd,{children:u})}),c.jsx(H,{onClick:m,disabled:s||!r.accessToken||!r.clientSecret,className:"w-full",variant:"outline",children:s?c.jsxs(c.Fragment,{children:[c.jsx(dh,{className:"h-4 w-4 mr-2 animate-spin"}),"Testing Connection..."]}):"Test Connection"})]})]}),c.jsxs(cy,{className:"flex gap-2",children:[f&&c.jsx(H,{variant:"outline",onClick:v,className:"mr-auto",children:"Clear Config"}),c.jsx(H,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),c.jsx(H,{onClick:g,disabled:o!=="success",children:"Save Configuration"})]})]})})}function Hat({open:e,onOpenChange:t}){const{invoiceItems:n,markAsInvoiced:r}=xs(),{clients:i}=Sn(),{projects:s}=Jn(),[a,o]=w.useState(!1),[l,u]=w.useState(new Set),[d,f]=w.useState(!0),[h,p]=w.useState(!1),[m,g]=w.useState([]),[v,y]=w.useState(!1),b=n.filter(D=>D.status==="draft");w.useEffect(()=>{if(e){const D=cae();y(!!D),D&&nd.configure(D),u(new Set),g([])}},[e]);const x=D=>{u(P=>{const M=new Set(P);return M.has(D)?M.delete(D):M.add(D),M})},S=()=>{l.size===b.length?u(new Set):u(new Set(b.map(D=>D.id)))},E=D=>{const P=i.find(M=>M.id===D);return(P==null?void 0:P.name)||"Unknown Client"},_=D=>i.find(P=>P.id===D),T=D=>{const P=s.find(M=>M.id===D);return(P==null?void 0:P.name)||"Unknown Project"},C=D=>{const P=new Map;return D.forEach(M=>{const L=M.client_id||"no-client";P.has(L)||P.set(L,[]),P.get(L).push(M)}),P},k=async()=>{var D;if(!v){o(!0);return}if(l.size!==0){p(!0),g([]);try{const P=b.filter(B=>l.has(B.id)),M=[];if(d){const B=C(P);for(const[R,F]of B){const I=_(R),X=(I==null?void 0:I.name)||"Unknown Client",G=await nd.exportInvoiceItems(F,X,(I==null?void 0:I.email)||void 0,(I==null?void 0:I.company)||void 0);M.push({...G,clientName:X,itemCount:F.length,items:F.map($=>$.id)})}}else{const B=_(((D=P[0])==null?void 0:D.client_id)||""),R=(B==null?void 0:B.name)||"Mixed Clients",F=await nd.exportInvoiceItems(P,R,(B==null?void 0:B.email)||void 0,(B==null?void 0:B.company)||void 0);M.push({...F,clientName:R,itemCount:P.length,items:P.map(I=>I.id)})}g(M);const O=M.filter(B=>B.success).flatMap(B=>B.items||[]);O.length>0&&await r(O)}catch(P){console.error("Export failed:",P),g([{success:!1,error:P instanceof Error?P.message:"Export failed"}])}finally{p(!1)}}},A=b.filter(D=>l.has(D.id)).reduce((D,P)=>D+P.total_amount,0),j=C(b.filter(D=>l.has(D.id)));return c.jsxs(c.Fragment,{children:[c.jsx(kt,{open:e,onOpenChange:t,children:c.jsxs(St,{className:"sm:max-w-2xl max-h-[80vh] overflow-y-auto",children:[c.jsxs(_t,{children:[c.jsxs(Nt,{className:"flex items-center gap-2",children:[c.jsx(bn,{className:"h-5 w-5"}),"Export to Fortnox"]}),c.jsx(Gc,{children:"Export invoice items to Fortnox as invoices. Only draft items can be exported."})]}),c.jsxs("div",{className:"space-y-4",children:[!v&&c.jsx(Cd,{variant:"destructive",children:c.jsx(kd,{children:"Fortnox integration is not configured. Please configure your API credentials first."})}),c.jsxs(Z,{children:[c.jsx(de,{className:"pb-3",children:c.jsx(he,{className:"text-sm",children:"Export Options"})}),c.jsx(ee,{className:"space-y-3",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Aa,{id:"groupByClient",checked:d,onCheckedChange:f}),c.jsx("label",{htmlFor:"groupByClient",className:"text-sm",children:"Create separate invoices for each client"})]})})]}),c.jsxs(Z,{children:[c.jsx(de,{className:"pb-3",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs(he,{className:"text-sm",children:["Select Items (",b.length," available)"]}),c.jsx(H,{variant:"outline",size:"sm",onClick:S,children:l.size===b.length?"Deselect All":"Select All"})]})}),c.jsx(ee,{children:c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:b.length===0?c.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No draft items available for export"}):b.map(D=>c.jsxs("div",{className:"flex items-center space-x-3 p-2 border rounded",children:[c.jsx(Aa,{checked:l.has(D.id),onCheckedChange:()=>x(D.id)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium truncate",children:D.description}),c.jsxs("div",{className:"text-xs text-gray-500",children:[E(D.client_id||""),"  ",T(D.project_id||"")]})]}),c.jsx("div",{className:"text-sm font-medium",children:le(D.total_amount)})]},D.id))})})]}),l.size>0&&c.jsxs(Z,{children:[c.jsx(de,{className:"pb-3",children:c.jsx(he,{className:"text-sm",children:"Export Summary"})}),c.jsx(ee,{children:c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{children:"Selected items:"}),c.jsx("span",{children:l.size})]}),c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{children:"Total amount:"}),c.jsx("span",{className:"font-medium",children:le(A)})]}),d&&c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{children:"Invoices to create:"}),c.jsx("span",{children:j.size})]})]})})]}),m.length>0&&c.jsxs(Z,{children:[c.jsx(de,{className:"pb-3",children:c.jsx(he,{className:"text-sm",children:"Export Results"})}),c.jsx(ee,{children:c.jsx("div",{className:"space-y-2",children:m.map((D,P)=>c.jsxs("div",{className:`flex items-center gap-2 p-2 rounded text-sm ${D.success?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[D.success?c.jsx(vr,{className:"h-4 w-4"}):c.jsx(T0,{className:"h-4 w-4"}),c.jsx("div",{className:"flex-1",children:D.success?c.jsxs(c.Fragment,{children:[c.jsx("div",{children:"Invoice created successfully"}),D.invoiceNumber&&c.jsxs("div",{className:"text-xs",children:["Invoice #: ",D.invoiceNumber]})]}):c.jsxs("div",{children:["Failed: ",D.error]})})]},P))})})]})]}),c.jsxs(cy,{className:"flex gap-2",children:[!v&&c.jsxs(H,{variant:"outline",onClick:()=>o(!0),className:"mr-auto",children:[c.jsx(Qo,{className:"h-4 w-4 mr-2"}),"Configure Fortnox"]}),c.jsx(H,{variant:"outline",onClick:()=>t(!1),children:"Close"}),c.jsx(H,{onClick:k,disabled:!v||l.size===0||h,children:h?c.jsxs(c.Fragment,{children:[c.jsx(dh,{className:"h-4 w-4 mr-2 animate-spin"}),"Exporting..."]}):c.jsxs(c.Fragment,{children:[c.jsx($u,{className:"h-4 w-4 mr-2"}),"Export to Fortnox"]})})]})]})}),c.jsx(uae,{open:a,onOpenChange:o,onConfigured:()=>{y(!0),o(!1)}})]})}function Vat({open:e,onOpenChange:t}){const{invoiceItems:n,markAsInvoiced:r}=xs(),{clients:i}=Sn(),{projects:s}=Jn(),[a,o]=w.useState(new Set),[l,u]=w.useState(!0),[d,f]=w.useState(""),[h,p]=w.useState(!1),m=n.filter(C=>C.status==="draft");w.useEffect(()=>{e&&(o(new Set),f(""),p(!1))},[e]);const g=C=>{o(k=>{const A=new Set(k);return A.has(C)?A.delete(C):A.add(C),A})},v=()=>{a.size===m.length?o(new Set):o(new Set(m.map(C=>C.id)))},y=C=>{const k=i.find(A=>A.id===C);return(k==null?void 0:k.name)||"Unknown Client"},b=C=>i.find(k=>k.id===C),x=C=>{const k=s.find(A=>A.id===C);return(k==null?void 0:k.name)||"Unknown Project"},S=C=>{const k=new Map;return C.forEach(A=>{const j=A.client_id||"no-client";k.has(j)||k.set(j,[]),k.get(j).push(A)}),k},E=async()=>{var k;if(a.size===0)return;const C=m.filter(A=>a.has(A.id));if(l)S(C).forEach((j,D)=>{const P=b(D),M=(P==null?void 0:P.name)||"Unknown Client";nd.downloadPlainTextInvoice(j,M,(P==null?void 0:P.email)||void 0,(P==null?void 0:P.company)||void 0,d||void 0)});else{const A=b(((k=C[0])==null?void 0:k.client_id)||""),j=(A==null?void 0:A.name)||"Mixed Clients";nd.downloadPlainTextInvoice(C,j,(A==null?void 0:A.email)||void 0,(A==null?void 0:A.company)||void 0,d||void 0)}await r(C.map(A=>A.id)),p(!0)},_=m.filter(C=>a.has(C.id)).reduce((C,k)=>C+k.total_amount,0),T=S(m.filter(C=>a.has(C.id)));return c.jsx(kt,{open:e,onOpenChange:t,children:c.jsxs(St,{className:"sm:max-w-2xl max-h-[80vh] overflow-y-auto",children:[c.jsxs(_t,{children:[c.jsxs(Nt,{className:"flex items-center gap-2",children:[c.jsx(bn,{className:"h-5 w-5"}),"Export as Plain Text"]}),c.jsx(Gc,{children:"Export invoice items as readable text files for manual invoice creation. Only draft items can be exported."})]}),h?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(vr,{className:"h-12 w-12 mx-auto text-green-600 mb-4"}),c.jsx("h3",{className:"text-lg font-semibold text-green-700 mb-2",children:"Export Successful!"}),c.jsxs("p",{className:"text-gray-600",children:["Your invoice",T.size>1?"s have":" has"," been downloaded as text file",T.size>1?"s":"","."]})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs(Z,{children:[c.jsx(de,{className:"pb-3",children:c.jsx(he,{className:"text-sm",children:"Export Options"})}),c.jsxs(ee,{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Aa,{id:"groupByClient",checked:l,onCheckedChange:u}),c.jsx("label",{htmlFor:"groupByClient",className:"text-sm",children:"Create separate files for each client"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"invoiceNumber",className:"text-sm",children:"Invoice Number (optional)"}),c.jsx(ce,{id:"invoiceNumber",placeholder:"e.g., INV-2025-001",value:d,onChange:C=>f(C.target.value)}),c.jsx("p",{className:"text-xs text-gray-500",children:"Leave empty to use placeholder (XXXX) in the exported file"})]})]})]}),c.jsxs(Z,{children:[c.jsx(de,{className:"pb-3",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs(he,{className:"text-sm",children:["Select Items (",m.length," available)"]}),c.jsx(H,{variant:"outline",size:"sm",onClick:v,children:a.size===m.length?"Deselect All":"Select All"})]})}),c.jsx(ee,{children:c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:m.length===0?c.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No draft items available for export"}):m.map(C=>c.jsxs("div",{className:"flex items-center space-x-3 p-2 border rounded",children:[c.jsx(Aa,{checked:a.has(C.id),onCheckedChange:()=>g(C.id)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium truncate",children:C.description}),c.jsxs("div",{className:"text-xs text-gray-500",children:[y(C.client_id||""),"  ",x(C.project_id||"")]})]}),c.jsx("div",{className:"text-sm font-medium",children:le(C.total_amount)})]},C.id))})})]}),a.size>0&&c.jsxs(Z,{children:[c.jsx(de,{className:"pb-3",children:c.jsx(he,{className:"text-sm",children:"Export Summary"})}),c.jsx(ee,{children:c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{children:"Selected items:"}),c.jsx("span",{children:a.size})]}),c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{children:"Total amount:"}),c.jsx("span",{className:"font-medium",children:le(_)})]}),l&&c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{children:"Files to create:"}),c.jsx("span",{children:T.size})]})]})})]})]}),c.jsxs(cy,{className:"flex gap-2",children:[c.jsx(H,{variant:"outline",onClick:()=>t(!1),children:h?"Close":"Cancel"}),!h&&c.jsxs(H,{onClick:E,disabled:a.size===0,children:[c.jsx($u,{className:"h-4 w-4 mr-2"}),"Export Text Files"]})]})]})})}function Wat({open:e,onOpenChange:t,clientId:n}){const{invoiceItems:r,updateInvoiceItem:i,deleteInvoiceItem:s}=xs(),{clients:a}=Sn(),{projects:o}=Jn(),{toast:l}=mo(),[u,d]=w.useState(null),[f,h]=w.useState({}),[p,m]=w.useState("20"),[g,v]=w.useState("invoice_date"),y=(O,B)=>{const R=new Date(O);return R.setDate(R.getDate()+B),R.toISOString().split("T")[0]},b=(O,B)=>{const R=new Date(O),I=new Date(B).getTime()-R.getTime(),X=Math.ceil(I/(1e3*60*60*24));return X===20?"20":X===30?"30":X===90?"90":"custom"},x=O=>{if(m(O),O!=="custom"&&f.invoice_date){const B=parseInt(O),R=y(f.invoice_date,B);h(F=>({...F,due_date:R}))}},S=O=>[...O].sort((B,R)=>{switch(g){case"invoice_date":{const F=new Date(B.invoice_date).getTime(),I=new Date(R.invoice_date).getTime();return F-I}case"created_at":{const F=new Date(B.created_at).getTime();return new Date(R.created_at).getTime()-F}case"total_amount":return R.total_amount-B.total_amount;case"status":{const F={draft:1,sent:2,overdue:3,paid:4},I=F[B.status]||5,X=F[R.status]||5;return I-X}case"description":return B.description.toLowerCase().localeCompare(R.description.toLowerCase());default:{const F=new Date(B.invoice_date).getTime(),I=new Date(R.invoice_date).getTime();return F-I}}}),E=a.find(O=>O.id===n),_=r.filter(O=>O.client_id===n),T=o.filter(O=>O.client_id===n);w.useEffect(()=>{e||(d(null),h({}))},[e]);const C=O=>{d(O.id);const B={id:O.id,description:O.description,client_id:O.client_id||void 0,project_id:O.project_id||void 0,quantity:l4(O),rate:tpe(O),type:npe(O),invoice_date:O.invoice_date,due_date:O.due_date||void 0,status:O.status,notes:O.notes||void 0};if(h(B),O.invoice_date&&O.due_date){const R=b(O.invoice_date,O.due_date);m(R)}else m("20")},k=()=>{d(null),h({})},A=async()=>{if(!(!u||!f.id)){if(f.invoice_date&&f.due_date){const O=new Date(f.invoice_date),B=new Date(f.due_date);if(O>B){l({title:"Error",description:"Invoice date cannot be after due date",variant:"destructive"});return}}try{await i(f),l({title:"Success",description:"Invoice item updated successfully"}),d(null),h({})}catch{l({title:"Error",description:"Failed to update invoice item",variant:"destructive"})}}},j=async O=>{if(confirm("Are you sure you want to delete this invoice item?"))try{await s(O),l({title:"Success",description:"Invoice item deleted successfully"})}catch{l({title:"Error",description:"Failed to delete invoice item",variant:"destructive"})}},D=O=>{switch(O){case"draft":return"secondary";case"sent":return"outline";case"paid":return"default";case"overdue":return"destructive";default:return"secondary"}},P=O=>{switch(O){case"draft":return"text-gray-600";case"sent":return"text-blue-600";case"paid":return"text-green-600";case"overdue":return"text-red-600";default:return"text-gray-600"}},L=_.reduce((O,B)=>{switch(O.totalItems++,O.totalAmount+=B.total_amount,B.status){case"draft":O.draftAmount+=B.total_amount,O.draftCount++;break;case"sent":O.sentAmount+=B.total_amount,O.sentCount++;break;case"paid":O.paidAmount+=B.total_amount,O.paidCount++;break;case"overdue":O.overdueAmount+=B.total_amount,O.overdueCount++;break}return O},{totalItems:0,totalAmount:0,draftAmount:0,draftCount:0,sentAmount:0,sentCount:0,paidAmount:0,paidCount:0,overdueAmount:0,overdueCount:0});return E?c.jsx(kt,{open:e,onOpenChange:t,children:c.jsxs(St,{className:"max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsx(_t,{className:"flex-shrink-0",children:c.jsxs(Nt,{className:"flex items-center gap-3",children:[c.jsx(Hw,{className:"h-5 w-5"}),E.name,E.company&&c.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",E.company,")"]})]})}),c.jsxs("div",{className:"flex-1 overflow-y-auto space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsx(Z,{children:c.jsxs(ee,{className:"p-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(bn,{className:"h-4 w-4 text-muted-foreground"}),c.jsx("span",{className:"text-sm font-medium",children:"Total Items"})]}),c.jsx("div",{className:"text-2xl font-bold",children:L.totalItems}),c.jsx("div",{className:"text-sm text-muted-foreground",children:le(L.totalAmount)})]})}),c.jsx(Z,{children:c.jsxs(ee,{className:"p-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ab,{className:"h-4 w-4 text-gray-600"}),c.jsx("span",{className:"text-sm font-medium",children:"Draft"})]}),c.jsx("div",{className:"text-2xl font-bold text-gray-600",children:L.draftCount}),c.jsx("div",{className:"text-sm text-muted-foreground",children:le(L.draftAmount)})]})}),c.jsx(Z,{children:c.jsxs(ee,{className:"p-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ht,{className:"h-4 w-4 text-blue-600"}),c.jsx("span",{className:"text-sm font-medium",children:"Sent"})]}),c.jsx("div",{className:"text-2xl font-bold text-blue-600",children:L.sentCount}),c.jsx("div",{className:"text-sm text-muted-foreground",children:le(L.sentAmount)})]})}),c.jsx(Z,{children:c.jsxs(ee,{className:"p-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(mn,{className:"h-4 w-4 text-green-600"}),c.jsx("span",{className:"text-sm font-medium",children:"Paid"})]}),c.jsx("div",{className:"text-2xl font-bold text-green-600",children:L.paidCount}),c.jsx("div",{className:"text-sm text-muted-foreground",children:le(L.paidAmount)})]})})]}),c.jsxs(Z,{children:[c.jsx(de,{children:c.jsxs(he,{className:"flex items-center justify-between",children:[c.jsx("span",{children:"Invoice Items"}),c.jsxs(Tt,{variant:"outline",children:[_.length," items"]})]})}),c.jsx(ee,{children:_.length===0?c.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[c.jsx(bn,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),c.jsx("p",{children:"No invoice items found for this client"}),c.jsx("p",{className:"text-sm",children:"Create some invoice items to see them here"})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"flex items-center gap-4 mb-4 pb-4 border-b",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ie,{htmlFor:"sort-by",className:"text-sm font-medium",children:"Sort by:"}),c.jsxs("select",{id:"sort-by",title:"Sort items by",className:"flex h-9 w-auto rounded-md border border-input bg-background px-3 py-1 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:g,onChange:O=>v(O.target.value),children:[c.jsx("option",{value:"invoice_date",children:"Invoice Date"}),c.jsx("option",{value:"created_at",children:"Created Date"}),c.jsx("option",{value:"total_amount",children:"Amount"}),c.jsx("option",{value:"status",children:"Status"}),c.jsx("option",{value:"description",children:"Description"})]})]})}),c.jsx("div",{className:"space-y-4",children:S(_).map(O=>{var B;return c.jsx("div",{className:"border rounded-lg p-4 space-y-3",children:u===O.id?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(ie,{htmlFor:`desc-${O.id}`,children:"Description"}),c.jsx(Ca,{id:`desc-${O.id}`,value:f.description||"",onChange:R=>h(F=>({...F,description:R.target.value})),rows:2})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:`project-${O.id}`,children:"Project"}),c.jsxs(Fn,{value:f.project_id||"",onValueChange:R=>h(F=>({...F,project_id:R})),children:[c.jsx(jn,{children:c.jsx(Bn,{placeholder:"Select project"})}),c.jsx(On,{children:T.map(R=>c.jsx(We,{value:R.id,children:R.name},R.id))})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs("div",{children:[c.jsx(ie,{htmlFor:`type-${O.id}`,children:"Type"}),c.jsxs(Fn,{value:f.type||"hourly",onValueChange:R=>h(F=>({...F,type:R})),children:[c.jsx(jn,{children:c.jsx(Bn,{})}),c.jsxs(On,{children:[c.jsx(We,{value:"hourly",children:"Hourly"}),c.jsx(We,{value:"fixed",children:"Fixed"})]})]})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:`quantity-${O.id}`,children:f.type==="hourly"?"Hours":"Quantity"}),c.jsx(ce,{id:`quantity-${O.id}`,type:"number",step:"0.25",min:"0",value:f.quantity||0,onChange:R=>h(F=>({...F,quantity:parseFloat(R.target.value)||0}))})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:`rate-${O.id}`,children:"Rate"}),c.jsx(ce,{id:`rate-${O.id}`,type:"number",min:"0",value:f.rate||0,onChange:R=>h(F=>({...F,rate:parseFloat(R.target.value)||0}))})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:`status-${O.id}`,children:"Status"}),c.jsxs(Fn,{value:f.status||"draft",onValueChange:R=>h(F=>({...F,status:R})),children:[c.jsx(jn,{children:c.jsx(Bn,{})}),c.jsxs(On,{children:[c.jsx(We,{value:"draft",children:"Draft"}),c.jsx(We,{value:"sent",children:"Sent"}),c.jsx(We,{value:"paid",children:"Paid"}),c.jsx(We,{value:"overdue",children:"Overdue"})]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(ie,{htmlFor:`invoice_date-${O.id}`,children:"Invoice Date"}),c.jsx(ce,{id:`invoice_date-${O.id}`,type:"date",value:f.invoice_date||"",onChange:R=>{const F=R.target.value;if(h(I=>({...I,invoice_date:F})),p!=="custom"){const I=parseInt(p),X=y(F,I);h(G=>({...G,due_date:X}))}}})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:`due_date-${O.id}`,children:"Due Date"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("select",{title:"Select due date option",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:p,onChange:R=>x(R.target.value),children:[c.jsx("option",{value:"20",children:"20 days"}),c.jsx("option",{value:"30",children:"30 days"}),c.jsx("option",{value:"90",children:"90 days"}),c.jsx("option",{value:"custom",children:"Custom date"})]}),p==="custom"&&c.jsx(ce,{id:`due_date-${O.id}`,type:"date",value:f.due_date||"",onChange:R=>h(F=>({...F,due_date:R.target.value}))}),p!=="custom"&&c.jsxs("div",{className:"text-sm text-muted-foreground",children:["Due: ",f.due_date&&new Date(f.due_date).toLocaleDateString("sv-SE")]})]})]})]}),c.jsx("div",{className:"grid grid-cols-1 gap-4",children:c.jsxs("div",{children:[c.jsx(ie,{children:"Total Amount"}),c.jsx("div",{className:"text-lg font-semibold mt-2",children:le((f.quantity||0)*(f.rate||0))})]})}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsxs(H,{variant:"outline",size:"sm",onClick:k,children:[c.jsx(wr,{className:"h-4 w-4 mr-1"}),"Cancel"]}),c.jsxs(H,{size:"sm",onClick:A,children:[c.jsx(qh,{className:"h-4 w-4 mr-1"}),"Save"]})]})]}):c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("h4",{className:"font-medium",children:O.description}),c.jsx(Tt,{variant:D(O.status),children:O.status})]}),c.jsx("div",{className:"text-sm text-muted-foreground",children:O.project_id&&c.jsxs("span",{children:["Project: ",(B=o.find(R=>R.id===O.project_id))==null?void 0:B.name]})})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>C(O),children:c.jsx(ab,{className:"h-4 w-4"})}),c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>j(O.id),className:"text-red-600 hover:text-red-700",children:c.jsx($i,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-muted-foreground",children:"Type:"}),c.jsx("div",{className:"font-medium",children:O.hours?"Hourly":"Fixed"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-muted-foreground",children:O.hours?"Hours:":"Quantity:"}),c.jsx("div",{className:"font-medium",children:l4(O)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-muted-foreground",children:"Rate:"}),c.jsx("div",{className:"font-medium",children:le(O.hourly_rate||O.fixed_amount||0)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-muted-foreground",children:"Total:"}),c.jsx("div",{className:`font-semibold ${P(O.status)}`,children:le(O.total_amount)})]})]}),c.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mt-3 pt-3 border-t",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(At,{className:"h-3 w-3"}),"Invoice: ",new Date(O.invoice_date).toLocaleDateString("sv-SE")]}),O.due_date&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(At,{className:"h-3 w-3"}),"Due: ",new Date(O.due_date).toLocaleDateString("sv-SE")]}),c.jsxs("div",{children:["Created: ",new Date(O.created_at).toLocaleDateString("sv-SE")]}),O.updated_at!==O.created_at&&c.jsxs("div",{children:["Updated: ",new Date(O.updated_at).toLocaleDateString("sv-SE")]})]})]})},O.id)})})]})})]})]}),c.jsx("div",{className:"flex justify-end pt-4 border-t flex-shrink-0",children:c.jsx(H,{variant:"outline",onClick:()=>t(!1),children:"Close"})})]})}):null}function qat({open:e,onOpenChange:t}){const{invoiceItems:n,markAsInvoiced:r}=xs(),{clients:i}=Sn(),{projects:s}=Jn(),{toast:a}=mo(),[o,l]=w.useState([]),[u,d]=w.useState(!1),f=n.filter(b=>b.status==="draft"),h=b=>{l(x=>x.includes(b)?x.filter(S=>S!==b):[...x,b])},p=()=>{o.length===f.length?l([]):l(f.map(b=>b.id))},m=async()=>{if(o.length===0){a({title:"No items selected",description:"Please select at least one item to mark as invoiced",variant:"destructive"});return}d(!0);try{await r(o),a({title:"Success",description:`${o.length} item(s) marked as invoiced`}),l([]),t(!1)}catch{a({title:"Error",description:"Failed to update invoice items",variant:"destructive"})}finally{d(!1)}},g=b=>i.find(x=>x.id===b),v=b=>s.find(x=>x.id===b),y=o.reduce((b,x)=>{const S=f.find(E=>E.id===x);return b+((S==null?void 0:S.total_amount)||0)},0);return c.jsx(kt,{open:e,onOpenChange:t,children:c.jsxs(St,{className:"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[c.jsx(_t,{className:"flex-shrink-0",children:c.jsxs(Nt,{className:"flex items-center gap-2",children:[c.jsx(Ks,{className:"h-5 w-5"}),"Mark as Invoiced"]})}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-4",children:f.length===0?c.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[c.jsx(Ks,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),c.jsx("p",{children:"No draft items available"}),c.jsx("p",{className:"text-sm",children:"All items have already been invoiced or paid"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Aa,{checked:o.length===f.length&&f.length>0,onCheckedChange:p}),c.jsxs("span",{className:"font-medium",children:["Select All (",f.length," draft items)"]})]}),c.jsx("div",{className:"text-sm text-muted-foreground",children:o.length>0&&c.jsxs("span",{children:[o.length," selected  ",le(y)]})})]}),c.jsx("div",{className:"space-y-3",children:f.sort((b,x)=>new Date(x.created_at).getTime()-new Date(b.created_at).getTime()).map(b=>{const x=g(b.client_id),S=v(b.project_id),E=o.includes(b.id);return c.jsx(Z,{className:`cursor-pointer transition-colors ${E?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"}`,onClick:()=>h(b.id),children:c.jsx(ee,{className:"p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Aa,{checked:E,onCheckedChange:()=>h(b.id)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h4",{className:"font-medium truncate",children:b.description}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Tt,{variant:"secondary",children:"Draft"}),c.jsx("span",{className:"font-semibold text-green-600",children:le(b.total_amount)})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm text-muted-foreground",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Hw,{className:"h-3 w-3"}),c.jsx("span",{children:(x==null?void 0:x.name)||"Unknown Client"})]}),c.jsxs("div",{children:["Project: ",(S==null?void 0:S.name)||"No Project"]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(At,{className:"h-3 w-3"}),c.jsx("span",{children:new Date(b.invoice_date).toLocaleDateString("sv-SE")})]})]}),c.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[c.jsx("span",{children:b.hours?`${b.hours} hours @ ${le(b.hourly_rate||0)}/h`:"Fixed price"}),c.jsxs("span",{children:["Created: ",new Date(b.created_at).toLocaleDateString("sv-SE")]})]})]})]})})},b.id)})})]})}),c.jsxs("div",{className:"flex justify-between items-center pt-4 border-t flex-shrink-0",children:[c.jsx("div",{className:"text-sm text-muted-foreground",children:o.length>0&&c.jsxs("span",{children:[o.length," item(s) selected  Total: ",le(y)]})}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx(H,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),c.jsx(H,{onClick:m,disabled:o.length===0||u,children:u?"Updating...":`Mark ${o.length} as Invoiced`})]})]})]})})}function Kat({open:e,onOpenChange:t}){const{invoiceItems:n,markAsPaid:r}=xs(),{clients:i}=Sn(),{projects:s}=Jn(),{toast:a}=mo(),[o,l]=w.useState([]),[u,d]=w.useState(!1),f=n.filter(b=>b.status==="sent"),h=b=>{l(x=>x.includes(b)?x.filter(S=>S!==b):[...x,b])},p=()=>{o.length===f.length?l([]):l(f.map(b=>b.id))},m=async()=>{if(o.length===0){a({title:"No items selected",description:"Please select at least one item to mark as paid",variant:"destructive"});return}d(!0);try{await r(o),a({title:"Success",description:`${o.length} item(s) marked as paid`}),l([]),t(!1)}catch{a({title:"Error",description:"Failed to update invoice items",variant:"destructive"})}finally{d(!1)}},g=b=>i.find(x=>x.id===b),v=b=>s.find(x=>x.id===b),y=o.reduce((b,x)=>{const S=f.find(E=>E.id===x);return b+((S==null?void 0:S.total_amount)||0)},0);return c.jsx(kt,{open:e,onOpenChange:t,children:c.jsxs(St,{className:"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[c.jsx(_t,{className:"flex-shrink-0",children:c.jsxs(Nt,{className:"flex items-center gap-2",children:[c.jsx(mn,{className:"h-5 w-5"}),"Mark as Paid"]})}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-4",children:f.length===0?c.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[c.jsx(mn,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),c.jsx("p",{children:"No invoiced items available"}),c.jsx("p",{className:"text-sm",children:"Mark some draft items as invoiced first"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Aa,{checked:o.length===f.length&&f.length>0,onCheckedChange:p}),c.jsxs("span",{className:"font-medium",children:["Select All (",f.length," invoiced items)"]})]}),c.jsx("div",{className:"text-sm text-muted-foreground",children:o.length>0&&c.jsxs("span",{children:[o.length," selected  ",le(y)]})})]}),c.jsx("div",{className:"space-y-3",children:f.sort((b,x)=>new Date(x.created_at).getTime()-new Date(b.created_at).getTime()).map(b=>{const x=g(b.client_id),S=v(b.project_id),E=o.includes(b.id);return c.jsx(Z,{className:`cursor-pointer transition-colors ${E?"ring-2 ring-green-500 bg-green-50":"hover:bg-gray-50"}`,onClick:()=>h(b.id),children:c.jsx(ee,{className:"p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Aa,{checked:E,onCheckedChange:()=>h(b.id)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h4",{className:"font-medium truncate",children:b.description}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Tt,{variant:"outline",className:"text-blue-600 border-blue-600",children:"Sent"}),c.jsx("span",{className:"font-semibold text-green-600",children:le(b.total_amount)})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm text-muted-foreground",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Hw,{className:"h-3 w-3"}),c.jsx("span",{children:(x==null?void 0:x.name)||"Unknown Client"})]}),c.jsxs("div",{children:["Project: ",(S==null?void 0:S.name)||"No Project"]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(At,{className:"h-3 w-3"}),c.jsx("span",{children:new Date(b.invoice_date).toLocaleDateString("sv-SE")})]})]}),c.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[c.jsx("span",{children:b.hours?`${b.hours} hours @ ${le(b.hourly_rate||0)}/h`:"Fixed price"}),c.jsxs("span",{children:["Invoiced: ",new Date(b.updated_at).toLocaleDateString("sv-SE")]})]})]})]})})},b.id)})})]})}),c.jsxs("div",{className:"flex justify-between items-center pt-4 border-t flex-shrink-0",children:[c.jsx("div",{className:"text-sm text-muted-foreground",children:o.length>0&&c.jsxs("span",{children:[o.length," item(s) selected  Total: ",le(y)]})}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx(H,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),c.jsx(H,{onClick:m,disabled:o.length===0||u,className:"bg-green-600 hover:bg-green-700",children:u?"Updating...":`Mark ${o.length} as Paid`})]})]})]})})}function Gat(){const[e,t]=w.useState(!1),[n,r]=w.useState(!1),[i,s]=w.useState(!1),[a,o]=w.useState(!1),[l,u]=w.useState(!1),[d,f]=w.useState(""),[h,p]=w.useState(!1),[m,g]=w.useState(!1),v=Wh(),{invoiceItems:y,loading:b,getInvoiceSummary:x,getClientSummaries:S}=xs(),{clients:E,loading:_}=Sn(),{projects:T,loading:C}=Jn();w.useEffect(()=>{v.invoiceModalOpen&&(t(!0),v.setInvoiceModalOpen(!1))},[v.invoiceModalOpen,v]);const k=b||_||C,A=x(),j=S(),D=()=>{t(!0)},P=()=>{r(!0)},M=()=>{p(!0)},L=()=>{g(!0)},O=()=>{s(!0)},B=()=>{o(!0)},R=I=>{f(I),u(!0)},F=I=>{console.log("Item clicked:",I)};return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Invoicing"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Track unbilled work and manage invoice items for clients and projects"})]}),c.jsxs(H,{onClick:D,className:"sm:w-auto w-full",children:[c.jsx(nt,{className:"h-4 w-4 mr-2"}),"New Invoice Item"]})]}),c.jsx(Dat,{summary:A,loading:k}),c.jsx("div",{className:"w-full",children:c.jsx(Lat,{onCreateInvoiceItem:D,onCreateFromTime:P,onMarkAsInvoiced:M,onMarkAsPaid:L,onExportToFortnox:O,onExportPlainText:B})}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-[600px]",children:[c.jsx("div",{className:"lg:col-span-1",children:c.jsx(Mat,{clients:j,loading:k,onClientClick:R})}),c.jsx("div",{className:"lg:col-span-1",children:c.jsx(Rat,{items:y,loading:k,onItemClick:F,clients:E,projects:T})})]}),c.jsx("div",{className:"grid grid-cols-1 min-h-[400px]",children:c.jsx(Fat,{items:y,loading:k})}),!k&&y.length===0&&c.jsx(Z,{className:"text-center py-12",children:c.jsxs(ee,{children:[c.jsx(Ks,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No invoice items yet"}),c.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Start tracking your unbilled work by creating invoice items for your clients and projects. You can create items manually or convert time entries into billable items."}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[c.jsxs(H,{onClick:D,children:[c.jsx(nt,{className:"h-4 w-4 mr-2"}),"Create First Invoice Item"]}),c.jsxs(H,{variant:"outline",onClick:P,children:[c.jsx(ht,{className:"h-4 w-4 mr-2"}),"Import from Time Tracking"]})]})]})}),c.jsx(Bat,{open:e,onOpenChange:t}),c.jsx($at,{open:n,onOpenChange:r}),c.jsx(Hat,{open:i,onOpenChange:s}),c.jsx(Vat,{open:a,onOpenChange:o}),c.jsx(Wat,{open:l,onOpenChange:u,clientId:d}),c.jsx(qat,{open:h,onOpenChange:p}),c.jsx(Kat,{open:m,onOpenChange:g})]})}function Yat(e){const[t,n]=w.useState([]),[r,i]=w.useState(null),[s,a]=w.useState(!0),[o,l]=w.useState(null),u=w.useCallback(async()=>{if(!e){n([]),i(null),a(!1);return}try{a(!0);const{data:g,error:v}=await J.from("cv_versions").select("*").eq("cv_profile_id",e).order("version_number",{ascending:!1});if(v)throw v;const y=g||[];n(y),i(y.find(b=>b.is_current)||y[0]||null)}catch(g){console.error("Error fetching CV versions:",g),l(g instanceof Error?g.message:"Unknown error")}finally{a(!1)}},[e]),d=async(g,v,y,b="en")=>{if(!e)return null;try{const S=Math.max(0,...t.map(T=>T.version_number))+1;if(t.length>=3){const T=t.filter(C=>!C.is_current).sort((C,k)=>C.version_number-k.version_number)[0];T&&await J.from("cv_versions").delete().eq("id",T.id)}await J.from("cv_versions").update({is_current:!1}).eq("cv_profile_id",e);const{data:E,error:_}=await J.from("cv_versions").insert([{cv_profile_id:e,version_name:g,version_number:S,data:v,role_focus:y,language:b,is_current:!0}]).select().single();if(_)throw _;return await u(),E}catch(x){return console.error("Error creating CV version:",x),l(x instanceof Error?x.message:"Failed to create version"),null}},f=async(g,v)=>{try{const{error:y}=await J.from("cv_versions").update({...v,updated_at:new Date().toISOString()}).eq("id",g);if(y)throw y;return await u(),!0}catch(y){return console.error("Error updating CV version:",y),l(y instanceof Error?y.message:"Failed to update version"),!1}},h=async g=>{try{await J.from("cv_versions").update({is_current:!1}).eq("cv_profile_id",e);const{error:v}=await J.from("cv_versions").update({is_current:!0}).eq("id",g);if(v)throw v;return await u(),!0}catch(v){return console.error("Error setting current version:",v),l(v instanceof Error?v.message:"Failed to set current version"),!1}},p=async g=>{try{const{error:v}=await J.from("cv_versions").delete().eq("id",g);if(v)throw v;return await u(),!0}catch(v){return console.error("Error deleting CV version:",v),l(v instanceof Error?v.message:"Failed to delete version"),!1}},m=async(g,v)=>{try{const y=t.find(b=>b.id===g);if(!y)throw new Error("Version not found");return await d(v,y.data,y.role_focus,y.language)}catch(y){return console.error("Error duplicating CV version:",y),l(y instanceof Error?y.message:"Failed to duplicate version"),null}};return w.useEffect(()=>{u()},[u]),{versions:t,currentVersion:r,loading:s,error:o,createVersion:d,updateVersion:f,setCurrentVersionById:h,deleteVersion:p,duplicateVersion:m,refetch:u}}function Xat(e){const[t,n]=w.useState([]),[r,i]=w.useState(!0),[s,a]=w.useState(null),o=w.useCallback(async()=>{if(!e){n([]),i(!1);return}try{i(!0);const{data:h,error:p}=await J.from("cv_projects_enhanced").select("*").eq("cv_profile_id",e).order("sort_order",{ascending:!0});if(p)throw p;n(h||[])}catch(h){console.error("Error fetching projects:",h),a(h instanceof Error?h.message:"Unknown error")}finally{i(!1)}},[e]);w.useEffect(()=>{o()},[o]);const l=async h=>{try{const{data:p,error:m}=await J.from("cv_projects").insert([{...h,cv_profile_id:e}]).select().single();if(m)throw m;return await o(),p}catch(p){return console.error("Error creating project:",p),a(p instanceof Error?p.message:"Unknown error"),null}},u=async(h,p)=>{try{const{error:m}=await J.from("cv_projects").update(p).eq("id",h);if(m)throw m;return await o(),!0}catch(m){return console.error("Error updating project:",m),a(m instanceof Error?m.message:"Unknown error"),!1}};return{projects:t,loading:r,error:s,fetchProjects:o,createProject:l,updateProject:u,deleteProject:async h=>{try{const{error:p}=await J.from("cv_projects").delete().eq("id",h);if(p)throw p;return await o(),!0}catch(p){return console.error("Error deleting project:",p),a(p instanceof Error?p.message:"Unknown error"),!1}},toggleFeatured:async h=>{const p=t.find(m=>m.id===h);return p?u(h,{is_featured:!p.is_featured}):!1}}}function Qat(e){const[t,n]=w.useState([]),[r,i]=w.useState(!0),[s,a]=w.useState(null),o=w.useCallback(async()=>{if(!e){n([]),i(!1);return}try{i(!0);const{data:f,error:h}=await J.from("cv_experiences_enhanced").select("*").eq("cv_profile_id",e).order("start_date",{ascending:!1});if(h)throw h;n(f||[])}catch(f){console.error("Error fetching experiences:",f),a(f instanceof Error?f.message:"Unknown error")}finally{i(!1)}},[e]);return w.useEffect(()=>{o()},[o]),{experiences:t,loading:r,error:s,fetchExperiences:o,createExperience:async f=>{try{const{data:h,error:p}=await J.from("cv_experiences").insert([{...f,cv_profile_id:e}]).select().single();if(p)throw p;return await o(),h}catch(h){return console.error("Error creating experience:",h),a(h instanceof Error?h.message:"Unknown error"),null}},updateExperience:async(f,h)=>{try{const{error:p}=await J.from("cv_experiences").update(h).eq("id",f);if(p)throw p;return await o(),!0}catch(p){return console.error("Error updating experience:",p),a(p instanceof Error?p.message:"Unknown error"),!1}},deleteExperience:async f=>{try{const{error:h}=await J.from("cv_experiences").delete().eq("id",f);if(h)throw h;return await o(),!0}catch(h){return console.error("Error deleting experience:",h),a(h instanceof Error?h.message:"Unknown error"),!1}}}}function Jat(e){const[t,n]=w.useState([]),[r,i]=w.useState(!0),[s,a]=w.useState(null),o=w.useCallback(async()=>{if(!e){n([]),i(!1);return}try{i(!0);const{data:h,error:p}=await J.from("cv_education_comprehensive").select("*").eq("cv_profile_id",e).order("start_date",{ascending:!1});if(p)throw p;n(h||[])}catch(h){console.error("Error fetching education:",h),a(h instanceof Error?h.message:"Unknown error")}finally{i(!1)}},[e]);w.useEffect(()=>{o()},[o]);const l=async h=>{try{const{data:p,error:m}=await J.from("cv_education").insert([{...h,cv_profile_id:e}]).select().single();if(m)throw m;return await o(),p}catch(p){return console.error("Error creating education:",p),a(p instanceof Error?p.message:"Unknown error"),null}},u=async(h,p)=>{try{const{error:m}=await J.from("cv_education").update(p).eq("id",h);if(m)throw m;return await o(),!0}catch(m){return console.error("Error updating education:",m),a(m instanceof Error?m.message:"Unknown error"),!1}};return{education:t,loading:r,error:s,fetchEducation:o,createEducation:l,updateEducation:u,deleteEducation:async h=>{try{const{error:p}=await J.from("cv_education").delete().eq("id",h);if(p)throw p;return await o(),!0}catch(p){return console.error("Error deleting education:",p),a(p instanceof Error?p.message:"Unknown error"),!1}},toggleFeatured:async h=>{const p=t.find(m=>m.id===h);return p?u(h,{is_featured:!p.is_featured}):!1}}}function Zat(e){const[t,n]=w.useState([]),[r,i]=w.useState(!0),[s,a]=w.useState(null),o=w.useCallback(async()=>{if(!e){n([]),i(!1);return}try{i(!0);const{data:g,error:v}=await J.from("cv_certifications_status").select("*").eq("cv_profile_id",e).order("issue_date",{ascending:!1});if(v)throw v;n(g||[])}catch(g){console.error("Error fetching certifications:",g),a(g instanceof Error?g.message:"Unknown error")}finally{i(!1)}},[e]);w.useEffect(()=>{o()},[o]);const l=async g=>{try{const{data:v,error:y}=await J.from("cv_certifications").insert([{...g,cv_profile_id:e}]).select().single();if(y)throw y;return await o(),v}catch(v){return console.error("Error creating certification:",v),a(v instanceof Error?v.message:"Unknown error"),null}},u=async(g,v)=>{try{const{error:y}=await J.from("cv_certifications").update(v).eq("id",g);if(y)throw y;return await o(),!0}catch(y){return console.error("Error updating certification:",y),a(y instanceof Error?y.message:"Unknown error"),!1}};return{certifications:t,loading:r,error:s,fetchCertifications:o,createCertification:l,updateCertification:u,deleteCertification:async g=>{try{const{error:v}=await J.from("cv_certifications").delete().eq("id",g);if(v)throw v;return await o(),!0}catch(v){return console.error("Error deleting certification:",v),a(v instanceof Error?v.message:"Unknown error"),!1}},toggleFeatured:async g=>{const v=t.find(y=>y.id===g);return v?u(g,{is_featured:!v.is_featured}):!1},getExpiringSoon:()=>t.filter(g=>g.status==="Expiring Soon"),getExpired:()=>t.filter(g=>g.status==="Expired"),getValidCertifications:()=>t.filter(g=>g.status==="Valid"||g.status==="Permanent")}}function eot(e){const[t,n]=w.useState([]),[r,i]=w.useState(!0),[s,a]=w.useState(null),o=w.useCallback(async()=>{if(!e){n([]),i(!1);return}try{i(!0);const{data:m,error:g}=await J.from("cv_skills").select("*").eq("cv_profile_id",e).order("is_highlighted",{ascending:!1}).order("sort_order",{ascending:!0}).order("skill_name",{ascending:!0});if(g)throw g;n(m||[])}catch(m){a(m instanceof Error?m.message:"An error occurred")}finally{i(!1)}},[e]),l=async m=>{try{const{data:g,error:v}=await J.from("cv_skills").insert([m]).select().single();if(v)throw v;return n(y=>[...y,g].sort((b,x)=>b.skill_name.localeCompare(x.skill_name))),g}catch(g){throw new Error(g instanceof Error?g.message:"Failed to create skill")}},u=async(m,g)=>{try{const{data:v,error:y}=await J.from("cv_skills").update(g).eq("id",m).select().single();if(y)throw y;return n(b=>b.map(x=>x.id===m?v:x)),v}catch(v){throw new Error(v instanceof Error?v.message:"Failed to update skill")}},d=async m=>{try{const{error:g}=await J.from("cv_skills").delete().eq("id",m);if(g)throw g;n(v=>v.filter(y=>y.id!==m))}catch(g){throw new Error(g instanceof Error?g.message:"Failed to delete skill")}},f=async m=>{try{const g=m.map((y,b)=>({id:y,sort_order:b})),{error:v}=await J.from("cv_skills").upsert(g);if(v)throw v;n(y=>{const b=[...y];return m.forEach((x,S)=>{const E=b.findIndex(_=>_.id===x);E!==-1&&(b[E].sort_order=S)}),b.sort((x,S)=>x.sort_order-S.sort_order)})}catch(g){throw new Error(g instanceof Error?g.message:"Failed to update skill order")}},h=()=>t.reduce((m,g)=>{const v=g.category||"Uncategorized";return m[v]||(m[v]=[]),m[v].push(g),m},{}),p=()=>{const m=t.length,g=t.filter(b=>b.is_highlighted).length,v=t.reduce((b,x)=>(b[x.skill_level]=(b[x.skill_level]||0)+1,b),{}),y=m>0?t.reduce((b,x)=>b+x.skill_level,0)/m:0;return{total:m,highlighted:g,byLevel:v,averageLevel:Math.round(y*10)/10,categories:Object.keys(h()).length}};return w.useEffect(()=>{o()},[o]),{skills:t,loading:r,error:s,createSkill:l,updateSkill:u,deleteSkill:d,updateSkillOrder:f,getSkillsByCategory:h,getSkillStats:p,refetch:o}}function tot(e,t=[],n=[],r=[],i=[],s=[],a=[]){return{personalInfo:{name:e.title.split(" - ")[0]||"Professional Name",title:e.target_role||e.title,email:e.email||"",phone:e.phone||"",location:e.location||"",linkedIn:e.linkedin_url,github:e.github_url,website:e.website_url},summary:{introduction:e.summary||"",keyStrengths:e.key_attributes||[],careerObjective:e.description},experience:t.map(o=>({company:o.company_name,position:o.role_title,period:E7(o.start_date,o.end_date,o.is_current),description:o.description||"",technologies:o.key_technologies||[],achievements:o.achievements||[]})),education:n.map(o=>({institution:o.institution_name,degree:o.degree,field:o.field_of_study||"",period:E7(o.start_date,o.end_date,o.is_current),gpa:o.grade})),skills:not(i),projects:s.map(o=>({name:o.project_name,description:o.description||"",technologies:o.technologies_used||[],url:o.project_url})),certifications:r.map(o=>({name:o.name,issuer:o.issuing_organization||"",date:o.issue_date||o.created_at.split("T")[0],credentialId:o.credential_id})),languages:a.map(o=>({language:o.language_name,proficiency:rot(o.proficiency_level)})),templateSettings:{template:"frank-digital",theme:"blue",showPhoto:!1,showReferences:!0,language:"en",fontSize:"medium",margins:"normal",colorScheme:"#0066cc"}}}function E7(e,t,n){if(!e)return"";const i=new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short"});if(n)return`${i} - Present`;if(!t)return i;const a=new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short"});return`${i} - ${a}`}function not(e){const t={};return e.forEach(n=>{const r=n.category||"Technical Skills";t[r]||(t[r]=[]),t[r].push(n.skill_name)}),Object.entries(t).map(([n,r])=>({category:n,items:r}))}function rot(e){switch(e){case 1:return"Beginner";case 2:return"Elementary";case 3:return"Intermediate";case 4:return"Advanced";case 5:return"Native";default:return"Intermediate"}}function S7(){return{personalInfo:{name:"",title:"",email:"",phone:"",location:"",linkedIn:"",github:"",website:""},summary:{introduction:"",keyStrengths:[],careerObjective:""},experience:[],education:[],skills:[],projects:[],certifications:[],languages:[],templateSettings:{template:"frank-digital",theme:"blue",showPhoto:!1,showReferences:!0,language:"en",fontSize:"medium",margins:"normal",colorScheme:"#0066cc"}}}function iot({data:e,onChange:t}){const n=(r,i)=>{t({...e,[r]:i})};return c.jsxs(Z,{children:[c.jsx(de,{children:c.jsx(he,{children:"Personal Information"})}),c.jsxs(ee,{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"name",children:"Full Name"}),c.jsx(ce,{id:"name",value:e.name,onChange:r=>n("name",r.target.value),placeholder:"Your full name"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"title",children:"Professional Title"}),c.jsx(ce,{id:"title",value:e.title,onChange:r=>n("title",r.target.value),placeholder:"e.g., Senior Software Engineer"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"email",children:"Email"}),c.jsx(ce,{id:"email",type:"email",value:e.email,onChange:r=>n("email",r.target.value),placeholder:"your.email@example.com"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"phone",children:"Phone"}),c.jsx(ce,{id:"phone",value:e.phone,onChange:r=>n("phone",r.target.value),placeholder:"+46 70 123 45 67"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"location",children:"Location"}),c.jsx(ce,{id:"location",value:e.location,onChange:r=>n("location",r.target.value),placeholder:"Stockholm, Sweden"})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"linkedin",children:"LinkedIn"}),c.jsx(ce,{id:"linkedin",value:e.linkedIn||"",onChange:r=>n("linkedIn",r.target.value),placeholder:"https://linkedin.com/in/yourprofile"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"github",children:"GitHub"}),c.jsx(ce,{id:"github",value:e.github||"",onChange:r=>n("github",r.target.value),placeholder:"https://github.com/yourusername"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"website",children:"Website"}),c.jsx(ce,{id:"website",value:e.website||"",onChange:r=>n("website",r.target.value),placeholder:"https://yourwebsite.com"})]})]})]})]})}function sot({data:e,onChange:t}){const[n,r]=w.useState(""),i=(o,l)=>{t({...e,[o]:l})},s=()=>{n.trim()&&(i("keyStrengths",[...e.keyStrengths,n.trim()]),r(""))},a=o=>{const l=e.keyStrengths.filter((u,d)=>d!==o);i("keyStrengths",l)};return c.jsxs(Z,{children:[c.jsx(de,{children:c.jsx(he,{children:"Professional Summary"})}),c.jsxs(ee,{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"introduction",children:"Professional Introduction"}),c.jsx(Ca,{id:"introduction",value:e.introduction,onChange:o=>i("introduction",o.target.value),placeholder:"Write a compelling professional introduction that highlights your experience and expertise...",rows:4})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"objective",children:"Career Objective"}),c.jsx(Ca,{id:"objective",value:e.careerObjective||"",onChange:o=>i("careerObjective",o.target.value),placeholder:"Describe your career goals and what you're looking for in your next role...",rows:3})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(ie,{children:"Key Strengths"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:e.keyStrengths.map((o,l)=>c.jsxs(Tt,{variant:"secondary",className:"flex items-center gap-1",children:[o,c.jsx(H,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>a(l),children:c.jsx(wr,{className:"h-3 w-3"})})]},l))}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(ce,{value:n,onChange:o=>r(o.target.value),placeholder:"Add a key strength...",onKeyPress:o=>o.key==="Enter"&&s()}),c.jsx(H,{onClick:s,disabled:!n.trim(),children:c.jsx(nt,{className:"h-4 w-4"})})]})]})]})]})}const aot=e=>e.map(t=>({category:t.category,skills:t.items.map(n=>({name:n,level:3,category:t.category}))})),oot=e=>e.map(t=>({category:t.category,items:t.skills.map(n=>n.name)}));function lot({data:e,onChange:t}){const[n,r]=w.useState(()=>aot(e)),[i,s]=w.useState(""),[a,o]=w.useState(""),[l,u]=w.useState(3),d=x=>{r(x),t(oot(x))},f=()=>{if(i.trim()){const x=[...n,{category:i.trim(),skills:[]}];d(x),s("")}},h=x=>{const S=n.filter((E,_)=>_!==x);d(S)},p=x=>{if(a.trim()){const S=n.map((E,_)=>_===x?{...E,skills:[...E.skills,{name:a.trim(),level:l,category:E.category}]}:E);d(S),o(""),u(3)}},m=(x,S)=>{const E=n.map((_,T)=>T===x?{..._,skills:_.skills.filter((C,k)=>k!==S)}:_);d(E)},g=(x,S,E)=>{const _=n.map((T,C)=>C===x?{...T,skills:T.skills.map((k,A)=>A===S?{...k,level:E}:k)}:T);d(_)},v=x=>{switch(x){case 1:return"text-red-500";case 2:return"text-orange-500";case 3:return"text-yellow-500";case 4:return"text-blue-500";case 5:return"text-green-500";default:return"text-gray-400"}},y=x=>{switch(x){case 1:return"Grundlggande";case 2:return"Ngon erfarenhet";case 3:return"God erfarenhet";case 4:return"Mycket god erfarenhet";case 5:return"Expert";default:return"Ej bedmd"}},b=({level:x,onRatingChange:S,readonly:E=!1})=>c.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(_=>c.jsx("button",{type:"button",disabled:E,onClick:()=>S==null?void 0:S(_),title:`Set rating to ${_} stars - ${y(_)}`,className:`transition-colors ${E?"cursor-default":"cursor-pointer hover:scale-110"}`,children:c.jsx(a2,{className:`h-4 w-4 ${_<=x?v(x):"text-gray-300"} ${_<=x?"fill-current":""}`})},_)),c.jsx("span",{className:"ml-2 text-sm font-medium text-muted-foreground",children:y(x)})]});return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx(t2,{className:"h-6 w-6 text-primary"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold",children:"Skills & Competencies"}),c.jsx("p",{className:"text-muted-foreground",children:"Add your technical and professional skills with Kammarkollegiet-style competency ratings"})]})]}),c.jsxs(Z,{className:"border-dashed",children:[c.jsx(de,{children:c.jsxs(he,{className:"text-lg flex items-center gap-2",children:[c.jsx(a2,{className:"h-5 w-5"}),"Kompetensgradering (Kammarkollegiet-skala)"]})}),c.jsx(ee,{children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[1,2,3,4,5].map(x=>c.jsx("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/50",children:c.jsx(b,{level:x,readonly:!0})},x))})})]}),c.jsxs(Z,{children:[c.jsx(de,{children:c.jsx(he,{className:"text-lg",children:"Add New Skill Category"})}),c.jsx(ee,{children:c.jsxs("div",{className:"flex gap-3",children:[c.jsx(ce,{placeholder:"Category name (e.g., Programming Languages, Frameworks)",value:i,onChange:x=>s(x.target.value),onKeyPress:x=>x.key==="Enter"&&f(),className:"flex-1"}),c.jsxs(H,{onClick:f,disabled:!i.trim(),children:[c.jsx(nt,{className:"h-4 w-4 mr-2"}),"Add Category"]})]})})]}),c.jsx("div",{className:"space-y-6",children:n.map((x,S)=>c.jsxs(Z,{className:"overflow-hidden",children:[c.jsx(de,{className:"bg-muted/50",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(he,{className:"text-xl",children:x.category}),c.jsx(H,{variant:"outline",size:"sm",onClick:()=>h(S),className:"text-destructive hover:text-destructive",children:c.jsx(wr,{className:"h-4 w-4"})})]})}),c.jsxs(ee,{className:"p-6",children:[c.jsxs("div",{className:"mb-6 p-4 rounded-lg border-2 border-dashed border-muted",children:[c.jsx(ie,{className:"text-sm font-medium mb-3 block",children:"Add New Skill"}),c.jsxs("div",{className:"flex gap-3 items-end",children:[c.jsx("div",{className:"flex-1",children:c.jsx(ce,{placeholder:"Skill name",value:a,onChange:E=>o(E.target.value),onKeyPress:E=>E.key==="Enter"&&p(S)})}),c.jsxs("div",{className:"flex-shrink-0",children:[c.jsx(ie,{className:"text-xs text-muted-foreground mb-2 block",children:"Competency Level"}),c.jsx(b,{level:l,onRatingChange:u})]}),c.jsxs(H,{onClick:()=>p(S),disabled:!a.trim(),size:"lg",children:[c.jsx(nt,{className:"h-4 w-4 mr-2"}),"Add Skill"]})]})]}),c.jsxs("div",{className:"space-y-3",children:[x.skills.map((E,_)=>c.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-background hover:bg-muted/30 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[c.jsx("span",{className:"font-medium text-lg",children:E.name}),c.jsx(b,{level:E.level,onRatingChange:T=>g(S,_,T)})]}),c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>m(S,_),className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:c.jsx(wr,{className:"h-4 w-4"})})]},_)),x.skills.length===0&&c.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No skills added to this category yet."})]})]})]},S))}),n.length===0&&c.jsx(Z,{className:"border-dashed",children:c.jsxs(ee,{className:"text-center py-12",children:[c.jsx(t2,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No skill categories yet"}),c.jsx("p",{className:"text-muted-foreground mb-6",children:"Start by adding a skill category above, then add individual skills with competency ratings."})]})})]})}function cot({data:e,onChange:t}){const[n,r]=w.useState(!1),[i,s]=w.useState(null),a={company:"",position:"",period:"",description:"",technologies:[],achievements:[]},[o,l]=w.useState(a),u=()=>{o.company&&o.position&&(t([...e,o]),l(a),r(!1))},d=(y,b)=>{const x=e.map((S,E)=>E===y?b:S);t(x),s(null)},f=y=>{const b=e.filter((x,S)=>S!==y);t(b)},h=(y,b)=>b.trim()&&!y.technologies.includes(b.trim())?{...y,technologies:[...y.technologies,b.trim()]}:y,p=(y,b)=>({...y,technologies:y.technologies.filter((x,S)=>S!==b)}),m=(y,b)=>b.trim()?{...y,achievements:[...y.achievements,b.trim()]}:y,g=(y,b)=>({...y,achievements:y.achievements.filter((x,S)=>S!==b)}),v=({experience:y,onChange:b,onSave:x,onCancel:S})=>{const[E,_]=w.useState(""),[T,C]=w.useState("");return c.jsxs(Z,{children:[c.jsx(de,{children:c.jsx(he,{className:"text-lg",children:y.company?`${y.position} at ${y.company}`:"New Experience"})}),c.jsxs(ee,{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"company",children:"Company"}),c.jsx(ce,{id:"company",value:y.company,onChange:k=>b({...y,company:k.target.value}),placeholder:"Company name"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"position",children:"Position"}),c.jsx(ce,{id:"position",value:y.position,onChange:k=>b({...y,position:k.target.value}),placeholder:"Job title"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"period",children:"Period"}),c.jsx(ce,{id:"period",value:y.period,onChange:k=>b({...y,period:k.target.value}),placeholder:"e.g., Jan 2020 - Dec 2023"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"description",children:"Description"}),c.jsx(Ca,{id:"description",value:y.description,onChange:k=>b({...y,description:k.target.value}),placeholder:"Describe your role and responsibilities...",rows:3})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(ie,{children:"Technologies Used"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:y.technologies.map((k,A)=>c.jsxs(Tt,{variant:"secondary",className:"flex items-center gap-1",children:[k,c.jsx(H,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>b(p(y,A)),children:c.jsx(wr,{className:"h-3 w-3"})})]},A))}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(ce,{value:E,onChange:k=>_(k.target.value),placeholder:"Add technology...",onKeyPress:k=>{k.key==="Enter"&&(b(h(y,E)),_(""))}}),c.jsx(H,{onClick:()=>{b(h(y,E)),_("")},disabled:!E.trim(),children:c.jsx(nt,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(ie,{children:"Key Achievements"}),c.jsx("div",{className:"space-y-2",children:y.achievements.map((k,A)=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded",children:[c.jsx("span",{className:"flex-1",children:k}),c.jsx(H,{variant:"ghost",size:"sm",onClick:()=>b(g(y,A)),children:c.jsx(wr,{className:"h-3 w-3"})})]},A))}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(ce,{value:T,onChange:k=>C(k.target.value),placeholder:"Add achievement...",onKeyPress:k=>{k.key==="Enter"&&(b(m(y,T)),C(""))}}),c.jsx(H,{onClick:()=>{b(m(y,T)),C("")},disabled:!T.trim(),children:c.jsx(nt,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(H,{variant:"outline",onClick:S,children:"Cancel"}),c.jsx(H,{onClick:x,disabled:!y.company||!y.position,children:"Save Experience"})]})]})]})};return c.jsxs("div",{className:"space-y-6",children:[c.jsx(Z,{children:c.jsx(de,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(he,{children:"Work Experience"}),c.jsxs(H,{onClick:()=>r(!0),disabled:n||i!==null,children:[c.jsx(nt,{className:"h-4 w-4 mr-1"}),"Add Experience"]})]})})}),n&&c.jsx(v,{experience:o,onChange:l,onSave:u,onCancel:()=>{r(!1),l(a)}}),e.map((y,b)=>c.jsx("div",{children:i===b?c.jsx(v,{experience:y,onChange:x=>l(x),onSave:()=>d(b,o),onCancel:()=>{s(null),l(a)}}):c.jsxs(Z,{children:[c.jsx(de,{className:"pb-3",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{children:[c.jsx(he,{className:"text-lg",children:y.position}),c.jsx("p",{className:"text-muted-foreground",children:y.company}),c.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1 mt-1",children:[c.jsx(At,{className:"h-3 w-3"}),y.period]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(H,{variant:"outline",size:"sm",onClick:()=>{s(b),l(y)},children:"Edit"}),c.jsx(H,{variant:"outline",size:"sm",onClick:()=>f(b),children:c.jsx(wr,{className:"h-3 w-3"})})]})]})}),c.jsxs(ee,{className:"space-y-4",children:[y.description&&c.jsx("p",{className:"text-sm",children:y.description}),y.technologies.length>0&&c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium mb-2",children:"Technologies:"}),c.jsx("div",{className:"flex flex-wrap gap-1",children:y.technologies.map((x,S)=>c.jsx(Tt,{variant:"secondary",className:"text-xs",children:x},S))})]}),y.achievements.length>0&&c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium mb-2",children:"Key Achievements:"}),c.jsx("ul",{className:"text-sm space-y-1",children:y.achievements.map((x,S)=>c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-muted-foreground",children:""}),c.jsx("span",{children:x})]},S))})]})]})]})},b)),e.length===0&&!n&&c.jsx(Z,{children:c.jsxs(ee,{className:"text-center py-8",children:[c.jsx("p",{className:"text-muted-foreground",children:"No work experience added yet."}),c.jsxs(H,{variant:"outline",onClick:()=>r(!0),className:"mt-4",children:[c.jsx(nt,{className:"h-4 w-4 mr-1"}),"Add Your First Experience"]})]})})]})}function uot({data:e,onChange:t}){const[n,r]=w.useState(!1),[i,s]=w.useState(null),a={name:"",description:"",technologies:[],url:""},[o,l]=w.useState(a),u=()=>{o.name&&o.description&&(t([...e,o]),l(a),r(!1))},d=(g,v)=>{const y=e.map((b,x)=>x===g?v:b);t(y),s(null)},f=g=>{const v=e.filter((y,b)=>b!==g);t(v)},h=(g,v)=>v.trim()&&!g.technologies.includes(v.trim())?{...g,technologies:[...g.technologies,v.trim()]}:g,p=(g,v)=>({...g,technologies:g.technologies.filter((y,b)=>b!==v)}),m=({project:g,onChange:v,onSave:y,onCancel:b})=>{const[x,S]=w.useState("");return c.jsxs(Z,{children:[c.jsx(de,{children:c.jsx(he,{className:"text-lg",children:g.name||"New Project"})}),c.jsxs(ee,{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"project-name",children:"Project Name"}),c.jsx(ce,{id:"project-name",value:g.name,onChange:E=>v({...g,name:E.target.value}),placeholder:"Project name"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"project-url",children:"Project URL (optional)"}),c.jsx(ce,{id:"project-url",value:g.url,onChange:E=>v({...g,url:E.target.value}),placeholder:"https://project-url.com"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"project-description",children:"Description"}),c.jsx(Ca,{id:"project-description",value:g.description,onChange:E=>v({...g,description:E.target.value}),placeholder:"Describe the project, your role, and key outcomes...",rows:4})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(ie,{children:"Technologies Used"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:g.technologies.map((E,_)=>c.jsxs(Tt,{variant:"secondary",className:"flex items-center gap-1",children:[E,c.jsx(H,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>v(p(g,_)),children:c.jsx(wr,{className:"h-3 w-3"})})]},_))}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(ce,{value:x,onChange:E=>S(E.target.value),placeholder:"Add technology...",onKeyPress:E=>{E.key==="Enter"&&(v(h(g,x)),S(""))}}),c.jsx(H,{onClick:()=>{v(h(g,x)),S("")},disabled:!x.trim(),children:c.jsx(nt,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(H,{variant:"outline",onClick:b,children:"Cancel"}),c.jsx(H,{onClick:y,disabled:!g.name||!g.description,children:"Save Project"})]})]})]})};return c.jsxs("div",{className:"space-y-6",children:[c.jsx(Z,{children:c.jsx(de,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(he,{children:"Projects & Portfolio"}),c.jsxs(H,{onClick:()=>r(!0),disabled:n||i!==null,children:[c.jsx(nt,{className:"h-4 w-4 mr-1"}),"Add Project"]})]})})}),n&&c.jsx(m,{project:o,onChange:l,onSave:u,onCancel:()=>{r(!1),l(a)}}),e.map((g,v)=>c.jsx("div",{children:i===v?c.jsx(m,{project:g,onChange:y=>l(y),onSave:()=>d(v,o),onCancel:()=>{s(null),l(a)}}):c.jsxs(Z,{children:[c.jsx(de,{className:"pb-3",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(he,{className:"text-lg",children:g.name}),g.url&&c.jsx("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-700",title:"View project",children:c.jsx(n2,{className:"h-4 w-4"})})]})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(H,{variant:"outline",size:"sm",onClick:()=>{s(v),l(g)},children:"Edit"}),c.jsx(H,{variant:"outline",size:"sm",onClick:()=>f(v),children:c.jsx(wr,{className:"h-3 w-3"})})]})]})}),c.jsxs(ee,{className:"space-y-4",children:[c.jsx("p",{className:"text-sm",children:g.description}),g.technologies.length>0&&c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium mb-2",children:"Technologies:"}),c.jsx("div",{className:"flex flex-wrap gap-1",children:g.technologies.map((y,b)=>c.jsx(Tt,{variant:"secondary",className:"text-xs",children:y},b))})]}),g.url&&c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium mb-1",children:"Project URL:"}),c.jsxs("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[g.url,c.jsx(n2,{className:"h-3 w-3"})]})]})]})]})},v)),e.length===0&&!n&&c.jsx(Z,{children:c.jsxs(ee,{className:"text-center py-8",children:[c.jsx("p",{className:"text-muted-foreground",children:"No projects added yet."}),c.jsxs(H,{variant:"outline",onClick:()=>r(!0),className:"mt-4",children:[c.jsx(nt,{className:"h-4 w-4 mr-1"}),"Add Your First Project"]})]})})]})}function dot({data:e,onChange:t}){const n=()=>{const s={institution:"",degree:"",field:"",period:"",gpa:""};t([...e,s])},r=s=>{const a=e.filter((o,l)=>l!==s);t(a)},i=(s,a,o)=>{const l=e.map((u,d)=>d===s?{...u,[a]:o}:u);t(l)};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx(r2,{className:"h-6 w-6 text-primary"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold",children:"Education"}),c.jsx("p",{className:"text-muted-foreground",children:"Add your educational background including degrees, certifications, and relevant coursework"})]})]}),c.jsx(Z,{className:"border-dashed border-2",children:c.jsx(ee,{className:"flex items-center justify-center py-8",children:c.jsxs(H,{onClick:n,variant:"outline",className:"gap-2",children:[c.jsx(nt,{className:"h-4 w-4"}),"Add Education Entry"]})})}),c.jsx("div",{className:"space-y-6",children:e.map((s,a)=>c.jsxs(Z,{className:"overflow-hidden",children:[c.jsx(de,{className:"bg-muted/50",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(he,{className:"text-lg",children:s.degree||s.institution||`Education Entry ${a+1}`}),c.jsx(H,{variant:"outline",size:"sm",onClick:()=>r(a),className:"text-destructive hover:text-destructive",children:c.jsx(wr,{className:"h-4 w-4"})})]})}),c.jsxs(ee,{className:"p-6 space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:`institution-${a}`,children:"Institution *"}),c.jsx(ce,{id:`institution-${a}`,value:s.institution,onChange:o=>i(a,"institution",o.target.value),placeholder:"e.g., Blekinge Tekniska Hgskola"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:`period-${a}`,children:"Period *"}),c.jsx(ce,{id:`period-${a}`,value:s.period,onChange:o=>i(a,"period",o.target.value),placeholder:"e.g., 2008 - 2011"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:`degree-${a}`,children:"Degree/Program *"}),c.jsx(ce,{id:`degree-${a}`,value:s.degree,onChange:o=>i(a,"degree",o.target.value),placeholder:"e.g., Interaktion och Design (MDA) interaktionsdesign (Kandidatexamen)"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:`field-${a}`,children:"Field of Study"}),c.jsx(ce,{id:`field-${a}`,value:s.field,onChange:o=>i(a,"field",o.target.value),placeholder:"e.g., Computer Science, Design, Engineering"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:`gpa-${a}`,children:"GPA/Grade (Optional)"}),c.jsx(ce,{id:`gpa-${a}`,value:s.gpa||"",onChange:o=>i(a,"gpa",o.target.value),placeholder:"e.g., 3.8/4.0, VG, A"})]})]})]},a))}),e.length===0&&c.jsx(Z,{className:"border-dashed",children:c.jsxs(ee,{className:"text-center py-12",children:[c.jsx(r2,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No education entries yet"}),c.jsx("p",{className:"text-muted-foreground mb-6",children:"Add your educational background to showcase your academic achievements."})]})})]})}function fot({data:e,onChange:t}){const n=()=>{const s={name:"",issuer:"",date:"",credentialId:""};t([...e,s])},r=s=>{const a=e.filter((o,l)=>l!==s);t(a)},i=(s,a,o)=>{const l=e.map((u,d)=>d===s?{...u,[a]:o}:u);t(l)};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx(e2,{className:"h-6 w-6 text-primary"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold",children:"Certifications & Licenses"}),c.jsx("p",{className:"text-muted-foreground",children:"Add professional certifications, licenses, and industry credentials"})]})]}),c.jsx(Z,{className:"border-dashed border-2",children:c.jsx(ee,{className:"flex items-center justify-center py-8",children:c.jsxs(H,{onClick:n,variant:"outline",className:"gap-2",children:[c.jsx(nt,{className:"h-4 w-4"}),"Add Certification"]})})}),c.jsx("div",{className:"space-y-6",children:e.map((s,a)=>c.jsxs(Z,{className:"overflow-hidden",children:[c.jsx(de,{className:"bg-muted/50",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(he,{className:"text-lg",children:s.name||`Certification ${a+1}`}),c.jsx(H,{variant:"outline",size:"sm",onClick:()=>r(a),className:"text-destructive hover:text-destructive",children:c.jsx(wr,{className:"h-4 w-4"})})]})}),c.jsxs(ee,{className:"p-6 space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:`cert-name-${a}`,children:"Certification Name *"}),c.jsx(ce,{id:`cert-name-${a}`,value:s.name,onChange:o=>i(a,"name",o.target.value),placeholder:"e.g., AWS Certified Solutions Architect, PMP, Microsoft Azure Architect"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:`cert-issuer-${a}`,children:"Issuing Organization *"}),c.jsx(ce,{id:`cert-issuer-${a}`,value:s.issuer,onChange:o=>i(a,"issuer",o.target.value),placeholder:"e.g., Amazon Web Services, PMI, Microsoft"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:`cert-date-${a}`,children:"Issue Date *"}),c.jsx(ce,{id:`cert-date-${a}`,value:s.date,onChange:o=>i(a,"date",o.target.value),placeholder:"e.g., March 2023, 2023-03"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:`cert-credential-${a}`,children:"Credential ID (Optional)"}),c.jsx(ce,{id:`cert-credential-${a}`,value:s.credentialId||"",onChange:o=>i(a,"credentialId",o.target.value),placeholder:"e.g., AWS-ASA-1234567, 12345-ABC-789"})]})]})]},a))}),e.length===0&&c.jsx(Z,{className:"border-dashed",children:c.jsxs(ee,{className:"text-center py-12",children:[c.jsx(e2,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No certifications yet"}),c.jsx("p",{className:"text-muted-foreground mb-6",children:"Add your professional certifications and industry credentials to strengthen your profile."})]})})]})}const hot=[{value:"A1 - Beginner",label:"A1 - Beginner"},{value:"A2 - Elementary",label:"A2 - Elementary"},{value:"B1 - Intermediate",label:"B1 - Intermediate"},{value:"B2 - Upper Intermediate",label:"B2 - Upper Intermediate"},{value:"C1 - Advanced",label:"C1 - Advanced"},{value:"C2 - Proficient",label:"C2 - Proficient"},{value:"Native",label:"Native Speaker"}];function pot({data:e,onChange:t}){const n=()=>{const s={language:"",proficiency:""};t([...e,s])},r=s=>{const a=e.filter((o,l)=>l!==s);t(a)},i=(s,a,o)=>{const l=e.map((u,d)=>d===s?{...u,[a]:o}:u);t(l)};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx(i2,{className:"h-6 w-6 text-primary"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold",children:"Languages"}),c.jsx("p",{className:"text-muted-foreground",children:"List your language skills with proficiency levels according to the Common European Framework"})]})]}),c.jsx(Z,{className:"border-dashed border-2",children:c.jsx(ee,{className:"flex items-center justify-center py-8",children:c.jsxs(H,{onClick:n,variant:"outline",className:"gap-2",children:[c.jsx(nt,{className:"h-4 w-4"}),"Add Language"]})})}),c.jsx("div",{className:"space-y-4",children:e.map((s,a)=>c.jsxs(Z,{className:"overflow-hidden",children:[c.jsx(de,{className:"bg-muted/50",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(he,{className:"text-lg",children:s.language||`Language ${a+1}`}),c.jsx(H,{variant:"outline",size:"sm",onClick:()=>r(a),className:"text-destructive hover:text-destructive",children:c.jsx(wr,{className:"h-4 w-4"})})]})}),c.jsx(ee,{className:"p-6",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:`language-${a}`,children:"Language *"}),c.jsx(ce,{id:`language-${a}`,value:s.language,onChange:o=>i(a,"language",o.target.value),placeholder:"e.g., English, Swedish, German, Spanish"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:`proficiency-${a}`,children:"Proficiency Level *"}),c.jsxs(Fn,{value:s.proficiency,onValueChange:o=>i(a,"proficiency",o),children:[c.jsx(jn,{children:c.jsx(Bn,{placeholder:"Select proficiency level"})}),c.jsx(On,{children:hot.map(o=>c.jsx(We,{value:o.value,children:o.label},o.value))})]})]})]})})]},a))}),e.length===0&&c.jsx(Z,{className:"border-dashed",children:c.jsxs(ee,{className:"text-center py-12",children:[c.jsx(i2,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No languages added yet"}),c.jsx("p",{className:"text-muted-foreground mb-6",children:"Add your language skills to showcase your international capabilities."})]})}),c.jsx(Z,{className:"bg-blue-50 border-blue-200",children:c.jsxs(ee,{className:"p-4",children:[c.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Common European Framework Reference Levels:"}),c.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[c.jsxs("div",{children:[c.jsx("strong",{children:"A1-A2:"})," Basic user (beginner to elementary)"]}),c.jsxs("div",{children:[c.jsx("strong",{children:"B1-B2:"})," Independent user (intermediate to upper intermediate)"]}),c.jsxs("div",{children:[c.jsx("strong",{children:"C1-C2:"})," Proficient user (advanced to mastery)"]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Native:"})," Native speaker level"]})]})]})})]})}const gw=w.forwardRef(({className:e,orientation:t="horizontal",...n},r)=>c.jsx("div",{ref:r,className:Ve("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));gw.displayName="Separator";const mot=[{value:"frank-digital",label:"Frank Digital Professional"},{value:"modern",label:"Modern Clean"},{value:"classic",label:"Classic Traditional"},{value:"creative",label:"Creative Design"}],got=[{value:"blue",label:"Professional Blue"},{value:"gray",label:"Modern Gray"},{value:"green",label:"Fresh Green"},{value:"purple",label:"Creative Purple"}],yot=[{value:"small",label:"Small (10pt)"},{value:"medium",label:"Medium (11pt)"},{value:"large",label:"Large (12pt)"}],vot=[{value:"narrow",label:'Narrow (0.5")'},{value:"normal",label:'Normal (1")'},{value:"wide",label:'Wide (1.5")'}];function xot({data:e,onChange:t}){const n=(r,i)=>{t({...e,[r]:i})};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx(Qo,{className:"h-6 w-6 text-primary"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold",children:"Template Settings"}),c.jsx("p",{className:"text-muted-foreground",children:"Customize the appearance and formatting of your CV"})]})]}),c.jsxs(Z,{children:[c.jsx(de,{children:c.jsxs(he,{className:"flex items-center gap-2",children:[c.jsx(bn,{className:"h-5 w-5"}),"Template & Layout"]})}),c.jsx(ee,{className:"space-y-4",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"template",children:"CV Template"}),c.jsxs(Fn,{value:e.template,onValueChange:r=>n("template",r),children:[c.jsx(jn,{children:c.jsx(Bn,{placeholder:"Select template"})}),c.jsx(On,{children:mot.map(r=>c.jsx(We,{value:r.value,children:r.label},r.value))})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"language",children:"Language"}),c.jsxs(Fn,{value:e.language,onValueChange:r=>n("language",r),children:[c.jsx(jn,{children:c.jsx(Bn,{placeholder:"Select language"})}),c.jsxs(On,{children:[c.jsx(We,{value:"sv",children:"Swedish"}),c.jsx(We,{value:"en",children:"English"}),c.jsx(We,{value:"no",children:"Norwegian"}),c.jsx(We,{value:"da",children:"Danish"})]})]})]})]})})]}),c.jsxs(Z,{children:[c.jsx(de,{children:c.jsxs(he,{className:"flex items-center gap-2",children:[c.jsx(AH,{className:"h-5 w-5"}),"Appearance"]})}),c.jsx(ee,{className:"space-y-4",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"theme",children:"Color Theme"}),c.jsxs(Fn,{value:e.theme,onValueChange:r=>n("theme",r),children:[c.jsx(jn,{children:c.jsx(Bn,{placeholder:"Select theme"})}),c.jsx(On,{children:got.map(r=>c.jsx(We,{value:r.value,children:r.label},r.value))})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"colorScheme",children:"Custom Color"}),c.jsx(ce,{id:"colorScheme",type:"color",value:e.colorScheme,onChange:r=>n("colorScheme",r.target.value),className:"h-10 w-20"})]})]})})]}),c.jsxs(Z,{children:[c.jsx(de,{children:c.jsxs(he,{className:"flex items-center gap-2",children:[c.jsx(xa,{className:"h-5 w-5"}),"Formatting"]})}),c.jsx(ee,{className:"space-y-4",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"fontSize",children:"Font Size"}),c.jsxs(Fn,{value:e.fontSize,onValueChange:r=>n("fontSize",r),children:[c.jsx(jn,{children:c.jsx(Bn,{placeholder:"Select font size"})}),c.jsx(On,{children:yot.map(r=>c.jsx(We,{value:r.value,children:r.label},r.value))})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"margins",children:"Page Margins"}),c.jsxs(Fn,{value:e.margins,onValueChange:r=>n("margins",r),children:[c.jsx(jn,{children:c.jsx(Bn,{placeholder:"Select margins"})}),c.jsx(On,{children:vot.map(r=>c.jsx(We,{value:r.value,children:r.label},r.value))})]})]})]})})]}),c.jsxs(Z,{children:[c.jsx(de,{children:c.jsx(he,{children:"Display Options"})}),c.jsxs(ee,{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(ie,{htmlFor:"showPhoto",children:"Include Profile Photo"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Show your profile photo on the CV"})]}),c.jsx(Pu,{id:"showPhoto",checked:e.showPhoto,onCheckedChange:r=>n("showPhoto",r)})]}),c.jsx(gw,{}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(ie,{htmlFor:"showReferences",children:"Include References Section"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Add a references section to your CV"})]}),c.jsx(Pu,{id:"showReferences",checked:e.showReferences,onCheckedChange:r=>n("showReferences",r)})]})]})]}),c.jsx(Z,{className:"bg-blue-50 border-blue-200",children:c.jsx(ee,{className:"p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(xa,{className:"h-5 w-5 text-blue-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Preview Changes"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Your changes will be reflected when you generate the CV. Use the preview function to see how your CV will look with these settings."})]})]})})})]})}var h3="Progress",p3=100,[bot,Llt]=Md(h3),[wot,Eot]=bot(h3),dae=w.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:s=Sot,...a}=e;(i||i===0)&&!_7(i)&&console.error(_ot(`${i}`,"Progress"));const o=_7(i)?i:p3;r!==null&&!N7(r,o)&&console.error(Not(`${r}`,"Progress"));const l=N7(r,o)?r:null,u=yw(l)?s(l,o):void 0;return c.jsx(wot,{scope:n,value:l,max:o,children:c.jsx(jt.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":yw(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":pae(l,o),"data-value":l??void 0,"data-max":o,...a,ref:t})})});dae.displayName=h3;var fae="ProgressIndicator",hae=w.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,i=Eot(fae,n);return c.jsx(jt.div,{"data-state":pae(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:t})});hae.displayName=fae;function Sot(e,t){return`${Math.round(e/t*100)}%`}function pae(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function yw(e){return typeof e=="number"}function _7(e){return yw(e)&&!isNaN(e)&&e>0}function N7(e,t){return yw(e)&&!isNaN(e)&&e<=t&&e>=0}function _ot(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${p3}\`.`}function Not(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${p3} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var mae=dae,Tot=hae;const gae=w.forwardRef(({className:e,value:t,...n},r)=>c.jsx(mae,{ref:r,className:Ve("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...n,children:c.jsx(Tot,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));gae.displayName=mae.displayName;const Cot={baseUrl:"https://andervang-cv.netlify.app",apiKey:"dev-api-key-12345",timeout:3e4};class kot{constructor(t=Cot){Ra(this,"baseUrl");Ra(this,"apiKey");Ra(this,"timeout");this.baseUrl=t.baseUrl,this.apiKey=t.apiKey,this.timeout=t.timeout}async makeRequest(t,n={}){var s;const r=`${this.baseUrl}${t}`,i={method:"GET",headers:{"Content-Type":"application/json","X-API-Key":this.apiKey,...n.headers},...n};try{const a=new AbortController,o=setTimeout(()=>a.abort(),this.timeout),l=await fetch(r,{...i,signal:a.signal});if(clearTimeout(o),!l.ok){if(l.status===401)throw new Error("Invalid API key. Please check your CV_API_KEY configuration.");if(l.status===404)throw new Error(`API endpoint not found: ${t}`);if(l.status===403)throw new Error("Access forbidden. Please check your API permissions.");let d=`API request failed: ${l.status}`;try{const f=await l.json();d=((s=f.error)==null?void 0:s.message)||f.message||d}catch{d=l.statusText||d}throw new Error(d)}return await l.json()}catch(a){throw a instanceof Error?a.name==="AbortError"?new Error("Request timeout"):(console.error("CV API Error:",a.message),a):(console.error("CV API Error:",a),new Error("Unknown API error occurred"))}}async checkHealth(){var t;try{const n=await this.makeRequest("/api/templates");return{status:"healthy",message:"API is accessible",templatesCount:((t=n==null?void 0:n.data)==null?void 0:t.length)||0}}catch(n){return console.error("Health check failed:",n),{status:"error",message:n instanceof Error?n.message:"API not accessible"}}}async getTemplates(){return this.makeRequest("/api/templates")}async generateCV(t){return this.makeRequest("/api/generate/complete",{method:"POST",body:JSON.stringify(t)})}async generateAllFormats(t){return this.makeRequest("/api/batch/formats",{method:"POST",body:JSON.stringify(t)})}async previewTemplate(t,n){return this.makeRequest("/api/customization/preview",{method:"POST",body:JSON.stringify({templateId:t,customization:n})})}}const jx=new kot;function Aot(){const[e,t]=w.useState([]),[n,r]=w.useState(!0),[i,s]=w.useState(null),a=w.useCallback(async()=>{try{return(await jx.getTemplates()).data||[]}catch(d){return console.error("Error fetching templates from API:",d),[]}},[]),o=w.useCallback(async()=>{try{const{data:d,error:f}=await J.from("cv_templates").select("*").eq("is_active",!0).order("name");if(f)throw f;return d||[]}catch(d){return console.error("Error fetching templates from DB:",d),[]}},[]),l=w.useCallback(async()=>{try{r(!0);const d=await a();if(d.length>0){for(const f of d)await J.from("cv_templates").upsert({id:f.id,name:f.name,description:f.description,template_type:f.template_type,industry_focus:f.industry_focus,layout_structure:f.layout_structure,styling_config:f.styling_config,sections_config:f.sections_config,is_premium:f.is_premium,is_active:f.is_active,preview_image_url:f.preview_image_url,updated_at:new Date().toISOString()},{onConflict:"id"});t(d)}else{const f=await o();t(f)}}catch(d){console.error("Error syncing templates:",d),s(d instanceof Error?d.message:"Failed to load templates");const f=await o();t(f)}finally{r(!1)}},[a,o]),u=()=>[{id:"frank-digital",name:"Frank Digital Professional",description:"Clean, modern template perfect for tech professionals",template_type:"professional",industry_focus:"technology",layout_structure:{},styling_config:{},sections_config:{},is_premium:!1,is_active:!0,preview_image_url:void 0,created_at:new Date().toISOString()},{id:"minimal-modern",name:"Minimal Modern",description:"Minimalist design with clean typography",template_type:"modern",industry_focus:"general",layout_structure:{},styling_config:{},sections_config:{},is_premium:!1,is_active:!0,preview_image_url:void 0,created_at:new Date().toISOString()}];return w.useEffect(()=>{e.length===0&&!n&&t(u())},[e.length,n]),w.useEffect(()=>{l()},[l]),{templates:e,loading:n,error:i,refetch:l,getDefaultTemplates:u}}function jot(){const[e,t]=w.useState(!1),[n,r]=w.useState(0),[i,s]=w.useState(null),[a,o]=w.useState(null),l=async(p,m,g,v=["pdf"])=>{try{const{data:y,error:b}=await J.from("cv_generation_jobs").insert([{cv_profile_id:p,version_id:m,template_id:g,formats:v,status:"pending",progress:0}]).select().single();if(b)throw b;return y}catch(y){return console.error("Error creating generation job:",y),null}},u=async(p,m)=>{try{const{error:g}=await J.from("cv_generation_jobs").update(m).eq("id",p);if(g)throw g;return!0}catch(g){return console.error("Error updating generation job:",g),!1}},d=w.useCallback(async(p,m,g="pdf",v,y)=>{t(!0),r(0),o(null);let b=null;try{v&&y&&(b=await l(v,y,m,[g]),s(b));const x={...p,template:m,format:g};r(25),b&&await u(b.id,{status:"processing",progress:25});const S=await jx.generateCV(x);return r(75),b&&await u(b.id,{progress:75}),r(100),b&&await u(b.id,{status:"completed",progress:100,results:{[g]:S},completed_at:new Date().toISOString()}),t(!1),S}catch(x){const S=x instanceof Error?x.message:"Generation failed";throw o(S),t(!1),b&&await u(b.id,{status:"failed",error_message:S}),x}},[]),f=w.useCallback(async(p,m,g,v)=>{var x;t(!0),r(0),o(null);const y=["pdf","html","docx"];let b=null;try{g&&v&&(b=await l(g,v,m,y),s(b));const S={...p,template:m};r(25),b&&await u(b.id,{status:"processing",progress:25});const E=await jx.generateAllFormats(S);return r(75),b&&await u(b.id,{progress:75}),r(100),b&&await u(b.id,{status:"completed",progress:100,results:((x=E.data)==null?void 0:x.results)||{},completed_at:new Date().toISOString()}),t(!1),E}catch(S){const E=S instanceof Error?S.message:"Generation failed";throw o(E),t(!1),b&&await u(b.id,{status:"failed",error_message:E}),S}},[]),h=w.useCallback(async()=>{try{return await jx.checkHealth(),!0}catch(p){return console.error("CV API health check failed:",p),!1}},[]);return{isGenerating:e,generationProgress:n,generationJob:i,error:a,generateCV:d,generateAllFormats:f,checkAPIHealth:h,setError:o}}function T7(e){return e.startsWith("data:")}function Oot(e){const t=e.indexOf("base64,");if(t===-1)throw new Error("Invalid base64 data URL");return e.substring(t+7)}function Pot(e,t){const n=atob(e),r=new Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);const i=new Uint8Array(r);return new Blob([i],{type:t})}function Iot(e){if(console.log("Downloading file:",{filename:e.filename,mimeType:e.mimeType,isBase64:T7(e.content),contentPreview:e.content.substring(0,50)+"..."}),T7(e.content)){console.log("Processing base64 data URL...");const t=Oot(e.content),n=Pot(t,e.mimeType);console.log("Created blob:",{size:n.size,type:n.type}),Dot(n,e.filename)}else{console.log("Processing regular URL...");const t=document.createElement("a");t.href=e.content,t.download=e.filename,t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}function Dot(e,t){console.log("Creating download link for blob:",{size:e.size,type:e.type,filename:t});const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,console.log("Download link created:",{href:n.substring(0,50)+"...",download:t}),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n),console.log("Download initiated and cleanup completed")}function Mot(e={},t="pdf",n){const i=(e.fullName||`${e.firstName||""} ${e.lastName||""}`.trim()||"CV").replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"_"),s=n?`_${n.replace(/[^a-zA-Z0-9]/g,"_")}`:"",a=new Date().toISOString().split("T")[0];return`${i}${s}_${a}.${t}`}function Rot(e){return{pdf:"application/pdf",html:"text/html",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",txt:"text/plain",json:"application/json",xml:"application/xml"}[e.toLowerCase()]||"application/octet-stream"}function Lot({cvData:e,profile:t,currentVersion:n,className:r=""}){var C,k,A,j,D;const[i,s]=w.useState("frank-digital"),[a,o]=w.useState("pdf"),[l,u]=w.useState(null),{templates:d,loading:f}=Aot(),{isGenerating:h,generationProgress:p,error:m,generateCV:g,generateAllFormats:v,checkAPIHealth:y}=jot(),[b,x]=w.useState(!0);w.useEffect(()=>{const M=setTimeout(async()=>{try{const L=await y();x(L)}catch(L){console.warn("API health check skipped:",L),x(!0)}},1e3);return()=>clearTimeout(M)},[y]);const S=(P,M,L)=>{const O=d.find(R=>R.id===L),B=Mot({fullName:e.personalInfo.name},M,O==null?void 0:O.name);Iot({content:P,filename:B,mimeType:Rot(M)})},E=async()=>{try{const P=await g(e,i,a,t.id,n==null?void 0:n.id);u(P)}catch(P){console.error("Generation failed:",P)}},_=async()=>{try{const P=await v(e,i,t.id,n==null?void 0:n.id);u(P)}catch(P){console.error("Generation failed:",P)}},T=[{value:"pdf",label:"PDF",description:"Best for printing and sharing"},{value:"html",label:"HTML",description:"Web-friendly format"},{value:"docx",label:"Word",description:"Editable document format"}];return c.jsx("div",{className:`space-y-4 ${r}`,children:c.jsxs(Z,{children:[c.jsx(de,{children:c.jsxs(he,{className:"flex items-center gap-2",children:[c.jsx(bn,{className:"h-5 w-5"}),"Generate CV"]})}),c.jsxs(ee,{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"API Status:"}),b===null?c.jsx(Tt,{variant:"outline",children:"Checking..."}):b?c.jsxs(Tt,{variant:"default",className:"bg-green-100 text-green-700",children:[c.jsx(vr,{className:"h-3 w-3 mr-1"}),"Online"]}):c.jsxs(Tt,{variant:"destructive",children:[c.jsx(Eg,{className:"h-3 w-3 mr-1"}),"Offline"]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Template"}),c.jsxs(Fn,{value:i,onValueChange:s,children:[c.jsx(jn,{children:c.jsx(Bn,{placeholder:"Select a template"})}),c.jsx(On,{children:f?c.jsx(We,{value:"loading",disabled:!0,children:"Loading templates..."}):d.map(P=>c.jsx(We,{value:P.id,children:c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:P.name}),c.jsx("div",{className:"text-xs text-muted-foreground",children:P.description})]})},P.id))})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Format"}),c.jsxs(Fn,{value:a,onValueChange:o,children:[c.jsx(jn,{children:c.jsx(Bn,{placeholder:"Select a format"})}),c.jsx(On,{children:T.map(P=>c.jsx(We,{value:P.value,children:c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:P.label}),c.jsx("div",{className:"text-xs text-muted-foreground",children:P.description})]})},P.value))})]})]}),h&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(dh,{className:"h-4 w-4 animate-spin"}),c.jsx("span",{className:"text-sm",children:"Generating CV..."})]}),c.jsx(gae,{value:p,className:"w-full"})]}),m&&c.jsxs(Cd,{variant:"destructive",children:[c.jsx(Eg,{className:"h-4 w-4"}),c.jsx(kd,{children:m})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(H,{onClick:E,disabled:h||!b||!i,className:"w-full",children:[h?c.jsx(dh,{className:"h-4 w-4 mr-2 animate-spin"}):c.jsx($u,{className:"h-4 w-4 mr-2"}),"Generate ",a.toUpperCase()]}),c.jsx(H,{variant:"outline",onClick:_,disabled:h||!b||!i,className:"w-full",children:"Generate All Formats"})]}),l&&c.jsxs("div",{className:"space-y-3 p-3 border rounded-lg bg-green-50",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(vr,{className:"h-4 w-4 text-green-600"}),c.jsx("span",{className:"font-medium text-green-800",children:"Generation Complete!"})]}),(C=l.data)!=null&&C.fileUrl?c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{className:"text-sm text-green-700",children:["Format: ",((k=l.data.format)==null?void 0:k.toUpperCase())||a.toUpperCase()]}),c.jsxs(H,{size:"sm",className:"w-full",onClick:()=>{var P;return((P=l.data)==null?void 0:P.fileUrl)&&S(l.data.fileUrl,l.data.format||a,i)},children:[c.jsx($u,{className:"h-3 w-3 mr-2"}),"Download CV"]})]}):(A=l.data)!=null&&A.results?c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{className:"text-sm text-green-700",children:["Generated ",((j=l.data.summary)==null?void 0:j.successful)||0," of"," ",((D=l.data.summary)==null?void 0:D.total)||0," formats"]}),c.jsx("div",{className:"space-y-1",children:Object.entries(l.data.results).map(([P,M])=>c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm font-medium",children:P.toUpperCase()}),M.success?c.jsxs(H,{size:"sm",variant:"outline",onClick:()=>M.fileUrl&&S(M.fileUrl,P,i),children:[c.jsx($u,{className:"h-3 w-3 mr-1"}),"Download"]}):c.jsx(Tt,{variant:"destructive",children:"Failed"})]},P))})]}):null]})]})]})})}function Fot({open:e,onOpenChange:t,profile:n}){const[r,i]=w.useState("personal"),[s,a]=w.useState(S7()),[o,l]=w.useState(!1),{currentVersion:u,createVersion:d,updateVersion:f}=Yat((n==null?void 0:n.id)||null),{projects:h,loading:p}=Xat((n==null?void 0:n.id)||null),{experiences:m,loading:g}=Qat((n==null?void 0:n.id)||null),{education:v,loading:y}=Jat((n==null?void 0:n.id)||null),{certifications:b,loading:x}=Zat((n==null?void 0:n.id)||null),{skills:S,loading:E}=eot((n==null?void 0:n.id)||"");w.useEffect(()=>{if(!n){a(S7());return}if(u!=null&&u.data)a(u.data);else if(!p&&!g&&!y&&!x&&!E){const A=tot(n,m,v,b,S,h,[]);a(A)}},[n,u,h,m,v,b,S,p,g,y,x,E]);const _=(A,j)=>{a(D=>({...D,[A]:j})),l(!0)},T=async(A,j,D="en")=>{if(!n)return;await d(A,s,j,D)&&l(!1)},C=async()=>{if(!u)return;await f(u.id,{data:s})&&l(!1)},k=[{id:"personal",label:"Personal Info",icon:Gs},{id:"summary",label:"Summary",icon:bn},{id:"experience",label:"Experience",icon:Yj},{id:"projects",label:"Projects",icon:N0},{id:"education",label:"Education",icon:r2},{id:"skills",label:"Skills",icon:t2},{id:"certifications",label:"Certifications",icon:e2},{id:"languages",label:"Languages",icon:i2},{id:"template",label:"Template & Settings",icon:Qo}];return n?c.jsx(kt,{open:e,onOpenChange:t,children:c.jsxs(St,{className:"w-screen h-screen max-w-none max-h-none m-0 p-0 overflow-hidden flex flex-col",children:[c.jsxs(_t,{className:"px-8 py-6 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:[c.jsxs(Nt,{className:"flex items-center gap-3 text-xl",children:[c.jsx(bn,{className:"h-6 w-6"}),"CV Editor - ",n.title]}),c.jsx(Gc,{className:"text-base",children:"Edit your CV data and generate professional documents in multiple formats"})]}),c.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col p-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6 pb-6 border-b",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[o&&c.jsx(Tt,{variant:"outline",className:"text-orange-600 border-orange-200 px-3 py-1",children:"Unsaved changes"}),u&&c.jsxs(Tt,{variant:"secondary",className:"px-3 py-1",children:[u.version_name," v",u.version_number]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs(H,{variant:"outline",size:"lg",onClick:C,disabled:!o||!u,className:"gap-2",children:[c.jsx(qh,{className:"h-4 w-4"}),"Save Changes"]}),c.jsx(H,{size:"lg",onClick:()=>T("New Version"),className:"gap-2",children:"Save as New Version"})]})]}),c.jsxs(Gu,{value:r,onValueChange:i,className:"flex-1 overflow-hidden flex flex-col",children:[c.jsx(hc,{className:"grid w-full grid-cols-9 h-14 mb-8 p-1",children:k.map(A=>{const j=A.icon;return c.jsxs(ir,{value:A.id,className:"flex items-center gap-2 px-4 py-3 text-sm font-medium data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[c.jsx(j,{className:"h-4 w-4"}),c.jsx("span",{children:A.label})]},A.id)})}),c.jsxs("div",{className:"flex-1 overflow-auto",children:[c.jsx(Ft,{value:"personal",className:"space-y-6 mt-0 p-6 bg-muted/30 rounded-lg",children:c.jsx("div",{className:"max-w-4xl",children:c.jsx(iot,{data:s.personalInfo,onChange:A=>_("personalInfo",A)})})}),c.jsx(Ft,{value:"summary",className:"space-y-6 mt-0 p-6 bg-muted/30 rounded-lg",children:c.jsx("div",{className:"max-w-4xl",children:c.jsx(sot,{data:s.summary,onChange:A=>_("summary",A)})})}),c.jsx(Ft,{value:"experience",className:"space-y-6 mt-0 p-6 bg-muted/30 rounded-lg",children:c.jsx("div",{className:"max-w-6xl",children:c.jsx(cot,{data:s.experience,onChange:A=>_("experience",A)})})}),c.jsx(Ft,{value:"projects",className:"space-y-6 mt-0 p-6 bg-muted/30 rounded-lg",children:c.jsx("div",{className:"max-w-6xl",children:c.jsx(uot,{data:s.projects,onChange:A=>_("projects",A)})})}),c.jsx(Ft,{value:"education",className:"space-y-6 mt-0 p-6 bg-muted/30 rounded-lg",children:c.jsx("div",{className:"max-w-4xl",children:c.jsx(dot,{data:s.education,onChange:A=>_("education",A)})})}),c.jsx(Ft,{value:"skills",className:"space-y-6 mt-0 p-6 bg-muted/30 rounded-lg",children:c.jsx("div",{className:"max-w-5xl",children:c.jsx(lot,{data:s.skills,onChange:A=>_("skills",A)})})}),c.jsx(Ft,{value:"certifications",className:"space-y-6 mt-0 p-6 bg-muted/30 rounded-lg",children:c.jsx("div",{className:"max-w-4xl",children:c.jsx(fot,{data:s.certifications,onChange:A=>_("certifications",A)})})}),c.jsx(Ft,{value:"languages",className:"space-y-6 mt-0 p-6 bg-muted/30 rounded-lg",children:c.jsx("div",{className:"max-w-4xl",children:c.jsx(pot,{data:s.languages,onChange:A=>_("languages",A)})})}),c.jsx(Ft,{value:"template",className:"space-y-6 mt-0 p-6 bg-muted/30 rounded-lg",children:c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"max-w-4xl",children:c.jsx(xot,{data:s.templateSettings,onChange:A=>_("templateSettings",A)})}),c.jsx("div",{className:"border-t pt-6",children:c.jsx(Lot,{cvData:s,profile:n,currentVersion:u})})]})})]})]})]})]})}):null}function Bot(){const[e,t]=w.useState([]),[n,r]=w.useState(!0),[i,s]=w.useState(null),{user:a}=Tr(),o=w.useCallback(async()=>{if(!a){t([]),r(!1);return}try{r(!0);const{data:h,error:p}=await J.from("cv_profiles").select("*").eq("user_id",a.id).order("updated_at",{ascending:!1});if(p)throw p;t(h||[])}catch(h){s(h instanceof Error?h.message:"An error occurred")}finally{r(!1)}},[a]),l=async h=>{if(!a)throw new Error("User not authenticated");try{const{data:p,error:m}=await J.from("cv_profiles").insert([{...h,user_id:a.id}]).select().single();if(m)throw m;return t(g=>[p,...g]),p}catch(p){throw new Error(p instanceof Error?p.message:"Failed to create profile")}},u=async(h,p)=>{try{const{data:m,error:g}=await J.from("cv_profiles").update(p).eq("id",h).select().single();if(g)throw g;return t(v=>v.map(y=>y.id===h?m:y)),m}catch(m){throw new Error(m instanceof Error?m.message:"Failed to update profile")}},d=async h=>{try{const{error:p}=await J.from("cv_profiles").delete().eq("id",h);if(p)throw p;t(m=>m.filter(g=>g.id!==h))}catch(p){throw new Error(p instanceof Error?p.message:"Failed to delete profile")}},f=async(h,p)=>{const m=e.find(S=>S.id===h);if(!m)throw new Error("Profile not found");const{id:g,user_id:v,created_at:y,updated_at:b,...x}=m;return l({...x,title:p,is_active:!1})};return w.useEffect(()=>{o()},[o]),{profiles:e,loading:n,error:i,createProfile:l,updateProfile:u,deleteProfile:d,duplicateProfile:f,refetch:o}}function $ot(){var u;const[e,t]=w.useState(!1),[n,r]=w.useState(null),{profiles:i,loading:s,createProfile:a}=Bot(),o=async()=>{const d=await a({title:`CV Profile ${i.length+1}`,target_role:"Software Developer",is_active:i.length===0});d&&(r(d),t(!0))},l=d=>{r(d),t(!0)};return s?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),c.jsx("p",{children:"Loading CV data..."})]})}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold",children:"CV Manager"}),c.jsx("p",{className:"text-muted-foreground",children:"Create and manage your professional CV profiles"})]}),c.jsxs(H,{onClick:o,className:"gap-2",children:[c.jsx(nt,{className:"h-4 w-4"}),"New CV Profile"]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs(Z,{children:[c.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c.jsx(he,{className:"text-sm font-medium",children:"Total Profiles"}),c.jsx(Gs,{className:"h-4 w-4 text-muted-foreground"})]}),c.jsxs(ee,{children:[c.jsx("div",{className:"text-2xl font-bold",children:i.length}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"CV profiles created"})]})]}),c.jsxs(Z,{children:[c.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c.jsx(he,{className:"text-sm font-medium",children:"Active Profile"}),c.jsx(xa,{className:"h-4 w-4 text-muted-foreground"})]}),c.jsxs(ee,{children:[c.jsx("div",{className:"text-2xl font-bold",children:((u=i.find(d=>d.is_active))==null?void 0:u.title)||"None"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),c.jsxs(Z,{children:[c.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c.jsx(he,{className:"text-sm font-medium",children:"Last Updated"}),c.jsx(bn,{className:"h-4 w-4 text-muted-foreground"})]}),c.jsxs(ee,{children:[c.jsx("div",{className:"text-2xl font-bold",children:i.length>0?v1(new Date(Math.max(...i.map(d=>new Date(d.updated_at).getTime()))),{addSuffix:!0}):"Never"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Most recent edit"})]})]})]}),c.jsxs(Z,{children:[c.jsxs(de,{children:[c.jsx(he,{children:"Your CV Profiles"}),c.jsx(gr,{children:"Create and manage different CV profiles for various roles and industries"})]}),c.jsx(ee,{children:i.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Gs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No CV profiles yet"}),c.jsx("p",{className:"text-muted-foreground mb-6",children:"Create your first CV profile to get started"}),c.jsxs(H,{onClick:o,className:"gap-2",children:[c.jsx(nt,{className:"h-4 w-4"}),"Create First Profile"]})]}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.map(d=>c.jsxs(Z,{className:`cursor-pointer transition-all hover:shadow-md ${d.is_active?"ring-2 ring-primary":""}`,children:[c.jsxs(de,{className:"pb-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(he,{className:"text-lg",children:d.title}),d.is_active&&c.jsx(Tt,{variant:"default",className:"text-xs",children:"Active"})]}),c.jsxs(gr,{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-medium",children:"Role:"}),c.jsx("span",{children:d.target_role||"Not specified"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-medium",children:"Location:"}),c.jsx("span",{children:d.location||"Not specified"})]}),d.description&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-medium",children:"Description:"}),c.jsx("span",{className:"truncate",children:d.description})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-medium",children:"Updated:"}),c.jsx("span",{children:v1(new Date(d.updated_at),{addSuffix:!0})})]})]})]}),c.jsx(ee,{className:"pt-0",children:c.jsx("div",{className:"flex gap-2",children:c.jsxs(H,{variant:"outline",size:"sm",onClick:()=>l(d),className:"flex-1 gap-2",children:[c.jsx(ao,{className:"h-3 w-3"}),"Edit CV"]})})})]},d.id)),c.jsx(Z,{className:"cursor-pointer transition-all hover:shadow-md border-dashed",children:c.jsxs(ee,{className:"flex flex-col items-center justify-center h-full py-12",children:[c.jsx(nt,{className:"h-8 w-8 text-muted-foreground mb-4"}),c.jsx("h3",{className:"font-semibold mb-2",children:"Add New Profile"}),c.jsx("p",{className:"text-sm text-muted-foreground text-center mb-4",children:"Create a CV profile for a different role or industry"}),c.jsx(H,{onClick:o,variant:"outline",size:"sm",children:"Create Profile"})]})})]})})]}),e&&n&&c.jsx(Fot,{open:e,onOpenChange:d=>{t(d),d||r(null)},profile:n})]})}function Uot(e){const{user:t}=Tr(),n=t==null?void 0:t.id,[r,i]=w.useState([]),[s,a]=w.useState(!0),[o,l]=w.useState(null),u=async()=>{if(!n){a(!1);return}try{a(!0),l(null);const{data:g,error:v}=await J.from("salary_employees").select("*").eq("user_id",n).order("created_at",{ascending:!1});if(v)throw v;i(g||[])}catch(g){console.error("Error fetching employees:",g),l(g instanceof Error?g.message:"Failed to fetch employees")}finally{a(!1)}},d=async g=>{if(!n)throw new Error("User not authenticated");try{const v={...g,user_id:n,currency:g.currency||"SEK",employment_start_date:g.employment_start_date||new Date().toISOString().split("T")[0],is_active:!0},{data:y,error:b}=await J.from("salary_employees").insert([v]).select().single();if(b)throw b;return i(x=>[y,...x]),console.log(" Employee added:",y.name),y}catch(v){throw console.error("Error adding employee:",v),l(v instanceof Error?v.message:"Failed to add employee"),v}},f=async g=>{if(!n)throw new Error("User not authenticated");try{const{id:v,...y}=g,{data:b,error:x}=await J.from("salary_employees").update(y).eq("id",v).eq("user_id",n).select().single();if(x)throw x;return i(S=>S.map(E=>E.id===v?b:E)),console.log(" Employee updated:",b.name),b}catch(v){throw console.error("Error updating employee:",v),l(v instanceof Error?v.message:"Failed to update employee"),v}},h=async g=>{if(!n)throw new Error("User not authenticated");try{const{data:v,error:y}=await J.from("salary_payments").select("id").eq("employee_id",g).limit(1);if(y)throw y;if(v&&v.length>0)return await f({id:g,is_active:!1}),console.log(" Employee deactivated (has salary payments)"),!0;const{error:b}=await J.from("salary_employees").delete().eq("id",g).eq("user_id",n);if(b)throw b;return i(x=>x.filter(S=>S.id!==g)),console.log(" Employee deleted"),!0}catch(v){return console.error("Error deleting employee:",v),l(v instanceof Error?v.message:"Failed to delete employee"),!1}},p=()=>r.filter(g=>g.is_active),m=g=>r.find(v=>v.id===g);return w.useEffect(()=>{u()},[n]),{employees:r,loading:s,error:o,addEmployee:d,updateEmployee:f,deleteEmployee:h,getActiveEmployees:p,getEmployeeById:m,refetch:u}}function zot(e){const{user:t}=Tr(),n=t==null?void 0:t.id,[r,i]=w.useState([]),[s,a]=w.useState(!0),[o,l]=w.useState(null),{processYearlyVat:u,vatSettings:d}=pS(n||null),f=async()=>{if(!(!n||!(d!=null&&d.auto_generate_yearly_vat)))try{const _=new Date().getFullYear()-1;console.log(` Processing automatic VAT for ${_}...`);const T=await u(_);console.log(T?` VAT entry created for ${_}: ${T}`:` No VAT entry needed for ${_}`)}catch(E){console.error("Error processing automatic VAT:",E)}};w.useEffect(()=>{d&&d.auto_generate_yearly_vat&&f()},[d]);const h=async()=>{if(!n){a(!1);return}try{a(!0),l(null);const{data:E,error:_}=await J.from("salary_payments").select(`
          *,
          employee:salary_employees(id, name, position, base_salary, currency)
        `).eq("user_id",n).order("year",{ascending:!1}).order("month",{ascending:!1});if(_)throw _;i(E||[])}catch(E){console.error("Error fetching salary payments:",E),l(E instanceof Error?E.message:"Failed to fetch salary payments")}finally{a(!1)}},p=async E=>{if(!n)throw new Error("User not authenticated");try{const _={...E,user_id:n,status:E.status||"scheduled"},{data:T,error:C}=await J.from("salary_payments").insert([_]).select().single();if(C)throw C;return await v(T),await h(),console.log(" Salary payment added:",`${T.year}-${T.month.toString().padStart(2,"0")}`),T}catch(_){throw console.error("Error adding salary payment:",_),l(_ instanceof Error?_.message:"Failed to add salary payment"),_}},m=async E=>{if(!n)throw new Error("User not authenticated");try{const{id:_,...T}=E,{data:C,error:k}=await J.from("salary_payments").update(T).eq("id",_).eq("user_id",n).select().single();if(k)throw k;return await y(C),await h(),console.log(" Salary payment updated:",`${C.year}-${C.month.toString().padStart(2,"0")}`),C}catch(_){throw console.error("Error updating salary payment:",_),l(_ instanceof Error?_.message:"Failed to update salary payment"),_}},g=async E=>{if(!n)throw new Error("User not authenticated");try{const _=r.find(C=>C.id===E),{error:T}=await J.from("salary_payments").delete().eq("id",E).eq("user_id",n);if(T)throw T;return _!=null&&_.cash_flow_entry_id&&await J.from("cash_flow_entries").delete().eq("id",_.cash_flow_entry_id),_!=null&&_.employer_tax_entry_id&&await J.from("cash_flow_entries").delete().eq("id",_.employer_tax_entry_id),i(C=>C.filter(k=>k.id!==E)),console.log(" Salary payment deleted"),!0}catch(_){return console.error("Error deleting salary payment:",_),l(_ instanceof Error?_.message:"Failed to delete salary payment"),!1}},v=async E=>{try{if(E.status!=="scheduled"||E.total_amount<=0){console.log(" Skipping cash flow entry creation: status is not scheduled or amount is 0");return}const{data:_}=await J.from("user_profiles").select("auto_generate_employer_tax, employer_tax_payment_date").eq("id",E.user_id).single(),{data:T}=await J.from("salary_employees").select("name, position").eq("id",E.employee_id).single(),C=T?`Salary - ${T.name}${T.position?` (${T.position})`:""}`:"Salary Payment",k={user_id:E.user_id,type:"expense",amount:E.total_amount,description:C,category:"Salary",date:E.payment_date||`${E.year}-${E.month.toString().padStart(2,"0")}-01`,is_recurring:!1,is_budget_entry:!1,is_recurring_instance:!1},{data:A,error:j}=await J.from("cash_flow_entries").insert([k]).select().single();if(j)throw j;if(await J.from("salary_payments").update({cash_flow_entry_id:A.id}).eq("id",E.id),console.log(" Cash flow entry created for salary payment"),_!=null&&_.auto_generate_employer_tax){const D=Math.round(E.total_amount*.3142),P=_.employer_tax_payment_date||25;let M=E.year,L=E.month+1;L>12&&(L=1,M++);const B=new Date(M,L-1,Math.min(P,new Date(M,L,0).getDate())).toISOString().split("T")[0],R=T?`Employer Tax - ${T.name}${T.position?` (${T.position})`:""}`:"Employer Tax Payment",F={user_id:E.user_id,type:"expense",amount:D,description:R,category:"Employer Tax",date:B,is_recurring:!1,is_budget_entry:!1,is_recurring_instance:!1},{data:I,error:X}=await J.from("cash_flow_entries").insert([F]).select().single();if(X)throw X;await J.from("salary_payments").update({employer_tax_entry_id:I.id}).eq("id",E.id),console.log(" Employer tax cash flow entry created")}}catch(_){console.error("Error creating cash flow entry:",_)}},y=async E=>{const _=E.status==="scheduled"&&E.total_amount>0,{data:T}=await J.from("user_profiles").select("auto_generate_employer_tax, employer_tax_payment_date").eq("id",E.user_id).single(),C=_&&(T==null?void 0:T.auto_generate_employer_tax);if(!E.cash_flow_entry_id&&_){await v(E);return}if(E.cash_flow_entry_id&&!_)try{await J.from("cash_flow_entries").delete().eq("id",E.cash_flow_entry_id),await J.from("salary_payments").update({cash_flow_entry_id:null}).eq("id",E.id),console.log(" Cash flow entry deleted (status not scheduled or amount is 0)")}catch(k){console.error("Error deleting cash flow entry:",k)}if(E.employer_tax_entry_id&&!C)try{await J.from("cash_flow_entries").delete().eq("id",E.employer_tax_entry_id),await J.from("salary_payments").update({employer_tax_entry_id:null}).eq("id",E.id),console.log(" Employer tax cash flow entry deleted")}catch(k){console.error("Error deleting employer tax cash flow entry:",k)}if(!(!E.cash_flow_entry_id||!_))try{const{data:k}=await J.from("salary_employees").select("name, position").eq("id",E.employee_id).single(),A=k?`Salary - ${k.name}${k.position?` (${k.position})`:""}`:"Salary Payment";if(await J.from("cash_flow_entries").update({amount:E.total_amount,description:A,date:E.payment_date||`${E.year}-${E.month.toString().padStart(2,"0")}-01`}).eq("id",E.cash_flow_entry_id),console.log(" Cash flow entry updated for salary payment"),E.employer_tax_entry_id&&C){const j=Math.round(E.total_amount*.3142),D=(T==null?void 0:T.employer_tax_payment_date)||25;let P=E.year,M=E.month+1;M>12&&(M=1,P++);const O=new Date(P,M-1,Math.min(D,new Date(P,M,0).getDate())).toISOString().split("T")[0],B=k?`Employer Tax - ${k.name}${k.position?` (${k.position})`:""}`:"Employer Tax Payment";await J.from("cash_flow_entries").update({amount:j,description:B,date:O}).eq("id",E.employer_tax_entry_id),console.log(" Employer tax cash flow entry updated")}else if(!E.employer_tax_entry_id&&C){const j=Math.round(E.total_amount*.3142),D=(T==null?void 0:T.employer_tax_payment_date)||25;let P=E.year,M=E.month+1;M>12&&(M=1,P++);const O=new Date(P,M-1,Math.min(D,new Date(P,M,0).getDate())).toISOString().split("T")[0],B=k?`Employer Tax - ${k.name}${k.position?` (${k.position})`:""}`:"Employer Tax Payment",R={user_id:E.user_id,type:"expense",amount:j,description:B,category:"Employer Tax",date:O,is_recurring:!1,is_budget_entry:!1,is_recurring_instance:!1},{data:F,error:I}=await J.from("cash_flow_entries").insert([R]).select().single();if(I)throw I;await J.from("salary_payments").update({employer_tax_entry_id:F.id}).eq("id",E.id),console.log(" New employer tax cash flow entry created")}}catch(k){console.error("Error updating cash flow entry:",k)}},b=E=>r.filter(_=>_.year===E),x=(E,_,T)=>r.find(C=>C.employee_id===E&&C.year===_&&C.month===T),S=async E=>{if(!n)throw new Error("User not authenticated");try{const{data:_,error:T}=await J.from("salary_employees").select("*").eq("user_id",n).eq("is_active",!0);if(T)throw T;const C=new Date().getMonth()+1,k=new Date().getFullYear(),A=E===k?C:1,j=12,D=[];for(const P of _||[])for(let M=A;M<=j;M++)r.find(O=>O.employee_id===P.id&&O.year===E&&O.month===M)||D.push({user_id:n,employee_id:P.id,year:E,month:M,salary_amount:P.base_salary,status:"scheduled"});if(D.length>0){const{error:P}=await J.from("salary_payments").insert(D);if(P)throw P;console.log(` Generated ${D.length} salary payments for ${E}`),await h()}}catch(_){throw console.error("Error generating yearly payments:",_),l(_ instanceof Error?_.message:"Failed to generate yearly payments"),_}};return w.useEffect(()=>{h()},[n]),{payments:r,loading:s,error:o,addSalaryPayment:p,updateSalaryPayment:m,deleteSalaryPayment:g,getPaymentsByYear:b,getPaymentByEmployeeMonth:x,generateYearlyPayments:S,refetch:h}}function Hot({employee:e,onSubmit:t,onCancel:n}){const[r,i]=w.useState({name:"",email:"",phone:"",employee_number:"",position:"",base_salary:0,currency:"SEK",employment_start_date:new Date().toISOString().split("T")[0],employment_end_date:""}),[s,a]=w.useState(!1),[o,l]=w.useState(null);w.useEffect(()=>{e&&i({name:e.name,email:e.email||"",phone:e.phone||"",employee_number:e.employee_number||"",position:e.position||"",base_salary:e.base_salary,currency:e.currency,employment_start_date:e.employment_start_date,employment_end_date:e.employment_end_date||""})},[e]);const u=async d=>{var f,h,p,m;if(d.preventDefault(),!r.name.trim()){l("Name is required");return}if(r.base_salary<=0){l("Base salary must be greater than 0");return}try{a(!0),l(null);const g={...r,email:((f=r.email)==null?void 0:f.trim())||void 0,phone:((h=r.phone)==null?void 0:h.trim())||void 0,employee_number:((p=r.employee_number)==null?void 0:p.trim())||void 0,position:((m=r.position)==null?void 0:m.trim())||void 0,employment_end_date:r.employment_end_date||void 0};await t(g)}catch(g){console.error("Error saving employee:",g),l(g instanceof Error?g.message:"Failed to save employee")}finally{a(!1)}};return c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:c.jsxs(Z,{className:"w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[c.jsx(de,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(he,{children:e?"Edit Employee":"Add New Employee"}),c.jsx(H,{variant:"ghost",size:"sm",onClick:n,children:c.jsx(wr,{className:"h-4 w-4"})})]})}),c.jsx(ee,{children:c.jsxs("form",{onSubmit:u,className:"space-y-4",children:[o&&c.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 rounded-lg border border-red-200",children:o}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Name *"}),c.jsx(ce,{value:r.name,onChange:d=>i({...r,name:d.target.value}),placeholder:"Full name",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Employee Number"}),c.jsx(ce,{value:r.employee_number,onChange:d=>i({...r,employee_number:d.target.value}),placeholder:"Employee ID/Number"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),c.jsx(ce,{type:"email",value:r.email,onChange:d=>i({...r,email:d.target.value}),placeholder:"email@company.com"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone"}),c.jsx(ce,{type:"tel",value:r.phone,onChange:d=>i({...r,phone:d.target.value}),placeholder:"+46 70 123 45 67"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Position/Role"}),c.jsx(ce,{value:r.position,onChange:d=>i({...r,position:d.target.value}),placeholder:"Job title or position"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Base Salary (Monthly) *"}),c.jsx(ce,{type:"number",min:"0",step:"0.01",value:r.base_salary,onChange:d=>i({...r,base_salary:parseFloat(d.target.value)||0}),placeholder:"0.00",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Currency"}),c.jsxs("select",{value:r.currency,onChange:d=>i({...r,currency:d.target.value}),className:"w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring",title:"Select currency",children:[c.jsx("option",{value:"SEK",children:"SEK (Swedish Krona)"}),c.jsx("option",{value:"EUR",children:"EUR (Euro)"}),c.jsx("option",{value:"USD",children:"USD (US Dollar)"}),c.jsx("option",{value:"NOK",children:"NOK (Norwegian Krone)"}),c.jsx("option",{value:"DKK",children:"DKK (Danish Krone)"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Employment Start Date *"}),c.jsx(ce,{type:"date",value:r.employment_start_date,onChange:d=>i({...r,employment_start_date:d.target.value}),required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Employment End Date"}),c.jsx(ce,{type:"date",value:r.employment_end_date,onChange:d=>i({...r,employment_end_date:d.target.value}),placeholder:"Leave empty if currently employed"})]})]}),c.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[c.jsx(H,{type:"submit",disabled:s,className:"flex-1",children:s?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):e?"Update Employee":"Add Employee"}),c.jsx(H,{type:"button",variant:"outline",onClick:n,disabled:s,children:"Cancel"})]})]})})]})})}const Vot=["January","February","March","April","May","June","July","August","September","October","November","December"];function Wot({isOpen:e,onClose:t,employee:n,payment:r,year:i,month:s,onSave:a,onDelete:o}){const[l,u]=w.useState(""),[d,f]=w.useState(""),[h,p]=w.useState(""),[m,g]=w.useState(""),[v,y]=w.useState("scheduled"),[b,x]=w.useState(""),[S,E]=w.useState(!1);w.useEffect(()=>{var k,A;e&&n&&(r?(u(r.salary_amount.toString()),f(((k=r.bonus_amount)==null?void 0:k.toString())||""),p(((A=r.deductions)==null?void 0:A.toString())||""),g(r.payment_date||`${i}-${s.toString().padStart(2,"0")}-01`),y(r.status==="cancelled"?"scheduled":r.status),x(r.notes||"")):(u(n.base_salary.toString()),f(""),p(""),g(`${i}-${s.toString().padStart(2,"0")}-01`),y("scheduled"),x("")))},[e,n,r,i,s]);const _=async()=>{if(!n)return;const k=parseFloat(l)||0,A=parseFloat(d)||0,j=parseFloat(h)||0;if(k<0||A<0||j<0){alert("Amounts cannot be negative");return}try{E(!0);const D={employee_id:n.id,year:i,month:s,salary_amount:k,bonus_amount:A||void 0,deductions:j||void 0,payment_date:m,status:v,notes:b.trim()||void 0};r&&(D.id=r.id),await a(D),t()}catch(D){console.error("Error saving salary payment:",D),alert("Failed to save salary payment")}finally{E(!1)}},T=async()=>{if(!(!r||!o)&&confirm("Are you sure you want to delete this salary payment?"))try{E(!0),await o(r.id),t()}catch(k){console.error("Error deleting salary payment:",k),alert("Failed to delete salary payment")}finally{E(!1)}},C=(parseFloat(l)||0)+(parseFloat(d)||0)-(parseFloat(h)||0);return c.jsx(kt,{open:e,onOpenChange:t,children:c.jsxs(St,{className:"max-w-md",children:[c.jsxs(_t,{children:[c.jsxs(Nt,{className:"flex items-center gap-2",children:[c.jsx(mn,{className:"h-5 w-5"}),r?"Edit":"Add"," Salary Payment"]}),c.jsxs("div",{className:"text-sm text-muted-foreground",children:[n==null?void 0:n.name,"  ",Vot[s-1]," ",i]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs(ie,{htmlFor:"salaryAmount",children:["Salary Amount (",(n==null?void 0:n.currency)||"SEK",")"]}),c.jsx(ce,{id:"salaryAmount",type:"number",min:"0",step:"0.01",value:l,onChange:k=>u(k.target.value),placeholder:"0"}),c.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Base salary: ",le((n==null?void 0:n.base_salary)||0)]})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"bonusAmount",children:"Bonus Amount (optional)"}),c.jsx(ce,{id:"bonusAmount",type:"number",min:"0",step:"0.01",value:d,onChange:k=>f(k.target.value),placeholder:"0"})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"deductions",children:"Deductions (optional)"}),c.jsx(ce,{id:"deductions",type:"number",min:"0",step:"0.01",value:h,onChange:k=>p(k.target.value),placeholder:"0"})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"paymentDate",children:"Payment Date"}),c.jsx(ce,{id:"paymentDate",type:"date",value:m,onChange:k=>g(k.target.value)})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"status",children:"Status"}),c.jsxs(Fn,{value:v,onValueChange:k=>y(k),children:[c.jsx(jn,{children:c.jsx(Bn,{placeholder:"Select status"})}),c.jsxs(On,{children:[c.jsx(We,{value:"scheduled",children:"Scheduled"}),c.jsx(We,{value:"paid",children:"Paid"})]})]})]}),c.jsxs("div",{children:[c.jsx(ie,{htmlFor:"notes",children:"Notes (optional)"}),c.jsx(Ca,{id:"notes",value:b,onChange:k=>x(k.target.value),placeholder:"Any additional notes...",rows:2})]}),c.jsx("div",{className:"p-3 bg-muted rounded-lg",children:c.jsxs("div",{className:"flex justify-between items-center text-sm",children:[c.jsx("span",{className:"font-medium",children:"Total Amount:"}),c.jsx("span",{className:`font-bold ${C<0?"text-red-600":"text-green-600"}`,children:le(C)})]})}),c.jsxs("div",{className:"flex justify-between pt-4",children:[c.jsx("div",{children:r&&o&&c.jsxs(H,{variant:"outline",size:"sm",onClick:T,disabled:S,className:"text-red-600 hover:text-red-700",children:[c.jsx($i,{className:"h-3 w-3 mr-1"}),"Delete"]})}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(H,{variant:"outline",onClick:t,disabled:S,children:"Cancel"}),c.jsx(H,{onClick:_,disabled:S,children:S?"Saving...":r?"Update":"Create"})]})]})]})]})})}function qot({employees:e,payments:t,year:n,onUpdatePayment:r,onAddPayment:i,onDeletePayment:s}){const[a,o]=w.useState({isOpen:!1,employee:null,payment:null,year:0,month:0}),[l,u]=w.useState(!1),d=w.useMemo(()=>{const b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],x=new Date,S=x.getFullYear(),E=[];if(n===S)for(let _=-2;_<=11-x.getMonth();_++){const T=x.getMonth()+_;T>=0&&T<=11&&E.push({name:b[T],number:T+1,isPast:_<0,isCurrent:_===0,isFuture:_>0})}else return n>S?b.map((_,T)=>({name:_,number:T+1,isPast:!1,isCurrent:!1,isFuture:!0})):b.map((_,T)=>({name:_,number:T+1,isPast:!0,isCurrent:!1,isFuture:!1}));return E},[n]),f=w.useMemo(()=>{const b={};return t.forEach(x=>{if(x.year===n){const S=`${x.employee_id}_${x.month}`;b[S]=x}}),b},[t,n]),h=(b,x)=>f[`${b}_${x}`],p=(b,x)=>{const S=h(b.id,x);o({isOpen:!0,employee:b,payment:S||null,year:n,month:x})},m=()=>{o({isOpen:!1,employee:null,payment:null,year:0,month:0})},g=async b=>{try{u(!0),b.id?await r({id:b.id,salary_amount:b.salary_amount,bonus_amount:b.bonus_amount,deductions:b.deductions,payment_date:b.payment_date,status:b.status,notes:b.notes}):await i({employee_id:b.employee_id,year:b.year,month:b.month,salary_amount:b.salary_amount,bonus_amount:b.bonus_amount,deductions:b.deductions,payment_date:b.payment_date,status:b.status,notes:b.notes})}catch(x){throw console.error("Error saving salary payment:",x),x}finally{u(!1)}},v=async b=>{try{u(!0),await s(b)}catch(x){throw console.error("Error deleting salary payment:",x),x}finally{u(!1)}},y=b=>{if(!b)return{icon:null,color:"text-gray-400",bgColor:"bg-gray-50"};if(b.salary_amount===0)return{icon:null,color:"text-gray-400",bgColor:"bg-gray-50"};switch(b.status){case"paid":return{icon:c.jsx(vr,{className:"h-3 w-3"}),color:"text-green-600",bgColor:"bg-green-50"};case"scheduled":return{icon:c.jsx(At,{className:"h-3 w-3"}),color:"text-blue-600",bgColor:"bg-blue-50"};default:return{icon:null,color:"text-gray-400",bgColor:"bg-gray-50"}}};return e.length===0?c.jsx("div",{className:"text-center py-8 text-muted-foreground",children:c.jsx("p",{children:"No active employees found"})}):c.jsxs("div",{className:"overflow-x-auto",children:[c.jsxs("table",{className:"w-full border-collapse",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b",children:[c.jsx("th",{className:"text-left p-3 font-medium min-w-[200px] sticky left-0 bg-background z-10",children:"Employee"}),d.map(b=>c.jsx("th",{className:`text-center p-3 font-medium min-w-[120px] ${b.isPast?"bg-muted/30 text-muted-foreground":b.isCurrent?"bg-blue-50 border-2 border-blue-200":"bg-background"}`,children:c.jsxs("div",{children:[c.jsx("div",{className:"text-sm",children:b.name}),c.jsx("div",{className:"text-xs text-muted-foreground",children:n}),b.isCurrent&&c.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Current"})]})},b.number)),c.jsx("th",{className:"text-center p-3 font-medium min-w-[120px]",children:"Total"})]})}),c.jsx("tbody",{children:e.map(b=>{const x=d.reduce((S,E)=>{const _=h(b.id,E.number);return S+((_==null?void 0:_.total_amount)||b.base_salary)},0);return c.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[c.jsx("td",{className:"p-3 sticky left-0 bg-background z-10 border-r",children:c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:b.name}),b.position&&c.jsx("div",{className:"text-xs text-muted-foreground",children:b.position}),c.jsxs("div",{className:"text-xs text-muted-foreground",children:["Base: ",le(b.base_salary),"/month"]})]})}),d.map(S=>{const E=S.number,_=h(b.id,E),T=_?_.salary_amount:b.base_salary,C=y(_);return c.jsx("td",{className:"p-1 text-center",children:c.jsx("div",{className:`relative p-2 rounded group ${C.bgColor}`,children:c.jsxs("div",{className:"flex flex-col items-center gap-1",children:[c.jsxs("div",{className:"flex items-center justify-center gap-1",children:[C.icon&&c.jsx("span",{className:C.color,children:C.icon}),c.jsx("span",{className:`text-xs font-medium ${C.color}`,children:le(T).replace(" kr","").trim()})]}),(_==null?void 0:_.bonus_amount)&&_.bonus_amount>0&&c.jsxs("div",{className:"text-xs text-green-600",children:["+",le(_.bonus_amount).replace(" kr","").trim()]}),(_==null?void 0:_.deductions)&&_.deductions>0&&c.jsxs("div",{className:"text-xs text-red-600",children:["-",le(_.deductions).replace(" kr","").trim()]}),c.jsxs(H,{size:"sm",variant:"ghost",className:"h-6 w-16 text-xs opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>p(b,E),disabled:l,children:[c.jsx(ab,{className:"h-3 w-3 mr-1"}),_?"Edit":"Add"]})]})})},E)}),c.jsx("td",{className:"p-3 text-center font-medium bg-muted/30",children:le(x)})]},b.id)})}),c.jsx("tfoot",{children:c.jsxs("tr",{className:"border-t-2 font-medium",children:[c.jsx("td",{className:"p-3 sticky left-0 bg-background z-10",children:"Monthly Totals"}),d.map(b=>{const x=b.number,S=e.reduce((E,_)=>{const T=h(_.id,x);return E+((T==null?void 0:T.total_amount)||_.base_salary)},0);return c.jsx("td",{className:"p-3 text-center bg-muted/30",children:le(S)},x)}),c.jsx("td",{className:"p-3 text-center bg-muted/50 font-bold",children:le(e.reduce((b,x)=>{const S=d.reduce((E,_)=>{const T=h(x.id,_.number);return E+((T==null?void 0:T.total_amount)||x.base_salary)},0);return b+S},0))})]})})]}),c.jsxs("div",{className:"mt-4 flex items-center gap-4 text-xs text-muted-foreground",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(vr,{className:"h-3 w-3 text-green-600"}),c.jsx("span",{children:"Paid"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(At,{className:"h-3 w-3 text-blue-600"}),c.jsx("span",{children:"Scheduled (shows in cash flow)"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(ab,{className:"h-3 w-3"}),c.jsx("span",{children:"Hover and click to edit"})]}),c.jsxs("div",{className:"flex items-center gap-1 ml-4 text-blue-600",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Showing: 2 past months + current + future months"})]})]}),c.jsx(Wot,{isOpen:a.isOpen,onClose:m,employee:a.employee,payment:a.payment,year:a.year,month:a.month,onSave:g,onDelete:v})]})}function Kot({isDarkMode:e}){const{employees:t,loading:n,error:r,addEmployee:i,updateEmployee:s,deleteEmployee:a,getActiveEmployees:o}=Uot(),{payments:l,loading:u,error:d,generateYearlyPayments:f,addSalaryPayment:h,updateSalaryPayment:p,deleteSalaryPayment:m}=zot(),[g,v]=w.useState(""),[y,b]=w.useState(!1),[x,S]=w.useState(null),[E,_]=w.useState(new Date().getFullYear()),T=n||u,C=r||d,k=w.useMemo(()=>t.filter(L=>{var B,R;return L.is_active?L.name.toLowerCase().includes(g.toLowerCase())||((B=L.position)==null?void 0:B.toLowerCase().includes(g.toLowerCase()))||((R=L.email)==null?void 0:R.toLowerCase().includes(g.toLowerCase())):!1}),[t,g]),A=w.useMemo(()=>{const L=o(),O=L.reduce((K,xe)=>K+xe.base_salary,0),B=new Date,R=B.getMonth()+1,F=B.getFullYear();let I,X,G;if(E===F){const K=Math.min(2,R-1),xe=12-R+1;I=K+xe,X=xe-1,G=K}else E>F?(I=12,X=12,G=0):(I=12,X=0,G=12);const $=O*I,be=l.filter(K=>K.year===E),je=be.filter(K=>K.status==="paid").reduce((K,xe)=>K+xe.total_amount,0),Q=be.filter(K=>K.status==="scheduled").reduce((K,xe)=>K+xe.total_amount,0);return{totalEmployees:L.length,totalMonthlySalaries:O,totalBudgetInView:$,actualPaid:je,scheduledPayments:Q,remainingBudget:$-je-Q,totalMonthsInView:I,futureMonthsCount:X,pastMonthsCount:G}},[o,l,E]),j=async L=>{try{x?(await s({...L,id:x.id}),S(null)):await i(L),b(!1)}catch(O){console.error("Error saving employee:",O)}},D=L=>{S(L),b(!0)},P=async L=>{confirm("Are you sure you want to delete this employee? This will deactivate them if they have salary payments.")&&await a(L)},M=async()=>{if(confirm(`Generate salary payments for all active employees for ${E}?`))try{await f(E)}catch(L){console.error("Error generating yearly payments:",L)}};return T?c.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-muted-foreground",children:"Loading salary data..."})]})}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Salary Management"}),c.jsx("p",{className:"text-muted-foreground",children:"Manage employee salaries and monthly payments"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(H,{onClick:M,variant:"outline",className:"flex items-center gap-2",children:[c.jsx(jH,{className:"h-4 w-4"}),"Generate ",E," Payments"]}),c.jsxs(H,{onClick:()=>b(!0),className:"flex items-center gap-2",children:[c.jsx(nt,{className:"h-4 w-4"}),"Add Employee"]})]})]}),C&&c.jsx(Z,{className:"border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-900/20",children:c.jsx(ee,{className:"pt-6",children:c.jsx("p",{className:"text-red-600 dark:text-red-400",children:C})})}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsx(Z,{children:c.jsx(ee,{className:"pt-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Employees"}),c.jsx("p",{className:"text-2xl font-bold",children:A.totalEmployees})]}),c.jsx(Ui,{className:"h-8 w-8 text-muted-foreground"})]})})}),c.jsx(Z,{children:c.jsx(ee,{className:"pt-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Monthly Total"}),c.jsx("p",{className:"text-2xl font-bold",children:le(A.totalMonthlySalaries)})]}),c.jsx(mn,{className:"h-8 w-8 text-muted-foreground"})]})})}),c.jsx(Z,{children:c.jsx(ee,{className:"pt-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:E===new Date().getFullYear()?"Period Budget":"Yearly Budget"}),c.jsx("p",{className:"text-2xl font-bold",children:le(A.totalBudgetInView)}),A.totalMonthsInView>0&&c.jsxs("p",{className:"text-xs text-muted-foreground",children:[A.totalMonthsInView," months in view",E===new Date().getFullYear()&&` (${A.pastMonthsCount} past, current, ${A.futureMonthsCount} future)`]})]}),c.jsx(At,{className:"h-8 w-8 text-muted-foreground"})]})})}),c.jsx(Z,{children:c.jsx(ee,{className:"pt-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm font-medium text-muted-foreground",children:["Paid ",E]}),c.jsx("p",{className:"text-2xl font-bold text-green-600",children:le(A.actualPaid)})]}),c.jsx(vr,{className:"h-8 w-8 text-green-600"})]})})})]}),c.jsxs(Z,{children:[c.jsx(de,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(he,{children:"Monthly Salary Overview"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Year:"}),c.jsx("select",{value:E,onChange:L=>_(parseInt(L.target.value)),className:"px-3 py-1 border rounded-md","aria-label":"Select year for salary overview",children:Array.from({length:5},(L,O)=>{const B=new Date().getFullYear()-2+O;return c.jsx("option",{value:B,children:B},B)})})]})]})}),c.jsx(ee,{children:c.jsx(qot,{employees:k,payments:l,year:E,onUpdatePayment:p,onAddPayment:h,onDeletePayment:m})})]}),c.jsxs(Z,{children:[c.jsx(de,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(he,{children:"Employees"}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("div",{className:"relative",children:[c.jsx(Kh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx(ce,{placeholder:"Search employees...",value:g,onChange:L=>v(L.target.value),className:"pl-9 w-64"})]})})]})}),c.jsx(ee,{children:k.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(Ui,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),c.jsx("p",{className:"text-muted-foreground",children:"No employees found"}),c.jsx(H,{onClick:()=>b(!0),className:"mt-2",variant:"outline",children:"Add First Employee"})]}):c.jsx("div",{className:"space-y-4",children:k.map(L=>c.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h3",{className:"font-medium",children:L.name}),L.position&&c.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 rounded-full",children:L.position})]}),c.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-muted-foreground",children:[c.jsxs("span",{children:["Base Salary: ",le(L.base_salary)]}),c.jsxs("span",{children:["Start Date: ",new Date(L.employment_start_date).toLocaleDateString("sv-SE")]}),L.email&&c.jsxs("span",{children:["Email: ",L.email]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(H,{size:"sm",variant:"outline",onClick:()=>D(L),children:c.jsx(ao,{className:"h-3 w-3"})}),c.jsx(H,{size:"sm",variant:"outline",onClick:()=>P(L.id),className:"text-red-600 hover:text-red-700",children:c.jsx($i,{className:"h-3 w-3"})})]})]},L.id))})})]}),y&&c.jsx(Hot,{employee:x,onSubmit:j,onCancel:()=>{b(!1),S(null)}})]})}const af=["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"];function Got(){const{user:e}=Tr(),{toast:t}=mo(),[n,r]=w.useState(()=>{const g=new Date;return{year:g.getFullYear(),month:g.getMonth()+1}}),[i,s]=w.useState({billing_percentage:94,absence_percentage:15}),[a,o]=w.useState(!1),[l,u]=w.useState(!1);w.useEffect(()=>{(async()=>{if(e)try{u(!0);const{data:v,error:y}=await J.from("monthly_settings").select("billing_percentage, absence_percentage").eq("user_id",e.id).eq("year",n.year).eq("month",n.month).single();if(v&&!y)console.log(`Loading settings for ${n.month}/${n.year}:`,v),s({billing_percentage:v.billing_percentage,absence_percentage:v.absence_percentage});else{console.log(`No specific settings for ${n.month}/${n.year}, using defaults`);const{data:b,error:x}=await J.from("user_profiles").select("debit_rate_monthly, absence_percentage").eq("id",e.id).single();s(b&&!x?{billing_percentage:b.debit_rate_monthly||94,absence_percentage:b.absence_percentage||15}:{billing_percentage:94,absence_percentage:15})}}catch(v){console.error("Error loading monthly settings:",v),s({billing_percentage:94,absence_percentage:15})}finally{u(!1)}})()},[e,n.year,n.month]);const d=g=>{r(v=>{let y=v.month+(g==="next"?1:-1),b=v.year;return y>12?(y=1,b++):y<1&&(y=12,b--),{year:b,month:y}})},f=async()=>{if(e)try{o(!0),console.log(` Saving settings for ${af[n.month-1]} ${n.year}:`,{month:n.month,year:n.year,settings:i});const{error:g}=await J.from("monthly_settings").upsert({user_id:e.id,year:n.year,month:n.month,billing_percentage:i.billing_percentage,absence_percentage:i.absence_percentage,updated_at:new Date().toISOString()},{onConflict:"user_id,year,month"});if(g)throw g;console.log(` Successfully saved settings for ${af[n.month-1]} ${n.year}`),t({title:"Sparade mnadsspecifika instllningar",description:`Instllningar fr ${af[n.month-1]} ${n.year} har sparats`})}catch(g){console.error("Error saving monthly settings:",g),t({title:"Fel vid sparande",description:g instanceof Error?`Databasfel: ${g.message}. Kontrollera att monthly_settings tabellen existerar.`:"Kunde inte spara mnadsspecifika instllningar.",variant:"destructive"})}finally{o(!1)}},h=8*5*4.33,p=Math.round(h*(1-i.absence_percentage/100)),m=Math.round(p*(i.billing_percentage/100));return c.jsxs(Z,{children:[c.jsxs(de,{children:[c.jsxs(he,{className:"flex items-center gap-2",children:[c.jsx(At,{className:"w-5 h-5"}),"Mnadsspecifika instllningar"]}),c.jsx(gr,{children:"Konfigurera debiteringsgrad och frnvaro per mnad fr noggrannare prognoser. Varje mnad kan ha unika instllningar."})]}),c.jsxs(ee,{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between bg-muted/50 p-3 rounded-lg",children:[c.jsx(H,{variant:"ghost",size:"icon",onClick:()=>d("prev"),className:"h-8 w-8",children:c.jsx(Qj,{className:"h-4 w-4"})}),c.jsxs("div",{className:"text-center",children:[c.jsxs("h3",{className:"font-semibold text-lg",children:[af[n.month-1]," ",n.year]}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Mnadsspecifika instllningar"})]}),c.jsx(H,{variant:"ghost",size:"icon",onClick:()=>d("next"),className:"h-8 w-8",children:c.jsx(Jj,{className:"h-4 w-4"})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"billing_percentage",children:"Debiteringsgrad (%)"}),c.jsx(ce,{id:"billing_percentage",type:"number",min:"0",max:"100",step:"1",value:i.billing_percentage,onChange:g=>s(v=>({...v,billing_percentage:parseFloat(g.target.value)>=0?parseFloat(g.target.value):0}))}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Procent av arbetstimmar som faktiskt debiteras denna mnad"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{htmlFor:"absence_percentage",children:"Frnvaroprocent (%)"}),c.jsx(ce,{id:"absence_percentage",type:"number",min:"0",max:"100",step:"1",value:i.absence_percentage,onChange:g=>s(v=>({...v,absence_percentage:parseFloat(g.target.value)>=0?parseFloat(g.target.value):0}))}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Frvntad frnvaro fr denna mnad (semester, sjukdom, etc.)"})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h4",{className:"font-medium",children:["Berkning fr ",af[n.month-1]]}),c.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg space-y-2 text-sm",children:[c.jsxs("p",{children:[" Arbetstimmar: ",Math.round(h)," timmar"]}),c.jsxs("p",{children:[" Efter frnvaro (",i.absence_percentage,"%): ",p," timmar"]}),c.jsxs("p",{children:[" Debiterbara timmar (",i.billing_percentage,"%): ",m," timmar"]})]})]})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs(H,{onClick:f,disabled:a||l,className:"flex items-center gap-2",children:[c.jsx(qh,{className:"w-4 h-4"}),a?"Sparar...":`Spara fr ${af[n.month-1]}`]})})]})]})}function Yot(){const{user:e}=Tr(),{toast:t}=mo(),{processYearlyVat:n,refetch:r}=pS((e==null?void 0:e.id)||null),[i,s]=w.useState(!0),[a,o]=w.useState(!1),[l,u]=w.useState(!1),[d,f]=w.useState({id:"",company_name:"",company_motto:"",hourly_rate:99,currency:"SEK",timezone:"Europe/Stockholm",debit_rate_monthly:99,absence_percentage:5,work_hours_per_day:8,work_days_per_week:5,auto_generate_employer_tax:!1,employer_tax_payment_date:12,auto_generate_yearly_vat:!1,vat_rate_income:25,vat_rate_expenses:25}),h=w.useCallback(async()=>{if(e!=null&&e.id)try{console.log(" Fetching settings for user:",e.id);const{data:x,error:S}=await J.from("user_profiles").select("*").eq("id",e.id).single();if(S&&S.code!=="PGRST116")throw console.error(" Error fetching settings:",S),S;if(x)console.log(" Settings loaded:",{auto_generate_employer_tax:x.auto_generate_employer_tax,auto_generate_yearly_vat:x.auto_generate_yearly_vat,vat_rate_income:x.vat_rate_income}),f({id:x.id,company_name:x.company_name||"",company_motto:x.company_motto||"",hourly_rate:x.hourly_rate||500,currency:x.currency||"SEK",timezone:x.timezone||"Europe/Stockholm",debit_rate_monthly:x.debit_rate_monthly||1e4,absence_percentage:x.absence_percentage||5,work_hours_per_day:x.work_hours_per_day||8,work_days_per_week:x.work_days_per_week||5,auto_generate_employer_tax:x.auto_generate_employer_tax||!1,employer_tax_payment_date:x.employer_tax_payment_date||12,auto_generate_yearly_vat:x.auto_generate_yearly_vat||!1,vat_rate_income:x.vat_rate_income||25,vat_rate_expenses:x.vat_rate_expenses||25});else{const{data:E,error:_}=await J.from("user_profiles").insert({id:e.id,company_name:"",company_motto:"",hourly_rate:500,currency:"SEK",timezone:"Europe/Stockholm",debit_rate_monthly:1e4,absence_percentage:5,work_hours_per_day:8,work_days_per_week:5,auto_generate_employer_tax:!1,employer_tax_payment_date:12,auto_generate_yearly_vat:!1,vat_rate_income:25,vat_rate_expenses:25}).select().single();if(_)throw _;E&&f({id:E.id,company_name:E.company_name||"",company_motto:E.company_motto||"",hourly_rate:E.hourly_rate||500,currency:E.currency||"SEK",timezone:E.timezone||"Europe/Stockholm",debit_rate_monthly:E.debit_rate_monthly||1e4,absence_percentage:E.absence_percentage||5,work_hours_per_day:E.work_hours_per_day||8,work_days_per_week:E.work_days_per_week||5,auto_generate_employer_tax:E.auto_generate_employer_tax||!1,employer_tax_payment_date:E.employer_tax_payment_date||12,auto_generate_yearly_vat:E.auto_generate_yearly_vat||!1,vat_rate_income:E.vat_rate_income||25,vat_rate_expenses:E.vat_rate_expenses||25})}}catch(x){console.error("Error fetching settings:",x)}finally{s(!1)}},[e==null?void 0:e.id]);w.useEffect(()=>{h()},[h]);const p=async()=>{if(!(e!=null&&e.id)){console.error(" No user ID available for employer tax processing");return}try{console.log(" Processing employer tax for existing salary cash flow entries...");const{data:x,error:S}=await J.from("cash_flow_entries").select("*").eq("user_id",e.id).eq("type","expense").eq("category","Salary").gt("amount",0).order("date",{ascending:!0});if(S)throw S;console.log(` Found ${(x==null?void 0:x.length)||0} salary entries to process`);let E=0;const _=d.employer_tax_payment_date||25;for(const T of x||[]){const C=Math.round(T.amount*.3142),k=new Date(T.date),A=k.getFullYear();let j=k.getMonth()+1;j>11&&(j=0,k.setFullYear(A+1));const P=new Date(A+(j>11?1:0),j,Math.min(_,28)).toISOString().split("T")[0],{data:M}=await J.from("cash_flow_entries").select("id").eq("user_id",e.id).eq("category","Employer Tax").eq("date",P).like("description",`%${T.description}%`).single();if(M){console.log(` Employer tax already exists for ${T.description} on ${P}`);continue}const{error:L}=await J.from("cash_flow_entries").insert([{user_id:e.id,type:"expense",amount:C,description:`Employer Tax - ${T.description.replace("Salary - ","")}`,category:"Employer Tax",date:P,is_recurring:!1,is_budget_entry:!1,is_recurring_instance:!1,vat_amount:0,amount_excluding_vat:C,vat_rate:0}]);L?console.error(" Error creating employer tax entry:",L):(console.log(` Created employer tax entry: ${C} SEK for ${T.description} (due ${P})`),E++)}t({title:"Employer Tax Processing Complete",description:`Created ${E} employer tax entries for existing salary payments`}),console.log(` Successfully processed employer tax: ${E} entries created`)}catch(x){console.error(" Error processing employer tax for existing salaries:",x),t({title:"Employer Tax Processing Error",description:"Failed to process employer tax for existing salaries. Please try again.",variant:"destructive"})}},m=async()=>{if(!(e!=null&&e.id)){console.error(" No user ID available for VAT processing");return}try{console.log(" Auto-processing VAT for multiple years..."),console.log(" processYearlyVat function available:",typeof n),console.log(" Refreshing VAT settings before processing..."),r&&(await r(),console.log(" VAT settings refreshed")),await new Promise(E=>setTimeout(E,500)),console.log(" Processing VAT for 2024...");const x=await n(2024);console.log("2024 result:",x),console.log(" Processing VAT for 2025...");const S=await n(2025);console.log("2025 result:",S),t(x||S?{title:"VAT Processing Complete",description:`Yearly VAT calculations have been created for ${x?"2024":""}${x&&S?" and ":""}${S?"2025":""}`}:{title:"VAT Processing Info",description:"No VAT entries were created. Check if you have income or expenses for the selected years."}),console.log(" Successfully processed VAT for multiple years")}catch(x){console.error(" Error auto-processing VAT:",x),t({title:"VAT Processing Error",description:"Failed to process VAT calculations. Please try again.",variant:"destructive"})}},g=async()=>{if(e!=null&&e.id)try{console.log(" Cleaning up existing VAT entries...");const{error:x}=await J.from("cash_flow_entries").delete().eq("user_id",e.id).eq("category","MOMS Tax");if(x)throw x;t({title:"VAT Disabled",description:"All VAT payment entries have been removed from cash flow"}),console.log(" Successfully removed all VAT entries")}catch(x){console.error("Error cleaning up VAT entries:",x),t({title:"Error",description:"Failed to remove VAT entries. Please try again.",variant:"destructive"})}},v=async()=>{if(e!=null&&e.id)try{console.log(" Cleaning up existing employer tax entries...");const{error:x}=await J.from("cash_flow_entries").delete().eq("user_id",e.id).eq("category","Employer Tax");if(x)throw x;t({title:"Employer Tax Disabled",description:"All employer tax entries have been removed from cash flow"}),console.log(" Successfully removed all employer tax entries")}catch(x){console.error("Error cleaning up employer tax entries:",x),t({title:"Error",description:"Failed to remove employer tax entries. Please try again.",variant:"destructive"})}},y=async(x,S)=>{if(console.log(" Settings change:",{field:x,value:S,userId:e==null?void 0:e.id}),f(E=>({...E,[x]:S})),e!=null&&e.id)try{const E={id:e.id,[x]:S};console.log(" Saving setting to database:",E);const{error:_}=await J.from("user_profiles").upsert(E,{onConflict:"id"});if(_)throw console.error(" Database save error:",_),_;console.log(" Setting saved successfully:",x,S)}catch(E){console.error(" Error saving setting:",E),t({title:"Error",description:"Failed to save setting. Please try again.",variant:"destructive"});return}x==="auto_generate_yearly_vat"&&S===!0&&(console.log(" Triggering VAT calculation..."),m()),x==="auto_generate_yearly_vat"&&S===!1&&(console.log(" Triggering VAT cleanup..."),g()),x==="auto_generate_employer_tax"&&S===!0&&(console.log(" Triggering employer tax generation for existing salaries..."),p()),x==="auto_generate_employer_tax"&&S===!1&&(console.log(" Triggering employer tax cleanup..."),v())},b=async()=>{if(e!=null&&e.id){o(!0);try{const x={id:e.id,company_name:d.company_name,company_motto:d.company_motto,hourly_rate:d.hourly_rate,currency:d.currency,timezone:d.timezone,debit_rate_monthly:d.debit_rate_monthly,absence_percentage:d.absence_percentage,work_hours_per_day:d.work_hours_per_day,work_days_per_week:d.work_days_per_week,auto_generate_employer_tax:d.auto_generate_employer_tax,employer_tax_payment_date:d.employer_tax_payment_date,auto_generate_yearly_vat:d.auto_generate_yearly_vat,vat_rate_income:d.vat_rate_income,vat_rate_expenses:d.vat_rate_expenses};console.log(" Full updateData being sent to database:",x),console.log(" Numeric values specifically:",{hourly_rate:x.hourly_rate,debit_rate_monthly:x.debit_rate_monthly,absence_percentage:x.absence_percentage,work_hours_per_day:x.work_hours_per_day,work_days_per_week:x.work_days_per_week,employer_tax_payment_date:x.employer_tax_payment_date,vat_rate_income:x.vat_rate_income,vat_rate_expenses:x.vat_rate_expenses});const{error:S}=await J.from("user_profiles").upsert(x,{onConflict:"id"});if(S)throw S;t({title:"Sparade instllningar",description:"Dina instllningar har sparats framgngsrikt"})}catch(x){console.error("Error saving settings:",x),t({title:"Fel",description:"Kunde inte spara instllningar",variant:"destructive"})}finally{o(!1)}}};return i?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx(dh,{className:"h-8 w-8 animate-spin"})}):c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Instllningar"}),c.jsx("p",{className:"text-muted-foreground",children:"Hantera dina fretagsinstllningar, timpris och systempreferenser"})]}),c.jsxs(Gu,{defaultValue:"profile",className:"w-full",children:[c.jsxs(hc,{className:"grid w-full grid-cols-5",children:[c.jsxs(ir,{value:"profile",className:"flex items-center gap-2",children:[c.jsx(Gs,{className:"h-4 w-4"}),"Profil"]}),c.jsxs(ir,{value:"tracking",className:"flex items-center gap-2",children:[c.jsx(ht,{className:"h-4 w-4"}),"Tidrapportering"]}),c.jsxs(ir,{value:"invoicing",className:"flex items-center gap-2",children:[c.jsx(Ks,{className:"h-4 w-4"}),"Fakturering"]}),c.jsxs(ir,{value:"tax",className:"flex items-center gap-2",children:[c.jsx(e4,{className:"h-4 w-4"}),"Skatt"]}),c.jsxs(ir,{value:"preferences",className:"flex items-center gap-2",children:[c.jsx(r4,{className:"h-4 w-4"}),"Preferenser"]})]}),c.jsx(Ft,{value:"profile",className:"space-y-4",children:c.jsxs(Z,{children:[c.jsxs(de,{children:[c.jsxs(he,{className:"flex items-center gap-2",children:[c.jsx(Gs,{className:"h-5 w-5"}),"Fretagsprofil"]}),c.jsx(gr,{children:"Grundlggande information om ditt fretag"})]}),c.jsxs(ee,{className:"space-y-4",children:[c.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[c.jsx(ie,{htmlFor:"company_name",children:"Fretagsnamn"}),c.jsx(ce,{type:"text",id:"company_name",value:d.company_name,onChange:x=>y("company_name",x.target.value)})]}),c.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[c.jsx(ie,{htmlFor:"company_motto",children:"Fretagsmotto"}),c.jsx(ce,{type:"text",id:"company_motto",value:d.company_motto,onChange:x=>y("company_motto",x.target.value)})]}),c.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[c.jsx(ie,{htmlFor:"hourly_rate",children:"Timpris (SEK)"}),c.jsx(ce,{type:"number",id:"hourly_rate",value:d.hourly_rate,onChange:x=>y("hourly_rate",Number(x.target.value))})]})]})]})}),c.jsxs(Ft,{value:"tracking",className:"space-y-4",children:[c.jsxs(Z,{children:[c.jsxs(de,{children:[c.jsxs(he,{className:"flex items-center gap-2",children:[c.jsx(ht,{className:"h-5 w-5"}),"Tidrapportering"]}),c.jsx(gr,{children:"Instllningar fr tidrapportering och frnvaro"})]}),c.jsxs(ee,{className:"space-y-4",children:[c.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[c.jsx(ie,{htmlFor:"work_hours_per_day",children:"Arbetstimmar per dag"}),c.jsx(ce,{type:"number",id:"work_hours_per_day",value:d.work_hours_per_day,onChange:x=>y("work_hours_per_day",Number(x.target.value))})]}),c.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[c.jsx(ie,{htmlFor:"work_days_per_week",children:"Arbetsdagar per vecka"}),c.jsx(ce,{type:"number",id:"work_days_per_week",value:d.work_days_per_week,onChange:x=>y("work_days_per_week",Number(x.target.value))})]}),c.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[c.jsx(ie,{htmlFor:"absence_percentage",children:"Frnvaroprocent (%)"}),c.jsx(ce,{type:"number",id:"absence_percentage",value:d.absence_percentage,onChange:x=>y("absence_percentage",Number(x.target.value))})]})]})]}),c.jsx(Got,{})]}),c.jsx(Ft,{value:"invoicing",className:"space-y-4",children:c.jsxs(Z,{children:[c.jsxs(de,{children:[c.jsxs(he,{className:"flex items-center gap-2",children:[c.jsx(Ks,{className:"h-5 w-5"}),"Fakturering"]}),c.jsx(gr,{children:"Instllningar fr fakturering och integrationer"})]}),c.jsxs(ee,{className:"space-y-4",children:[c.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[c.jsx(ie,{htmlFor:"debit_rate_monthly",children:"Mnatlig debiteringsgrad (SEK)"}),c.jsx(ce,{type:"number",id:"debit_rate_monthly",value:d.debit_rate_monthly,onChange:x=>y("debit_rate_monthly",Number(x.target.value))})]}),c.jsx(gw,{}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ie,{children:"Fortnox Integration"}),c.jsxs(H,{variant:"outline",onClick:()=>u(!0),className:"w-full justify-start",children:[c.jsx(Xj,{className:"h-4 w-4 mr-2"}),"Konfigurera Fortnox"]})]})]})]})}),c.jsx(Ft,{value:"tax",className:"space-y-4",children:c.jsxs(Z,{children:[c.jsxs(de,{children:[c.jsxs(he,{className:"flex items-center gap-2",children:[c.jsx(e4,{className:"h-5 w-5"}),"Skattehantering"]}),c.jsx(gr,{children:"Automatisk hantering av arbetsgivaravgifter och MOMS"})]}),c.jsxs(ee,{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Arbetsgivaravgifter"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Aa,{id:"auto_generate_employer_tax",checked:d.auto_generate_employer_tax||!1,onCheckedChange:x=>y("auto_generate_employer_tax",x)}),c.jsx(ie,{htmlFor:"auto_generate_employer_tax",children:"Generera arbetsgivaravgifter automatiskt (31.42%)"})]}),d.auto_generate_employer_tax&&c.jsxs("div",{className:"ml-6 grid w-full items-center gap-1.5",children:[c.jsx(ie,{htmlFor:"employer_tax_payment_date",children:"Betalningsdag fr arbetsgivaravgifter"}),c.jsx(ce,{type:"number",id:"employer_tax_payment_date",value:d.employer_tax_payment_date||12,onChange:x=>y("employer_tax_payment_date",Number(x.target.value)),min:"1",max:"28"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Dag i mnaden efter lneutbetalning (1-28)"})]})]}),c.jsx(gw,{}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"MOMS (VAT)"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Aa,{id:"auto_generate_yearly_vat",checked:d.auto_generate_yearly_vat||!1,onCheckedChange:x=>y("auto_generate_yearly_vat",x)}),c.jsx(ie,{htmlFor:"auto_generate_yearly_vat",children:"Generera rlig MOMS-betalning automatiskt"})]}),d.auto_generate_yearly_vat&&c.jsxs("div",{className:"ml-6 space-y-4",children:[c.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[c.jsx(ie,{htmlFor:"vat_rate_income",children:"MOMS-sats fr intkter (%)"}),c.jsx(ce,{type:"number",id:"vat_rate_income",value:d.vat_rate_income||25,onChange:x=>y("vat_rate_income",Number(x.target.value)),min:"0",max:"100"})]}),c.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[c.jsx(ie,{htmlFor:"vat_rate_expenses",children:"MOMS-sats fr utgifter (%)"}),c.jsx(ce,{type:"number",id:"vat_rate_expenses",value:d.vat_rate_expenses||25,onChange:x=>y("vat_rate_expenses",Number(x.target.value)),min:"0",max:"100"})]}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"MOMS berknas automatiskt fr alla fakturor och utgifter, och en rlig betalning skapas i januari"})]})]})]})]})}),c.jsx(Ft,{value:"preferences",className:"space-y-4",children:c.jsxs(Z,{children:[c.jsxs(de,{children:[c.jsxs(he,{className:"flex items-center gap-2",children:[c.jsx(r4,{className:"h-5 w-5"}),"Systempreferenser"]}),c.jsx(gr,{children:"Allmnna systeminstllningar"})]}),c.jsxs(ee,{className:"space-y-4",children:[c.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[c.jsx(ie,{htmlFor:"currency",children:"Valuta"}),c.jsx(ce,{type:"text",id:"currency",value:d.currency,onChange:x=>y("currency",x.target.value)})]}),c.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[c.jsx(ie,{htmlFor:"timezone",children:"Tidszon"}),c.jsx(ce,{type:"text",id:"timezone",value:d.timezone,onChange:x=>y("timezone",x.target.value)})]})]})]})})]}),c.jsx("div",{className:"flex justify-end pt-6",children:c.jsx(H,{onClick:b,disabled:a,children:a?c.jsxs(c.Fragment,{children:[c.jsx(dh,{className:"h-4 w-4 mr-2 animate-spin"}),"Sparar..."]}):c.jsxs(c.Fragment,{children:[c.jsx(qh,{className:"h-4 w-4 mr-2"}),"Spara instllningar"]})})}),c.jsx(uae,{open:l,onOpenChange:u})]})}function Xot(){const{user:e}=Tr(),[t,n]=w.useState({hasColumns:!1,userSettings:null,salaryPayments:[],cashFlowEntries:[]}),[r,i]=w.useState(!0),s=w.useCallback(async()=>{if(e)try{i(!0);const{data:l,error:u}=await J.from("user_profiles").select("auto_generate_employer_tax, employer_tax_payment_date, company_name").eq("id",e.id).single();u&&u.code!=="PGRST116"&&console.error("Profile error:",u);const{data:d,error:f}=await J.from("salary_payments").select(`
          *,
          employee:salary_employees(name)
        `).eq("user_id",e.id).order("year",{ascending:!1}).order("month",{ascending:!1}).limit(10);f&&console.error("Salary error:",f);const{data:h,error:p}=await J.from("cash_flow_entries").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(20);p&&console.error("Cash flow error:",p),n({hasColumns:!!l,userSettings:l,salaryPayments:d||[],cashFlowEntries:h||[]})}catch(l){console.error("Debug info error:",l)}finally{i(!1)}},[e]);w.useEffect(()=>{s()},[s]);const a=async()=>{if(e)try{const l=t.salaryPayments.find(d=>d.status==="scheduled");if(!l){alert('No scheduled salary payments found. Please set a salary payment to "scheduled" status first.');return}const{error:u}=await J.from("salary_payments").update({updated_at:new Date().toISOString()}).eq("id",l.id);if(u)throw u;alert("Triggered employer tax update. Check the cash flow entries below after a few seconds."),setTimeout(s,2e3)}catch(l){console.error("Test trigger error:",l);const u=l instanceof Error?l.message:"Unknown error";alert("Error triggering test: "+u)}};if(!e)return c.jsx("div",{className:"p-4",children:"Please log in to access debug information."});if(r)return c.jsx("div",{className:"p-4",children:"Loading debug information..."});const o=t.cashFlowEntries.filter(l=>{var u,d,f;return((u=l.category)==null?void 0:u.toLowerCase().includes("tax"))||((d=l.description)==null?void 0:d.toLowerCase().includes("tax"))||((f=l.description)==null?void 0:f.toLowerCase().includes("employer"))});return c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold",children:"Employer Tax Debug Page"}),c.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[c.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Database Columns"}),c.jsx("p",{className:`text-sm ${t.hasColumns?"text-green-600":"text-red-600"}`,children:t.hasColumns?" Employer tax columns exist":" Employer tax columns missing - run the SQL script"})]}),c.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[c.jsx("h2",{className:"text-lg font-semibold mb-2",children:"User Settings"}),t.userSettings?c.jsxs("div",{className:"space-y-1 text-sm",children:[c.jsxs("p",{children:["Auto-generate employer tax: ",c.jsx("span",{className:t.userSettings.auto_generate_employer_tax?"text-green-600 font-semibold":"text-red-600",children:t.userSettings.auto_generate_employer_tax?"ENABLED":"DISABLED"})]}),c.jsxs("p",{children:["Payment date: ",t.userSettings.employer_tax_payment_date||"Not set"]})]}):c.jsx("p",{className:"text-red-600",children:"No user profile found"})]}),c.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[c.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Recent Salary Payments"}),t.salaryPayments.length>0?c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b",children:[c.jsx("th",{className:"text-left p-2",children:"Employee"}),c.jsx("th",{className:"text-left p-2",children:"Month"}),c.jsx("th",{className:"text-left p-2",children:"Amount"}),c.jsx("th",{className:"text-left p-2",children:"Status"}),c.jsx("th",{className:"text-left p-2",children:"Cash Flow ID"}),c.jsx("th",{className:"text-left p-2",children:"Employer Tax ID"})]})}),c.jsx("tbody",{children:t.salaryPayments.map(l=>{var u,d;return c.jsxs("tr",{className:"border-b",children:[c.jsx("td",{className:"p-2",children:((u=l.employee)==null?void 0:u.name)||"Unknown"}),c.jsxs("td",{className:"p-2",children:[l.year,"-",l.month.toString().padStart(2,"0")]}),c.jsxs("td",{className:"p-2",children:[(d=l.total_amount)==null?void 0:d.toLocaleString("sv-SE")," kr"]}),c.jsx("td",{className:"p-2",children:c.jsx("span",{className:`px-2 py-1 rounded text-xs ${l.status==="scheduled"?"bg-blue-100 text-blue-800":l.status==="paid"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:l.status})}),c.jsx("td",{className:"p-2",children:l.cash_flow_entry_id?"":""}),c.jsx("td",{className:"p-2",children:l.employer_tax_entry_id?"":""})]},l.id)})})]})}):c.jsx("p",{className:"text-gray-600",children:"No salary payments found"})]}),c.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[c.jsxs("h2",{className:"text-lg font-semibold mb-2",children:["Employer Tax Cash Flow Entries (",o.length,")"]}),o.length>0?c.jsx("div",{className:"space-y-2",children:o.map(l=>{var u;return c.jsxs("div",{className:"border rounded p-2 text-sm",children:[c.jsx("div",{className:"font-medium",children:l.description}),c.jsxs("div",{className:"text-gray-600",children:[(u=l.amount)==null?void 0:u.toLocaleString("sv-SE")," kr  ",l.category,"  ",l.date]})]},l.id)})}):c.jsx("p",{className:"text-red-600",children:" No employer tax entries found"})]}),c.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[c.jsxs("h2",{className:"text-lg font-semibold mb-2",children:["All Cash Flow Entries (",t.cashFlowEntries.length,")"]}),t.cashFlowEntries.length>0?c.jsx("div",{className:"max-h-60 overflow-y-auto space-y-1",children:t.cashFlowEntries.map(l=>{var u;return c.jsxs("div",{className:"text-xs border-b pb-1",children:[c.jsxs("span",{className:`font-medium ${l.type==="income"?"text-green-600":"text-red-600"}`,children:[l.type==="income"?"+":"-",(u=l.amount)==null?void 0:u.toLocaleString("sv-SE")," kr"]}),"  ",c.jsx("span",{children:l.description}),"  ",c.jsxs("span",{className:"text-gray-500",children:[l.category,"  ",l.date]})]},l.id)})}):c.jsx("p",{className:"text-gray-600",children:"No cash flow entries found"})]}),c.jsxs("div",{className:"bg-blue-50 rounded-lg border border-blue-200 p-4",children:[c.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Test Employer Tax Generation"}),c.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"This will trigger a salary payment update to force employer tax creation."}),c.jsx("button",{onClick:a,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Trigger Test"})]})]})}function Qot(){const{user:e,loading:t,signOut:n}=Tr(),[r,i]=w.useState(!1);w.useEffect(()=>{const o=localStorage.getItem("darkMode");o&&i(JSON.parse(o))},[]),w.useEffect(()=>{localStorage.setItem("darkMode",JSON.stringify(r)),r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[r]);const s=async()=>{await n()},a=()=>{i(!r)};return t?c.jsx("div",{className:`min-h-screen flex items-center justify-center ${r?"bg-slate-900":"bg-slate-50"}`,children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),c.jsx("p",{className:r?"text-white":"text-slate-900",children:"Loading..."})]})}):e?c.jsx(Cfe,{children:c.jsx(iue,{children:c.jsx(hpe,{isDarkMode:r,onToggleDarkMode:a,onSignOut:s,user:e,children:c.jsxs(Xce,{children:[c.jsx(Vi,{path:"/",element:c.jsx(V$e,{isDarkMode:r})}),c.jsx(Vi,{path:"/time-tracking",element:c.jsx(X$e,{isDarkMode:r})}),c.jsx(Vi,{path:"/budget",element:c.jsx(s9e,{isDarkMode:r})}),c.jsx(Vi,{path:"/cash-flow",element:c.jsx(o9e,{isDarkMode:r})}),c.jsx(Vi,{path:"/projects",element:c.jsx(l9e,{})}),c.jsx(Vi,{path:"/clients",element:c.jsx(kat,{})}),c.jsx(Vi,{path:"/analytics",element:c.jsx(Iat,{})}),c.jsx(Vi,{path:"/salary",element:c.jsx(Kot,{isDarkMode:r})}),c.jsx(Vi,{path:"/cv-manager",element:c.jsx($ot,{})}),c.jsx(Vi,{path:"/invoicing",element:c.jsx(Gat,{})}),c.jsx(Vi,{path:"/settings",element:c.jsx(Yot,{})}),c.jsx(Vi,{path:"/debug-employer-tax",element:c.jsx(Xot,{})})]})})})}):c.jsx(bhe,{isDarkMode:r})}Bz(document.getElementById("root")).render(c.jsx(Qot,{}));
