var voe=Object.defineProperty;var yoe=(e,t,n)=>t in e?voe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ns=(e,t,n)=>yoe(e,typeof t!="symbol"?t+"":t,n);function xoe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ii=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function boe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var aU={exports:{}},Aw={},oU={exports:{}},vt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0=Symbol.for("react.element"),woe=Symbol.for("react.portal"),Eoe=Symbol.for("react.fragment"),Soe=Symbol.for("react.strict_mode"),Noe=Symbol.for("react.profiler"),_oe=Symbol.for("react.provider"),koe=Symbol.for("react.context"),Coe=Symbol.for("react.forward_ref"),Toe=Symbol.for("react.suspense"),Aoe=Symbol.for("react.memo"),joe=Symbol.for("react.lazy"),z3=Symbol.iterator;function Ooe(e){return e===null||typeof e!="object"?null:(e=z3&&e[z3]||e["@@iterator"],typeof e=="function"?e:null)}var lU={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cU=Object.assign,uU={};function Vh(e,t,n){this.props=e,this.context=t,this.refs=uU,this.updater=n||lU}Vh.prototype.isReactComponent={};Vh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Vh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function dU(){}dU.prototype=Vh.prototype;function lj(e,t,n){this.props=e,this.context=t,this.refs=uU,this.updater=n||lU}var cj=lj.prototype=new dU;cj.constructor=lj;cU(cj,Vh.prototype);cj.isPureReactComponent=!0;var H3=Array.isArray,fU=Object.prototype.hasOwnProperty,uj={current:null},hU={key:!0,ref:!0,__self:!0,__source:!0};function pU(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)fU.call(t,r)&&!hU.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:k0,type:e,key:s,ref:a,props:i,_owner:uj.current}}function Poe(e,t){return{$$typeof:k0,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function dj(e){return typeof e=="object"&&e!==null&&e.$$typeof===k0}function Ioe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var V3=/\/+/g;function gN(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ioe(""+e.key):t.toString(36)}function ox(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case k0:case woe:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+gN(a,0):r,H3(i)?(n="",e!=null&&(n=e.replace(V3,"$&/")+"/"),ox(i,t,n,"",function(u){return u})):i!=null&&(dj(i)&&(i=Poe(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(V3,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",H3(e))for(var o=0;o<e.length;o++){s=e[o];var c=r+gN(s,o);a+=ox(s,t,n,c,i)}else if(c=Ooe(e),typeof c=="function")for(e=c.call(e),o=0;!(s=e.next()).done;)s=s.value,c=r+gN(s,o++),a+=ox(s,t,n,c,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Mv(e,t,n){if(e==null)return e;var r=[],i=0;return ox(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Doe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ki={current:null},lx={transition:null},Moe={ReactCurrentDispatcher:ki,ReactCurrentBatchConfig:lx,ReactCurrentOwner:uj};function mU(){throw Error("act(...) is not supported in production builds of React.")}vt.Children={map:Mv,forEach:function(e,t,n){Mv(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Mv(e,function(){t++}),t},toArray:function(e){return Mv(e,function(t){return t})||[]},only:function(e){if(!dj(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};vt.Component=Vh;vt.Fragment=Eoe;vt.Profiler=Noe;vt.PureComponent=lj;vt.StrictMode=Soe;vt.Suspense=Toe;vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Moe;vt.act=mU;vt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=cU({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=uj.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)fU.call(t,c)&&!hU.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:k0,type:e.type,key:i,ref:s,props:r,_owner:a}};vt.createContext=function(e){return e={$$typeof:koe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_oe,_context:e},e.Consumer=e};vt.createElement=pU;vt.createFactory=function(e){var t=pU.bind(null,e);return t.type=e,t};vt.createRef=function(){return{current:null}};vt.forwardRef=function(e){return{$$typeof:Coe,render:e}};vt.isValidElement=dj;vt.lazy=function(e){return{$$typeof:joe,_payload:{_status:-1,_result:e},_init:Doe}};vt.memo=function(e,t){return{$$typeof:Aoe,type:e,compare:t===void 0?null:t}};vt.startTransition=function(e){var t=lx.transition;lx.transition={};try{e()}finally{lx.transition=t}};vt.unstable_act=mU;vt.useCallback=function(e,t){return ki.current.useCallback(e,t)};vt.useContext=function(e){return ki.current.useContext(e)};vt.useDebugValue=function(){};vt.useDeferredValue=function(e){return ki.current.useDeferredValue(e)};vt.useEffect=function(e,t){return ki.current.useEffect(e,t)};vt.useId=function(){return ki.current.useId()};vt.useImperativeHandle=function(e,t,n){return ki.current.useImperativeHandle(e,t,n)};vt.useInsertionEffect=function(e,t){return ki.current.useInsertionEffect(e,t)};vt.useLayoutEffect=function(e,t){return ki.current.useLayoutEffect(e,t)};vt.useMemo=function(e,t){return ki.current.useMemo(e,t)};vt.useReducer=function(e,t,n){return ki.current.useReducer(e,t,n)};vt.useRef=function(e){return ki.current.useRef(e)};vt.useState=function(e){return ki.current.useState(e)};vt.useSyncExternalStore=function(e,t,n){return ki.current.useSyncExternalStore(e,t,n)};vt.useTransition=function(){return ki.current.useTransition()};vt.version="18.3.1";oU.exports=vt;var w=oU.exports;const at=oi(w),jw=xoe({__proto__:null,default:at},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Roe=w,Loe=Symbol.for("react.element"),Foe=Symbol.for("react.fragment"),Boe=Object.prototype.hasOwnProperty,$oe=Roe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Uoe={key:!0,ref:!0,__self:!0,__source:!0};function gU(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Boe.call(t,r)&&!Uoe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Loe,type:e,key:s,ref:a,props:i,_owner:$oe.current}}Aw.Fragment=Foe;Aw.jsx=gU;Aw.jsxs=gU;aU.exports=Aw;var l=aU.exports,vU={exports:{}},xs={},yU={exports:{}},xU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,F){var O=R.length;R.push(F);e:for(;0<O;){var Q=O-1>>>1,Y=R[Q];if(0<i(Y,F))R[Q]=F,R[O]=Y,O=Q;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var F=R[0],O=R.pop();if(O!==F){R[0]=O;e:for(var Q=0,Y=R.length,$=Y>>>1;Q<$;){var ye=2*(Q+1)-1,Te=R[ye],U=ye+1,K=R[U];if(0>i(Te,O))U<Y&&0>i(K,Te)?(R[Q]=K,R[U]=O,Q=U):(R[Q]=Te,R[ye]=O,Q=ye);else if(U<Y&&0>i(K,O))R[Q]=K,R[U]=O,Q=U;else break e}}return F}function i(R,F){var O=R.sortIndex-F.sortIndex;return O!==0?O:R.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var c=[],u=[],d=1,f=null,h=3,p=!1,m=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(R){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=R)r(u),F.sortIndex=F.expirationTime,t(c,F);else break;F=n(u)}}function S(R){if(g=!1,b(R),!m)if(n(c)!==null)m=!0,P(E);else{var F=n(u);F!==null&&B(S,F.startTime-R)}}function E(R,F){m=!1,g&&(g=!1,y(k),k=-1),p=!0;var O=h;try{for(b(F),f=n(c);f!==null&&(!(f.expirationTime>F)||R&&!j());){var Q=f.callback;if(typeof Q=="function"){f.callback=null,h=f.priorityLevel;var Y=Q(f.expirationTime<=F);F=e.unstable_now(),typeof Y=="function"?f.callback=Y:f===n(c)&&r(c),b(F)}else r(c);f=n(c)}if(f!==null)var $=!0;else{var ye=n(u);ye!==null&&B(S,ye.startTime-F),$=!1}return $}finally{f=null,h=O,p=!1}}var N=!1,_=null,k=-1,T=5,A=-1;function j(){return!(e.unstable_now()-A<T)}function D(){if(_!==null){var R=e.unstable_now();A=R;var F=!0;try{F=_(!0,R)}finally{F?I():(N=!1,_=null)}}else N=!1}var I;if(typeof x=="function")I=function(){x(D)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,L=M.port2;M.port1.onmessage=D,I=function(){L.postMessage(null)}}else I=function(){v(D,0)};function P(R){_=R,N||(N=!0,I())}function B(R,F){k=v(function(){R(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,P(E))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(R){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var O=h;h=F;try{return R()}finally{h=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,F){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var O=h;h=R;try{return F()}finally{h=O}},e.unstable_scheduleCallback=function(R,F,O){var Q=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?Q+O:Q):O=Q,R){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=O+Y,R={id:d++,callback:F,priorityLevel:R,startTime:O,expirationTime:Y,sortIndex:-1},O>Q?(R.sortIndex=O,t(u,R),n(c)===null&&R===n(u)&&(g?(y(k),k=-1):g=!0,B(S,O-Q))):(R.sortIndex=Y,t(c,R),m||p||(m=!0,P(E))),R},e.unstable_shouldYield=j,e.unstable_wrapCallback=function(R){var F=h;return function(){var O=h;h=F;try{return R.apply(this,arguments)}finally{h=O}}}})(xU);yU.exports=xU;var zoe=yU.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hoe=w,gs=zoe;function _e(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bU=new Set,ug={};function Md(e,t){lh(e,t),lh(e+"Capture",t)}function lh(e,t){for(ug[e]=t,e=0;e<t.length;e++)bU.add(t[e])}var el=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d2=Object.prototype.hasOwnProperty,Voe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,W3={},q3={};function Woe(e){return d2.call(q3,e)?!0:d2.call(W3,e)?!1:Voe.test(e)?q3[e]=!0:(W3[e]=!0,!1)}function qoe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Koe(e,t,n,r){if(t===null||typeof t>"u"||qoe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ci(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var Wr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Wr[e]=new Ci(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Wr[t]=new Ci(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Wr[e]=new Ci(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Wr[e]=new Ci(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Wr[e]=new Ci(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Wr[e]=new Ci(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Wr[e]=new Ci(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Wr[e]=new Ci(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Wr[e]=new Ci(e,5,!1,e.toLowerCase(),null,!1,!1)});var fj=/[\-:]([a-z])/g;function hj(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(fj,hj);Wr[t]=new Ci(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(fj,hj);Wr[t]=new Ci(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(fj,hj);Wr[t]=new Ci(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Wr[e]=new Ci(e,1,!1,e.toLowerCase(),null,!1,!1)});Wr.xlinkHref=new Ci("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Wr[e]=new Ci(e,1,!1,e.toLowerCase(),null,!0,!0)});function pj(e,t,n,r){var i=Wr.hasOwnProperty(t)?Wr[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Koe(t,n,i,r)&&(n=null),r||i===null?Woe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var pl=Hoe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rv=Symbol.for("react.element"),wf=Symbol.for("react.portal"),Ef=Symbol.for("react.fragment"),mj=Symbol.for("react.strict_mode"),f2=Symbol.for("react.profiler"),wU=Symbol.for("react.provider"),EU=Symbol.for("react.context"),gj=Symbol.for("react.forward_ref"),h2=Symbol.for("react.suspense"),p2=Symbol.for("react.suspense_list"),vj=Symbol.for("react.memo"),Fl=Symbol.for("react.lazy"),SU=Symbol.for("react.offscreen"),K3=Symbol.iterator;function Ap(e){return e===null||typeof e!="object"?null:(e=K3&&e[K3]||e["@@iterator"],typeof e=="function"?e:null)}var kn=Object.assign,vN;function lm(e){if(vN===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);vN=t&&t[1]||""}return`
`+vN+e}var yN=!1;function xN(e,t){if(!e||yN)return"";yN=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var c=`
`+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=o);break}}}finally{yN=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?lm(e):""}function Goe(e){switch(e.tag){case 5:return lm(e.type);case 16:return lm("Lazy");case 13:return lm("Suspense");case 19:return lm("SuspenseList");case 0:case 2:case 15:return e=xN(e.type,!1),e;case 11:return e=xN(e.type.render,!1),e;case 1:return e=xN(e.type,!0),e;default:return""}}function m2(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ef:return"Fragment";case wf:return"Portal";case f2:return"Profiler";case mj:return"StrictMode";case h2:return"Suspense";case p2:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case EU:return(e.displayName||"Context")+".Consumer";case wU:return(e._context.displayName||"Context")+".Provider";case gj:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case vj:return t=e.displayName||null,t!==null?t:m2(e.type)||"Memo";case Fl:t=e._payload,e=e._init;try{return m2(e(t))}catch{}}return null}function Yoe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return m2(t);case 8:return t===mj?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function kc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function NU(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xoe(e){var t=NU(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Lv(e){e._valueTracker||(e._valueTracker=Xoe(e))}function _U(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=NU(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ux(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function g2(e,t){var n=t.checked;return kn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function G3(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=kc(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function kU(e,t){t=t.checked,t!=null&&pj(e,"checked",t,!1)}function v2(e,t){kU(e,t);var n=kc(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?y2(e,t.type,n):t.hasOwnProperty("defaultValue")&&y2(e,t.type,kc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Y3(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function y2(e,t,n){(t!=="number"||Ux(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var cm=Array.isArray;function zf(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+kc(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function x2(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(_e(91));return kn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function X3(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(_e(92));if(cm(n)){if(1<n.length)throw Error(_e(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:kc(n)}}function CU(e,t){var n=kc(t.value),r=kc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Q3(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function TU(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function b2(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?TU(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Fv,AU=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Fv=Fv||document.createElement("div"),Fv.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fv.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function dg(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Em={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qoe=["Webkit","ms","Moz","O"];Object.keys(Em).forEach(function(e){Qoe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Em[t]=Em[e]})});function jU(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Em.hasOwnProperty(e)&&Em[e]?(""+t).trim():t+"px"}function OU(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=jU(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Joe=kn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function w2(e,t){if(t){if(Joe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(_e(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(_e(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(_e(61))}if(t.style!=null&&typeof t.style!="object")throw Error(_e(62))}}function E2(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var S2=null;function yj(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var N2=null,Hf=null,Vf=null;function J3(e){if(e=A0(e)){if(typeof N2!="function")throw Error(_e(280));var t=e.stateNode;t&&(t=Mw(t),N2(e.stateNode,e.type,t))}}function PU(e){Hf?Vf?Vf.push(e):Vf=[e]:Hf=e}function IU(){if(Hf){var e=Hf,t=Vf;if(Vf=Hf=null,J3(e),t)for(e=0;e<t.length;e++)J3(t[e])}}function DU(e,t){return e(t)}function MU(){}var bN=!1;function RU(e,t,n){if(bN)return e(t,n);bN=!0;try{return DU(e,t,n)}finally{bN=!1,(Hf!==null||Vf!==null)&&(MU(),IU())}}function fg(e,t){var n=e.stateNode;if(n===null)return null;var r=Mw(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(_e(231,t,typeof n));return n}var _2=!1;if(el)try{var jp={};Object.defineProperty(jp,"passive",{get:function(){_2=!0}}),window.addEventListener("test",jp,jp),window.removeEventListener("test",jp,jp)}catch{_2=!1}function Zoe(e,t,n,r,i,s,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Sm=!1,zx=null,Hx=!1,k2=null,ele={onError:function(e){Sm=!0,zx=e}};function tle(e,t,n,r,i,s,a,o,c){Sm=!1,zx=null,Zoe.apply(ele,arguments)}function nle(e,t,n,r,i,s,a,o,c){if(tle.apply(this,arguments),Sm){if(Sm){var u=zx;Sm=!1,zx=null}else throw Error(_e(198));Hx||(Hx=!0,k2=u)}}function Rd(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function LU(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Z3(e){if(Rd(e)!==e)throw Error(_e(188))}function rle(e){var t=e.alternate;if(!t){if(t=Rd(e),t===null)throw Error(_e(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Z3(i),e;if(s===r)return Z3(i),t;s=s.sibling}throw Error(_e(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(_e(189))}}if(n.alternate!==r)throw Error(_e(190))}if(n.tag!==3)throw Error(_e(188));return n.stateNode.current===n?e:t}function FU(e){return e=rle(e),e!==null?BU(e):null}function BU(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=BU(e);if(t!==null)return t;e=e.sibling}return null}var $U=gs.unstable_scheduleCallback,eR=gs.unstable_cancelCallback,ile=gs.unstable_shouldYield,sle=gs.unstable_requestPaint,Un=gs.unstable_now,ale=gs.unstable_getCurrentPriorityLevel,xj=gs.unstable_ImmediatePriority,UU=gs.unstable_UserBlockingPriority,Vx=gs.unstable_NormalPriority,ole=gs.unstable_LowPriority,zU=gs.unstable_IdlePriority,Ow=null,Za=null;function lle(e){if(Za&&typeof Za.onCommitFiberRoot=="function")try{Za.onCommitFiberRoot(Ow,e,void 0,(e.current.flags&128)===128)}catch{}}var Sa=Math.clz32?Math.clz32:dle,cle=Math.log,ule=Math.LN2;function dle(e){return e>>>=0,e===0?32:31-(cle(e)/ule|0)|0}var Bv=64,$v=4194304;function um(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Wx(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=um(o):(s&=a,s!==0&&(r=um(s)))}else a=n&~i,a!==0?r=um(a):s!==0&&(r=um(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Sa(t),i=1<<n,r|=e[n],t&=~i;return r}function fle(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hle(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-Sa(s),o=1<<a,c=i[a];c===-1?(!(o&n)||o&r)&&(i[a]=fle(o,t)):c<=t&&(e.expiredLanes|=o),s&=~o}}function C2(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function HU(){var e=Bv;return Bv<<=1,!(Bv&4194240)&&(Bv=64),e}function wN(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function C0(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Sa(t),e[t]=n}function ple(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Sa(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function bj(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Sa(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Rt=0;function VU(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var WU,wj,qU,KU,GU,T2=!1,Uv=[],ac=null,oc=null,lc=null,hg=new Map,pg=new Map,Vl=[],mle="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tR(e,t){switch(e){case"focusin":case"focusout":ac=null;break;case"dragenter":case"dragleave":oc=null;break;case"mouseover":case"mouseout":lc=null;break;case"pointerover":case"pointerout":hg.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":pg.delete(t.pointerId)}}function Op(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=A0(t),t!==null&&wj(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function gle(e,t,n,r,i){switch(t){case"focusin":return ac=Op(ac,e,t,n,r,i),!0;case"dragenter":return oc=Op(oc,e,t,n,r,i),!0;case"mouseover":return lc=Op(lc,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return hg.set(s,Op(hg.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,pg.set(s,Op(pg.get(s)||null,e,t,n,r,i)),!0}return!1}function YU(e){var t=Ou(e.target);if(t!==null){var n=Rd(t);if(n!==null){if(t=n.tag,t===13){if(t=LU(n),t!==null){e.blockedOn=t,GU(e.priority,function(){qU(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function cx(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=A2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);S2=r,n.target.dispatchEvent(r),S2=null}else return t=A0(n),t!==null&&wj(t),e.blockedOn=n,!1;t.shift()}return!0}function nR(e,t,n){cx(e)&&n.delete(t)}function vle(){T2=!1,ac!==null&&cx(ac)&&(ac=null),oc!==null&&cx(oc)&&(oc=null),lc!==null&&cx(lc)&&(lc=null),hg.forEach(nR),pg.forEach(nR)}function Pp(e,t){e.blockedOn===t&&(e.blockedOn=null,T2||(T2=!0,gs.unstable_scheduleCallback(gs.unstable_NormalPriority,vle)))}function mg(e){function t(i){return Pp(i,e)}if(0<Uv.length){Pp(Uv[0],e);for(var n=1;n<Uv.length;n++){var r=Uv[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ac!==null&&Pp(ac,e),oc!==null&&Pp(oc,e),lc!==null&&Pp(lc,e),hg.forEach(t),pg.forEach(t),n=0;n<Vl.length;n++)r=Vl[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Vl.length&&(n=Vl[0],n.blockedOn===null);)YU(n),n.blockedOn===null&&Vl.shift()}var Wf=pl.ReactCurrentBatchConfig,qx=!0;function yle(e,t,n,r){var i=Rt,s=Wf.transition;Wf.transition=null;try{Rt=1,Ej(e,t,n,r)}finally{Rt=i,Wf.transition=s}}function xle(e,t,n,r){var i=Rt,s=Wf.transition;Wf.transition=null;try{Rt=4,Ej(e,t,n,r)}finally{Rt=i,Wf.transition=s}}function Ej(e,t,n,r){if(qx){var i=A2(e,t,n,r);if(i===null)ON(e,t,r,Kx,n),tR(e,r);else if(gle(i,e,t,n,r))r.stopPropagation();else if(tR(e,r),t&4&&-1<mle.indexOf(e)){for(;i!==null;){var s=A0(i);if(s!==null&&WU(s),s=A2(e,t,n,r),s===null&&ON(e,t,r,Kx,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ON(e,t,r,null,n)}}var Kx=null;function A2(e,t,n,r){if(Kx=null,e=yj(r),e=Ou(e),e!==null)if(t=Rd(e),t===null)e=null;else if(n=t.tag,n===13){if(e=LU(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kx=e,null}function XU(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ale()){case xj:return 1;case UU:return 4;case Vx:case ole:return 16;case zU:return 536870912;default:return 16}default:return 16}}var Jl=null,Sj=null,ux=null;function QU(){if(ux)return ux;var e,t=Sj,n=t.length,r,i="value"in Jl?Jl.value:Jl.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return ux=i.slice(e,1<r?1-r:void 0)}function dx(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zv(){return!0}function rR(){return!1}function bs(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?zv:rR,this.isPropagationStopped=rR,this}return kn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zv)},persist:function(){},isPersistent:zv}),t}var Wh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nj=bs(Wh),T0=kn({},Wh,{view:0,detail:0}),ble=bs(T0),EN,SN,Ip,Pw=kn({},T0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_j,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ip&&(Ip&&e.type==="mousemove"?(EN=e.screenX-Ip.screenX,SN=e.screenY-Ip.screenY):SN=EN=0,Ip=e),EN)},movementY:function(e){return"movementY"in e?e.movementY:SN}}),iR=bs(Pw),wle=kn({},Pw,{dataTransfer:0}),Ele=bs(wle),Sle=kn({},T0,{relatedTarget:0}),NN=bs(Sle),Nle=kn({},Wh,{animationName:0,elapsedTime:0,pseudoElement:0}),_le=bs(Nle),kle=kn({},Wh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Cle=bs(kle),Tle=kn({},Wh,{data:0}),sR=bs(Tle),Ale={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jle={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ole={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ple(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ole[e])?!!t[e]:!1}function _j(){return Ple}var Ile=kn({},T0,{key:function(e){if(e.key){var t=Ale[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=dx(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jle[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_j,charCode:function(e){return e.type==="keypress"?dx(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?dx(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Dle=bs(Ile),Mle=kn({},Pw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aR=bs(Mle),Rle=kn({},T0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_j}),Lle=bs(Rle),Fle=kn({},Wh,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ble=bs(Fle),$le=kn({},Pw,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ule=bs($le),zle=[9,13,27,32],kj=el&&"CompositionEvent"in window,Nm=null;el&&"documentMode"in document&&(Nm=document.documentMode);var Hle=el&&"TextEvent"in window&&!Nm,JU=el&&(!kj||Nm&&8<Nm&&11>=Nm),oR=" ",lR=!1;function ZU(e,t){switch(e){case"keyup":return zle.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ez(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Sf=!1;function Vle(e,t){switch(e){case"compositionend":return ez(t);case"keypress":return t.which!==32?null:(lR=!0,oR);case"textInput":return e=t.data,e===oR&&lR?null:e;default:return null}}function Wle(e,t){if(Sf)return e==="compositionend"||!kj&&ZU(e,t)?(e=QU(),ux=Sj=Jl=null,Sf=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return JU&&t.locale!=="ko"?null:t.data;default:return null}}var qle={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cR(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!qle[e.type]:t==="textarea"}function tz(e,t,n,r){PU(r),t=Gx(t,"onChange"),0<t.length&&(n=new Nj("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var _m=null,gg=null;function Kle(e){fz(e,0)}function Iw(e){var t=kf(e);if(_U(t))return e}function Gle(e,t){if(e==="change")return t}var nz=!1;if(el){var _N;if(el){var kN="oninput"in document;if(!kN){var uR=document.createElement("div");uR.setAttribute("oninput","return;"),kN=typeof uR.oninput=="function"}_N=kN}else _N=!1;nz=_N&&(!document.documentMode||9<document.documentMode)}function dR(){_m&&(_m.detachEvent("onpropertychange",rz),gg=_m=null)}function rz(e){if(e.propertyName==="value"&&Iw(gg)){var t=[];tz(t,gg,e,yj(e)),RU(Kle,t)}}function Yle(e,t,n){e==="focusin"?(dR(),_m=t,gg=n,_m.attachEvent("onpropertychange",rz)):e==="focusout"&&dR()}function Xle(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Iw(gg)}function Qle(e,t){if(e==="click")return Iw(t)}function Jle(e,t){if(e==="input"||e==="change")return Iw(t)}function Zle(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ka=typeof Object.is=="function"?Object.is:Zle;function vg(e,t){if(ka(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d2.call(t,i)||!ka(e[i],t[i]))return!1}return!0}function fR(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hR(e,t){var n=fR(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fR(n)}}function iz(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?iz(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function sz(){for(var e=window,t=Ux();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ux(e.document)}return t}function Cj(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ece(e){var t=sz(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&iz(n.ownerDocument.documentElement,n)){if(r!==null&&Cj(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=hR(n,s);var a=hR(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var tce=el&&"documentMode"in document&&11>=document.documentMode,Nf=null,j2=null,km=null,O2=!1;function pR(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;O2||Nf==null||Nf!==Ux(r)||(r=Nf,"selectionStart"in r&&Cj(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),km&&vg(km,r)||(km=r,r=Gx(j2,"onSelect"),0<r.length&&(t=new Nj("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Nf)))}function Hv(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _f={animationend:Hv("Animation","AnimationEnd"),animationiteration:Hv("Animation","AnimationIteration"),animationstart:Hv("Animation","AnimationStart"),transitionend:Hv("Transition","TransitionEnd")},CN={},az={};el&&(az=document.createElement("div").style,"AnimationEvent"in window||(delete _f.animationend.animation,delete _f.animationiteration.animation,delete _f.animationstart.animation),"TransitionEvent"in window||delete _f.transitionend.transition);function Dw(e){if(CN[e])return CN[e];if(!_f[e])return e;var t=_f[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in az)return CN[e]=t[n];return e}var oz=Dw("animationend"),lz=Dw("animationiteration"),cz=Dw("animationstart"),uz=Dw("transitionend"),dz=new Map,mR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zc(e,t){dz.set(e,t),Md(t,[e])}for(var TN=0;TN<mR.length;TN++){var AN=mR[TN],nce=AN.toLowerCase(),rce=AN[0].toUpperCase()+AN.slice(1);zc(nce,"on"+rce)}zc(oz,"onAnimationEnd");zc(lz,"onAnimationIteration");zc(cz,"onAnimationStart");zc("dblclick","onDoubleClick");zc("focusin","onFocus");zc("focusout","onBlur");zc(uz,"onTransitionEnd");lh("onMouseEnter",["mouseout","mouseover"]);lh("onMouseLeave",["mouseout","mouseover"]);lh("onPointerEnter",["pointerout","pointerover"]);lh("onPointerLeave",["pointerout","pointerover"]);Md("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Md("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Md("onBeforeInput",["compositionend","keypress","textInput","paste"]);Md("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Md("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Md("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ice=new Set("cancel close invalid load scroll toggle".split(" ").concat(dm));function gR(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,nle(r,t,void 0,e),e.currentTarget=null}function fz(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==s&&i.isPropagationStopped())break e;gR(i,o,u),s=c}else for(a=0;a<r.length;a++){if(o=r[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==s&&i.isPropagationStopped())break e;gR(i,o,u),s=c}}}if(Hx)throw e=k2,Hx=!1,k2=null,e}function sn(e,t){var n=t[R2];n===void 0&&(n=t[R2]=new Set);var r=e+"__bubble";n.has(r)||(hz(t,e,2,!1),n.add(r))}function jN(e,t,n){var r=0;t&&(r|=4),hz(n,e,r,t)}var Vv="_reactListening"+Math.random().toString(36).slice(2);function yg(e){if(!e[Vv]){e[Vv]=!0,bU.forEach(function(n){n!=="selectionchange"&&(ice.has(n)||jN(n,!1,e),jN(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Vv]||(t[Vv]=!0,jN("selectionchange",!1,t))}}function hz(e,t,n,r){switch(XU(t)){case 1:var i=yle;break;case 4:i=xle;break;default:i=Ej}n=i.bind(null,t,n,e),i=void 0,!_2||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ON(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Ou(o),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}o=o.parentNode}}r=r.return}RU(function(){var u=s,d=yj(n),f=[];e:{var h=dz.get(e);if(h!==void 0){var p=Nj,m=e;switch(e){case"keypress":if(dx(n)===0)break e;case"keydown":case"keyup":p=Dle;break;case"focusin":m="focus",p=NN;break;case"focusout":m="blur",p=NN;break;case"beforeblur":case"afterblur":p=NN;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=iR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Ele;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Lle;break;case oz:case lz:case cz:p=_le;break;case uz:p=Ble;break;case"scroll":p=ble;break;case"wheel":p=Ule;break;case"copy":case"cut":case"paste":p=Cle;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=aR}var g=(t&4)!==0,v=!g&&e==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var x=u,b;x!==null;){b=x;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,y!==null&&(S=fg(x,y),S!=null&&g.push(xg(x,S,b)))),v)break;x=x.return}0<g.length&&(h=new p(h,m,null,n,d),f.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==S2&&(m=n.relatedTarget||n.fromElement)&&(Ou(m)||m[tl]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=u,m=m?Ou(m):null,m!==null&&(v=Rd(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(g=iR,S="onMouseLeave",y="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(g=aR,S="onPointerLeave",y="onPointerEnter",x="pointer"),v=p==null?h:kf(p),b=m==null?h:kf(m),h=new g(S,x+"leave",p,n,d),h.target=v,h.relatedTarget=b,S=null,Ou(d)===u&&(g=new g(y,x+"enter",m,n,d),g.target=b,g.relatedTarget=v,S=g),v=S,p&&m)t:{for(g=p,y=m,x=0,b=g;b;b=Kd(b))x++;for(b=0,S=y;S;S=Kd(S))b++;for(;0<x-b;)g=Kd(g),x--;for(;0<b-x;)y=Kd(y),b--;for(;x--;){if(g===y||y!==null&&g===y.alternate)break t;g=Kd(g),y=Kd(y)}g=null}else g=null;p!==null&&vR(f,h,p,g,!1),m!==null&&v!==null&&vR(f,v,m,g,!0)}}e:{if(h=u?kf(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var E=Gle;else if(cR(h))if(nz)E=Jle;else{E=Xle;var N=Yle}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=Qle);if(E&&(E=E(e,u))){tz(f,E,n,d);break e}N&&N(e,h,u),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&y2(h,"number",h.value)}switch(N=u?kf(u):window,e){case"focusin":(cR(N)||N.contentEditable==="true")&&(Nf=N,j2=u,km=null);break;case"focusout":km=j2=Nf=null;break;case"mousedown":O2=!0;break;case"contextmenu":case"mouseup":case"dragend":O2=!1,pR(f,n,d);break;case"selectionchange":if(tce)break;case"keydown":case"keyup":pR(f,n,d)}var _;if(kj)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Sf?ZU(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(JU&&n.locale!=="ko"&&(Sf||k!=="onCompositionStart"?k==="onCompositionEnd"&&Sf&&(_=QU()):(Jl=d,Sj="value"in Jl?Jl.value:Jl.textContent,Sf=!0)),N=Gx(u,k),0<N.length&&(k=new sR(k,e,null,n,d),f.push({event:k,listeners:N}),_?k.data=_:(_=ez(n),_!==null&&(k.data=_)))),(_=Hle?Vle(e,n):Wle(e,n))&&(u=Gx(u,"onBeforeInput"),0<u.length&&(d=new sR("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=_))}fz(f,t)})}function xg(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gx(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=fg(e,n),s!=null&&r.unshift(xg(e,s,i)),s=fg(e,t),s!=null&&r.push(xg(e,s,i))),e=e.return}return r}function Kd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function vR(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var o=n,c=o.alternate,u=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&u!==null&&(o=u,i?(c=fg(n,s),c!=null&&a.unshift(xg(n,c,o))):i||(c=fg(n,s),c!=null&&a.push(xg(n,c,o)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var sce=/\r\n?/g,ace=/\u0000|\uFFFD/g;function yR(e){return(typeof e=="string"?e:""+e).replace(sce,`
`).replace(ace,"")}function Wv(e,t,n){if(t=yR(t),yR(e)!==t&&n)throw Error(_e(425))}function Yx(){}var P2=null,I2=null;function D2(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var M2=typeof setTimeout=="function"?setTimeout:void 0,oce=typeof clearTimeout=="function"?clearTimeout:void 0,xR=typeof Promise=="function"?Promise:void 0,lce=typeof queueMicrotask=="function"?queueMicrotask:typeof xR<"u"?function(e){return xR.resolve(null).then(e).catch(cce)}:M2;function cce(e){setTimeout(function(){throw e})}function PN(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),mg(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);mg(t)}function cc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function bR(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var qh=Math.random().toString(36).slice(2),Ga="__reactFiber$"+qh,bg="__reactProps$"+qh,tl="__reactContainer$"+qh,R2="__reactEvents$"+qh,uce="__reactListeners$"+qh,dce="__reactHandles$"+qh;function Ou(e){var t=e[Ga];if(t)return t;for(var n=e.parentNode;n;){if(t=n[tl]||n[Ga]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=bR(e);e!==null;){if(n=e[Ga])return n;e=bR(e)}return t}e=n,n=e.parentNode}return null}function A0(e){return e=e[Ga]||e[tl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function kf(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(_e(33))}function Mw(e){return e[bg]||null}var L2=[],Cf=-1;function Hc(e){return{current:e}}function un(e){0>Cf||(e.current=L2[Cf],L2[Cf]=null,Cf--)}function Jt(e,t){Cf++,L2[Cf]=e.current,e.current=t}var Cc={},si=Hc(Cc),$i=Hc(!1),dd=Cc;function ch(e,t){var n=e.type.contextTypes;if(!n)return Cc;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ui(e){return e=e.childContextTypes,e!=null}function Xx(){un($i),un(si)}function wR(e,t,n){if(si.current!==Cc)throw Error(_e(168));Jt(si,t),Jt($i,n)}function pz(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(_e(108,Yoe(e)||"Unknown",i));return kn({},n,r)}function Qx(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cc,dd=si.current,Jt(si,e),Jt($i,$i.current),!0}function ER(e,t,n){var r=e.stateNode;if(!r)throw Error(_e(169));n?(e=pz(e,t,dd),r.__reactInternalMemoizedMergedChildContext=e,un($i),un(si),Jt(si,e)):un($i),Jt($i,n)}var Mo=null,Rw=!1,IN=!1;function mz(e){Mo===null?Mo=[e]:Mo.push(e)}function fce(e){Rw=!0,mz(e)}function Vc(){if(!IN&&Mo!==null){IN=!0;var e=0,t=Rt;try{var n=Mo;for(Rt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Mo=null,Rw=!1}catch(i){throw Mo!==null&&(Mo=Mo.slice(e+1)),$U(xj,Vc),i}finally{Rt=t,IN=!1}}return null}var Tf=[],Af=0,Jx=null,Zx=0,Ms=[],Rs=0,fd=null,Bo=1,$o="";function xu(e,t){Tf[Af++]=Zx,Tf[Af++]=Jx,Jx=e,Zx=t}function gz(e,t,n){Ms[Rs++]=Bo,Ms[Rs++]=$o,Ms[Rs++]=fd,fd=e;var r=Bo;e=$o;var i=32-Sa(r)-1;r&=~(1<<i),n+=1;var s=32-Sa(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Bo=1<<32-Sa(t)+i|n<<i|r,$o=s+e}else Bo=1<<s|n<<i|r,$o=e}function Tj(e){e.return!==null&&(xu(e,1),gz(e,1,0))}function Aj(e){for(;e===Jx;)Jx=Tf[--Af],Tf[Af]=null,Zx=Tf[--Af],Tf[Af]=null;for(;e===fd;)fd=Ms[--Rs],Ms[Rs]=null,$o=Ms[--Rs],Ms[Rs]=null,Bo=Ms[--Rs],Ms[Rs]=null}var cs=null,as=null,yn=!1,ma=null;function vz(e,t){var n=Us(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function SR(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,cs=e,as=cc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,cs=e,as=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=fd!==null?{id:Bo,overflow:$o}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Us(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,cs=e,as=null,!0):!1;default:return!1}}function F2(e){return(e.mode&1)!==0&&(e.flags&128)===0}function B2(e){if(yn){var t=as;if(t){var n=t;if(!SR(e,t)){if(F2(e))throw Error(_e(418));t=cc(n.nextSibling);var r=cs;t&&SR(e,t)?vz(r,n):(e.flags=e.flags&-4097|2,yn=!1,cs=e)}}else{if(F2(e))throw Error(_e(418));e.flags=e.flags&-4097|2,yn=!1,cs=e}}}function NR(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;cs=e}function qv(e){if(e!==cs)return!1;if(!yn)return NR(e),yn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!D2(e.type,e.memoizedProps)),t&&(t=as)){if(F2(e))throw yz(),Error(_e(418));for(;t;)vz(e,t),t=cc(t.nextSibling)}if(NR(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(_e(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){as=cc(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}as=null}}else as=cs?cc(e.stateNode.nextSibling):null;return!0}function yz(){for(var e=as;e;)e=cc(e.nextSibling)}function uh(){as=cs=null,yn=!1}function jj(e){ma===null?ma=[e]:ma.push(e)}var hce=pl.ReactCurrentBatchConfig;function Dp(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_e(309));var r=n.stateNode}if(!r)throw Error(_e(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(_e(284));if(!n._owner)throw Error(_e(290,e))}return e}function Kv(e,t){throw e=Object.prototype.toString.call(t),Error(_e(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _R(e){var t=e._init;return t(e._payload)}function xz(e){function t(y,x){if(e){var b=y.deletions;b===null?(y.deletions=[x],y.flags|=16):b.push(x)}}function n(y,x){if(!e)return null;for(;x!==null;)t(y,x),x=x.sibling;return null}function r(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function i(y,x){return y=hc(y,x),y.index=0,y.sibling=null,y}function s(y,x,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<x?(y.flags|=2,x):b):(y.flags|=2,x)):(y.flags|=1048576,x)}function a(y){return e&&y.alternate===null&&(y.flags|=2),y}function o(y,x,b,S){return x===null||x.tag!==6?(x=$N(b,y.mode,S),x.return=y,x):(x=i(x,b),x.return=y,x)}function c(y,x,b,S){var E=b.type;return E===Ef?d(y,x,b.props.children,S,b.key):x!==null&&(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Fl&&_R(E)===x.type)?(S=i(x,b.props),S.ref=Dp(y,x,b),S.return=y,S):(S=yx(b.type,b.key,b.props,null,y.mode,S),S.ref=Dp(y,x,b),S.return=y,S)}function u(y,x,b,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=UN(b,y.mode,S),x.return=y,x):(x=i(x,b.children||[]),x.return=y,x)}function d(y,x,b,S,E){return x===null||x.tag!==7?(x=Yu(b,y.mode,S,E),x.return=y,x):(x=i(x,b),x.return=y,x)}function f(y,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=$N(""+x,y.mode,b),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Rv:return b=yx(x.type,x.key,x.props,null,y.mode,b),b.ref=Dp(y,null,x),b.return=y,b;case wf:return x=UN(x,y.mode,b),x.return=y,x;case Fl:var S=x._init;return f(y,S(x._payload),b)}if(cm(x)||Ap(x))return x=Yu(x,y.mode,b,null),x.return=y,x;Kv(y,x)}return null}function h(y,x,b,S){var E=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return E!==null?null:o(y,x,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Rv:return b.key===E?c(y,x,b,S):null;case wf:return b.key===E?u(y,x,b,S):null;case Fl:return E=b._init,h(y,x,E(b._payload),S)}if(cm(b)||Ap(b))return E!==null?null:d(y,x,b,S,null);Kv(y,b)}return null}function p(y,x,b,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(b)||null,o(x,y,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Rv:return y=y.get(S.key===null?b:S.key)||null,c(x,y,S,E);case wf:return y=y.get(S.key===null?b:S.key)||null,u(x,y,S,E);case Fl:var N=S._init;return p(y,x,b,N(S._payload),E)}if(cm(S)||Ap(S))return y=y.get(b)||null,d(x,y,S,E,null);Kv(x,S)}return null}function m(y,x,b,S){for(var E=null,N=null,_=x,k=x=0,T=null;_!==null&&k<b.length;k++){_.index>k?(T=_,_=null):T=_.sibling;var A=h(y,_,b[k],S);if(A===null){_===null&&(_=T);break}e&&_&&A.alternate===null&&t(y,_),x=s(A,x,k),N===null?E=A:N.sibling=A,N=A,_=T}if(k===b.length)return n(y,_),yn&&xu(y,k),E;if(_===null){for(;k<b.length;k++)_=f(y,b[k],S),_!==null&&(x=s(_,x,k),N===null?E=_:N.sibling=_,N=_);return yn&&xu(y,k),E}for(_=r(y,_);k<b.length;k++)T=p(_,y,k,b[k],S),T!==null&&(e&&T.alternate!==null&&_.delete(T.key===null?k:T.key),x=s(T,x,k),N===null?E=T:N.sibling=T,N=T);return e&&_.forEach(function(j){return t(y,j)}),yn&&xu(y,k),E}function g(y,x,b,S){var E=Ap(b);if(typeof E!="function")throw Error(_e(150));if(b=E.call(b),b==null)throw Error(_e(151));for(var N=E=null,_=x,k=x=0,T=null,A=b.next();_!==null&&!A.done;k++,A=b.next()){_.index>k?(T=_,_=null):T=_.sibling;var j=h(y,_,A.value,S);if(j===null){_===null&&(_=T);break}e&&_&&j.alternate===null&&t(y,_),x=s(j,x,k),N===null?E=j:N.sibling=j,N=j,_=T}if(A.done)return n(y,_),yn&&xu(y,k),E;if(_===null){for(;!A.done;k++,A=b.next())A=f(y,A.value,S),A!==null&&(x=s(A,x,k),N===null?E=A:N.sibling=A,N=A);return yn&&xu(y,k),E}for(_=r(y,_);!A.done;k++,A=b.next())A=p(_,y,k,A.value,S),A!==null&&(e&&A.alternate!==null&&_.delete(A.key===null?k:A.key),x=s(A,x,k),N===null?E=A:N.sibling=A,N=A);return e&&_.forEach(function(D){return t(y,D)}),yn&&xu(y,k),E}function v(y,x,b,S){if(typeof b=="object"&&b!==null&&b.type===Ef&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Rv:e:{for(var E=b.key,N=x;N!==null;){if(N.key===E){if(E=b.type,E===Ef){if(N.tag===7){n(y,N.sibling),x=i(N,b.props.children),x.return=y,y=x;break e}}else if(N.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Fl&&_R(E)===N.type){n(y,N.sibling),x=i(N,b.props),x.ref=Dp(y,N,b),x.return=y,y=x;break e}n(y,N);break}else t(y,N);N=N.sibling}b.type===Ef?(x=Yu(b.props.children,y.mode,S,b.key),x.return=y,y=x):(S=yx(b.type,b.key,b.props,null,y.mode,S),S.ref=Dp(y,x,b),S.return=y,y=S)}return a(y);case wf:e:{for(N=b.key;x!==null;){if(x.key===N)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(y,x.sibling),x=i(x,b.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else t(y,x);x=x.sibling}x=UN(b,y.mode,S),x.return=y,y=x}return a(y);case Fl:return N=b._init,v(y,x,N(b._payload),S)}if(cm(b))return m(y,x,b,S);if(Ap(b))return g(y,x,b,S);Kv(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(y,x.sibling),x=i(x,b),x.return=y,y=x):(n(y,x),x=$N(b,y.mode,S),x.return=y,y=x),a(y)):n(y,x)}return v}var dh=xz(!0),bz=xz(!1),eb=Hc(null),tb=null,jf=null,Oj=null;function Pj(){Oj=jf=tb=null}function Ij(e){var t=eb.current;un(eb),e._currentValue=t}function $2(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function qf(e,t){tb=e,Oj=jf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ri=!0),e.firstContext=null)}function Xs(e){var t=e._currentValue;if(Oj!==e)if(e={context:e,memoizedValue:t,next:null},jf===null){if(tb===null)throw Error(_e(308));jf=e,tb.dependencies={lanes:0,firstContext:e}}else jf=jf.next=e;return t}var Pu=null;function Dj(e){Pu===null?Pu=[e]:Pu.push(e)}function wz(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Dj(t)):(n.next=i.next,i.next=n),t.interleaved=n,nl(e,r)}function nl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Bl=!1;function Mj(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ez(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function uc(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,_t&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,nl(e,n)}return i=r.interleaved,i===null?(t.next=t,Dj(r)):(t.next=i.next,i.next=t),r.interleaved=t,nl(e,n)}function fx(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,bj(e,n)}}function kR(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function nb(e,t,n,r){var i=e.updateQueue;Bl=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=i.baseState;a=0,d=u=c=null,o=s;do{var h=o.lane,p=o.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,g=o;switch(h=t,p=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){f=m.call(p,f,h);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,h=typeof m=="function"?m.call(p,f,h):m,h==null)break e;f=kn({},f,h);break e;case 2:Bl=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,a|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);pd|=a,e.lanes=a,e.memoizedState=f}}function CR(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(_e(191,i));i.call(r)}}}var j0={},eo=Hc(j0),wg=Hc(j0),Eg=Hc(j0);function Iu(e){if(e===j0)throw Error(_e(174));return e}function Rj(e,t){switch(Jt(Eg,t),Jt(wg,e),Jt(eo,j0),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:b2(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=b2(t,e)}un(eo),Jt(eo,t)}function fh(){un(eo),un(wg),un(Eg)}function Sz(e){Iu(Eg.current);var t=Iu(eo.current),n=b2(t,e.type);t!==n&&(Jt(wg,e),Jt(eo,n))}function Lj(e){wg.current===e&&(un(eo),un(wg))}var Sn=Hc(0);function rb(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var DN=[];function Fj(){for(var e=0;e<DN.length;e++)DN[e]._workInProgressVersionPrimary=null;DN.length=0}var hx=pl.ReactCurrentDispatcher,MN=pl.ReactCurrentBatchConfig,hd=0,_n=null,sr=null,yr=null,ib=!1,Cm=!1,Sg=0,pce=0;function Kr(){throw Error(_e(321))}function Bj(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ka(e[n],t[n]))return!1;return!0}function $j(e,t,n,r,i,s){if(hd=s,_n=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hx.current=e===null||e.memoizedState===null?yce:xce,e=n(r,i),Cm){s=0;do{if(Cm=!1,Sg=0,25<=s)throw Error(_e(301));s+=1,yr=sr=null,t.updateQueue=null,hx.current=bce,e=n(r,i)}while(Cm)}if(hx.current=sb,t=sr!==null&&sr.next!==null,hd=0,yr=sr=_n=null,ib=!1,t)throw Error(_e(300));return e}function Uj(){var e=Sg!==0;return Sg=0,e}function Ua(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yr===null?_n.memoizedState=yr=e:yr=yr.next=e,yr}function Qs(){if(sr===null){var e=_n.alternate;e=e!==null?e.memoizedState:null}else e=sr.next;var t=yr===null?_n.memoizedState:yr.next;if(t!==null)yr=t,sr=e;else{if(e===null)throw Error(_e(310));sr=e,e={memoizedState:sr.memoizedState,baseState:sr.baseState,baseQueue:sr.baseQueue,queue:sr.queue,next:null},yr===null?_n.memoizedState=yr=e:yr=yr.next=e}return yr}function Ng(e,t){return typeof t=="function"?t(e):t}function RN(e){var t=Qs(),n=t.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=e;var r=sr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,c=null,u=s;do{var d=u.lane;if((hd&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=f,a=r):c=c.next=f,_n.lanes|=d,pd|=d}u=u.next}while(u!==null&&u!==s);c===null?a=r:c.next=o,ka(r,t.memoizedState)||(Ri=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,_n.lanes|=s,pd|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function LN(e){var t=Qs(),n=t.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);ka(s,t.memoizedState)||(Ri=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Nz(){}function _z(e,t){var n=_n,r=Qs(),i=t(),s=!ka(r.memoizedState,i);if(s&&(r.memoizedState=i,Ri=!0),r=r.queue,zj(Tz.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||yr!==null&&yr.memoizedState.tag&1){if(n.flags|=2048,_g(9,Cz.bind(null,n,r,i,t),void 0,null),Nr===null)throw Error(_e(349));hd&30||kz(n,t,i)}return i}function kz(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=_n.updateQueue,t===null?(t={lastEffect:null,stores:null},_n.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Cz(e,t,n,r){t.value=n,t.getSnapshot=r,Az(t)&&jz(e)}function Tz(e,t,n){return n(function(){Az(t)&&jz(e)})}function Az(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ka(e,n)}catch{return!0}}function jz(e){var t=nl(e,1);t!==null&&Na(t,e,1,-1)}function TR(e){var t=Ua();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ng,lastRenderedState:e},t.queue=e,e=e.dispatch=vce.bind(null,_n,e),[t.memoizedState,e]}function _g(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=_n.updateQueue,t===null?(t={lastEffect:null,stores:null},_n.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Oz(){return Qs().memoizedState}function px(e,t,n,r){var i=Ua();_n.flags|=e,i.memoizedState=_g(1|t,n,void 0,r===void 0?null:r)}function Lw(e,t,n,r){var i=Qs();r=r===void 0?null:r;var s=void 0;if(sr!==null){var a=sr.memoizedState;if(s=a.destroy,r!==null&&Bj(r,a.deps)){i.memoizedState=_g(t,n,s,r);return}}_n.flags|=e,i.memoizedState=_g(1|t,n,s,r)}function AR(e,t){return px(8390656,8,e,t)}function zj(e,t){return Lw(2048,8,e,t)}function Pz(e,t){return Lw(4,2,e,t)}function Iz(e,t){return Lw(4,4,e,t)}function Dz(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Mz(e,t,n){return n=n!=null?n.concat([e]):null,Lw(4,4,Dz.bind(null,t,e),n)}function Hj(){}function Rz(e,t){var n=Qs();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Bj(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Lz(e,t){var n=Qs();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Bj(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Fz(e,t,n){return hd&21?(ka(n,t)||(n=HU(),_n.lanes|=n,pd|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ri=!0),e.memoizedState=n)}function mce(e,t){var n=Rt;Rt=n!==0&&4>n?n:4,e(!0);var r=MN.transition;MN.transition={};try{e(!1),t()}finally{Rt=n,MN.transition=r}}function Bz(){return Qs().memoizedState}function gce(e,t,n){var r=fc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$z(e))Uz(t,n);else if(n=wz(e,t,n,r),n!==null){var i=bi();Na(n,e,r,i),zz(n,t,r)}}function vce(e,t,n){var r=fc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($z(e))Uz(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,ka(o,a)){var c=t.interleaved;c===null?(i.next=i,Dj(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=wz(e,t,i,r),n!==null&&(i=bi(),Na(n,e,r,i),zz(n,t,r))}}function $z(e){var t=e.alternate;return e===_n||t!==null&&t===_n}function Uz(e,t){Cm=ib=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function zz(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,bj(e,n)}}var sb={readContext:Xs,useCallback:Kr,useContext:Kr,useEffect:Kr,useImperativeHandle:Kr,useInsertionEffect:Kr,useLayoutEffect:Kr,useMemo:Kr,useReducer:Kr,useRef:Kr,useState:Kr,useDebugValue:Kr,useDeferredValue:Kr,useTransition:Kr,useMutableSource:Kr,useSyncExternalStore:Kr,useId:Kr,unstable_isNewReconciler:!1},yce={readContext:Xs,useCallback:function(e,t){return Ua().memoizedState=[e,t===void 0?null:t],e},useContext:Xs,useEffect:AR,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,px(4194308,4,Dz.bind(null,t,e),n)},useLayoutEffect:function(e,t){return px(4194308,4,e,t)},useInsertionEffect:function(e,t){return px(4,2,e,t)},useMemo:function(e,t){var n=Ua();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ua();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=gce.bind(null,_n,e),[r.memoizedState,e]},useRef:function(e){var t=Ua();return e={current:e},t.memoizedState=e},useState:TR,useDebugValue:Hj,useDeferredValue:function(e){return Ua().memoizedState=e},useTransition:function(){var e=TR(!1),t=e[0];return e=mce.bind(null,e[1]),Ua().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=_n,i=Ua();if(yn){if(n===void 0)throw Error(_e(407));n=n()}else{if(n=t(),Nr===null)throw Error(_e(349));hd&30||kz(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,AR(Tz.bind(null,r,s,e),[e]),r.flags|=2048,_g(9,Cz.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Ua(),t=Nr.identifierPrefix;if(yn){var n=$o,r=Bo;n=(r&~(1<<32-Sa(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Sg++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=pce++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},xce={readContext:Xs,useCallback:Rz,useContext:Xs,useEffect:zj,useImperativeHandle:Mz,useInsertionEffect:Pz,useLayoutEffect:Iz,useMemo:Lz,useReducer:RN,useRef:Oz,useState:function(){return RN(Ng)},useDebugValue:Hj,useDeferredValue:function(e){var t=Qs();return Fz(t,sr.memoizedState,e)},useTransition:function(){var e=RN(Ng)[0],t=Qs().memoizedState;return[e,t]},useMutableSource:Nz,useSyncExternalStore:_z,useId:Bz,unstable_isNewReconciler:!1},bce={readContext:Xs,useCallback:Rz,useContext:Xs,useEffect:zj,useImperativeHandle:Mz,useInsertionEffect:Pz,useLayoutEffect:Iz,useMemo:Lz,useReducer:LN,useRef:Oz,useState:function(){return LN(Ng)},useDebugValue:Hj,useDeferredValue:function(e){var t=Qs();return sr===null?t.memoizedState=e:Fz(t,sr.memoizedState,e)},useTransition:function(){var e=LN(Ng)[0],t=Qs().memoizedState;return[e,t]},useMutableSource:Nz,useSyncExternalStore:_z,useId:Bz,unstable_isNewReconciler:!1};function fa(e,t){if(e&&e.defaultProps){t=kn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function U2(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:kn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Fw={isMounted:function(e){return(e=e._reactInternals)?Rd(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=bi(),i=fc(e),s=Vo(r,i);s.payload=t,n!=null&&(s.callback=n),t=uc(e,s,i),t!==null&&(Na(t,e,i,r),fx(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=bi(),i=fc(e),s=Vo(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=uc(e,s,i),t!==null&&(Na(t,e,i,r),fx(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=bi(),r=fc(e),i=Vo(n,r);i.tag=2,t!=null&&(i.callback=t),t=uc(e,i,r),t!==null&&(Na(t,e,r,n),fx(t,e,r))}};function jR(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!vg(n,r)||!vg(i,s):!0}function Hz(e,t,n){var r=!1,i=Cc,s=t.contextType;return typeof s=="object"&&s!==null?s=Xs(s):(i=Ui(t)?dd:si.current,r=t.contextTypes,s=(r=r!=null)?ch(e,i):Cc),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Fw,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function OR(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Fw.enqueueReplaceState(t,t.state,null)}function z2(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Mj(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Xs(s):(s=Ui(t)?dd:si.current,i.context=ch(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(U2(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Fw.enqueueReplaceState(i,i.state,null),nb(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function hh(e,t){try{var n="",r=t;do n+=Goe(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function FN(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function H2(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var wce=typeof WeakMap=="function"?WeakMap:Map;function Vz(e,t,n){n=Vo(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ob||(ob=!0,Z2=r),H2(e,t)},n}function Wz(e,t,n){n=Vo(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){H2(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){H2(e,t),typeof r!="function"&&(dc===null?dc=new Set([this]):dc.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function PR(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new wce;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Mce.bind(null,e,t,n),t.then(e,e))}function IR(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function DR(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Vo(-1,1),t.tag=2,uc(n,t,1))),n.lanes|=1),e)}var Ece=pl.ReactCurrentOwner,Ri=!1;function gi(e,t,n,r){t.child=e===null?bz(t,null,n,r):dh(t,e.child,n,r)}function MR(e,t,n,r,i){n=n.render;var s=t.ref;return qf(t,i),r=$j(e,t,n,r,s,i),n=Uj(),e!==null&&!Ri?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,rl(e,t,i)):(yn&&n&&Tj(t),t.flags|=1,gi(e,t,r,i),t.child)}function RR(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!Qj(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,qz(e,t,s,r,i)):(e=yx(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:vg,n(a,r)&&e.ref===t.ref)return rl(e,t,i)}return t.flags|=1,e=hc(s,r),e.ref=t.ref,e.return=t,t.child=e}function qz(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(vg(s,r)&&e.ref===t.ref)if(Ri=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Ri=!0);else return t.lanes=e.lanes,rl(e,t,i)}return V2(e,t,n,r,i)}function Kz(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jt(Pf,Zi),Zi|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Jt(Pf,Zi),Zi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Jt(Pf,Zi),Zi|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Jt(Pf,Zi),Zi|=r;return gi(e,t,i,n),t.child}function Gz(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function V2(e,t,n,r,i){var s=Ui(n)?dd:si.current;return s=ch(t,s),qf(t,i),n=$j(e,t,n,r,s,i),r=Uj(),e!==null&&!Ri?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,rl(e,t,i)):(yn&&r&&Tj(t),t.flags|=1,gi(e,t,n,i),t.child)}function LR(e,t,n,r,i){if(Ui(n)){var s=!0;Qx(t)}else s=!1;if(qf(t,i),t.stateNode===null)mx(e,t),Hz(t,n,r),z2(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Xs(u):(u=Ui(n)?dd:si.current,u=ch(t,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||c!==u)&&OR(t,a,r,u),Bl=!1;var h=t.memoizedState;a.state=h,nb(t,r,a,i),c=t.memoizedState,o!==r||h!==c||$i.current||Bl?(typeof d=="function"&&(U2(t,n,d,r),c=t.memoizedState),(o=Bl||jR(t,n,o,r,h,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ez(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:fa(t.type,o),a.props=u,f=t.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Xs(c):(c=Ui(n)?dd:si.current,c=ch(t,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||h!==c)&&OR(t,a,r,c),Bl=!1,h=t.memoizedState,a.state=h,nb(t,r,a,i);var m=t.memoizedState;o!==f||h!==m||$i.current||Bl?(typeof p=="function"&&(U2(t,n,p,r),m=t.memoizedState),(u=Bl||jR(t,n,u,r,h,m,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,m,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,m,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return W2(e,t,n,r,s,i)}function W2(e,t,n,r,i,s){Gz(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&ER(t,n,!1),rl(e,t,s);r=t.stateNode,Ece.current=t;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=dh(t,e.child,null,s),t.child=dh(t,null,o,s)):gi(e,t,o,s),t.memoizedState=r.state,i&&ER(t,n,!0),t.child}function Yz(e){var t=e.stateNode;t.pendingContext?wR(e,t.pendingContext,t.pendingContext!==t.context):t.context&&wR(e,t.context,!1),Rj(e,t.containerInfo)}function FR(e,t,n,r,i){return uh(),jj(i),t.flags|=256,gi(e,t,n,r),t.child}var q2={dehydrated:null,treeContext:null,retryLane:0};function K2(e){return{baseLanes:e,cachePool:null,transitions:null}}function Xz(e,t,n){var r=t.pendingProps,i=Sn.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Jt(Sn,i&1),e===null)return B2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Uw(a,r,0,null),e=Yu(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=K2(n),t.memoizedState=q2,e):Vj(t,a));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Sce(e,t,a,r,o,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,o=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=hc(i,c),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=hc(o,s):(s=Yu(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?K2(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=q2,r}return s=e.child,e=s.sibling,r=hc(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Vj(e,t){return t=Uw({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gv(e,t,n,r){return r!==null&&jj(r),dh(t,e.child,null,n),e=Vj(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Sce(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=FN(Error(_e(422))),Gv(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Uw({mode:"visible",children:r.children},i,0,null),s=Yu(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&dh(t,e.child,null,a),t.child.memoizedState=K2(a),t.memoizedState=q2,s);if(!(t.mode&1))return Gv(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(_e(419)),r=FN(s,r,void 0),Gv(e,t,a,r)}if(o=(a&e.childLanes)!==0,Ri||o){if(r=Nr,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,nl(e,i),Na(r,e,i,-1))}return Xj(),r=FN(Error(_e(421))),Gv(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Rce.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,as=cc(i.nextSibling),cs=t,yn=!0,ma=null,e!==null&&(Ms[Rs++]=Bo,Ms[Rs++]=$o,Ms[Rs++]=fd,Bo=e.id,$o=e.overflow,fd=t),t=Vj(t,r.children),t.flags|=4096,t)}function BR(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),$2(e.return,t,n)}function BN(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Qz(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(gi(e,t,r.children,n),r=Sn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&BR(e,n,t);else if(e.tag===19)BR(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Jt(Sn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&rb(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),BN(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&rb(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}BN(t,!0,n,null,s);break;case"together":BN(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function mx(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function rl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),pd|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(_e(153));if(t.child!==null){for(e=t.child,n=hc(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=hc(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Nce(e,t,n){switch(t.tag){case 3:Yz(t),uh();break;case 5:Sz(t);break;case 1:Ui(t.type)&&Qx(t);break;case 4:Rj(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Jt(eb,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Jt(Sn,Sn.current&1),t.flags|=128,null):n&t.child.childLanes?Xz(e,t,n):(Jt(Sn,Sn.current&1),e=rl(e,t,n),e!==null?e.sibling:null);Jt(Sn,Sn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Qz(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Jt(Sn,Sn.current),r)break;return null;case 22:case 23:return t.lanes=0,Kz(e,t,n)}return rl(e,t,n)}var Jz,G2,Zz,eH;Jz=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};G2=function(){};Zz=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Iu(eo.current);var s=null;switch(n){case"input":i=g2(e,i),r=g2(e,r),s=[];break;case"select":i=kn({},i,{value:void 0}),r=kn({},r,{value:void 0}),s=[];break;case"textarea":i=x2(e,i),r=x2(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Yx)}w2(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ug.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ug.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&sn("scroll",e),s||o===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};eH=function(e,t,n,r){n!==r&&(t.flags|=4)};function Mp(e,t){if(!yn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function _ce(e,t,n){var r=t.pendingProps;switch(Aj(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gr(t),null;case 1:return Ui(t.type)&&Xx(),Gr(t),null;case 3:return r=t.stateNode,fh(),un($i),un(si),Fj(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(qv(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ma!==null&&(nC(ma),ma=null))),G2(e,t),Gr(t),null;case 5:Lj(t);var i=Iu(Eg.current);if(n=t.type,e!==null&&t.stateNode!=null)Zz(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(_e(166));return Gr(t),null}if(e=Iu(eo.current),qv(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Ga]=t,r[bg]=s,e=(t.mode&1)!==0,n){case"dialog":sn("cancel",r),sn("close",r);break;case"iframe":case"object":case"embed":sn("load",r);break;case"video":case"audio":for(i=0;i<dm.length;i++)sn(dm[i],r);break;case"source":sn("error",r);break;case"img":case"image":case"link":sn("error",r),sn("load",r);break;case"details":sn("toggle",r);break;case"input":G3(r,s),sn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},sn("invalid",r);break;case"textarea":X3(r,s),sn("invalid",r)}w2(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&Wv(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Wv(r.textContent,o,e),i=["children",""+o]):ug.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&sn("scroll",r)}switch(n){case"input":Lv(r),Y3(r,s,!0);break;case"textarea":Lv(r),Q3(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Yx)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=TU(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Ga]=t,e[bg]=r,Jz(e,t,!1,!1),t.stateNode=e;e:{switch(a=E2(n,r),n){case"dialog":sn("cancel",e),sn("close",e),i=r;break;case"iframe":case"object":case"embed":sn("load",e),i=r;break;case"video":case"audio":for(i=0;i<dm.length;i++)sn(dm[i],e);i=r;break;case"source":sn("error",e),i=r;break;case"img":case"image":case"link":sn("error",e),sn("load",e),i=r;break;case"details":sn("toggle",e),i=r;break;case"input":G3(e,r),i=g2(e,r),sn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=kn({},r,{value:void 0}),sn("invalid",e);break;case"textarea":X3(e,r),i=x2(e,r),sn("invalid",e);break;default:i=r}w2(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var c=o[s];s==="style"?OU(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&AU(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&dg(e,c):typeof c=="number"&&dg(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ug.hasOwnProperty(s)?c!=null&&s==="onScroll"&&sn("scroll",e):c!=null&&pj(e,s,c,a))}switch(n){case"input":Lv(e),Y3(e,r,!1);break;case"textarea":Lv(e),Q3(e);break;case"option":r.value!=null&&e.setAttribute("value",""+kc(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?zf(e,!!r.multiple,s,!1):r.defaultValue!=null&&zf(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Yx)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Gr(t),null;case 6:if(e&&t.stateNode!=null)eH(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(_e(166));if(n=Iu(Eg.current),Iu(eo.current),qv(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ga]=t,(s=r.nodeValue!==n)&&(e=cs,e!==null))switch(e.tag){case 3:Wv(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Wv(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ga]=t,t.stateNode=r}return Gr(t),null;case 13:if(un(Sn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(yn&&as!==null&&t.mode&1&&!(t.flags&128))yz(),uh(),t.flags|=98560,s=!1;else if(s=qv(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(_e(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(_e(317));s[Ga]=t}else uh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Gr(t),s=!1}else ma!==null&&(nC(ma),ma=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Sn.current&1?ar===0&&(ar=3):Xj())),t.updateQueue!==null&&(t.flags|=4),Gr(t),null);case 4:return fh(),G2(e,t),e===null&&yg(t.stateNode.containerInfo),Gr(t),null;case 10:return Ij(t.type._context),Gr(t),null;case 17:return Ui(t.type)&&Xx(),Gr(t),null;case 19:if(un(Sn),s=t.memoizedState,s===null)return Gr(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)Mp(s,!1);else{if(ar!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=rb(e),a!==null){for(t.flags|=128,Mp(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Jt(Sn,Sn.current&1|2),t.child}e=e.sibling}s.tail!==null&&Un()>ph&&(t.flags|=128,r=!0,Mp(s,!1),t.lanes=4194304)}else{if(!r)if(e=rb(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Mp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!yn)return Gr(t),null}else 2*Un()-s.renderingStartTime>ph&&n!==1073741824&&(t.flags|=128,r=!0,Mp(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Un(),t.sibling=null,n=Sn.current,Jt(Sn,r?n&1|2:n&1),t):(Gr(t),null);case 22:case 23:return Yj(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Zi&1073741824&&(Gr(t),t.subtreeFlags&6&&(t.flags|=8192)):Gr(t),null;case 24:return null;case 25:return null}throw Error(_e(156,t.tag))}function kce(e,t){switch(Aj(t),t.tag){case 1:return Ui(t.type)&&Xx(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fh(),un($i),un(si),Fj(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Lj(t),null;case 13:if(un(Sn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(_e(340));uh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return un(Sn),null;case 4:return fh(),null;case 10:return Ij(t.type._context),null;case 22:case 23:return Yj(),null;case 24:return null;default:return null}}var Yv=!1,Qr=!1,Cce=typeof WeakSet=="function"?WeakSet:Set,Le=null;function Of(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){In(e,t,r)}else n.current=null}function Y2(e,t,n){try{n()}catch(r){In(e,t,r)}}var $R=!1;function Tce(e,t){if(P2=qx,e=sz(),Cj(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==n||i!==0&&f.nodeType!==3||(o=a+i),f!==s||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++u===i&&(o=a),h===s&&++d===r&&(c=a),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(I2={focusedElem:e,selectionRange:n},qx=!1,Le=t;Le!==null;)if(t=Le,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Le=e;else for(;Le!==null;){t=Le;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:fa(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_e(163))}}catch(S){In(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Le=e;break}Le=t.return}return m=$R,$R=!1,m}function Tm(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Y2(t,n,s)}i=i.next}while(i!==r)}}function Bw(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function X2(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function tH(e){var t=e.alternate;t!==null&&(e.alternate=null,tH(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ga],delete t[bg],delete t[R2],delete t[uce],delete t[dce])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nH(e){return e.tag===5||e.tag===3||e.tag===4}function UR(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||nH(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Q2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Yx));else if(r!==4&&(e=e.child,e!==null))for(Q2(e,t,n),e=e.sibling;e!==null;)Q2(e,t,n),e=e.sibling}function J2(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(J2(e,t,n),e=e.sibling;e!==null;)J2(e,t,n),e=e.sibling}var Rr=null,ha=!1;function Nl(e,t,n){for(n=n.child;n!==null;)rH(e,t,n),n=n.sibling}function rH(e,t,n){if(Za&&typeof Za.onCommitFiberUnmount=="function")try{Za.onCommitFiberUnmount(Ow,n)}catch{}switch(n.tag){case 5:Qr||Of(n,t);case 6:var r=Rr,i=ha;Rr=null,Nl(e,t,n),Rr=r,ha=i,Rr!==null&&(ha?(e=Rr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Rr.removeChild(n.stateNode));break;case 18:Rr!==null&&(ha?(e=Rr,n=n.stateNode,e.nodeType===8?PN(e.parentNode,n):e.nodeType===1&&PN(e,n),mg(e)):PN(Rr,n.stateNode));break;case 4:r=Rr,i=ha,Rr=n.stateNode.containerInfo,ha=!0,Nl(e,t,n),Rr=r,ha=i;break;case 0:case 11:case 14:case 15:if(!Qr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Y2(n,t,a),i=i.next}while(i!==r)}Nl(e,t,n);break;case 1:if(!Qr&&(Of(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){In(n,t,o)}Nl(e,t,n);break;case 21:Nl(e,t,n);break;case 22:n.mode&1?(Qr=(r=Qr)||n.memoizedState!==null,Nl(e,t,n),Qr=r):Nl(e,t,n);break;default:Nl(e,t,n)}}function zR(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Cce),t.forEach(function(r){var i=Lce.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function la(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:Rr=o.stateNode,ha=!1;break e;case 3:Rr=o.stateNode.containerInfo,ha=!0;break e;case 4:Rr=o.stateNode.containerInfo,ha=!0;break e}o=o.return}if(Rr===null)throw Error(_e(160));rH(s,a,i),Rr=null,ha=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){In(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)iH(t,e),t=t.sibling}function iH(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(la(t,e),Ba(e),r&4){try{Tm(3,e,e.return),Bw(3,e)}catch(g){In(e,e.return,g)}try{Tm(5,e,e.return)}catch(g){In(e,e.return,g)}}break;case 1:la(t,e),Ba(e),r&512&&n!==null&&Of(n,n.return);break;case 5:if(la(t,e),Ba(e),r&512&&n!==null&&Of(n,n.return),e.flags&32){var i=e.stateNode;try{dg(i,"")}catch(g){In(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&kU(i,s),E2(o,a);var u=E2(o,s);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?OU(i,f):d==="dangerouslySetInnerHTML"?AU(i,f):d==="children"?dg(i,f):pj(i,d,f,u)}switch(o){case"input":v2(i,s);break;case"textarea":CU(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?zf(i,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?zf(i,!!s.multiple,s.defaultValue,!0):zf(i,!!s.multiple,s.multiple?[]:"",!1))}i[bg]=s}catch(g){In(e,e.return,g)}}break;case 6:if(la(t,e),Ba(e),r&4){if(e.stateNode===null)throw Error(_e(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){In(e,e.return,g)}}break;case 3:if(la(t,e),Ba(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{mg(t.containerInfo)}catch(g){In(e,e.return,g)}break;case 4:la(t,e),Ba(e);break;case 13:la(t,e),Ba(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Kj=Un())),r&4&&zR(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Qr=(u=Qr)||d,la(t,e),Qr=u):la(t,e),Ba(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Le=e,d=e.child;d!==null;){for(f=Le=d;Le!==null;){switch(h=Le,p=h.child,h.tag){case 0:case 11:case 14:case 15:Tm(4,h,h.return);break;case 1:Of(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){In(r,n,g)}}break;case 5:Of(h,h.return);break;case 22:if(h.memoizedState!==null){VR(f);continue}}p!==null?(p.return=h,Le=p):VR(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=jU("display",a))}catch(g){In(e,e.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){In(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:la(t,e),Ba(e),r&4&&zR(e);break;case 21:break;default:la(t,e),Ba(e)}}function Ba(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(nH(n)){var r=n;break e}n=n.return}throw Error(_e(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(dg(i,""),r.flags&=-33);var s=UR(e);J2(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=UR(e);Q2(e,o,a);break;default:throw Error(_e(161))}}catch(c){In(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ace(e,t,n){Le=e,sH(e)}function sH(e,t,n){for(var r=(e.mode&1)!==0;Le!==null;){var i=Le,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Yv;if(!a){var o=i.alternate,c=o!==null&&o.memoizedState!==null||Qr;o=Yv;var u=Qr;if(Yv=a,(Qr=c)&&!u)for(Le=i;Le!==null;)a=Le,c=a.child,a.tag===22&&a.memoizedState!==null?WR(i):c!==null?(c.return=a,Le=c):WR(i);for(;s!==null;)Le=s,sH(s),s=s.sibling;Le=i,Yv=o,Qr=u}HR(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Le=s):HR(e)}}function HR(e){for(;Le!==null;){var t=Le;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Qr||Bw(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Qr)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:fa(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&CR(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}CR(t,a,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&mg(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_e(163))}Qr||t.flags&512&&X2(t)}catch(h){In(t,t.return,h)}}if(t===e){Le=null;break}if(n=t.sibling,n!==null){n.return=t.return,Le=n;break}Le=t.return}}function VR(e){for(;Le!==null;){var t=Le;if(t===e){Le=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Le=n;break}Le=t.return}}function WR(e){for(;Le!==null;){var t=Le;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Bw(4,t)}catch(c){In(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){In(t,i,c)}}var s=t.return;try{X2(t)}catch(c){In(t,s,c)}break;case 5:var a=t.return;try{X2(t)}catch(c){In(t,a,c)}}}catch(c){In(t,t.return,c)}if(t===e){Le=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Le=o;break}Le=t.return}}var jce=Math.ceil,ab=pl.ReactCurrentDispatcher,Wj=pl.ReactCurrentOwner,qs=pl.ReactCurrentBatchConfig,_t=0,Nr=null,Gn=null,Vr=0,Zi=0,Pf=Hc(0),ar=0,kg=null,pd=0,$w=0,qj=0,Am=null,Ii=null,Kj=0,ph=1/0,Po=null,ob=!1,Z2=null,dc=null,Xv=!1,Zl=null,lb=0,jm=0,eC=null,gx=-1,vx=0;function bi(){return _t&6?Un():gx!==-1?gx:gx=Un()}function fc(e){return e.mode&1?_t&2&&Vr!==0?Vr&-Vr:hce.transition!==null?(vx===0&&(vx=HU()),vx):(e=Rt,e!==0||(e=window.event,e=e===void 0?16:XU(e.type)),e):1}function Na(e,t,n,r){if(50<jm)throw jm=0,eC=null,Error(_e(185));C0(e,n,r),(!(_t&2)||e!==Nr)&&(e===Nr&&(!(_t&2)&&($w|=n),ar===4&&Wl(e,Vr)),zi(e,r),n===1&&_t===0&&!(t.mode&1)&&(ph=Un()+500,Rw&&Vc()))}function zi(e,t){var n=e.callbackNode;hle(e,t);var r=Wx(e,e===Nr?Vr:0);if(r===0)n!==null&&eR(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&eR(n),t===1)e.tag===0?fce(qR.bind(null,e)):mz(qR.bind(null,e)),lce(function(){!(_t&6)&&Vc()}),n=null;else{switch(VU(r)){case 1:n=xj;break;case 4:n=UU;break;case 16:n=Vx;break;case 536870912:n=zU;break;default:n=Vx}n=hH(n,aH.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function aH(e,t){if(gx=-1,vx=0,_t&6)throw Error(_e(327));var n=e.callbackNode;if(Kf()&&e.callbackNode!==n)return null;var r=Wx(e,e===Nr?Vr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=cb(e,r);else{t=r;var i=_t;_t|=2;var s=lH();(Nr!==e||Vr!==t)&&(Po=null,ph=Un()+500,Gu(e,t));do try{Ice();break}catch(o){oH(e,o)}while(!0);Pj(),ab.current=s,_t=i,Gn!==null?t=0:(Nr=null,Vr=0,t=ar)}if(t!==0){if(t===2&&(i=C2(e),i!==0&&(r=i,t=tC(e,i))),t===1)throw n=kg,Gu(e,0),Wl(e,r),zi(e,Un()),n;if(t===6)Wl(e,r);else{if(i=e.current.alternate,!(r&30)&&!Oce(i)&&(t=cb(e,r),t===2&&(s=C2(e),s!==0&&(r=s,t=tC(e,s))),t===1))throw n=kg,Gu(e,0),Wl(e,r),zi(e,Un()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(_e(345));case 2:bu(e,Ii,Po);break;case 3:if(Wl(e,r),(r&130023424)===r&&(t=Kj+500-Un(),10<t)){if(Wx(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){bi(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=M2(bu.bind(null,e,Ii,Po),t);break}bu(e,Ii,Po);break;case 4:if(Wl(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-Sa(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=Un()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jce(r/1960))-r,10<r){e.timeoutHandle=M2(bu.bind(null,e,Ii,Po),r);break}bu(e,Ii,Po);break;case 5:bu(e,Ii,Po);break;default:throw Error(_e(329))}}}return zi(e,Un()),e.callbackNode===n?aH.bind(null,e):null}function tC(e,t){var n=Am;return e.current.memoizedState.isDehydrated&&(Gu(e,t).flags|=256),e=cb(e,t),e!==2&&(t=Ii,Ii=n,t!==null&&nC(t)),e}function nC(e){Ii===null?Ii=e:Ii.push.apply(Ii,e)}function Oce(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ka(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wl(e,t){for(t&=~qj,t&=~$w,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Sa(t),r=1<<n;e[n]=-1,t&=~r}}function qR(e){if(_t&6)throw Error(_e(327));Kf();var t=Wx(e,0);if(!(t&1))return zi(e,Un()),null;var n=cb(e,t);if(e.tag!==0&&n===2){var r=C2(e);r!==0&&(t=r,n=tC(e,r))}if(n===1)throw n=kg,Gu(e,0),Wl(e,t),zi(e,Un()),n;if(n===6)throw Error(_e(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bu(e,Ii,Po),zi(e,Un()),null}function Gj(e,t){var n=_t;_t|=1;try{return e(t)}finally{_t=n,_t===0&&(ph=Un()+500,Rw&&Vc())}}function md(e){Zl!==null&&Zl.tag===0&&!(_t&6)&&Kf();var t=_t;_t|=1;var n=qs.transition,r=Rt;try{if(qs.transition=null,Rt=1,e)return e()}finally{Rt=r,qs.transition=n,_t=t,!(_t&6)&&Vc()}}function Yj(){Zi=Pf.current,un(Pf)}function Gu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,oce(n)),Gn!==null)for(n=Gn.return;n!==null;){var r=n;switch(Aj(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xx();break;case 3:fh(),un($i),un(si),Fj();break;case 5:Lj(r);break;case 4:fh();break;case 13:un(Sn);break;case 19:un(Sn);break;case 10:Ij(r.type._context);break;case 22:case 23:Yj()}n=n.return}if(Nr=e,Gn=e=hc(e.current,null),Vr=Zi=t,ar=0,kg=null,qj=$w=pd=0,Ii=Am=null,Pu!==null){for(t=0;t<Pu.length;t++)if(n=Pu[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Pu=null}return e}function oH(e,t){do{var n=Gn;try{if(Pj(),hx.current=sb,ib){for(var r=_n.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ib=!1}if(hd=0,yr=sr=_n=null,Cm=!1,Sg=0,Wj.current=null,n===null||n.return===null){ar=1,kg=t,Gn=null;break}e:{var s=e,a=n.return,o=n,c=t;if(t=Vr,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=IR(a);if(p!==null){p.flags&=-257,DR(p,a,o,s,t),p.mode&1&&PR(s,u,t),t=p,c=u;var m=t.updateQueue;if(m===null){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}else{if(!(t&1)){PR(s,u,t),Xj();break e}c=Error(_e(426))}}else if(yn&&o.mode&1){var v=IR(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),DR(v,a,o,s,t),jj(hh(c,o));break e}}s=c=hh(c,o),ar!==4&&(ar=2),Am===null?Am=[s]:Am.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=Vz(s,c,t);kR(s,y);break e;case 1:o=c;var x=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(dc===null||!dc.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var S=Wz(s,o,t);kR(s,S);break e}}s=s.return}while(s!==null)}uH(n)}catch(E){t=E,Gn===n&&n!==null&&(Gn=n=n.return);continue}break}while(!0)}function lH(){var e=ab.current;return ab.current=sb,e===null?sb:e}function Xj(){(ar===0||ar===3||ar===2)&&(ar=4),Nr===null||!(pd&268435455)&&!($w&268435455)||Wl(Nr,Vr)}function cb(e,t){var n=_t;_t|=2;var r=lH();(Nr!==e||Vr!==t)&&(Po=null,Gu(e,t));do try{Pce();break}catch(i){oH(e,i)}while(!0);if(Pj(),_t=n,ab.current=r,Gn!==null)throw Error(_e(261));return Nr=null,Vr=0,ar}function Pce(){for(;Gn!==null;)cH(Gn)}function Ice(){for(;Gn!==null&&!ile();)cH(Gn)}function cH(e){var t=fH(e.alternate,e,Zi);e.memoizedProps=e.pendingProps,t===null?uH(e):Gn=t,Wj.current=null}function uH(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=kce(n,t),n!==null){n.flags&=32767,Gn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ar=6,Gn=null;return}}else if(n=_ce(n,t,Zi),n!==null){Gn=n;return}if(t=t.sibling,t!==null){Gn=t;return}Gn=t=e}while(t!==null);ar===0&&(ar=5)}function bu(e,t,n){var r=Rt,i=qs.transition;try{qs.transition=null,Rt=1,Dce(e,t,n,r)}finally{qs.transition=i,Rt=r}return null}function Dce(e,t,n,r){do Kf();while(Zl!==null);if(_t&6)throw Error(_e(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(_e(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(ple(e,s),e===Nr&&(Gn=Nr=null,Vr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xv||(Xv=!0,hH(Vx,function(){return Kf(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=qs.transition,qs.transition=null;var a=Rt;Rt=1;var o=_t;_t|=4,Wj.current=null,Tce(e,n),iH(n,e),ece(I2),qx=!!P2,I2=P2=null,e.current=n,Ace(n),sle(),_t=o,Rt=a,qs.transition=s}else e.current=n;if(Xv&&(Xv=!1,Zl=e,lb=i),s=e.pendingLanes,s===0&&(dc=null),lle(n.stateNode),zi(e,Un()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ob)throw ob=!1,e=Z2,Z2=null,e;return lb&1&&e.tag!==0&&Kf(),s=e.pendingLanes,s&1?e===eC?jm++:(jm=0,eC=e):jm=0,Vc(),null}function Kf(){if(Zl!==null){var e=VU(lb),t=qs.transition,n=Rt;try{if(qs.transition=null,Rt=16>e?16:e,Zl===null)var r=!1;else{if(e=Zl,Zl=null,lb=0,_t&6)throw Error(_e(331));var i=_t;for(_t|=4,Le=e.current;Le!==null;){var s=Le,a=s.child;if(Le.flags&16){var o=s.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(Le=u;Le!==null;){var d=Le;switch(d.tag){case 0:case 11:case 15:Tm(8,d,s)}var f=d.child;if(f!==null)f.return=d,Le=f;else for(;Le!==null;){d=Le;var h=d.sibling,p=d.return;if(tH(d),d===u){Le=null;break}if(h!==null){h.return=p,Le=h;break}Le=p}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}Le=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Le=a;else e:for(;Le!==null;){if(s=Le,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Tm(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Le=y;break e}Le=s.return}}var x=e.current;for(Le=x;Le!==null;){a=Le;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,Le=b;else e:for(a=x;Le!==null;){if(o=Le,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Bw(9,o)}}catch(E){In(o,o.return,E)}if(o===a){Le=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,Le=S;break e}Le=o.return}}if(_t=i,Vc(),Za&&typeof Za.onPostCommitFiberRoot=="function")try{Za.onPostCommitFiberRoot(Ow,e)}catch{}r=!0}return r}finally{Rt=n,qs.transition=t}}return!1}function KR(e,t,n){t=hh(n,t),t=Vz(e,t,1),e=uc(e,t,1),t=bi(),e!==null&&(C0(e,1,t),zi(e,t))}function In(e,t,n){if(e.tag===3)KR(e,e,n);else for(;t!==null;){if(t.tag===3){KR(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(dc===null||!dc.has(r))){e=hh(n,e),e=Wz(t,e,1),t=uc(t,e,1),e=bi(),t!==null&&(C0(t,1,e),zi(t,e));break}}t=t.return}}function Mce(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=bi(),e.pingedLanes|=e.suspendedLanes&n,Nr===e&&(Vr&n)===n&&(ar===4||ar===3&&(Vr&130023424)===Vr&&500>Un()-Kj?Gu(e,0):qj|=n),zi(e,t)}function dH(e,t){t===0&&(e.mode&1?(t=$v,$v<<=1,!($v&130023424)&&($v=4194304)):t=1);var n=bi();e=nl(e,t),e!==null&&(C0(e,t,n),zi(e,n))}function Rce(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),dH(e,n)}function Lce(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(_e(314))}r!==null&&r.delete(t),dH(e,n)}var fH;fH=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||$i.current)Ri=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ri=!1,Nce(e,t,n);Ri=!!(e.flags&131072)}else Ri=!1,yn&&t.flags&1048576&&gz(t,Zx,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;mx(e,t),e=t.pendingProps;var i=ch(t,si.current);qf(t,n),i=$j(null,t,r,e,i,n);var s=Uj();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ui(r)?(s=!0,Qx(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Mj(t),i.updater=Fw,t.stateNode=i,i._reactInternals=t,z2(t,r,e,n),t=W2(null,t,r,!0,s,n)):(t.tag=0,yn&&s&&Tj(t),gi(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(mx(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Bce(r),e=fa(r,e),i){case 0:t=V2(null,t,r,e,n);break e;case 1:t=LR(null,t,r,e,n);break e;case 11:t=MR(null,t,r,e,n);break e;case 14:t=RR(null,t,r,fa(r.type,e),n);break e}throw Error(_e(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:fa(r,i),V2(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:fa(r,i),LR(e,t,r,i,n);case 3:e:{if(Yz(t),e===null)throw Error(_e(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Ez(e,t),nb(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=hh(Error(_e(423)),t),t=FR(e,t,r,n,i);break e}else if(r!==i){i=hh(Error(_e(424)),t),t=FR(e,t,r,n,i);break e}else for(as=cc(t.stateNode.containerInfo.firstChild),cs=t,yn=!0,ma=null,n=bz(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(uh(),r===i){t=rl(e,t,n);break e}gi(e,t,r,n)}t=t.child}return t;case 5:return Sz(t),e===null&&B2(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,D2(r,i)?a=null:s!==null&&D2(r,s)&&(t.flags|=32),Gz(e,t),gi(e,t,a,n),t.child;case 6:return e===null&&B2(t),null;case 13:return Xz(e,t,n);case 4:return Rj(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=dh(t,null,r,n):gi(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:fa(r,i),MR(e,t,r,i,n);case 7:return gi(e,t,t.pendingProps,n),t.child;case 8:return gi(e,t,t.pendingProps.children,n),t.child;case 12:return gi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Jt(eb,r._currentValue),r._currentValue=a,s!==null)if(ka(s.value,a)){if(s.children===i.children&&!$i.current){t=rl(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Vo(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),$2(s.return,n,t),o.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(_e(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),$2(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}gi(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,qf(t,n),i=Xs(i),r=r(i),t.flags|=1,gi(e,t,r,n),t.child;case 14:return r=t.type,i=fa(r,t.pendingProps),i=fa(r.type,i),RR(e,t,r,i,n);case 15:return qz(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:fa(r,i),mx(e,t),t.tag=1,Ui(r)?(e=!0,Qx(t)):e=!1,qf(t,n),Hz(t,r,i),z2(t,r,i,n),W2(null,t,r,!0,e,n);case 19:return Qz(e,t,n);case 22:return Kz(e,t,n)}throw Error(_e(156,t.tag))};function hH(e,t){return $U(e,t)}function Fce(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Us(e,t,n,r){return new Fce(e,t,n,r)}function Qj(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Bce(e){if(typeof e=="function")return Qj(e)?1:0;if(e!=null){if(e=e.$$typeof,e===gj)return 11;if(e===vj)return 14}return 2}function hc(e,t){var n=e.alternate;return n===null?(n=Us(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function yx(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")Qj(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Ef:return Yu(n.children,i,s,t);case mj:a=8,i|=8;break;case f2:return e=Us(12,n,t,i|2),e.elementType=f2,e.lanes=s,e;case h2:return e=Us(13,n,t,i),e.elementType=h2,e.lanes=s,e;case p2:return e=Us(19,n,t,i),e.elementType=p2,e.lanes=s,e;case SU:return Uw(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case wU:a=10;break e;case EU:a=9;break e;case gj:a=11;break e;case vj:a=14;break e;case Fl:a=16,r=null;break e}throw Error(_e(130,e==null?e:typeof e,""))}return t=Us(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Yu(e,t,n,r){return e=Us(7,e,r,t),e.lanes=n,e}function Uw(e,t,n,r){return e=Us(22,e,r,t),e.elementType=SU,e.lanes=n,e.stateNode={isHidden:!1},e}function $N(e,t,n){return e=Us(6,e,null,t),e.lanes=n,e}function UN(e,t,n){return t=Us(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $ce(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wN(0),this.expirationTimes=wN(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wN(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Jj(e,t,n,r,i,s,a,o,c){return e=new $ce(e,t,n,o,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Us(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mj(s),e}function Uce(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wf,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function pH(e){if(!e)return Cc;e=e._reactInternals;e:{if(Rd(e)!==e||e.tag!==1)throw Error(_e(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ui(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(_e(171))}if(e.tag===1){var n=e.type;if(Ui(n))return pz(e,n,t)}return t}function mH(e,t,n,r,i,s,a,o,c){return e=Jj(n,r,!0,e,i,s,a,o,c),e.context=pH(null),n=e.current,r=bi(),i=fc(n),s=Vo(r,i),s.callback=t??null,uc(n,s,i),e.current.lanes=i,C0(e,i,r),zi(e,r),e}function zw(e,t,n,r){var i=t.current,s=bi(),a=fc(i);return n=pH(n),t.context===null?t.context=n:t.pendingContext=n,t=Vo(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=uc(i,t,a),e!==null&&(Na(e,i,a,s),fx(e,i,a)),a}function ub(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function GR(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Zj(e,t){GR(e,t),(e=e.alternate)&&GR(e,t)}function zce(){return null}var gH=typeof reportError=="function"?reportError:function(e){console.error(e)};function eO(e){this._internalRoot=e}Hw.prototype.render=eO.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(_e(409));zw(e,t,null,null)};Hw.prototype.unmount=eO.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;md(function(){zw(null,e,null,null)}),t[tl]=null}};function Hw(e){this._internalRoot=e}Hw.prototype.unstable_scheduleHydration=function(e){if(e){var t=KU();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Vl.length&&t!==0&&t<Vl[n].priority;n++);Vl.splice(n,0,e),n===0&&YU(e)}};function tO(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Vw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function YR(){}function Hce(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=ub(a);s.call(u)}}var a=mH(t,r,e,0,null,!1,!1,"",YR);return e._reactRootContainer=a,e[tl]=a.current,yg(e.nodeType===8?e.parentNode:e),md(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=ub(c);o.call(u)}}var c=Jj(e,0,!1,null,null,!1,!1,"",YR);return e._reactRootContainer=c,e[tl]=c.current,yg(e.nodeType===8?e.parentNode:e),md(function(){zw(t,c,n,r)}),c}function Ww(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var c=ub(a);o.call(c)}}zw(t,a,e,i)}else a=Hce(n,t,e,i,r);return ub(a)}WU=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=um(t.pendingLanes);n!==0&&(bj(t,n|1),zi(t,Un()),!(_t&6)&&(ph=Un()+500,Vc()))}break;case 13:md(function(){var r=nl(e,1);if(r!==null){var i=bi();Na(r,e,1,i)}}),Zj(e,1)}};wj=function(e){if(e.tag===13){var t=nl(e,134217728);if(t!==null){var n=bi();Na(t,e,134217728,n)}Zj(e,134217728)}};qU=function(e){if(e.tag===13){var t=fc(e),n=nl(e,t);if(n!==null){var r=bi();Na(n,e,t,r)}Zj(e,t)}};KU=function(){return Rt};GU=function(e,t){var n=Rt;try{return Rt=e,t()}finally{Rt=n}};N2=function(e,t,n){switch(t){case"input":if(v2(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Mw(r);if(!i)throw Error(_e(90));_U(r),v2(r,i)}}}break;case"textarea":CU(e,n);break;case"select":t=n.value,t!=null&&zf(e,!!n.multiple,t,!1)}};DU=Gj;MU=md;var Vce={usingClientEntryPoint:!1,Events:[A0,kf,Mw,PU,IU,Gj]},Rp={findFiberByHostInstance:Ou,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wce={bundleType:Rp.bundleType,version:Rp.version,rendererPackageName:Rp.rendererPackageName,rendererConfig:Rp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=FU(e),e===null?null:e.stateNode},findFiberByHostInstance:Rp.findFiberByHostInstance||zce,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qv.isDisabled&&Qv.supportsFiber)try{Ow=Qv.inject(Wce),Za=Qv}catch{}}xs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vce;xs.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tO(t))throw Error(_e(200));return Uce(e,t,null,n)};xs.createRoot=function(e,t){if(!tO(e))throw Error(_e(299));var n=!1,r="",i=gH;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Jj(e,1,!1,null,null,n,!1,r,i),e[tl]=t.current,yg(e.nodeType===8?e.parentNode:e),new eO(t)};xs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(_e(188)):(e=Object.keys(e).join(","),Error(_e(268,e)));return e=FU(t),e=e===null?null:e.stateNode,e};xs.flushSync=function(e){return md(e)};xs.hydrate=function(e,t,n){if(!Vw(t))throw Error(_e(200));return Ww(null,e,t,!0,n)};xs.hydrateRoot=function(e,t,n){if(!tO(e))throw Error(_e(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=gH;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=mH(t,null,e,1,n??null,i,!1,s,a),e[tl]=t.current,yg(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Hw(t)};xs.render=function(e,t,n){if(!Vw(t))throw Error(_e(200));return Ww(null,e,t,!1,n)};xs.unmountComponentAtNode=function(e){if(!Vw(e))throw Error(_e(40));return e._reactRootContainer?(md(function(){Ww(null,null,e,!1,function(){e._reactRootContainer=null,e[tl]=null})}),!0):!1};xs.unstable_batchedUpdates=Gj;xs.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Vw(n))throw Error(_e(200));if(e==null||e._reactInternals===void 0)throw Error(_e(38));return Ww(e,t,n,!1,r)};xs.version="18.3.1-next-f1338f8080-20240426";function vH(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vH)}catch(e){console.error(e)}}vH(),vU.exports=xs;var ml=vU.exports;const nO=oi(ml);var yH,XR=ml;yH=XR.createRoot,XR.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cg(){return Cg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cg.apply(this,arguments)}var ec;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ec||(ec={}));const QR="popstate";function qce(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:a,hash:o}=r.location;return rC("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:db(i)}return Gce(t,n,null,e)}function Ln(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function xH(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Kce(){return Math.random().toString(36).substr(2,8)}function JR(e,t){return{usr:e.state,key:e.key,idx:t}}function rC(e,t,n,r){return n===void 0&&(n=null),Cg({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Kh(t):t,{state:n,key:t&&t.key||r||Kce()})}function db(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Kh(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Gce(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=ec.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(Cg({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function f(){o=ec.Pop;let v=d(),y=v==null?null:v-u;u=v,c&&c({action:o,location:g.location,delta:y})}function h(v,y){o=ec.Push;let x=rC(g.location,v,y);u=d()+1;let b=JR(x,u),S=g.createHref(x);try{a.pushState(b,"",S)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(S)}s&&c&&c({action:o,location:g.location,delta:1})}function p(v,y){o=ec.Replace;let x=rC(g.location,v,y);u=d();let b=JR(x,u),S=g.createHref(x);a.replaceState(b,"",S),s&&c&&c({action:o,location:g.location,delta:0})}function m(v){let y=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof v=="string"?v:db(v);return x=x.replace(/ $/,"%20"),Ln(y,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,y)}let g={get action(){return o},get location(){return e(i,a)},listen(v){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(QR,f),c=v,()=>{i.removeEventListener(QR,f),c=null}},createHref(v){return t(i,v)},createURL:m,encodeLocation(v){let y=m(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:p,go(v){return a.go(v)}};return g}var ZR;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ZR||(ZR={}));function Yce(e,t,n){return n===void 0&&(n="/"),Xce(e,t,n)}function Xce(e,t,n,r){let i=typeof t=="string"?Kh(t):t,s=mh(i.pathname||"/",n);if(s==null)return null;let a=bH(e);Qce(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let u=lue(s);o=aue(a[c],u)}return o}function bH(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,o)=>{let c={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(Ln(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=pc([r,c.relativePath]),d=n.concat(c);s.children&&s.children.length>0&&(Ln(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),bH(s.children,t,d,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:iue(u,s.index),routesMeta:d})};return e.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let c of wH(s.path))i(s,a,c)}),t}function wH(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=wH(r.join("/")),o=[];return o.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&o.push(...a),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function Qce(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:sue(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Jce=/^:[\w-]+$/,Zce=3,eue=2,tue=1,nue=10,rue=-2,e4=e=>e==="*";function iue(e,t){let n=e.split("/"),r=n.length;return n.some(e4)&&(r+=rue),t&&(r+=eue),n.filter(i=>!e4(i)).reduce((i,s)=>i+(Jce.test(s)?Zce:s===""?tue:nue),r)}function sue(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function aue(e,t,n){let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let c=r[o],u=o===r.length-1,d=s==="/"?t:t.slice(s.length)||"/",f=iC({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f)return null;Object.assign(i,f.params),a.push({params:i,pathname:pc([s,f.pathname]),pathnameBase:fue(pc([s,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(s=pc([s,f.pathnameBase]))}return a}function iC(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=oue(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,d,f)=>{let{paramName:h,isOptional:p}=d;if(h==="*"){let g=o[f]||"";a=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=o[f];return p&&!m?u[h]=void 0:u[h]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:e}}function oue(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),xH(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function lue(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return xH(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function mh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function cue(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Kh(e):e;return{pathname:n?n.startsWith("/")?n:uue(n,t):t,search:hue(r),hash:pue(i)}}function uue(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function zN(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function due(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function EH(e,t){let n=due(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function SH(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Kh(e):(i=Cg({},e),Ln(!i.pathname||!i.pathname.includes("?"),zN("?","pathname","search",i)),Ln(!i.pathname||!i.pathname.includes("#"),zN("#","pathname","hash",i)),Ln(!i.search||!i.search.includes("#"),zN("#","search","hash",i)));let s=e===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=n;else{let f=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}o=f>=0?t[f]:"/"}let c=cue(i,o),u=a&&a!=="/"&&a.endsWith("/"),d=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const pc=e=>e.join("/").replace(/\/\/+/g,"/"),fue=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),hue=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,pue=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function mue(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const NH=["post","put","patch","delete"];new Set(NH);const gue=["get",...NH];new Set(gue);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tg(){return Tg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tg.apply(this,arguments)}const qw=w.createContext(null),_H=w.createContext(null),Wc=w.createContext(null),Kw=w.createContext(null),qc=w.createContext({outlet:null,matches:[],isDataRoute:!1}),kH=w.createContext(null);function vue(e,t){let{relative:n}=t===void 0?{}:t;O0()||Ln(!1);let{basename:r,navigator:i}=w.useContext(Wc),{hash:s,pathname:a,search:o}=Gw(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:pc([r,a])),i.createHref({pathname:c,search:o,hash:s})}function O0(){return w.useContext(Kw)!=null}function P0(){return O0()||Ln(!1),w.useContext(Kw).location}function CH(e){w.useContext(Wc).static||w.useLayoutEffect(e)}function TH(){let{isDataRoute:e}=w.useContext(qc);return e?Pue():yue()}function yue(){O0()||Ln(!1);let e=w.useContext(qw),{basename:t,future:n,navigator:r}=w.useContext(Wc),{matches:i}=w.useContext(qc),{pathname:s}=P0(),a=JSON.stringify(EH(i,n.v7_relativeSplatPath)),o=w.useRef(!1);return CH(()=>{o.current=!0}),w.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){r.go(u);return}let f=SH(u,JSON.parse(a),s,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:pc([t,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[t,r,a,s,e])}const xue=w.createContext(null);function bue(e){let t=w.useContext(qc).outlet;return t&&w.createElement(xue.Provider,{value:e},t)}function Gw(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=w.useContext(Wc),{matches:i}=w.useContext(qc),{pathname:s}=P0(),a=JSON.stringify(EH(i,r.v7_relativeSplatPath));return w.useMemo(()=>SH(e,JSON.parse(a),s,n==="path"),[e,a,s,n])}function wue(e,t){return Eue(e,t)}function Eue(e,t,n,r){O0()||Ln(!1);let{navigator:i}=w.useContext(Wc),{matches:s}=w.useContext(qc),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=P0(),d;if(t){var f;let v=typeof t=="string"?Kh(t):t;c==="/"||(f=v.pathname)!=null&&f.startsWith(c)||Ln(!1),d=v}else d=u;let h=d.pathname||"/",p=h;if(c!=="/"){let v=c.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=Yce(e,{pathname:p}),g=Cue(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:pc([c,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:pc([c,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n,r);return t&&g?w.createElement(Kw.Provider,{value:{location:Tg({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ec.Pop}},g):g}function Sue(){let e=Oue(),t=mue(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),n?w.createElement("pre",{style:i},n):null,null)}const Nue=w.createElement(Sue,null);class _ue extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?w.createElement(qc.Provider,{value:this.props.routeContext},w.createElement(kH.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kue(e){let{routeContext:t,match:n,children:r}=e,i=w.useContext(qw);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(qc.Provider,{value:t},r)}function Cue(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=(i=n)==null?void 0:i.errors;if(o!=null){let d=a.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);d>=0||Ln(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:p}=n,m=f.route.loader&&h[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||m){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,f,h)=>{let p,m=!1,g=null,v=null;n&&(p=o&&f.route.id?o[f.route.id]:void 0,g=f.route.errorElement||Nue,c&&(u<0&&h===0?(Iue("route-fallback"),m=!0,v=null):u===h&&(m=!0,v=f.route.hydrateFallbackElement||null)));let y=t.concat(a.slice(0,h+1)),x=()=>{let b;return p?b=g:m?b=v:f.route.Component?b=w.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,w.createElement(kue,{match:f,routeContext:{outlet:d,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?w.createElement(_ue,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}var AH=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(AH||{}),jH=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(jH||{});function Tue(e){let t=w.useContext(qw);return t||Ln(!1),t}function Aue(e){let t=w.useContext(_H);return t||Ln(!1),t}function jue(e){let t=w.useContext(qc);return t||Ln(!1),t}function OH(e){let t=jue(),n=t.matches[t.matches.length-1];return n.route.id||Ln(!1),n.route.id}function Oue(){var e;let t=w.useContext(kH),n=Aue(),r=OH();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Pue(){let{router:e}=Tue(AH.UseNavigateStable),t=OH(jH.UseNavigateStable),n=w.useRef(!1);return CH(()=>{n.current=!0}),w.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Tg({fromRouteId:t},s)))},[e,t])}const t4={};function Iue(e,t,n){t4[e]||(t4[e]=!0)}function Due(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Mue(e){return bue(e.context)}function Gi(e){Ln(!1)}function Rue(e){let{basename:t="/",children:n=null,location:r,navigationType:i=ec.Pop,navigator:s,static:a=!1,future:o}=e;O0()&&Ln(!1);let c=t.replace(/^\/*/,"/"),u=w.useMemo(()=>({basename:c,navigator:s,static:a,future:Tg({v7_relativeSplatPath:!1},o)}),[c,o,s,a]);typeof r=="string"&&(r=Kh(r));let{pathname:d="/",search:f="",hash:h="",state:p=null,key:m="default"}=r,g=w.useMemo(()=>{let v=mh(d,c);return v==null?null:{location:{pathname:v,search:f,hash:h,state:p,key:m},navigationType:i}},[c,d,f,h,p,m,i]);return g==null?null:w.createElement(Wc.Provider,{value:u},w.createElement(Kw.Provider,{children:n,value:g}))}function Lue(e){let{children:t,location:n}=e;return wue(sC(t),n)}new Promise(()=>{});function sC(e,t){t===void 0&&(t=[]);let n=[];return w.Children.forEach(e,(r,i)=>{if(!w.isValidElement(r))return;let s=[...t,i];if(r.type===w.Fragment){n.push.apply(n,sC(r.props.children,s));return}r.type!==Gi&&Ln(!1),!r.props.index||!r.props.children||Ln(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=sC(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fb(){return fb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fb.apply(this,arguments)}function PH(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Fue(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Bue(e,t){return e.button===0&&(!t||t==="_self")&&!Fue(e)}const $ue=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Uue=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],zue="6";try{window.__reactRouterVersion=zue}catch{}const Hue=w.createContext({isTransitioning:!1}),Vue="startTransition",n4=jw[Vue];function Wue(e){let{basename:t,children:n,future:r,window:i}=e,s=w.useRef();s.current==null&&(s.current=qce({window:i,v5Compat:!0}));let a=s.current,[o,c]=w.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},d=w.useCallback(f=>{u&&n4?n4(()=>c(f)):c(f)},[c,u]);return w.useLayoutEffect(()=>a.listen(d),[a,d]),w.useEffect(()=>Due(r),[r]),w.createElement(Rue,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const que=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Kue=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,IH=w.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=PH(t,$ue),{basename:p}=w.useContext(Wc),m,g=!1;if(typeof u=="string"&&Kue.test(u)&&(m=u,que))try{let b=new URL(window.location.href),S=u.startsWith("//")?new URL(b.protocol+u):new URL(u),E=mh(S.pathname,p);S.origin===b.origin&&E!=null?u=E+S.search+S.hash:g=!0}catch{}let v=vue(u,{relative:i}),y=Xue(u,{replace:a,state:o,target:c,preventScrollReset:d,relative:i,viewTransition:f});function x(b){r&&r(b),b.defaultPrevented||y(b)}return w.createElement("a",fb({},h,{href:m||v,onClick:g||s?r:x,ref:n,target:c}))}),Gue=w.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:a=!1,style:o,to:c,viewTransition:u,children:d}=t,f=PH(t,Uue),h=Gw(c,{relative:f.relative}),p=P0(),m=w.useContext(_H),{navigator:g,basename:v}=w.useContext(Wc),y=m!=null&&Que(h)&&u===!0,x=g.encodeLocation?g.encodeLocation(h).pathname:h.pathname,b=p.pathname,S=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(b=b.toLowerCase(),S=S?S.toLowerCase():null,x=x.toLowerCase()),S&&v&&(S=mh(S,v)||S);const E=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let N=b===x||!a&&b.startsWith(x)&&b.charAt(E)==="/",_=S!=null&&(S===x||!a&&S.startsWith(x)&&S.charAt(x.length)==="/"),k={isActive:N,isPending:_,isTransitioning:y},T=N?r:void 0,A;typeof s=="function"?A=s(k):A=[s,N?"active":null,_?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let j=typeof o=="function"?o(k):o;return w.createElement(IH,fb({},f,{"aria-current":T,className:A,ref:n,style:j,to:c,viewTransition:u}),typeof d=="function"?d(k):d)});var aC;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(aC||(aC={}));var r4;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(r4||(r4={}));function Yue(e){let t=w.useContext(qw);return t||Ln(!1),t}function Xue(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}=t===void 0?{}:t,c=TH(),u=P0(),d=Gw(e,{relative:a});return w.useCallback(f=>{if(Bue(f,n)){f.preventDefault();let h=r!==void 0?r:db(u)===db(d);c(e,{replace:h,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[u,c,d,r,i,n,e,s,a,o])}function Que(e,t){t===void 0&&(t={});let n=w.useContext(Hue);n==null&&Ln(!1);let{basename:r}=Yue(aC.useViewTransitionState),i=Gw(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=mh(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=mh(n.nextLocation.pathname,r)||n.nextLocation.pathname;return iC(i.pathname,a)!=null||iC(i.pathname,s)!=null}const Jue="modulepreload",Zue=function(e){return"/"+e},i4={},I0=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=Zue(c),c in i4)return;i4[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Jue,u||(f.as="script"),f.crossOrigin="",f.href=c,o&&f.setAttribute("nonce",o),document.head.appendChild(f),u)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})},ede=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>I0(async()=>{const{default:r}=await Promise.resolve().then(()=>Gh);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class rO extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class tde extends rO{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class s4 extends rO{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class a4 extends rO{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var oC;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(oC||(oC={}));var nde=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):i(d.value).then(o,c)}u((r=r.apply(e,t||[])).next())})};class rde{constructor(t,{headers:n={},customFetch:r,region:i=oC.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=ede(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return nde(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:a}=n;let o={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(o["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(o["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(o["Content-Type"]="application/json",d=JSON.stringify(a)));const f=yield this.fetch(u.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:d}).catch(g=>{throw new tde(g)}),h=f.headers.get("x-relay-error");if(h&&h==="true")throw new s4(f);if(!f.ok)throw new a4(f);let p=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),m;return p==="application/json"?m=yield f.json():p==="application/octet-stream"?m=yield f.blob():p==="text/event-stream"?m=f:p==="multipart/form-data"?m=yield f.formData():m=yield f.text(),{data:m,error:null,response:f}}catch(i){return{data:null,error:i,response:i instanceof a4||i instanceof s4?i.context:void 0}}})}}var Di={},iO={},Yw={},D0={},Xw={},Qw={},ide=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},gh=ide();const sde=gh.fetch,DH=gh.fetch.bind(gh),MH=gh.Headers,ade=gh.Request,ode=gh.Response,Gh=Object.freeze(Object.defineProperty({__proto__:null,Headers:MH,Request:ade,Response:ode,default:DH,fetch:sde},Symbol.toStringTag,{value:"Module"})),lde=boe(Gh);var Jw={};Object.defineProperty(Jw,"__esModule",{value:!0});let cde=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Jw.default=cde;var RH=ii&&ii.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qw,"__esModule",{value:!0});const ude=RH(lde),dde=RH(Jw);let fde=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=ude.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,o,c,u;let d=null,f=null,h=null,p=s.status,m=s.statusText;if(s.ok){if(this.method!=="HEAD"){const x=await s.text();x===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?f=x:f=JSON.parse(x))}const v=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(c=s.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");v&&y&&y.length>1&&(h=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,h=null,p=406,m="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const v=await s.text();try{d=JSON.parse(v),Array.isArray(d)&&s.status===404&&(f=[],d=null,p=200,m="OK")}catch{s.status===404&&v===""?(p=204,m="No Content"):d={message:v}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,p=200,m="OK"),d&&this.shouldThrowOnError)throw new dde.default(d)}return{error:d,data:f,count:h,status:p,statusText:m}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,o,c;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(o=s==null?void 0:s.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=s==null?void 0:s.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,n)}returns(){return this}overrideTypes(){return this}};Qw.default=fde;var hde=ii&&ii.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xw,"__esModule",{value:!0});const pde=hde(Qw);let mde=class extends pde.default{select(t){let n=!1;const r=(t??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const a=s?`${s}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(a,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){var o;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Xw.default=mde;var gde=ii&&ii.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(D0,"__esModule",{value:!0});const vde=gde(Xw);let yde=class extends vde.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${a}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};D0.default=yde;var xde=ii&&ii.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yw,"__esModule",{value:!0});const Lp=xde(D0);let bde=class{constructor(t,{headers:n={},schema:r,fetch:i}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=i}select(t,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const a=(t??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new Lp.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var i;const s="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(a.length>0){const o=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new Lp.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){var a;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Lp.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(t,{count:n}={}){var r;const i="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new Lp.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Lp.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Yw.default=bde;var LH=ii&&ii.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(iO,"__esModule",{value:!0});const wde=LH(Yw),Ede=LH(D0);let Sde=class FH{constructor(t,{headers:n={},schema:r,fetch:i}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(t){const n=new URL(`${this.url}/${t}`);return new wde.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new FH(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:i=!1,count:s}={}){var a;let o;const c=new URL(`${this.url}/rpc/${t}`);let u;r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([f,h])=>h!==void 0).map(([f,h])=>[f,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([f,h])=>{c.searchParams.append(f,h)})):(o="POST",u=n);const d=new Headers(this.headers);return s&&d.set("Prefer",`count=${s}`),new Ede.default({method:o,url:c,headers:d,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};iO.default=Sde;var Yh=ii&&ii.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Di,"__esModule",{value:!0});Di.PostgrestError=Di.PostgrestBuilder=Di.PostgrestTransformBuilder=Di.PostgrestFilterBuilder=Di.PostgrestQueryBuilder=Di.PostgrestClient=void 0;const BH=Yh(iO);Di.PostgrestClient=BH.default;const $H=Yh(Yw);Di.PostgrestQueryBuilder=$H.default;const UH=Yh(D0);Di.PostgrestFilterBuilder=UH.default;const zH=Yh(Xw);Di.PostgrestTransformBuilder=zH.default;const HH=Yh(Qw);Di.PostgrestBuilder=HH.default;const VH=Yh(Jw);Di.PostgrestError=VH.default;var Nde=Di.default={PostgrestClient:BH.default,PostgrestQueryBuilder:$H.default,PostgrestFilterBuilder:UH.default,PostgrestTransformBuilder:zH.default,PostgrestBuilder:HH.default,PostgrestError:VH.default};const{PostgrestClient:_de,PostgrestQueryBuilder:ict,PostgrestFilterBuilder:sct,PostgrestTransformBuilder:act,PostgrestBuilder:oct,PostgrestError:lct}=Nde;class kde{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Cde="2.15.1",Tde=`realtime-js/${Cde}`,Ade="1.0.0",lC=1e4,jde=1e3,Ode=100;var Om;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Om||(Om={}));var rr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(rr||(rr={}));var pa;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(pa||(pa={}));var cC;(function(e){e.websocket="websocket"})(cC||(cC={}));var Tu;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Tu||(Tu={}));class Pde{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(t.slice(a,a+i));a=a+i;const c=r.decode(t.slice(a,a+s));a=a+s;const u=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:o,event:c,payload:u}}}class WH{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Gt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Gt||(Gt={}));const o4=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((s,a)=>(s[a]=Ide(a,e,t,i),s),{})},Ide=(e,t,n,r)=>{const i=t.find(o=>o.name===e),s=i==null?void 0:i.type,a=n[e];return s&&!r.includes(s)?qH(s,a):uC(a)},qH=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Lde(t,n)}switch(e){case Gt.bool:return Dde(t);case Gt.float4:case Gt.float8:case Gt.int2:case Gt.int4:case Gt.int8:case Gt.numeric:case Gt.oid:return Mde(t);case Gt.json:case Gt.jsonb:return Rde(t);case Gt.timestamp:return Fde(t);case Gt.abstime:case Gt.date:case Gt.daterange:case Gt.int4range:case Gt.int8range:case Gt.money:case Gt.reltime:case Gt.text:case Gt.time:case Gt.timestamptz:case Gt.timetz:case Gt.tsrange:case Gt.tstzrange:return uC(t);default:return uC(t)}},uC=e=>e,Dde=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Mde=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Rde=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Lde=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const a=e.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>qH(t,o))}return e},Fde=e=>typeof e=="string"?e.replace(" ","T"):e,KH=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class HN{constructor(t,n,r={},i=lC){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var l4;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(l4||(l4={}));class Pm{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Pm.syncState(this.state,i,s,a),this.pendingDiffs.forEach(c=>{this.state=Pm.syncDiff(this.state,c,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Pm.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),a=this.transformState(n),o={},c={};return this.map(s,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const f=s[u];if(f){const h=d.map(v=>v.presence_ref),p=f.map(v=>v.presence_ref),m=d.filter(v=>p.indexOf(v.presence_ref)<0),g=f.filter(v=>h.indexOf(v.presence_ref)<0);m.length>0&&(o[u]=m),g.length>0&&(c[u]=g)}else o[u]=d}),this.syncDiff(s,{joins:o,leaves:c},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(o,c)=>{var u;const d=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(c),d.length>0){const f=t[o].map(p=>p.presence_ref),h=d.filter(p=>f.indexOf(p.presence_ref)<0);t[o].unshift(...h)}r(o,d,c)}),this.map(a,(o,c)=>{let u=t[o];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[o]=u,i(o,u,c),u.length===0&&delete t[o]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var c4;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(c4||(c4={}));var Im;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Im||(Im={}));var Io;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Io||(Io={}));class sO{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=rr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new HN(this,pa.join,this.params,this.timeout),this.rejoinTimer=new WH(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=rr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=rr.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=rr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=rr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=rr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pa.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Pm(this),this.broadcastEndpointURL=KH(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==rr.closed){const{config:{broadcast:s,presence:a,private:o}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[Im.PRESENCE]&&this.bindings[Im.PRESENCE].length>0,d={},f={broadcast:s,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(h=>t==null?void 0:t(Io.CHANNEL_ERROR,h)),this._onClose(()=>t==null?void 0:t(Io.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var p;if(this.socket.setAuth(),h===void 0){t==null||t(Io.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,g=(p=m==null?void 0:m.length)!==null&&p!==void 0?p:0,v=[];for(let y=0;y<g;y++){const x=m[y],{filter:{event:b,schema:S,table:E,filter:N}}=x,_=h&&h[y];if(_&&_.event===b&&_.schema===S&&_.table===E&&_.filter===N)v.push(Object.assign(Object.assign({},x),{id:_.id}));else{this.unsubscribe(),this.state=rr.errored,t==null||t(Io.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(Io.SUBSCRIBED);return}}).receive("error",h=>{this.state=rr.errored,t==null||t(Io.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Io.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===rr.joined&&t===Im.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=rr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pa.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new HN(this,pa.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=rr.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new HN(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Ode){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const a=t.toLocaleLowerCase(),{close:o,error:c,leave:u,join:d}=pa;if(r&&[o,c,u,d].indexOf(a)>=0&&r!==this._joinRef())return;let h=this._onMessage(a,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var m,g,v;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((v=(g=p.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===a}).map(p=>p.callback(h,r)):(s=this.bindings[a])===null||s===void 0||s.filter(p=>{var m,g,v,y,x,b;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const S=p.id,E=(m=p.filter)===null||m===void 0?void 0:m.event;return S&&((g=n.ids)===null||g===void 0?void 0:g.includes(S))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const S=(x=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return S==="*"||S===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof h=="object"&&"ids"in h){const m=h.data,{schema:g,table:v,commit_timestamp:y,type:x,errors:b}=m;h=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:y,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(m))}p.callback(h,r)})}_isClosed(){return this.state===rr.closed}_isJoined(){return this.state===rr.joined}_isJoining(){return this.state===rr.joining}_isLeaving(){return this.state===rr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&sO.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(pa.close,{},t)}_onError(t){this._on(pa.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=rr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=o4(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=o4(t.columns,t.old_record)),n}}const u4=()=>{},Jv={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Bde=[1e3,2e3,5e3,1e4],$de=1e4,Ude=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class zde{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=lC,this.transport=null,this.heartbeatIntervalMs=Jv.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=u4,this.ref=0,this.reconnectTimer=null,this.logger=u4,this.conn=null,this.sendBuffer=[],this.serializer=new Pde,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...a)=>I0(async()=>{const{default:o}=await Promise.resolve().then(()=>Gh);return{default:o}},void 0).then(({default:o})=>o(...a)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...a)=>s(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${cC.websocket}`,this.httpEndpoint=KH(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=kde.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ade}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Om.connecting:return Tu.Connecting;case Om.open:return Tu.Open;case Om.closing:return Tu.Closing;default:return Tu.Closed}}isConnected(){return this.connectionState()===Tu.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new sO(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:r,payload:i,ref:s}=t,a=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(jde,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Jv.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:a}=n,o=a?`(${a})`:"",c=s.status||"";this.log("receive",`${c} ${r} ${i} ${o}`.trim(),s),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,s,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(pa.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([Ude],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:Tde};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(pa.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new WH(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Jv.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,s,a,o,c,u;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:lC,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:Jv.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(o=t==null?void 0:t.reconnectAfterMs)!==null&&o!==void 0?o:d=>Bde[d-1]||$de,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(d,f)=>f(JSON.stringify(d)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class aO extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ir(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Hde extends aO{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class dC extends aO{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var Vde=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):i(d.value).then(o,c)}u((r=r.apply(e,t||[])).next())})};const GH=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>I0(async()=>{const{default:r}=await Promise.resolve().then(()=>Gh);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Wde=()=>Vde(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield I0(()=>Promise.resolve().then(()=>Gh),void 0)).Response:Response}),fC=e=>{if(Array.isArray(e))return e.map(n=>fC(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=fC(r)}),t},qde=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Ld=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):i(d.value).then(o,c)}u((r=r.apply(e,t||[])).next())})};const VN=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Kde=(e,t,n)=>Ld(void 0,void 0,void 0,function*(){const r=yield Wde();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const s=e.status||500,a=(i==null?void 0:i.statusCode)||s+"";t(new Hde(VN(i),s,a))}).catch(i=>{t(new dC(VN(i),i))}):t(new dC(VN(e),e))}),Gde=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?i:(qde(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function M0(e,t,n,r,i,s){return Ld(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(n,Gde(t,r,i,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>Kde(c,o,r))})})}function hb(e,t,n,r){return Ld(this,void 0,void 0,function*(){return M0(e,"GET",t,n,r)})}function za(e,t,n,r,i){return Ld(this,void 0,void 0,function*(){return M0(e,"POST",t,r,i,n)})}function hC(e,t,n,r,i){return Ld(this,void 0,void 0,function*(){return M0(e,"PUT",t,r,i,n)})}function Yde(e,t,n,r){return Ld(this,void 0,void 0,function*(){return M0(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function YH(e,t,n,r,i){return Ld(this,void 0,void 0,function*(){return M0(e,"DELETE",t,r,i,n)})}var hi=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):i(d.value).then(o,c)}u((r=r.apply(e,t||[])).next())})};const Xde={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},d4={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Qde{constructor(t,n={},r,i){this.url=t,this.headers=n,this.bucketId=r,this.fetch=GH(i)}uploadOrUpdate(t,n,r,i){return hi(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},d4),i);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(o=Object.assign(Object.assign({},o),i.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),f=yield(t=="PUT"?hC:za)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(s){if(ir(s))return{data:null,error:s};throw s}})}upload(t,n,r){return hi(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return hi(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:d4.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield hC(this.fetch,o.toString(),c,{headers:d});return{data:{path:s,fullPath:f.Key},error:null}}catch(c){if(ir(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return hi(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield za(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),o=a.searchParams.get("token");if(!o)throw new aO("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:o},error:null}}catch(r){if(ir(r))return{data:null,error:r};throw r}})}update(t,n,r){return hi(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return hi(this,void 0,void 0,function*(){try{return{data:yield za(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(ir(i))return{data:null,error:i};throw i}})}copy(t,n,r){return hi(this,void 0,void 0,function*(){try{return{data:{path:(yield za(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(ir(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return hi(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield za(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(ir(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return hi(this,void 0,void 0,function*(){try{const i=yield za(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(ir(i))return{data:null,error:i};throw i}})}download(t,n){return hi(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=s?`?${s}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield hb(this.fetch,`${this.url}/${i}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(ir(o))return{data:null,error:o};throw o}})}info(t){return hi(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield hb(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:fC(r),error:null}}catch(r){if(ir(r))return{data:null,error:r};throw r}})}exists(t){return hi(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield Yde(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(ir(r)&&r instanceof dC){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const o=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&i.push(c);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${u}`)}}}remove(t){return hi(this,void 0,void 0,function*(){try{return{data:yield YH(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(ir(n))return{data:null,error:n};throw n}})}list(t,n,r){return hi(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Xde),n),{prefix:t||""});return{data:yield za(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(ir(i))return{data:null,error:i};throw i}})}listV2(t,n){return hi(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield za(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(ir(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const Jde="2.11.0",Zde={"X-Client-Info":`storage-js/${Jde}`};var Gd=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):i(d.value).then(o,c)}u((r=r.apply(e,t||[])).next())})};class efe{constructor(t,n={},r,i){const s=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},Zde),n),this.fetch=GH(r)}listBuckets(){return Gd(this,void 0,void 0,function*(){try{return{data:yield hb(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(ir(t))return{data:null,error:t};throw t}})}getBucket(t){return Gd(this,void 0,void 0,function*(){try{return{data:yield hb(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(ir(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Gd(this,void 0,void 0,function*(){try{return{data:yield za(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ir(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Gd(this,void 0,void 0,function*(){try{return{data:yield hC(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ir(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Gd(this,void 0,void 0,function*(){try{return{data:yield za(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(ir(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Gd(this,void 0,void 0,function*(){try{return{data:yield YH(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(ir(n))return{data:null,error:n};throw n}})}}class tfe extends efe{constructor(t,n={},r,i){super(t,n,r,i)}from(t){return new Qde(this.url,this.headers,t,this.fetch)}}const nfe="2.56.0";let fm="";typeof Deno<"u"?fm="deno":typeof document<"u"?fm="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fm="react-native":fm="node";const rfe={"X-Client-Info":`supabase-js-${fm}/${nfe}`},ife={headers:rfe},sfe={schema:"public"},afe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ofe={};var lfe=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):i(d.value).then(o,c)}u((r=r.apply(e,t||[])).next())})};const cfe=e=>{let t;return e?t=e:typeof fetch>"u"?t=DH:t=fetch,(...n)=>t(...n)},ufe=()=>typeof Headers>"u"?MH:Headers,dfe=(e,t,n)=>{const r=cfe(n),i=ufe();return(s,a)=>lfe(void 0,void 0,void 0,function*(){var o;const c=(o=yield t())!==null&&o!==void 0?o:e;let u=new i(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},a),{headers:u}))})};var ffe=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):i(d.value).then(o,c)}u((r=r.apply(e,t||[])).next())})};function hfe(e){return e.endsWith("/")?e:e+"/"}function pfe(e,t){var n,r;const{db:i,auth:s,realtime:a,global:o}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},f),o),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>ffe(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const XH="2.71.1",ff=30*1e3,pC=3,WN=pC*ff,mfe="http://localhost:9999",gfe="supabase.auth.token",vfe={"X-Client-Info":`gotrue-js/${XH}`},mC="X-Supabase-Api-Version",QH={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yfe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,xfe=10*60*1e3;class oO extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function it(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class bfe extends oO{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function wfe(e){return it(e)&&e.name==="AuthApiError"}class JH extends oO{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Kc extends oO{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class Pl extends Kc{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Efe(e){return it(e)&&e.name==="AuthSessionMissingError"}class Zv extends Kc{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ey extends Kc{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ty extends Kc{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Sfe(e){return it(e)&&e.name==="AuthImplicitGrantRedirectError"}class f4 extends Kc{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class gC extends Kc{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function qN(e){return it(e)&&e.name==="AuthRetryableFetchError"}class h4 extends Kc{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class vC extends Kc{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const pb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),p4=` 	
\r=`.split(""),Nfe=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<p4.length;t+=1)e[p4[t].charCodeAt(0)]=-2;for(let t=0;t<pb.length;t+=1)e[pb[t].charCodeAt(0)]=t;return e})();function m4(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(pb[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(pb[r]),t.queuedBits-=6}}function ZH(e,t,n){const r=Nfe[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function g4(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{Cfe(a,r,n)};for(let a=0;a<e.length;a+=1)ZH(e.charCodeAt(a),i,s);return t.join("")}function _fe(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function kfe(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}_fe(r,t)}}function Cfe(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Tfe(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)ZH(e.charCodeAt(i),n,r);return new Uint8Array(t)}function Afe(e){const t=[];return kfe(e,n=>t.push(n)),new Uint8Array(t)}function jfe(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>m4(i,n,r)),m4(null,n,r),t.join("")}function Ofe(e){return Math.round(Date.now()/1e3)+e}function Pfe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ca=()=>typeof window<"u"&&typeof document<"u",fu={tested:!1,writable:!1},eV=()=>{if(!ca())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fu.tested)return fu.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),fu.tested=!0,fu.writable=!0}catch{fu.tested=!0,fu.writable=!1}return fu.writable};function Ife(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const tV=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>I0(async()=>{const{default:r}=await Promise.resolve().then(()=>Gh);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Dfe=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",hf=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},hu=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},_l=async(e,t)=>{await e.removeItem(t)};class Zw{constructor(){this.promise=new Zw.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Zw.promiseConstructor=Promise;function KN(e){const t=e.split(".");if(t.length!==3)throw new vC("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!yfe.test(t[r]))throw new vC("JWT not in base64url format");return{header:JSON.parse(g4(t[0])),payload:JSON.parse(g4(t[1])),signature:Tfe(t[2]),raw:{header:t[0],payload:t[1]}}}async function Mfe(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Rfe(e,t){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await e(s);if(!t(s,null,a)){r(a);return}}catch(a){if(!t(s,a)){i(a);return}}})()})}function Lfe(e){return("0"+e.toString(16)).substr(-2)}function Ffe(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,Lfe).join("")}async function Bfe(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function $fe(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await Bfe(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Yd(e,t,n=!1){const r=Ffe();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await hf(e,`${t}-code-verifier`,i);const s=await $fe(r);return[s,r===s?"plain":"s256"]}const Ufe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function zfe(e){const t=e.headers.get(mC);if(!t||!t.match(Ufe))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Hfe(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Vfe(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Wfe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Xd(e){if(!Wfe.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function GN(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function v4(e){return JSON.parse(JSON.stringify(e))}var qfe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const wu=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Kfe=[502,503,504];async function y4(e){var t;if(!Dfe(e))throw new gC(wu(e),0);if(Kfe.includes(e.status))throw new gC(wu(e),e.status);let n;try{n=await e.json()}catch(s){throw new JH(wu(s),s)}let r;const i=zfe(e);if(i&&i.getTime()>=QH["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new h4(wu(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Pl}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new h4(wu(n),e.status,n.weak_password.reasons);throw new bfe(wu(n),e.status||500,r)}const Gfe=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function dt(e,t,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[mC]||(s[mC]=QH["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await Yfe(e,t,n+o,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function Yfe(e,t,n,r,i,s){const a=Gfe(t,r,i,s);let o;try{o=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new gC(wu(c),0)}if(o.ok||await y4(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(c){await y4(c)}}function Ao(e){var t;let n=null;Zfe(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Ofe(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function x4(e){const t=Ao(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ql(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Xfe(e){return{data:e,error:null}}function Qfe(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,a=qfe(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},c=Object.assign({},a);return{data:{properties:o,user:c},error:null}}function Jfe(e){return e}function Zfe(e){return e.access_token&&e.refresh_token&&e.expires_in}const YN=["global","local","others"];var ehe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class the{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=tV(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=YN[0]){if(YN.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${YN.join(", ")}`);try{return await dt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await dt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ql})}catch(r){if(it(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=ehe(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await dt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Qfe,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(it(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await dt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ql})}catch(n){if(it(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,s,a,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await dt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Jfe});if(d.error)throw d.error;const f=await d.json(),h=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(m.split(";")[1].split("=")[1]);u[`${v}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(it(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Xd(t);try{return await dt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ql})}catch(n){if(it(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Xd(t);try{return await dt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:ql})}catch(r){if(it(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Xd(t);try{return await dt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:ql})}catch(r){if(it(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Xd(t.userId);try{const{data:n,error:r}=await dt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(it(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Xd(t.userId),Xd(t.id);try{return{data:await dt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(it(n))return{data:null,error:n};throw n}}}function b4(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function nhe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Qd={debug:!!(globalThis&&eV()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class nV extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class rhe extends nV{}async function ihe(e,t,n){Qd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Qd.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Qd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Qd.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Qd.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new rhe(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Qd.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}nhe();const she={url:mfe,storageKey:gfe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vfe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function w4(e,t,n){return await n()}const Jd={};class Ag{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ag.nextInstanceID,Ag.nextInstanceID+=1,this.instanceID>0&&ca()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},she),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new the({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=tV(i.fetch),this.lock=i.lock||w4,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:ca()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=ihe:this.lock=w4,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:eV()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=b4(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=b4(this.memoryStorage)),ca()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=Jd[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Jd[this.storageKey]=Object.assign(Object.assign({},Jd[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Jd[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Jd[this.storageKey]=Object.assign(Object.assign({},Jd[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${XH}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=Ife(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),ca()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Sfe(s)){const c=(t=s.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return it(n)?{error:n}:{error:new JH("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const s=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ao}),{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(it(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,r,i;try{let s;if("email"in t){const{email:d,password:f,options:h}=t;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Yd(this.storage,this.storageKey)),s=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:m},xform:Ao})}else if("phone"in t){const{phone:d,password:f,options:h}=t;s=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Ao})}else throw new ey("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(it(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:a,options:o}=t;n=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:x4})}else if("phone"in t){const{phone:s,password:a,options:o}=t;n=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:x4})}else throw new ey("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Zv}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(it(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,i,s,a,o,c,u,d,f,h,p;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:v,wallet:y,statement:x,options:b}=t;let S;if(ca())if(typeof y=="object")S=y;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))S=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=y}const E=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const N=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),x?{statement:x}:null));let _;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")_=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)_=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)m=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),g=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${E.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(i=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=b==null?void 0:b.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const N=await S.signMessage(new TextEncoder().encode(m),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=N}}try{const{data:v,error:y}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:jfe(g)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ao});if(y)throw y;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Zv}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:y})}catch(v){if(it(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(t){const n=await hu(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:a}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Ao});if(await _l(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Zv}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(it(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=t,o=await dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ao}),{data:c,error:u}=o;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Zv}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(it(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,s,a;try{if("email"in t){const{email:o,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Yd(this.storage,this.storageKey));const{error:f}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:o,options:c}=t,{data:u,error:d}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new ey("You must provide either an email or phone number.")}catch(o){if(it(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var n,r;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await dt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Ao});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(it(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await Yd(this.storage,this.storageKey)),await dt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:Xfe})}catch(s){if(it(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Pl;const{error:i}=await dt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(it(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:s}=t,{error:a}=await dt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:i,options:s}=t,{data:a,error:o}=await dt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new ey("You must provide either an email or phone number and a type")}catch(n){if(it(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await hu(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<WN:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await hu(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=GN()}if(this.storage.isServer&&t.user){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ql}):await this._useSession(async n=>{var r,i,s;const{data:a,error:o}=n;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pl}:await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:ql})})}catch(n){if(it(n))return Efe(n)&&(await this._removeSession(),await _l(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Pl;const a=i.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await Yd(this.storage,this.storageKey));const{data:u,error:d}=await dt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:a.access_token,xform:ql});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(it(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Pl;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:a}=KN(t.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;s={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(it(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:o}=n;if(o)throw o;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Pl;const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(it(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!ca())throw new ty("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ty(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new f4("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ty("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new f4("No code detected.");const{data:x,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:o,expires_at:c,token_type:u}=t;if(!s||!o||!a||!u)throw new ty("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let h=d+f;c&&(h=parseInt(c));const p=h-d;p*1e3<=ff&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const m=h-f;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,h,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,h,d);const{data:g,error:v}=await this._getUser(s);if(v)throw v;const y={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:f,expires_at:h,refresh_token:a,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(r){if(it(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await hu(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,t);if(o&&!(wfe(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await _l(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=Pfe(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Yd(this.storage,this.storageKey,!0));try{return await dt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(it(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(it(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,o,c,u,d;const{data:f,error:h}=s;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await dt(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return ca()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(it(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await dt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(it(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Rfe(async i=>(i>0&&await Mfe(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await dt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ao})),(i,s)=>{const a=200*Math.pow(2,i);return s&&qN(s)&&Date.now()+a-r<ff})}catch(r){if(this._debug(n,"error",r),it(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),ca()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await hu(this.storage,this.storageKey);if(i&&this.userStorage){let a=await hu(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await hf(this.userStorage,this.storageKey+"-user",a)),i.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:GN()}else if(i&&!i.user&&!i.user){const a=await hu(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await _l(this.storage,this.storageKey+"-user"),await hf(this.storage,this.storageKey,i)):i.user=GN()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<WN;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${WN}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),qN(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(i.access_token);!o&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Pl;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Zw;const{data:s,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!s.session)throw new Pl;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={session:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(i,"error",s),it(s)){const a={session:null,error:s};return qN(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,n)}catch(c){s.push(c)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await hf(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=v4(i);await hf(this.storage,this.storageKey,s)}else{const i=v4(n);await hf(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await _l(this.storage,this.storageKey),await _l(this.storage,this.storageKey+"-code-verifier"),await _l(this.storage,this.storageKey+"-user"),this.userStorage&&await _l(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ca()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ff);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/ff);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ff}ms, refresh threshold is ${pC} ticks`),i<=pC&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof nV)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ca()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await Yd(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(o.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await dt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(it(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await dt(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(it(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:a,error:o}=await dt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(n){if(it(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await dt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(it(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],i=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),s=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:s}=t;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=KN(i.access_token);let o=null;a.aal&&(o=a.aal);let c=o;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(o=>o.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(o=>o.kid===t),r&&this.jwks_cached_at+xfe>i)return r;const{data:s,error:a}=await dt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(o=>o.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:p,error:m}=await this.getSession();if(m||!p.session)return{data:null,error:m};r=p.session.access_token}const{header:i,payload:s,signature:a,raw:{header:o,payload:c}}=KN(r);n!=null&&n.allowExpired||Hfe(s.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:s,header:i,signature:a},error:null}}const d=Vfe(i.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,a,Afe(`${o}.${c}`)))throw new vC("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}}}Ag.nextInstanceID=0;const ahe=Ag;class ohe extends ahe{constructor(t){super(t)}}var lhe=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):i(d.value).then(o,c)}u((r=r.apply(e,t||[])).next())})};class che{constructor(t,n,r){var i,s,a;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const o=hfe(t),c=new URL(o);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:sfe,realtime:ofe,auth:Object.assign(Object.assign({},afe),{storageKey:u}),global:ife},f=pfe(r??{},d);this.storageKey=(i=f.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=f.global.headers)!==null&&s!==void 0?s:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=f.auth)!==null&&a!==void 0?a:{},this.headers,f.global.fetch),this.fetch=dfe(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new _de(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new tfe(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new rde(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return lhe(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:a,lock:o,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ohe({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,flowType:a,lock:o,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new zde(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const uhe=(e,t,n)=>new che(e,t,n);function dhe(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}dhe()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const fhe="https://eloldmdciulxzwsnlvci.supabase.co",hhe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVsb2xkbWRjaXVseHp3c25sdmNpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUwMDkxMDYsImV4cCI6MjA2MDU4NTEwNn0.gh9vAFWK_kmkpYYC5NOgi4rs4lSQY7KhMs6UqPuX5nI",ie=uhe(fhe,hhe);function jr(){const[e,t]=w.useState(null),[n,r]=w.useState(null),[i,s]=w.useState(!0);return w.useEffect(()=>{ie.auth.getSession().then(({data:{session:m}})=>{r(m),t((m==null?void 0:m.user)??null),s(!1)});const{data:{subscription:p}}=ie.auth.onAuthStateChange((m,g)=>{r(g),t((g==null?void 0:g.user)??null),s(!1)});return()=>p.unsubscribe()},[]),{user:e,session:n,loading:i,signUp:async(p,m)=>{const{data:g,error:v}=await ie.auth.signUp({email:p,password:m});return{data:g,error:v}},signIn:async(p,m)=>{const{data:g,error:v}=await ie.auth.signInWithPassword({email:p,password:m});return{data:g,error:v}},signOut:async()=>{const{error:p}=await ie.auth.signOut();return{error:p}},resetPassword:async p=>{try{const{error:m}=await ie.auth.resetPasswordForEmail(p,{redirectTo:`${window.location.origin}/reset-password`});if(m)throw m;return{error:null}}catch(m){return{error:m}}},updatePassword:async p=>{try{const{error:m}=await ie.auth.updateUser({password:p});if(m)throw m;return{error:null}}catch(m){return{error:m}}},getUserProfile:async()=>{if(!e)return null;try{const{data:p,error:m}=await ie.from("user_profiles").select("*").eq("id",e.id).single();if(m&&m.code!=="PGRST116")throw m;return p}catch(p){return console.error("Error fetching user profile:",p),null}},updateUserProfile:async p=>{if(!e)return{error:new Error("No user logged in")};try{const{data:m,error:g}=await ie.from("user_profiles").upsert({id:e.id,...p}).select().single();if(g)throw g;return{data:m,error:null}}catch(m){return{data:null,error:m}}}}}const rV=w.createContext(void 0),Xh=()=>{const e=w.useContext(rV);if(e===void 0)throw new Error("useModalContext must be used within a ModalProvider");return e},phe=({children:e})=>{const[t,n]=w.useState(!1),[r,i]=w.useState(!1);return l.jsx(rV.Provider,{value:{expenseModalOpen:t,setExpenseModalOpen:n,searchModalOpen:r,setSearchModalOpen:i},children:e})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mhe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ghe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ge=(e,t)=>{const n=w.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:c,...u},d)=>w.createElement("svg",{ref:d,...mhe,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${ghe(e)}`,o].join(" "),...u},[...t.map(([f,h])=>w.createElement(f,h)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=ge("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=ge("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=ge("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vhe=ge("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yhe=ge("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xhe=ge("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iV=ge("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=ge("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=ge("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=ge("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=ge("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bhe=ge("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=ge("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const whe=ge("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ehe=ge("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=ge("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=ge("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=ge("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=ge("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=ge("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=ge("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=ge("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const She=ge("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=ge("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nhe=ge("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sV=ge("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=ge("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _he=ge("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=ge("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aV=ge("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=ge("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=ge("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const khe=ge("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=ge("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=ge("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=ge("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=ge("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=ge("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=ge("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=ge("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=ge("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=ge("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Che=ge("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const The=ge("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=ge("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=ge("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=ge("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=ge("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=ge("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=ge("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=ge("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ahe=ge("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jhe=ge("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ohe=ge("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Phe=ge("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ihe=ge("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dhe=ge("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mhe=ge("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rhe=ge("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=ge("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=ge("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lhe=ge("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=ge("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fhe=ge("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bhe=ge("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $he=ge("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=ge("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=ge("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uhe=ge("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zhe=ge("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hhe=ge("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vhe=ge("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Whe=ge("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qhe=ge("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Khe=ge("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=ge("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=ge("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ghe=ge("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oV=ge("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=ge("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=ge("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lV=ge("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yhe=ge("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=ge("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=ge("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xhe=ge("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=ge("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cV=ge("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=ge("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qhe=ge("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=ge("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jhe=ge("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=ge("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=ge("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=ge("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=ge("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=ge("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=ge("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=ge("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=ge("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=ge("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zhe=ge("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const epe=ge("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=ge("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=ge("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=ge("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=ge("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=ge("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=ge("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=ge("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tpe=ge("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const npe=ge("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uV=ge("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=ge("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rpe=ge("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ipe=ge("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=ge("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=ge("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dV=ge("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=ge("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=ge("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function spe({isDarkMode:e}){const[t,n]=w.useState(!1),[r,i]=w.useState(""),[s,a]=w.useState(""),[o,c]=w.useState(!1),[u,d]=w.useState(null),{signIn:f,signUp:h}=jr(),p=async m=>{m.preventDefault(),c(!0),d(null);try{const{error:g}=t?await h(r,s):await f(r,s);g&&d(g.message)}catch{d("An unexpected error occurred")}finally{c(!1)}};return l.jsx("div",{className:`min-h-screen flex items-center justify-center transition-colors duration-200 ${e?"bg-slate-900":"bg-slate-50"}`,children:l.jsxs("div",{className:`max-w-md w-full mx-4 p-8 rounded-xl shadow-lg border transition-colors duration-200 ${e?"bg-slate-800 border-slate-700":"bg-white border-slate-200"}`,children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:`inline-flex p-3 rounded-full mb-4 ${e?"bg-blue-900":"bg-blue-100"}`,children:l.jsx(gt,{className:`w-8 h-8 ${e?"text-blue-400":"text-blue-600"}`})}),l.jsx("h1",{className:`text-2xl font-bold ${e?"text-white":"text-slate-900"}`,children:"Consultant Dashboard"}),l.jsx("p",{className:`text-sm mt-2 ${e?"text-slate-400":"text-slate-600"}`,children:t?"Create your account":"Sign in to your account"})]}),l.jsxs("form",{onSubmit:p,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-slate-300":"text-slate-700"}`,children:"Email"}),l.jsx("input",{type:"email",value:r,onChange:m=>i(m.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 ${e?"bg-slate-700 border-slate-600 text-white placeholder-slate-400":"bg-white border-slate-300 text-slate-900 placeholder-slate-500"}`,placeholder:"Enter your email",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-slate-300":"text-slate-700"}`,children:"Password"}),l.jsx("input",{type:"password",value:s,onChange:m=>a(m.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 ${e?"bg-slate-700 border-slate-600 text-white placeholder-slate-400":"bg-white border-slate-300 text-slate-900 placeholder-slate-500"}`,placeholder:"Enter your password",required:!0,minLength:6})]}),u&&l.jsx("div",{className:"p-3 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm",children:u}),l.jsx("button",{type:"submit",disabled:o,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2.5 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:o?l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):l.jsxs(l.Fragment,{children:[t?l.jsx(ipe,{className:"w-4 h-4"}):l.jsx(Uhe,{className:"w-4 h-4"}),t?"Sign Up":"Sign In"]})})]}),l.jsx("div",{className:"mt-6 text-center",children:l.jsx("button",{onClick:()=>n(!t),className:`text-sm transition-colors duration-200 ${e?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"}`,children:t?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})})}function fV(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=fV(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function bt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=fV(e))&&(r&&(r+=" "),r+=t);return r}const NO="-",ape=e=>{const t=lpe(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:a=>{const o=a.split(NO);return o[0]===""&&o.length!==1&&o.shift(),hV(o,t)||ope(a)},getConflictingClassGroupIds:(a,o)=>{const c=n[a]||[];return o&&r[a]?[...c,...r[a]]:c}}},hV=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?hV(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const s=e.join(NO);return(a=t.validators.find(({validator:o})=>o(s)))==null?void 0:a.classGroupId},O4=/^\[(.+)\]$/,ope=e=>{if(O4.test(e)){const t=O4.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},lpe=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const i in n)wC(n[i],r,i,t);return r},wC=(e,t,n,r)=>{e.forEach(i=>{if(typeof i=="string"){const s=i===""?t:P4(t,i);s.classGroupId=n;return}if(typeof i=="function"){if(cpe(i)){wC(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,a])=>{wC(a,P4(t,s),n,r)})})},P4=(e,t)=>{let n=e;return t.split(NO).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},cpe=e=>e.isThemeGetter,upe=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(s,a)=>{n.set(s,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let a=n.get(s);if(a!==void 0)return a;if((a=r.get(s))!==void 0)return i(s,a),a},set(s,a){n.has(s)?n.set(s,a):i(s,a)}}},EC="!",SC=":",dpe=SC.length,fpe=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=i=>{const s=[];let a=0,o=0,c=0,u;for(let m=0;m<i.length;m++){let g=i[m];if(a===0&&o===0){if(g===SC){s.push(i.slice(c,m)),c=m+dpe;continue}if(g==="/"){u=m;continue}}g==="["?a++:g==="]"?a--:g==="("?o++:g===")"&&o--}const d=s.length===0?i:i.substring(c),f=hpe(d),h=f!==d,p=u&&u>c?u-c:void 0;return{modifiers:s,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}};if(t){const i=t+SC,s=r;r=a=>a.startsWith(i)?s(a.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},hpe=e=>e.endsWith(EC)?e.substring(0,e.length-1):e.startsWith(EC)?e.substring(1):e,ppe=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let s=[];return r.forEach(a=>{a[0]==="["||t[a]?(i.push(...s.sort(),a),s=[]):s.push(a)}),i.push(...s.sort()),i}},mpe=e=>({cache:upe(e.cacheSize),parseClassName:fpe(e),sortModifiers:ppe(e),...ape(e)}),gpe=/\s+/,vpe=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=t,a=[],o=e.trim().split(gpe);let c="";for(let u=o.length-1;u>=0;u-=1){const d=o[u],{isExternal:f,modifiers:h,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}=n(d);if(f){c=d+(c.length>0?" "+c:c);continue}let v=!!g,y=r(v?m.substring(0,g):m);if(!y){if(!v){c=d+(c.length>0?" "+c:c);continue}if(y=r(m),!y){c=d+(c.length>0?" "+c:c);continue}v=!1}const x=s(h).join(":"),b=p?x+EC:x,S=b+y;if(a.includes(S))continue;a.push(S);const E=i(y,v);for(let N=0;N<E.length;++N){const _=E[N];a.push(b+_)}c=d+(c.length>0?" "+c:c)}return c};function ype(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=pV(t))&&(r&&(r+=" "),r+=n);return r}const pV=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=pV(e[r]))&&(n&&(n+=" "),n+=t);return n};function xpe(e,...t){let n,r,i,s=a;function a(c){const u=t.reduce((d,f)=>f(d),e());return n=mpe(u),r=n.cache.get,i=n.cache.set,s=o,o(c)}function o(c){const u=r(c);if(u)return u;const d=vpe(c,n);return i(c,d),d}return function(){return s(ype.apply(null,arguments))}}const tr=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},mV=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,gV=/^\((?:(\w[\w-]*):)?(.+)\)$/i,bpe=/^\d+\/\d+$/,wpe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Epe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Spe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Npe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,_pe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Zd=e=>bpe.test(e),lt=e=>!!e&&!Number.isNaN(Number(e)),kl=e=>!!e&&Number.isInteger(Number(e)),JN=e=>e.endsWith("%")&&lt(e.slice(0,-1)),_o=e=>wpe.test(e),kpe=()=>!0,Cpe=e=>Epe.test(e)&&!Spe.test(e),vV=()=>!1,Tpe=e=>Npe.test(e),Ape=e=>_pe.test(e),jpe=e=>!Ue(e)&&!ze(e),Ope=e=>Zh(e,bV,vV),Ue=e=>mV.test(e),pu=e=>Zh(e,wV,Cpe),ZN=e=>Zh(e,Rpe,lt),I4=e=>Zh(e,yV,vV),Ppe=e=>Zh(e,xV,Ape),ny=e=>Zh(e,EV,Tpe),ze=e=>gV.test(e),Fp=e=>ep(e,wV),Ipe=e=>ep(e,Lpe),D4=e=>ep(e,yV),Dpe=e=>ep(e,bV),Mpe=e=>ep(e,xV),ry=e=>ep(e,EV,!0),Zh=(e,t,n)=>{const r=mV.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},ep=(e,t,n=!1)=>{const r=gV.exec(e);return r?r[1]?t(r[1]):n:!1},yV=e=>e==="position"||e==="percentage",xV=e=>e==="image"||e==="url",bV=e=>e==="length"||e==="size"||e==="bg-size",wV=e=>e==="length",Rpe=e=>e==="number",Lpe=e=>e==="family-name",EV=e=>e==="shadow",Fpe=()=>{const e=tr("color"),t=tr("font"),n=tr("text"),r=tr("font-weight"),i=tr("tracking"),s=tr("leading"),a=tr("breakpoint"),o=tr("container"),c=tr("spacing"),u=tr("radius"),d=tr("shadow"),f=tr("inset-shadow"),h=tr("text-shadow"),p=tr("drop-shadow"),m=tr("blur"),g=tr("perspective"),v=tr("aspect"),y=tr("ease"),x=tr("animate"),b=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],E=()=>[...S(),ze,Ue],N=()=>["auto","hidden","clip","visible","scroll"],_=()=>["auto","contain","none"],k=()=>[ze,Ue,c],T=()=>[Zd,"full","auto",...k()],A=()=>[kl,"none","subgrid",ze,Ue],j=()=>["auto",{span:["full",kl,ze,Ue]},kl,ze,Ue],D=()=>[kl,"auto",ze,Ue],I=()=>["auto","min","max","fr",ze,Ue],M=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],L=()=>["start","end","center","stretch","center-safe","end-safe"],P=()=>["auto",...k()],B=()=>[Zd,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...k()],R=()=>[e,ze,Ue],F=()=>[...S(),D4,I4,{position:[ze,Ue]}],O=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Q=()=>["auto","cover","contain",Dpe,Ope,{size:[ze,Ue]}],Y=()=>[JN,Fp,pu],$=()=>["","none","full",u,ze,Ue],ye=()=>["",lt,Fp,pu],Te=()=>["solid","dashed","dotted","double"],U=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>[lt,JN,D4,I4],fe=()=>["","none",m,ze,Ue],oe=()=>["none",lt,ze,Ue],le=()=>["none",lt,ze,Ue],Ee=()=>[lt,ze,Ue],se=()=>[Zd,"full",...k()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[_o],breakpoint:[_o],color:[kpe],container:[_o],"drop-shadow":[_o],ease:["in","out","in-out"],font:[jpe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[_o],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[_o],shadow:[_o],spacing:["px",lt],text:[_o],"text-shadow":[_o],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Zd,Ue,ze,v]}],container:["container"],columns:[{columns:[lt,Ue,ze,o]}],"break-after":[{"break-after":b()}],"break-before":[{"break-before":b()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:E()}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:_()}],"overscroll-x":[{"overscroll-x":_()}],"overscroll-y":[{"overscroll-y":_()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:T()}],"inset-x":[{"inset-x":T()}],"inset-y":[{"inset-y":T()}],start:[{start:T()}],end:[{end:T()}],top:[{top:T()}],right:[{right:T()}],bottom:[{bottom:T()}],left:[{left:T()}],visibility:["visible","invisible","collapse"],z:[{z:[kl,"auto",ze,Ue]}],basis:[{basis:[Zd,"full","auto",o,...k()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[lt,Zd,"auto","initial","none",Ue]}],grow:[{grow:["",lt,ze,Ue]}],shrink:[{shrink:["",lt,ze,Ue]}],order:[{order:[kl,"first","last","none",ze,Ue]}],"grid-cols":[{"grid-cols":A()}],"col-start-end":[{col:j()}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":A()}],"row-start-end":[{row:j()}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":I()}],"auto-rows":[{"auto-rows":I()}],gap:[{gap:k()}],"gap-x":[{"gap-x":k()}],"gap-y":[{"gap-y":k()}],"justify-content":[{justify:[...M(),"normal"]}],"justify-items":[{"justify-items":[...L(),"normal"]}],"justify-self":[{"justify-self":["auto",...L()]}],"align-content":[{content:["normal",...M()]}],"align-items":[{items:[...L(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...L(),{baseline:["","last"]}]}],"place-content":[{"place-content":M()}],"place-items":[{"place-items":[...L(),"baseline"]}],"place-self":[{"place-self":["auto",...L()]}],p:[{p:k()}],px:[{px:k()}],py:[{py:k()}],ps:[{ps:k()}],pe:[{pe:k()}],pt:[{pt:k()}],pr:[{pr:k()}],pb:[{pb:k()}],pl:[{pl:k()}],m:[{m:P()}],mx:[{mx:P()}],my:[{my:P()}],ms:[{ms:P()}],me:[{me:P()}],mt:[{mt:P()}],mr:[{mr:P()}],mb:[{mb:P()}],ml:[{ml:P()}],"space-x":[{"space-x":k()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":k()}],"space-y-reverse":["space-y-reverse"],size:[{size:B()}],w:[{w:[o,"screen",...B()]}],"min-w":[{"min-w":[o,"screen","none",...B()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...B()]}],h:[{h:["screen","lh",...B()]}],"min-h":[{"min-h":["screen","lh","none",...B()]}],"max-h":[{"max-h":["screen","lh",...B()]}],"font-size":[{text:["base",n,Fp,pu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ze,ZN]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",JN,Ue]}],"font-family":[{font:[Ipe,Ue,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,ze,Ue]}],"line-clamp":[{"line-clamp":[lt,"none",ze,ZN]}],leading:[{leading:[s,...k()]}],"list-image":[{"list-image":["none",ze,Ue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ze,Ue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:R()}],"text-color":[{text:R()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Te(),"wavy"]}],"text-decoration-thickness":[{decoration:[lt,"from-font","auto",ze,pu]}],"text-decoration-color":[{decoration:R()}],"underline-offset":[{"underline-offset":[lt,"auto",ze,Ue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ze,Ue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ze,Ue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:F()}],"bg-repeat":[{bg:O()}],"bg-size":[{bg:Q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},kl,ze,Ue],radial:["",ze,Ue],conic:[kl,ze,Ue]},Mpe,Ppe]}],"bg-color":[{bg:R()}],"gradient-from-pos":[{from:Y()}],"gradient-via-pos":[{via:Y()}],"gradient-to-pos":[{to:Y()}],"gradient-from":[{from:R()}],"gradient-via":[{via:R()}],"gradient-to":[{to:R()}],rounded:[{rounded:$()}],"rounded-s":[{"rounded-s":$()}],"rounded-e":[{"rounded-e":$()}],"rounded-t":[{"rounded-t":$()}],"rounded-r":[{"rounded-r":$()}],"rounded-b":[{"rounded-b":$()}],"rounded-l":[{"rounded-l":$()}],"rounded-ss":[{"rounded-ss":$()}],"rounded-se":[{"rounded-se":$()}],"rounded-ee":[{"rounded-ee":$()}],"rounded-es":[{"rounded-es":$()}],"rounded-tl":[{"rounded-tl":$()}],"rounded-tr":[{"rounded-tr":$()}],"rounded-br":[{"rounded-br":$()}],"rounded-bl":[{"rounded-bl":$()}],"border-w":[{border:ye()}],"border-w-x":[{"border-x":ye()}],"border-w-y":[{"border-y":ye()}],"border-w-s":[{"border-s":ye()}],"border-w-e":[{"border-e":ye()}],"border-w-t":[{"border-t":ye()}],"border-w-r":[{"border-r":ye()}],"border-w-b":[{"border-b":ye()}],"border-w-l":[{"border-l":ye()}],"divide-x":[{"divide-x":ye()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ye()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Te(),"hidden","none"]}],"divide-style":[{divide:[...Te(),"hidden","none"]}],"border-color":[{border:R()}],"border-color-x":[{"border-x":R()}],"border-color-y":[{"border-y":R()}],"border-color-s":[{"border-s":R()}],"border-color-e":[{"border-e":R()}],"border-color-t":[{"border-t":R()}],"border-color-r":[{"border-r":R()}],"border-color-b":[{"border-b":R()}],"border-color-l":[{"border-l":R()}],"divide-color":[{divide:R()}],"outline-style":[{outline:[...Te(),"none","hidden"]}],"outline-offset":[{"outline-offset":[lt,ze,Ue]}],"outline-w":[{outline:["",lt,Fp,pu]}],"outline-color":[{outline:R()}],shadow:[{shadow:["","none",d,ry,ny]}],"shadow-color":[{shadow:R()}],"inset-shadow":[{"inset-shadow":["none",f,ry,ny]}],"inset-shadow-color":[{"inset-shadow":R()}],"ring-w":[{ring:ye()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:R()}],"ring-offset-w":[{"ring-offset":[lt,pu]}],"ring-offset-color":[{"ring-offset":R()}],"inset-ring-w":[{"inset-ring":ye()}],"inset-ring-color":[{"inset-ring":R()}],"text-shadow":[{"text-shadow":["none",h,ry,ny]}],"text-shadow-color":[{"text-shadow":R()}],opacity:[{opacity:[lt,ze,Ue]}],"mix-blend":[{"mix-blend":[...U(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":U()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[lt]}],"mask-image-linear-from-pos":[{"mask-linear-from":K()}],"mask-image-linear-to-pos":[{"mask-linear-to":K()}],"mask-image-linear-from-color":[{"mask-linear-from":R()}],"mask-image-linear-to-color":[{"mask-linear-to":R()}],"mask-image-t-from-pos":[{"mask-t-from":K()}],"mask-image-t-to-pos":[{"mask-t-to":K()}],"mask-image-t-from-color":[{"mask-t-from":R()}],"mask-image-t-to-color":[{"mask-t-to":R()}],"mask-image-r-from-pos":[{"mask-r-from":K()}],"mask-image-r-to-pos":[{"mask-r-to":K()}],"mask-image-r-from-color":[{"mask-r-from":R()}],"mask-image-r-to-color":[{"mask-r-to":R()}],"mask-image-b-from-pos":[{"mask-b-from":K()}],"mask-image-b-to-pos":[{"mask-b-to":K()}],"mask-image-b-from-color":[{"mask-b-from":R()}],"mask-image-b-to-color":[{"mask-b-to":R()}],"mask-image-l-from-pos":[{"mask-l-from":K()}],"mask-image-l-to-pos":[{"mask-l-to":K()}],"mask-image-l-from-color":[{"mask-l-from":R()}],"mask-image-l-to-color":[{"mask-l-to":R()}],"mask-image-x-from-pos":[{"mask-x-from":K()}],"mask-image-x-to-pos":[{"mask-x-to":K()}],"mask-image-x-from-color":[{"mask-x-from":R()}],"mask-image-x-to-color":[{"mask-x-to":R()}],"mask-image-y-from-pos":[{"mask-y-from":K()}],"mask-image-y-to-pos":[{"mask-y-to":K()}],"mask-image-y-from-color":[{"mask-y-from":R()}],"mask-image-y-to-color":[{"mask-y-to":R()}],"mask-image-radial":[{"mask-radial":[ze,Ue]}],"mask-image-radial-from-pos":[{"mask-radial-from":K()}],"mask-image-radial-to-pos":[{"mask-radial-to":K()}],"mask-image-radial-from-color":[{"mask-radial-from":R()}],"mask-image-radial-to-color":[{"mask-radial-to":R()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[lt]}],"mask-image-conic-from-pos":[{"mask-conic-from":K()}],"mask-image-conic-to-pos":[{"mask-conic-to":K()}],"mask-image-conic-from-color":[{"mask-conic-from":R()}],"mask-image-conic-to-color":[{"mask-conic-to":R()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:F()}],"mask-repeat":[{mask:O()}],"mask-size":[{mask:Q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ze,Ue]}],filter:[{filter:["","none",ze,Ue]}],blur:[{blur:fe()}],brightness:[{brightness:[lt,ze,Ue]}],contrast:[{contrast:[lt,ze,Ue]}],"drop-shadow":[{"drop-shadow":["","none",p,ry,ny]}],"drop-shadow-color":[{"drop-shadow":R()}],grayscale:[{grayscale:["",lt,ze,Ue]}],"hue-rotate":[{"hue-rotate":[lt,ze,Ue]}],invert:[{invert:["",lt,ze,Ue]}],saturate:[{saturate:[lt,ze,Ue]}],sepia:[{sepia:["",lt,ze,Ue]}],"backdrop-filter":[{"backdrop-filter":["","none",ze,Ue]}],"backdrop-blur":[{"backdrop-blur":fe()}],"backdrop-brightness":[{"backdrop-brightness":[lt,ze,Ue]}],"backdrop-contrast":[{"backdrop-contrast":[lt,ze,Ue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",lt,ze,Ue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[lt,ze,Ue]}],"backdrop-invert":[{"backdrop-invert":["",lt,ze,Ue]}],"backdrop-opacity":[{"backdrop-opacity":[lt,ze,Ue]}],"backdrop-saturate":[{"backdrop-saturate":[lt,ze,Ue]}],"backdrop-sepia":[{"backdrop-sepia":["",lt,ze,Ue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":k()}],"border-spacing-x":[{"border-spacing-x":k()}],"border-spacing-y":[{"border-spacing-y":k()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ze,Ue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[lt,"initial",ze,Ue]}],ease:[{ease:["linear","initial",y,ze,Ue]}],delay:[{delay:[lt,ze,Ue]}],animate:[{animate:["none",x,ze,Ue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,ze,Ue]}],"perspective-origin":[{"perspective-origin":E()}],rotate:[{rotate:oe()}],"rotate-x":[{"rotate-x":oe()}],"rotate-y":[{"rotate-y":oe()}],"rotate-z":[{"rotate-z":oe()}],scale:[{scale:le()}],"scale-x":[{"scale-x":le()}],"scale-y":[{"scale-y":le()}],"scale-z":[{"scale-z":le()}],"scale-3d":["scale-3d"],skew:[{skew:Ee()}],"skew-x":[{"skew-x":Ee()}],"skew-y":[{"skew-y":Ee()}],transform:[{transform:[ze,Ue,"","none","gpu","cpu"]}],"transform-origin":[{origin:E()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:se()}],"translate-x":[{"translate-x":se()}],"translate-y":[{"translate-y":se()}],"translate-z":[{"translate-z":se()}],"translate-none":["translate-none"],accent:[{accent:R()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:R()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ze,Ue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ze,Ue]}],fill:[{fill:["none",...R()]}],"stroke-w":[{stroke:[lt,Fp,pu,ZN]}],stroke:[{stroke:["none",...R()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Bpe=xpe(Fpe);function Re(...e){return Bpe(bt(e))}function M4(e){return e.hours?e.hours:e.fixed_amount&&e.fixed_amount>0?e.total_amount/e.fixed_amount:1}function $pe(e){return e.hourly_rate||e.fixed_amount||0}function Upe(e){return e.hours?"hourly":"fixed"}function R4(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function SV(...e){return t=>{let n=!1;const r=e.map(i=>{const s=R4(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():R4(e[i],null)}}}}function fn(...e){return w.useCallback(SV(...e),e)}function vh(e){const t=Hpe(e),n=w.forwardRef((r,i)=>{const{children:s,...a}=r,o=w.Children.toArray(s),c=o.find(Wpe);if(c){const u=c.props.children,d=o.map(f=>f===c?w.Children.count(u)>1?w.Children.only(null):w.isValidElement(u)?u.props.children:null:f);return l.jsx(t,{...a,ref:i,children:w.isValidElement(u)?w.cloneElement(u,void 0,d):null})}return l.jsx(t,{...a,ref:i,children:s})});return n.displayName=`${e}.Slot`,n}var zpe=vh("Slot");function Hpe(e){const t=w.forwardRef((n,r)=>{const{children:i,...s}=n;if(w.isValidElement(i)){const a=Kpe(i),o=qpe(s,i.props);return i.type!==w.Fragment&&(o.ref=r?SV(r,a):a),w.cloneElement(i,o)}return w.Children.count(i)>1?w.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var NV=Symbol("radix.slottable");function Vpe(e){const t=({children:n})=>l.jsx(l.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=NV,t}function Wpe(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===NV}function qpe(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{const c=s(...o);return i(...o),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function Kpe(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const L4=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,F4=bt,_O=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return F4(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=t,a=Object.keys(i).map(u=>{const d=n==null?void 0:n[u],f=s==null?void 0:s[u];if(d===null)return null;const h=L4(d)||L4(f);return i[u][h]}),o=n&&Object.entries(n).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:f,className:h,...p}=d;return Object.entries(p).every(m=>{let[g,v]=m;return Array.isArray(v)?v.includes({...s,...o}[g]):{...s,...o}[g]===v})?[...u,f,h]:u},[]);return F4(e,a,c,n==null?void 0:n.class,n==null?void 0:n.className)},kO=_O("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),H=w.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},s)=>{const a=r?zpe:"button";return l.jsx(a,{className:Re(kO({variant:t,size:n,className:e})),ref:s,...i})});H.displayName="Button";const Gpe=[{name:"Dashboard",href:"/",icon:Lhe},{name:"Time Tracking",href:"/time-tracking",icon:gt},{name:"Budget",href:"/budget",icon:wn},{name:"Cash Flow",href:"/cash-flow",icon:cr},{name:"Projects",href:"/projects",icon:nE},{name:"Analytics",href:"/analytics",icon:no},{name:"Clients",href:"/clients",icon:Tr},{name:"CV Manager",href:"/cv-manager",icon:rpe},{name:"Invoicing",href:"/invoicing",icon:en},{name:"Salary",href:"/salary",icon:bhe}];function Ype({collapsed:e,onToggle:t,isDarkMode:n}){return l.jsxs("div",{className:Re("flex flex-col h-full border-r transition-all duration-300",e?"w-16":"w-64","bg-card border-border"),children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[!e&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:l.jsx(no,{className:"w-5 h-5 text-primary-foreground"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-semibold text-sm",children:"ConsultantHub"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Dashboard"})]})]}),l.jsx(H,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8",children:e?l.jsx(dO,{className:"h-4 w-4"}):l.jsx(uO,{className:"h-4 w-4"})})]}),l.jsx("nav",{className:"flex-1 p-2",children:l.jsx("ul",{className:"space-y-1",children:Gpe.map(r=>{const i=r.icon;return l.jsx("li",{children:l.jsxs(Gue,{to:r.href,className:({isActive:s})=>Re("flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors","hover:bg-accent hover:text-accent-foreground",s?"bg-primary text-primary-foreground":"text-muted-foreground",e?"justify-center":""),title:e?r.name:void 0,children:[l.jsx(i,{className:"h-4 w-4 flex-shrink-0"}),!e&&l.jsx("span",{children:r.name})]})},r.name)})})}),l.jsx("div",{className:"p-4 border-t border-border",children:!e&&l.jsxs("div",{className:"text-xs text-muted-foreground",children:[l.jsx("p",{children:" 2025 ConsultantHub"}),l.jsx("p",{children:"v1.0.0"})]})})]})}const re=w.forwardRef(({className:e,type:t,...n},r)=>l.jsx("input",{type:t,className:Re("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...n}));re.displayName="Input";function Xpe({className:e}){const[t,n]=w.useState(""),[r,i]=w.useState(!1),[s,a]=w.useState([]),[o,c]=w.useState(-1),u=TH(),d=Xh(),f=w.useRef(null),h=w.useRef(null),p=w.useMemo(()=>[{id:"new-invoice",title:"Create New Invoice",description:"Start a new invoice for a client",action:()=>{u("/invoicing")},icon:l.jsx(Xe,{className:"h-4 w-4"}),type:"create",keywords:["new","create","invoice","bill","charge","client","add i","new i","i","+i","ni"]},{id:"new-client",title:"Add New Client",description:"Create a new client profile",action:()=>{u("/clients")},icon:l.jsx(Xe,{className:"h-4 w-4"}),type:"create",keywords:["new","add","create","client","customer","company","add c","new c","c","+c","nc"]},{id:"new-project",title:"Create New Project",description:"Start a new project",action:()=>{u("/projects")},icon:l.jsx(Mm,{className:"h-4 w-4"}),type:"create",keywords:["new","create","project","work","task","add p","new p","p","+p","np"]},{id:"log-time",title:"Log Time Entry",description:"Track time for a project",action:()=>{u("/time-tracking")},icon:l.jsx(gt,{className:"h-4 w-4"}),type:"create",keywords:["log","track","time","hours","work","timer","add t","log t","t","+t","lt"]},{id:"add-expense",title:"Add Expense",description:"Record a new expense",action:()=>{u("/budget"),setTimeout(()=>{d.setExpenseModalOpen(!0)},100)},icon:l.jsx(wn,{className:"h-4 w-4"}),type:"create",keywords:["add","new","expense","cost","spend","payment","receipt","add e","new e","e","+e","ne"]},{id:"quick-dashboard",title:"Dashboard",description:"Quick access to dashboard",action:()=>u("/"),icon:l.jsx(no,{className:"h-4 w-4"}),type:"navigation",keywords:["d","dashboard","home","overview","main"]},{id:"quick-invoicing",title:"Invoicing",description:"Quick access to invoicing",action:()=>u("/invoicing"),icon:l.jsx(en,{className:"h-4 w-4"}),type:"navigation",keywords:["inv","invoicing","invoices","bills","billing","payments"]},{id:"quick-clients",title:"Clients",description:"Quick access to clients",action:()=>u("/clients"),icon:l.jsx(Tr,{className:"h-4 w-4"}),type:"navigation",keywords:["cli","clients","customers","companies","contacts"]},{id:"quick-time",title:"Time Tracking",description:"Quick access to time tracking",action:()=>u("/time-tracking"),icon:l.jsx(gt,{className:"h-4 w-4"}),type:"navigation",keywords:["tt","time","tracking","hours","timesheet","work"]},{id:"quick-budget",title:"Budget & Expenses",description:"Quick access to budget",action:()=>u("/budget"),icon:l.jsx(wn,{className:"h-4 w-4"}),type:"navigation",keywords:["bud","budget","expenses","finance","money","costs"]},{id:"go-dashboard",title:"Dashboard",description:"Go to main dashboard",action:()=>u("/"),icon:l.jsx(no,{className:"h-4 w-4"}),type:"navigation",keywords:["dashboard","home","overview","main"]},{id:"go-invoicing",title:"Invoicing",description:"Manage invoices and billing",action:()=>u("/invoicing"),icon:l.jsx(en,{className:"h-4 w-4"}),type:"navigation",keywords:["invoicing","invoices","bills","billing","payments"]},{id:"go-clients",title:"Clients",description:"Manage client relationships",action:()=>u("/clients"),icon:l.jsx(Tr,{className:"h-4 w-4"}),type:"navigation",keywords:["clients","customers","companies","contacts"]},{id:"go-time-tracking",title:"Time Tracking",description:"Track and manage work hours",action:()=>u("/time-tracking"),icon:l.jsx(gt,{className:"h-4 w-4"}),type:"navigation",keywords:["time","tracking","hours","timesheet","work"]},{id:"go-budget",title:"Budget & Expenses",description:"Manage finances and expenses",action:()=>u("/budget"),icon:l.jsx(wn,{className:"h-4 w-4"}),type:"navigation",keywords:["budget","expenses","finance","money","costs"]},{id:"go-settings",title:"Settings",description:"Configure application settings",action:()=>u("/settings"),icon:l.jsx(Zs,{className:"h-4 w-4"}),type:"navigation",keywords:["settings","config","preferences","options","set"]},{id:"today-summary",title:"Today's Summary",description:"View today's time and revenue",action:()=>{u("/")},icon:l.jsx(no,{className:"h-4 w-4"}),type:"navigation",keywords:["today","summary","daily","td","now"]},{id:"quick-timer",title:"Start Timer",description:"Quick time tracking",action:()=>{u("/time-tracking")},icon:l.jsx(gt,{className:"h-4 w-4"}),type:"create",keywords:["timer","start","track now","begin","st"]},{id:"help",title:"Help & Shortcuts",description:"Show all available commands",action:()=>{const v=document.querySelector('input[placeholder*="Search"]');v&&(v.value="",v.focus())},icon:l.jsx(Zs,{className:"h-4 w-4"}),type:"navigation",keywords:["help","shortcuts","commands","?","h"]}],[u,d]);w.useEffect(()=>{if(!t.trim()){a([]),c(-1);return}const v=t.toLowerCase().trim();let y=v,x=!1,b=!1;v.startsWith("/")?(y=v.substring(1),b=!0):v.startsWith("+")&&(y=v.substring(1),x=!0);const S=p.filter(E=>x&&E.type!=="create"||b&&E.type!=="navigation"?!1:y.split(" ").every(_=>E.keywords.some(k=>k.includes(_))||E.title.toLowerCase().includes(_)||E.description.toLowerCase().includes(_)));S.sort((E,N)=>{const _=E.keywords.some(I=>I===y),k=N.keywords.some(I=>I===y);if(_&&!k)return-1;if(k&&!_)return 1;if(!b&&E.type==="create"&&N.type!=="create")return-1;if(!b&&N.type==="create"&&E.type!=="create")return 1;const T=E.title.toLowerCase().startsWith(y),A=N.title.toLowerCase().startsWith(y);if(T&&!A)return-1;if(A&&!T)return 1;const j=E.keywords.some(I=>I.startsWith(y)),D=N.keywords.some(I=>I.startsWith(y));return j&&!D?-1:D&&!j?1:E.title.localeCompare(N.title)}),a(S.slice(0,8)),c(-1)},[t,p]);const m=v=>{var y;if(!(!r||s.length===0))switch(v.key){case"ArrowDown":v.preventDefault(),c(x=>x<s.length-1?x+1:0);break;case"ArrowUp":v.preventDefault(),c(x=>x>0?x-1:s.length-1);break;case"Enter":v.preventDefault(),o>=0&&s[o]&&g(s[o]);break;case"Escape":i(!1),(y=f.current)==null||y.blur();break}},g=v=>{var y;v.action(),n(""),i(!1),(y=f.current)==null||y.blur()};return w.useEffect(()=>{const v=y=>{var x;h.current&&!h.current.contains(y.target)&&!((x=f.current)!=null&&x.contains(y.target))&&i(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),w.useEffect(()=>{const v=y=>{var x;(y.ctrlKey||y.metaKey)&&y.key==="k"&&(y.preventDefault(),(x=f.current)==null||x.focus(),i(!0))};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[]),l.jsxs("div",{className:Re("relative",e),children:[l.jsxs("div",{className:"relative",children:[l.jsx(Jh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(re,{ref:f,placeholder:"Search or command... (Ctrl+K to focus, try '+i', '/clients')",className:"pl-10",value:t,onChange:v=>n(v.target.value),onFocus:()=>i(!0),onKeyDown:m})]}),r&&s.length>0&&l.jsx("div",{ref:h,className:"absolute top-full left-0 right-0 mt-1 bg-popover border border-border rounded-md shadow-lg z-50 max-h-80 overflow-y-auto",children:s.map((v,y)=>l.jsxs("button",{className:Re("w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-accent hover:text-accent-foreground transition-colors",y===o&&"bg-accent text-accent-foreground",v.type==="create"&&"border-l-2 border-l-green-500",v.type==="navigation"&&"border-l-2 border-l-blue-500"),onClick:()=>g(v),children:[l.jsx("div",{className:"flex-shrink-0",children:v.icon}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"font-medium text-sm",children:v.title}),l.jsx("div",{className:"text-xs text-muted-foreground truncate",children:v.description})]}),l.jsx("div",{className:"flex-shrink-0",children:l.jsx("span",{className:Re("text-xs px-2 py-1 rounded-full",v.type==="create"&&"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",v.type==="navigation"&&"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300"),children:v.type==="create"?"Create":"Go to"})})]},v.id))}),r&&t.trim()===""&&l.jsx("div",{ref:h,className:"absolute top-full left-0 right-0 mt-1 bg-popover border border-border rounded-md shadow-lg z-50 p-4",children:l.jsxs("div",{className:"text-sm text-muted-foreground",children:[l.jsx("p",{className:"font-medium mb-3",children:"Smart Search Commands:"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-foreground mb-2",children:" Quick Create:"}),l.jsxs("div",{className:"space-y-1 text-xs",children:[l.jsxs("p",{children:[" ",l.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"add i"})," or ",l.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"+i"})," - New invoice"]}),l.jsxs("p",{children:[" ",l.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"add c"})," or ",l.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"+c"})," - New client"]}),l.jsxs("p",{children:[" ",l.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"add t"})," or ",l.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"+t"})," - Log time"]}),l.jsxs("p",{children:[" ",l.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"add e"})," or ",l.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"+e"})," - Add expense"]}),l.jsxs("p",{children:[" ",l.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"timer"})," - Start timer"]})]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-foreground mb-2",children:" Quick Navigation:"}),l.jsxs("div",{className:"space-y-1 text-xs",children:[l.jsxs("p",{children:[" ",l.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"d"})," - Dashboard"]}),l.jsxs("p",{children:[" ",l.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"inv"})," - Invoicing"]}),l.jsxs("p",{children:[" ",l.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"cli"})," - Clients"]}),l.jsxs("p",{children:[" ",l.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"tt"})," - Time tracking"]}),l.jsxs("p",{children:[" ",l.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"bud"})," - Budget"]})]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-foreground mb-2",children:" Command Prefixes:"}),l.jsxs("div",{className:"space-y-1 text-xs",children:[l.jsxs("p",{children:[" ",l.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"+command"})," - Create only"]}),l.jsxs("p",{children:[" ",l.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"/command"})," - Navigate only"]}),l.jsxs("p",{children:[" ",l.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"?"})," or ",l.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"h"})," - Help"]}),l.jsxs("p",{children:[" ",l.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:"today"})," - Today's summary"]})]})]})]}),l.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:l.jsxs("p",{className:"text-xs",children:[" ",l.jsx("span",{className:"font-medium",children:"Examples:"}),' "new invoice", "+i", "/clients", "add t", "timer"']})})]})})]})}function Qpe({isDarkMode:e,onToggleDarkMode:t,onSignOut:n,user:r}){var i;return l.jsxs("header",{className:Re("flex items-center justify-between px-6 py-4 border-b","bg-background border-border"),children:[l.jsx("div",{className:"flex items-center gap-4 flex-1 max-w-md",children:l.jsx(Xpe,{className:"flex-1"})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(H,{variant:"ghost",size:"icon",className:"relative",children:[l.jsx(whe,{className:"h-4 w-4"}),l.jsx("span",{className:"absolute top-1 right-1 h-2 w-2 bg-red-500 rounded-full"})]}),l.jsx(H,{variant:"ghost",size:"icon",onClick:t,children:e?l.jsx(epe,{className:"h-4 w-4"}):l.jsx(Ghe,{className:"h-4 w-4"})}),l.jsx(H,{variant:"ghost",size:"icon",asChild:!0,children:l.jsx(IH,{to:"/settings",children:l.jsx(Zs,{className:"h-4 w-4"})})}),l.jsxs("div",{className:"flex items-center gap-3 ml-4 pl-4 border-l border-border",children:[l.jsxs("div",{className:"text-right hidden sm:block",children:[l.jsx("p",{className:"text-sm font-medium",children:((i=r==null?void 0:r.email)==null?void 0:i.split("@")[0])||"User"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:(r==null?void 0:r.email)||"user@example.com"})]}),l.jsx(H,{variant:"ghost",size:"icon",className:"rounded-full",children:l.jsx(Ei,{className:"h-4 w-4"})}),l.jsx(H,{variant:"ghost",size:"icon",onClick:n,children:l.jsx(zhe,{className:"h-4 w-4"})})]})]})]})}function Jpe({isDarkMode:e,onToggleDarkMode:t,onSignOut:n,user:r,children:i}){const[s,a]=w.useState(!1);return l.jsxs("div",{className:Re("min-h-screen flex flex-col",e?"dark":""),children:[l.jsx(Qpe,{isDarkMode:e,onToggleDarkMode:t,onSignOut:n,user:r}),l.jsxs("div",{className:"flex-1 flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx(Ype,{collapsed:s,onToggle:()=>a(!s)})}),l.jsx("main",{className:"flex-1 overflow-auto p-6 bg-muted/30 min-w-0",children:i||l.jsx(Mue,{})})]})]})}function NC(e,t){return NC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},NC(e,t)}function _V(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,NC(e,t)}function Ze(){return Ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ze.apply(null,arguments)}function Ig(e){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ig(e)}function Zpe(e,t){if(Ig(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ig(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eme(e){var t=Zpe(e,"string");return Ig(t)=="symbol"?t:t+""}function tme(e,t,n){return(t=eme(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?B4(Object(n),!0).forEach(function(r){tme(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Oi(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var U4=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),z4=function(){return Math.random().toString(36).substring(7).split("").join(".")},H4={INIT:"@@redux/INIT"+z4(),REPLACE:"@@redux/REPLACE"+z4()};function nme(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function kV(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Oi(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Oi(1));return n(kV)(e,t)}if(typeof e!="function")throw new Error(Oi(2));var i=e,s=t,a=[],o=a,c=!1;function u(){o===a&&(o=a.slice())}function d(){if(c)throw new Error(Oi(3));return s}function f(g){if(typeof g!="function")throw new Error(Oi(4));if(c)throw new Error(Oi(5));var v=!0;return u(),o.push(g),function(){if(v){if(c)throw new Error(Oi(6));v=!1,u();var x=o.indexOf(g);o.splice(x,1),a=null}}}function h(g){if(!nme(g))throw new Error(Oi(7));if(typeof g.type>"u")throw new Error(Oi(8));if(c)throw new Error(Oi(9));try{c=!0,s=i(s,g)}finally{c=!1}for(var v=a=o,y=0;y<v.length;y++){var x=v[y];x()}return g}function p(g){if(typeof g!="function")throw new Error(Oi(10));i=g,h({type:H4.REPLACE})}function m(){var g,v=f;return g={subscribe:function(x){if(typeof x!="object"||x===null)throw new Error(Oi(11));function b(){x.next&&x.next(d())}b();var S=v(b);return{unsubscribe:S}}},g[U4]=function(){return this},g}return h({type:H4.INIT}),r={dispatch:h,subscribe:f,getState:d,replaceReducer:p},r[U4]=m,r}function V4(e,t){return function(){return t(e.apply(this,arguments))}}function W4(e,t){if(typeof e=="function")return V4(e,t);if(typeof e!="object"||e===null)throw new Error(Oi(16));var n={};for(var r in e){var i=e[r];typeof i=="function"&&(n[r]=V4(i,t))}return n}function CV(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function rme(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Oi(15))},a={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},o=t.map(function(c){return c(a)});return s=CV.apply(void 0,o)(i.dispatch),$4($4({},i),{},{dispatch:s})}}}var TV=at.createContext(null);function ime(e){e()}var AV=ime,sme=function(t){return AV=t},ame=function(){return AV};function ome(){var e=ame(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e(function(){for(var i=t;i;)i.callback(),i=i.next})},get:function(){for(var i=[],s=t;s;)i.push(s),s=s.next;return i},subscribe:function(i){var s=!0,a=n={callback:i,next:null,prev:n};return a.prev?a.prev.next=a:t=a,function(){!s||t===null||(s=!1,a.next?a.next.prev=a.prev:n=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var q4={notify:function(){},get:function(){return[]}};function jV(e,t){var n,r=q4;function i(f){return c(),r.subscribe(f)}function s(){r.notify()}function a(){d.onStateChange&&d.onStateChange()}function o(){return!!n}function c(){n||(n=t?t.addNestedSub(a):e.subscribe(a),r=ome())}function u(){n&&(n(),n=void 0,r.clear(),r=q4)}var d={addNestedSub:i,notifyNestedSubs:s,handleChangeWrapper:a,isSubscribed:o,trySubscribe:c,tryUnsubscribe:u,getListeners:function(){return r}};return d}var OV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect;function lme(e){var t=e.store,n=e.context,r=e.children,i=w.useMemo(function(){var o=jV(t);return{store:t,subscription:o}},[t]),s=w.useMemo(function(){return t.getState()},[t]);OV(function(){var o=i.subscription;return o.onStateChange=o.notifyNestedSubs,o.trySubscribe(),s!==t.getState()&&o.notifyNestedSubs(),function(){o.tryUnsubscribe(),o.onStateChange=null}},[i,s]);var a=n||TV;return at.createElement(a.Provider,{value:i},r)}function xb(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var PV={exports:{}},Ft={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Or=typeof Symbol=="function"&&Symbol.for,CO=Or?Symbol.for("react.element"):60103,TO=Or?Symbol.for("react.portal"):60106,sE=Or?Symbol.for("react.fragment"):60107,aE=Or?Symbol.for("react.strict_mode"):60108,oE=Or?Symbol.for("react.profiler"):60114,lE=Or?Symbol.for("react.provider"):60109,cE=Or?Symbol.for("react.context"):60110,AO=Or?Symbol.for("react.async_mode"):60111,uE=Or?Symbol.for("react.concurrent_mode"):60111,dE=Or?Symbol.for("react.forward_ref"):60112,fE=Or?Symbol.for("react.suspense"):60113,cme=Or?Symbol.for("react.suspense_list"):60120,hE=Or?Symbol.for("react.memo"):60115,pE=Or?Symbol.for("react.lazy"):60116,ume=Or?Symbol.for("react.block"):60121,dme=Or?Symbol.for("react.fundamental"):60117,fme=Or?Symbol.for("react.responder"):60118,hme=Or?Symbol.for("react.scope"):60119;function ws(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case CO:switch(e=e.type,e){case AO:case uE:case sE:case oE:case aE:case fE:return e;default:switch(e=e&&e.$$typeof,e){case cE:case dE:case pE:case hE:case lE:return e;default:return t}}case TO:return t}}}function IV(e){return ws(e)===uE}Ft.AsyncMode=AO;Ft.ConcurrentMode=uE;Ft.ContextConsumer=cE;Ft.ContextProvider=lE;Ft.Element=CO;Ft.ForwardRef=dE;Ft.Fragment=sE;Ft.Lazy=pE;Ft.Memo=hE;Ft.Portal=TO;Ft.Profiler=oE;Ft.StrictMode=aE;Ft.Suspense=fE;Ft.isAsyncMode=function(e){return IV(e)||ws(e)===AO};Ft.isConcurrentMode=IV;Ft.isContextConsumer=function(e){return ws(e)===cE};Ft.isContextProvider=function(e){return ws(e)===lE};Ft.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===CO};Ft.isForwardRef=function(e){return ws(e)===dE};Ft.isFragment=function(e){return ws(e)===sE};Ft.isLazy=function(e){return ws(e)===pE};Ft.isMemo=function(e){return ws(e)===hE};Ft.isPortal=function(e){return ws(e)===TO};Ft.isProfiler=function(e){return ws(e)===oE};Ft.isStrictMode=function(e){return ws(e)===aE};Ft.isSuspense=function(e){return ws(e)===fE};Ft.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===sE||e===uE||e===oE||e===aE||e===fE||e===cme||typeof e=="object"&&e!==null&&(e.$$typeof===pE||e.$$typeof===hE||e.$$typeof===lE||e.$$typeof===cE||e.$$typeof===dE||e.$$typeof===dme||e.$$typeof===fme||e.$$typeof===hme||e.$$typeof===ume)};Ft.typeOf=ws;PV.exports=Ft;var pme=PV.exports,jO=pme,mme={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},gme={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},vme={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},DV={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},OO={};OO[jO.ForwardRef]=vme;OO[jO.Memo]=DV;function K4(e){return jO.isMemo(e)?DV:OO[e.$$typeof]||mme}var yme=Object.defineProperty,xme=Object.getOwnPropertyNames,G4=Object.getOwnPropertySymbols,bme=Object.getOwnPropertyDescriptor,wme=Object.getPrototypeOf,Y4=Object.prototype;function MV(e,t,n){if(typeof t!="string"){if(Y4){var r=wme(t);r&&r!==Y4&&MV(e,r,n)}var i=xme(t);G4&&(i=i.concat(G4(t)));for(var s=K4(e),a=K4(t),o=0;o<i.length;++o){var c=i[o];if(!gme[c]&&!(n&&n[c])&&!(a&&a[c])&&!(s&&s[c])){var u=bme(t,c);try{yme(e,c,u)}catch{}}}}return e}var Eme=MV;const X4=oi(Eme);var RV={exports:{}},Wt={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mE=60103,gE=60106,F0=60107,B0=60108,$0=60114,U0=60109,z0=60110,H0=60112,V0=60113,PO=60120,W0=60115,q0=60116,LV=60121,FV=60122,BV=60117,$V=60129,UV=60131;if(typeof Symbol=="function"&&Symbol.for){var Dr=Symbol.for;mE=Dr("react.element"),gE=Dr("react.portal"),F0=Dr("react.fragment"),B0=Dr("react.strict_mode"),$0=Dr("react.profiler"),U0=Dr("react.provider"),z0=Dr("react.context"),H0=Dr("react.forward_ref"),V0=Dr("react.suspense"),PO=Dr("react.suspense_list"),W0=Dr("react.memo"),q0=Dr("react.lazy"),LV=Dr("react.block"),FV=Dr("react.server.block"),BV=Dr("react.fundamental"),$V=Dr("react.debug_trace_mode"),UV=Dr("react.legacy_hidden")}function Ia(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case mE:switch(e=e.type,e){case F0:case $0:case B0:case V0:case PO:return e;default:switch(e=e&&e.$$typeof,e){case z0:case H0:case q0:case W0:case U0:return e;default:return t}}case gE:return t}}}var Sme=U0,Nme=mE,_me=H0,kme=F0,Cme=q0,Tme=W0,Ame=gE,jme=$0,Ome=B0,Pme=V0;Wt.ContextConsumer=z0;Wt.ContextProvider=Sme;Wt.Element=Nme;Wt.ForwardRef=_me;Wt.Fragment=kme;Wt.Lazy=Cme;Wt.Memo=Tme;Wt.Portal=Ame;Wt.Profiler=jme;Wt.StrictMode=Ome;Wt.Suspense=Pme;Wt.isAsyncMode=function(){return!1};Wt.isConcurrentMode=function(){return!1};Wt.isContextConsumer=function(e){return Ia(e)===z0};Wt.isContextProvider=function(e){return Ia(e)===U0};Wt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===mE};Wt.isForwardRef=function(e){return Ia(e)===H0};Wt.isFragment=function(e){return Ia(e)===F0};Wt.isLazy=function(e){return Ia(e)===q0};Wt.isMemo=function(e){return Ia(e)===W0};Wt.isPortal=function(e){return Ia(e)===gE};Wt.isProfiler=function(e){return Ia(e)===$0};Wt.isStrictMode=function(e){return Ia(e)===B0};Wt.isSuspense=function(e){return Ia(e)===V0};Wt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===F0||e===$0||e===$V||e===B0||e===V0||e===PO||e===UV||typeof e=="object"&&e!==null&&(e.$$typeof===q0||e.$$typeof===W0||e.$$typeof===U0||e.$$typeof===z0||e.$$typeof===H0||e.$$typeof===BV||e.$$typeof===LV||e[0]===FV)};Wt.typeOf=Ia;RV.exports=Wt;var Ime=RV.exports,Dme=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Mme=["reactReduxForwardedRef"],Rme=[],Lme=[null,null];function Fme(e,t){var n=e[1];return[t.payload,n+1]}function Q4(e,t,n){OV(function(){return e.apply(void 0,t)},n)}function Bme(e,t,n,r,i,s,a){e.current=r,t.current=i,n.current=!1,s.current&&(s.current=null,a())}function $me(e,t,n,r,i,s,a,o,c,u){if(e){var d=!1,f=null,h=function(){if(!d){var g=t.getState(),v,y;try{v=r(g,i.current)}catch(x){y=x,f=x}y||(f=null),v===s.current?a.current||c():(s.current=v,o.current=v,a.current=!0,u({type:"STORE_UPDATED",payload:{error:y}}))}};n.onStateChange=h,n.trySubscribe(),h();var p=function(){if(d=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f};return p}}var Ume=function(){return[null,0]};function zme(e,t){t===void 0&&(t={});var n=t,r=n.getDisplayName,i=r===void 0?function(b){return"ConnectAdvanced("+b+")"}:r,s=n.methodName,a=s===void 0?"connectAdvanced":s,o=n.renderCountProp,c=o===void 0?void 0:o,u=n.shouldHandleStateChanges,d=u===void 0?!0:u,f=n.storeKey,h=f===void 0?"store":f;n.withRef;var p=n.forwardRef,m=p===void 0?!1:p,g=n.context,v=g===void 0?TV:g,y=xb(n,Dme),x=v;return function(S){var E=S.displayName||S.name||"Component",N=i(E),_=Ze({},y,{getDisplayName:i,methodName:a,renderCountProp:c,shouldHandleStateChanges:d,storeKey:h,displayName:N,wrappedComponentName:E,WrappedComponent:S}),k=y.pure;function T(M){return e(M.dispatch,_)}var A=k?w.useMemo:function(M){return M()};function j(M){var L=w.useMemo(function(){var me=M.reactReduxForwardedRef,Be=xb(M,Mme);return[M.context,me,Be]},[M]),P=L[0],B=L[1],R=L[2],F=w.useMemo(function(){return P&&P.Consumer&&Ime.isContextConsumer(at.createElement(P.Consumer,null))?P:x},[P,x]),O=w.useContext(F),Q=!!M.store&&!!M.store.getState&&!!M.store.dispatch;O&&O.store;var Y=Q?M.store:O.store,$=w.useMemo(function(){return T(Y)},[Y]),ye=w.useMemo(function(){if(!d)return Lme;var me=jV(Y,Q?null:O.subscription),Be=me.notifyNestedSubs.bind(me);return[me,Be]},[Y,Q,O]),Te=ye[0],U=ye[1],K=w.useMemo(function(){return Q?O:Ze({},O,{subscription:Te})},[Q,O,Te]),fe=w.useReducer(Fme,Rme,Ume),oe=fe[0],le=oe[0],Ee=fe[1];if(le&&le.error)throw le.error;var se=w.useRef(),qe=w.useRef(R),Oe=w.useRef(),et=w.useRef(!1),J=A(function(){return Oe.current&&R===qe.current?Oe.current:$(Y.getState(),R)},[Y,le,R]);Q4(Bme,[qe,se,et,R,J,Oe,U]),Q4($me,[d,Y,Te,$,qe,se,et,Oe,U,Ee],[Y,Te,$]);var pe=w.useMemo(function(){return at.createElement(S,Ze({},J,{ref:B}))},[B,S,J]),q=w.useMemo(function(){return d?at.createElement(F.Provider,{value:K},pe):pe},[F,pe,K]);return q}var D=k?at.memo(j):j;if(D.WrappedComponent=S,D.displayName=j.displayName=N,m){var I=at.forwardRef(function(L,P){return at.createElement(D,Ze({},L,{reactReduxForwardedRef:P}))});return I.displayName=N,I.WrappedComponent=S,X4(I,S)}return X4(D,S)}}function J4(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function e_(e,t){if(J4(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!J4(e[n[i]],t[n[i]]))return!1;return!0}function Hme(e,t){var n={},r=function(a){var o=e[a];typeof o=="function"&&(n[a]=function(){return t(o.apply(void 0,arguments))})};for(var i in e)r(i);return n}function IO(e){return function(n,r){var i=e(n,r);function s(){return i}return s.dependsOnOwnProps=!1,s}}function Z4(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function zV(e,t){return function(r,i){i.displayName;var s=function(o,c){return s.dependsOnOwnProps?s.mapToProps(o,c):s.mapToProps(o)};return s.dependsOnOwnProps=!0,s.mapToProps=function(o,c){s.mapToProps=e,s.dependsOnOwnProps=Z4(e);var u=s(o,c);return typeof u=="function"&&(s.mapToProps=u,s.dependsOnOwnProps=Z4(u),u=s(o,c)),u},s}}function Vme(e){return typeof e=="function"?zV(e):void 0}function Wme(e){return e?void 0:IO(function(t){return{dispatch:t}})}function qme(e){return e&&typeof e=="object"?IO(function(t){return Hme(e,t)}):void 0}const Kme=[Vme,Wme,qme];function Gme(e){return typeof e=="function"?zV(e):void 0}function Yme(e){return e?void 0:IO(function(){return{}})}const Xme=[Gme,Yme];function Qme(e,t,n){return Ze({},n,e,t)}function Jme(e){return function(n,r){r.displayName;var i=r.pure,s=r.areMergedPropsEqual,a=!1,o;return function(u,d,f){var h=e(u,d,f);return a?(!i||!s(h,o))&&(o=h):(a=!0,o=h),o}}}function Zme(e){return typeof e=="function"?Jme(e):void 0}function ege(e){return e?void 0:function(){return Qme}}const tge=[Zme,ege];var nge=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function rge(e,t,n,r){return function(s,a){return n(e(s,a),t(r,a),a)}}function ige(e,t,n,r,i){var s=i.areStatesEqual,a=i.areOwnPropsEqual,o=i.areStatePropsEqual,c=!1,u,d,f,h,p;function m(b,S){return u=b,d=S,f=e(u,d),h=t(r,d),p=n(f,h,d),c=!0,p}function g(){return f=e(u,d),t.dependsOnOwnProps&&(h=t(r,d)),p=n(f,h,d),p}function v(){return e.dependsOnOwnProps&&(f=e(u,d)),t.dependsOnOwnProps&&(h=t(r,d)),p=n(f,h,d),p}function y(){var b=e(u,d),S=!o(b,f);return f=b,S&&(p=n(f,h,d)),p}function x(b,S){var E=!a(S,d),N=!s(b,u,S,d);return u=b,d=S,E&&N?g():E?v():N?y():p}return function(S,E){return c?x(S,E):m(S,E)}}function sge(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,s=xb(t,nge),a=n(e,s),o=r(e,s),c=i(e,s),u=s.pure?ige:rge;return u(a,o,c,e,s)}var age=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function t_(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(s,a){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+a.wrappedComponentName+".")}}function oge(e,t){return e===t}function lge(e){var t=e===void 0?{}:e,n=t.connectHOC,r=n===void 0?zme:n,i=t.mapStateToPropsFactories,s=i===void 0?Xme:i,a=t.mapDispatchToPropsFactories,o=a===void 0?Kme:a,c=t.mergePropsFactories,u=c===void 0?tge:c,d=t.selectorFactory,f=d===void 0?sge:d;return function(p,m,g,v){v===void 0&&(v={});var y=v,x=y.pure,b=x===void 0?!0:x,S=y.areStatesEqual,E=S===void 0?oge:S,N=y.areOwnPropsEqual,_=N===void 0?e_:N,k=y.areStatePropsEqual,T=k===void 0?e_:k,A=y.areMergedPropsEqual,j=A===void 0?e_:A,D=xb(y,age),I=t_(p,s,"mapStateToProps"),M=t_(m,o,"mapDispatchToProps"),L=t_(g,u,"mergeProps");return r(f,Ze({methodName:"connect",getDisplayName:function(B){return"Connect("+B+")"},shouldHandleStateChanges:!!p,initMapStateToProps:I,initMapDispatchToProps:M,initMergeProps:L,pure:b,areStatesEqual:E,areOwnPropsEqual:_,areStatePropsEqual:T,areMergedPropsEqual:j},D))}}const HV=lge();sme(ml.unstable_batchedUpdates);function cge(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function VV(e,t){var n=w.useState(function(){return{inputs:t,result:e()}})[0],r=w.useRef(!0),i=w.useRef(n),s=r.current||!!(t&&i.current.inputs&&cge(t,i.current.inputs)),a=s?i.current:{inputs:t,result:e()};return w.useEffect(function(){r.current=!1,i.current=a},[a]),a.result}function uge(e,t){return VV(function(){return e},t)}var Nt=VV,Ge=uge,dge="Invariant failed";function WV(e,t){throw new Error(dge)}var ba=function(t){var n=t.top,r=t.right,i=t.bottom,s=t.left,a=r-s,o=i-n,c={top:n,right:r,bottom:i,left:s,width:a,height:o,x:s,y:n,center:{x:(r+s)/2,y:(i+n)/2}};return c},DO=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},eL=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},fge=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},n_={top:0,right:0,bottom:0,left:0},MO=function(t){var n=t.borderBox,r=t.margin,i=r===void 0?n_:r,s=t.border,a=s===void 0?n_:s,o=t.padding,c=o===void 0?n_:o,u=ba(DO(n,i)),d=ba(eL(n,a)),f=ba(eL(d,c));return{marginBox:u,borderBox:ba(n),paddingBox:d,contentBox:f,margin:i,border:a,padding:c}},_s=function(t){var n=t.slice(0,-2),r=t.slice(-2);if(r!=="px")return 0;var i=Number(n);return isNaN(i)&&WV(),i},hge=function(){return{x:window.pageXOffset,y:window.pageYOffset}},bb=function(t,n){var r=t.borderBox,i=t.border,s=t.margin,a=t.padding,o=fge(r,n);return MO({borderBox:o,border:i,margin:s,padding:a})},wb=function(t,n){return n===void 0&&(n=hge()),bb(t,n)},qV=function(t,n){var r={top:_s(n.marginTop),right:_s(n.marginRight),bottom:_s(n.marginBottom),left:_s(n.marginLeft)},i={top:_s(n.paddingTop),right:_s(n.paddingRight),bottom:_s(n.paddingBottom),left:_s(n.paddingLeft)},s={top:_s(n.borderTopWidth),right:_s(n.borderRightWidth),bottom:_s(n.borderBottomWidth),left:_s(n.borderLeftWidth)};return MO({borderBox:t,margin:r,padding:i,border:s})},KV=function(t){var n=t.getBoundingClientRect(),r=window.getComputedStyle(t);return qV(n,r)},tL=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function pge(e,t){return!!(e===t||tL(e)&&tL(t))}function mge(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!pge(e[n],t[n]))return!1;return!0}function _r(e,t){t===void 0&&(t=mge);var n,r=[],i,s=!1;function a(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return s&&n===this&&t(o,r)||(i=e.apply(this,o),s=!0,n=this,r=o),i}return a}var Dg=function(t){var n=[],r=null,i=function(){for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];n=o,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return i.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},i};function GV(e,t){}GV.bind(null,"warn");GV.bind(null,"error");function gc(){}function gge(e,t){return Ze({},e,{},t)}function zs(e,t,n){var r=t.map(function(i){var s=gge(n,i.options);return e.addEventListener(i.eventName,i.fn,s),function(){e.removeEventListener(i.eventName,i.fn,s)}});return function(){r.forEach(function(s){s()})}}var vge="Invariant failed";function Eb(e){this.message=e}Eb.prototype.toString=function(){return this.message};function Ae(e,t){throw new Eb(vge)}var yge=function(e){_V(t,e);function t(){for(var r,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s))||this,r.callbacks=null,r.unbind=gc,r.onWindowError=function(o){var c=r.getCallbacks();c.isDragging()&&c.tryAbort();var u=o.error;u instanceof Eb&&o.preventDefault()},r.getCallbacks=function(){if(!r.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return r.callbacks},r.setCallbacks=function(o){r.callbacks=o},r}var n=t.prototype;return n.componentDidMount=function(){this.unbind=zs(window,[{eventName:"error",fn:this.onWindowError}])},n.componentDidCatch=function(i){if(i instanceof Eb){this.setState({});return}throw i},n.componentWillUnmount=function(){this.unbind()},n.render=function(){return this.props.children(this.setCallbacks)},t}(at.Component),xge=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Sb=function(t){return t+1},bge=function(t){return`
  You have lifted an item in position `+Sb(t.source.index)+`
`},YV=function(t,n){var r=t.droppableId===n.droppableId,i=Sb(t.index),s=Sb(n.index);return r?`
      You have moved the item from position `+i+`
      to position `+s+`
    `:`
    You have moved the item from position `+i+`
    in list `+t.droppableId+`
    to list `+n.droppableId+`
    in position `+s+`
  `},XV=function(t,n,r){var i=n.droppableId===r.droppableId;return i?`
      The item `+t+`
      has been combined with `+r.draggableId:`
      The item `+t+`
      in list `+n.droppableId+`
      has been combined with `+r.draggableId+`
      in list `+r.droppableId+`
    `},wge=function(t){var n=t.destination;if(n)return YV(t.source,n);var r=t.combine;return r?XV(t.draggableId,t.source,r):"You are over an area that cannot be dropped on"},nL=function(t){return`
  The item has returned to its starting position
  of `+Sb(t.index)+`
`},Ege=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+nL(t.source)+`
    `;var n=t.destination,r=t.combine;return n?`
      You have dropped the item.
      `+YV(t.source,n)+`
    `:r?`
      You have dropped the item.
      `+XV(t.draggableId,t.source,r)+`
    `:`
    The item has been dropped while not over a drop area.
    `+nL(t.source)+`
  `},xx={dragHandleUsageInstructions:xge,onDragStart:bge,onDragUpdate:wge,onDragEnd:Ege},Ar={x:0,y:0},Hr=function(t,n){return{x:t.x+n.x,y:t.y+n.y}},ls=function(t,n){return{x:t.x-n.x,y:t.y-n.y}},vc=function(t,n){return t.x===n.x&&t.y===n.y},tp=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},vd=function(t,n,r){var i;return r===void 0&&(r=0),i={},i[t]=n,i[t==="x"?"y":"x"]=r,i},Mg=function(t,n){return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))},rL=function(t,n){return Math.min.apply(Math,n.map(function(r){return Mg(t,r)}))},QV=function(t){return function(n){return{x:t(n.x),y:t(n.y)}}},Sge=function(e,t){var n=ba({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n},K0=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},iL=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},Nge={top:0,right:0,bottom:0,left:0},_ge=function(t,n){return n?K0(t,n.scroll.diff.displacement):t},kge=function(t,n,r){if(r&&r.increasedBy){var i;return Ze({},t,(i={},i[n.end]=t[n.end]+r.increasedBy[n.line],i))}return t},Cge=function(t,n){return n&&n.shouldClipSubject?Sge(n.pageMarginBox,t):ba(t)},yh=function(e){var t=e.page,n=e.withPlaceholder,r=e.axis,i=e.frame,s=_ge(t.marginBox,i),a=kge(s,r,n),o=Cge(a,i);return{page:t,withPlaceholder:n,active:o}},RO=function(e,t){e.frame||Ae();var n=e.frame,r=ls(t,n.scroll.initial),i=tp(r),s=Ze({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:i},max:n.scroll.max}}),a=yh({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:s}),o=Ze({},e,{frame:s,subject:a});return o};function Nb(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function LO(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function Gc(e,t){if(e.find)return e.find(t);var n=LO(e,t);if(n!==-1)return e[n]}function JV(e){return Array.prototype.slice.call(e)}var ZV=_r(function(e){return e.reduce(function(t,n){return t[n.descriptor.id]=n,t},{})}),eW=_r(function(e){return e.reduce(function(t,n){return t[n.descriptor.id]=n,t},{})}),vE=_r(function(e){return Nb(e)}),Tge=_r(function(e){return Nb(e)}),np=_r(function(e,t){var n=Tge(t).filter(function(r){return e===r.descriptor.droppableId}).sort(function(r,i){return r.descriptor.index-i.descriptor.index});return n});function FO(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function yE(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var xE=_r(function(e,t){return t.filter(function(n){return n.descriptor.id!==e.descriptor.id})}),Age=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.insideDestination,s=e.previousImpact;if(!r.isCombineEnabled)return null;var a=FO(s);if(!a)return null;function o(g){var v={type:"COMBINE",combine:{draggableId:g,droppableId:r.descriptor.id}};return Ze({},s,{at:v})}var c=s.displaced.all,u=c.length?c[0]:null;if(t)return u?o(u):null;var d=xE(n,i);if(!u){if(!d.length)return null;var f=d[d.length-1];return o(f.descriptor.id)}var h=LO(d,function(g){return g.descriptor.id===u});h===-1&&Ae();var p=h-1;if(p<0)return null;var m=d[p];return o(m.descriptor.id)},rp=function(e,t){return e.descriptor.droppableId===t.descriptor.id},tW={point:Ar,value:0},Rg={invisible:{},visible:{},all:[]},jge={displaced:Rg,displacedBy:tW,at:null},Ks=function(e,t){return function(n){return e<=n&&n<=t}},nW=function(e){var t=Ks(e.top,e.bottom),n=Ks(e.left,e.right);return function(r){var i=t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right);if(i)return!0;var s=t(r.top)||t(r.bottom),a=n(r.left)||n(r.right),o=s&&a;if(o)return!0;var c=r.top<e.top&&r.bottom>e.bottom,u=r.left<e.left&&r.right>e.right,d=c&&u;if(d)return!0;var f=c&&a||u&&s;return f}},Oge=function(e){var t=Ks(e.top,e.bottom),n=Ks(e.left,e.right);return function(r){var i=t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right);return i}},BO={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},rW={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Pge=function(e){return function(t){var n=Ks(t.top,t.bottom),r=Ks(t.left,t.right);return function(i){return e===BO?n(i.top)&&n(i.bottom):r(i.left)&&r(i.right)}}},Ige=function(t,n){var r=n.frame?n.frame.scroll.diff.displacement:Ar;return K0(t,r)},Dge=function(t,n,r){return n.subject.active?r(n.subject.active)(t):!1},Mge=function(t,n,r){return r(n)(t)},$O=function(t){var n=t.target,r=t.destination,i=t.viewport,s=t.withDroppableDisplacement,a=t.isVisibleThroughFrameFn,o=s?Ige(n,r):n;return Dge(o,r,a)&&Mge(o,i,a)},Rge=function(t){return $O(Ze({},t,{isVisibleThroughFrameFn:nW}))},iW=function(t){return $O(Ze({},t,{isVisibleThroughFrameFn:Oge}))},Lge=function(t){return $O(Ze({},t,{isVisibleThroughFrameFn:Pge(t.destination.axis)}))},Fge=function(t,n,r){if(typeof r=="boolean")return r;if(!n)return!0;var i=n.invisible,s=n.visible;if(i[t])return!1;var a=s[t];return a?a.shouldAnimate:!0};function Bge(e,t){var n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return ba(DO(n,r))}function Lg(e){var t=e.afterDragging,n=e.destination,r=e.displacedBy,i=e.viewport,s=e.forceShouldAnimate,a=e.last;return t.reduce(function(c,u){var d=Bge(u,r),f=u.descriptor.id;c.all.push(f);var h=Rge({target:d,destination:n,viewport:i,withDroppableDisplacement:!0});if(!h)return c.invisible[u.descriptor.id]=!0,c;var p=Fge(f,a,s),m={draggableId:f,shouldAnimate:p};return c.visible[f]=m,c},{all:[],visible:{},invisible:{}})}function $ge(e,t){if(!e.length)return 0;var n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function sL(e){var t=e.insideDestination,n=e.inHomeList,r=e.displacedBy,i=e.destination,s=$ge(t,{inHomeList:n});return{displaced:Rg,displacedBy:r,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:s}}}}function _b(e){var t=e.draggable,n=e.insideDestination,r=e.destination,i=e.viewport,s=e.displacedBy,a=e.last,o=e.index,c=e.forceShouldAnimate,u=rp(t,r);if(o==null)return sL({insideDestination:n,inHomeList:u,displacedBy:s,destination:r});var d=Gc(n,function(g){return g.descriptor.index===o});if(!d)return sL({insideDestination:n,inHomeList:u,displacedBy:s,destination:r});var f=xE(t,n),h=n.indexOf(d),p=f.slice(h),m=Lg({afterDragging:p,destination:r,displacedBy:s,last:a,viewport:i.frame,forceShouldAnimate:c});return{displaced:m,displacedBy:s,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:o}}}}function Ac(e,t){return!!t.effected[e]}var Uge=function(e){var t=e.isMovingForward,n=e.destination,r=e.draggables,i=e.combine,s=e.afterCritical;if(!n.isCombineEnabled)return null;var a=i.draggableId,o=r[a],c=o.descriptor.index,u=Ac(a,s);return u?t?c:c-1:t?c+1:c},zge=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.insideDestination,i=e.location;if(!r.length)return null;var s=i.index,a=t?s+1:s-1,o=r[0].descriptor.index,c=r[r.length-1].descriptor.index,u=n?c:c+1;return a<o||a>u?null:a},Hge=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.draggable,i=e.draggables,s=e.destination,a=e.insideDestination,o=e.previousImpact,c=e.viewport,u=e.afterCritical,d=o.at;if(d||Ae(),d.type==="REORDER"){var f=zge({isMovingForward:t,isInHomeList:n,location:d.destination,insideDestination:a});return f==null?null:_b({draggable:r,insideDestination:a,destination:s,viewport:c,last:o.displaced,displacedBy:o.displacedBy,index:f})}var h=Uge({isMovingForward:t,destination:s,displaced:o.displaced,draggables:i,combine:d.combine,afterCritical:u});return h==null?null:_b({draggable:r,insideDestination:a,destination:s,viewport:c,last:o.displaced,displacedBy:o.displacedBy,index:h})},Vge=function(e){var t=e.displaced,n=e.afterCritical,r=e.combineWith,i=e.displacedBy,s=!!(t.visible[r]||t.invisible[r]);return Ac(r,n)?s?Ar:tp(i.point):s?i.point:Ar},Wge=function(e){var t=e.afterCritical,n=e.impact,r=e.draggables,i=yE(n);i||Ae();var s=i.draggableId,a=r[s].page.borderBox.center,o=Vge({displaced:n.displaced,afterCritical:t,combineWith:s,displacedBy:n.displacedBy});return Hr(a,o)},sW=function(t,n){return n.margin[t.start]+n.borderBox[t.size]/2},qge=function(t,n){return n.margin[t.end]+n.borderBox[t.size]/2},UO=function(t,n,r){return n[t.crossAxisStart]+r.margin[t.crossAxisStart]+r.borderBox[t.crossAxisSize]/2},aL=function(t){var n=t.axis,r=t.moveRelativeTo,i=t.isMoving;return vd(n.line,r.marginBox[n.end]+sW(n,i),UO(n,r.marginBox,i))},oL=function(t){var n=t.axis,r=t.moveRelativeTo,i=t.isMoving;return vd(n.line,r.marginBox[n.start]-qge(n,i),UO(n,r.marginBox,i))},Kge=function(t){var n=t.axis,r=t.moveInto,i=t.isMoving;return vd(n.line,r.contentBox[n.start]+sW(n,i),UO(n,r.contentBox,i))},Gge=function(e){var t=e.impact,n=e.draggable,r=e.draggables,i=e.droppable,s=e.afterCritical,a=np(i.descriptor.id,r),o=n.page,c=i.axis;if(!a.length)return Kge({axis:c,moveInto:i.page,isMoving:o});var u=t.displaced,d=t.displacedBy,f=u.all[0];if(f){var h=r[f];if(Ac(f,s))return oL({axis:c,moveRelativeTo:h.page,isMoving:o});var p=bb(h.page,d.point);return oL({axis:c,moveRelativeTo:p,isMoving:o})}var m=a[a.length-1];if(m.descriptor.id===n.descriptor.id)return o.borderBox.center;if(Ac(m.descriptor.id,s)){var g=bb(m.page,tp(s.displacedBy.point));return aL({axis:c,moveRelativeTo:g,isMoving:o})}return aL({axis:c,moveRelativeTo:m.page,isMoving:o})},_C=function(e,t){var n=e.frame;return n?Hr(t,n.scroll.diff.displacement):t},Yge=function(t){var n=t.impact,r=t.draggable,i=t.droppable,s=t.draggables,a=t.afterCritical,o=r.page.borderBox.center,c=n.at;return!i||!c?o:c.type==="REORDER"?Gge({impact:n,draggable:r,draggables:s,droppable:i,afterCritical:a}):Wge({impact:n,draggables:s,afterCritical:a})},bE=function(e){var t=Yge(e),n=e.droppable,r=n?_C(n,t):t;return r},aW=function(e,t){var n=ls(t,e.scroll.initial),r=tp(n),i=ba({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),s={frame:i,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}};return s};function lL(e,t){return e.map(function(n){return t[n]})}function Xge(e,t){for(var n=0;n<t.length;n++){var r=t[n].visible[e];if(r)return r}return null}var Qge=function(e){var t=e.impact,n=e.viewport,r=e.destination,i=e.draggables,s=e.maxScrollChange,a=aW(n,Hr(n.scroll.current,s)),o=r.frame?RO(r,Hr(r.frame.scroll.current,s)):r,c=t.displaced,u=Lg({afterDragging:lL(c.all,i),destination:r,displacedBy:t.displacedBy,viewport:a.frame,last:c,forceShouldAnimate:!1}),d=Lg({afterDragging:lL(c.all,i),destination:o,displacedBy:t.displacedBy,viewport:n.frame,last:c,forceShouldAnimate:!1}),f={},h={},p=[c,u,d];c.all.forEach(function(g){var v=Xge(g,p);if(v){h[g]=v;return}f[g]=!0});var m=Ze({},t,{displaced:{all:c.all,invisible:f,visible:h}});return m},Jge=function(e,t){return Hr(e.scroll.diff.displacement,t)},zO=function(e){var t=e.pageBorderBoxCenter,n=e.draggable,r=e.viewport,i=Jge(r,t),s=ls(i,n.page.borderBox.center);return Hr(n.client.borderBox.center,s)},oW=function(e){var t=e.draggable,n=e.destination,r=e.newPageBorderBoxCenter,i=e.viewport,s=e.withDroppableDisplacement,a=e.onlyOnMainAxis,o=a===void 0?!1:a,c=ls(r,t.page.borderBox.center),u=K0(t.page.borderBox,c),d={target:u,destination:n,withDroppableDisplacement:s,viewport:i};return o?Lge(d):iW(d)},Zge=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.draggables,s=e.previousImpact,a=e.viewport,o=e.previousPageBorderBoxCenter,c=e.previousClientSelection,u=e.afterCritical;if(!r.isEnabled)return null;var d=np(r.descriptor.id,i),f=rp(n,r),h=Age({isMovingForward:t,draggable:n,destination:r,insideDestination:d,previousImpact:s})||Hge({isMovingForward:t,isInHomeList:f,draggable:n,draggables:i,destination:r,insideDestination:d,previousImpact:s,viewport:a,afterCritical:u});if(!h)return null;var p=bE({impact:h,draggable:n,droppable:r,draggables:i,afterCritical:u}),m=oW({draggable:n,destination:r,newPageBorderBoxCenter:p,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(m){var g=zO({pageBorderBoxCenter:p,draggable:n,viewport:a});return{clientSelection:g,impact:h,scrollJumpRequest:null}}var v=ls(p,o),y=Qge({impact:h,viewport:a,destination:r,draggables:i,maxScrollChange:v});return{clientSelection:c,impact:y,scrollJumpRequest:v}},pi=function(t){var n=t.subject.active;return n||Ae(),n},e0e=function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,r=e.source,i=e.droppables,s=e.viewport,a=r.subject.active;if(!a)return null;var o=r.axis,c=Ks(a[o.start],a[o.end]),u=vE(i).filter(function(f){return f!==r}).filter(function(f){return f.isEnabled}).filter(function(f){return!!f.subject.active}).filter(function(f){return nW(s.frame)(pi(f))}).filter(function(f){var h=pi(f);return t?a[o.crossAxisEnd]<h[o.crossAxisEnd]:h[o.crossAxisStart]<a[o.crossAxisStart]}).filter(function(f){var h=pi(f),p=Ks(h[o.start],h[o.end]);return c(h[o.start])||c(h[o.end])||p(a[o.start])||p(a[o.end])}).sort(function(f,h){var p=pi(f)[o.crossAxisStart],m=pi(h)[o.crossAxisStart];return t?p-m:m-p}).filter(function(f,h,p){return pi(f)[o.crossAxisStart]===pi(p[0])[o.crossAxisStart]});if(!u.length)return null;if(u.length===1)return u[0];var d=u.filter(function(f){var h=Ks(pi(f)[o.start],pi(f)[o.end]);return h(n[o.line])});return d.length===1?d[0]:d.length>1?d.sort(function(f,h){return pi(f)[o.start]-pi(h)[o.start]})[0]:u.sort(function(f,h){var p=rL(n,iL(pi(f))),m=rL(n,iL(pi(h)));return p!==m?p-m:pi(f)[o.start]-pi(h)[o.start]})[0]},cL=function(t,n){var r=t.page.borderBox.center;return Ac(t.descriptor.id,n)?ls(r,n.displacedBy.point):r},t0e=function(t,n){var r=t.page.borderBox;return Ac(t.descriptor.id,n)?K0(r,tp(n.displacedBy.point)):r},n0e=function(e){var t=e.pageBorderBoxCenter,n=e.viewport,r=e.destination,i=e.insideDestination,s=e.afterCritical,a=i.filter(function(o){return iW({target:t0e(o,s),destination:r,viewport:n.frame,withDroppableDisplacement:!0})}).sort(function(o,c){var u=Mg(t,_C(r,cL(o,s))),d=Mg(t,_C(r,cL(c,s)));return u<d?-1:d<u?1:o.descriptor.index-c.descriptor.index});return a[0]||null},G0=_r(function(t,n){var r=n[t.line];return{value:r,point:vd(t.line,r)}}),r0e=function(t,n,r){var i=t.axis;if(t.descriptor.mode==="virtual")return vd(i.line,n[i.line]);var s=t.subject.page.contentBox[i.size],a=np(t.descriptor.id,r),o=a.reduce(function(d,f){return d+f.client.marginBox[i.size]},0),c=o+n[i.line],u=c-s;return u<=0?null:vd(i.line,u)},lW=function(t,n){return Ze({},t,{scroll:Ze({},t.scroll,{max:n})})},cW=function(t,n,r){var i=t.frame;rp(n,t)&&Ae(),t.subject.withPlaceholder&&Ae();var s=G0(t.axis,n.displaceBy).point,a=r0e(t,s,r),o={placeholderSize:s,increasedBy:a,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!i){var c=yh({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:t.frame});return Ze({},t,{subject:c})}var u=a?Hr(i.scroll.max,a):i.scroll.max,d=lW(i,u),f=yh({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:d});return Ze({},t,{subject:f,frame:d})},i0e=function(t){var n=t.subject.withPlaceholder;n||Ae();var r=t.frame;if(!r){var i=yh({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return Ze({},t,{subject:i})}var s=n.oldFrameMaxScroll;s||Ae();var a=lW(r,s),o=yh({page:t.subject.page,axis:t.axis,frame:a,withPlaceholder:null});return Ze({},t,{subject:o,frame:a})},s0e=function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,r=e.insideDestination,i=e.draggable,s=e.draggables,a=e.destination,o=e.viewport,c=e.afterCritical;if(!n){if(r.length)return null;var u={displaced:Rg,displacedBy:tW,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},d=bE({impact:u,draggable:i,droppable:a,draggables:s,afterCritical:c}),f=rp(i,a)?a:cW(a,i,s),h=oW({draggable:i,destination:f,newPageBorderBoxCenter:d,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return h?u:null}var p=t[a.axis.line]<=n.page.borderBox.center[a.axis.line],m=function(){var v=n.descriptor.index;return n.descriptor.id===i.descriptor.id||p?v:v+1}(),g=G0(a.axis,i.displaceBy);return _b({draggable:i,insideDestination:r,destination:a,viewport:o,displacedBy:g,last:Rg,index:m})},a0e=function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,r=e.draggable,i=e.isOver,s=e.draggables,a=e.droppables,o=e.viewport,c=e.afterCritical,u=e0e({isMovingForward:t,pageBorderBoxCenter:n,source:i,droppables:a,viewport:o});if(!u)return null;var d=np(u.descriptor.id,s),f=n0e({pageBorderBoxCenter:n,viewport:o,destination:u,insideDestination:d,afterCritical:c}),h=s0e({previousPageBorderBoxCenter:n,destination:u,draggable:r,draggables:s,moveRelativeTo:f,insideDestination:d,viewport:o,afterCritical:c});if(!h)return null;var p=bE({impact:h,draggable:r,droppable:u,draggables:s,afterCritical:c}),m=zO({pageBorderBoxCenter:p,draggable:r,viewport:o});return{clientSelection:m,impact:h,scrollJumpRequest:null}},us=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},o0e=function(t,n){var r=us(t);return r?n[r]:null},l0e=function(e){var t=e.state,n=e.type,r=o0e(t.impact,t.dimensions.droppables),i=!!r,s=t.dimensions.droppables[t.critical.droppable.id],a=r||s,o=a.axis.direction,c=o==="vertical"&&(n==="MOVE_UP"||n==="MOVE_DOWN")||o==="horizontal"&&(n==="MOVE_LEFT"||n==="MOVE_RIGHT");if(c&&!i)return null;var u=n==="MOVE_DOWN"||n==="MOVE_RIGHT",d=t.dimensions.draggables[t.critical.draggable.id],f=t.current.page.borderBoxCenter,h=t.dimensions,p=h.draggables,m=h.droppables;return c?Zge({isMovingForward:u,previousPageBorderBoxCenter:f,draggable:d,destination:a,draggables:p,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):a0e({isMovingForward:u,previousPageBorderBoxCenter:f,draggable:d,isOver:a,draggables:p,droppables:m,viewport:t.viewport,afterCritical:t.afterCritical})};function Eu(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function uW(e){var t=Ks(e.top,e.bottom),n=Ks(e.left,e.right);return function(i){return t(i.y)&&n(i.x)}}function c0e(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function u0e(e){var t=e.pageBorderBox,n=e.draggable,r=e.candidates,i=n.page.borderBox.center,s=r.map(function(a){var o=a.axis,c=vd(a.axis.line,t.center[o.line],a.page.borderBox.center[o.crossAxisLine]);return{id:a.descriptor.id,distance:Mg(i,c)}}).sort(function(a,o){return o.distance-a.distance});return s[0]?s[0].id:null}function d0e(e){var t=e.pageBorderBox,n=e.draggable,r=e.droppables,i=vE(r).filter(function(s){if(!s.isEnabled)return!1;var a=s.subject.active;if(!a||!c0e(t,a))return!1;if(uW(a)(t.center))return!0;var o=s.axis,c=a.center[o.crossAxisLine],u=t[o.crossAxisStart],d=t[o.crossAxisEnd],f=Ks(a[o.crossAxisStart],a[o.crossAxisEnd]),h=f(u),p=f(d);return!h&&!p?!0:h?u<c:d>c});return i.length?i.length===1?i[0].descriptor.id:u0e({pageBorderBox:t,draggable:n,candidates:i}):null}var dW=function(t,n){return ba(K0(t,n))},f0e=function(e,t){var n=e.frame;return n?dW(t,n.scroll.diff.value):t};function fW(e){var t=e.displaced,n=e.id;return!!(t.visible[n]||t.invisible[n])}function h0e(e){var t=e.draggable,n=e.closest,r=e.inHomeList;return n?r&&n.descriptor.index>t.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}var p0e=function(e){var t=e.pageBorderBoxWithDroppableScroll,n=e.draggable,r=e.destination,i=e.insideDestination,s=e.last,a=e.viewport,o=e.afterCritical,c=r.axis,u=G0(r.axis,n.displaceBy),d=u.value,f=t[c.start],h=t[c.end],p=xE(n,i),m=Gc(p,function(v){var y=v.descriptor.id,x=v.page.borderBox.center[c.line],b=Ac(y,o),S=fW({displaced:s,id:y});return b?S?h<=x:f<x-d:S?h<=x+d:f<x}),g=h0e({draggable:n,closest:m,inHomeList:rp(n,r)});return _b({draggable:n,insideDestination:i,destination:r,viewport:a,last:s,displacedBy:u,index:g})},m0e=4,g0e=function(e){var t=e.draggable,n=e.pageBorderBoxWithDroppableScroll,r=e.previousImpact,i=e.destination,s=e.insideDestination,a=e.afterCritical;if(!i.isCombineEnabled)return null;var o=i.axis,c=G0(i.axis,t.displaceBy),u=c.value,d=n[o.start],f=n[o.end],h=xE(t,s),p=Gc(h,function(g){var v=g.descriptor.id,y=g.page.borderBox,x=y[o.size],b=x/m0e,S=Ac(v,a),E=fW({displaced:r.displaced,id:v});return S?E?f>y[o.start]+b&&f<y[o.end]-b:d>y[o.start]-u+b&&d<y[o.end]-u-b:E?f>y[o.start]+u+b&&f<y[o.end]+u-b:d>y[o.start]+b&&d<y[o.end]-b});if(!p)return null;var m={displacedBy:c,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:i.descriptor.id}}};return m},hW=function(e){var t=e.pageOffset,n=e.draggable,r=e.draggables,i=e.droppables,s=e.previousImpact,a=e.viewport,o=e.afterCritical,c=dW(n.page.borderBox,t),u=d0e({pageBorderBox:c,draggable:n,droppables:i});if(!u)return jge;var d=i[u],f=np(d.descriptor.id,r),h=f0e(d,c);return g0e({pageBorderBoxWithDroppableScroll:h,draggable:n,previousImpact:s,destination:d,insideDestination:f,afterCritical:o})||p0e({pageBorderBoxWithDroppableScroll:h,draggable:n,destination:d,insideDestination:f,last:s.displaced,viewport:a,afterCritical:o})},HO=function(e,t){var n;return Ze({},e,(n={},n[t.descriptor.id]=t,n))},v0e=function(t){var n=t.previousImpact,r=t.impact,i=t.droppables,s=us(n),a=us(r);if(!s||s===a)return i;var o=i[s];if(!o.subject.withPlaceholder)return i;var c=i0e(o);return HO(i,c)},y0e=function(e){var t=e.draggable,n=e.draggables,r=e.droppables,i=e.previousImpact,s=e.impact,a=v0e({previousImpact:i,impact:s,droppables:r}),o=us(s);if(!o)return a;var c=r[o];if(rp(t,c)||c.subject.withPlaceholder)return a;var u=cW(c,t,n);return HO(a,u)},Rm=function(e){var t=e.state,n=e.clientSelection,r=e.dimensions,i=e.viewport,s=e.impact,a=e.scrollJumpRequest,o=i||t.viewport,c=r||t.dimensions,u=n||t.current.client.selection,d=ls(u,t.initial.client.selection),f={offset:d,selection:u,borderBoxCenter:Hr(t.initial.client.borderBoxCenter,d)},h={selection:Hr(f.selection,o.scroll.current),borderBoxCenter:Hr(f.borderBoxCenter,o.scroll.current),offset:Hr(f.offset,o.scroll.diff.value)},p={client:f,page:h};if(t.phase==="COLLECTING")return Ze({phase:"COLLECTING"},t,{dimensions:c,viewport:o,current:p});var m=c.draggables[t.critical.draggable.id],g=s||hW({pageOffset:h.offset,draggable:m,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:o,afterCritical:t.afterCritical}),v=y0e({draggable:m,impact:g,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables}),y=Ze({},t,{current:p,dimensions:{draggables:c.draggables,droppables:v},impact:g,viewport:o,scrollJumpRequest:a||null,forceShouldAnimate:a?!1:null});return y};function x0e(e,t){return e.map(function(n){return t[n]})}var pW=function(e){var t=e.impact,n=e.viewport,r=e.draggables,i=e.destination,s=e.forceShouldAnimate,a=t.displaced,o=x0e(a.all,r),c=Lg({afterDragging:o,destination:i,displacedBy:t.displacedBy,viewport:n.frame,forceShouldAnimate:s,last:a});return Ze({},t,{displaced:c})},mW=function(e){var t=e.impact,n=e.draggable,r=e.droppable,i=e.draggables,s=e.viewport,a=e.afterCritical,o=bE({impact:t,draggable:n,draggables:i,droppable:r,afterCritical:a});return zO({pageBorderBoxCenter:o,draggable:n,viewport:s})},gW=function(e){var t=e.state,n=e.dimensions,r=e.viewport;t.movementMode!=="SNAP"&&Ae();var i=t.impact,s=r||t.viewport,a=n||t.dimensions,o=a.draggables,c=a.droppables,u=o[t.critical.draggable.id],d=us(i);d||Ae();var f=c[d],h=pW({impact:i,viewport:s,destination:f,draggables:o}),p=mW({impact:h,draggable:u,droppable:f,draggables:o,viewport:s,afterCritical:t.afterCritical});return Rm({impact:h,clientSelection:p,state:t,dimensions:a,viewport:s})},b0e=function(e){return{index:e.index,droppableId:e.droppableId}},vW=function(e){var t=e.draggable,n=e.home,r=e.draggables,i=e.viewport,s=G0(n.axis,t.displaceBy),a=np(n.descriptor.id,r),o=a.indexOf(t);o===-1&&Ae();var c=a.slice(o+1),u=c.reduce(function(p,m){return p[m.descriptor.id]=!0,p},{}),d={inVirtualList:n.descriptor.mode==="virtual",displacedBy:s,effected:u},f=Lg({afterDragging:c,destination:n,displacedBy:s,last:null,viewport:i.frame,forceShouldAnimate:!1}),h={displaced:f,displacedBy:s,at:{type:"REORDER",destination:b0e(t.descriptor)}};return{impact:h,afterCritical:d}},w0e=function(e,t){return{draggables:e.draggables,droppables:HO(e.droppables,t)}},E0e=function(e){var t=e.draggable,n=e.offset,r=e.initialWindowScroll,i=bb(t.client,n),s=wb(i,r),a=Ze({},t,{placeholder:Ze({},t.placeholder,{client:i}),client:i,page:s});return a},S0e=function(e){var t=e.frame;return t||Ae(),t},N0e=function(e){var t=e.additions,n=e.updatedDroppables,r=e.viewport,i=r.scroll.diff.value;return t.map(function(s){var a=s.descriptor.droppableId,o=n[a],c=S0e(o),u=c.scroll.diff.value,d=Hr(i,u),f=E0e({draggable:s,offset:d,initialWindowScroll:r.scroll.initial});return f})},_0e=function(e){var t=e.state,n=e.published,r=n.modified.map(function(b){var S=t.dimensions.droppables[b.droppableId],E=RO(S,b.scroll);return E}),i=Ze({},t.dimensions.droppables,{},ZV(r)),s=eW(N0e({additions:n.additions,updatedDroppables:i,viewport:t.viewport})),a=Ze({},t.dimensions.draggables,{},s);n.removals.forEach(function(b){delete a[b]});var o={droppables:i,draggables:a},c=us(t.impact),u=c?o.droppables[c]:null,d=o.draggables[t.critical.draggable.id],f=o.droppables[t.critical.droppable.id],h=vW({draggable:d,home:f,draggables:a,viewport:t.viewport}),p=h.impact,m=h.afterCritical,g=u&&u.isCombineEnabled?t.impact:p,v=hW({pageOffset:t.current.page.offset,draggable:o.draggables[t.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:g,viewport:t.viewport,afterCritical:m}),y=Ze({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:v,onLiftImpact:p,dimensions:o,afterCritical:m,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return y;var x=Ze({phase:"DROP_PENDING"},y,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return x},kC=function(t){return t.movementMode==="SNAP"},r_=function(t,n,r){var i=w0e(t.dimensions,n);return!kC(t)||r?Rm({state:t,dimensions:i}):gW({state:t,dimensions:i})};function i_(e){return e.isDragging&&e.movementMode==="SNAP"?Ze({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var uL={phase:"IDLE",completed:null,shouldFlush:!1},k0e=function(e,t){if(e===void 0&&(e=uL),t.type==="FLUSH")return Ze({},uL,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&Ae();var n=t.payload,r=n.critical,i=n.clientSelection,s=n.viewport,a=n.dimensions,o=n.movementMode,c=a.draggables[r.draggable.id],u=a.droppables[r.droppable.id],d={selection:i,borderBoxCenter:c.client.borderBox.center,offset:Ar},f={client:d,page:{selection:Hr(d.selection,s.scroll.initial),borderBoxCenter:Hr(d.selection,s.scroll.initial),offset:Hr(d.selection,s.scroll.diff.value)}},h=vE(a.droppables).every(function(Ee){return!Ee.isFixedOnPage}),p=vW({draggable:c,home:u,draggables:a.draggables,viewport:s}),m=p.impact,g=p.afterCritical,v={phase:"DRAGGING",isDragging:!0,critical:r,movementMode:o,dimensions:a,initial:f,current:f,isWindowScrollAllowed:h,impact:m,afterCritical:g,onLiftImpact:m,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null};return v}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Ae();var y=Ze({phase:"COLLECTING"},e,{phase:"COLLECTING"});return y}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||Ae(),_0e({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Eu(e)||Ae();var x=t.payload.client;return vc(x,e.current.client.selection)?e:Rm({state:e,clientSelection:x,impact:kC(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return i_(e);Eu(e)||Ae();var b=t.payload,S=b.id,E=b.newScroll,N=e.dimensions.droppables[S];if(!N)return e;var _=RO(N,E);return r_(e,_,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Eu(e)||Ae();var k=t.payload,T=k.id,A=k.isEnabled,j=e.dimensions.droppables[T];j||Ae(),j.isEnabled===A&&Ae();var D=Ze({},j,{isEnabled:A});return r_(e,D,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Eu(e)||Ae();var I=t.payload,M=I.id,L=I.isCombineEnabled,P=e.dimensions.droppables[M];P||Ae(),P.isCombineEnabled===L&&Ae();var B=Ze({},P,{isCombineEnabled:L});return r_(e,B,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Eu(e)||Ae(),e.isWindowScrollAllowed||Ae();var R=t.payload.newScroll;if(vc(e.viewport.scroll.current,R))return i_(e);var F=aW(e.viewport,R);return kC(e)?gW({state:e,viewport:F}):Rm({state:e,viewport:F})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Eu(e))return e;var O=t.payload.maxScroll;if(vc(O,e.viewport.scroll.max))return e;var Q=Ze({},e.viewport,{scroll:Ze({},e.viewport.scroll,{max:O})});return Ze({phase:"DRAGGING"},e,{viewport:Q})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Ae();var Y=l0e({state:e,type:t.type});return Y?Rm({state:e,impact:Y.impact,clientSelection:Y.clientSelection,scrollJumpRequest:Y.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var $=t.payload.reason;e.phase!=="COLLECTING"&&Ae();var ye=Ze({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:$});return ye}if(t.type==="DROP_ANIMATE"){var Te=t.payload,U=Te.completed,K=Te.dropDuration,fe=Te.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||Ae();var oe={phase:"DROP_ANIMATING",completed:U,dropDuration:K,newHomeClientOffset:fe,dimensions:e.dimensions};return oe}if(t.type==="DROP_COMPLETE"){var le=t.payload.completed;return{phase:"IDLE",completed:le,shouldFlush:!1}}return e},C0e=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},T0e=function(t){return{type:"LIFT",payload:t}},A0e=function(t){return{type:"INITIAL_PUBLISH",payload:t}},j0e=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},O0e=function(){return{type:"COLLECTION_STARTING",payload:null}},P0e=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},I0e=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},D0e=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},yW=function(t){return{type:"MOVE",payload:t}},M0e=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},R0e=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},L0e=function(){return{type:"MOVE_UP",payload:null}},F0e=function(){return{type:"MOVE_DOWN",payload:null}},B0e=function(){return{type:"MOVE_RIGHT",payload:null}},$0e=function(){return{type:"MOVE_LEFT",payload:null}},VO=function(){return{type:"FLUSH",payload:null}},U0e=function(t){return{type:"DROP_ANIMATE",payload:t}},WO=function(t){return{type:"DROP_COMPLETE",payload:t}},xW=function(t){return{type:"DROP",payload:t}},z0e=function(t){return{type:"DROP_PENDING",payload:t}},bW=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},H0e=function(e){return function(t){var n=t.getState,r=t.dispatch;return function(i){return function(s){if(s.type!=="LIFT"){i(s);return}var a=s.payload,o=a.id,c=a.clientSelection,u=a.movementMode,d=n();d.phase==="DROP_ANIMATING"&&r(WO({completed:d.completed})),n().phase!=="IDLE"&&Ae(),r(VO()),r(C0e({draggableId:o,movementMode:u}));var f={shouldPublishImmediately:u==="SNAP"},h={draggableId:o,scrollOptions:f},p=e.startPublishing(h),m=p.critical,g=p.dimensions,v=p.viewport;r(A0e({critical:m,dimensions:g,clientSelection:c,movementMode:u,viewport:v}))}}}},V0e=function(e){return function(){return function(t){return function(n){n.type==="INITIAL_PUBLISH"&&e.dragging(),n.type==="DROP_ANIMATE"&&e.dropping(n.payload.completed.result.reason),(n.type==="FLUSH"||n.type==="DROP_COMPLETE")&&e.resting(),t(n)}}}},qO={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Fg={opacity:{drop:0,combining:.7},scale:{drop:.75}},KO={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},mu=KO.outOfTheWay+"s "+qO.outOfTheWay,Lm={fluid:"opacity "+mu,snap:"transform "+mu+", opacity "+mu,drop:function(t){var n=t+"s "+qO.drop;return"transform "+n+", opacity "+n},outOfTheWay:"transform "+mu,placeholder:"height "+mu+", width "+mu+", margin "+mu},dL=function(t){return vc(t,Ar)?null:"translate("+t.x+"px, "+t.y+"px)"},CC={moveTo:dL,drop:function(t,n){var r=dL(t);return r?n?r+" scale("+Fg.scale.drop+")":r:null}},TC=KO.minDropTime,wW=KO.maxDropTime,W0e=wW-TC,fL=1500,q0e=.6,K0e=function(e){var t=e.current,n=e.destination,r=e.reason,i=Mg(t,n);if(i<=0)return TC;if(i>=fL)return wW;var s=i/fL,a=TC+W0e*s,o=r==="CANCEL"?a*q0e:a;return Number(o.toFixed(2))},G0e=function(e){var t=e.impact,n=e.draggable,r=e.dimensions,i=e.viewport,s=e.afterCritical,a=r.draggables,o=r.droppables,c=us(t),u=c?o[c]:null,d=o[n.descriptor.droppableId],f=mW({impact:t,draggable:n,draggables:a,afterCritical:s,droppable:u||d,viewport:i}),h=ls(f,n.client.borderBox.center);return h},Y0e=function(e){var t=e.draggables,n=e.reason,r=e.lastImpact,i=e.home,s=e.viewport,a=e.onLiftImpact;if(!r.at||n!=="DROP"){var o=pW({draggables:t,impact:a,destination:i,viewport:s,forceShouldAnimate:!0});return{impact:o,didDropInsideDroppable:!1}}if(r.at.type==="REORDER")return{impact:r,didDropInsideDroppable:!0};var c=Ze({},r,{displaced:Rg});return{impact:c,didDropInsideDroppable:!0}},X0e=function(e){var t=e.getState,n=e.dispatch;return function(r){return function(i){if(i.type!=="DROP"){r(i);return}var s=t(),a=i.payload.reason;if(s.phase==="COLLECTING"){n(z0e({reason:a}));return}if(s.phase!=="IDLE"){var o=s.phase==="DROP_PENDING"&&s.isWaiting;o&&Ae(),s.phase==="DRAGGING"||s.phase==="DROP_PENDING"||Ae();var c=s.critical,u=s.dimensions,d=u.draggables[s.critical.draggable.id],f=Y0e({reason:a,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),h=f.impact,p=f.didDropInsideDroppable,m=p?FO(h):null,g=p?yE(h):null,v={index:c.draggable.index,droppableId:c.droppable.id},y={draggableId:d.descriptor.id,type:d.descriptor.type,source:v,reason:a,mode:s.movementMode,destination:m,combine:g},x=G0e({impact:h,draggable:d,dimensions:u,viewport:s.viewport,afterCritical:s.afterCritical}),b={critical:s.critical,afterCritical:s.afterCritical,result:y,impact:h},S=!vc(s.current.client.offset,x)||!!y.combine;if(!S){n(WO({completed:b}));return}var E=K0e({current:s.current.client.offset,destination:x,reason:a}),N={newHomeClientOffset:x,dropDuration:E,completed:b};n(U0e(N))}}}},EW=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function Q0e(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(n){n.target!==window&&n.target!==window.document||e()}}}function J0e(e){var t=e.onWindowScroll;function n(){t(EW())}var r=Dg(n),i=Q0e(r),s=gc;function a(){return s!==gc}function o(){a()&&Ae(),s=zs(window,[i])}function c(){a()||Ae(),r.cancel(),s(),s=gc}return{start:o,stop:c,isActive:a}}var Z0e=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},eve=function(e){var t=J0e({onWindowScroll:function(r){e.dispatch(M0e({newScroll:r}))}});return function(n){return function(r){!t.isActive()&&r.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&Z0e(r)&&t.stop(),n(r)}}},tve=function(e){var t=!1,n=!1,r=setTimeout(function(){n=!0}),i=function(a){t||n||(t=!0,e(a),clearTimeout(r))};return i.wasCalled=function(){return t},i},nve=function(){var e=[],t=function(s){var a=LO(e,function(u){return u.timerId===s});a===-1&&Ae();var o=e.splice(a,1),c=o[0];c.callback()},n=function(s){var a=setTimeout(function(){return t(a)}),o={timerId:a,callback:s};e.push(o)},r=function(){if(e.length){var s=[].concat(e);e.length=0,s.forEach(function(a){clearTimeout(a.timerId),a.callback()})}};return{add:n,flush:r}},rve=function(t,n){return t==null&&n==null?!0:t==null||n==null?!1:t.droppableId===n.droppableId&&t.index===n.index},ive=function(t,n){return t==null&&n==null?!0:t==null||n==null?!1:t.draggableId===n.draggableId&&t.droppableId===n.droppableId},sve=function(t,n){if(t===n)return!0;var r=t.draggable.id===n.draggable.id&&t.draggable.droppableId===n.draggable.droppableId&&t.draggable.type===n.draggable.type&&t.draggable.index===n.draggable.index,i=t.droppable.id===n.droppable.id&&t.droppable.type===n.droppable.type;return r&&i},Bp=function(t,n){n()},iy=function(t,n){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:n}},s_=function(t,n,r,i){if(!t){r(i(n));return}var s=tve(r),a={announce:s};t(n,a),s.wasCalled()||r(i(n))},ave=function(e,t){var n=nve(),r=null,i=function(h,p){r&&Ae(),Bp("onBeforeCapture",function(){var m=e().onBeforeCapture;if(m){var g={draggableId:h,mode:p};m(g)}})},s=function(h,p){r&&Ae(),Bp("onBeforeDragStart",function(){var m=e().onBeforeDragStart;m&&m(iy(h,p))})},a=function(h,p){r&&Ae();var m=iy(h,p);r={mode:p,lastCritical:h,lastLocation:m.source,lastCombine:null},n.add(function(){Bp("onDragStart",function(){return s_(e().onDragStart,m,t,xx.onDragStart)})})},o=function(h,p){var m=FO(p),g=yE(p);r||Ae();var v=!sve(h,r.lastCritical);v&&(r.lastCritical=h);var y=!rve(r.lastLocation,m);y&&(r.lastLocation=m);var x=!ive(r.lastCombine,g);if(x&&(r.lastCombine=g),!(!v&&!y&&!x)){var b=Ze({},iy(h,r.mode),{combine:g,destination:m});n.add(function(){Bp("onDragUpdate",function(){return s_(e().onDragUpdate,b,t,xx.onDragUpdate)})})}},c=function(){r||Ae(),n.flush()},u=function(h){r||Ae(),r=null,Bp("onDragEnd",function(){return s_(e().onDragEnd,h,t,xx.onDragEnd)})},d=function(){if(r){var h=Ze({},iy(r.lastCritical,r.mode),{combine:null,destination:null,reason:"CANCEL"});u(h)}};return{beforeCapture:i,beforeStart:s,start:a,update:o,flush:c,drop:u,abort:d}},ove=function(e,t){var n=ave(e,t);return function(r){return function(i){return function(s){if(s.type==="BEFORE_INITIAL_CAPTURE"){n.beforeCapture(s.payload.draggableId,s.payload.movementMode);return}if(s.type==="INITIAL_PUBLISH"){var a=s.payload.critical;n.beforeStart(a,s.payload.movementMode),i(s),n.start(a,s.payload.movementMode);return}if(s.type==="DROP_COMPLETE"){var o=s.payload.completed.result;n.flush(),i(s),n.drop(o);return}if(i(s),s.type==="FLUSH"){n.abort();return}var c=r.getState();c.phase==="DRAGGING"&&n.update(c.critical,c.impact)}}}},lve=function(e){return function(t){return function(n){if(n.type!=="DROP_ANIMATION_FINISHED"){t(n);return}var r=e.getState();r.phase!=="DROP_ANIMATING"&&Ae(),e.dispatch(WO({completed:r.completed}))}}},cve=function(e){var t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return function(i){return function(s){if((s.type==="FLUSH"||s.type==="DROP_COMPLETE"||s.type==="DROP_ANIMATION_FINISHED")&&r(),i(s),s.type==="DROP_ANIMATE"){var a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=e.getState();c.phase==="DROP_ANIMATING"&&e.dispatch(bW())}};n=requestAnimationFrame(function(){n=null,t=zs(window,[a])})}}}},uve=function(e){return function(){return function(t){return function(n){(n.type==="DROP_COMPLETE"||n.type==="FLUSH"||n.type==="DROP_ANIMATE")&&e.stopPublishing(),t(n)}}}},dve=function(e){var t=!1;return function(){return function(n){return function(r){if(r.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(r.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(r.type==="DROP_COMPLETE"){t=!1;var i=r.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},fve=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},hve=function(e){return function(t){return function(n){return function(r){if(fve(r)){e.stop(),n(r);return}if(r.type==="INITIAL_PUBLISH"){n(r);var i=t.getState();i.phase!=="DRAGGING"&&Ae(),e.start(i);return}n(r),e.scroll(t.getState())}}}},pve=function(e){return function(t){return function(n){if(t(n),n.type==="PUBLISH_WHILE_DRAGGING"){var r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(xW({reason:r.reason})))}}}},mve=CV,gve=function(e){var t=e.dimensionMarshal,n=e.focusMarshal,r=e.styleMarshal,i=e.getResponders,s=e.announce,a=e.autoScroller;return kV(k0e,mve(rme(V0e(r),uve(t),H0e(t),X0e,lve,cve,pve,hve(a),eve,dve(n),ove(i,s))))},a_=function(){return{additions:{},removals:{},modified:{}}};function vve(e){var t=e.registry,n=e.callbacks,r=a_(),i=null,s=function(){i||(n.collectionStarting(),i=requestAnimationFrame(function(){i=null;var d=r,f=d.additions,h=d.removals,p=d.modified,m=Object.keys(f).map(function(y){return t.draggable.getById(y).getDimension(Ar)}).sort(function(y,x){return y.descriptor.index-x.descriptor.index}),g=Object.keys(p).map(function(y){var x=t.droppable.getById(y),b=x.callbacks.getScrollWhileDragging();return{droppableId:y,scroll:b}}),v={additions:m,removals:Object.keys(h),modified:g};r=a_(),n.publish(v)}))},a=function(d){var f=d.descriptor.id;r.additions[f]=d,r.modified[d.descriptor.droppableId]=!0,r.removals[f]&&delete r.removals[f],s()},o=function(d){var f=d.descriptor;r.removals[f.id]=!0,r.modified[f.droppableId]=!0,r.additions[f.id]&&delete r.additions[f.id],s()},c=function(){i&&(cancelAnimationFrame(i),i=null,r=a_())};return{add:a,remove:o,stop:c}}var SW=function(e){var t=e.scrollHeight,n=e.scrollWidth,r=e.height,i=e.width,s=ls({x:n,y:t},{x:i,y:r}),a={x:Math.max(0,s.x),y:Math.max(0,s.y)};return a},NW=function(){var e=document.documentElement;return e||Ae(),e},_W=function(){var e=NW(),t=SW({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},yve=function(){var e=EW(),t=_W(),n=e.y,r=e.x,i=NW(),s=i.clientWidth,a=i.clientHeight,o=r+s,c=n+a,u=ba({top:n,left:r,right:o,bottom:c}),d={frame:u,scroll:{initial:e,current:e,max:t,diff:{value:Ar,displacement:Ar}}};return d},xve=function(e){var t=e.critical,n=e.scrollOptions,r=e.registry,i=yve(),s=i.scroll.current,a=t.droppable,o=r.droppable.getAllByType(a.type).map(function(f){return f.callbacks.getDimensionAndWatchScroll(s,n)}),c=r.draggable.getAllByType(t.draggable.type).map(function(f){return f.getDimension(s)}),u={draggables:eW(c),droppables:ZV(o)},d={dimensions:u,critical:t,viewport:i};return d};function hL(e,t,n){if(n.descriptor.id===t.id||n.descriptor.type!==t.type)return!1;var r=e.droppable.getById(n.descriptor.droppableId);return r.descriptor.mode==="virtual"}var bve=function(e,t){var n=null,r=vve({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=function(p,m){e.droppable.exists(p)||Ae(),n&&t.updateDroppableIsEnabled({id:p,isEnabled:m})},s=function(p,m){n&&(e.droppable.exists(p)||Ae(),t.updateDroppableIsCombineEnabled({id:p,isCombineEnabled:m}))},a=function(p,m){n&&(e.droppable.exists(p)||Ae(),t.updateDroppableScroll({id:p,newScroll:m}))},o=function(p,m){n&&e.droppable.getById(p).callbacks.scroll(m)},c=function(){if(n){r.stop();var p=n.critical.droppable;e.droppable.getAllByType(p.type).forEach(function(m){return m.callbacks.dragStopped()}),n.unsubscribe(),n=null}},u=function(p){n||Ae();var m=n.critical.draggable;p.type==="ADDITION"&&hL(e,m,p.value)&&r.add(p.value),p.type==="REMOVAL"&&hL(e,m,p.value)&&r.remove(p.value)},d=function(p){n&&Ae();var m=e.draggable.getById(p.draggableId),g=e.droppable.getById(m.descriptor.droppableId),v={draggable:m.descriptor,droppable:g.descriptor},y=e.subscribe(u);return n={critical:v,unsubscribe:y},xve({critical:v,registry:e,scrollOptions:p.scrollOptions})},f={updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:s,scrollDroppable:o,updateDroppableScroll:a,startPublishing:d,stopPublishing:c};return f},kW=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},wve=function(e){window.scrollBy(e.x,e.y)},Eve=_r(function(e){return vE(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),Sve=function(t,n){var r=Gc(Eve(n),function(i){return i.frame||Ae(),uW(i.frame.pageMarginBox)(t)});return r},Nve=function(e){var t=e.center,n=e.destination,r=e.droppables;if(n){var i=r[n];return i.frame?i:null}var s=Sve(t,r);return s},yc={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},_ve=function(e,t){var n=e[t.size]*yc.startFromPercentage,r=e[t.size]*yc.maxScrollAtPercentage,i={startScrollingFrom:n,maxScrollValueAt:r};return i},CW=function(e){var t=e.startOfRange,n=e.endOfRange,r=e.current,i=n-t;if(i===0)return 0;var s=r-t,a=s/i;return a},GO=1,kve=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return yc.maxPixelScroll;if(e===t.startScrollingFrom)return GO;var n=CW({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),r=1-n,i=yc.maxPixelScroll*yc.ease(r);return Math.ceil(i)},pL=yc.durationDampening.accelerateAt,mL=yc.durationDampening.stopDampeningAt,Cve=function(e,t){var n=t,r=mL,i=Date.now(),s=i-n;if(s>=mL)return e;if(s<pL)return GO;var a=CW({startOfRange:pL,endOfRange:r,current:s}),o=e*yc.ease(a);return Math.ceil(o)},gL=function(e){var t=e.distanceToEdge,n=e.thresholds,r=e.dragStartTime,i=e.shouldUseTimeDampening,s=kve(t,n);return s===0?0:i?Math.max(Cve(s,r),GO):s},vL=function(e){var t=e.container,n=e.distanceToEdges,r=e.dragStartTime,i=e.axis,s=e.shouldUseTimeDampening,a=_ve(t,i),o=n[i.end]<n[i.start];return o?gL({distanceToEdge:n[i.end],thresholds:a,dragStartTime:r,shouldUseTimeDampening:s}):-1*gL({distanceToEdge:n[i.start],thresholds:a,dragStartTime:r,shouldUseTimeDampening:s})},Tve=function(e){var t=e.container,n=e.subject,r=e.proposedScroll,i=n.height>t.height,s=n.width>t.width;return!s&&!i?r:s&&i?null:{x:s?0:r.x,y:i?0:r.y}},Ave=QV(function(e){return e===0?0:e}),TW=function(e){var t=e.dragStartTime,n=e.container,r=e.subject,i=e.center,s=e.shouldUseTimeDampening,a={top:i.y-n.top,right:n.right-i.x,bottom:n.bottom-i.y,left:i.x-n.left},o=vL({container:n,distanceToEdges:a,dragStartTime:t,axis:BO,shouldUseTimeDampening:s}),c=vL({container:n,distanceToEdges:a,dragStartTime:t,axis:rW,shouldUseTimeDampening:s}),u=Ave({x:c,y:o});if(vc(u,Ar))return null;var d=Tve({container:n,subject:r,proposedScroll:u});return d?vc(d,Ar)?null:d:null},jve=QV(function(e){return e===0?0:e>0?1:-1}),YO=function(){var e=function(n,r){return n<0?n:n>r?n-r:0};return function(t){var n=t.current,r=t.max,i=t.change,s=Hr(n,i),a={x:e(s.x,r.x),y:e(s.y,r.y)};return vc(a,Ar)?null:a}}(),AW=function(t){var n=t.max,r=t.current,i=t.change,s={x:Math.max(r.x,n.x),y:Math.max(r.y,n.y)},a=jve(i),o=YO({max:s,current:r,change:a});return!o||a.x!==0&&o.x===0||a.y!==0&&o.y===0},XO=function(t,n){return AW({current:t.scroll.current,max:t.scroll.max,change:n})},Ove=function(t,n){if(!XO(t,n))return null;var r=t.scroll.max,i=t.scroll.current;return YO({current:i,max:r,change:n})},QO=function(t,n){var r=t.frame;return r?AW({current:r.scroll.current,max:r.scroll.max,change:n}):!1},Pve=function(t,n){var r=t.frame;return!r||!QO(t,n)?null:YO({current:r.scroll.current,max:r.scroll.max,change:n})},Ive=function(e){var t=e.viewport,n=e.subject,r=e.center,i=e.dragStartTime,s=e.shouldUseTimeDampening,a=TW({dragStartTime:i,container:t.frame,subject:n,center:r,shouldUseTimeDampening:s});return a&&XO(t,a)?a:null},Dve=function(e){var t=e.droppable,n=e.subject,r=e.center,i=e.dragStartTime,s=e.shouldUseTimeDampening,a=t.frame;if(!a)return null;var o=TW({dragStartTime:i,container:a.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:s});return o&&QO(t,o)?o:null},yL=function(e){var t=e.state,n=e.dragStartTime,r=e.shouldUseTimeDampening,i=e.scrollWindow,s=e.scrollDroppable,a=t.current.page.borderBoxCenter,o=t.dimensions.draggables[t.critical.draggable.id],c=o.page.marginBox;if(t.isWindowScrollAllowed){var u=t.viewport,d=Ive({dragStartTime:n,viewport:u,subject:c,center:a,shouldUseTimeDampening:r});if(d){i(d);return}}var f=Nve({center:a,destination:us(t.impact),droppables:t.dimensions.droppables});if(f){var h=Dve({dragStartTime:n,droppable:f,subject:c,center:a,shouldUseTimeDampening:r});h&&s(f.descriptor.id,h)}},Mve=function(e){var t=e.scrollWindow,n=e.scrollDroppable,r=Dg(t),i=Dg(n),s=null,a=function(d){s||Ae();var f=s,h=f.shouldUseTimeDampening,p=f.dragStartTime;yL({state:d,scrollWindow:r,scrollDroppable:i,dragStartTime:p,shouldUseTimeDampening:h})},o=function(d){s&&Ae();var f=Date.now(),h=!1,p=function(){h=!0};yL({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:p,scrollDroppable:p}),s={dragStartTime:f,shouldUseTimeDampening:h},h&&a(d)},c=function(){s&&(r.cancel(),i.cancel(),s=null)};return{start:o,stop:c,scroll:a}},Rve=function(e){var t=e.move,n=e.scrollDroppable,r=e.scrollWindow,i=function(u,d){var f=Hr(u.current.client.selection,d);t({client:f})},s=function(u,d){if(!QO(u,d))return d;var f=Pve(u,d);if(!f)return n(u.descriptor.id,d),null;var h=ls(d,f);n(u.descriptor.id,h);var p=ls(d,h);return p},a=function(u,d,f){if(!u||!XO(d,f))return f;var h=Ove(d,f);if(!h)return r(f),null;var p=ls(f,h);r(p);var m=ls(f,p);return m},o=function(u){var d=u.scrollJumpRequest;if(d){var f=us(u.impact);f||Ae();var h=s(u.dimensions.droppables[f],d);if(h){var p=u.viewport,m=a(u.isWindowScrollAllowed,p,h);m&&i(u,m)}}};return o},Lve=function(e){var t=e.scrollDroppable,n=e.scrollWindow,r=e.move,i=Mve({scrollWindow:n,scrollDroppable:t}),s=Rve({move:r,scrollWindow:n,scrollDroppable:t}),a=function(u){if(u.phase==="DRAGGING"){if(u.movementMode==="FLUID"){i.scroll(u);return}u.scrollJumpRequest&&s(u)}},o={scroll:a,start:i.start,stop:i.stop};return o},xh="data-rbd",bh=function(){var e=xh+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),AC=function(){var e=xh+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Fve=function(){var e=xh+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),xL={contextId:xh+"-scroll-container-context-id"},Bve=function(t){return function(n){return"["+n+'="'+t+'"]'}},$p=function(t,n){return t.map(function(r){var i=r.styles[n];return i?r.selector+" { "+i+" }":""}).join(" ")},$ve="pointer-events: none;",Uve=function(e){var t=Bve(e),n=function(){var o=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(bh.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:o,dragging:$ve,dropAnimating:o}}}(),r=function(){var o=`
      transition: `+Lm.outOfTheWay+`;
    `;return{selector:t(AC.contextId),styles:{dragging:o,dropAnimating:o,userCancel:o}}}(),i={selector:t(Fve.contextId),styles:{always:"overflow-anchor: none;"}},s={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},a=[r,n,i,s];return{always:$p(a,"always"),resting:$p(a,"resting"),dragging:$p(a,"dragging"),dropAnimating:$p(a,"dropAnimating"),userCancel:$p(a,"userCancel")}},ds=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect,o_=function(){var t=document.querySelector("head");return t||Ae(),t},bL=function(t){var n=document.createElement("style");return t&&n.setAttribute("nonce",t),n.type="text/css",n};function zve(e,t){var n=Nt(function(){return Uve(e)},[e]),r=w.useRef(null),i=w.useRef(null),s=Ge(_r(function(f){var h=i.current;h||Ae(),h.textContent=f}),[]),a=Ge(function(f){var h=r.current;h||Ae(),h.textContent=f},[]);ds(function(){!r.current&&!i.current||Ae();var f=bL(t),h=bL(t);return r.current=f,i.current=h,f.setAttribute(xh+"-always",e),h.setAttribute(xh+"-dynamic",e),o_().appendChild(f),o_().appendChild(h),a(n.always),s(n.resting),function(){var p=function(g){var v=g.current;v||Ae(),o_().removeChild(v),g.current=null};p(r),p(i)}},[t,a,s,n.always,n.resting,e]);var o=Ge(function(){return s(n.dragging)},[s,n.dragging]),c=Ge(function(f){if(f==="DROP"){s(n.dropAnimating);return}s(n.userCancel)},[s,n.dropAnimating,n.userCancel]),u=Ge(function(){i.current&&s(n.resting)},[s,n.resting]),d=Nt(function(){return{dragging:o,dropping:c,resting:u}},[o,c,u]);return d}var jW=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function wE(e){return e instanceof jW(e).HTMLElement}function Hve(e,t){var n="["+bh.contextId+'="'+e+'"]',r=JV(document.querySelectorAll(n));if(!r.length)return null;var i=Gc(r,function(s){return s.getAttribute(bh.draggableId)===t});return!i||!wE(i)?null:i}function Vve(e){var t=w.useRef({}),n=w.useRef(null),r=w.useRef(null),i=w.useRef(!1),s=Ge(function(h,p){var m={id:h,focus:p};return t.current[h]=m,function(){var v=t.current,y=v[h];y!==m&&delete v[h]}},[]),a=Ge(function(h){var p=Hve(e,h);p&&p!==document.activeElement&&p.focus()},[e]),o=Ge(function(h,p){n.current===h&&(n.current=p)},[]),c=Ge(function(){r.current||i.current&&(r.current=requestAnimationFrame(function(){r.current=null;var h=n.current;h&&a(h)}))},[a]),u=Ge(function(h){n.current=null;var p=document.activeElement;p&&p.getAttribute(bh.draggableId)===h&&(n.current=h)},[]);ds(function(){return i.current=!0,function(){i.current=!1;var h=r.current;h&&cancelAnimationFrame(h)}},[]);var d=Nt(function(){return{register:s,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:o}},[s,u,c,o]);return d}function Wve(){var e={draggables:{},droppables:{}},t=[];function n(f){return t.push(f),function(){var p=t.indexOf(f);p!==-1&&t.splice(p,1)}}function r(f){t.length&&t.forEach(function(h){return h(f)})}function i(f){return e.draggables[f]||null}function s(f){var h=i(f);return h||Ae(),h}var a={register:function(h){e.draggables[h.descriptor.id]=h,r({type:"ADDITION",value:h})},update:function(h,p){var m=e.draggables[p.descriptor.id];m&&m.uniqueId===h.uniqueId&&(delete e.draggables[p.descriptor.id],e.draggables[h.descriptor.id]=h)},unregister:function(h){var p=h.descriptor.id,m=i(p);m&&h.uniqueId===m.uniqueId&&(delete e.draggables[p],r({type:"REMOVAL",value:h}))},getById:s,findById:i,exists:function(h){return!!i(h)},getAllByType:function(h){return Nb(e.draggables).filter(function(p){return p.descriptor.type===h})}};function o(f){return e.droppables[f]||null}function c(f){var h=o(f);return h||Ae(),h}var u={register:function(h){e.droppables[h.descriptor.id]=h},unregister:function(h){var p=o(h.descriptor.id);p&&h.uniqueId===p.uniqueId&&delete e.droppables[h.descriptor.id]},getById:c,findById:o,exists:function(h){return!!o(h)},getAllByType:function(h){return Nb(e.droppables).filter(function(p){return p.descriptor.type===h})}};function d(){e.draggables={},e.droppables={},t.length=0}return{draggable:a,droppable:u,subscribe:n,clean:d}}function qve(){var e=Nt(Wve,[]);return w.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var JO=at.createContext(null),kb=function(){var e=document.body;return e||Ae(),e},Kve={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Gve=function(t){return"rbd-announcement-"+t};function Yve(e){var t=Nt(function(){return Gve(e)},[e]),n=w.useRef(null);w.useEffect(function(){var s=document.createElement("div");return n.current=s,s.id=t,s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true"),Ze(s.style,Kve),kb().appendChild(s),function(){setTimeout(function(){var c=kb();c.contains(s)&&c.removeChild(s),s===n.current&&(n.current=null)})}},[t]);var r=Ge(function(i){var s=n.current;if(s){s.textContent=i;return}},[]);return r}var Xve=0,Qve={separator:"::"};function ZO(e,t){return t===void 0&&(t=Qve),Nt(function(){return""+e+t.separator+Xve++},[t.separator,e])}function Jve(e){var t=e.contextId,n=e.uniqueId;return"rbd-hidden-text-"+t+"-"+n}function Zve(e){var t=e.contextId,n=e.text,r=ZO("hidden-text",{separator:"-"}),i=Nt(function(){return Jve({contextId:t,uniqueId:r})},[r,t]);return w.useEffect(function(){var a=document.createElement("div");return a.id=i,a.textContent=n,a.style.display="none",kb().appendChild(a),function(){var c=kb();c.contains(a)&&c.removeChild(a)}},[i,n]),i}var EE=at.createContext(null);function OW(e){var t=w.useRef(e);return w.useEffect(function(){t.current=e}),t}function eye(){var e=null;function t(){return!!e}function n(a){return a===e}function r(a){e&&Ae();var o={abandon:a};return e=o,o}function i(){e||Ae(),e=null}function s(){e&&(e.abandon(),i())}return{isClaimed:t,isActive:n,claim:r,release:i,tryAbandon:s}}var tye=9,nye=13,eP=27,PW=32,rye=33,iye=34,sye=35,aye=36,oye=37,lye=38,cye=39,uye=40,sy,dye=(sy={},sy[nye]=!0,sy[tye]=!0,sy),IW=function(e){dye[e.keyCode]&&e.preventDefault()},SE=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],n=Gc(t,function(r){return"on"+r in document});return n||e}(),DW=0,wL=5;function fye(e,t){return Math.abs(t.x-e.x)>=wL||Math.abs(t.y-e.y)>=wL}var EL={type:"IDLE"};function hye(e){var t=e.cancel,n=e.completed,r=e.getPhase,i=e.setPhase;return[{eventName:"mousemove",fn:function(a){var o=a.button,c=a.clientX,u=a.clientY;if(o===DW){var d={x:c,y:u},f=r();if(f.type==="DRAGGING"){a.preventDefault(),f.actions.move(d);return}f.type!=="PENDING"&&Ae();var h=f.point;if(fye(h,d)){a.preventDefault();var p=f.actions.fluidLift(d);i({type:"DRAGGING",actions:p})}}}},{eventName:"mouseup",fn:function(a){var o=r();if(o.type!=="DRAGGING"){t();return}a.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"mousedown",fn:function(a){r().type==="DRAGGING"&&a.preventDefault(),t()}},{eventName:"keydown",fn:function(a){var o=r();if(o.type==="PENDING"){t();return}if(a.keyCode===eP){a.preventDefault(),t();return}IW(a)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){r().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(a){var o=r();if(o.type==="IDLE"&&Ae(),o.actions.shouldRespectForcePress()){t();return}a.preventDefault()}},{eventName:SE,fn:t}]}function pye(e){var t=w.useRef(EL),n=w.useRef(gc),r=Nt(function(){return{eventName:"mousedown",fn:function(f){if(!f.defaultPrevented&&f.button===DW&&!(f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)){var h=e.findClosestDraggableId(f);if(h){var p=e.tryGetLock(h,a,{sourceEvent:f});if(p){f.preventDefault();var m={x:f.clientX,y:f.clientY};n.current(),u(p,m)}}}}}},[e]),i=Nt(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(f){if(!f.defaultPrevented){var h=e.findClosestDraggableId(f);if(h){var p=e.findOptionsForDraggable(h);p&&(p.shouldRespectForcePress||e.canGetLock(h)&&f.preventDefault())}}}}},[e]),s=Ge(function(){var f={passive:!1,capture:!0};n.current=zs(window,[i,r],f)},[i,r]),a=Ge(function(){var d=t.current;d.type!=="IDLE"&&(t.current=EL,n.current(),s())},[s]),o=Ge(function(){var d=t.current;a(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[a]),c=Ge(function(){var f={capture:!0,passive:!1},h=hye({cancel:o,completed:a,getPhase:function(){return t.current},setPhase:function(m){t.current=m}});n.current=zs(window,h,f)},[o,a]),u=Ge(function(f,h){t.current.type!=="IDLE"&&Ae(),t.current={type:"PENDING",point:h,actions:f},c()},[c]);ds(function(){return s(),function(){n.current()}},[s])}var ef;function mye(){}var gye=(ef={},ef[iye]=!0,ef[rye]=!0,ef[aye]=!0,ef[sye]=!0,ef);function vye(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:function(s){if(s.keyCode===eP){s.preventDefault(),n();return}if(s.keyCode===PW){s.preventDefault(),r();return}if(s.keyCode===uye){s.preventDefault(),e.moveDown();return}if(s.keyCode===lye){s.preventDefault(),e.moveUp();return}if(s.keyCode===cye){s.preventDefault(),e.moveRight();return}if(s.keyCode===oye){s.preventDefault(),e.moveLeft();return}if(gye[s.keyCode]){s.preventDefault();return}IW(s)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:SE,fn:n}]}function yye(e){var t=w.useRef(mye),n=Nt(function(){return{eventName:"keydown",fn:function(s){if(s.defaultPrevented||s.keyCode!==PW)return;var a=e.findClosestDraggableId(s);if(!a)return;var o=e.tryGetLock(a,d,{sourceEvent:s});if(!o)return;s.preventDefault();var c=!0,u=o.snapLift();t.current();function d(){c||Ae(),c=!1,t.current(),r()}t.current=zs(window,vye(u,d),{capture:!0,passive:!1})}}},[e]),r=Ge(function(){var s={passive:!1,capture:!0};t.current=zs(window,[n],s)},[n]);ds(function(){return r(),function(){t.current()}},[r])}var l_={type:"IDLE"},xye=120,bye=.15;function wye(e){var t=e.cancel,n=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(i){i.preventDefault()}},{eventName:"keydown",fn:function(i){if(n().type!=="DRAGGING"){t();return}i.keyCode===eP&&i.preventDefault(),t()}},{eventName:SE,fn:t}]}function Eye(e){var t=e.cancel,n=e.completed,r=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(s){var a=r();if(a.type!=="DRAGGING"){t();return}a.hasMoved=!0;var o=s.touches[0],c=o.clientX,u=o.clientY,d={x:c,y:u};s.preventDefault(),a.actions.move(d)}},{eventName:"touchend",fn:function(s){var a=r();if(a.type!=="DRAGGING"){t();return}s.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"touchcancel",fn:function(s){if(r().type!=="DRAGGING"){t();return}s.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(s){var a=r();a.type==="IDLE"&&Ae();var o=s.touches[0];if(o){var c=o.force>=bye;if(c){var u=a.actions.shouldRespectForcePress();if(a.type==="PENDING"){u&&t();return}if(u){if(a.hasMoved){s.preventDefault();return}t();return}s.preventDefault()}}}},{eventName:SE,fn:t}]}function Sye(e){var t=w.useRef(l_),n=w.useRef(gc),r=Ge(function(){return t.current},[]),i=Ge(function(p){t.current=p},[]),s=Nt(function(){return{eventName:"touchstart",fn:function(p){if(!p.defaultPrevented){var m=e.findClosestDraggableId(p);if(m){var g=e.tryGetLock(m,o,{sourceEvent:p});if(g){var v=p.touches[0],y=v.clientX,x=v.clientY,b={x:y,y:x};n.current(),f(g,b)}}}}}},[e]),a=Ge(function(){var p={capture:!0,passive:!1};n.current=zs(window,[s],p)},[s]),o=Ge(function(){var h=t.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),i(l_),n.current(),a())},[a,i]),c=Ge(function(){var h=t.current;o(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[o]),u=Ge(function(){var p={capture:!0,passive:!1},m={cancel:c,completed:o,getPhase:r},g=zs(window,Eye(m),p),v=zs(window,wye(m),p);n.current=function(){g(),v()}},[c,r,o]),d=Ge(function(){var p=r();p.type!=="PENDING"&&Ae();var m=p.actions.fluidLift(p.point);i({type:"DRAGGING",actions:m,hasMoved:!1})},[r,i]),f=Ge(function(p,m){r().type!=="IDLE"&&Ae();var g=setTimeout(d,xye);i({type:"PENDING",point:m,actions:p,longPressTimerId:g}),u()},[u,r,i,d]);ds(function(){return a(),function(){n.current();var m=r();m.type==="PENDING"&&(clearTimeout(m.longPressTimerId),i(l_))}},[r,a,i]),ds(function(){var p=zs(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return p},[])}var Nye={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function MW(e,t){if(t==null)return!1;var n=!!Nye[t.tagName.toLowerCase()];if(n)return!0;var r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:MW(e,t.parentElement)}function _ye(e,t){var n=t.target;return wE(n)?MW(e,n):!1}var kye=function(e){return ba(e.getBoundingClientRect()).center};function Cye(e){return e instanceof jW(e).Element}var Tye=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],n=Gc(t,function(r){return r in Element.prototype});return n||e}();function RW(e,t){return e==null?null:e[Tye](t)?e:RW(e.parentElement,t)}function Aye(e,t){return e.closest?e.closest(t):RW(e,t)}function jye(e){return"["+bh.contextId+'="'+e+'"]'}function Oye(e,t){var n=t.target;if(!Cye(n))return null;var r=jye(e),i=Aye(n,r);return!i||!wE(i)?null:i}function Pye(e,t){var n=Oye(e,t);return n?n.getAttribute(bh.draggableId):null}function Iye(e,t){var n="["+AC.contextId+'="'+e+'"]',r=JV(document.querySelectorAll(n)),i=Gc(r,function(s){return s.getAttribute(AC.id)===t});return!i||!wE(i)?null:i}function Dye(e){e.preventDefault()}function ay(e){var t=e.expected,n=e.phase,r=e.isLockActive;return e.shouldWarn,!(!r()||t!==n)}function LW(e){var t=e.lockAPI,n=e.store,r=e.registry,i=e.draggableId;if(t.isClaimed())return!1;var s=r.draggable.findById(i);return!(!s||!s.options.isEnabled||!kW(n.getState(),i))}function Mye(e){var t=e.lockAPI,n=e.contextId,r=e.store,i=e.registry,s=e.draggableId,a=e.forceSensorStop,o=e.sourceEvent,c=LW({lockAPI:t,store:r,registry:i,draggableId:s});if(!c)return null;var u=i.draggable.getById(s),d=Iye(n,u.descriptor.id);if(!d||o&&!u.options.canDragInteractiveElements&&_ye(d,o))return null;var f=t.claim(a||gc),h="PRE_DRAG";function p(){return u.options.shouldRespectForcePress}function m(){return t.isActive(f)}function g(N,_){ay({expected:N,phase:h,isLockActive:m,shouldWarn:!0})&&r.dispatch(_())}var v=g.bind(null,"DRAGGING");function y(N){function _(){t.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(_(),h!=="PRE_DRAG"&&Ae()),r.dispatch(T0e(N.liftActionArgs)),h="DRAGGING";function k(T,A){if(A===void 0&&(A={shouldBlockNextClick:!1}),N.cleanup(),A.shouldBlockNextClick){var j=zs(window,[{eventName:"click",fn:Dye,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(j)}_(),r.dispatch(xW({reason:T}))}return Ze({isActive:function(){return ay({expected:"DRAGGING",phase:h,isLockActive:m,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(A){return k("DROP",A)},cancel:function(A){return k("CANCEL",A)}},N.actions)}function x(N){var _=Dg(function(T){v(function(){return yW({client:T})})}),k=y({liftActionArgs:{id:s,clientSelection:N,movementMode:"FLUID"},cleanup:function(){return _.cancel()},actions:{move:_}});return Ze({},k,{move:_})}function b(){var N={moveUp:function(){return v(L0e)},moveRight:function(){return v(B0e)},moveDown:function(){return v(F0e)},moveLeft:function(){return v($0e)}};return y({liftActionArgs:{id:s,clientSelection:kye(d),movementMode:"SNAP"},cleanup:gc,actions:N})}function S(){var N=ay({expected:"PRE_DRAG",phase:h,isLockActive:m,shouldWarn:!0});N&&t.release()}var E={isActive:function(){return ay({expected:"PRE_DRAG",phase:h,isLockActive:m,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:x,snapLift:b,abort:S};return E}var Rye=[pye,yye,Sye];function Lye(e){var t=e.contextId,n=e.store,r=e.registry,i=e.customSensors,s=e.enableDefaultSensors,a=[].concat(s?Rye:[],i||[]),o=w.useState(function(){return eye()})[0],c=Ge(function(x,b){x.isDragging&&!b.isDragging&&o.tryAbandon()},[o]);ds(function(){var x=n.getState(),b=n.subscribe(function(){var S=n.getState();c(x,S),x=S});return b},[o,n,c]),ds(function(){return o.tryAbandon},[o.tryAbandon]);for(var u=Ge(function(y){return LW({lockAPI:o,registry:r,store:n,draggableId:y})},[o,r,n]),d=Ge(function(y,x,b){return Mye({lockAPI:o,registry:r,contextId:t,store:n,draggableId:y,forceSensorStop:x,sourceEvent:b&&b.sourceEvent?b.sourceEvent:null})},[t,o,r,n]),f=Ge(function(y){return Pye(t,y)},[t]),h=Ge(function(y){var x=r.draggable.findById(y);return x?x.options:null},[r.draggable]),p=Ge(function(){o.isClaimed()&&(o.tryAbandon(),n.getState().phase!=="IDLE"&&n.dispatch(VO()))},[o,n]),m=Ge(o.isClaimed,[o]),g=Nt(function(){return{canGetLock:u,tryGetLock:d,findClosestDraggableId:f,findOptionsForDraggable:h,tryReleaseLock:p,isLockClaimed:m}},[u,d,f,h,p,m]),v=0;v<a.length;v++)a[v](g)}var Fye=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function Up(e){return e.current||Ae(),e.current}function Bye(e){var t=e.contextId,n=e.setCallbacks,r=e.sensors,i=e.nonce,s=e.dragHandleUsageInstructions,a=w.useRef(null),o=OW(e),c=Ge(function(){return Fye(o.current)},[o]),u=Yve(t),d=Zve({contextId:t,text:s}),f=zve(t,i),h=Ge(function(T){Up(a).dispatch(T)},[]),p=Nt(function(){return W4({publishWhileDragging:j0e,updateDroppableScroll:P0e,updateDroppableIsEnabled:I0e,updateDroppableIsCombineEnabled:D0e,collectionStarting:O0e},h)},[h]),m=qve(),g=Nt(function(){return bve(m,p)},[m,p]),v=Nt(function(){return Lve(Ze({scrollWindow:wve,scrollDroppable:g.scrollDroppable},W4({move:yW},h)))},[g.scrollDroppable,h]),y=Vve(t),x=Nt(function(){return gve({announce:u,autoScroller:v,dimensionMarshal:g,focusMarshal:y,getResponders:c,styleMarshal:f})},[u,v,g,y,c,f]);a.current=x;var b=Ge(function(){var T=Up(a),A=T.getState();A.phase!=="IDLE"&&T.dispatch(VO())},[]),S=Ge(function(){var T=Up(a).getState();return T.isDragging||T.phase==="DROP_ANIMATING"},[]),E=Nt(function(){return{isDragging:S,tryAbort:b}},[S,b]);n(E);var N=Ge(function(T){return kW(Up(a).getState(),T)},[]),_=Ge(function(){return Eu(Up(a).getState())},[]),k=Nt(function(){return{marshal:g,focus:y,contextId:t,canLift:N,isMovementAllowed:_,dragHandleUsageInstructionsId:d,registry:m}},[t,g,d,y,N,_,m]);return Lye({contextId:t,store:x,registry:m,customSensors:r,enableDefaultSensors:e.enableDefaultSensors!==!1}),w.useEffect(function(){return b},[b]),at.createElement(EE.Provider,{value:k},at.createElement(lme,{context:JO,store:x},e.children))}var $ye=0;function Uye(){return Nt(function(){return""+$ye++},[])}function zye(e){var t=Uye(),n=e.dragHandleUsageInstructions||xx.dragHandleUsageInstructions;return at.createElement(yge,null,function(r){return at.createElement(Bye,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var FW=function(t){return function(n){return t===n}},Hye=FW("scroll"),Vye=FW("auto"),SL=function(t,n){return n(t.overflowX)||n(t.overflowY)},Wye=function(t){var n=window.getComputedStyle(t),r={overflowX:n.overflowX,overflowY:n.overflowY};return SL(r,Hye)||SL(r,Vye)},qye=function(){return!1},Kye=function e(t){return t==null?null:t===document.body?qye()?t:null:t===document.documentElement?null:Wye(t)?t:e(t.parentElement)},jC=function(e){return{x:e.scrollLeft,y:e.scrollTop}},Gye=function e(t){if(!t)return!1;var n=window.getComputedStyle(t);return n.position==="fixed"?!0:e(t.parentElement)},Yye=function(e){var t=Kye(e),n=Gye(e);return{closestScrollable:t,isFixedOnPage:n}},Xye=function(e){var t=e.descriptor,n=e.isEnabled,r=e.isCombineEnabled,i=e.isFixedOnPage,s=e.direction,a=e.client,o=e.page,c=e.closest,u=function(){if(!c)return null;var p=c.scrollSize,m=c.client,g=SW({scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth,height:m.paddingBox.height,width:m.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:m,scrollSize:p,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:g,diff:{value:Ar,displacement:Ar}}}}(),d=s==="vertical"?BO:rW,f=yh({page:o,withPlaceholder:null,axis:d,frame:u}),h={descriptor:t,isCombineEnabled:r,isFixedOnPage:i,axis:d,isEnabled:n,client:a,page:o,frame:u,subject:f};return h},Qye=function(t,n){var r=KV(t);if(!n||t!==n)return r;var i=r.paddingBox.top-n.scrollTop,s=r.paddingBox.left-n.scrollLeft,a=i+n.scrollHeight,o=s+n.scrollWidth,c={top:i,right:o,bottom:a,left:s},u=DO(c,r.border),d=MO({borderBox:u,margin:r.margin,border:r.border,padding:r.padding});return d},Jye=function(e){var t=e.ref,n=e.descriptor,r=e.env,i=e.windowScroll,s=e.direction,a=e.isDropDisabled,o=e.isCombineEnabled,c=e.shouldClipSubject,u=r.closestScrollable,d=Qye(t,u),f=wb(d,i),h=function(){if(!u)return null;var m=KV(u),g={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:m,page:wb(m,i),scroll:jC(u),scrollSize:g,shouldClipSubject:c}}(),p=Xye({descriptor:n,isEnabled:!a,isCombineEnabled:o,isFixedOnPage:r.isFixedOnPage,direction:s,client:d,page:f,closest:h});return p},Zye={passive:!1},exe={passive:!0},NL=function(e){return e.shouldPublishImmediately?Zye:exe};function Cb(e){var t=w.useContext(e);return t||Ae(),t}var oy=function(t){return t&&t.env.closestScrollable||null};function txe(e){var t=w.useRef(null),n=Cb(EE),r=ZO("droppable"),i=n.registry,s=n.marshal,a=OW(e),o=Nt(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=w.useRef(o),u=Nt(function(){return _r(function(S,E){t.current||Ae();var N={x:S,y:E};s.updateDroppableScroll(o.id,N)})},[o.id,s]),d=Ge(function(){var S=t.current;return!S||!S.env.closestScrollable?Ar:jC(S.env.closestScrollable)},[]),f=Ge(function(){var S=d();u(S.x,S.y)},[d,u]),h=Nt(function(){return Dg(f)},[f]),p=Ge(function(){var S=t.current,E=oy(S);S&&E||Ae();var N=S.scrollOptions;if(N.shouldPublishImmediately){f();return}h()},[h,f]),m=Ge(function(S,E){t.current&&Ae();var N=a.current,_=N.getDroppableRef();_||Ae();var k=Yye(_),T={ref:_,descriptor:o,env:k,scrollOptions:E};t.current=T;var A=Jye({ref:_,descriptor:o,env:k,windowScroll:S,direction:N.direction,isDropDisabled:N.isDropDisabled,isCombineEnabled:N.isCombineEnabled,shouldClipSubject:!N.ignoreContainerClipping}),j=k.closestScrollable;return j&&(j.setAttribute(xL.contextId,n.contextId),j.addEventListener("scroll",p,NL(T.scrollOptions))),A},[n.contextId,o,p,a]),g=Ge(function(){var S=t.current,E=oy(S);return S&&E||Ae(),jC(E)},[]),v=Ge(function(){var S=t.current;S||Ae();var E=oy(S);t.current=null,E&&(h.cancel(),E.removeAttribute(xL.contextId),E.removeEventListener("scroll",p,NL(S.scrollOptions)))},[p,h]),y=Ge(function(S){var E=t.current;E||Ae();var N=oy(E);N||Ae(),N.scrollTop+=S.y,N.scrollLeft+=S.x},[]),x=Nt(function(){return{getDimensionAndWatchScroll:m,getScrollWhileDragging:g,dragStopped:v,scroll:y}},[v,m,g,y]),b=Nt(function(){return{uniqueId:r,descriptor:o,callbacks:x}},[x,o,r]);ds(function(){return c.current=b.descriptor,i.droppable.register(b),function(){t.current&&v(),i.droppable.unregister(b)}},[x,o,v,b,s,i.droppable]),ds(function(){t.current&&s.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,s]),ds(function(){t.current&&s.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,s])}function c_(){}var _L={width:0,height:0,margin:Nge},nxe=function(t){var n=t.isAnimatingOpenOnMount,r=t.placeholder,i=t.animate;return n||i==="close"?_L:{height:r.client.borderBox.height,width:r.client.borderBox.width,margin:r.client.margin}},rxe=function(t){var n=t.isAnimatingOpenOnMount,r=t.placeholder,i=t.animate,s=nxe({isAnimatingOpenOnMount:n,placeholder:r,animate:i});return{display:r.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:i!=="none"?Lm.placeholder:null}};function ixe(e){var t=w.useRef(null),n=Ge(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),r=e.animate,i=e.onTransitionEnd,s=e.onClose,a=e.contextId,o=w.useState(e.animate==="open"),c=o[0],u=o[1];w.useEffect(function(){return c?r!=="open"?(n(),u(!1),c_):t.current?c_:(t.current=setTimeout(function(){t.current=null,u(!1)}),n):c_},[r,c,n]);var d=Ge(function(h){h.propertyName==="height"&&(i(),r==="close"&&s())},[r,s,i]),f=rxe({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return at.createElement(e.placeholder.tagName,{style:f,"data-rbd-placeholder-context-id":a,onTransitionEnd:d,ref:e.innerRef})}var sxe=at.memo(ixe),tP=at.createContext(null),axe=function(e){_V(t,e);function t(){for(var r,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s))||this,r.state={isVisible:!!r.props.on,data:r.props.on,animate:r.props.shouldAnimate&&r.props.on?"open":"none"},r.onClose=function(){r.state.animate==="close"&&r.setState({isVisible:!1})},r}t.getDerivedStateFromProps=function(i,s){return i.shouldAnimate?i.on?{isVisible:!0,data:i.on,animate:"open"}:s.isVisible?{isVisible:!0,data:s.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!i.on,data:i.on,animate:"none"}};var n=t.prototype;return n.render=function(){if(!this.state.isVisible)return null;var i={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(i)},t}(at.PureComponent),kL={dragging:5e3,dropAnimating:4500},oxe=function(t,n){return n?Lm.drop(n.duration):t?Lm.snap:Lm.fluid},lxe=function(t,n){return t?n?Fg.opacity.drop:Fg.opacity.combining:null},cxe=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function uxe(e){var t=e.dimension,n=t.client,r=e.offset,i=e.combineWith,s=e.dropping,a=!!i,o=cxe(e),c=!!s,u=c?CC.drop(r,a):CC.moveTo(r),d={position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:oxe(o,s),transform:u,opacity:lxe(a,c),zIndex:c?kL.dropAnimating:kL.dragging,pointerEvents:"none"};return d}function dxe(e){return{transform:CC.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function fxe(e){return e.type==="DRAGGING"?uxe(e):dxe(e)}function hxe(e,t,n){n===void 0&&(n=Ar);var r=window.getComputedStyle(t),i=t.getBoundingClientRect(),s=qV(i,r),a=wb(s,n),o={client:s,tagName:t.tagName.toLowerCase(),display:r.display},c={x:s.marginBox.width,y:s.marginBox.height},u={descriptor:e,placeholder:o,displaceBy:c,client:s,page:a};return u}function pxe(e){var t=ZO("draggable"),n=e.descriptor,r=e.registry,i=e.getDraggableRef,s=e.canDragInteractiveElements,a=e.shouldRespectForcePress,o=e.isEnabled,c=Nt(function(){return{canDragInteractiveElements:s,shouldRespectForcePress:a,isEnabled:o}},[s,o,a]),u=Ge(function(p){var m=i();return m||Ae(),hxe(n,m,p)},[n,i]),d=Nt(function(){return{uniqueId:t,descriptor:n,options:c,getDimension:u}},[n,u,c,t]),f=w.useRef(d),h=w.useRef(!0);ds(function(){return r.draggable.register(f.current),function(){return r.draggable.unregister(f.current)}},[r.draggable]),ds(function(){if(h.current){h.current=!1;return}var p=f.current;f.current=d,r.draggable.update(d,p)},[d,r.draggable])}function mxe(e){e.preventDefault()}function gxe(e){var t=w.useRef(null),n=Ge(function(T){t.current=T},[]),r=Ge(function(){return t.current},[]),i=Cb(EE),s=i.contextId,a=i.dragHandleUsageInstructionsId,o=i.registry,c=Cb(tP),u=c.type,d=c.droppableId,f=Nt(function(){return{id:e.draggableId,index:e.index,type:u,droppableId:d}},[e.draggableId,e.index,u,d]),h=e.children,p=e.draggableId,m=e.isEnabled,g=e.shouldRespectForcePress,v=e.canDragInteractiveElements,y=e.isClone,x=e.mapped,b=e.dropAnimationFinished;if(!y){var S=Nt(function(){return{descriptor:f,registry:o,getDraggableRef:r,canDragInteractiveElements:v,shouldRespectForcePress:g,isEnabled:m}},[f,o,r,v,g,m]);pxe(S)}var E=Nt(function(){return m?{tabIndex:0,role:"button","aria-describedby":a,"data-rbd-drag-handle-draggable-id":p,"data-rbd-drag-handle-context-id":s,draggable:!1,onDragStart:mxe}:null},[s,a,p,m]),N=Ge(function(T){x.type==="DRAGGING"&&x.dropping&&T.propertyName==="transform"&&b()},[b,x]),_=Nt(function(){var T=fxe(x),A=x.type==="DRAGGING"&&x.dropping?N:null,j={innerRef:n,draggableProps:{"data-rbd-draggable-context-id":s,"data-rbd-draggable-id":p,style:T,onTransitionEnd:A},dragHandleProps:E};return j},[s,E,p,x,N,n]),k=Nt(function(){return{draggableId:f.id,type:f.type,source:{index:f.index,droppableId:f.droppableId}}},[f.droppableId,f.id,f.index,f.type]);return h(_,x.snapshot,k)}var BW=function(e,t){return e===t},$W=function(e){var t=e.combine,n=e.destination;return n?n.droppableId:t?t.droppableId:null},vxe=function(t){return t.combine?t.combine.draggableId:null},yxe=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function xxe(){var e=_r(function(i,s){return{x:i,y:s}}),t=_r(function(i,s,a,o,c){return{isDragging:!0,isClone:s,isDropAnimating:!!c,dropAnimation:c,mode:i,draggingOver:a,combineWith:o,combineTargetFor:null}}),n=_r(function(i,s,a,o,c,u,d){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:s,offset:i,dimension:a,forceShouldAnimate:d,snapshot:t(s,o,c,u,null)}}}),r=function(s,a){if(s.isDragging){if(s.critical.draggable.id!==a.draggableId)return null;var o=s.current.client.offset,c=s.dimensions.draggables[a.draggableId],u=us(s.impact),d=yxe(s.impact),f=s.forceShouldAnimate;return n(e(o.x,o.y),s.movementMode,c,a.isClone,u,d,f)}if(s.phase==="DROP_ANIMATING"){var h=s.completed;if(h.result.draggableId!==a.draggableId)return null;var p=a.isClone,m=s.dimensions.draggables[a.draggableId],g=h.result,v=g.mode,y=$W(g),x=vxe(g),b=s.dropDuration,S={duration:b,curve:qO.drop,moveTo:s.newHomeClientOffset,opacity:x?Fg.opacity.drop:null,scale:x?Fg.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:m,dropping:S,draggingOver:y,combineWith:x,mode:v,forceShouldAnimate:null,snapshot:t(v,p,y,x,S)}}}return null};return r}function UW(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var bxe={mapped:{type:"SECONDARY",offset:Ar,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:UW(null)}};function wxe(){var e=_r(function(a,o){return{x:a,y:o}}),t=_r(UW),n=_r(function(a,o,c){return o===void 0&&(o=null),{mapped:{type:"SECONDARY",offset:a,combineTargetFor:o,shouldAnimateDisplacement:c,snapshot:t(o)}}}),r=function(o){return o?n(Ar,o,!0):null},i=function(o,c,u,d){var f=u.displaced.visible[o],h=!!(d.inVirtualList&&d.effected[o]),p=yE(u),m=p&&p.draggableId===o?c:null;if(!f){if(!h)return r(m);if(u.displaced.invisible[o])return null;var g=tp(d.displacedBy.point),v=e(g.x,g.y);return n(v,m,!0)}if(h)return r(m);var y=u.displacedBy.point,x=e(y.x,y.y);return n(x,m,f.shouldAnimate)},s=function(o,c){if(o.isDragging)return o.critical.draggable.id===c.draggableId?null:i(c.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){var u=o.completed;return u.result.draggableId===c.draggableId?null:i(c.draggableId,u.result.draggableId,u.impact,u.afterCritical)}return null};return s}var Exe=function(){var t=xxe(),n=wxe(),r=function(s,a){return t(s,a)||n(s,a)||bxe};return r},Sxe={dropAnimationFinished:bW},Nxe=HV(Exe,Sxe,null,{context:JO,pure:!0,areStatePropsEqual:BW})(gxe);function zW(e){var t=Cb(tP),n=t.isUsingCloneFor;return n===e.draggableId&&!e.isClone?null:at.createElement(Nxe,e)}function _xe(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return at.createElement(zW,Ze({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}function kxe(e){var t=w.useContext(EE);t||Ae();var n=t.contextId,r=t.isMovementAllowed,i=w.useRef(null),s=w.useRef(null),a=e.children,o=e.droppableId,c=e.type,u=e.mode,d=e.direction,f=e.ignoreContainerClipping,h=e.isDropDisabled,p=e.isCombineEnabled,m=e.snapshot,g=e.useClone,v=e.updateViewportMaxScroll,y=e.getContainerForClone,x=Ge(function(){return i.current},[]),b=Ge(function(j){i.current=j},[]);Ge(function(){return s.current},[]);var S=Ge(function(j){s.current=j},[]),E=Ge(function(){r()&&v({maxScroll:_W()})},[r,v]);txe({droppableId:o,type:c,mode:u,direction:d,isDropDisabled:h,isCombineEnabled:p,ignoreContainerClipping:f,getDroppableRef:x});var N=at.createElement(axe,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(j){var D=j.onClose,I=j.data,M=j.animate;return at.createElement(sxe,{placeholder:I,onClose:D,innerRef:S,animate:M,contextId:n,onTransitionEnd:E})}),_=Nt(function(){return{innerRef:b,placeholder:N,droppableProps:{"data-rbd-droppable-id":o,"data-rbd-droppable-context-id":n}}},[n,o,N,b]),k=g?g.dragging.draggableId:null,T=Nt(function(){return{droppableId:o,type:c,isUsingCloneFor:k}},[o,k,c]);function A(){if(!g)return null;var j=g.dragging,D=g.render,I=at.createElement(zW,{draggableId:j.draggableId,index:j.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(M,L){return D(M,L,j)});return nO.createPortal(I,y())}return at.createElement(tP.Provider,{value:T},a(_,m),A())}var u_=function(t,n){return t===n.droppable.type},CL=function(t,n){return n.draggables[t.draggable.id]},Cxe=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},n=Ze({},t,{shouldAnimatePlaceholder:!1}),r=_r(function(a){return{draggableId:a.id,type:a.type,source:{index:a.index,droppableId:a.droppableId}}}),i=_r(function(a,o,c,u,d,f){var h=d.descriptor.id,p=d.descriptor.droppableId===a;if(p){var m=f?{render:f,dragging:r(d.descriptor)}:null,g={isDraggingOver:c,draggingOverWith:c?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:g,useClone:m}}if(!o)return n;if(!u)return t;var v={isDraggingOver:c,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:v,useClone:null}}),s=function(o,c){var u=c.droppableId,d=c.type,f=!c.isDropDisabled,h=c.renderClone;if(o.isDragging){var p=o.critical;if(!u_(d,p))return n;var m=CL(p,o.dimensions),g=us(o.impact)===u;return i(u,f,g,g,m,h)}if(o.phase==="DROP_ANIMATING"){var v=o.completed;if(!u_(d,v.critical))return n;var y=CL(v.critical,o.dimensions);return i(u,f,$W(v.result)===u,us(v.impact)===u,y,h)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){var x=o.completed;if(!u_(d,x.critical))return n;var b=us(x.impact)===u,S=!!(x.impact.at&&x.impact.at.type==="COMBINE"),E=x.critical.droppable.id===u;return b?S?t:n:E?t:n}return n};return s},Txe={updateViewportMaxScroll:R0e};function Axe(){return document.body||Ae(),document.body}var jxe={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Axe},HW=HV(Cxe,Txe,null,{context:JO,pure:!0,areStatePropsEqual:BW})(kxe);HW.defaultProps=jxe;const Z=w.forwardRef(({className:e,...t},n)=>l.jsx("div",{ref:n,className:Re("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Z.displayName="Card";const de=w.forwardRef(({className:e,...t},n)=>l.jsx("div",{ref:n,className:Re("flex flex-col space-y-1.5 p-6",e),...t}));de.displayName="CardHeader";const he=w.forwardRef(({className:e,...t},n)=>l.jsx("h3",{ref:n,className:Re("text-2xl font-semibold leading-none tracking-tight",e),...t}));he.displayName="CardTitle";const br=w.forwardRef(({className:e,...t},n)=>l.jsx("p",{ref:n,className:Re("text-sm text-muted-foreground",e),...t}));br.displayName="CardDescription";const ee=w.forwardRef(({className:e,...t},n)=>l.jsx("div",{ref:n,className:Re("p-6 pt-0",e),...t}));ee.displayName="CardContent";const Oxe=w.forwardRef(({className:e,...t},n)=>l.jsx("div",{ref:n,className:Re("flex items-center p-6 pt-0",e),...t}));Oxe.displayName="CardFooter";function Pxe(e){const[t,n]=w.useState([]),[r,i]=w.useState(!0),[s,a]=w.useState(null),o=[{widget_type:"company-motto",title:"Company Motto",position_x:0,position_y:0,width:3,height:1,config:{motto:"Building the future, one project at a time."}},{widget_type:"monthly-expenses",title:"Monthly Expenses",position_x:0,position_y:1,width:1,height:1},{widget_type:"time-logged",title:"Time Logged",position_x:1,position_y:1,width:1,height:1},{widget_type:"quick-stats",title:"Quick Stats",position_x:2,position_y:1,width:1,height:1},{widget_type:"revenue-chart",title:"Revenue Chart",position_x:0,position_y:2,width:2,height:1},{widget_type:"recent-activities",title:"Recent Activities",position_x:2,position_y:2,width:1,height:1},{widget_type:"projects-overview",title:"Projects Overview",position_x:0,position_y:3,width:2,height:1},{widget_type:"cash-flow",title:"Cash Flow",position_x:2,position_y:3,width:1,height:1},{widget_type:"cash-flow-projections",title:"Cash Flow Projections",position_x:0,position_y:4,width:2,height:1}],c=v=>({id:v.id,type:v.widget_type,title:v.title,size:{w:v.width,h:v.height},position:{x:v.position_x,y:v.position_y,w:v.width,h:v.height},config:v.config}),u=async()=>{if(!e){i(!1);return}try{i(!0),a(null);const{data:v,error:y}=await ie.from("dashboard_widgets").select("*").eq("user_id",e).eq("is_visible",!0).order("position_y",{ascending:!0}).order("position_x",{ascending:!0});if(y)throw y;if(!v||v.length===0){await d();return}const x=v.map(c);n(x)}catch(v){console.error("Error fetching widgets:",v),a(v instanceof Error?v.message:"Failed to load widgets"),f()}finally{i(!1)}},d=async()=>{if(e)try{const v=o.map(S=>({...S,user_id:e})),{data:y,error:x}=await ie.from("dashboard_widgets").insert(v).select();if(x)throw x;const b=y.map(c);n(b)}catch(v){console.error("Error creating default widgets:",v),f()}},f=()=>{const v=localStorage.getItem(`widgets_${e}`);if(v)try{n(JSON.parse(v))}catch(y){console.error("Error loading widgets from localStorage:",y);const x=o.map((b,S)=>({id:(S+1).toString(),type:b.widget_type,title:b.title,size:{w:b.width,h:b.height},position:{x:b.position_x,y:b.position_y,w:b.width,h:b.height},config:b.config}));n(x)}},h=async v=>{if(n(v),e){localStorage.setItem(`widgets_${e}`,JSON.stringify(v));try{const y=v.map(x=>({id:x.id,position_x:x.position.x,position_y:x.position.y,width:x.size.w,height:x.size.h,title:x.title,config:x.config}));for(const x of y)await ie.from("dashboard_widgets").update(x).eq("id",x.id).eq("user_id",e)}catch(y){console.error("Error saving widgets to Supabase:",y),a("Failed to save widget positions")}}},p=async v=>{if(e)try{const y={user_id:e,widget_type:v.type,title:v.title,position_x:v.position.x,position_y:v.position.y,width:v.size.w,height:v.size.h,config:v.config||{}},{data:x,error:b}=await ie.from("dashboard_widgets").insert([y]).select().single();if(b)throw b;const S=c(x),E=[...t,S];n(E),localStorage.setItem(`widgets_${e}`,JSON.stringify(E))}catch(y){console.error("Error adding widget:",y),a("Failed to add widget");const x=[...t,v];n(x),localStorage.setItem(`widgets_${e}`,JSON.stringify(x))}},m=async v=>{if(e)try{const{error:y}=await ie.from("dashboard_widgets").delete().eq("id",v).eq("user_id",e);if(y)throw y;const x=t.filter(b=>b.id!==v);n(x),localStorage.setItem(`widgets_${e}`,JSON.stringify(x))}catch(y){console.error("Error removing widget:",y),a("Failed to remove widget");const x=t.filter(b=>b.id!==v);n(x),localStorage.setItem(`widgets_${e}`,JSON.stringify(x))}},g=async(v,y)=>{if(e)try{const x={};y.title&&(x.title=y.title),y.config&&(x.config=y.config),y.position&&(x.position_x=y.position.x,x.position_y=y.position.y),y.size&&(x.width=y.size.w,x.height=y.size.h);const{error:b}=await ie.from("dashboard_widgets").update(x).eq("id",v).eq("user_id",e);if(b)throw b;const S=t.map(E=>E.id===v?{...E,...y}:E);n(S),localStorage.setItem(`widgets_${e}`,JSON.stringify(S))}catch(x){console.error("Error updating widget:",x),a("Failed to update widget");const b=t.map(S=>S.id===v?{...S,...y}:S);n(b),localStorage.setItem(`widgets_${e}`,JSON.stringify(b))}};return w.useEffect(()=>{u()},[e]),{widgets:t,loading:r,error:s,updateWidgets:h,addWidget:p,removeWidget:m,updateWidget:g,refetch:u}}const xo=()=>{const[e,t]=w.useState([]),n=w.useCallback(({title:i,description:s,variant:a="default"})=>{const o=Math.random().toString(36).substr(2,9),c={id:o,title:i,description:s,variant:a};return t(u=>[...u,c]),console.log(`Toast: ${i}${s?` - ${s}`:""}`),setTimeout(()=>{t(u=>u.filter(d=>d.id!==o))},3e3),{id:o}},[]),r=w.useCallback(i=>{t(s=>s.filter(a=>a.id!==i))},[]);return{toast:n,dismiss:r,toasts:e}};function Ixe(){const[e,t]=w.useState(null),[n,r]=w.useState(!0),{user:i}=jr(),{toast:s}=xo(),a=w.useCallback(async()=>{if(!i){r(!1);return}try{const{data:d,error:f}=await ie.from("user_profiles").select("*").eq("id",i.id).single();if(f)if(f.code==="PGRST116"){const{data:h,error:p}=await ie.from("user_profiles").insert([{id:i.id,company_motto:"Building the future, one project at a time."}]).select().single();p?(console.error("Error creating profile:",p),s({title:"Error",description:"Failed to create user profile",variant:"destructive"})):t(h)}else console.error("Error fetching profile:",f),s({title:"Error",description:"Failed to load user profile",variant:"destructive"});else t(d)}catch(d){console.error("Error:",d),s({title:"Error",description:"An unexpected error occurred",variant:"destructive"})}finally{r(!1)}},[i,s]),o=async d=>{if(!i||!e)return!1;try{const{data:f,error:h}=await ie.from("user_profiles").update({company_motto:d,updated_at:new Date().toISOString()}).eq("id",i.id).select().single();return h?(console.error("Error updating motto:",h),s({title:"Error",description:"Failed to save company motto",variant:"destructive"}),!1):(t(f),s({title:"Success",description:"Company motto updated successfully"}),!0)}catch(f){return console.error("Error:",f),s({title:"Error",description:"An unexpected error occurred",variant:"destructive"}),!1}},c=async d=>{if(!i||!e)return!1;try{const{data:f,error:h}=await ie.from("user_profiles").update({...d,updated_at:new Date().toISOString()}).eq("id",i.id).select().single();return h?(console.error("Error updating profile:",h),s({title:"Error",description:"Failed to update profile",variant:"destructive"}),!1):(t(f),s({title:"Success",description:"Profile updated successfully"}),!0)}catch(f){return console.error("Error:",f),s({title:"Error",description:"An unexpected error occurred",variant:"destructive"}),!1}},u=async d=>{if(!i||!e)return!1;try{const{data:f,error:h}=await ie.from("user_profiles").update({company_subtext:d,updated_at:new Date().toISOString()}).eq("id",i.id).select().single();return h?(console.error("Error updating company subtext:",h),s({title:"Error",description:"Failed to update company subtext",variant:"destructive"}),!1):(t(f),s({title:"Success",description:"Company subtext updated successfully"}),!0)}catch(f){return console.error("Error:",f),s({title:"Error",description:"An unexpected error occurred",variant:"destructive"}),!1}};return w.useEffect(()=>{a()},[a]),{profile:e,loading:n,updateCompanyMotto:o,updateCompanySubtext:u,updateProfile:c,refetch:a}}const VW=w.createContext({});function Dxe(e){const t=w.useRef(null);return t.current===null&&(t.current=e()),t.current}const nP=typeof window<"u",Mxe=nP?w.useLayoutEffect:w.useEffect,rP=w.createContext(null);function iP(e,t){e.indexOf(t)===-1&&e.push(t)}function sP(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const il=(e,t,n)=>n>t?t:n<e?e:n;let aP=()=>{};const sl={},WW=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function qW(e){return typeof e=="object"&&e!==null}const KW=e=>/^0[^.\s]+$/u.test(e);function oP(e){let t;return()=>(t===void 0&&(t=e()),t)}const Gs=e=>e,Rxe=(e,t)=>n=>t(e(n)),Y0=(...e)=>e.reduce(Rxe),Bg=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class lP{constructor(){this.subscriptions=[]}add(t){return iP(this.subscriptions,t),()=>sP(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const io=e=>e*1e3,so=e=>e/1e3;function GW(e,t){return t?e*(1e3/t):0}const YW=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Lxe=1e-7,Fxe=12;function Bxe(e,t,n,r,i){let s,a,o=0;do a=t+(n-t)/2,s=YW(a,r,i)-e,s>0?n=a:t=a;while(Math.abs(s)>Lxe&&++o<Fxe);return a}function X0(e,t,n,r){if(e===t&&n===r)return Gs;const i=s=>Bxe(s,0,1,e,n);return s=>s===0||s===1?s:YW(i(s),t,r)}const XW=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,QW=e=>t=>1-e(1-t),JW=X0(.33,1.53,.69,.99),cP=QW(JW),ZW=XW(cP),eq=e=>(e*=2)<1?.5*cP(e):.5*(2-Math.pow(2,-10*(e-1))),uP=e=>1-Math.sin(Math.acos(e)),tq=QW(uP),nq=XW(uP),$xe=X0(.42,0,1,1),Uxe=X0(0,0,.58,1),rq=X0(.42,0,.58,1),zxe=e=>Array.isArray(e)&&typeof e[0]!="number",iq=e=>Array.isArray(e)&&typeof e[0]=="number",Hxe={linear:Gs,easeIn:$xe,easeInOut:rq,easeOut:Uxe,circIn:uP,circInOut:nq,circOut:tq,backIn:cP,backInOut:ZW,backOut:JW,anticipate:eq},Vxe=e=>typeof e=="string",TL=e=>{if(iq(e)){aP(e.length===4);const[t,n,r,i]=e;return X0(t,n,r,i)}else if(Vxe(e))return Hxe[e];return e},ly=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Wxe(e,t){let n=new Set,r=new Set,i=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(d){a.has(d)&&(u.schedule(d),e()),d(o)}const u={schedule:(d,f=!1,h=!1)=>{const m=h&&i?n:r;return f&&a.add(d),m.has(d)||m.add(d),d},cancel:d=>{r.delete(d),a.delete(d)},process:d=>{if(o=d,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,s&&(s=!1,u.process(d))}};return u}const qxe=40;function sq(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=ly.reduce((b,S)=>(b[S]=Wxe(s),b),{}),{setup:o,read:c,resolveKeyframes:u,preUpdate:d,update:f,preRender:h,render:p,postRender:m}=a,g=()=>{const b=sl.useManualTiming?i.timestamp:performance.now();n=!1,sl.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(b-i.timestamp,qxe),1)),i.timestamp=b,i.isProcessing=!0,o.process(i),c.process(i),u.process(i),d.process(i),f.process(i),h.process(i),p.process(i),m.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(g))},v=()=>{n=!0,r=!0,i.isProcessing||e(g)};return{schedule:ly.reduce((b,S)=>{const E=a[S];return b[S]=(N,_=!1,k=!1)=>(n||v(),E.schedule(N,_,k)),b},{}),cancel:b=>{for(let S=0;S<ly.length;S++)a[ly[S]].cancel(b)},state:i,steps:a}}const{schedule:xn,cancel:jc,state:Fr,steps:d_}=sq(typeof requestAnimationFrame<"u"?requestAnimationFrame:Gs,!0);let bx;function Kxe(){bx=void 0}const Li={now:()=>(bx===void 0&&Li.set(Fr.isProcessing||sl.useManualTiming?Fr.timestamp:performance.now()),bx),set:e=>{bx=e,queueMicrotask(Kxe)}},aq=e=>t=>typeof t=="string"&&t.startsWith(e),dP=aq("--"),Gxe=aq("var(--"),fP=e=>Gxe(e)?Yxe.test(e.split("/*")[0].trim()):!1,Yxe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ip={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},$g={...ip,transform:e=>il(0,1,e)},cy={...ip,default:1},Fm=e=>Math.round(e*1e5)/1e5,hP=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Xxe(e){return e==null}const Qxe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,pP=(e,t)=>n=>!!(typeof n=="string"&&Qxe.test(n)&&n.startsWith(e)||t&&!Xxe(n)&&Object.prototype.hasOwnProperty.call(n,t)),oq=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(hP);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},Jxe=e=>il(0,255,e),f_={...ip,transform:e=>Math.round(Jxe(e))},Du={test:pP("rgb","red"),parse:oq("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+f_.transform(e)+", "+f_.transform(t)+", "+f_.transform(n)+", "+Fm($g.transform(r))+")"};function Zxe(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const OC={test:pP("#"),parse:Zxe,transform:Du.transform},Q0=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Il=Q0("deg"),ao=Q0("%"),nt=Q0("px"),ebe=Q0("vh"),tbe=Q0("vw"),AL={...ao,parse:e=>ao.parse(e)/100,transform:e=>ao.transform(e*100)},If={test:pP("hsl","hue"),parse:oq("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+ao.transform(Fm(t))+", "+ao.transform(Fm(n))+", "+Fm($g.transform(r))+")"},Kn={test:e=>Du.test(e)||OC.test(e)||If.test(e),parse:e=>Du.test(e)?Du.parse(e):If.test(e)?If.parse(e):OC.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Du.transform(e):If.transform(e),getAnimatableNone:e=>{const t=Kn.parse(e);return t.alpha=0,Kn.transform(t)}},nbe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function rbe(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(hP))==null?void 0:t.length)||0)+(((n=e.match(nbe))==null?void 0:n.length)||0)>0}const lq="number",cq="color",ibe="var",sbe="var(",jL="${}",abe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ug(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=t.replace(abe,c=>(Kn.test(c)?(r.color.push(s),i.push(cq),n.push(Kn.parse(c))):c.startsWith(sbe)?(r.var.push(s),i.push(ibe),n.push(c)):(r.number.push(s),i.push(lq),n.push(parseFloat(c))),++s,jL)).split(jL);return{values:n,split:o,indexes:r,types:i}}function uq(e){return Ug(e).values}function dq(e){const{split:t,types:n}=Ug(e),r=t.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=t[a],i[a]!==void 0){const o=n[a];o===lq?s+=Fm(i[a]):o===cq?s+=Kn.transform(i[a]):s+=i[a]}return s}}const obe=e=>typeof e=="number"?0:Kn.test(e)?Kn.getAnimatableNone(e):e;function lbe(e){const t=uq(e);return dq(e)(t.map(obe))}const Oc={test:rbe,parse:uq,createTransformer:dq,getAnimatableNone:lbe};function h_(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function cbe({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,a=0;if(!t)i=s=a=n;else{const o=n<.5?n*(1+t):n+t-n*t,c=2*n-o;i=h_(c,o,e+1/3),s=h_(c,o,e),a=h_(c,o,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function Tb(e,t){return n=>n>0?t:e}const Nn=(e,t,n)=>e+(t-e)*n,p_=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},ube=[OC,Du,If],dbe=e=>ube.find(t=>t.test(e));function OL(e){const t=dbe(e);if(!t)return!1;let n=t.parse(e);return t===If&&(n=cbe(n)),n}const PL=(e,t)=>{const n=OL(e),r=OL(t);if(!n||!r)return Tb(e,t);const i={...n};return s=>(i.red=p_(n.red,r.red,s),i.green=p_(n.green,r.green,s),i.blue=p_(n.blue,r.blue,s),i.alpha=Nn(n.alpha,r.alpha,s),Du.transform(i))},PC=new Set(["none","hidden"]);function fbe(e,t){return PC.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function hbe(e,t){return n=>Nn(e,t,n)}function mP(e){return typeof e=="number"?hbe:typeof e=="string"?fP(e)?Tb:Kn.test(e)?PL:gbe:Array.isArray(e)?fq:typeof e=="object"?Kn.test(e)?PL:pbe:Tb}function fq(e,t){const n=[...e],r=n.length,i=e.map((s,a)=>mP(s)(s,t[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}}function pbe(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=mP(e[i])(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function mbe(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],a=e.indexes[s][r[s]],o=e.values[a]??0;n[i]=o,r[s]++}return n}const gbe=(e,t)=>{const n=Oc.createTransformer(t),r=Ug(e),i=Ug(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?PC.has(e)&&!i.values.length||PC.has(t)&&!r.values.length?fbe(e,t):Y0(fq(mbe(r,i),i.values),n):Tb(e,t)};function hq(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Nn(e,t,n):mP(e)(e,t)}const vbe=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>xn.update(t,n),stop:()=>jc(t),now:()=>Fr.isProcessing?Fr.timestamp:Li.now()}},pq=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=Math.round(e(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Ab=2e4;function gP(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Ab;)t+=n,r=e.next(t);return t>=Ab?1/0:t}function ybe(e,t=100,n){const r=n({...e,keyframes:[0,t]}),i=Math.min(gP(r),Ab);return{type:"keyframes",ease:s=>r.next(i*s).value/t,duration:so(i)}}const xbe=5;function mq(e,t,n){const r=Math.max(t-xbe,0);return GW(n-e(r),t-r)}const Pn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},m_=.001;function bbe({duration:e=Pn.duration,bounce:t=Pn.bounce,velocity:n=Pn.velocity,mass:r=Pn.mass}){let i,s,a=1-t;a=il(Pn.minDamping,Pn.maxDamping,a),e=il(Pn.minDuration,Pn.maxDuration,so(e)),a<1?(i=u=>{const d=u*a,f=d*e,h=d-n,p=IC(u,a),m=Math.exp(-f);return m_-h/p*m},s=u=>{const f=u*a*e,h=f*n+n,p=Math.pow(a,2)*Math.pow(u,2)*e,m=Math.exp(-f),g=IC(Math.pow(u,2),a);return(-i(u)+m_>0?-1:1)*((h-p)*m)/g}):(i=u=>{const d=Math.exp(-u*e),f=(u-n)*e+1;return-m_+d*f},s=u=>{const d=Math.exp(-u*e),f=(n-u)*(e*e);return d*f});const o=5/e,c=Ebe(i,s,o);if(e=io(e),isNaN(c))return{stiffness:Pn.stiffness,damping:Pn.damping,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:e}}}const wbe=12;function Ebe(e,t,n){let r=n;for(let i=1;i<wbe;i++)r=r-e(r)/t(r);return r}function IC(e,t){return e*Math.sqrt(1-t*t)}const Sbe=["duration","bounce"],Nbe=["stiffness","damping","mass"];function IL(e,t){return t.some(n=>e[n]!==void 0)}function _be(e){let t={velocity:Pn.velocity,stiffness:Pn.stiffness,damping:Pn.damping,mass:Pn.mass,isResolvedFromDuration:!1,...e};if(!IL(e,Nbe)&&IL(e,Sbe))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*il(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Pn.mass,stiffness:i,damping:s}}else{const n=bbe(e);t={...t,...n,mass:Pn.mass},t.isResolvedFromDuration=!0}return t}function jb(e=Pn.visualDuration,t=Pn.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:c,damping:u,mass:d,duration:f,velocity:h,isResolvedFromDuration:p}=_be({...n,velocity:-so(n.velocity||0)}),m=h||0,g=u/(2*Math.sqrt(c*d)),v=a-s,y=so(Math.sqrt(c/d)),x=Math.abs(v)<5;r||(r=x?Pn.restSpeed.granular:Pn.restSpeed.default),i||(i=x?Pn.restDelta.granular:Pn.restDelta.default);let b;if(g<1){const E=IC(y,g);b=N=>{const _=Math.exp(-g*y*N);return a-_*((m+g*y*v)/E*Math.sin(E*N)+v*Math.cos(E*N))}}else if(g===1)b=E=>a-Math.exp(-y*E)*(v+(m+y*v)*E);else{const E=y*Math.sqrt(g*g-1);b=N=>{const _=Math.exp(-g*y*N),k=Math.min(E*N,300);return a-_*((m+g*y*v)*Math.sinh(k)+E*v*Math.cosh(k))/E}}const S={calculatedDuration:p&&f||null,next:E=>{const N=b(E);if(p)o.done=E>=f;else{let _=E===0?m:0;g<1&&(_=E===0?io(m):mq(b,E,N));const k=Math.abs(_)<=r,T=Math.abs(a-N)<=i;o.done=k&&T}return o.value=o.done?a:N,o},toString:()=>{const E=Math.min(gP(S),Ab),N=pq(_=>S.next(E*_).value,E,30);return E+"ms "+N},toTransition:()=>{}};return S}jb.applyToOptions=e=>{const t=ybe(e,100,jb);return e.ease=t.ease,e.duration=io(t.duration),e.type="keyframes",e};function DC({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:c,restDelta:u=.5,restSpeed:d}){const f=e[0],h={done:!1,value:f},p=k=>o!==void 0&&k<o||c!==void 0&&k>c,m=k=>o===void 0?c:c===void 0||Math.abs(o-k)<Math.abs(c-k)?o:c;let g=n*t;const v=f+g,y=a===void 0?v:a(v);y!==v&&(g=y-f);const x=k=>-g*Math.exp(-k/r),b=k=>y+x(k),S=k=>{const T=x(k),A=b(k);h.done=Math.abs(T)<=u,h.value=h.done?y:A};let E,N;const _=k=>{p(h.value)&&(E=k,N=jb({keyframes:[h.value,m(h.value)],velocity:mq(b,k,h.value),damping:i,stiffness:s,restDelta:u,restSpeed:d}))};return _(0),{calculatedDuration:null,next:k=>{let T=!1;return!N&&E===void 0&&(T=!0,S(k),_(k)),E!==void 0&&k>=E?N.next(k-E):(!T&&S(k),h)}}}function kbe(e,t,n){const r=[],i=n||sl.mix||hq,s=e.length-1;for(let a=0;a<s;a++){let o=i(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||Gs:t;o=Y0(c,o)}r.push(o)}return r}function Cbe(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(aP(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=kbe(t,r,i),c=o.length,u=d=>{if(a&&d<e[0])return t[0];let f=0;if(c>1)for(;f<e.length-2&&!(d<e[f+1]);f++);const h=Bg(e[f],e[f+1],d);return o[f](h)};return n?d=>u(il(e[0],e[s-1],d)):u}function Tbe(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Bg(0,t,r);e.push(Nn(n,1,i))}}function Abe(e){const t=[0];return Tbe(t,e.length-1),t}function jbe(e,t){return e.map(n=>n*t)}function Obe(e,t){return e.map(()=>t||rq).splice(0,e.length-1)}function Bm({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=zxe(r)?r.map(TL):TL(r),s={done:!1,value:t[0]},a=jbe(n&&n.length===t.length?n:Abe(t),e),o=Cbe(a,t,{ease:Array.isArray(i)?i:Obe(t,i)});return{calculatedDuration:e,next:c=>(s.value=o(c),s.done=c>=e,s)}}const Pbe=e=>e!==null;function vP(e,{repeat:t,repeatType:n="loop"},r,i=1){const s=e.filter(Pbe),o=i<0||t&&n!=="loop"&&t%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const Ibe={decay:DC,inertia:DC,tween:Bm,keyframes:Bm,spring:jb};function gq(e){typeof e.type=="string"&&(e.type=Ibe[e.type])}class yP{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const Dbe=e=>e/100;class xP extends yP{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Li.now()&&this.tick(Li.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;gq(t);const{type:n=Bm,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=t;let{keyframes:o}=t;const c=n||Bm;c!==Bm&&typeof o[0]!="number"&&(this.mixKeyframes=Y0(Dbe,hq(o[0],o[1])),o=[0,100]);const u=c({...t,keyframes:o});s==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...o].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=gP(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:f,repeatType:h,repeatDelay:p,type:m,onUpdate:g,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const y=this.currentTime-u*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?y<0:y>i;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let b=this.currentTime,S=r;if(f){const k=Math.min(this.currentTime,i)/o;let T=Math.floor(k),A=k%1;!A&&k>=1&&(A=1),A===1&&T--,T=Math.min(T,f+1),!!(T%2)&&(h==="reverse"?(A=1-A,p&&(A-=p/o)):h==="mirror"&&(S=a)),b=il(0,1,A)*o}const E=x?{done:!1,value:d[0]}:S.next(b);s&&(E.value=s(E.value));let{done:N}=E;!x&&c!==null&&(N=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const _=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return _&&m!==DC&&(E.value=vP(d,this.options,v,this.speed)),g&&g(E.value),_&&this.finish(),E}then(t,n){return this.finished.then(t,n)}get duration(){return so(this.calculatedDuration)}get time(){return so(this.currentTime)}set time(t){var n;t=io(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Li.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=so(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:t=vbe,startTime:n}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Li.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function Mbe(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Mu=e=>e*180/Math.PI,MC=e=>{const t=Mu(Math.atan2(e[1],e[0]));return RC(t)},Rbe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:MC,rotateZ:MC,skewX:e=>Mu(Math.atan(e[1])),skewY:e=>Mu(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},RC=e=>(e=e%360,e<0&&(e+=360),e),DL=MC,ML=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),RL=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Lbe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ML,scaleY:RL,scale:e=>(ML(e)+RL(e))/2,rotateX:e=>RC(Mu(Math.atan2(e[6],e[5]))),rotateY:e=>RC(Mu(Math.atan2(-e[2],e[0]))),rotateZ:DL,rotate:DL,skewX:e=>Mu(Math.atan(e[4])),skewY:e=>Mu(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function LC(e){return e.includes("scale")?1:0}function FC(e,t){if(!e||e==="none")return LC(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Lbe,i=n;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Rbe,i=o}if(!i)return LC(t);const s=r[t],a=i[1].split(",").map(Bbe);return typeof s=="function"?s(a):a[s]}const Fbe=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return FC(n,t)};function Bbe(e){return parseFloat(e.trim())}const sp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ap=new Set(sp),LL=e=>e===ip||e===nt,$be=new Set(["x","y","z"]),Ube=sp.filter(e=>!$be.has(e));function zbe(e){const t=[];return Ube.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Qu={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>FC(t,"x"),y:(e,{transform:t})=>FC(t,"y")};Qu.translateX=Qu.x;Qu.translateY=Qu.y;const Ju=new Set;let BC=!1,$C=!1,UC=!1;function vq(){if($C){const e=Array.from(Ju).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=zbe(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))==null||o.set(a)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}$C=!1,BC=!1,Ju.forEach(e=>e.complete(UC)),Ju.clear()}function yq(){Ju.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&($C=!0)})}function Hbe(){UC=!0,yq(),vq(),UC=!1}class bP{constructor(t,n,r,i,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Ju.add(this),BC||(BC=!0,xn.read(yq),xn.resolveKeyframes(vq))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;if(t[0]===null){const s=i==null?void 0:i.get(),a=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&n){const o=r.readValue(n,a);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=a),i&&s===void 0&&i.set(t[0])}Mbe(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Ju.delete(this)}cancel(){this.state==="scheduled"&&(Ju.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Vbe=e=>e.startsWith("--");function Wbe(e,t,n){Vbe(t)?e.style.setProperty(t,n):e.style[t]=n}const qbe=oP(()=>window.ScrollTimeline!==void 0),Kbe={};function Gbe(e,t){const n=oP(e);return()=>Kbe[t]??n()}const xq=Gbe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),hm=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,FL={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:hm([0,.65,.55,1]),circOut:hm([.55,0,1,.45]),backIn:hm([.31,.01,.66,-.59]),backOut:hm([.33,1.53,.69,.99])};function bq(e,t){if(e)return typeof e=="function"?xq()?pq(e,t):"ease-out":iq(e)?hm(e):Array.isArray(e)?e.map(n=>bq(n,t)||FL.easeOut):FL[e]}function Ybe(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:c}={},u=void 0){const d={[t]:n};c&&(d.offset=c);const f=bq(o,i);Array.isArray(f)&&(d.easing=f);const h={delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return u&&(h.pseudoElement=u),e.animate(d,h)}function wq(e){return typeof e=="function"&&"applyToOptions"in e}function Xbe({type:e,...t}){return wq(e)&&xq()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class Qbe extends yP{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:o,onComplete:c}=t;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=t,aP(typeof t.type!="string");const u=Xbe(t);this.animation=Ybe(n,r,i,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=vP(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):Wbe(n,r,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return so(Number(t))}get time(){return so(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=io(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&qbe()?(this.animation.timeline=t,Gs):n(this)}}const Eq={anticipate:eq,backInOut:ZW,circInOut:nq};function Jbe(e){return e in Eq}function Zbe(e){typeof e.ease=="string"&&Jbe(e.ease)&&(e.ease=Eq[e.ease])}const BL=10;class e1e extends Qbe{constructor(t){Zbe(t),gq(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...a}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const o=new xP({...a,autoplay:!1}),c=io(this.finishedTime??this.time);n.setWithVelocity(o.sample(c-BL).value,o.sample(c).value,BL),o.stop()}}const $L=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Oc.test(e)||e==="0")&&!e.startsWith("url("));function t1e(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function n1e(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],a=$L(i,t),o=$L(s,t);return!a||!o?!1:t1e(e)||(n==="spring"||wq(n))&&r}function zC(e){e.duration=0,e.type}const r1e=new Set(["opacity","clipPath","filter","transform"]),i1e=oP(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function s1e(e){var d;const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:s,type:a}=e;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return i1e()&&n&&r1e.has(n)&&(n!=="transform"||!u)&&!c&&!r&&i!=="mirror"&&s!==0&&a!=="inertia"}const a1e=40;class o1e extends yP{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:o,name:c,motionValue:u,element:d,...f}){var m;super(),this.stop=()=>{var g,v;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(v=this.keyframeResolver)==null||v.cancel()},this.createdAt=Li.now();const h={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:a,name:c,motionValue:u,element:d,...f},p=(d==null?void 0:d.KeyframeResolver)||bP;this.keyframeResolver=new p(o,(g,v,y)=>this.onKeyframesResolved(g,v,h,!y),c,u,d),(m=this.keyframeResolver)==null||m.scheduleResolve()}onKeyframesResolved(t,n,r,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:o,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=Li.now(),n1e(t,s,a,o)||((sl.instantAnimations||!c)&&(d==null||d(vP(t,r,n))),t[0]=t[t.length-1],zC(r),r.repeat=0);const h={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>a1e?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},p=!u&&s1e(h)?new e1e({...h,element:h.motionValue.owner.current}):new xP(h);p.finished.then(()=>this.notifyFinished()).catch(Gs),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),Hbe()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const l1e=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function c1e(e){const t=l1e.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function Sq(e,t,n=1){const[r,i]=c1e(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const a=s.trim();return WW(a)?parseFloat(a):a}return fP(i)?Sq(i,t,n+1):i}function wP(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const Nq=new Set(["width","height","top","left","right","bottom",...sp]),u1e={test:e=>e==="auto",parse:e=>e},_q=e=>t=>t.test(e),kq=[ip,nt,ao,Il,tbe,ebe,u1e],UL=e=>kq.find(_q(e));function d1e(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||KW(e):!0}const f1e=new Set(["brightness","contrast","saturate","opacity"]);function h1e(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(hP)||[];if(!r)return e;const i=n.replace(r,"");let s=f1e.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const p1e=/\b([a-z-]*)\(.*?\)/gu,HC={...Oc,getAnimatableNone:e=>{const t=e.match(p1e);return t?t.map(h1e).join(" "):e}},zL={...ip,transform:Math.round},m1e={rotate:Il,rotateX:Il,rotateY:Il,rotateZ:Il,scale:cy,scaleX:cy,scaleY:cy,scaleZ:cy,skew:Il,skewX:Il,skewY:Il,distance:nt,translateX:nt,translateY:nt,translateZ:nt,x:nt,y:nt,z:nt,perspective:nt,transformPerspective:nt,opacity:$g,originX:AL,originY:AL,originZ:nt},EP={borderWidth:nt,borderTopWidth:nt,borderRightWidth:nt,borderBottomWidth:nt,borderLeftWidth:nt,borderRadius:nt,radius:nt,borderTopLeftRadius:nt,borderTopRightRadius:nt,borderBottomRightRadius:nt,borderBottomLeftRadius:nt,width:nt,maxWidth:nt,height:nt,maxHeight:nt,top:nt,right:nt,bottom:nt,left:nt,padding:nt,paddingTop:nt,paddingRight:nt,paddingBottom:nt,paddingLeft:nt,margin:nt,marginTop:nt,marginRight:nt,marginBottom:nt,marginLeft:nt,backgroundPositionX:nt,backgroundPositionY:nt,...m1e,zIndex:zL,fillOpacity:$g,strokeOpacity:$g,numOctaves:zL},g1e={...EP,color:Kn,backgroundColor:Kn,outlineColor:Kn,fill:Kn,stroke:Kn,borderColor:Kn,borderTopColor:Kn,borderRightColor:Kn,borderBottomColor:Kn,borderLeftColor:Kn,filter:HC,WebkitFilter:HC},Cq=e=>g1e[e];function Tq(e,t){let n=Cq(e);return n!==HC&&(n=Oc),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const v1e=new Set(["auto","none","0"]);function y1e(e,t,n){let r=0,i;for(;r<e.length&&!i;){const s=e[r];typeof s=="string"&&!v1e.has(s)&&Ug(s).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=Tq(n,i)}class x1e extends bP{constructor(t,n,r,i,s){super(t,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),fP(u))){const d=Sq(u,n.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Nq.has(r)||t.length!==2)return;const[i,s]=t,a=UL(i),o=UL(s);if(a!==o)if(LL(a)&&LL(o))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else Qu[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||d1e(t[i]))&&r.push(i);r.length&&y1e(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Qu[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var o;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,a=r[s];r[s]=Qu[n](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function b1e(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const i=(n==null?void 0:n[e])??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const Aq=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function w1e(e){return qW(e)&&"offsetHeight"in e}const HL=30,E1e=e=>!isNaN(parseFloat(e));class S1e{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Li.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Li.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=E1e(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new lP);const r=this.events[t].add(n);return t==="change"?()=>{r(),xn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Li.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>HL)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,HL);return GW(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function wh(e,t){return new S1e(e,t)}const{schedule:SP}=sq(queueMicrotask,!1),ua={x:!1,y:!1};function jq(){return ua.x||ua.y}function N1e(e){return e==="x"||e==="y"?ua[e]?null:(ua[e]=!0,()=>{ua[e]=!1}):ua.x||ua.y?null:(ua.x=ua.y=!0,()=>{ua.x=ua.y=!1})}function Oq(e,t){const n=b1e(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function VL(e){return!(e.pointerType==="touch"||jq())}function _1e(e,t,n={}){const[r,i,s]=Oq(e,n),a=o=>{if(!VL(o))return;const{target:c}=o,u=t(c,o);if(typeof u!="function"||!c)return;const d=f=>{VL(f)&&(u(f),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,i)};return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const Pq=(e,t)=>t?e===t?!0:Pq(e,t.parentElement):!1,NP=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,k1e=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function C1e(e){return k1e.has(e.tagName)||e.tabIndex!==-1}const wx=new WeakSet;function WL(e){return t=>{t.key==="Enter"&&e(t)}}function g_(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const T1e=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=WL(()=>{if(wx.has(n))return;g_(n,"down");const i=WL(()=>{g_(n,"up")}),s=()=>g_(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",s,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function qL(e){return NP(e)&&!jq()}function A1e(e,t,n={}){const[r,i,s]=Oq(e,n),a=o=>{const c=o.currentTarget;if(!qL(o))return;wx.add(c);const u=t(c,o),d=(p,m)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),wx.has(c)&&wx.delete(c),qL(p)&&typeof u=="function"&&u(p,{success:m})},f=p=>{d(p,c===window||c===document||n.useGlobalTarget||Pq(c,p.target))},h=p=>{d(p,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",h,i)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),w1e(o)&&(o.addEventListener("focus",u=>T1e(u,i)),!C1e(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),s}function Iq(e){return qW(e)&&"ownerSVGElement"in e}function j1e(e){return Iq(e)&&e.tagName==="svg"}const ei=e=>!!(e&&e.getVelocity),O1e=[...kq,Kn,Oc],P1e=e=>O1e.find(_q(e)),Dq=w.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function I1e(e=!0){const t=w.useContext(rP);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=w.useId();w.useEffect(()=>{if(e)return i(s)},[e]);const a=w.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,a]:[!0]}const Mq=w.createContext({strict:!1}),KL={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Eh={};for(const e in KL)Eh[e]={isEnabled:t=>KL[e].some(n=>!!t[n])};function D1e(e){for(const t in e)Eh[t]={...Eh[t],...e[t]}}const M1e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ob(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||M1e.has(e)}let Rq=e=>!Ob(e);function R1e(e){typeof e=="function"&&(Rq=t=>t.startsWith("on")?!Ob(t):e(t))}try{R1e(require("@emotion/is-prop-valid").default)}catch{}function L1e(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(Rq(i)||n===!0&&Ob(i)||!t&&!Ob(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}const NE=w.createContext({});function _E(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function zg(e){return typeof e=="string"||Array.isArray(e)}const _P=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],kP=["initial",..._P];function kE(e){return _E(e.animate)||kP.some(t=>zg(e[t]))}function Lq(e){return!!(kE(e)||e.variants)}function F1e(e,t){if(kE(e)){const{initial:n,animate:r}=e;return{initial:n===!1||zg(n)?n:void 0,animate:zg(r)?r:void 0}}return e.inherit!==!1?t:{}}function B1e(e){const{initial:t,animate:n}=F1e(e,w.useContext(NE));return w.useMemo(()=>({initial:t,animate:n}),[GL(t),GL(n)])}function GL(e){return Array.isArray(e)?e.join(" "):e}const Hg={};function $1e(e){for(const t in e)Hg[t]=e[t],dP(t)&&(Hg[t].isCSSVariable=!0)}function Fq(e,{layout:t,layoutId:n}){return ap.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Hg[e]||e==="opacity")}const U1e={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},z1e=sp.length;function H1e(e,t,n){let r="",i=!0;for(let s=0;s<z1e;s++){const a=sp[s],o=e[a];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(a.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||n){const u=Aq(o,EP[a]);if(!c){i=!1;const d=U1e[a]||a;r+=`${d}(${u}) `}n&&(t[a]=u)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function CP(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let a=!1,o=!1;for(const c in t){const u=t[c];if(ap.has(c)){a=!0;continue}else if(dP(c)){i[c]=u;continue}else{const d=Aq(u,EP[c]);c.startsWith("origin")?(o=!0,s[c]=d):r[c]=d}}if(t.transform||(a||n?r.transform=H1e(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:d=0}=s;r.transformOrigin=`${c} ${u} ${d}`}}const TP=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Bq(e,t,n){for(const r in t)!ei(t[r])&&!Fq(r,n)&&(e[r]=t[r])}function V1e({transformTemplate:e},t){return w.useMemo(()=>{const n=TP();return CP(n,t,e),Object.assign({},n.vars,n.style)},[t])}function W1e(e,t){const n=e.style||{},r={};return Bq(r,n,e),Object.assign(r,V1e(e,t)),r}function q1e(e,t){const n={},r=W1e(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const K1e={offset:"stroke-dashoffset",array:"stroke-dasharray"},G1e={offset:"strokeDashoffset",array:"strokeDasharray"};function Y1e(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?K1e:G1e;e[s.offset]=nt.transform(-r);const a=nt.transform(t),o=nt.transform(n);e[s.array]=`${a} ${o}`}function $q(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...o},c,u,d){if(CP(e,o,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:h}=e;f.transform&&(h.transform=f.transform,delete f.transform),(h.transform||f.transformOrigin)&&(h.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),h.transform&&(h.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),i!==void 0&&Y1e(f,i,s,a,!1)}const Uq=()=>({...TP(),attrs:{}}),zq=e=>typeof e=="string"&&e.toLowerCase()==="svg";function X1e(e,t,n,r){const i=w.useMemo(()=>{const s=Uq();return $q(s,t,zq(r),e.transformTemplate,e.style),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};Bq(s,e.style,e),i.style={...s,...i.style}}return i}const Q1e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function AP(e){return typeof e!="string"||e.includes("-")?!1:!!(Q1e.indexOf(e)>-1||/[A-Z]/u.test(e))}function J1e(e,t,n,{latestValues:r},i,s=!1){const o=(AP(e)?X1e:q1e)(t,r,i,e),c=L1e(t,typeof e=="string",s),u=e!==w.Fragment?{...c,...o,ref:n}:{},{children:d}=t,f=w.useMemo(()=>ei(d)?d.get():d,[d]);return w.createElement(e,{...u,children:f})}function YL(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function jP(e,t,n,r){if(typeof t=="function"){const[i,s]=YL(r);t=t(n!==void 0?n:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=YL(r);t=t(n!==void 0?n:e.custom,i,s)}return t}function Ex(e){return ei(e)?e.get():e}function Z1e({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:ewe(n,r,i,e),renderState:t()}}function ewe(e,t,n,r){const i={},s=r(e,{});for(const h in s)i[h]=Ex(s[h]);let{initial:a,animate:o}=e;const c=kE(e),u=Lq(e);t&&u&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),o===void 0&&(o=t.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const f=d?o:a;if(f&&typeof f!="boolean"&&!_E(f)){const h=Array.isArray(f)?f:[f];for(let p=0;p<h.length;p++){const m=jP(e,h[p]);if(m){const{transitionEnd:g,transition:v,...y}=m;for(const x in y){let b=y[x];if(Array.isArray(b)){const S=d?b.length-1:0;b=b[S]}b!==null&&(i[x]=b)}for(const x in g)i[x]=g[x]}}}return i}const Hq=e=>(t,n)=>{const r=w.useContext(NE),i=w.useContext(rP),s=()=>Z1e(e,t,r,i);return n?s():Dxe(s)};function OP(e,t,n){var s;const{style:r}=e,i={};for(const a in r)(ei(r[a])||t.style&&ei(t.style[a])||Fq(a,e)||((s=n==null?void 0:n.getValue(a))==null?void 0:s.liveStyle)!==void 0)&&(i[a]=r[a]);return i}const twe=Hq({scrapeMotionValuesFromProps:OP,createRenderState:TP});function Vq(e,t,n){const r=OP(e,t,n);for(const i in e)if(ei(e[i])||ei(t[i])){const s=sp.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=e[i]}return r}const nwe=Hq({scrapeMotionValuesFromProps:Vq,createRenderState:Uq}),rwe=Symbol.for("motionComponentSymbol");function Df(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function iwe(e,t,n){return w.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Df(n)&&(n.current=r))},[t])}const PP=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),swe="framerAppearId",Wq="data-"+PP(swe),qq=w.createContext({});function awe(e,t,n,r,i){var g,v;const{visualElement:s}=w.useContext(NE),a=w.useContext(Mq),o=w.useContext(rP),c=w.useContext(Dq).reducedMotion,u=w.useRef(null);r=r||a.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,f=w.useContext(qq);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&owe(u.current,n,i,f);const h=w.useRef(!1);w.useInsertionEffect(()=>{d&&h.current&&d.update(n,o)});const p=n[Wq],m=w.useRef(!!p&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,p))&&((v=window.MotionHasOptimisedAnimation)==null?void 0:v.call(window,p)));return Mxe(()=>{d&&(h.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),m.current&&d.animationState&&d.animationState.animateChanges())}),w.useEffect(()=>{d&&(!m.current&&d.animationState&&d.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,p)}),m.current=!1),d.enteringChildren=void 0)}),d}function owe(e,t,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Kq(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&Df(o),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function Kq(e){if(e)return e.options.allowProjection!==!1?e.projection:Kq(e.parent)}function v_(e,{forwardMotionProps:t=!1}={},n,r){n&&D1e(n);const i=AP(e)?nwe:twe;function s(o,c){let u;const d={...w.useContext(Dq),...o,layoutId:lwe(o)},{isStatic:f}=d,h=B1e(o),p=i(o,f);if(!f&&nP){cwe();const m=uwe(d);u=m.MeasureLayout,h.visualElement=awe(e,p,d,r,m.ProjectionNode)}return l.jsxs(NE.Provider,{value:h,children:[u&&h.visualElement?l.jsx(u,{visualElement:h.visualElement,...d}):null,J1e(e,o,iwe(p,h.visualElement,c),p,f,t)]})}s.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const a=w.forwardRef(s);return a[rwe]=e,a}function lwe({layoutId:e}){const t=w.useContext(VW).id;return t&&e!==void 0?t+"-"+e:e}function cwe(e,t){w.useContext(Mq).strict}function uwe(e){const{drag:t,layout:n}=Eh;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function dwe(e,t){if(typeof Proxy>"u")return v_;const n=new Map,r=(s,a)=>v_(s,a,e,t),i=(s,a)=>r(s,a);return new Proxy(i,{get:(s,a)=>a==="create"?r:(n.has(a)||n.set(a,v_(a,void 0,e,t)),n.get(a))})}function Gq({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function fwe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function hwe(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function y_(e){return e===void 0||e===1}function VC({scale:e,scaleX:t,scaleY:n}){return!y_(e)||!y_(t)||!y_(n)}function Su(e){return VC(e)||Yq(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Yq(e){return XL(e.x)||XL(e.y)}function XL(e){return e&&e!=="0%"}function Pb(e,t,n){const r=e-n,i=t*r;return n+i}function QL(e,t,n,r,i){return i!==void 0&&(e=Pb(e,i,r)),Pb(e,n,r)+t}function WC(e,t=0,n=1,r,i){e.min=QL(e.min,t,n,r,i),e.max=QL(e.max,t,n,r,i)}function Xq(e,{x:t,y:n}){WC(e.x,t.translate,t.scale,t.originPoint),WC(e.y,n.translate,n.scale,n.originPoint)}const JL=.999999999999,ZL=1.0000000000001;function pwe(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,a;for(let o=0;o<i;o++){s=n[o],a=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Rf(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,Xq(e,a)),r&&Su(s.latestValues)&&Rf(e,s.latestValues))}t.x<ZL&&t.x>JL&&(t.x=1),t.y<ZL&&t.y>JL&&(t.y=1)}function Mf(e,t){e.min=e.min+t,e.max=e.max+t}function e6(e,t,n,r,i=.5){const s=Nn(e.min,e.max,i);WC(e,t,n,s,r)}function Rf(e,t){e6(e.x,t.x,t.scaleX,t.scale,t.originX),e6(e.y,t.y,t.scaleY,t.scale,t.originY)}function Qq(e,t){return Gq(hwe(e.getBoundingClientRect(),t))}function mwe(e,t,n){const r=Qq(e,n),{scroll:i}=t;return i&&(Mf(r.x,i.offset.x),Mf(r.y,i.offset.y)),r}const t6=()=>({translate:0,scale:1,origin:0,originPoint:0}),Lf=()=>({x:t6(),y:t6()}),n6=()=>({min:0,max:0}),$n=()=>({x:n6(),y:n6()}),qC={current:null},Jq={current:!1};function gwe(){if(Jq.current=!0,!!nP)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>qC.current=e.matches;e.addEventListener("change",t),t()}else qC.current=!1}const vwe=new WeakMap;function ywe(e,t,n){for(const r in t){const i=t[r],s=n[r];if(ei(i))e.addValue(r,i);else if(ei(s))e.addValue(r,wh(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const a=e.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=e.getStaticValue(r);e.addValue(r,wh(a!==void 0?a:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const r6=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class xwe{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=bP,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Li.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,xn.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=kE(n),this.isVariantNode=Lq(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in f){const p=f[h];c[h]!==void 0&&ei(p)&&p.set(c[h])}}mount(t){var n;this.current=t,vwe.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),Jq.current||gwe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:qC.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),jc(this.notifyUpdate),jc(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=ap.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&xn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Eh){const n=Eh[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):$n()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<r6.length;r++){const i=r6[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=t[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=ywe(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=wh(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(WW(r)||KW(r))?r=parseFloat(r):!P1e(r)&&Oc.test(n)&&(r=Tq(t,n)),this.setBaseTarget(t,ei(r)?r.get():r)),ei(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=jP(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);a&&(r=a[t])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!ei(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new lP),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){SP.render(this.render)}}class Zq extends xwe{constructor(){super(...arguments),this.KeyframeResolver=x1e}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ei(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function eK(e,{style:t,vars:n},r,i){const s=e.style;let a;for(a in t)s[a]=t[a];i==null||i.applyProjectionStyles(s,r);for(a in n)s.setProperty(a,n[a])}function bwe(e){return window.getComputedStyle(e)}class wwe extends Zq{constructor(){super(...arguments),this.type="html",this.renderInstance=eK}readValueFromInstance(t,n){var r;if(ap.has(n))return(r=this.projection)!=null&&r.isProjecting?LC(n):Fbe(t,n);{const i=bwe(t),s=(dP(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Qq(t,n)}build(t,n,r){CP(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return OP(t,n,r)}}const tK=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ewe(e,t,n,r){eK(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(tK.has(i)?i:PP(i),t.attrs[i])}class Swe extends Zq{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=$n}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(ap.has(n)){const r=Cq(n);return r&&r.default||0}return n=tK.has(n)?n:PP(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return Vq(t,n,r)}build(t,n,r){$q(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,i){Ewe(t,n,r,i)}mount(t){this.isSVGTag=zq(t.tagName),super.mount(t)}}const Nwe=(e,t)=>AP(e)?new Swe(t):new wwe(t,{allowProjection:e!==w.Fragment});function Gf(e,t,n){const r=e.getProps();return jP(r,t,n!==void 0?n:r.custom,e)}const KC=e=>Array.isArray(e);function _we(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,wh(n))}function kwe(e){return KC(e)?e[e.length-1]||0:e}function Cwe(e,t){const n=Gf(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s){const o=kwe(s[a]);_we(e,a,o)}}function Twe(e){return!!(ei(e)&&e.add)}function GC(e,t){const n=e.getValue("willChange");if(Twe(n))return n.add(t);if(!n&&sl.WillChange){const r=new sl.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function nK(e){return e.props[Wq]}const Awe=e=>e!==null;function jwe(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(Awe),s=t&&n!=="loop"&&t%2===1?0:i.length-1;return i[s]}const Owe={type:"spring",stiffness:500,damping:25,restSpeed:10},Pwe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Iwe={type:"keyframes",duration:.8},Dwe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Mwe=(e,{keyframes:t})=>t.length>2?Iwe:ap.has(e)?e.startsWith("scale")?Pwe(t[1]):Owe:Dwe;function Rwe({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const IP=(e,t,n,r={},i,s)=>a=>{const o=wP(r,e)||{},c=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-io(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:h=>{t.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:s?void 0:i};Rwe(o)||Object.assign(d,Mwe(e,d)),d.duration&&(d.duration=io(d.duration)),d.repeatDelay&&(d.repeatDelay=io(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(zC(d),d.delay===0&&(f=!0)),(sl.instantAnimations||sl.skipAnimations)&&(f=!0,zC(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,f&&!s&&t.get()!==void 0){const h=jwe(d.keyframes,o);if(h!==void 0){xn.update(()=>{d.onUpdate(h),d.onComplete()});return}}return o.isSync?new xP(d):new o1e(d)};function Lwe({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function rK(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:a,...o}=t;r&&(s=r);const c=[],u=i&&e.animationState&&e.animationState.getState()[i];for(const d in o){const f=e.getValue(d,e.latestValues[d]??null),h=o[d];if(h===void 0||u&&Lwe(u,d))continue;const p={delay:n,...wP(s||{},d)},m=f.get();if(m!==void 0&&!f.isAnimating&&!Array.isArray(h)&&h===m&&!p.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const y=nK(e);if(y){const x=window.MotionHandoffAnimation(y,d,xn);x!==null&&(p.startTime=x,g=!0)}}GC(e,d),f.start(IP(d,f,h,e.shouldReduceMotion&&Nq.has(d)?{type:!1}:p,e,g));const v=f.animation;v&&c.push(v)}return a&&Promise.all(c).then(()=>{xn.update(()=>{a&&Cwe(e,a)})}),c}function iK(e,t,n,r=0,i=1){const s=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),a=e.size,o=(a-1)*r;return typeof n=="function"?n(s,a):i===1?s*r:o-s*r}function YC(e,t,n={}){var c;const r=Gf(e,t,n.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(rK(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:h}=i;return Fwe(e,t,u,d,f,h,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[u,d]=o==="beforeChildren"?[s,a]:[a,s];return u().then(()=>d())}else return Promise.all([s(),a(n.delay)])}function Fwe(e,t,n=0,r=0,i=0,s=1,a){const o=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),o.push(YC(c,t,{...a,delay:n+(typeof r=="function"?0:r)+iK(e.variantChildren,c,r,i,s)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(o)}function Bwe(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>YC(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=YC(e,t,n);else{const i=typeof t=="function"?Gf(e,t,n.custom):t;r=Promise.all(rK(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function sK(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const $we=kP.length;function aK(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?aK(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<$we;n++){const r=kP[n],i=e.props[r];(zg(i)||i===!1)&&(t[r]=i)}return t}const Uwe=[..._P].reverse(),zwe=_P.length;function Hwe(e){return t=>Promise.all(t.map(({animation:n,options:r})=>Bwe(e,n,r)))}function Vwe(e){let t=Hwe(e),n=i6(),r=!0;const i=c=>(u,d)=>{var h;const f=Gf(e,d,c==="exit"?(h=e.presenceContext)==null?void 0:h.custom:void 0);if(f){const{transition:p,transitionEnd:m,...g}=f;u={...u,...g,...m}}return u};function s(c){t=c(e)}function a(c){const{props:u}=e,d=aK(e.parent)||{},f=[],h=new Set;let p={},m=1/0;for(let v=0;v<zwe;v++){const y=Uwe[v],x=n[y],b=u[y]!==void 0?u[y]:d[y],S=zg(b),E=y===c?x.isActive:null;E===!1&&(m=v);let N=b===d[y]&&b!==u[y]&&S;if(N&&r&&e.manuallyAnimateOnMount&&(N=!1),x.protectedKeys={...p},!x.isActive&&E===null||!b&&!x.prevProp||_E(b)||typeof b=="boolean")continue;const _=Wwe(x.prevProp,b);let k=_||y===c&&x.isActive&&!N&&S||v>m&&S,T=!1;const A=Array.isArray(b)?b:[b];let j=A.reduce(i(y),{});E===!1&&(j={});const{prevResolvedValues:D={}}=x,I={...D,...j},M=B=>{k=!0,h.has(B)&&(T=!0,h.delete(B)),x.needsAnimating[B]=!0;const R=e.getValue(B);R&&(R.liveStyle=!1)};for(const B in I){const R=j[B],F=D[B];if(p.hasOwnProperty(B))continue;let O=!1;KC(R)&&KC(F)?O=!sK(R,F):O=R!==F,O?R!=null?M(B):h.add(B):R!==void 0&&h.has(B)?M(B):x.protectedKeys[B]=!0}x.prevProp=b,x.prevResolvedValues=j,x.isActive&&(p={...p,...j}),r&&e.blockInitialAnimation&&(k=!1);const L=N&&_;k&&(!L||T)&&f.push(...A.map(B=>{const R={type:y};if(typeof B=="string"&&r&&!L&&e.manuallyAnimateOnMount&&e.parent){const{parent:F}=e,O=Gf(F,B);if(F.enteringChildren&&O){const{delayChildren:Q}=O.transition||{};R.delay=iK(F.enteringChildren,e,Q)}}return{animation:B,options:R}}))}if(h.size){const v={};if(typeof u.initial!="boolean"){const y=Gf(e,Array.isArray(u.initial)?u.initial[0]:u.initial);y&&y.transition&&(v.transition=y.transition)}h.forEach(y=>{const x=e.getBaseTarget(y),b=e.getValue(y);b&&(b.liveStyle=!0),v[y]=x??null}),f.push({animation:v})}let g=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(g=!1),r=!1,g?t(f):Promise.resolve()}function o(c,u){var f;if(n[c].isActive===u)return Promise.resolve();(f=e.variantChildren)==null||f.forEach(h=>{var p;return(p=h.animationState)==null?void 0:p.setActive(c,u)}),n[c].isActive=u;const d=a(c);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n,reset:()=>{n=i6(),r=!0}}}function Wwe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!sK(t,e):!1}function gu(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function i6(){return{animate:gu(!0),whileInView:gu(),whileHover:gu(),whileTap:gu(),whileDrag:gu(),whileFocus:gu(),exit:gu()}}class Yc{constructor(t){this.isMounted=!1,this.node=t}update(){}}class qwe extends Yc{constructor(t){super(t),t.animationState||(t.animationState=Vwe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();_E(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let Kwe=0;class Gwe extends Yc{constructor(){super(...arguments),this.id=Kwe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Ywe={animation:{Feature:qwe},exit:{Feature:Gwe}};function Vg(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function J0(e){return{point:{x:e.pageX,y:e.pageY}}}const Xwe=e=>t=>NP(t)&&e(t,J0(t));function $m(e,t,n,r){return Vg(e,t,Xwe(n),r)}const oK=1e-4,Qwe=1-oK,Jwe=1+oK,lK=.01,Zwe=0-lK,eEe=0+lK;function yi(e){return e.max-e.min}function tEe(e,t,n){return Math.abs(e-t)<=n}function s6(e,t,n,r=.5){e.origin=r,e.originPoint=Nn(t.min,t.max,e.origin),e.scale=yi(n)/yi(t),e.translate=Nn(n.min,n.max,e.origin)-e.originPoint,(e.scale>=Qwe&&e.scale<=Jwe||isNaN(e.scale))&&(e.scale=1),(e.translate>=Zwe&&e.translate<=eEe||isNaN(e.translate))&&(e.translate=0)}function Um(e,t,n,r){s6(e.x,t.x,n.x,r?r.originX:void 0),s6(e.y,t.y,n.y,r?r.originY:void 0)}function a6(e,t,n){e.min=n.min+t.min,e.max=e.min+yi(t)}function nEe(e,t,n){a6(e.x,t.x,n.x),a6(e.y,t.y,n.y)}function o6(e,t,n){e.min=t.min-n.min,e.max=e.min+yi(t)}function zm(e,t,n){o6(e.x,t.x,n.x),o6(e.y,t.y,n.y)}function Ps(e){return[e("x"),e("y")]}const cK=({current:e})=>e?e.ownerDocument.defaultView:null,l6=(e,t)=>Math.abs(e-t);function rEe(e,t){const n=l6(e.x,t.x),r=l6(e.y,t.y);return Math.sqrt(n**2+r**2)}class uK{constructor(t,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=b_(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=rEe(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!m)return;const{point:g}=h,{timestamp:v}=Fr;this.history.push({...g,timestamp:v});const{onStart:y,onMove:x}=this.handlers;p||(y&&y(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=x_(p,this.transformPagePoint),xn.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=b_(h.type==="pointercancel"?this.lastMoveEventInfo:x_(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,y),g&&g(h,y)},!NP(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=i||window;const o=J0(t),c=x_(o,this.transformPagePoint),{point:u}=c,{timestamp:d}=Fr;this.history=[{...u,timestamp:d}];const{onSessionStart:f}=n;f&&f(t,b_(c,this.history)),this.removeListeners=Y0($m(this.contextWindow,"pointermove",this.handlePointerMove),$m(this.contextWindow,"pointerup",this.handlePointerUp),$m(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),jc(this.updatePoint)}}function x_(e,t){return t?{point:t(e.point)}:e}function c6(e,t){return{x:e.x-t.x,y:e.y-t.y}}function b_({point:e},t){return{point:e,delta:c6(e,dK(t)),offset:c6(e,iEe(t)),velocity:sEe(t,.1)}}function iEe(e){return e[0]}function dK(e){return e[e.length-1]}function sEe(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=dK(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>io(t)));)n--;if(!r)return{x:0,y:0};const s=so(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function aEe(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Nn(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Nn(n,e,r.max):Math.min(e,n)),e}function u6(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function oEe(e,{top:t,left:n,bottom:r,right:i}){return{x:u6(e.x,n,i),y:u6(e.y,t,r)}}function d6(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function lEe(e,t){return{x:d6(e.x,t.x),y:d6(e.y,t.y)}}function cEe(e,t){let n=.5;const r=yi(e),i=yi(t);return i>r?n=Bg(t.min,t.max-r,e.min):r>i&&(n=Bg(e.min,e.max-i,t.min)),il(0,1,n)}function uEe(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const XC=.35;function dEe(e=XC){return e===!1?e=0:e===!0&&(e=XC),{x:f6(e,"left","right"),y:f6(e,"top","bottom")}}function f6(e,t,n){return{min:h6(e,t),max:h6(e,n)}}function h6(e,t){return typeof e=="number"?e:e[t]||0}const fEe=new WeakMap;class hEe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=$n(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(J0(f).point)},a=(f,h)=>{const{drag:p,dragPropagation:m,onDragStart:g}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=N1e(p),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ps(y=>{let x=this.getAxisMotionValue(y).get()||0;if(ao.test(x)){const{projection:b}=this.visualElement;if(b&&b.layout){const S=b.layout.layoutBox[y];S&&(x=yi(S)*(parseFloat(x)/100))}}this.originPoint[y]=x}),g&&xn.postRender(()=>g(f,h)),GC(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h;const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:g,onDrag:v}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:y}=h;if(m&&this.currentDirection===null){this.currentDirection=pEe(y),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,y),this.updateAxis("y",h.point,y),this.visualElement.render(),v&&v(f,h)},c=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h,this.stop(f,h),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Ps(f=>{var h;return this.getAnimationState(f)==="paused"&&((h=this.getAxisMotionValue(f).animation)==null?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new uK(t,{onSessionStart:s,onStart:a,onMove:o,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:cK(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&xn.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!uy(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=aEe(a,this.constraints[t],this.elastic[t])),s.set(a)}resolveConstraints(){var s;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;t&&Df(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=oEe(r.layoutBox,t):this.constraints=!1,this.elastic=dEe(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ps(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=uEe(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Df(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=mwe(r,i.root,this.visualElement.getTransformPagePoint());let a=lEe(i.layout.layoutBox,s);if(n){const o=n(fwe(a));this.hasMutatedConstraints=!!o,o&&(a=Gq(o))}return a}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=Ps(d=>{if(!uy(d,n,this.currentDirection))return;let f=c&&c[d]||{};a&&(f={min:0,max:0});const h=i?200:1e6,p=i?40:1e7,m={type:"inertia",velocity:r?t[d]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(d,m)});return Promise.all(u).then(o)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return GC(this.visualElement,t),r.start(IP(t,r,0,n,this.visualElement,!1))}stopAnimation(){Ps(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ps(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Ps(n=>{const{drag:r}=this.getProps();if(!uy(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[n];s.set(t[n]-Nn(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Df(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ps(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const c=o.get();i[a]=cEe({min:c,max:c},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ps(a=>{if(!uy(a,t,null))return;const o=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];o.set(Nn(c,u,i[a]))})}addListeners(){if(!this.visualElement.current)return;fEe.set(this.visualElement,this);const t=this.visualElement.current,n=$m(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Df(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),xn.read(r);const a=Vg(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ps(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=XC,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function uy(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function pEe(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class mEe extends Yc{constructor(t){super(t),this.removeGroupControls=Gs,this.removeListeners=Gs,this.controls=new hEe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Gs}unmount(){this.removeGroupControls(),this.removeListeners()}}const p6=e=>(t,n)=>{e&&xn.postRender(()=>e(t,n))};class gEe extends Yc{constructor(){super(...arguments),this.removePointerDownListener=Gs}onPointerDown(t){this.session=new uK(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:cK(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:p6(t),onStart:p6(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&xn.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=$m(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Sx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function m6(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const zp={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(nt.test(e))e=parseFloat(e);else return e;const n=m6(e,t.target.x),r=m6(e,t.target.y);return`${n}% ${r}%`}},vEe={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=Oc.parse(e);if(i.length>5)return r;const s=Oc.createTransformer(e),a=typeof i[0]!="number"?1:0,o=n.x.scale*t.x,c=n.y.scale*t.y;i[0+a]/=o,i[1+a]/=c;const u=Nn(o,c,.5);return typeof i[2+a]=="number"&&(i[2+a]/=u),typeof i[3+a]=="number"&&(i[3+a]/=u),s(i)}};let w_=!1;class yEe extends w.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;$1e(xEe),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),w_&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Sx.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:a}=r;return a&&(a.isPresent=s,w_=!0,i||t.layoutDependency!==n||n===void 0||t.isPresent!==s?a.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?a.promote():a.relegate()||xn.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),SP.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;w_=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function fK(e){const[t,n]=I1e(),r=w.useContext(VW);return l.jsx(yEe,{...e,layoutGroup:r,switchLayoutGroup:w.useContext(qq),isPresent:t,safeToRemove:n})}const xEe={borderRadius:{...zp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:zp,borderTopRightRadius:zp,borderBottomLeftRadius:zp,borderBottomRightRadius:zp,boxShadow:vEe};function bEe(e,t,n){const r=ei(e)?e:wh(e);return r.start(IP("",r,t,n)),r.animation}const wEe=(e,t)=>e.depth-t.depth;class EEe{constructor(){this.children=[],this.isDirty=!1}add(t){iP(this.children,t),this.isDirty=!0}remove(t){sP(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(wEe),this.isDirty=!1,this.children.forEach(t)}}function SEe(e,t){const n=Li.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(jc(r),e(s-t))};return xn.setup(r,!0),()=>jc(r)}const hK=["TopLeft","TopRight","BottomLeft","BottomRight"],NEe=hK.length,g6=e=>typeof e=="string"?parseFloat(e):e,v6=e=>typeof e=="number"||nt.test(e);function _Ee(e,t,n,r,i,s){i?(e.opacity=Nn(0,n.opacity??1,kEe(r)),e.opacityExit=Nn(t.opacity??1,0,CEe(r))):s&&(e.opacity=Nn(t.opacity??1,n.opacity??1,r));for(let a=0;a<NEe;a++){const o=`border${hK[a]}Radius`;let c=y6(t,o),u=y6(n,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||v6(c)===v6(u)?(e[o]=Math.max(Nn(g6(c),g6(u),r),0),(ao.test(u)||ao.test(c))&&(e[o]+="%")):e[o]=u}(t.rotate||n.rotate)&&(e.rotate=Nn(t.rotate||0,n.rotate||0,r))}function y6(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const kEe=pK(0,.5,tq),CEe=pK(.5,.95,Gs);function pK(e,t,n){return r=>r<e?0:r>t?1:n(Bg(e,t,r))}function x6(e,t){e.min=t.min,e.max=t.max}function ks(e,t){x6(e.x,t.x),x6(e.y,t.y)}function b6(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function w6(e,t,n,r,i){return e-=t,e=Pb(e,1/n,r),i!==void 0&&(e=Pb(e,1/i,r)),e}function TEe(e,t=0,n=1,r=.5,i,s=e,a=e){if(ao.test(t)&&(t=parseFloat(t),t=Nn(a.min,a.max,t/100)-a.min),typeof t!="number")return;let o=Nn(s.min,s.max,r);e===s&&(o-=t),e.min=w6(e.min,t,n,o,i),e.max=w6(e.max,t,n,o,i)}function E6(e,t,[n,r,i],s,a){TEe(e,t[n],t[r],t[i],t.scale,s,a)}const AEe=["x","scaleX","originX"],jEe=["y","scaleY","originY"];function S6(e,t,n,r){E6(e.x,t,AEe,n?n.x:void 0,r?r.x:void 0),E6(e.y,t,jEe,n?n.y:void 0,r?r.y:void 0)}function N6(e){return e.translate===0&&e.scale===1}function mK(e){return N6(e.x)&&N6(e.y)}function _6(e,t){return e.min===t.min&&e.max===t.max}function OEe(e,t){return _6(e.x,t.x)&&_6(e.y,t.y)}function k6(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function gK(e,t){return k6(e.x,t.x)&&k6(e.y,t.y)}function C6(e){return yi(e.x)/yi(e.y)}function T6(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class PEe{constructor(){this.members=[]}add(t){iP(this.members,t),t.scheduleRender()}remove(t){if(sP(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function IEe(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,a=(n==null?void 0:n.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:h,skewX:p,skewY:m}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),f&&(r+=`rotateX(${f}deg) `),h&&(r+=`rotateY(${h}deg) `),p&&(r+=`skewX(${p}deg) `),m&&(r+=`skewY(${m}deg) `)}const o=e.x.scale*t.x,c=e.y.scale*t.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const E_=["","X","Y","Z"],DEe=1e3;let MEe=0;function S_(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function vK(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=nK(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",xn,!(i||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&vK(r)}function yK({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=t==null?void 0:t()){this.id=MEe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(FEe),this.nodes.forEach(zEe),this.nodes.forEach(HEe),this.nodes.forEach(BEe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new EEe)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new lP),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const c=this.eventHandlers.get(a);c&&c.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=Iq(a)&&!j1e(a),this.instance=a;const{layoutId:o,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||o)&&(this.isLayoutDirty=!0),e){let d,f=0;const h=()=>this.root.updateBlockedByResize=!1;xn.read(()=>{f=window.innerWidth}),e(a,()=>{const p=window.innerWidth;p!==f&&(f=p,this.root.updateBlockedByResize=!0,d&&d(),d=SEe(h,250),Sx.hasAnimatedSinceResize&&(Sx.hasAnimatedSinceResize=!1,this.nodes.forEach(O6)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||GEe,{onLayoutAnimationStart:g,onLayoutAnimationComplete:v}=u.getProps(),y=!this.targetLayout||!gK(this.targetLayout,p),x=!f&&h;if(this.options.layoutRoot||this.resumeFrom||x||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...wP(m,"layout"),onPlay:g,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(d,x)}else f||O6(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),jc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(VEe),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&vK(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(A6);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(j6);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(UEe),this.nodes.forEach(REe),this.nodes.forEach(LEe)):this.nodes.forEach(j6),this.clearAllSnapshots();const o=Li.now();Fr.delta=il(0,1e3/60,o-Fr.timestamp),Fr.timestamp=o,Fr.isProcessing=!0,d_.update.process(Fr),d_.preRender.process(Fr),d_.render.process(Fr),Fr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,SP.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach($Ee),this.sharedNodes.forEach(WEe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!yi(this.snapshot.measuredBox.x)&&!yi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=$n(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!mK(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&this.instance&&(o||Su(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return a&&(c=this.removeTransform(c)),YEe(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:a}=this.options;if(!a)return $n();const o=a.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(XEe))){const{scroll:d}=this.root;d&&(Mf(o.x,d.offset.x),Mf(o.y,d.offset.y))}return o}removeElementScroll(a){var c;const o=$n();if(ks(o,a),(c=this.scroll)!=null&&c.wasRoot)return o;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:f,options:h}=d;d!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&ks(o,a),Mf(o.x,f.offset.x),Mf(o.y,f.offset.y))}return o}applyTransform(a,o=!1){const c=$n();ks(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Rf(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Su(d.latestValues)&&Rf(c,d.latestValues)}return Su(this.latestValues)&&Rf(c,this.latestValues),c}removeTransform(a){const o=$n();ks(o,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Su(u.latestValues))continue;VC(u.latestValues)&&u.updateSnapshot();const d=$n(),f=u.measurePageBox();ks(d,f),S6(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Su(this.latestValues)&&S6(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Fr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var h;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Fr.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$n(),this.relativeTargetOrigin=$n(),zm(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),ks(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=$n(),this.targetWithTransforms=$n()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),nEe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ks(this.target,this.layout.layoutBox),Xq(this.target,this.targetDelta)):ks(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$n(),this.relativeTargetOrigin=$n(),zm(this.relativeTargetOrigin,this.target,p.target),ks(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||VC(this.parent.latestValues)||Yq(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var m;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Fr.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;ks(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;pwe(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=$n());const{target:p}=a;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(b6(this.prevProjectionDelta.x,this.projectionDelta.x),b6(this.prevProjectionDelta.y,this.projectionDelta.y)),Um(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!T6(this.projectionDelta.x,this.prevProjectionDelta.x)||!T6(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Lf(),this.projectionDelta=Lf(),this.projectionDeltaWithTransform=Lf()}setAnimationOrigin(a,o=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=Lf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=$n(),p=c?c.source:void 0,m=this.layout?this.layout.source:void 0,g=p!==m,v=this.getStack(),y=!v||v.members.length<=1,x=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(KEe));this.animationProgress=0;let b;this.mixTargetDelta=S=>{const E=S/1e3;P6(f.x,a.x,E),P6(f.y,a.y,E),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(zm(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),qEe(this.relativeTarget,this.relativeTargetOrigin,h,E),b&&OEe(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=$n()),ks(b,this.relativeTarget)),g&&(this.animationValues=d,_Ee(d,u,this.latestValues,E,x,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var o,c,u;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(jc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xn.update(()=>{Sx.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=wh(0)),this.currentAnimation=bEe(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),a.onUpdate&&a.onUpdate(d)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(DEe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:d}=a;if(!(!o||!c||!u)){if(this!==a&&this.layout&&u&&xK(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||$n();const f=yi(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+f;const h=yi(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+h}ks(o,c),Rf(o,d),Um(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new PEe),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&S_("z",a,u,this.animationValues);for(let d=0;d<E_.length;d++)S_(`rotate${E_[d]}`,a,u,this.animationValues),S_(`skew${E_[d]}`,a,u,this.animationValues);a.render();for(const d in u)a.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=Ex(o==null?void 0:o.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=Ex(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Su(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=IEe(this.projectionDeltaWithTransform,this.treeScale,d);c&&(f=c(d,f)),a.transform=f;const{x:h,y:p}=this.projectionDelta;a.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,u.animationValues?a.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in Hg){if(d[m]===void 0)continue;const{correct:g,applyTo:v,isCSSVariable:y}=Hg[m],x=f==="none"?d[m]:g(d[m],u);if(v){const b=v.length;for(let S=0;S<b;S++)a[v[S]]=x}else y?this.options.visualElement.renderState.vars[m]=x:a[m]=x}this.options.layoutId&&(a.pointerEvents=u===this?Ex(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(A6),this.root.sharedNodes.clear()}}}function REe(e){e.updateLayout()}function LEe(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:s}=e.options,a=t.source!==e.layout.source;s==="size"?Ps(f=>{const h=a?t.measuredBox[f]:t.layoutBox[f],p=yi(h);h.min=r[f].min,h.max=h.min+p}):xK(s,t.layoutBox,r)&&Ps(f=>{const h=a?t.measuredBox[f]:t.layoutBox[f],p=yi(r[f]);h.max=h.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+p)});const o=Lf();Um(o,r,t.layoutBox);const c=Lf();a?Um(c,e.applyTransform(i,!0),t.measuredBox):Um(c,r,t.layoutBox);const u=!mK(o);let d=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:p}=f;if(h&&p){const m=$n();zm(m,t.layoutBox,h.layoutBox);const g=$n();zm(g,r,p.layoutBox),gK(m,g)||(d=!0),f.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=m,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function FEe(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function BEe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function $Ee(e){e.clearSnapshot()}function A6(e){e.clearMeasurements()}function j6(e){e.isLayoutDirty=!1}function UEe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function O6(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function zEe(e){e.resolveTargetDelta()}function HEe(e){e.calcProjection()}function VEe(e){e.resetSkewAndRotation()}function WEe(e){e.removeLeadSnapshot()}function P6(e,t,n){e.translate=Nn(t.translate,0,n),e.scale=Nn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function I6(e,t,n,r){e.min=Nn(t.min,n.min,r),e.max=Nn(t.max,n.max,r)}function qEe(e,t,n,r){I6(e.x,t.x,n.x,r),I6(e.y,t.y,n.y,r)}function KEe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const GEe={duration:.45,ease:[.4,0,.1,1]},D6=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),M6=D6("applewebkit/")&&!D6("chrome/")?Math.round:Gs;function R6(e){e.min=M6(e.min),e.max=M6(e.max)}function YEe(e){R6(e.x),R6(e.y)}function xK(e,t,n){return e==="position"||e==="preserve-aspect"&&!tEe(C6(t),C6(n),.2)}function XEe(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const QEe=yK({attachResizeListener:(e,t)=>Vg(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),N_={current:void 0},bK=yK({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!N_.current){const e=new QEe({});e.mount(window),e.setOptions({layoutScroll:!0}),N_.current=e}return N_.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),JEe={pan:{Feature:gEe},drag:{Feature:mEe,ProjectionNode:bK,MeasureLayout:fK}};function L6(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&xn.postRender(()=>s(t,J0(t)))}class ZEe extends Yc{mount(){const{current:t}=this.node;t&&(this.unmount=_1e(t,(n,r)=>(L6(this.node,r,"Start"),i=>L6(this.node,i,"End"))))}unmount(){}}class eSe extends Yc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Y0(Vg(this.node.current,"focus",()=>this.onFocus()),Vg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function F6(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&xn.postRender(()=>s(t,J0(t)))}class tSe extends Yc{mount(){const{current:t}=this.node;t&&(this.unmount=A1e(t,(n,r)=>(F6(this.node,r,"Start"),(i,{success:s})=>F6(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const QC=new WeakMap,__=new WeakMap,nSe=e=>{const t=QC.get(e.target);t&&t(e)},rSe=e=>{e.forEach(nSe)};function iSe({root:e,...t}){const n=e||document;__.has(n)||__.set(n,{});const r=__.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(rSe,{root:e,...t})),r[i]}function sSe(e,t,n){const r=iSe(t);return QC.set(e,n),r.observe(e),()=>{QC.delete(e),r.unobserve(e)}}const aSe={some:0,all:1};class oSe extends Yc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:aSe[i]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=u?d:f;h&&h(c)};return sSe(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(lSe(t,n))&&this.startObserver()}unmount(){}}function lSe({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const cSe={inView:{Feature:oSe},tap:{Feature:tSe},focus:{Feature:eSe},hover:{Feature:ZEe}},uSe={layout:{ProjectionNode:bK,MeasureLayout:fK}},dSe={...Ywe,...cSe,...JEe,...uSe},B6=dwe(dSe,Nwe),wK=at.memo(({className:e})=>{const t=["M-380 -189C-380 -189 -312 216 152 343C616 470 684 875 684 875","M-373 -197C-373 -197 -305 208 159 335C623 462 691 867 691 867","M-366 -205C-366 -205 -298 200 166 327C630 454 698 859 698 859","M-359 -213C-359 -213 -291 192 173 319C637 446 705 851 705 851","M-352 -221C-352 -221 -284 184 180 311C644 438 712 843 712 843","M-345 -229C-345 -229 -277 176 187 303C651 430 719 835 719 835","M-338 -237C-338 -237 -270 168 194 295C658 422 726 827 726 827","M-331 -245C-331 -245 -263 160 201 287C665 414 733 819 733 819","M-324 -253C-324 -253 -256 152 208 279C672 406 740 811 740 811","M-317 -261C-317 -261 -249 144 215 271C679 398 747 803 747 803","M-310 -269C-310 -269 -242 136 222 263C686 390 754 795 754 795","M-303 -277C-303 -277 -235 128 229 255C693 382 761 787 761 787","M-296 -285C-296 -285 -228 120 236 247C700 374 768 779 768 779","M-289 -293C-289 -293 -221 112 243 239C707 366 775 771 775 771","M-282 -301C-282 -301 -214 104 250 231C714 358 782 763 782 763","M-275 -309C-275 -309 -207 96 257 223C721 350 789 755 789 755","M-268 -317C-268 -317 -200 88 264 215C728 342 796 747 796 747","M-261 -325C-261 -325 -193 80 271 207C735 334 803 739 803 739","M-254 -333C-254 -333 -186 72 278 199C742 326 810 731 810 731","M-247 -341C-247 -341 -179 64 285 191C749 318 817 723 817 723","M-240 -349C-240 -349 -172 56 292 183C756 310 824 715 824 715","M-233 -357C-233 -357 -165 48 299 175C763 302 831 707 831 707","M-226 -365C-226 -365 -158 40 306 167C770 294 838 699 838 699","M-219 -373C-219 -373 -151 32 313 159C777 286 845 691 845 691","M-212 -381C-212 -381 -144 24 320 151C784 278 852 683 852 683","M-205 -389C-205 -389 -137 16 327 143C791 270 859 675 859 675","M-198 -397C-198 -397 -130 8 334 135C798 262 866 667 866 667","M-191 -405C-191 -405 -123 0 341 127C805 254 873 659 873 659","M-184 -413C-184 -413 -116 -8 348 119C812 246 880 651 880 651","M-177 -421C-177 -421 -109 -16 355 111C819 238 887 643 887 643","M-170 -429C-170 -429 -102 -24 362 103C826 230 894 635 894 635","M-163 -437C-163 -437 -95 -32 369 95C833 222 901 627 901 627","M-156 -445C-156 -445 -88 -40 376 87C840 214 908 619 908 619","M-149 -453C-149 -453 -81 -48 383 79C847 206 915 611 915 611","M-142 -461C-142 -461 -74 -56 390 71C854 198 922 603 922 603","M-135 -469C-135 -469 -67 -64 397 63C861 190 929 595 929 595","M-128 -477C-128 -477 -60 -72 404 55C868 182 936 587 936 587","M-121 -485C-121 -485 -53 -80 411 47C875 174 943 579 943 579","M-114 -493C-114 -493 -46 -88 418 39C882 166 950 571 950 571","M-107 -501C-107 -501 -39 -96 425 31C889 158 957 563 957 563","M-100 -509C-100 -509 -32 -104 432 23C896 150 964 555 964 555","M-93 -517C-93 -517 -25 -112 439 15C903 142 971 547 971 547","M-86 -525C-86 -525 -18 -120 446 7C910 134 978 539 978 539","M-79 -533C-79 -533 -11 -128 453 -1C917 126 985 531 985 531","M-72 -541C-72 -541 -4 -136 460 -9C924 118 992 523 992 523","M-65 -549C-65 -549 3 -144 467 -17C931 110 999 515 999 515","M-58 -557C-58 -557 10 -152 474 -25C938 102 1006 507 1006 507","M-51 -565C-51 -565 17 -160 481 -33C945 94 1013 499 1013 499","M-44 -573C-44 -573 24 -168 488 -41C952 86 1020 491 1020 491","M-37 -581C-37 -581 31 -176 495 -49C959 78 1027 483 1027 483"];return l.jsx("div",{className:Re("absolute h-full w-full inset-0 [mask-size:40px] [mask-repeat:no-repeat] flex items-center justify-center",e),children:l.jsxs("svg",{className:"z-0 h-full w-full pointer-events-none absolute",width:"100%",height:"100%",viewBox:"0 0 696 316",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M-380 -189C-380 -189 -312 216 152 343C616 470 684 875 684 875M-373 -197C-373 -197 -305 208 159 335C623 462 691 867 691 867M-366 -205C-366 -205 -298 200 166 327C630 454 698 859 698 859M-359 -213C-359 -213 -291 192 173 319C637 446 705 851 705 851M-352 -221C-352 -221 -284 184 180 311C644 438 712 843 712 843M-345 -229C-345 -229 -277 176 187 303C651 430 719 835 719 835M-338 -237C-338 -237 -270 168 194 295C658 422 726 827 726 827M-331 -245C-331 -245 -263 160 201 287C665 414 733 819 733 819M-324 -253C-324 -253 -256 152 208 279C672 406 740 811 740 811M-317 -261C-317 -261 -249 144 215 271C679 398 747 803 747 803M-310 -269C-310 -269 -242 136 222 263C686 390 754 795 754 795M-303 -277C-303 -277 -235 128 229 255C693 382 761 787 761 787M-296 -285C-296 -285 -228 120 236 247C700 374 768 779 768 779M-289 -293C-289 -293 -221 112 243 239C707 366 775 771 775 771M-282 -301C-282 -301 -214 104 250 231C714 358 782 763 782 763M-275 -309C-275 -309 -207 96 257 223C721 350 789 755 789 755M-268 -317C-268 -317 -200 88 264 215C728 342 796 747 796 747M-261 -325C-261 -325 -193 80 271 207C735 334 803 739 803 739M-254 -333C-254 -333 -186 72 278 199C742 326 810 731 810 731M-247 -341C-247 -341 -179 64 285 191C749 318 817 723 817 723M-240 -349C-240 -349 -172 56 292 183C756 310 824 715 824 715M-233 -357C-233 -357 -165 48 299 175C763 302 831 707 831 707M-226 -365C-226 -365 -158 40 306 167C770 294 838 699 838 699M-219 -373C-219 -373 -151 32 313 159C777 286 845 691 845 691M-212 -381C-212 -381 -144 24 320 151C784 278 852 683 852 683M-205 -389C-205 -389 -137 16 327 143C791 270 859 675 859 675M-198 -397C-198 -397 -130 8 334 135C798 262 866 667 866 667M-191 -405C-191 -405 -123 0 341 127C805 254 873 659 873 659M-184 -413C-184 -413 -116 -8 348 119C812 246 880 651 880 651M-177 -421C-177 -421 -109 -16 355 111C819 238 887 643 887 643M-170 -429C-170 -429 -102 -24 362 103C826 230 894 635 894 635M-163 -437C-163 -437 -95 -32 369 95C833 222 901 627 901 627M-156 -445C-156 -445 -88 -40 376 87C840 214 908 619 908 619M-149 -453C-149 -453 -81 -48 383 79C847 206 915 611 915 611M-142 -461C-142 -461 -74 -56 390 71C854 198 922 603 922 603M-135 -469C-135 -469 -67 -64 397 63C861 190 929 595 929 595M-128 -477C-128 -477 -60 -72 404 55C868 182 936 587 936 587M-121 -485C-121 -485 -53 -80 411 47C875 174 943 579 943 579M-114 -493C-114 -493 -46 -88 418 39C882 166 950 571 950 571M-107 -501C-107 -501 -39 -96 425 31C889 158 957 563 957 563M-100 -509C-100 -509 -32 -104 432 23C896 150 964 555 964 555M-93 -517C-93 -517 -25 -112 439 15C903 142 971 547 971 547M-86 -525C-86 -525 -18 -120 446 7C910 134 978 539 978 539M-79 -533C-79 -533 -11 -128 453 -1C917 126 985 531 985 531M-72 -541C-72 -541 -4 -136 460 -9C924 118 992 523 992 523M-65 -549C-65 -549 3 -144 467 -17C931 110 999 515 999 515M-58 -557C-58 -557 10 -152 474 -25C938 102 1006 507 1006 507M-51 -565C-51 -565 17 -160 481 -33C945 94 1013 499 1013 499M-44 -573C-44 -573 24 -168 488 -41C952 86 1020 491 1020 491M-37 -581C-37 -581 31 -176 495 -49C959 78 1027 483 1027 483M-30 -589C-30 -589 38 -184 502 -57C966 70 1034 475 1034 475M-23 -597C-23 -597 45 -192 509 -65C973 62 1041 467 1041 467M-16 -605C-16 -605 52 -200 516 -73C980 54 1048 459 1048 459M-9 -613C-9 -613 59 -208 523 -81C987 46 1055 451 1055 451M-2 -621C-2 -621 66 -216 530 -89C994 38 1062 443 1062 443M5 -629C5 -629 73 -224 537 -97C1001 30 1069 435 1069 435M12 -637C12 -637 80 -232 544 -105C1008 22 1076 427 1076 427M19 -645C19 -645 87 -240 551 -113C1015 14 1083 419 1083 419",stroke:"url(#paint0_radial_242_278)",strokeOpacity:"0.05",strokeWidth:"0.5"}),t.map((n,r)=>l.jsx(B6.path,{d:n,stroke:`url(#linearGradient-${r})`,strokeOpacity:"0.4",strokeWidth:"0.5"},`path-${r}`)),l.jsxs("defs",{children:[t.map((n,r)=>l.jsxs(B6.linearGradient,{id:`linearGradient-${r}`,initial:{x1:"0%",x2:"0%",y1:"0%",y2:"0%"},animate:{x1:["0%","100%"],x2:["0%","95%"],y1:["0%","100%"],y2:["0%",`${93+Math.random()*8}%`]},transition:{duration:Math.random()*10+10,ease:"easeInOut",repeat:1/0,delay:Math.random()*10},children:[l.jsx("stop",{stopColor:"#18CCFC",stopOpacity:"0"}),l.jsx("stop",{stopColor:"#18CCFC"}),l.jsx("stop",{offset:"32.5%",stopColor:"#6344F5"}),l.jsx("stop",{offset:"100%",stopColor:"#AE48FF",stopOpacity:"0"})]},`gradient-${r}`)),l.jsxs("radialGradient",{id:"paint0_radial_242_278",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(352 34) rotate(90) scale(555 1560.62)",children:[l.jsx("stop",{offset:"0.0666667",stopColor:"var(--neutral-300)"}),l.jsx("stop",{offset:"0.243243",stopColor:"var(--neutral-300)"}),l.jsx("stop",{offset:"0.43594",stopColor:"white",stopOpacity:"0"})]})]})]})})});wK.displayName="BackgroundBeams";function Hm(e){let t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function JC(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function fSe(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function $6(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function U6(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function hSe(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function pSe(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function k_(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function mSe(e,t){let n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}function gSe(e,t){let n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function z6(e){let t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function vSe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function ySe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function ZC(e,t){let n=t[0],r=t[1],i=t[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function EK(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function H6(e,t,n){let r=t[0],i=t[1],s=t[2],a=n[0],o=n[1],c=n[2];return e[0]=i*c-s*o,e[1]=s*a-r*c,e[2]=r*o-i*a,e}function xSe(e,t,n,r){let i=t[0],s=t[1],a=t[2];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=a+r*(n[2]-a),e}function bSe(e,t,n,r,i){const s=Math.exp(-r*i);let a=t[0],o=t[1],c=t[2];return e[0]=n[0]+(a-n[0])*s,e[1]=n[1]+(o-n[1])*s,e[2]=n[2]+(c-n[2])*s,e}function wSe(e,t,n){let r=t[0],i=t[1],s=t[2],a=n[3]*r+n[7]*i+n[11]*s+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/a,e}function ESe(e,t,n){let r=t[0],i=t[1],s=t[2],a=n[3]*r+n[7]*i+n[11]*s+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*s)/a,e[1]=(n[1]*r+n[5]*i+n[9]*s)/a,e[2]=(n[2]*r+n[6]*i+n[10]*s)/a,e}function SSe(e,t,n){let r=t[0],i=t[1],s=t[2];return e[0]=r*n[0]+i*n[3]+s*n[6],e[1]=r*n[1]+i*n[4]+s*n[7],e[2]=r*n[2]+i*n[5]+s*n[8],e}function NSe(e,t,n){let r=t[0],i=t[1],s=t[2],a=n[0],o=n[1],c=n[2],u=n[3],d=o*s-c*i,f=c*r-a*s,h=a*i-o*r,p=o*h-c*f,m=c*d-a*h,g=a*f-o*d,v=u*2;return d*=v,f*=v,h*=v,p*=2,m*=2,g*=2,e[0]=r+d+p,e[1]=i+f+m,e[2]=s+h+g,e}const _Se=function(){const e=[0,0,0],t=[0,0,0];return function(n,r){JC(e,n),JC(t,r),ZC(e,e),ZC(t,t);let i=EK(e,t);return i>1?0:i<-1?Math.PI:Math.acos(i)}}();function kSe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}class wa extends Array{constructor(t=0,n=t,r=t){return super(t,n,r),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this[0]=t}set y(t){this[1]=t}set z(t){this[2]=t}set(t,n=t,r=t){return t.length?this.copy(t):(fSe(this,t,n,r),this)}copy(t){return JC(this,t),this}add(t,n){return n?$6(this,t,n):$6(this,this,t),this}sub(t,n){return n?U6(this,t,n):U6(this,this,t),this}multiply(t){return t.length?hSe(this,this,t):k_(this,this,t),this}divide(t){return t.length?pSe(this,this,t):k_(this,this,1/t),this}inverse(t=this){return ySe(this,t),this}len(){return Hm(this)}distance(t){return t?mSe(this,t):Hm(this)}squaredLen(){return z6(this)}squaredDistance(t){return t?gSe(this,t):z6(this)}negate(t=this){return vSe(this,t),this}cross(t,n){return n?H6(this,t,n):H6(this,this,t),this}scale(t){return k_(this,this,t),this}normalize(){return ZC(this,this),this}dot(t){return EK(this,t)}equals(t){return kSe(this,t)}applyMatrix3(t){return SSe(this,this,t),this}applyMatrix4(t){return wSe(this,this,t),this}scaleRotateMatrix4(t){return ESe(this,this,t),this}applyQuaternion(t){return NSe(this,this,t),this}angle(t){return _Se(this,t)}lerp(t,n){return xSe(this,this,t,n),this}smoothLerp(t,n,r){return bSe(this,this,t,n,r),this}clone(){return new wa(this[0],this[1],this[2])}fromArray(t,n=0){return this[0]=t[n],this[1]=t[n+1],this[2]=t[n+2],this}toArray(t=[],n=0){return t[n]=this[0],t[n+1]=this[1],t[n+2]=this[2],t}transformDirection(t){const n=this[0],r=this[1],i=this[2];return this[0]=t[0]*n+t[4]*r+t[8]*i,this[1]=t[1]*n+t[5]*r+t[9]*i,this[2]=t[2]*n+t[6]*r+t[10]*i,this.normalize()}}const V6=new wa;let CSe=1,TSe=1,W6=!1;class ASe{constructor(t,n={}){t.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=t,this.attributes=n,this.id=CSe++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let r in n)this.addAttribute(r,n[r])}addAttribute(t,n){if(this.attributes[t]=n,n.id=TSe++,n.size=n.size||1,n.type=n.type||(n.data.constructor===Float32Array?this.gl.FLOAT:n.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),n.target=t==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,n.normalized=n.normalized||!1,n.stride=n.stride||0,n.offset=n.offset||0,n.count=n.count||(n.stride?n.data.byteLength/n.stride:n.data.length/n.size),n.divisor=n.instanced||0,n.needsUpdate=!1,n.usage=n.usage||this.gl.STATIC_DRAW,n.buffer||this.updateAttribute(n),n.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==n.count*n.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,n.count*n.divisor);this.instancedCount=n.count*n.divisor}else t==="index"?this.drawRange.count=n.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,n.count))}updateAttribute(t){const n=!t.buffer;n&&(t.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==t.buffer&&(this.gl.bindBuffer(t.target,t.buffer),this.glState.boundBuffer=t.buffer),n?this.gl.bufferData(t.target,t.data,t.usage):this.gl.bufferSubData(t.target,0,t.data),t.needsUpdate=!1}setIndex(t){this.addAttribute("index",t)}setDrawRange(t,n){this.drawRange.start=t,this.drawRange.count=n}setInstancedCount(t){this.instancedCount=t}createVAO(t){this.VAOs[t.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.bindAttributes(t)}bindAttributes(t){t.attributeLocations.forEach((n,{name:r,type:i})=>{if(!this.attributes[r]){console.warn(`active attribute ${r} not being supplied`);return}const s=this.attributes[r];this.gl.bindBuffer(s.target,s.buffer),this.glState.boundBuffer=s.buffer;let a=1;i===35674&&(a=2),i===35675&&(a=3),i===35676&&(a=4);const o=s.size/a,c=a===1?0:a*a*4,u=a===1?0:a*4;for(let d=0;d<a;d++)this.gl.vertexAttribPointer(n+d,o,s.type,s.normalized,s.stride+c,s.offset+d*u),this.gl.enableVertexAttribArray(n+d),this.gl.renderer.vertexAttribDivisor(n+d,s.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:t,mode:n=this.gl.TRIANGLES}){var i;this.gl.renderer.currentGeometry!==`${this.id}_${t.attributeOrder}`&&(this.VAOs[t.attributeOrder]||this.createVAO(t),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${t.attributeOrder}`),t.attributeLocations.forEach((s,{name:a})=>{const o=this.attributes[a];o.needsUpdate&&this.updateAttribute(o)});let r=2;((i=this.attributes.index)==null?void 0:i.type)===this.gl.UNSIGNED_INT&&(r=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(n,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*r,this.instancedCount):this.gl.renderer.drawArraysInstanced(n,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(n,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*r):this.gl.drawArrays(n,this.drawRange.start,this.drawRange.count)}getPosition(){const t=this.attributes.position;if(t.data)return t;if(!W6)return console.warn("No position buffer data found to compute bounds"),W6=!0}computeBoundingBox(t){t||(t=this.getPosition());const n=t.data,r=t.size;this.bounds||(this.bounds={min:new wa,max:new wa,center:new wa,scale:new wa,radius:1/0});const i=this.bounds.min,s=this.bounds.max,a=this.bounds.center,o=this.bounds.scale;i.set(1/0),s.set(-1/0);for(let c=0,u=n.length;c<u;c+=r){const d=n[c],f=n[c+1],h=n[c+2];i.x=Math.min(d,i.x),i.y=Math.min(f,i.y),i.z=Math.min(h,i.z),s.x=Math.max(d,s.x),s.y=Math.max(f,s.y),s.z=Math.max(h,s.z)}o.sub(s,i),a.add(i,s).divide(2)}computeBoundingSphere(t){t||(t=this.getPosition());const n=t.data,r=t.size;this.bounds||this.computeBoundingBox(t);let i=0;for(let s=0,a=n.length;s<a;s+=r)V6.fromArray(n,s),i=Math.max(i,this.bounds.center.squaredDistance(V6));this.bounds.radius=Math.sqrt(i)}remove(){for(let t in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[t]),delete this.VAOs[t];for(let t in this.attributes)this.gl.deleteBuffer(this.attributes[t].buffer),delete this.attributes[t]}}let jSe=1;const q6={};class OSe{constructor(t,{vertex:n,fragment:r,uniforms:i={},transparent:s=!1,cullFace:a=t.BACK,frontFace:o=t.CCW,depthTest:c=!0,depthWrite:u=!0,depthFunc:d=t.LEQUAL}={}){t.canvas||console.error("gl not passed as first argument to Program"),this.gl=t,this.uniforms=i,this.id=jSe++,n||console.warn("vertex shader not supplied"),r||console.warn("fragment shader not supplied"),this.transparent=s,this.cullFace=a,this.frontFace=o,this.depthTest=c,this.depthWrite=u,this.depthFunc=d,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=t.createShader(t.VERTEX_SHADER),this.fragmentShader=t.createShader(t.FRAGMENT_SHADER),this.program=t.createProgram(),t.attachShader(this.program,this.vertexShader),t.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:n,fragment:r})}setShaders({vertex:t,fragment:n}){if(t&&(this.gl.shaderSource(this.vertexShader,t),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}
Vertex Shader
${K6(t)}`)),n&&(this.gl.shaderSource(this.fragmentShader,n),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}
Fragment Shader
${K6(n)}`)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let r=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let a=0;a<r;a++){let o=this.gl.getActiveUniform(this.program,a);this.uniformLocations.set(o,this.gl.getUniformLocation(this.program,o.name));const c=o.name.match(/(\w+)/g);o.uniformName=c[0],o.nameComponents=c.slice(1)}this.attributeLocations=new Map;const i=[],s=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let a=0;a<s;a++){const o=this.gl.getActiveAttrib(this.program,a),c=this.gl.getAttribLocation(this.program,o.name);c!==-1&&(i[c]=o.name,this.attributeLocations.set(o,c))}this.attributeOrder=i.join("")}setBlendFunc(t,n,r,i){this.blendFunc.src=t,this.blendFunc.dst=n,this.blendFunc.srcAlpha=r,this.blendFunc.dstAlpha=i,t&&(this.transparent=!0)}setBlendEquation(t,n){this.blendEquation.modeRGB=t,this.blendEquation.modeAlpha=n}setStencilFunc(t,n,r){this.stencilRef=n,this.stencilFunc.func=t,this.stencilFunc.ref=n,this.stencilFunc.mask=r}setStencilOp(t,n,r){this.stencilOp.stencilFail=t,this.stencilOp.depthFail=n,this.stencilOp.depthPass=r}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:t=!1}={}){let n=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((i,s)=>{let a=this.uniforms[s.uniformName];for(const o of s.nameComponents){if(!a)break;if(o in a)a=a[o];else{if(Array.isArray(a.value))break;a=void 0;break}}if(!a)return G6(`Active uniform ${s.name} has not been supplied`);if(a&&a.value===void 0)return G6(`${s.name} uniform is missing a value parameter`);if(a.value.texture)return n=n+1,a.value.update(n),C_(this.gl,s.type,i,n);if(a.value.length&&a.value[0].texture){const o=[];return a.value.forEach(c=>{n=n+1,c.update(n),o.push(n)}),C_(this.gl,s.type,i,o)}C_(this.gl,s.type,i,a.value)}),this.applyState(),t&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function C_(e,t,n,r){r=r.length?PSe(r):r;const i=e.renderer.state.uniformLocations.get(n);if(r.length)if(i===void 0||i.length!==r.length)e.renderer.state.uniformLocations.set(n,r.slice(0));else{if(ISe(i,r))return;i.set?i.set(r):DSe(i,r),e.renderer.state.uniformLocations.set(n,i)}else{if(i===r)return;e.renderer.state.uniformLocations.set(n,r)}switch(t){case 5126:return r.length?e.uniform1fv(n,r):e.uniform1f(n,r);case 35664:return e.uniform2fv(n,r);case 35665:return e.uniform3fv(n,r);case 35666:return e.uniform4fv(n,r);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return r.length?e.uniform1iv(n,r):e.uniform1i(n,r);case 35671:case 35667:return e.uniform2iv(n,r);case 35672:case 35668:return e.uniform3iv(n,r);case 35673:case 35669:return e.uniform4iv(n,r);case 35674:return e.uniformMatrix2fv(n,!1,r);case 35675:return e.uniformMatrix3fv(n,!1,r);case 35676:return e.uniformMatrix4fv(n,!1,r)}}function K6(e){let t=e.split(`
`);for(let n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join(`
`)}function PSe(e){const t=e.length,n=e[0].length;if(n===void 0)return e;const r=t*n;let i=q6[r];i||(q6[r]=i=new Float32Array(r));for(let s=0;s<t;s++)i.set(e[s],s*n);return i}function ISe(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function DSe(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t[n]}let T_=0;function G6(e){T_>100||(console.warn(e),T_++,T_>100&&console.warn("More than 100 program warnings - stopping logs."))}const A_=new wa;let MSe=1;class RSe{constructor({canvas:t=document.createElement("canvas"),width:n=300,height:r=150,dpr:i=1,alpha:s=!1,depth:a=!0,stencil:o=!1,antialias:c=!1,premultipliedAlpha:u=!1,preserveDrawingBuffer:d=!1,powerPreference:f="default",autoClear:h=!0,webgl:p=2}={}){const m={alpha:s,depth:a,stencil:o,antialias:c,premultipliedAlpha:u,preserveDrawingBuffer:d,powerPreference:f};this.dpr=i,this.alpha=s,this.color=!0,this.depth=a,this.stencil=o,this.premultipliedAlpha=u,this.autoClear=h,this.id=MSe++,p===2&&(this.gl=t.getContext("webgl2",m)),this.isWebgl2=!!this.gl,this.gl||(this.gl=t.getContext("webgl",m)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(n,r),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(t,n){this.width=t,this.height=n,this.gl.canvas.width=t*this.dpr,this.gl.canvas.height=n*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:t+"px",height:n+"px"})}setViewport(t,n,r=0,i=0){this.state.viewport.width===t&&this.state.viewport.height===n||(this.state.viewport.width=t,this.state.viewport.height=n,this.state.viewport.x=r,this.state.viewport.y=i,this.gl.viewport(r,i,t,n))}setScissor(t,n,r=0,i=0){this.gl.scissor(r,i,t,n)}enable(t){this.state[t]!==!0&&(this.gl.enable(t),this.state[t]=!0)}disable(t){this.state[t]!==!1&&(this.gl.disable(t),this.state[t]=!1)}setBlendFunc(t,n,r,i){this.state.blendFunc.src===t&&this.state.blendFunc.dst===n&&this.state.blendFunc.srcAlpha===r&&this.state.blendFunc.dstAlpha===i||(this.state.blendFunc.src=t,this.state.blendFunc.dst=n,this.state.blendFunc.srcAlpha=r,this.state.blendFunc.dstAlpha=i,r!==void 0?this.gl.blendFuncSeparate(t,n,r,i):this.gl.blendFunc(t,n))}setBlendEquation(t,n){t=t||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===t&&this.state.blendEquation.modeAlpha===n)&&(this.state.blendEquation.modeRGB=t,this.state.blendEquation.modeAlpha=n,n!==void 0?this.gl.blendEquationSeparate(t,n):this.gl.blendEquation(t))}setCullFace(t){this.state.cullFace!==t&&(this.state.cullFace=t,this.gl.cullFace(t))}setFrontFace(t){this.state.frontFace!==t&&(this.state.frontFace=t,this.gl.frontFace(t))}setDepthMask(t){this.state.depthMask!==t&&(this.state.depthMask=t,this.gl.depthMask(t))}setDepthFunc(t){this.state.depthFunc!==t&&(this.state.depthFunc=t,this.gl.depthFunc(t))}setStencilMask(t){this.state.stencilMask!==t&&(this.state.stencilMask=t,this.gl.stencilMask(t))}setStencilFunc(t,n,r){this.state.stencilFunc===t&&this.state.stencilRef===n&&this.state.stencilFuncMask===r||(this.state.stencilFunc=t||this.gl.ALWAYS,this.state.stencilRef=n||0,this.state.stencilFuncMask=r||0,this.gl.stencilFunc(t||this.gl.ALWAYS,n||0,r||0))}setStencilOp(t,n,r){this.state.stencilFail===t&&this.state.stencilDepthFail===n&&this.state.stencilDepthPass===r||(this.state.stencilFail=t,this.state.stencilDepthFail=n,this.state.stencilDepthPass=r,this.gl.stencilOp(t,n,r))}activeTexture(t){this.state.activeTextureUnit!==t&&(this.state.activeTextureUnit=t,this.gl.activeTexture(this.gl.TEXTURE0+t))}bindFramebuffer({target:t=this.gl.FRAMEBUFFER,buffer:n=null}={}){this.state.framebuffer!==n&&(this.state.framebuffer=n,this.gl.bindFramebuffer(t,n))}getExtension(t,n,r){return n&&this.gl[n]?this.gl[n].bind(this.gl):(this.extensions[t]||(this.extensions[t]=this.gl.getExtension(t)),n?this.extensions[t]?this.extensions[t][r].bind(this.extensions[t]):null:this.extensions[t])}sortOpaque(t,n){return t.renderOrder!==n.renderOrder?t.renderOrder-n.renderOrder:t.program.id!==n.program.id?t.program.id-n.program.id:t.zDepth!==n.zDepth?t.zDepth-n.zDepth:n.id-t.id}sortTransparent(t,n){return t.renderOrder!==n.renderOrder?t.renderOrder-n.renderOrder:t.zDepth!==n.zDepth?n.zDepth-t.zDepth:n.id-t.id}sortUI(t,n){return t.renderOrder!==n.renderOrder?t.renderOrder-n.renderOrder:t.program.id!==n.program.id?t.program.id-n.program.id:n.id-t.id}getRenderList({scene:t,camera:n,frustumCull:r,sort:i}){let s=[];if(n&&r&&n.updateFrustum(),t.traverse(a=>{if(!a.visible)return!0;a.draw&&(r&&a.frustumCulled&&n&&!n.frustumIntersectsMesh(a)||s.push(a))}),i){const a=[],o=[],c=[];s.forEach(u=>{u.program.transparent?u.program.depthTest?o.push(u):c.push(u):a.push(u),u.zDepth=0,!(u.renderOrder!==0||!u.program.depthTest||!n)&&(u.worldMatrix.getTranslation(A_),A_.applyMatrix4(n.projectionViewMatrix),u.zDepth=A_.z)}),a.sort(this.sortOpaque),o.sort(this.sortTransparent),c.sort(this.sortUI),s=a.concat(o,c)}return s}render({scene:t,camera:n,target:r=null,update:i=!0,sort:s=!0,frustumCull:a=!0,clear:o}){r===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(r),this.setViewport(r.width,r.height)),(o||this.autoClear&&o!==!1)&&(this.depth&&(!r||r.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!r||r.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),i&&t.updateMatrixWorld(),n&&n.updateMatrixWorld(),this.getRenderList({scene:t,camera:n,frustumCull:a,sort:s}).forEach(u=>{u.draw({camera:n})})}}function LSe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function FSe(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function BSe(e,t){let n=t[0],r=t[1],i=t[2],s=t[3],a=n*n+r*r+i*i+s*s;return a>0&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=s*a,e}function $Se(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function USe(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function zSe(e,t,n){n=n*.5;let r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function Y6(e,t,n){let r=t[0],i=t[1],s=t[2],a=t[3],o=n[0],c=n[1],u=n[2],d=n[3];return e[0]=r*d+a*o+i*u-s*c,e[1]=i*d+a*c+s*o-r*u,e[2]=s*d+a*u+r*c-i*o,e[3]=a*d-r*o-i*c-s*u,e}function HSe(e,t,n){n*=.5;let r=t[0],i=t[1],s=t[2],a=t[3],o=Math.sin(n),c=Math.cos(n);return e[0]=r*c+a*o,e[1]=i*c+s*o,e[2]=s*c-i*o,e[3]=a*c-r*o,e}function VSe(e,t,n){n*=.5;let r=t[0],i=t[1],s=t[2],a=t[3],o=Math.sin(n),c=Math.cos(n);return e[0]=r*c-s*o,e[1]=i*c+a*o,e[2]=s*c+r*o,e[3]=a*c-i*o,e}function WSe(e,t,n){n*=.5;let r=t[0],i=t[1],s=t[2],a=t[3],o=Math.sin(n),c=Math.cos(n);return e[0]=r*c+i*o,e[1]=i*c-r*o,e[2]=s*c+a*o,e[3]=a*c-s*o,e}function qSe(e,t,n,r){let i=t[0],s=t[1],a=t[2],o=t[3],c=n[0],u=n[1],d=n[2],f=n[3],h,p,m,g,v;return p=i*c+s*u+a*d+o*f,p<0&&(p=-p,c=-c,u=-u,d=-d,f=-f),1-p>1e-6?(h=Math.acos(p),m=Math.sin(h),g=Math.sin((1-r)*h)/m,v=Math.sin(r*h)/m):(g=1-r,v=r),e[0]=g*i+v*c,e[1]=g*s+v*u,e[2]=g*a+v*d,e[3]=g*o+v*f,e}function KSe(e,t){let n=t[0],r=t[1],i=t[2],s=t[3],a=n*n+r*r+i*i+s*s,o=a?1/a:0;return e[0]=-n*o,e[1]=-r*o,e[2]=-i*o,e[3]=s*o,e}function GSe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function YSe(e,t){let n=t[0]+t[4]+t[8],r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{let i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);let s=(i+1)%3,a=(i+2)%3;r=Math.sqrt(t[i*3+i]-t[s*3+s]-t[a*3+a]+1),e[i]=.5*r,r=.5/r,e[3]=(t[s*3+a]-t[a*3+s])*r,e[s]=(t[s*3+i]+t[i*3+s])*r,e[a]=(t[a*3+i]+t[i*3+a])*r}return e}function XSe(e,t,n="YXZ"){let r=Math.sin(t[0]*.5),i=Math.cos(t[0]*.5),s=Math.sin(t[1]*.5),a=Math.cos(t[1]*.5),o=Math.sin(t[2]*.5),c=Math.cos(t[2]*.5);return n==="XYZ"?(e[0]=r*a*c+i*s*o,e[1]=i*s*c-r*a*o,e[2]=i*a*o+r*s*c,e[3]=i*a*c-r*s*o):n==="YXZ"?(e[0]=r*a*c+i*s*o,e[1]=i*s*c-r*a*o,e[2]=i*a*o-r*s*c,e[3]=i*a*c+r*s*o):n==="ZXY"?(e[0]=r*a*c-i*s*o,e[1]=i*s*c+r*a*o,e[2]=i*a*o+r*s*c,e[3]=i*a*c-r*s*o):n==="ZYX"?(e[0]=r*a*c-i*s*o,e[1]=i*s*c+r*a*o,e[2]=i*a*o-r*s*c,e[3]=i*a*c+r*s*o):n==="YZX"?(e[0]=r*a*c+i*s*o,e[1]=i*s*c+r*a*o,e[2]=i*a*o-r*s*c,e[3]=i*a*c-r*s*o):n==="XZY"&&(e[0]=r*a*c-i*s*o,e[1]=i*s*c-r*a*o,e[2]=i*a*o+r*s*c,e[3]=i*a*c+r*s*o),e}const QSe=LSe,JSe=FSe,ZSe=$Se,eNe=BSe;class tNe extends Array{constructor(t=0,n=0,r=0,i=1){super(t,n,r,i),this.onChange=()=>{},this._target=this;const s=["0","1","2","3"];return new Proxy(this,{set(a,o){const c=Reflect.set(...arguments);return c&&s.includes(o)&&a.onChange(),c}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(t){this._target[0]=t,this.onChange()}set y(t){this._target[1]=t,this.onChange()}set z(t){this._target[2]=t,this.onChange()}set w(t){this._target[3]=t,this.onChange()}identity(){return USe(this._target),this.onChange(),this}set(t,n,r,i){return t.length?this.copy(t):(JSe(this._target,t,n,r,i),this.onChange(),this)}rotateX(t){return HSe(this._target,this._target,t),this.onChange(),this}rotateY(t){return VSe(this._target,this._target,t),this.onChange(),this}rotateZ(t){return WSe(this._target,this._target,t),this.onChange(),this}inverse(t=this._target){return KSe(this._target,t),this.onChange(),this}conjugate(t=this._target){return GSe(this._target,t),this.onChange(),this}copy(t){return QSe(this._target,t),this.onChange(),this}normalize(t=this._target){return eNe(this._target,t),this.onChange(),this}multiply(t,n){return n?Y6(this._target,t,n):Y6(this._target,this._target,t),this.onChange(),this}dot(t){return ZSe(this._target,t)}fromMatrix3(t){return YSe(this._target,t),this.onChange(),this}fromEuler(t,n){return XSe(this._target,t,t.order),n||this.onChange(),this}fromAxisAngle(t,n){return zSe(this._target,t,n),this.onChange(),this}slerp(t,n){return qSe(this._target,this._target,t,n),this.onChange(),this}fromArray(t,n=0){return this._target[0]=t[n],this._target[1]=t[n+1],this._target[2]=t[n+2],this._target[3]=t[n+3],this.onChange(),this}toArray(t=[],n=0){return t[n]=this[0],t[n+1]=this[1],t[n+2]=this[2],t[n+3]=this[3],t}}const nNe=1e-6;function rNe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function iNe(e,t,n,r,i,s,a,o,c,u,d,f,h,p,m,g,v){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=a,e[6]=o,e[7]=c,e[8]=u,e[9]=d,e[10]=f,e[11]=h,e[12]=p,e[13]=m,e[14]=g,e[15]=v,e}function sNe(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function aNe(e,t){let n=t[0],r=t[1],i=t[2],s=t[3],a=t[4],o=t[5],c=t[6],u=t[7],d=t[8],f=t[9],h=t[10],p=t[11],m=t[12],g=t[13],v=t[14],y=t[15],x=n*o-r*a,b=n*c-i*a,S=n*u-s*a,E=r*c-i*o,N=r*u-s*o,_=i*u-s*c,k=d*g-f*m,T=d*v-h*m,A=d*y-p*m,j=f*v-h*g,D=f*y-p*g,I=h*y-p*v,M=x*I-b*D+S*j+E*A-N*T+_*k;return M?(M=1/M,e[0]=(o*I-c*D+u*j)*M,e[1]=(i*D-r*I-s*j)*M,e[2]=(g*_-v*N+y*E)*M,e[3]=(h*N-f*_-p*E)*M,e[4]=(c*A-a*I-u*T)*M,e[5]=(n*I-i*A+s*T)*M,e[6]=(v*S-m*_-y*b)*M,e[7]=(d*_-h*S+p*b)*M,e[8]=(a*D-o*A+u*k)*M,e[9]=(r*A-n*D-s*k)*M,e[10]=(m*N-g*S+y*x)*M,e[11]=(f*S-d*N-p*x)*M,e[12]=(o*T-a*j-c*k)*M,e[13]=(n*j-r*T+i*k)*M,e[14]=(g*b-m*E-v*x)*M,e[15]=(d*E-f*b+h*x)*M,e):null}function SK(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],c=e[7],u=e[8],d=e[9],f=e[10],h=e[11],p=e[12],m=e[13],g=e[14],v=e[15],y=t*a-n*s,x=t*o-r*s,b=t*c-i*s,S=n*o-r*a,E=n*c-i*a,N=r*c-i*o,_=u*m-d*p,k=u*g-f*p,T=u*v-h*p,A=d*g-f*m,j=d*v-h*m,D=f*v-h*g;return y*D-x*j+b*A+S*T-E*k+N*_}function X6(e,t,n){let r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],c=t[5],u=t[6],d=t[7],f=t[8],h=t[9],p=t[10],m=t[11],g=t[12],v=t[13],y=t[14],x=t[15],b=n[0],S=n[1],E=n[2],N=n[3];return e[0]=b*r+S*o+E*f+N*g,e[1]=b*i+S*c+E*h+N*v,e[2]=b*s+S*u+E*p+N*y,e[3]=b*a+S*d+E*m+N*x,b=n[4],S=n[5],E=n[6],N=n[7],e[4]=b*r+S*o+E*f+N*g,e[5]=b*i+S*c+E*h+N*v,e[6]=b*s+S*u+E*p+N*y,e[7]=b*a+S*d+E*m+N*x,b=n[8],S=n[9],E=n[10],N=n[11],e[8]=b*r+S*o+E*f+N*g,e[9]=b*i+S*c+E*h+N*v,e[10]=b*s+S*u+E*p+N*y,e[11]=b*a+S*d+E*m+N*x,b=n[12],S=n[13],E=n[14],N=n[15],e[12]=b*r+S*o+E*f+N*g,e[13]=b*i+S*c+E*h+N*v,e[14]=b*s+S*u+E*p+N*y,e[15]=b*a+S*d+E*m+N*x,e}function oNe(e,t,n){let r=n[0],i=n[1],s=n[2],a,o,c,u,d,f,h,p,m,g,v,y;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*s+t[12],e[13]=t[1]*r+t[5]*i+t[9]*s+t[13],e[14]=t[2]*r+t[6]*i+t[10]*s+t[14],e[15]=t[3]*r+t[7]*i+t[11]*s+t[15]):(a=t[0],o=t[1],c=t[2],u=t[3],d=t[4],f=t[5],h=t[6],p=t[7],m=t[8],g=t[9],v=t[10],y=t[11],e[0]=a,e[1]=o,e[2]=c,e[3]=u,e[4]=d,e[5]=f,e[6]=h,e[7]=p,e[8]=m,e[9]=g,e[10]=v,e[11]=y,e[12]=a*r+d*i+m*s+t[12],e[13]=o*r+f*i+g*s+t[13],e[14]=c*r+h*i+v*s+t[14],e[15]=u*r+p*i+y*s+t[15]),e}function lNe(e,t,n){let r=n[0],i=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function cNe(e,t,n,r){let i=r[0],s=r[1],a=r[2],o=Math.hypot(i,s,a),c,u,d,f,h,p,m,g,v,y,x,b,S,E,N,_,k,T,A,j,D,I,M,L;return Math.abs(o)<nNe?null:(o=1/o,i*=o,s*=o,a*=o,c=Math.sin(n),u=Math.cos(n),d=1-u,f=t[0],h=t[1],p=t[2],m=t[3],g=t[4],v=t[5],y=t[6],x=t[7],b=t[8],S=t[9],E=t[10],N=t[11],_=i*i*d+u,k=s*i*d+a*c,T=a*i*d-s*c,A=i*s*d-a*c,j=s*s*d+u,D=a*s*d+i*c,I=i*a*d+s*c,M=s*a*d-i*c,L=a*a*d+u,e[0]=f*_+g*k+b*T,e[1]=h*_+v*k+S*T,e[2]=p*_+y*k+E*T,e[3]=m*_+x*k+N*T,e[4]=f*A+g*j+b*D,e[5]=h*A+v*j+S*D,e[6]=p*A+y*j+E*D,e[7]=m*A+x*j+N*D,e[8]=f*I+g*M+b*L,e[9]=h*I+v*M+S*L,e[10]=p*I+y*M+E*L,e[11]=m*I+x*M+N*L,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function uNe(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function NK(e,t){let n=t[0],r=t[1],i=t[2],s=t[4],a=t[5],o=t[6],c=t[8],u=t[9],d=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(s,a,o),e[2]=Math.hypot(c,u,d),e}function dNe(e){let t=e[0],n=e[1],r=e[2],i=e[4],s=e[5],a=e[6],o=e[8],c=e[9],u=e[10];const d=t*t+n*n+r*r,f=i*i+s*s+a*a,h=o*o+c*c+u*u;return Math.sqrt(Math.max(d,f,h))}const _K=function(){const e=[1,1,1];return function(t,n){let r=e;NK(r,n);let i=1/r[0],s=1/r[1],a=1/r[2],o=n[0]*i,c=n[1]*s,u=n[2]*a,d=n[4]*i,f=n[5]*s,h=n[6]*a,p=n[8]*i,m=n[9]*s,g=n[10]*a,v=o+f+g,y=0;return v>0?(y=Math.sqrt(v+1)*2,t[3]=.25*y,t[0]=(h-m)/y,t[1]=(p-u)/y,t[2]=(c-d)/y):o>f&&o>g?(y=Math.sqrt(1+o-f-g)*2,t[3]=(h-m)/y,t[0]=.25*y,t[1]=(c+d)/y,t[2]=(p+u)/y):f>g?(y=Math.sqrt(1+f-o-g)*2,t[3]=(p-u)/y,t[0]=(c+d)/y,t[1]=.25*y,t[2]=(h+m)/y):(y=Math.sqrt(1+g-o-f)*2,t[3]=(c-d)/y,t[0]=(p+u)/y,t[1]=(h+m)/y,t[2]=.25*y),t}}();function fNe(e,t,n,r){let i=Hm([e[0],e[1],e[2]]);const s=Hm([e[4],e[5],e[6]]),a=Hm([e[8],e[9],e[10]]);SK(e)<0&&(i=-i),n[0]=e[12],n[1]=e[13],n[2]=e[14];const c=e.slice(),u=1/i,d=1/s,f=1/a;c[0]*=u,c[1]*=u,c[2]*=u,c[4]*=d,c[5]*=d,c[6]*=d,c[8]*=f,c[9]*=f,c[10]*=f,_K(t,c),r[0]=i,r[1]=s,r[2]=a}function hNe(e,t,n,r){const i=e,s=t[0],a=t[1],o=t[2],c=t[3],u=s+s,d=a+a,f=o+o,h=s*u,p=s*d,m=s*f,g=a*d,v=a*f,y=o*f,x=c*u,b=c*d,S=c*f,E=r[0],N=r[1],_=r[2];return i[0]=(1-(g+y))*E,i[1]=(p+S)*E,i[2]=(m-b)*E,i[3]=0,i[4]=(p-S)*N,i[5]=(1-(h+y))*N,i[6]=(v+x)*N,i[7]=0,i[8]=(m+b)*_,i[9]=(v-x)*_,i[10]=(1-(h+g))*_,i[11]=0,i[12]=n[0],i[13]=n[1],i[14]=n[2],i[15]=1,i}function pNe(e,t){let n=t[0],r=t[1],i=t[2],s=t[3],a=n+n,o=r+r,c=i+i,u=n*a,d=r*a,f=r*o,h=i*a,p=i*o,m=i*c,g=s*a,v=s*o,y=s*c;return e[0]=1-f-m,e[1]=d+y,e[2]=h-v,e[3]=0,e[4]=d-y,e[5]=1-u-m,e[6]=p+g,e[7]=0,e[8]=h+v,e[9]=p-g,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function mNe(e,t,n,r,i){let s=1/Math.tan(t/2),a=1/(r-i);return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*a,e[15]=0,e}function gNe(e,t,n,r,i,s,a){let o=1/(t-n),c=1/(r-i),u=1/(s-a);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*o,e[13]=(i+r)*c,e[14]=(a+s)*u,e[15]=1,e}function vNe(e,t,n,r){let i=t[0],s=t[1],a=t[2],o=r[0],c=r[1],u=r[2],d=i-n[0],f=s-n[1],h=a-n[2],p=d*d+f*f+h*h;p===0?h=1:(p=1/Math.sqrt(p),d*=p,f*=p,h*=p);let m=c*h-u*f,g=u*d-o*h,v=o*f-c*d;return p=m*m+g*g+v*v,p===0&&(u?o+=1e-6:c?u+=1e-6:c+=1e-6,m=c*h-u*f,g=u*d-o*h,v=o*f-c*d,p=m*m+g*g+v*v),p=1/Math.sqrt(p),m*=p,g*=p,v*=p,e[0]=m,e[1]=g,e[2]=v,e[3]=0,e[4]=f*v-h*g,e[5]=h*m-d*v,e[6]=d*g-f*m,e[7]=0,e[8]=d,e[9]=f,e[10]=h,e[11]=0,e[12]=i,e[13]=s,e[14]=a,e[15]=1,e}function Q6(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function J6(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function yNe(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}class Ib extends Array{constructor(t=1,n=0,r=0,i=0,s=0,a=1,o=0,c=0,u=0,d=0,f=1,h=0,p=0,m=0,g=0,v=1){return super(t,n,r,i,s,a,o,c,u,d,f,h,p,m,g,v),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(t){this[12]=t}set y(t){this[13]=t}set z(t){this[14]=t}set w(t){this[15]=t}set(t,n,r,i,s,a,o,c,u,d,f,h,p,m,g,v){return t.length?this.copy(t):(iNe(this,t,n,r,i,s,a,o,c,u,d,f,h,p,m,g,v),this)}translate(t,n=this){return oNe(this,n,t),this}rotate(t,n,r=this){return cNe(this,r,t,n),this}scale(t,n=this){return lNe(this,n,typeof t=="number"?[t,t,t]:t),this}add(t,n){return n?Q6(this,t,n):Q6(this,this,t),this}sub(t,n){return n?J6(this,t,n):J6(this,this,t),this}multiply(t,n){return t.length?n?X6(this,t,n):X6(this,this,t):yNe(this,this,t),this}identity(){return sNe(this),this}copy(t){return rNe(this,t),this}fromPerspective({fov:t,aspect:n,near:r,far:i}={}){return mNe(this,t,n,r,i),this}fromOrthogonal({left:t,right:n,bottom:r,top:i,near:s,far:a}){return gNe(this,t,n,r,i,s,a),this}fromQuaternion(t){return pNe(this,t),this}setPosition(t){return this.x=t[0],this.y=t[1],this.z=t[2],this}inverse(t=this){return aNe(this,t),this}compose(t,n,r){return hNe(this,t,n,r),this}decompose(t,n,r){return fNe(this,t,n,r),this}getRotation(t){return _K(t,this),this}getTranslation(t){return uNe(t,this),this}getScaling(t){return NK(t,this),this}getMaxScaleOnAxis(){return dNe(this)}lookAt(t,n,r){return vNe(this,t,n,r),this}determinant(){return SK(this)}fromArray(t,n=0){return this[0]=t[n],this[1]=t[n+1],this[2]=t[n+2],this[3]=t[n+3],this[4]=t[n+4],this[5]=t[n+5],this[6]=t[n+6],this[7]=t[n+7],this[8]=t[n+8],this[9]=t[n+9],this[10]=t[n+10],this[11]=t[n+11],this[12]=t[n+12],this[13]=t[n+13],this[14]=t[n+14],this[15]=t[n+15],this}toArray(t=[],n=0){return t[n]=this[0],t[n+1]=this[1],t[n+2]=this[2],t[n+3]=this[3],t[n+4]=this[4],t[n+5]=this[5],t[n+6]=this[6],t[n+7]=this[7],t[n+8]=this[8],t[n+9]=this[9],t[n+10]=this[10],t[n+11]=this[11],t[n+12]=this[12],t[n+13]=this[13],t[n+14]=this[14],t[n+15]=this[15],t}}function xNe(e,t,n="YXZ"){return n==="XYZ"?(e[1]=Math.asin(Math.min(Math.max(t[8],-1),1)),Math.abs(t[8])<.99999?(e[0]=Math.atan2(-t[9],t[10]),e[2]=Math.atan2(-t[4],t[0])):(e[0]=Math.atan2(t[6],t[5]),e[2]=0)):n==="YXZ"?(e[0]=Math.asin(-Math.min(Math.max(t[9],-1),1)),Math.abs(t[9])<.99999?(e[1]=Math.atan2(t[8],t[10]),e[2]=Math.atan2(t[1],t[5])):(e[1]=Math.atan2(-t[2],t[0]),e[2]=0)):n==="ZXY"?(e[0]=Math.asin(Math.min(Math.max(t[6],-1),1)),Math.abs(t[6])<.99999?(e[1]=Math.atan2(-t[2],t[10]),e[2]=Math.atan2(-t[4],t[5])):(e[1]=0,e[2]=Math.atan2(t[1],t[0]))):n==="ZYX"?(e[1]=Math.asin(-Math.min(Math.max(t[2],-1),1)),Math.abs(t[2])<.99999?(e[0]=Math.atan2(t[6],t[10]),e[2]=Math.atan2(t[1],t[0])):(e[0]=0,e[2]=Math.atan2(-t[4],t[5]))):n==="YZX"?(e[2]=Math.asin(Math.min(Math.max(t[1],-1),1)),Math.abs(t[1])<.99999?(e[0]=Math.atan2(-t[9],t[5]),e[1]=Math.atan2(-t[2],t[0])):(e[0]=0,e[1]=Math.atan2(t[8],t[10]))):n==="XZY"&&(e[2]=Math.asin(-Math.min(Math.max(t[4],-1),1)),Math.abs(t[4])<.99999?(e[0]=Math.atan2(t[6],t[5]),e[1]=Math.atan2(t[8],t[0])):(e[0]=Math.atan2(-t[9],t[10]),e[1]=0)),e}const Z6=new Ib;class bNe extends Array{constructor(t=0,n=t,r=t,i="YXZ"){super(t,n,r),this.order=i,this.onChange=()=>{},this._target=this;const s=["0","1","2"];return new Proxy(this,{set(a,o){const c=Reflect.set(...arguments);return c&&s.includes(o)&&a.onChange(),c}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this._target[0]=t,this.onChange()}set y(t){this._target[1]=t,this.onChange()}set z(t){this._target[2]=t,this.onChange()}set(t,n=t,r=t){return t.length?this.copy(t):(this._target[0]=t,this._target[1]=n,this._target[2]=r,this.onChange(),this)}copy(t){return this._target[0]=t[0],this._target[1]=t[1],this._target[2]=t[2],this.onChange(),this}reorder(t){return this._target.order=t,this.onChange(),this}fromRotationMatrix(t,n=this.order){return xNe(this._target,t,n),this.onChange(),this}fromQuaternion(t,n=this.order,r){return Z6.fromQuaternion(t),this._target.fromRotationMatrix(Z6,n),r||this.onChange(),this}fromArray(t,n=0){return this._target[0]=t[n],this._target[1]=t[n+1],this._target[2]=t[n+2],this}toArray(t=[],n=0){return t[n]=this[0],t[n+1]=this[1],t[n+2]=this[2],t}}let wNe=class{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new Ib,this.worldMatrix=new Ib,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new wa,this.quaternion=new tNe,this.scale=new wa(1),this.rotation=new bNe,this.up=new wa(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(t,n=!0){this.parent&&t!==this.parent&&this.parent.removeChild(this,!1),this.parent=t,n&&t&&t.addChild(this,!1)}addChild(t,n=!0){~this.children.indexOf(t)||this.children.push(t),n&&t.setParent(this,!1)}removeChild(t,n=!0){~this.children.indexOf(t)&&this.children.splice(this.children.indexOf(t),1),n&&t.setParent(null,!1)}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||t)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,t=!0);for(let n=0,r=this.children.length;n<r;n++)this.children[n].updateMatrixWorld(t)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(t){if(!t(this))for(let n=0,r=this.children.length;n<r;n++)this.children[n].traverse(t)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(t,n=!1){n?this.matrix.lookAt(this.position,t,this.up):this.matrix.lookAt(t,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}};function ENe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function SNe(e,t){let n=t[0],r=t[1],i=t[2],s=t[3],a=n+n,o=r+r,c=i+i,u=n*a,d=r*a,f=r*o,h=i*a,p=i*o,m=i*c,g=s*a,v=s*o,y=s*c;return e[0]=1-f-m,e[3]=d-y,e[6]=h+v,e[1]=d+y,e[4]=1-u-m,e[7]=p-g,e[2]=h-v,e[5]=p+g,e[8]=1-u-f,e}function NNe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function _Ne(e,t,n,r,i,s,a,o,c,u){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=a,e[6]=o,e[7]=c,e[8]=u,e}function kNe(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function CNe(e,t){let n=t[0],r=t[1],i=t[2],s=t[3],a=t[4],o=t[5],c=t[6],u=t[7],d=t[8],f=d*a-o*u,h=-d*s+o*c,p=u*s-a*c,m=n*f+r*h+i*p;return m?(m=1/m,e[0]=f*m,e[1]=(-d*r+i*u)*m,e[2]=(o*r-i*a)*m,e[3]=h*m,e[4]=(d*n-i*c)*m,e[5]=(-o*n+i*s)*m,e[6]=p*m,e[7]=(-u*n+r*c)*m,e[8]=(a*n-r*s)*m,e):null}function e5(e,t,n){let r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],c=t[5],u=t[6],d=t[7],f=t[8],h=n[0],p=n[1],m=n[2],g=n[3],v=n[4],y=n[5],x=n[6],b=n[7],S=n[8];return e[0]=h*r+p*a+m*u,e[1]=h*i+p*o+m*d,e[2]=h*s+p*c+m*f,e[3]=g*r+v*a+y*u,e[4]=g*i+v*o+y*d,e[5]=g*s+v*c+y*f,e[6]=x*r+b*a+S*u,e[7]=x*i+b*o+S*d,e[8]=x*s+b*c+S*f,e}function TNe(e,t,n){let r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],c=t[5],u=t[6],d=t[7],f=t[8],h=n[0],p=n[1];return e[0]=r,e[1]=i,e[2]=s,e[3]=a,e[4]=o,e[5]=c,e[6]=h*r+p*a+u,e[7]=h*i+p*o+d,e[8]=h*s+p*c+f,e}function ANe(e,t,n){let r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],c=t[5],u=t[6],d=t[7],f=t[8],h=Math.sin(n),p=Math.cos(n);return e[0]=p*r+h*a,e[1]=p*i+h*o,e[2]=p*s+h*c,e[3]=p*a-h*r,e[4]=p*o-h*i,e[5]=p*c-h*s,e[6]=u,e[7]=d,e[8]=f,e}function jNe(e,t,n){let r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function ONe(e,t){let n=t[0],r=t[1],i=t[2],s=t[3],a=t[4],o=t[5],c=t[6],u=t[7],d=t[8],f=t[9],h=t[10],p=t[11],m=t[12],g=t[13],v=t[14],y=t[15],x=n*o-r*a,b=n*c-i*a,S=n*u-s*a,E=r*c-i*o,N=r*u-s*o,_=i*u-s*c,k=d*g-f*m,T=d*v-h*m,A=d*y-p*m,j=f*v-h*g,D=f*y-p*g,I=h*y-p*v,M=x*I-b*D+S*j+E*A-N*T+_*k;return M?(M=1/M,e[0]=(o*I-c*D+u*j)*M,e[1]=(c*A-a*I-u*T)*M,e[2]=(a*D-o*A+u*k)*M,e[3]=(i*D-r*I-s*j)*M,e[4]=(n*I-i*A+s*T)*M,e[5]=(r*A-n*D-s*k)*M,e[6]=(g*_-v*N+y*E)*M,e[7]=(v*S-m*_-y*b)*M,e[8]=(m*N-g*S+y*x)*M,e):null}class PNe extends Array{constructor(t=1,n=0,r=0,i=0,s=1,a=0,o=0,c=0,u=1){return super(t,n,r,i,s,a,o,c,u),this}set(t,n,r,i,s,a,o,c,u){return t.length?this.copy(t):(_Ne(this,t,n,r,i,s,a,o,c,u),this)}translate(t,n=this){return TNe(this,n,t),this}rotate(t,n=this){return ANe(this,n,t),this}scale(t,n=this){return jNe(this,n,t),this}multiply(t,n){return n?e5(this,t,n):e5(this,this,t),this}identity(){return kNe(this),this}copy(t){return NNe(this,t),this}fromMatrix4(t){return ENe(this,t),this}fromQuaternion(t){return SNe(this,t),this}fromBasis(t,n,r){return this.set(t[0],t[1],t[2],n[0],n[1],n[2],r[0],r[1],r[2]),this}inverse(t=this){return CNe(this,t),this}getNormalMatrix(t){return ONe(this,t),this}}let INe=0;class DNe extends wNe{constructor(t,{geometry:n,program:r,mode:i=t.TRIANGLES,frustumCulled:s=!0,renderOrder:a=0}={}){super(),t.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=t,this.id=INe++,this.geometry=n,this.program=r,this.mode=i,this.frustumCulled=s,this.renderOrder=a,this.modelViewMatrix=new Ib,this.normalMatrix=new PNe,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(t){return this.beforeRenderCallbacks.push(t),this}onAfterRender(t){return this.afterRenderCallbacks.push(t),this}draw({camera:t}={}){t&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=t.projectionMatrix,this.program.uniforms.cameraPosition.value=t.worldPosition,this.program.uniforms.viewMatrix.value=t.viewMatrix,this.modelViewMatrix.multiply(t.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(r=>r&&r({mesh:this,camera:t}));let n=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:n}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(r=>r&&r({mesh:this,camera:t}))}}function MNe(e,t){return e[0]=t[0],e[1]=t[1],e}function RNe(e,t,n){return e[0]=t,e[1]=n,e}function t5(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function n5(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function LNe(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function FNe(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function j_(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function BNe(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}function $Ne(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function r5(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}function UNe(e){var t=e[0],n=e[1];return t*t+n*n}function zNe(e,t){return e[0]=-t[0],e[1]=-t[1],e}function HNe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function VNe(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e}function WNe(e,t){return e[0]*t[0]+e[1]*t[1]}function i5(e,t){return e[0]*t[1]-e[1]*t[0]}function qNe(e,t,n,r){var i=t[0],s=t[1];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e}function KNe(e,t,n,r,i){const s=Math.exp(-r*i);let a=t[0],o=t[1];return e[0]=n[0]+(a-n[0])*s,e[1]=n[1]+(o-n[1])*s,e}function GNe(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e}function YNe(e,t,n){let r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}function XNe(e,t){return e[0]===t[0]&&e[1]===t[1]}class DP extends Array{constructor(t=0,n=t){return super(t,n),this}get x(){return this[0]}get y(){return this[1]}set x(t){this[0]=t}set y(t){this[1]=t}set(t,n=t){return t.length?this.copy(t):(RNe(this,t,n),this)}copy(t){return MNe(this,t),this}add(t,n){return n?t5(this,t,n):t5(this,this,t),this}sub(t,n){return n?n5(this,t,n):n5(this,this,t),this}multiply(t){return t.length?LNe(this,this,t):j_(this,this,t),this}divide(t){return t.length?FNe(this,this,t):j_(this,this,1/t),this}inverse(t=this){return HNe(this,t),this}len(){return r5(this)}distance(t){return t?BNe(this,t):r5(this)}squaredLen(){return this.squaredDistance()}squaredDistance(t){return t?$Ne(this,t):UNe(this)}negate(t=this){return zNe(this,t),this}cross(t,n){return n?i5(t,n):i5(this,t)}scale(t){return j_(this,this,t),this}normalize(){return VNe(this,this),this}dot(t){return WNe(this,t)}equals(t){return XNe(this,t)}applyMatrix3(t){return GNe(this,this,t),this}applyMatrix4(t){return YNe(this,this,t),this}lerp(t,n){return qNe(this,this,t,n),this}smoothLerp(t,n,r){return KNe(this,this,t,n,r),this}clone(){return new DP(this[0],this[1])}fromArray(t,n=0){return this[0]=t[n],this[1]=t[n+1],this}toArray(t=[],n=0){return t[n]=this[0],t[n+1]=this[1],t}}class QNe extends ASe{constructor(t,{attributes:n={}}={}){Object.assign(n,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(t,n)}}const JNe=`
attribute vec2 position;
void main(){gl_Position=vec4(position,0.0,1.0);}
`,ZNe=`
#ifdef GL_ES
precision lowp float;
#endif
uniform vec2 uResolution;
uniform float uTime;
uniform float uHueShift;
uniform float uNoise;
uniform float uScan;
uniform float uScanFreq;
uniform float uWarp;
#define iTime uTime
#define iResolution uResolution

vec4 buf[8];
float rand(vec2 c){return fract(sin(dot(c,vec2(12.9898,78.233)))*43758.5453);}

mat3 rgb2yiq=mat3(0.299,0.587,0.114,0.596,-0.274,-0.322,0.211,-0.523,0.312);
mat3 yiq2rgb=mat3(1.0,0.956,0.621,1.0,-0.272,-0.647,1.0,-1.106,1.703);

vec3 hueShiftRGB(vec3 col,float deg){
    vec3 yiq=rgb2yiq*col;
    float rad=radians(deg);
    float cosh=cos(rad),sinh=sin(rad);
    vec3 yiqShift=vec3(yiq.x,yiq.y*cosh-yiq.z*sinh,yiq.y*sinh+yiq.z*cosh);
    return clamp(yiq2rgb*yiqShift,0.0,1.0);
}

vec4 sigmoid(vec4 x){return 1./(1.+exp(-x));}

vec4 cppn_fn(vec2 coordinate,float in0,float in1,float in2){
    buf[6]=vec4(coordinate.x,coordinate.y,0.3948333106474662+in0,0.36+in1);
    buf[7]=vec4(0.14+in2,sqrt(coordinate.x*coordinate.x+coordinate.y*coordinate.y),0.,0.);
    buf[0]=mat4(vec4(6.5404263,-3.6126034,0.7590882,-1.13613),vec4(2.4582713,3.1660357,1.2219609,0.06276096),vec4(-5.478085,-6.159632,1.8701609,-4.7742867),vec4(6.039214,-5.542865,-0.90925294,3.251348))*buf[6]+mat4(vec4(0.8473259,-5.722911,3.975766,1.6522468),vec4(-0.24321538,0.5839259,-1.7661959,-5.350116),vec4(0.,0.,0.,0.),vec4(0.,0.,0.,0.))*buf[7]+vec4(0.21808943,1.1243913,-1.7969975,5.0294676);
    buf[1]=mat4(vec4(-3.3522482,-6.0612736,0.55641043,-4.4719114),vec4(0.8631464,1.7432913,5.643898,1.6106541),vec4(2.4941394,-3.5012043,1.7184316,6.357333),vec4(3.310376,8.209261,1.1355612,-1.165539))*buf[6]+mat4(vec4(5.24046,-13.034365,0.009859298,15.870829),vec4(2.987511,3.129433,-0.89023495,-1.6822904),vec4(0.,0.,0.,0.),vec4(0.,0.,0.,0.))*buf[7]+vec4(-5.9457836,-6.573602,-0.8812491,1.5436668);
    buf[0]=sigmoid(buf[0]);buf[1]=sigmoid(buf[1]);
    buf[2]=mat4(vec4(-15.219568,8.095543,-2.429353,-1.9381982),vec4(-5.951362,4.3115187,2.6393783,1.274315),vec4(-7.3145227,6.7297835,5.2473326,5.9411426),vec4(5.0796127,8.979051,-1.7278991,-1.158976))*buf[6]+mat4(vec4(-11.967154,-11.608155,6.1486754,11.237008),vec4(2.124141,-6.263192,-1.7050359,-0.7021966),vec4(0.,0.,0.,0.),vec4(0.,0.,0.,0.))*buf[7]+vec4(-4.17164,-3.2281182,-4.576417,-3.6401186);
    buf[3]=mat4(vec4(3.1832156,-13.738922,1.879223,3.233465),vec4(0.64300746,12.768129,1.9141049,0.50990224),vec4(-0.049295485,4.4807224,1.4733979,1.801449),vec4(5.0039253,13.000481,3.3991797,-4.5561905))*buf[6]+mat4(vec4(-0.1285731,7.720628,-3.1425676,4.742367),vec4(0.6393625,3.714393,-0.8108378,-0.39174938),vec4(0.,0.,0.,0.),vec4(0.,0.,0.,0.))*buf[7]+vec4(-1.1811101,-21.621881,0.7851888,1.2329718);
    buf[2]=sigmoid(buf[2]);buf[3]=sigmoid(buf[3]);
    buf[4]=mat4(vec4(5.214916,-7.183024,2.7228765,2.6592617),vec4(-5.601878,-25.3591,4.067988,0.4602802),vec4(-10.57759,24.286327,21.102104,37.546658),vec4(4.3024497,-1.9625226,2.3458803,-1.372816))*buf[0]+mat4(vec4(-17.6526,-10.507558,2.2587414,12.462782),vec4(6.265566,-502.75443,-12.642513,0.9112289),vec4(-10.983244,20.741234,-9.701768,-0.7635988),vec4(5.383626,1.4819539,-4.1911616,-4.8444734))*buf[1]+mat4(vec4(12.785233,-16.345072,-0.39901125,1.7955981),vec4(-30.48365,-1.8345358,1.4542528,-1.1118771),vec4(19.872723,-7.337935,-42.941723,-98.52709),vec4(8.337645,-2.7312303,-2.2927687,-36.142323))*buf[2]+mat4(vec4(-16.298317,3.5471997,-0.44300047,-9.444417),vec4(57.5077,-35.609753,16.163465,-4.1534753),vec4(-0.07470326,-3.8656476,-7.0901804,3.1523974),vec4(-12.559385,-7.077619,1.490437,-0.8211543))*buf[3]+vec4(-7.67914,15.927437,1.3207729,-1.6686112);
    buf[5]=mat4(vec4(-1.4109162,-0.372762,-3.770383,-21.367174),vec4(-6.2103205,-9.35908,0.92529047,8.82561),vec4(11.460242,-22.348068,13.625772,-18.693201),vec4(-0.3429052,-3.9905605,-2.4626114,-0.45033523))*buf[0]+mat4(vec4(7.3481627,-4.3661838,-6.3037653,-3.868115),vec4(1.5462853,6.5488915,1.9701879,-0.58291394),vec4(6.5858274,-2.2180402,3.7127688,-1.3730392),vec4(-5.7973905,10.134961,-2.3395722,-5.965605))*buf[1]+mat4(vec4(-2.5132585,-6.6685553,-1.4029363,-0.16285264),vec4(-0.37908727,0.53738135,4.389061,-1.3024765),vec4(-0.70647055,2.0111287,-5.1659346,-3.728635),vec4(-13.562562,10.487719,-0.9173751,-2.6487076))*buf[2]+mat4(vec4(-8.645013,6.5546675,-6.3944063,-5.5933375),vec4(-0.57783127,-1.077275,36.91025,5.736769),vec4(14.283112,3.7146652,7.1452246,-4.5958776),vec4(2.7192075,3.6021907,-4.366337,-2.3653464))*buf[3]+vec4(-5.9000807,-4.329569,1.2427121,8.59503);
    buf[4]=sigmoid(buf[4]);buf[5]=sigmoid(buf[5]);
    buf[6]=mat4(vec4(-1.61102,0.7970257,1.4675229,0.20917463),vec4(-28.793737,-7.1390953,1.5025433,4.656581),vec4(-10.94861,39.66238,0.74318546,-10.095605),vec4(-0.7229728,-1.5483948,0.7301322,2.1687684))*buf[0]+mat4(vec4(3.2547753,21.489103,-1.0194173,-3.3100595),vec4(-3.7316632,-3.3792162,-7.223193,-0.23685838),vec4(13.1804495,0.7916005,5.338587,5.687114),vec4(-4.167605,-17.798311,-6.815736,-1.6451967))*buf[1]+mat4(vec4(0.604885,-7.800309,-7.213122,-2.741014),vec4(-3.522382,-0.12359311,-0.5258442,0.43852118),vec4(9.6752825,-22.853785,2.062431,0.099892326),vec4(-4.3196306,-17.730087,2.5184598,5.30267))*buf[2]+mat4(vec4(-6.545563,-15.790176,-6.0438633,-5.415399),vec4(-43.591583,28.551912,-16.00161,18.84728),vec4(4.212382,8.394307,3.0958717,8.657522),vec4(-5.0237565,-4.450633,-4.4768,-5.5010443))*buf[3]+mat4(vec4(1.6985557,-67.05806,6.897715,1.9004834),vec4(1.8680354,2.3915145,2.5231109,4.081538),vec4(11.158006,1.7294737,2.0738268,7.386411),vec4(-4.256034,-306.24686,8.258898,-17.132736))*buf[4]+mat4(vec4(1.6889864,-4.5852966,3.8534803,-6.3482175),vec4(1.3543309,-1.2640043,9.932754,2.9079645),vec4(-5.2770967,0.07150358,-0.13962056,3.3269649),vec4(28.34703,-4.918278,6.1044083,4.085355))*buf[5]+vec4(6.6818056,12.522166,-3.7075126,-4.104386);
    buf[7]=mat4(vec4(-8.265602,-4.7027016,5.098234,0.7509808),vec4(8.6507845,-17.15949,16.51939,-8.884479),vec4(-4.036479,-2.3946867,-2.6055532,-1.9866527),vec4(-2.2167742,-1.8135649,-5.9759874,4.8846445))*buf[0]+mat4(vec4(6.7790847,3.5076547,-2.8191125,-2.7028968),vec4(-5.743024,-0.27844876,1.4958696,-5.0517144),vec4(13.122226,15.735168,-2.9397483,-4.101023),vec4(-14.375265,-5.030483,-6.2599335,2.9848232))*buf[1]+mat4(vec4(4.0950394,-0.94011575,-5.674733,4.755022),vec4(4.3809423,4.8310084,1.7425908,-3.437416),vec4(2.117492,0.16342592,-104.56341,16.949184),vec4(-5.22543,-2.994248,3.8350096,-1.9364246))*buf[2]+mat4(vec4(-5.900337,1.7946124,-13.604192,-3.8060522),vec4(6.6583457,31.911177,25.164474,91.81147),vec4(11.840538,4.1503043,-0.7314397,6.768467),vec4(-6.3967767,4.034772,6.1714606,-0.32874924))*buf[3]+mat4(vec4(3.4992442,-196.91893,-8.923708,2.8142626),vec4(3.4806502,-3.1846354,5.1725626,5.1804223),vec4(-2.4009497,15.585794,1.2863957,2.0252278),vec4(-71.25271,-62.441242,-8.138444,0.50670296))*buf[4]+mat4(vec4(-12.291733,-11.176166,-7.3474145,4.390294),vec4(10.805477,5.6337385,-0.9385842,-4.7348723),vec4(-12.869276,-7.039391,5.3029537,7.5436664),vec4(1.4593618,8.91898,3.5101583,5.840625))*buf[5]+vec4(2.2415268,-6.705987,-0.98861027,-2.117676);
    buf[6]=sigmoid(buf[6]);buf[7]=sigmoid(buf[7]);
    buf[0]=mat4(vec4(1.6794263,1.3817469,2.9625452,0.),vec4(-1.8834411,-1.4806935,-3.5924516,0.),vec4(-1.3279216,-1.0918057,-2.3124623,0.),vec4(0.2662234,0.23235129,0.44178495,0.))*buf[0]+mat4(vec4(-0.6299101,-0.5945583,-0.9125601,0.),vec4(0.17828953,0.18300213,0.18182953,0.),vec4(-2.96544,-2.5819945,-4.9001055,0.),vec4(1.4195864,1.1868085,2.5176322,0.))*buf[1]+mat4(vec4(-1.2584374,-1.0552157,-2.1688404,0.),vec4(-0.7200217,-0.52666044,-1.438251,0.),vec4(0.15345335,0.15196142,0.272854,0.),vec4(0.945728,0.8861938,1.2766753,0.))*buf[2]+mat4(vec4(-2.4218085,-1.968602,-4.35166,0.),vec4(-22.683098,-18.0544,-41.954372,0.),vec4(0.63792,0.5470648,1.1078634,0.),vec4(-1.5489894,-1.3075932,-2.6444845,0.))*buf[3]+mat4(vec4(-0.49252132,-0.39877754,-0.91366625,0.),vec4(0.95609266,0.7923952,1.640221,0.),vec4(0.30616966,0.15693925,0.8639857,0.),vec4(1.1825981,0.94504964,2.176963,0.))*buf[4]+mat4(vec4(0.35446745,0.3293795,0.59547555,0.),vec4(-0.58784515,-0.48177817,-1.0614829,0.),vec4(2.5271258,1.9991658,4.6846647,0.),vec4(0.13042648,0.08864098,0.30187556,0.))*buf[5]+mat4(vec4(-1.7718065,-1.4033192,-3.3355875,0.),vec4(3.1664357,2.638297,5.378702,0.),vec4(-3.1724713,-2.6107926,-5.549295,0.),vec4(-2.851368,-2.249092,-5.3013067,0.))*buf[6]+mat4(vec4(1.5203838,1.2212278,2.8404984,0.),vec4(1.5210563,1.2651345,2.683903,0.),vec4(2.9789467,2.4364579,5.2347264,0.),vec4(2.2270417,1.8825914,3.8028636,0.))*buf[7]+vec4(-1.5468478,-3.6171484,0.24762098,0.);
    buf[0]=sigmoid(buf[0]);
    return vec4(buf[0].x,buf[0].y,buf[0].z,1.);
}

void mainImage(out vec4 fragColor,in vec2 fragCoord){
    vec2 uv=fragCoord/uResolution.xy*2.-1.;
    uv.y*=-1.;
    uv+=uWarp*vec2(sin(uv.y*6.283+uTime*0.5),cos(uv.x*6.283+uTime*0.5))*0.05;
    fragColor=cppn_fn(uv,0.1*sin(0.3*uTime),0.1*sin(0.69*uTime),0.1*sin(0.44*uTime));
}

void main(){
    vec4 col;mainImage(col,gl_FragCoord.xy);
    col.rgb=hueShiftRGB(col.rgb,uHueShift);
    float scanline_val=sin(gl_FragCoord.y*uScanFreq)*0.5+0.5;
    col.rgb*=1.-(scanline_val*scanline_val)*uScan;
    col.rgb+=(rand(gl_FragCoord.xy+uTime)-0.5)*uNoise;
    gl_FragColor=vec4(clamp(col.rgb,0.0,1.0),1.0);
}
`,kK=w.forwardRef(({className:e,hueShift:t=0,noiseIntensity:n=0,scanlineIntensity:r=0,speed:i=.5,scanlineFrequency:s=0,warpAmount:a=0,resolutionScale:o=1,...c},u)=>{const d=c,f=w.useRef(null);return w.useEffect(()=>{const h=f.current;if(!h)return;const p=h.parentElement,m=new RSe({dpr:Math.min(window.devicePixelRatio,2),canvas:h}),g=m.gl,v=new QNe(g),y=new OSe(g,{vertex:JNe,fragment:ZNe,uniforms:{uTime:{value:0},uResolution:{value:new DP},uHueShift:{value:t},uNoise:{value:n},uScan:{value:r},uScanFreq:{value:s},uWarp:{value:a}}}),x=new DNe(g,{geometry:v,program:y}),b=()=>{const _=p.clientWidth,k=p.clientHeight;m.setSize(_*o,k*o),y.uniforms.uResolution.value.set(_,k)};window.addEventListener("resize",b),b();const S=performance.now();let E=0;const N=()=>{y.uniforms.uTime.value=(performance.now()-S)/1e3*i,y.uniforms.uHueShift.value=t,y.uniforms.uNoise.value=n,y.uniforms.uScan.value=r,y.uniforms.uScanFreq.value=s,y.uniforms.uWarp.value=a,m.render({scene:x}),E=requestAnimationFrame(N)};return N(),()=>{cancelAnimationFrame(E),window.removeEventListener("resize",b)}},[t,n,r,i,s,a,o]),l.jsx("div",{ref:u,className:Re("w-full h-full relative",e),...d,children:l.jsx("canvas",{ref:f,className:"w-full h-full block"})})});kK.displayName="DarkVeilBackground";function e_e({isDarkMode:e}){const[t,n]=w.useState(!1),[r,i]=w.useState(!1),{profile:s,updateCompanyMotto:a,updateCompanySubtext:o}=Ixe(),[c,u]=w.useState((s==null?void 0:s.company_motto)||"Building the future, one project at a time."),[d,f]=w.useState((s==null?void 0:s.company_subtext)||"Delivering excellence through innovation and dedication.");w.useEffect(()=>{s!=null&&s.company_motto&&u(s.company_motto),s!=null&&s.company_subtext&&f(s.company_subtext)},[s==null?void 0:s.company_motto,s==null?void 0:s.company_subtext]);const h=async()=>{await a(c)&&n(!1)},p=()=>{u((s==null?void 0:s.company_motto)||"Building the future, one project at a time."),n(!1)},m=async()=>{await o(d)&&i(!1)},g=()=>{f((s==null?void 0:s.company_subtext)||"Delivering excellence through innovation and dedication."),i(!1)};return l.jsxs(Z,{className:"relative overflow-hidden border-0 min-h-[300px] h-[20vh]",children:[e?l.jsx(kK,{className:"absolute inset-0"}):l.jsxs("div",{className:"absolute inset-0",children:[l.jsx(wK,{className:"absolute inset-0"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/80 via-purple-50/60 to-cyan-50/80"})]}),l.jsx(ee,{className:"relative p-8 h-full flex flex-col items-center justify-center text-center backdrop-blur-sm",children:l.jsxs("div",{className:"space-y-6 max-w-2xl mx-auto",children:[l.jsx("div",{className:"space-y-2",children:t?l.jsxs("div",{className:"space-y-3",children:[l.jsx(re,{value:c,onChange:v=>u(v.target.value),className:`text-3xl font-bold text-center bg-black/10 dark:bg-white/10 border-white/20 ${e?"text-white placeholder:text-white/60":"text-gray-900 placeholder:text-gray-600"}`,placeholder:"Enter your company motto"}),l.jsxs("div",{className:"flex justify-center gap-2",children:[l.jsxs(H,{size:"sm",onClick:h,className:"bg-green-500/20 hover:bg-green-500/30 text-green-600 dark:text-green-400 border-green-500/30",variant:"outline",children:[l.jsx(mb,{className:"h-4 w-4 mr-1"}),"Save"]}),l.jsxs(H,{size:"sm",variant:"outline",onClick:p,className:"bg-red-500/20 hover:bg-red-500/30 text-red-600 dark:text-red-400 border-red-500/30",children:[l.jsx(Qn,{className:"h-4 w-4 mr-1"}),"Cancel"]})]})]}):l.jsxs("div",{className:"group relative",children:[l.jsx("h2",{className:`text-4xl font-bold leading-tight ${e?"text-white":"text-gray-900"}`,children:(s==null?void 0:s.company_motto)||"Building the future, one project at a time."}),l.jsx(H,{size:"sm",variant:"ghost",onClick:()=>n(!0),className:"absolute -top-2 -right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-blue-500/20 hover:bg-blue-500/30 text-blue-600 dark:text-blue-400",children:l.jsx(T4,{className:"h-4 w-4"})})]})}),l.jsx("div",{className:"space-y-2",children:r?l.jsxs("div",{className:"space-y-3",children:[l.jsx(re,{value:d,onChange:v=>f(v.target.value),className:`text-xl text-center bg-black/10 dark:bg-white/10 border-white/20 ${e?"text-white/80 placeholder:text-white/50":"text-gray-700 placeholder:text-gray-500"}`,placeholder:"Enter your company subtext"}),l.jsxs("div",{className:"flex justify-center gap-2",children:[l.jsxs(H,{size:"sm",onClick:m,className:"bg-green-500/20 hover:bg-green-500/30 text-green-600 dark:text-green-400 border-green-500/30",variant:"outline",children:[l.jsx(mb,{className:"h-4 w-4 mr-1"}),"Save"]}),l.jsxs(H,{size:"sm",variant:"outline",onClick:g,className:"bg-red-500/20 hover:bg-red-500/30 text-red-600 dark:text-red-400 border-red-500/30",children:[l.jsx(Qn,{className:"h-4 w-4 mr-1"}),"Cancel"]})]})]}):l.jsxs("div",{className:"group relative",children:[l.jsx("p",{className:`text-2xl opacity-80 leading-relaxed ${e?"text-white/80":"text-gray-600"}`,children:(s==null?void 0:s.company_subtext)||"Delivering excellence through innovation and dedication."}),l.jsx(H,{size:"sm",variant:"ghost",onClick:()=>i(!0),className:"absolute -top-2 -right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-blue-500/20 hover:bg-blue-500/30 text-blue-600 dark:text-blue-400",children:l.jsx(T4,{className:"h-4 w-4"})})]})})]})})]})}function t_e({isDarkMode:e}){return l.jsx(e_e,{isDarkMode:e})}const ue=e=>typeof e!="number"||isNaN(e)?"0 kr":new Intl.NumberFormat("sv-SE",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e)+" kr";function n_e({widget:e,isDarkMode:t}){return l.jsxs(Z,{className:"h-full",children:[l.jsx(de,{className:"pb-2",children:l.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(wn,{className:"h-4 w-4"}),"Monthly Expenses"]})}),l.jsx(ee,{children:l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-2xl font-bold",children:ue(4850)}),l.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[l.jsx(cr,{className:"h-4 w-4 text-red-500"}),l.jsxs("span",{className:"text-red-500",children:[Math.abs(15.476190476190476).toFixed(1),"%"]}),l.jsx("span",{className:"text-muted-foreground",children:"vs last month"})]}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Last month: ",ue(4200)]})]})})]})}function li(){const{user:e}=jr(),[t,n]=w.useState([]),[r,i]=w.useState(!0),[s,a]=w.useState(null);w.useEffect(()=>{e?o():(n([]),i(!1))},[e]);const o=async()=>{try{i(!0);const{data:f,error:h}=await ie.from("time_entries").select(`
          *,
          project:projects(*)
        `).eq("user_id",e.id).order("date",{ascending:!1});if(h)throw h;n(f||[])}catch(f){a(f instanceof Error?f.message:"An error occurred")}finally{i(!1)}};return{entries:t,loading:r,error:s,createTimeEntry:async f=>{try{const{data:h,error:p}=await ie.from("time_entries").insert({...f,user_id:e.id}).select(`
          *,
          project:projects(*)
        `).single();if(p)throw p;return n(m=>[h,...m]),{data:h,error:null}}catch(h){const p=h instanceof Error?h.message:"Failed to create time entry";return a(p),{data:null,error:p}}},updateTimeEntry:async(f,h)=>{try{const{data:p,error:m}=await ie.from("time_entries").update(h).eq("id",f).eq("user_id",e.id).select(`
          *,
          project:projects(*)
        `).single();if(m)throw m;return n(g=>g.map(v=>v.id===f?p:v)),{data:p,error:null}}catch(p){const m=p instanceof Error?p.message:"Failed to update time entry";return a(m),{data:null,error:m}}},deleteTimeEntry:async f=>{try{const{error:h}=await ie.from("time_entries").delete().eq("id",f).eq("user_id",e.id);if(h)throw h;return n(p=>p.filter(m=>m.id!==f)),{error:null}}catch(h){const p=h instanceof Error?h.message:"Failed to delete time entry";return a(p),{error:p}}},refetch:o}}function r_e(){const{entries:e}=li(),{user:t}=jr(),[n,r]=w.useState({billing_percentage:94,absence_percentage:15});w.useEffect(()=>{(async()=>{if(t)try{const x=new Date,b=x.getFullYear(),S=x.getMonth()+1,{data:E,error:N}=await ie.from("monthly_settings").select("billing_percentage, absence_percentage").eq("user_id",t.id).eq("year",b).eq("month",S).single();if(E&&!N)r({billing_percentage:E.billing_percentage,absence_percentage:E.absence_percentage});else{const{data:_,error:k}=await ie.from("user_profiles").select("debit_rate_monthly, absence_percentage").eq("id",t.id).single();_&&!k&&r({billing_percentage:_.debit_rate_monthly||94,absence_percentage:_.absence_percentage||15})}}catch(x){console.error("Error loading user settings:",x)}})()},[t]);const i=new Date,s=i.getMonth(),a=i.getFullYear(),c=e.filter(y=>{const x=new Date(y.date+"T00:00:00");return x.getMonth()===s&&x.getFullYear()===a}).reduce((y,x)=>y+x.hours,0),u=new Date(a,s+1,0).getDate(),p=Array.from({length:u},(y,x)=>{const b=new Date(a,s,x+1);return b.getDay()!==0&&b.getDay()!==6}).filter(Boolean).length*8*(1-n.absence_percentage/100)*(n.billing_percentage/100),m=p>0?c/p*100:0,g=Math.max(0,p-c),v=["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"];return l.jsxs(Z,{className:"h-full",children:[l.jsx(de,{className:"pb-2",children:l.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(gt,{className:"h-4 w-4"}),"Loggad tid - ",v[s]]})}),l.jsx(ee,{children:l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"text-2xl font-bold",children:[c.toFixed(1),"h"]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-muted-foreground",children:"Framsteg mot ml"}),l.jsxs("span",{className:"text-muted-foreground",children:[m.toFixed(0),"%"]})]}),l.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:l.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(m,100)}%`}})})]}),l.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[l.jsx(Wi,{className:"h-4 w-4 text-muted-foreground"}),l.jsx("span",{className:"text-muted-foreground",children:g>0?`${g.toFixed(0)}h kvar till ml`:"Mlet ntt!"})]}),l.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Lt,{className:"h-3 w-3"}),l.jsxs("span",{children:["Ml: ",p.toFixed(0),"h debiterbara timmar"]})]}),l.jsxs("div",{children:["Debiteringsgrad: ",n.billing_percentage,"% | Frnvaro: ",n.absence_percentage,"%"]})]})]})})]})}function i_e(){const{entries:e}=li(),{user:t}=jr(),[n,r]=w.useState({billing_percentage:94,absence_percentage:15});w.useEffect(()=>{(async()=>{if(t)try{const p=new Date,m=p.getFullYear(),g=p.getMonth()+1,{data:v,error:y}=await ie.from("monthly_settings").select("billing_percentage, absence_percentage").eq("user_id",t.id).eq("year",m).eq("month",g).single();if(v&&!y)r({billing_percentage:v.billing_percentage,absence_percentage:v.absence_percentage});else{const{data:x,error:b}=await ie.from("user_profiles").select("debit_rate_monthly, absence_percentage").eq("id",t.id).single();x&&!b&&r({billing_percentage:x.debit_rate_monthly||94,absence_percentage:x.absence_percentage||15})}}catch(p){console.error("Error loading user settings:",p)}})()},[t]);const i=new Date().toISOString().split("T")[0],s=e.filter(h=>h.date===i),a=s.reduce((h,p)=>h+p.hours,0),o=21,c=o*8*(1-n.absence_percentage/100)*(n.billing_percentage/100)/o,u=c>0?a/c*100:0,d=Math.max(0,c-a),f=()=>u>=100?"text-green-600":u>=75?"text-blue-600":u>=50?"text-yellow-600":"text-gray-600";return l.jsxs(Z,{className:"h-full",children:[l.jsx(de,{className:"pb-2",children:l.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(gt,{className:"h-4 w-4"}),"Dagens timmar"]})}),l.jsx(ee,{children:l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:`text-3xl font-bold ${f()}`,children:[a.toFixed(1),"h"]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-muted-foreground",children:"Dagsml"}),l.jsxs("span",{className:"text-muted-foreground",children:[u.toFixed(0),"%"]})]}),l.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:l.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${u>=100?"bg-green-500":u>=75?"bg-blue-500":u>=50?"bg-yellow-500":"bg-gray-400"}`,style:{width:`${Math.min(u,100)}%`}})})]}),l.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[l.jsx(Wi,{className:"h-4 w-4 text-muted-foreground"}),l.jsx("span",{className:"text-muted-foreground",children:d>0?`${d.toFixed(1)}h kvar till ml`:u>=100?"Dagsml uppntt!":"P rtt spr"})]}),l.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Lt,{className:"h-3 w-3"}),l.jsxs("span",{children:["Ml: ",c.toFixed(1),"h debiterbara/dag"]})]}),l.jsxs("div",{children:[s.length," ",s.length===1?"registrering":"registreringar"," idag"]})]})]})})]})}var CE={},CK={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(CK);var MP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(MP);var RP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}e.toKey=t})(RP);var TE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const r=[],i=n.length;if(i===0)return r;let s=0,a="",o="",c=!1;for(n.charCodeAt(0)===46&&(r.push(""),s++);s<i;){const u=n[s];o?u==="\\"&&s+1<i?(s++,a+=n[s]):u===o?o="":a+=u:c?u==='"'||u==="'"?o=u:u==="]"?(c=!1,r.push(a),a=""):a+=u:u==="["?(c=!0,a&&(r.push(a),a="")):u==="."?a&&(r.push(a),a=""):a+=u,s++}return a&&r.push(a),r}e.toPath=t})(TE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CK,n=MP,r=RP,i=TE;function s(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?n.isDeepKey(c)?s(o,i.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const d=o[c];return d===void 0?u:d}default:{if(Array.isArray(c))return a(o,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?u:d}}}function a(o,c,u){if(c.length===0)return u;let d=o;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=s})(CE);var s_e=CE.get;const Pc=oi(s_e);var TK={exports:{}},qt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LP=Symbol.for("react.transitional.element"),FP=Symbol.for("react.portal"),AE=Symbol.for("react.fragment"),jE=Symbol.for("react.strict_mode"),OE=Symbol.for("react.profiler"),PE=Symbol.for("react.consumer"),IE=Symbol.for("react.context"),DE=Symbol.for("react.forward_ref"),ME=Symbol.for("react.suspense"),RE=Symbol.for("react.suspense_list"),LE=Symbol.for("react.memo"),FE=Symbol.for("react.lazy"),a_e=Symbol.for("react.view_transition"),o_e=Symbol.for("react.client.reference");function ra(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case LP:switch(e=e.type,e){case AE:case OE:case jE:case ME:case RE:case a_e:return e;default:switch(e=e&&e.$$typeof,e){case IE:case DE:case FE:case LE:return e;case PE:return e;default:return t}}case FP:return t}}}qt.ContextConsumer=PE;qt.ContextProvider=IE;qt.Element=LP;qt.ForwardRef=DE;qt.Fragment=AE;qt.Lazy=FE;qt.Memo=LE;qt.Portal=FP;qt.Profiler=OE;qt.StrictMode=jE;qt.Suspense=ME;qt.SuspenseList=RE;qt.isContextConsumer=function(e){return ra(e)===PE};qt.isContextProvider=function(e){return ra(e)===IE};qt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===LP};qt.isForwardRef=function(e){return ra(e)===DE};qt.isFragment=function(e){return ra(e)===AE};qt.isLazy=function(e){return ra(e)===FE};qt.isMemo=function(e){return ra(e)===LE};qt.isPortal=function(e){return ra(e)===FP};qt.isProfiler=function(e){return ra(e)===OE};qt.isStrictMode=function(e){return ra(e)===jE};qt.isSuspense=function(e){return ra(e)===ME};qt.isSuspenseList=function(e){return ra(e)===RE};qt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===AE||e===OE||e===jE||e===ME||e===RE||typeof e=="object"&&e!==null&&(e.$$typeof===FE||e.$$typeof===LE||e.$$typeof===IE||e.$$typeof===PE||e.$$typeof===DE||e.$$typeof===o_e||e.getModuleId!==void 0)};qt.typeOf=ra;TK.exports=qt;var l_e=TK.exports,Sr=e=>e===0?0:e>0?1:-1,qi=e=>typeof e=="number"&&e!=+e,Ru=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,De=e=>(typeof e=="number"||e instanceof Number)&&!qi(e),fo=e=>De(e)||typeof e=="string",c_e=0,Wg=e=>{var t=++c_e;return"".concat(e||"").concat(t)},wi=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!De(t)&&typeof t!="string")return r;var s;if(Ru(t)){if(n==null)return r;var a=t.indexOf("%");s=n*parseFloat(t.slice(0,a))/100}else s=+t;return qi(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},AK=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1},s5=(e,t)=>De(e)&&De(t)?n=>e+n*(t-e):()=>t;function $r(e,t,n){return De(e)&&De(t)?e+n*(t-e):t}function jK(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):Pc(r,t))===n)}var tn=e=>e===null||typeof e>"u",Z0=e=>tn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),u_e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function BP(e){if(typeof e!="string")return!1;var t=u_e;return t.includes(e)}var d_e=["viewBox","children"],a5=["points","pathLength"],O_={svg:d_e,polygon:a5,polyline:a5},$P=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(w.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{BP(i)&&(r[i]=s=>n[i](n,s))}),r},f_e=(e,t,n)=>r=>(e(t,n,r),null),ev=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var s=e[i];BP(i)&&typeof s=="function"&&(r||(r={}),r[i]=f_e(s,t,n))}),r},h_e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function OK(e){if(typeof e!="string")return!1;var t=h_e;return t.includes(e)}function Da(e){var t=Object.entries(e).filter(n=>{var[r]=n;return OK(r)});return Object.fromEntries(t)}var o5=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",l5=null,P_=null,PK=e=>{if(e===l5&&Array.isArray(P_))return P_;var t=[];return w.Children.forEach(e,n=>{tn(n)||(l_e.isFragment(n)?t=t.concat(PK(n.props.children)):t.push(n))}),P_=t,l5=e,t};function tv(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>o5(i)):r=[o5(t)],PK(e).forEach(i=>{var s=Pc(i,"type.displayName")||Pc(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}var BE=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,p_e=(e,t,n,r)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(i=r&&(O_==null?void 0:O_[r]))!==null&&i!==void 0?i:[],a=t.startsWith("data-"),o=typeof e!="function"&&(!!r&&s.includes(t)||OK(t)),c=!!n&&BP(t);return a||o||c},Zt=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(w.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(s=>{var a;p_e((a=r)===null||a===void 0?void 0:a[s],s,t,n)&&(i[s]=r[s])}),i},m_e=["children","width","height","viewBox","className","style","title","desc"];function eT(){return eT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eT.apply(null,arguments)}function g_e(e,t){if(e==null)return{};var n,r,i=v_e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function v_e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var UP=w.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:s,className:a,style:o,title:c,desc:u}=e,d=g_e(e,m_e),f=s||{width:r,height:i,x:0,y:0},h=bt("recharts-surface",a);return w.createElement("svg",eT({},Zt(d,!0,"svg"),{className:h,width:r,height:i,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),w.createElement("title",null,c),w.createElement("desc",null,u),n)}),y_e=["children","className"];function tT(){return tT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tT.apply(null,arguments)}function x_e(e,t){if(e==null)return{};var n,r,i=b_e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function b_e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Hn=w.forwardRef((e,t)=>{var{children:n,className:r}=e,i=x_e(e,y_e),s=bt("recharts-layer",r);return w.createElement("g",tT({className:s},Zt(i,!0),{ref:t}),n)}),IK=w.createContext(null),w_e=()=>w.useContext(IK);function Qt(e){return function(){return e}}const DK=Math.cos,Db=Math.sin,Ma=Math.sqrt,Mb=Math.PI,$E=2*Mb,nT=Math.PI,rT=2*nT,Nu=1e-6,E_e=rT-Nu;function MK(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function S_e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return MK;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class N_e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?MK:S_e(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,c=r-t,u=i-n,d=a-t,f=o-n,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>Nu)if(!(Math.abs(f*c-u*d)>Nu)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-a,m=i-o,g=c*c+u*u,v=p*p+m*m,y=Math.sqrt(g),x=Math.sqrt(h),b=s*Math.tan((nT-Math.acos((g+h-v)/(2*y*x)))/2),S=b/x,E=b/y;Math.abs(S-1)>Nu&&this._append`L${t+S*d},${n+S*f}`,this._append`A${s},${s},0,0,${+(f*p>d*m)},${this._x1=t+E*c},${this._y1=n+E*u}`}}arc(t,n,r,i,s,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),u=t+o,d=n+c,f=1^a,h=a?i-s:s-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Nu||Math.abs(this._y1-d)>Nu)&&this._append`L${u},${d}`,r&&(h<0&&(h=h%rT+rT),h>E_e?this._append`A${r},${r},0,1,${f},${t-o},${n-c}A${r},${r},0,1,${f},${this._x1=u},${this._y1=d}`:h>Nu&&this._append`A${r},${r},0,${+(h>=nT)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function zP(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new N_e(t)}function HP(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function RK(e){this._context=e}RK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function UE(e){return new RK(e)}function LK(e){return e[0]}function FK(e){return e[1]}function BK(e,t){var n=Qt(!0),r=null,i=UE,s=null,a=zP(o);e=typeof e=="function"?e:e===void 0?LK:Qt(e),t=typeof t=="function"?t:t===void 0?FK:Qt(t);function o(c){var u,d=(c=HP(c)).length,f,h=!1,p;for(r==null&&(s=i(p=a())),u=0;u<=d;++u)!(u<d&&n(f=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,u,c),+t(f,u,c));if(p)return s=null,p+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:Qt(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:Qt(+c),o):t},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Qt(!!c),o):n},o.curve=function(c){return arguments.length?(i=c,r!=null&&(s=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=s=null:s=i(r=c),o):r},o}function dy(e,t,n){var r=null,i=Qt(!0),s=null,a=UE,o=null,c=zP(u);e=typeof e=="function"?e:e===void 0?LK:Qt(+e),t=typeof t=="function"?t:Qt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?FK:Qt(+n);function u(f){var h,p,m,g=(f=HP(f)).length,v,y=!1,x,b=new Array(g),S=new Array(g);for(s==null&&(o=a(x=c())),h=0;h<=g;++h){if(!(h<g&&i(v=f[h],h,f))===y)if(y=!y)p=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),m=h-1;m>=p;--m)o.point(b[m],S[m]);o.lineEnd(),o.areaEnd()}y&&(b[h]=+e(v,h,f),S[h]=+t(v,h,f),o.point(r?+r(v,h,f):b[h],n?+n(v,h,f):S[h]))}if(x)return o=null,x+""||null}function d(){return BK().defined(i).curve(a).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Qt(+f),r=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Qt(+f),u):e},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Qt(+f),u):r},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Qt(+f),n=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Qt(+f),u):t},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Qt(+f),u):n},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(n)},u.lineX1=function(){return d().x(r).y(t)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Qt(!!f),u):i},u.curve=function(f){return arguments.length?(a=f,s!=null&&(o=a(s)),u):a},u.context=function(f){return arguments.length?(f==null?s=o=null:o=a(s=f),u):s},u}class $K{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function __e(e){return new $K(e,!0)}function k_e(e){return new $K(e,!1)}const VP={draw(e,t){const n=Ma(t/Mb);e.moveTo(n,0),e.arc(0,0,n,0,$E)}},C_e={draw(e,t){const n=Ma(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},UK=Ma(1/3),T_e=UK*2,A_e={draw(e,t){const n=Ma(t/T_e),r=n*UK;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},j_e={draw(e,t){const n=Ma(t),r=-n/2;e.rect(r,r,n,n)}},O_e=.8908130915292852,zK=Db(Mb/10)/Db(7*Mb/10),P_e=Db($E/10)*zK,I_e=-DK($E/10)*zK,D_e={draw(e,t){const n=Ma(t*O_e),r=P_e*n,i=I_e*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const a=$E*s/5,o=DK(a),c=Db(a);e.lineTo(c*n,-o*n),e.lineTo(o*r-c*i,c*r+o*i)}e.closePath()}},I_=Ma(3),M_e={draw(e,t){const n=-Ma(t/(I_*3));e.moveTo(0,n*2),e.lineTo(-I_*n,-n),e.lineTo(I_*n,-n),e.closePath()}},Cs=-.5,Ts=Ma(3)/2,iT=1/Ma(12),R_e=(iT/2+1)*3,L_e={draw(e,t){const n=Ma(t/R_e),r=n/2,i=n*iT,s=r,a=n*iT+n,o=-s,c=a;e.moveTo(r,i),e.lineTo(s,a),e.lineTo(o,c),e.lineTo(Cs*r-Ts*i,Ts*r+Cs*i),e.lineTo(Cs*s-Ts*a,Ts*s+Cs*a),e.lineTo(Cs*o-Ts*c,Ts*o+Cs*c),e.lineTo(Cs*r+Ts*i,Cs*i-Ts*r),e.lineTo(Cs*s+Ts*a,Cs*a-Ts*s),e.lineTo(Cs*o+Ts*c,Cs*c-Ts*o),e.closePath()}};function F_e(e,t){let n=null,r=zP(i);e=typeof e=="function"?e:Qt(e||VP),t=typeof t=="function"?t:Qt(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Qt(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Qt(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Rb(){}function Lb(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function HK(e){this._context=e}HK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Lb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Lb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function B_e(e){return new HK(e)}function VK(e){this._context=e}VK.prototype={areaStart:Rb,areaEnd:Rb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Lb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $_e(e){return new VK(e)}function WK(e){this._context=e}WK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Lb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function U_e(e){return new WK(e)}function qK(e){this._context=e}qK.prototype={areaStart:Rb,areaEnd:Rb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function z_e(e){return new qK(e)}function c5(e){return e<0?-1:1}function u5(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(c5(s)+c5(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function d5(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function D_(e,t,n){var r=e._x0,i=e._y0,s=e._x1,a=e._y1,o=(s-r)/3;e._context.bezierCurveTo(r+o,i+o*t,s-o,a-o*n,s,a)}function Fb(e){this._context=e}Fb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:D_(this,this._t0,d5(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,D_(this,d5(this,n=u5(this,e,t)),n);break;default:D_(this,this._t0,n=u5(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function KK(e){this._context=new GK(e)}(KK.prototype=Object.create(Fb.prototype)).point=function(e,t){Fb.prototype.point.call(this,t,e)};function GK(e){this._context=e}GK.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function H_e(e){return new Fb(e)}function V_e(e){return new KK(e)}function YK(e){this._context=e}YK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=f5(e),i=f5(t),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function f5(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function W_e(e){return new YK(e)}function zE(e,t){this._context=e,this._t=t}zE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function q_e(e){return new zE(e,.5)}function K_e(e){return new zE(e,0)}function G_e(e){return new zE(e,1)}function Sh(e,t){if((a=e.length)>1)for(var n=1,r,i,s=e[t[0]],a,o=s.length;n<a;++n)for(i=s,s=e[t[n]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function sT(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Y_e(e,t){return e[t]}function X_e(e){const t=[];return t.key=e,t}function Q_e(){var e=Qt([]),t=sT,n=Sh,r=Y_e;function i(s){var a=Array.from(e.apply(this,arguments),X_e),o,c=a.length,u=-1,d;for(const f of s)for(o=0,++u;o<c;++o)(a[o][u]=[0,+r(f,a[o].key,u,s)]).data=f;for(o=0,d=HP(t(a));o<c;++o)a[d[o]].index=o;return n(a,d),a}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Qt(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Qt(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?sT:typeof s=="function"?s:Qt(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??Sh,i):n},i}function J_e(e,t){if((r=e.length)>0){for(var n,r,i=0,s=e[0].length,a;i<s;++i){for(a=n=0;n<r;++n)a+=e[n][i][1]||0;if(a)for(n=0;n<r;++n)e[n][i][1]/=a}Sh(e,t)}}function Z_e(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,s=r.length;n<s;++n){for(var a=0,o=0;a<i;++a)o+=e[a][n][1]||0;r[n][1]+=r[n][0]=-o/2}Sh(e,t)}}function eke(e,t){if(!(!((a=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,s,a;r<s;++r){for(var o=0,c=0,u=0;o<a;++o){for(var d=e[t[o]],f=d[r][1]||0,h=d[r-1][1]||0,p=(f-h)/2,m=0;m<o;++m){var g=e[t[m]],v=g[r][1]||0,y=g[r-1][1]||0;p+=v-y}c+=f,u+=p*f}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,Sh(e,t)}}var tke=["type","size","sizeType"];function aT(){return aT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aT.apply(null,arguments)}function h5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function p5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?h5(Object(n),!0).forEach(function(r){nke(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nke(e,t,n){return(t=rke(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rke(e){var t=ike(e,"string");return typeof t=="symbol"?t:t+""}function ike(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ske(e,t){if(e==null)return{};var n,r,i=ake(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ake(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var XK={symbolCircle:VP,symbolCross:C_e,symbolDiamond:A_e,symbolSquare:j_e,symbolStar:D_e,symbolTriangle:M_e,symbolWye:L_e},oke=Math.PI/180,lke=e=>{var t="symbol".concat(Z0(e));return XK[t]||VP},cke=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*oke;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},uke=(e,t)=>{XK["symbol".concat(Z0(e))]=t},WP=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=ske(e,tke),s=p5(p5({},i),{},{type:t,size:n,sizeType:r}),a=()=>{var f=lke(t),h=F_e().type(f).size(cke(n,r,t));return h()},{className:o,cx:c,cy:u}=s,d=Zt(s,!0);return c===+c&&u===+u&&n===+n?w.createElement("path",aT({},d,{className:bt("recharts-symbols",o),transform:"translate(".concat(c,", ").concat(u,")"),d:a()})):null};WP.registerSymbol=uke;function oT(){return oT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oT.apply(null,arguments)}function m5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function dke(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m5(Object(n),!0).forEach(function(r){qP(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qP(e,t,n){return(t=fke(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fke(e){var t=hke(e,"string");return typeof t=="symbol"?t:t+""}function hke(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var As=32;class KP extends w.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=As/2,s=As/6,a=As/3,o=t.inactive?r:t.color,c=n??t.type;if(c==="none")return null;if(c==="plainline")return w.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:As,y2:i,className:"recharts-legend-icon"});if(c==="line")return w.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(i,"h").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*a,",").concat(i,`
            H`).concat(As,"M").concat(2*a,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(a,",").concat(i),className:"recharts-legend-icon"});if(c==="rect")return w.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(As/8,"h").concat(As,"v").concat(As*3/4,"h").concat(-As,"z"),className:"recharts-legend-icon"});if(w.isValidElement(t.legendIcon)){var u=dke({},t);return delete u.legendIcon,w.cloneElement(t.legendIcon,u)}return w.createElement(WP,{fill:o,cx:i,cy:i,size:As,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:s,iconType:a}=this.props,o={x:0,y:0,width:As,height:As},c={display:r==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,f)=>{var h=d.formatter||i,p=bt({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var m=d.inactive?s:d.color,g=h?h(d.value,d,f):d.value;return w.createElement("li",oT({className:p,style:c,key:"legend-item-".concat(f)},ev(this.props,d,f)),w.createElement(UP,{width:n,height:n,viewBox:o,style:u,"aria-label":"".concat(g," legend icon")},this.renderIcon(d,a)),w.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},g))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return w.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}qP(KP,"displayName","Legend");qP(KP,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var QK={},JK={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let s=0;s<n.length;s++){const a=n[s],o=r(a);i.has(o)||i.set(o,a)}return Array.from(i.values())}e.uniqBy=t})(JK);var GP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(GP);var ZK={},HE={},eG={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(eG);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eG;function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(HE);var tG={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(tG);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HE,n=tG;function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(ZK);var nG={},rG={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CE;function n(r){return function(i){return t.get(i,r)}}e.property=n})(rG);var iG={},M_={},R_={},YP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(YP);var XP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(XP);var VE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(VE);var g5;function pke(){return g5||(g5=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QP(),n=YP,r=XP,i=VE;function s(f,h,p){return typeof p!="function"?t.isMatch(f,h):a(f,h,function m(g,v,y,x,b,S){const E=p(g,v,y,x,b,S);return E!==void 0?!!E:a(g,v,m,S)},new Map)}function a(f,h,p,m){if(h===f)return!0;switch(typeof h){case"object":return o(f,h,p,m);case"function":return Object.keys(h).length>0?a(f,{...h},p,m):i.eq(f,h);default:return n.isObject(f)?typeof h=="string"?h==="":!0:i.eq(f,h)}}function o(f,h,p,m){if(h==null)return!0;if(Array.isArray(h))return u(f,h,p,m);if(h instanceof Map)return c(f,h,p,m);if(h instanceof Set)return d(f,h,p,m);const g=Object.keys(h);if(f==null)return g.length===0;if(g.length===0)return!0;if(m&&m.has(h))return m.get(h)===f;m&&m.set(h,f);try{for(let v=0;v<g.length;v++){const y=g[v];if(!r.isPrimitive(f)&&!(y in f)||h[y]===void 0&&f[y]!==void 0||h[y]===null&&f[y]!==null||!p(f[y],h[y],y,f,h,m))return!1}return!0}finally{m&&m.delete(h)}}function c(f,h,p,m){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[g,v]of h.entries()){const y=f.get(g);if(p(y,v,g,f,h,m)===!1)return!1}return!0}function u(f,h,p,m){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const g=new Set;for(let v=0;v<h.length;v++){const y=h[v];let x=!1;for(let b=0;b<f.length;b++){if(g.has(b))continue;const S=f[b];let E=!1;if(p(S,y,v,f,h,m)&&(E=!0),E){g.add(b),x=!0;break}}if(!x)return!1}return!0}function d(f,h,p,m){return h.size===0?!0:f instanceof Set?u([...f],[...h],p,m):!1}e.isMatchWith=s,e.isSetMatch=d}(R_)),R_}var v5;function QP(){return v5||(v5=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pke();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n}(M_)),M_}var sG={},JP={},ZP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(ZP);var WE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(WE);var qE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",a="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",p="[object Object]",m="[object Error]",g="[object DataView]",v="[object Uint8Array]",y="[object Uint8ClampedArray]",x="[object Uint16Array]",b="[object Uint32Array]",S="[object BigUint64Array]",E="[object Int8Array]",N="[object Int16Array]",_="[object Int32Array]",k="[object BigInt64Array]",T="[object Float32Array]",A="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=k,e.bigUint64ArrayTag=S,e.booleanTag=i,e.dataViewTag=g,e.dateTag=o,e.errorTag=m,e.float32ArrayTag=T,e.float64ArrayTag=A,e.functionTag=f,e.int16ArrayTag=N,e.int32ArrayTag=_,e.int8ArrayTag=E,e.mapTag=c,e.numberTag=r,e.objectTag=p,e.regexpTag=t,e.setTag=u,e.stringTag=n,e.symbolTag=a,e.uint16ArrayTag=x,e.uint32ArrayTag=b,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=y})(qE);var aG={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(aG);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZP,n=WE,r=qE,i=XP,s=aG;function a(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,h,p=new Map,m=void 0){const g=m==null?void 0:m(d,f,h,p);if(g!==void 0)return g;if(i.isPrimitive(d))return d;if(p.has(d))return p.get(d);if(Array.isArray(d)){const v=new Array(d.length);p.set(d,v);for(let y=0;y<d.length;y++)v[y]=o(d[y],y,h,p,m);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;p.set(d,v);for(const[y,x]of d)v.set(y,o(x,y,h,p,m));return v}if(d instanceof Set){const v=new Set;p.set(d,v);for(const y of d)v.add(o(y,void 0,h,p,m));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);p.set(d,v);for(let y=0;y<d.length;y++)v[y]=o(d[y],y,h,p,m);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return p.set(d,v),c(v,d,h,p,m),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return p.set(d,v),c(v,d,h,p,m),v}if(d instanceof Blob){const v=new Blob([d],{type:d.type});return p.set(d,v),c(v,d,h,p,m),v}if(d instanceof Error){const v=new d.constructor;return p.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,c(v,d,h,p,m),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return p.set(d,v),c(v,d,h,p,m),v}return d}function c(d,f,h=d,p,m){const g=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<g.length;v++){const y=g[v],x=Object.getOwnPropertyDescriptor(d,y);(x==null||x.writable)&&(d[y]=o(f[y],y,h,p,m))}}function u(d){switch(n.getTag(d)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=a,e.cloneDeepWithImpl=o,e.copyProperties=c})(JP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JP;function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(sG);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QP(),n=sG;function r(i){return i=n.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=r})(iG);var oG={},lG={},cG={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JP,n=qE;function r(i,s){return t.cloneDeepWith(i,(a,o,c,u)=>{const d=s==null?void 0:s(a,o,c,u);if(d!==void 0)return d;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const f=new i.constructor(i==null?void 0:i.valueOf());return t.copyProperties(f,i),f}case n.argumentsTag:{const f={};return t.copyProperties(f,i),f.length=i.length,f[Symbol.iterator]=i[Symbol.iterator],f}default:return}})}e.cloneDeepWith=r})(cG);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cG;function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(lG);var uG={},eI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(eI);var dG={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WE;function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(dG);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MP,n=eI,r=dG,i=TE;function s(a,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&t.isDeepKey(o)&&(a==null?void 0:a[o])==null?c=i.toPath(o):c=[o],c.length===0)return!1;let u=a;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||r.isArguments(u))&&n.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=s})(uG);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QP(),n=RP,r=lG,i=CE,s=uG;function a(o,c){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return c=r.cloneDeep(c),function(u){const d=i.get(u,o);return d===void 0?s.has(u,o):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=a})(oG);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GP,n=rG,r=iG,i=oG;function s(a){if(a==null)return t.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?i.matchesProperty(a[0],a[1]):r.matches(a);case"string":case"symbol":case"number":return n.property(a)}}e.iteratee=s})(nG);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JK,n=GP,r=ZK,i=nG;function s(a,o=n.identity){return r.isArrayLikeObject(a)?t.uniqBy(Array.from(a),i.iteratee(o)):[]}e.uniqBy=s})(QK);var mke=QK.uniqBy;const y5=oi(mke);function fG(e,t,n){return t===!0?y5(e,n):typeof t=="function"?y5(e,t):e}var hG={exports:{}},pG={},mG={exports:{}},gG={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nh=w;function gke(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vke=typeof Object.is=="function"?Object.is:gke,yke=Nh.useState,xke=Nh.useEffect,bke=Nh.useLayoutEffect,wke=Nh.useDebugValue;function Eke(e,t){var n=t(),r=yke({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return bke(function(){i.value=n,i.getSnapshot=t,L_(i)&&s({inst:i})},[e,n,t]),xke(function(){return L_(i)&&s({inst:i}),e(function(){L_(i)&&s({inst:i})})},[e]),wke(n),n}function L_(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!vke(e,n)}catch{return!0}}function Ske(e,t){return t()}var Nke=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ske:Eke;gG.useSyncExternalStore=Nh.useSyncExternalStore!==void 0?Nh.useSyncExternalStore:Nke;mG.exports=gG;var KE=mG.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GE=w,_ke=KE;function kke(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cke=typeof Object.is=="function"?Object.is:kke,Tke=_ke.useSyncExternalStore,Ake=GE.useRef,jke=GE.useEffect,Oke=GE.useMemo,Pke=GE.useDebugValue;pG.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Ake(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=Oke(function(){function c(p){if(!u){if(u=!0,d=p,p=r(p),i!==void 0&&a.hasValue){var m=a.value;if(i(m,p))return f=m}return f=p}if(m=f,Cke(d,p))return m;var g=r(p);return i!==void 0&&i(m,g)?(d=p,m):(d=p,f=g)}var u=!1,d,f,h=n===void 0?null:n;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,n,r,i]);var o=Tke(e,s[0],s[1]);return jke(function(){a.hasValue=!0,a.value=o},[o]),Pke(o),o};hG.exports=pG;var vG=hG.exports,tI=w.createContext(null),Ike=e=>e,Cn=()=>{var e=w.useContext(tI);return e?e.store.dispatch:Ike},Nx=()=>{},Dke=()=>Nx,Mke=(e,t)=>e===t;function We(e){var t=w.useContext(tI);return vG.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Dke,t?t.store.getState:Nx,t?t.store.getState:Nx,t?e:Nx,Mke)}function Rke(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Lke(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Fke(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var x5=e=>Array.isArray(e)?e:[e];function Bke(e){const t=Array.isArray(e[0])?e[0]:e;return Fke(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function $ke(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var Uke=class{constructor(e){this.value=e}deref(){return this.value}},zke=typeof WeakRef<"u"?WeakRef:Uke,Hke=0,b5=1;function fy(){return{s:Hke,v:void 0,o:null,p:null}}function yG(e,t={}){let n=fy();const{resultEqualityCheck:r}=t;let i,s=0;function a(){var f;let o=n;const{length:c}=arguments;for(let h=0,p=c;h<p;h++){const m=arguments[h];if(typeof m=="function"||typeof m=="object"&&m!==null){let g=o.o;g===null&&(o.o=g=new WeakMap);const v=g.get(m);v===void 0?(o=fy(),g.set(m,o)):o=v}else{let g=o.p;g===null&&(o.p=g=new Map);const v=g.get(m);v===void 0?(o=fy(),g.set(m,o)):o=v}}const u=o;let d;if(o.s===b5)d=o.v;else if(d=e.apply(null,arguments),s++,r){const h=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;h!=null&&r(h,d)&&(d=h,s!==0&&s--),i=typeof d=="object"&&d!==null||typeof d=="function"?new zke(d):d}return u.s=b5,u.v=d,d}return a.clearCache=()=>{n=fy(),a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function Vke(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,a=0,o,c={},u=i.pop();typeof u=="object"&&(c=u,u=i.pop()),Rke(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...n,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:p=yG,argsMemoizeOptions:m=[]}=d,g=x5(h),v=x5(m),y=Bke(i),x=f(function(){return s++,u.apply(null,arguments)},...g),b=p(function(){a++;const E=$ke(y,arguments);return o=x.apply(null,E),o},...v);return Object.assign(b,{resultFunc:u,memoizedResultFunc:x,dependencies:y,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>o,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:p})};return Object.assign(r,{withTypes:()=>r}),r}var ae=Vke(yG),Wke=Object.assign((e,t=ae)=>{Lke(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((a,o,c)=>(a[n[c]]=o,a),{}))},{withTypes:()=>Wke}),xG={},bG={},wG={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const a=t(r),o=t(i);if(a===o&&a===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?o-a:a-o}return 0};e.compareValues=n})(wG);var EG={},nI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(nI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nI,n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,a){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||a!=null&&Object.hasOwn(a,s)}e.isKey=i})(EG);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wG,n=EG,r=TE;function i(s,a,o,c){if(s==null)return[];o=c?void 0:o,Array.isArray(s)||(s=Object.values(s)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(p=>String(p));const u=(p,m)=>{let g=p;for(let v=0;v<m.length&&g!=null;++v)g=g[m[v]];return g},d=(p,m)=>m==null||p==null?m:typeof p=="object"&&"key"in p?Object.hasOwn(m,p.key)?m[p.key]:u(m,p.path):typeof p=="function"?p(m):Array.isArray(p)?u(m,p):typeof m=="object"?m[p]:m,f=a.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||n.isKey(p)?p:{key:p,path:r.toPath(p)}));return s.map(p=>({original:p,criteria:f.map(m=>d(m,p))})).slice().sort((p,m)=>{for(let g=0;g<f.length;g++){const v=t.compareValues(p.criteria[g],m.criteria[g],o[g]);if(v!==0)return v}return 0}).map(p=>p.original)}e.orderBy=i})(bG);var SG={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],s=Math.floor(r),a=(o,c)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&c<s?a(d,c+1):i.push(d)}};return a(n,0),i}e.flatten=t})(SG);var rI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eI,n=HE,r=YP,i=VE;function s(a,o,c){return r.isObject(c)&&(typeof o=="number"&&n.isArrayLike(c)&&t.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?i.eq(c[o],a):!1}e.isIterateeCall=s})(rI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bG,n=SG,r=rI;function i(s,...a){const o=a.length;return o>1&&r.isIterateeCall(s,a[0],a[1])?a=[]:o>2&&r.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),t.orderBy(s,n.flatten(a),["asc"])}e.sortBy=i})(xG);var qke=xG.sortBy;const YE=oi(qke);var NG=e=>e.legend.settings,Kke=e=>e.legend.size,Gke=e=>e.legend.payload,Yke=ae([Gke,NG],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?YE(r,n):r});function Xke(){return We(Yke)}var hy=1;function _G(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=w.useState({height:0,left:0,top:0,width:0}),r=w.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),a={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(a.height-t.height)>hy||Math.abs(a.left-t.left)>hy||Math.abs(a.top-t.top)>hy||Math.abs(a.width-t.width)>hy)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function Mr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Qke=typeof Symbol=="function"&&Symbol.observable||"@@observable",w5=Qke,F_=()=>Math.random().toString(36).substring(7).split("").join("."),Jke={INIT:`@@redux/INIT${F_()}`,REPLACE:`@@redux/REPLACE${F_()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${F_()}`},Bb=Jke;function iI(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function kG(e,t,n){if(typeof e!="function")throw new Error(Mr(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Mr(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Mr(1));return n(kG)(e,t)}let r=e,i=t,s=new Map,a=s,o=0,c=!1;function u(){a===s&&(a=new Map,s.forEach((v,y)=>{a.set(y,v)}))}function d(){if(c)throw new Error(Mr(3));return i}function f(v){if(typeof v!="function")throw new Error(Mr(4));if(c)throw new Error(Mr(5));let y=!0;u();const x=o++;return a.set(x,v),function(){if(y){if(c)throw new Error(Mr(6));y=!1,u(),a.delete(x),s=null}}}function h(v){if(!iI(v))throw new Error(Mr(7));if(typeof v.type>"u")throw new Error(Mr(8));if(typeof v.type!="string")throw new Error(Mr(17));if(c)throw new Error(Mr(9));try{c=!0,i=r(i,v)}finally{c=!1}return(s=a).forEach(x=>{x()}),v}function p(v){if(typeof v!="function")throw new Error(Mr(10));r=v,h({type:Bb.REPLACE})}function m(){const v=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Mr(11));function x(){const S=y;S.next&&S.next(d())}return x(),{unsubscribe:v(x)}},[w5](){return this}}}return h({type:Bb.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:p,[w5]:m}}function Zke(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Bb.INIT})>"u")throw new Error(Mr(12));if(typeof n(void 0,{type:Bb.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Mr(13))})}function CG(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const a=t[s];typeof e[a]=="function"&&(n[a]=e[a])}const r=Object.keys(n);let i;try{Zke(n)}catch(s){i=s}return function(a={},o){if(i)throw i;let c=!1;const u={};for(let d=0;d<r.length;d++){const f=r[d],h=n[f],p=a[f],m=h(p,o);if(typeof m>"u")throw o&&o.type,new Error(Mr(14));u[f]=m,c=c||m!==p}return c=c||r.length!==Object.keys(a).length,c?u:a}}function $b(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function e2e(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Mr(15))};const a={getState:i.getState,dispatch:(c,...u)=>s(c,...u)},o=e.map(c=>c(a));return s=$b(...o)(i.dispatch),{...i,dispatch:s}}}function TG(e){return iI(e)&&"type"in e&&typeof e.type=="string"}var AG=Symbol.for("immer-nothing"),E5=Symbol.for("immer-draftable"),vs=Symbol.for("immer-state");function va(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var _h=Object.getPrototypeOf;function yd(e){return!!e&&!!e[vs]}function al(e){var t;return e?jG(e)||Array.isArray(e)||!!e[E5]||!!((t=e.constructor)!=null&&t[E5])||QE(e)||JE(e):!1}var t2e=Object.prototype.constructor.toString();function jG(e){if(!e||typeof e!="object")return!1;const t=_h(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===t2e}function Ub(e,t){XE(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function XE(e){const t=e[vs];return t?t.type_:Array.isArray(e)?1:QE(e)?2:JE(e)?3:0}function lT(e,t){return XE(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function OG(e,t,n){const r=XE(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function n2e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function QE(e){return e instanceof Map}function JE(e){return e instanceof Set}function _u(e){return e.copy_||e.base_}function cT(e,t){if(QE(e))return new Map(e);if(JE(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=jG(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[vs];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[a]})}return Object.create(_h(e),r)}else{const r=_h(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function sI(e,t=!1){return ZE(e)||yd(e)||!al(e)||(XE(e)>1&&(e.set=e.add=e.clear=e.delete=r2e),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>sI(r,!0))),e}function r2e(){va(2)}function ZE(e){return Object.isFrozen(e)}var i2e={};function xd(e){const t=i2e[e];return t||va(0,e),t}var qg;function PG(){return qg}function s2e(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function S5(e,t){t&&(xd("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function uT(e){dT(e),e.drafts_.forEach(a2e),e.drafts_=null}function dT(e){e===qg&&(qg=e.parent_)}function N5(e){return qg=s2e(qg,e)}function a2e(e){const t=e[vs];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function _5(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[vs].modified_&&(uT(t),va(4)),al(e)&&(e=zb(t,e),t.parent_||Hb(t,e)),t.patches_&&xd("Patches").generateReplacementPatches_(n[vs].base_,e,t.patches_,t.inversePatches_)):e=zb(t,n,[]),uT(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==AG?e:void 0}function zb(e,t,n){if(ZE(t))return t;const r=t[vs];if(!r)return Ub(t,(i,s)=>k5(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Hb(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,a=!1;r.type_===3&&(s=new Set(i),i.clear(),a=!0),Ub(s,(o,c)=>k5(e,r,i,o,c,n,a)),Hb(e,i,!1),n&&e.patches_&&xd("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function k5(e,t,n,r,i,s,a){if(yd(i)){const o=s&&t&&t.type_!==3&&!lT(t.assigned_,r)?s.concat(r):void 0,c=zb(e,i,o);if(OG(n,r,c),yd(c))e.canAutoFreeze_=!1;else return}else a&&n.add(i);if(al(i)&&!ZE(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;zb(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Hb(e,i)}}function Hb(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&sI(t,n)}function o2e(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:PG(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=aI;n&&(i=[r],s=Kg);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,o}var aI={get(e,t){if(t===vs)return e;const n=_u(e);if(!lT(n,t))return l2e(e,n,t);const r=n[t];return e.finalized_||!al(r)?r:r===B_(e.base_,t)?($_(e),e.copy_[t]=hT(r,e)):r},has(e,t){return t in _u(e)},ownKeys(e){return Reflect.ownKeys(_u(e))},set(e,t,n){const r=IG(_u(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=B_(_u(e),t),s=i==null?void 0:i[vs];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(n2e(n,i)&&(n!==void 0||lT(e.base_,t)))return!0;$_(e),fT(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return B_(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,$_(e),fT(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=_u(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){va(11)},getPrototypeOf(e){return _h(e.base_)},setPrototypeOf(){va(12)}},Kg={};Ub(aI,(e,t)=>{Kg[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Kg.deleteProperty=function(e,t){return Kg.set.call(this,e,t,void 0)};Kg.set=function(e,t,n){return aI.set.call(this,e[0],t,n,e[0])};function B_(e,t){const n=e[vs];return(n?_u(n):e)[t]}function l2e(e,t,n){var i;const r=IG(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function IG(e,t){if(!(t in e))return;let n=_h(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=_h(n)}}function fT(e){e.modified_||(e.modified_=!0,e.parent_&&fT(e.parent_))}function $_(e){e.copy_||(e.copy_=cT(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var c2e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const a=this;return function(c=s,...u){return a.produce(c,d=>n.call(this,d,...u))}}typeof n!="function"&&va(6),r!==void 0&&typeof r!="function"&&va(7);let i;if(al(t)){const s=N5(this),a=hT(t,void 0);let o=!0;try{i=n(a),o=!1}finally{o?uT(s):dT(s)}return S5(s,r),_5(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===AG&&(i=void 0),this.autoFreeze_&&sI(i,!0),r){const s=[],a=[];xd("Patches").generateReplacementPatches_(t,i,s,a),r(s,a)}return i}else va(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(a,...o)=>this.produceWithPatches(a,c=>t(c,...o));let r,i;return[this.produce(t,n,(a,o)=>{r=a,i=o}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){al(e)||va(8),yd(e)&&(e=Ko(e));const t=N5(this),n=hT(e,void 0);return n[vs].isManual_=!0,dT(t),n}finishDraft(e,t){const n=e&&e[vs];(!n||!n.isManual_)&&va(9);const{scope_:r}=n;return S5(r,t),_5(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=xd("Patches").applyPatches_;return yd(e)?r(e,t):this.produce(e,i=>r(i,t))}};function hT(e,t){const n=QE(e)?xd("MapSet").proxyMap_(e,t):JE(e)?xd("MapSet").proxySet_(e,t):o2e(e,t);return(t?t.scope_:PG()).drafts_.push(n),n}function Ko(e){return yd(e)||va(10,e),DG(e)}function DG(e){if(!al(e)||ZE(e))return e;const t=e[vs];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=cT(e,t.scope_.immer_.useStrictShallowCopy_)}else n=cT(e,!0);return Ub(n,(r,i)=>{OG(n,r,DG(i))}),t&&(t.finalized_=!1),n}var ys=new c2e,MG=ys.produce;ys.produceWithPatches.bind(ys);ys.setAutoFreeze.bind(ys);ys.setUseStrictShallowCopy.bind(ys);ys.applyPatches.bind(ys);ys.createDraft.bind(ys);ys.finishDraft.bind(ys);function RG(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var u2e=RG(),d2e=RG,f2e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?$b:$b.apply(null,arguments)};function ea(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(fs(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>TG(r)&&r.type===e,n}var LG=class pm extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,pm.prototype)}static get[Symbol.species](){return pm}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new pm(...t[0].concat(this)):new pm(...t.concat(this))}};function C5(e){return al(e)?MG(e,()=>{}):e}function py(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function h2e(e){return typeof e=="boolean"}var p2e=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let a=new LG;return n&&(h2e(n)?a.push(u2e):a.push(d2e(n.extraArgument))),a},m2e="RTK_autoBatch",T5=e=>t=>{setTimeout(t,e)},g2e=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,a=!1;const o=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:T5(10):e.type==="callback"?e.queueNotification:T5(e.timeout),u=()=>{a=!1,s&&(s=!1,o.forEach(d=>d()))};return Object.assign({},r,{subscribe(d){const f=()=>i&&d(),h=r.subscribe(f);return o.add(d),()=>{h(),o.delete(d)}},dispatch(d){var f;try{return i=!((f=d==null?void 0:d.meta)!=null&&f[m2e]),s=!i,s&&(a||(a=!0,c(u))),r.dispatch(d)}finally{i=!0}}})},v2e=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new LG(e);return r&&i.push(g2e(typeof r=="object"?r:void 0)),i};function y2e(e){const t=p2e(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:a=void 0}=e||{};let o;if(typeof n=="function")o=n;else if(iI(n))o=CG(n);else throw new Error(fs(1));let c;typeof r=="function"?c=r(t):c=t();let u=$b;i&&(u=f2e({trace:!1,...typeof i=="object"&&i}));const d=e2e(...c),f=v2e(d);let h=typeof a=="function"?a(f):f();const p=u(...h);return kG(o,s,p)}function FG(e){const t={},n=[];let r;const i={addCase(s,a){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(fs(28));if(o in t)throw new Error(fs(29));return t[o]=a,i},addMatcher(s,a){return n.push({matcher:s,reducer:a}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function x2e(e){return typeof e=="function"}function b2e(e,t){let[n,r,i]=FG(t),s;if(x2e(e))s=()=>C5(e());else{const o=C5(e);s=()=>o}function a(o=s(),c){let u=[n[c.type],...r.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[i]),u.reduce((d,f)=>{if(f)if(yd(d)){const p=f(d,c);return p===void 0?d:p}else{if(al(d))return MG(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},o)}return a.getInitialState=s,a}var w2e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",E2e=(e=21)=>{let t="",n=e;for(;n--;)t+=w2e[Math.random()*64|0];return t},S2e=Symbol.for("rtk-slice-createasyncthunk");function N2e(e,t){return`${e}/${t}`}function _2e({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[S2e];return function(i){const{name:s,reducerPath:a=s}=i;if(!s)throw new Error(fs(11));const o=(typeof i.reducers=="function"?i.reducers(C2e()):i.reducers)||{},c=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(S,E){const N=typeof S=="string"?S:S.type;if(!N)throw new Error(fs(12));if(N in u.sliceCaseReducersByType)throw new Error(fs(13));return u.sliceCaseReducersByType[N]=E,d},addMatcher(S,E){return u.sliceMatchers.push({matcher:S,reducer:E}),d},exposeAction(S,E){return u.actionCreators[S]=E,d},exposeCaseReducer(S,E){return u.sliceCaseReducersByName[S]=E,d}};c.forEach(S=>{const E=o[S],N={reducerName:S,type:N2e(s,S),createNotation:typeof i.reducers=="function"};A2e(E)?O2e(N,E,d,t):T2e(N,E,d)});function f(){const[S={},E=[],N=void 0]=typeof i.extraReducers=="function"?FG(i.extraReducers):[i.extraReducers],_={...S,...u.sliceCaseReducersByType};return b2e(i.initialState,k=>{for(let T in _)k.addCase(T,_[T]);for(let T of u.sliceMatchers)k.addMatcher(T.matcher,T.reducer);for(let T of E)k.addMatcher(T.matcher,T.reducer);N&&k.addDefaultCase(N)})}const h=S=>S,p=new Map,m=new WeakMap;let g;function v(S,E){return g||(g=f()),g(S,E)}function y(){return g||(g=f()),g.getInitialState()}function x(S,E=!1){function N(k){let T=k[S];return typeof T>"u"&&E&&(T=py(m,N,y)),T}function _(k=h){const T=py(p,E,()=>new WeakMap);return py(T,k,()=>{const A={};for(const[j,D]of Object.entries(i.selectors??{}))A[j]=k2e(D,k,()=>py(m,k,y),E);return A})}return{reducerPath:S,getSelectors:_,get selectors(){return _(N)},selectSlice:N}}const b={name:s,reducer:v,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,...x(a),injectInto(S,{reducerPath:E,...N}={}){const _=E??a;return S.inject({reducerPath:_,reducer:v},N),{...b,...x(_,!0)}}};return b}}function k2e(e,t,n,r){function i(s,...a){let o=t(s);return typeof o>"u"&&r&&(o=n()),e(o,...a)}return i.unwrapped=e,i}var Es=_2e();function C2e(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function T2e({type:e,reducerName:t,createNotation:n},r,i){let s,a;if("reducer"in r){if(n&&!j2e(r))throw new Error(fs(17));s=r.reducer,a=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,a?ea(e,a):ea(e))}function A2e(e){return e._reducerDefinitionType==="asyncThunk"}function j2e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function O2e({type:e,reducerName:t},n,r,i){if(!i)throw new Error(fs(18));const{payloadCreator:s,fulfilled:a,pending:o,rejected:c,settled:u,options:d}=n,f=i(e,s,d);r.exposeAction(t,f),a&&r.addCase(f.fulfilled,a),o&&r.addCase(f.pending,o),c&&r.addCase(f.rejected,c),u&&r.addMatcher(f.settled,u),r.exposeCaseReducer(t,{fulfilled:a||my,pending:o||my,rejected:c||my,settled:u||my})}function my(){}var P2e="task",BG="listener",$G="completed",oI="cancelled",I2e=`task-${oI}`,D2e=`task-${$G}`,pT=`${BG}-${oI}`,M2e=`${BG}-${$G}`,eS=class{constructor(e){Ns(this,"name","TaskAbortError");Ns(this,"message");this.code=e,this.message=`${P2e} ${oI} (reason: ${e})`}},lI=(e,t)=>{if(typeof e!="function")throw new TypeError(fs(32))},Vb=()=>{},UG=(e,t=Vb)=>(e.catch(t),e),zG=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Zu=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},ed=e=>{if(e.aborted){const{reason:t}=e;throw new eS(t)}};function HG(e,t){let n=Vb;return new Promise((r,i)=>{const s=()=>i(new eS(e.reason));if(e.aborted){s();return}n=zG(e,s),t.finally(()=>n()).then(r,i)}).finally(()=>{n=Vb})}var R2e=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof eS?"cancelled":"rejected",error:n}}finally{t==null||t()}},Wb=e=>t=>UG(HG(e,t).then(n=>(ed(e),n))),VG=e=>{const t=Wb(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:Yf}=Object,A5={},tS="listenerMiddleware",L2e=(e,t)=>{const n=r=>zG(e,()=>Zu(r,e.reason));return(r,i)=>{lI(r);const s=new AbortController;n(s);const a=R2e(async()=>{ed(e),ed(s.signal);const o=await r({pause:Wb(s.signal),delay:VG(s.signal),signal:s.signal});return ed(s.signal),o},()=>Zu(s,D2e));return i!=null&&i.autoJoin&&t.push(a.catch(Vb)),{result:Wb(e)(a),cancel(){Zu(s,I2e)}}}},F2e=(e,t)=>{const n=async(r,i)=>{ed(t);let s=()=>{};const o=[new Promise((c,u)=>{let d=e({predicate:r,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});s=()=>{d(),u()}})];i!=null&&o.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await HG(t,Promise.race(o));return ed(t),c}finally{s()}};return(r,i)=>UG(n(r,i))},WG=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=ea(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(fs(21));return lI(s),{predicate:i,type:t,effect:s}},qG=Yf(e=>{const{type:t,predicate:n,effect:r}=WG(e);return{id:E2e(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(fs(22))}}},{withTypes:()=>qG}),j5=(e,t)=>{const{type:n,effect:r,predicate:i}=WG(t);return Array.from(e.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},mT=e=>{e.pending.forEach(t=>{Zu(t,pT)})},B2e=e=>()=>{e.forEach(mT),e.clear()},O5=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},KG=Yf(ea(`${tS}/add`),{withTypes:()=>KG}),$2e=ea(`${tS}/removeAll`),GG=Yf(ea(`${tS}/remove`),{withTypes:()=>GG}),U2e=(...e)=>{console.error(`${tS}/error`,...e)},nv=(e={})=>{const t=new Map,{extra:n,onError:r=U2e}=e;lI(r);const i=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&mT(d)}),s=d=>{const f=j5(t,d)??qG(d);return i(f)};Yf(s,{withTypes:()=>s});const a=d=>{const f=j5(t,d);return f&&(f.unsubscribe(),d.cancelActive&&mT(f)),!!f};Yf(a,{withTypes:()=>a});const o=async(d,f,h,p)=>{const m=new AbortController,g=F2e(s,m.signal),v=[];try{d.pending.add(m),await Promise.resolve(d.effect(f,Yf({},h,{getOriginalState:p,condition:(y,x)=>g(y,x).then(Boolean),take:g,delay:VG(m.signal),pause:Wb(m.signal),extra:n,signal:m.signal,fork:L2e(m.signal,v),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((y,x,b)=>{y!==m&&(Zu(y,pT),b.delete(y))})},cancel:()=>{Zu(m,pT),d.pending.delete(m)},throwIfCancelled:()=>{ed(m.signal)}})))}catch(y){y instanceof eS||O5(r,y,{raisedBy:"effect"})}finally{await Promise.all(v),Zu(m,M2e),d.pending.delete(m)}},c=B2e(t);return{middleware:d=>f=>h=>{if(!TG(h))return f(h);if(KG.match(h))return s(h.payload);if($2e.match(h)){c();return}if(GG.match(h))return a(h.payload);let p=d.getState();const m=()=>{if(p===A5)throw new Error(fs(23));return p};let g;try{if(g=f(h),t.size>0){const v=d.getState(),y=Array.from(t.values());for(const x of y){let b=!1;try{b=x.predicate(h,v,p)}catch(S){b=!1,O5(r,S,{raisedBy:"predicate"})}b&&o(x,h,d,m)}}}finally{p=A5}return g},startListening:s,stopListening:a,clearListeners:c}};function fs(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var z2e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},YG=Es({name:"chartLayout",initialState:z2e,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:H2e,setLayout:V2e,setChartSize:W2e,setScale:q2e}=YG.actions,K2e=YG.reducer;function P5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function I5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P5(Object(n),!0).forEach(function(r){G2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function G2e(e,t,n){return(t=Y2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y2e(e){var t=X2e(e,"string");return typeof t=="symbol"?t:t+""}function X2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qb=Math.PI/180,Q2e=e=>e*180/Math.PI,Yn=(e,t,n,r)=>({x:e+Math.cos(-qb*r)*n,y:t+Math.sin(-qb*r)*n}),XG=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},J2e=(e,t)=>{var{x:n,y:r}=e,{x:i,y:s}=t;return Math.sqrt((n-i)**2+(r-s)**2)},Z2e=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:s}=t,a=J2e({x:n,y:r},{x:i,y:s});if(a<=0)return{radius:a,angle:0};var o=(n-i)/a,c=Math.acos(o);return r>s&&(c=2*Math.PI-c),{radius:a,angle:Q2e(c),angleInRadian:c}},eCe=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:t-s*360,endAngle:n-s*360}},tCe=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),s=Math.floor(r/360),a=Math.min(i,s);return e+a*360},nCe=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:s}=Z2e({x:n,y:r},t),{innerRadius:a,outerRadius:o}=t;if(i<a||i>o||i===0)return null;var{startAngle:c,endAngle:u}=eCe(t),d=s,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?I5(I5({},t),{},{radius:i,angle:tCe(d,t)}):null};function QG(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function D5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ls(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D5(Object(n),!0).forEach(function(r){rCe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rCe(e,t,n){return(t=iCe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iCe(e){var t=sCe(e,"string");return typeof t=="symbol"?t:t+""}function sCe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mt(e,t,n){return tn(e)||tn(t)?n:fo(t)?Pc(e,t,n):typeof t=="function"?t(e):n}var aCe=(e,t,n,r,i)=>{var s,a=-1,o=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(o<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var c=0;c<o;c++){var u=c>0?n[c-1].coordinate:n[o-1].coordinate,d=n[c].coordinate,f=c>=o-1?n[0].coordinate:n[c+1].coordinate,h=void 0;if(Sr(d-u)!==Sr(f-d)){var p=[];if(Sr(f-d)===Sr(i[1]-i[0])){h=f;var m=d+i[1]-i[0];p[0]=Math.min(m,(m+u)/2),p[1]=Math.max(m,(m+u)/2)}else{h=u;var g=f+i[1]-i[0];p[0]=Math.min(d,(g+d)/2),p[1]=Math.max(d,(g+d)/2)}var v=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>v[0]&&e<=v[1]||e>=p[0]&&e<=p[1]){({index:a}=n[c]);break}}else{var y=Math.min(u,f),x=Math.max(u,f);if(e>(y+d)/2&&e<=(x+d)/2){({index:a}=n[c]);break}}}else if(t){for(var b=0;b<o;b++)if(b===0&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b>0&&b<o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b===o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2){({index:a}=t[b]);break}}return a},oCe=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:s,verticalAlign:a,layout:o}=t;if((o==="vertical"||o==="horizontal"&&a==="middle")&&s!=="center"&&De(e[s]))return Ls(Ls({},e),{},{[s]:e[s]+(r||0)});if((o==="horizontal"||o==="vertical"&&s==="center")&&a!=="middle"&&De(e[a]))return Ls(Ls({},e),{},{[a]:e[a]+(i||0)})}return e},bo=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",JG=(e,t,n,r)=>{if(r)return e.map(o=>o.coordinate);var i,s,a=e.map(o=>(o.coordinate===t&&(i=!0),o.coordinate===n&&(s=!0),o.coordinate));return i||a.push(t),s||a.push(n),a},ZG=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:s,scale:a,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:p}=e;if(!a)return null;var m=o==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,g=i==="category"&&a.bandwidth?a.bandwidth()/m:0;if(g=p==="angleAxis"&&s&&s.length>=2?Sr(s[0]-s[1])*2*g:g,f||h){var v=(f||h||[]).map((y,x)=>{var b=r?r.indexOf(y):y;return{coordinate:a(b)+g,value:y,offset:g,index:x}});return v.filter(y=>!qi(y.coordinate))}return c&&u?u.map((y,x)=>({coordinate:a(y)+g,value:y,index:x,offset:g})):a.ticks&&d!=null?a.ticks(d).map((y,x)=>({coordinate:a(y)+g,value:y,offset:g,index:x})):a.domain().map((y,x)=>({coordinate:a(y)+g,value:r?r[y]:y,index:x,offset:g}))},M5=1e-4,lCe=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-M5,s=Math.max(r[0],r[1])+M5,a=e(t[0]),o=e(t[n-1]);(a<i||a>s||o<i||o>s)&&e.domain([t[0],t[n-1]])}},cCe=(e,t)=>{if(!t||t.length!==2||!De(t[0])||!De(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!De(e[0])||e[0]<n)&&(i[0]=n),(!De(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},uCe=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0,a=0;a<t;++a){var o=qi(e[a][n][1])?e[a][n][0]:e[a][n][1];o>=0?(e[a][n][0]=i,e[a][n][1]=i+o,i=e[a][n][1]):(e[a][n][0]=s,e[a][n][1]=s+o,s=e[a][n][1])}},dCe=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0;s<t;++s){var a=qi(e[s][n][1])?e[s][n][0]:e[s][n][1];a>=0?(e[s][n][0]=i,e[s][n][1]=i+a,i=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},fCe={sign:uCe,expand:J_e,none:Sh,silhouette:Z_e,wiggle:eke,positive:dCe},hCe=(e,t,n)=>{var r=fCe[n],i=Q_e().keys(t).value((s,a)=>+Mt(s,a,0)).order(sT).offset(r);return i(e)};function eY(e){return e==null?void 0:String(e)}function Kb(e){var{axis:t,ticks:n,bandSize:r,entry:i,index:s,dataKey:a}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!tn(i[t.dataKey])){var o=jK(n,"value",i[t.dataKey]);if(o)return o.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var c=Mt(i,tn(a)?t.dataKey:a);return tn(c)?null:t.scale(c)}var R5=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:s,index:a}=e;if(t.type==="category")return n[a]?n[a].coordinate+r:null;var o=Mt(s,t.dataKey,t.scale.domain()[a]);return tn(o)?null:t.scale(o)-i/2+r},pCe=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},mCe=e=>{var t=e.flat(2).filter(De);return[Math.min(...t),Math.max(...t)]},gCe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],vCe=(e,t,n)=>{if(e!=null)return gCe(Object.keys(e).reduce((r,i)=>{var s=e[i],{stackedData:a}=s,o=a.reduce((c,u)=>{var d=QG(u,t,n),f=mCe(d);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},L5=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,F5=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,bd=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=YE(t,d=>d.coordinate),s=1/0,a=1,o=i.length;a<o;a++){var c=i[a],u=i[a-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function B5(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:s}=e;return Ls(Ls({},t),{},{dataKey:n,payload:r,value:i,name:s})}function Xc(e,t){if(e)return String(e);if(typeof t=="string")return t}function yCe(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var s=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return s?{x:e,y:t}:null}return r?nCe({x:e,y:t},r):null}var xCe=(e,t,n,r)=>{var i=t.find(u=>u&&u.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var s=i.coordinate,{radius:a}=r;return Ls(Ls(Ls({},r),Yn(r.cx,r.cy,a,s)),{},{angle:s,radius:a})}var o=i.coordinate,{angle:c}=r;return Ls(Ls(Ls({},r),Yn(r.cx,r.cy,o,c)),{},{angle:c,radius:o})}return{x:0,y:0}},bCe=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,gl=e=>e.layout.width,vl=e=>e.layout.height,wCe=e=>e.layout.scale,tY=e=>e.layout.margin,cI=ae(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),uI=ae(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),nY="data-recharts-item-index",rY="data-recharts-item-data-key",nS=60;function $5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Cl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$5(Object(n),!0).forEach(function(r){ECe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ECe(e,t,n){return(t=SCe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SCe(e){var t=NCe(e,"string");return typeof t=="symbol"?t:t+""}function NCe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _Ce=e=>e.brush.height,dr=ae([gl,vl,tY,_Ce,cI,uI,NG,Kke],(e,t,n,r,i,s,a,o)=>{var c=s.reduce((m,g)=>{var{orientation:v}=g;if(!g.mirror&&!g.hide){var y=typeof g.width=="number"?g.width:nS;return Cl(Cl({},m),{},{[v]:m[v]+y})}return m},{left:n.left||0,right:n.right||0}),u=i.reduce((m,g)=>{var{orientation:v}=g;return!g.mirror&&!g.hide?Cl(Cl({},m),{},{[v]:Pc(m,"".concat(v))+g.height}):m},{top:n.top||0,bottom:n.bottom||0}),d=Cl(Cl({},u),c),f=d.bottom;d.bottom+=r,d=oCe(d,a,o);var h=e-d.left-d.right,p=t-d.top-d.bottom;return Cl(Cl({brushBottom:f},d),{},{width:Math.max(h,0),height:Math.max(p,0)})}),kCe=ae(dr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),iY=ae(gl,vl,(e,t)=>({x:0,y:0,width:e,height:t})),CCe=w.createContext(null),ci=()=>w.useContext(CCe)!=null,rS=e=>e.brush,iS=ae([rS,dr,tY],(e,t,n)=>({height:e.height,x:De(e.x)?e.x:t.left,y:De(e.y)?e.y:t.top+t.height+t.brushBottom-((n==null?void 0:n.bottom)||0),width:De(e.width)?e.width:t.width})),dI=()=>{var e,t=ci(),n=We(kCe),r=We(iS),i=(e=We(rS))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},TCe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},sY=()=>{var e;return(e=We(dr))!==null&&e!==void 0?e:TCe},fI=()=>We(gl),hI=()=>We(vl),ACe={top:0,right:0,bottom:0,left:0},jCe=()=>{var e;return(e=We(t=>t.layout.margin))!==null&&e!==void 0?e:ACe},yt=e=>e.layout.layoutType,rv=()=>We(yt),OCe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},aY=Es({name:"legend",initialState:OCe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=Ko(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:U5,setLegendSettings:PCe,addLegendPayload:oY,removeLegendPayload:lY}=aY.actions,ICe=aY.reducer,DCe=["contextPayload"];function gT(){return gT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gT.apply(null,arguments)}function z5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z5(Object(n),!0).forEach(function(r){pI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pI(e,t,n){return(t=MCe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MCe(e){var t=RCe(e,"string");return typeof t=="symbol"?t:t+""}function RCe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LCe(e,t){if(e==null)return{};var n,r,i=FCe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function FCe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function BCe(e){return e.value}function $Ce(e){var{contextPayload:t}=e,n=LCe(e,DCe),r=fG(t,e.payloadUniqBy,BCe),i=kh(kh({},n),{},{payload:r});return w.isValidElement(e.content)?w.cloneElement(e.content,i):typeof e.content=="function"?w.createElement(e.content,i):w.createElement(KP,i)}function UCe(e,t,n,r,i,s){var{layout:a,align:o,verticalAlign:c}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(o==="center"&&a==="vertical"?u={left:((r||0)-s.width)/2}:u=o==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((i||0)-s.height)/2}:d=c==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),kh(kh({},u),d)}function zCe(e){var t=Cn();return w.useEffect(()=>{t(PCe(e))},[t,e]),null}function HCe(e){var t=Cn();return w.useEffect(()=>(t(U5(e)),()=>{t(U5({width:0,height:0}))}),[t,e]),null}function VCe(e){var t=Xke(),n=w_e(),r=jCe(),{width:i,height:s,wrapperStyle:a,portal:o}=e,[c,u]=_G([t]),d=fI(),f=hI(),h=d-(r.left||0)-(r.right||0),p=iv.getWidthOrHeight(e.layout,s,i,h),m=o?a:kh(kh({position:"absolute",width:(p==null?void 0:p.width)||i||"auto",height:(p==null?void 0:p.height)||s||"auto"},UCe(a,e,r,d,f,c)),a),g=o??n;if(g==null)return null;var v=w.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:u},w.createElement(zCe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),w.createElement(HCe,{width:c.width,height:c.height}),w.createElement($Ce,gT({},e,p,{margin:r,chartWidth:d,chartHeight:f,contextPayload:t})));return ml.createPortal(v,g)}class iv extends w.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&De(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return w.createElement(VCe,this.props)}}pI(iv,"displayName","Legend");pI(iv,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function vT(){return vT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vT.apply(null,arguments)}function H5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function U_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?H5(Object(n),!0).forEach(function(r){WCe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function WCe(e,t,n){return(t=qCe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qCe(e){var t=KCe(e,"string");return typeof t=="symbol"?t:t+""}function KCe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GCe(e){return Array.isArray(e)&&fo(e[0])&&fo(e[1])?e.join(" ~ "):e}var YCe=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:a,itemSorter:o,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,p=()=>{if(s&&s.length){var E={padding:0,margin:0},N=(o?YE(s,o):s).map((_,k)=>{if(_.type==="none")return null;var T=_.formatter||a||GCe,{value:A,name:j}=_,D=A,I=j;if(T){var M=T(A,j,_,k,s);if(Array.isArray(M))[D,I]=M;else if(M!=null)D=M;else return null}var L=U_({display:"block",paddingTop:4,paddingBottom:4,color:_.color||"#000"},r);return w.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(k),style:L},fo(I)?w.createElement("span",{className:"recharts-tooltip-item-name"},I):null,fo(I)?w.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,w.createElement("span",{className:"recharts-tooltip-item-value"},D),w.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return w.createElement("ul",{className:"recharts-tooltip-item-list",style:E},N)}return null},m=U_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),g=U_({margin:0},i),v=!tn(d),y=v?d:"",x=bt("recharts-default-tooltip",c),b=bt("recharts-tooltip-label",u);v&&f&&s!==void 0&&s!==null&&(y=f(d,s));var S=h?{role:"status","aria-live":"assertive"}:{};return w.createElement("div",vT({className:x,style:m},S),w.createElement("p",{className:b,style:g},w.isValidElement(y)?y:"".concat(y)),p())},Hp="recharts-tooltip-wrapper",XCe={visibility:"hidden"};function QCe(e){var{coordinate:t,translateX:n,translateY:r}=e;return bt(Hp,{["".concat(Hp,"-right")]:De(n)&&t&&De(t.x)&&n>=t.x,["".concat(Hp,"-left")]:De(n)&&t&&De(t.x)&&n<t.x,["".concat(Hp,"-bottom")]:De(r)&&t&&De(t.y)&&r>=t.y,["".concat(Hp,"-top")]:De(r)&&t&&De(t.y)&&r<t.y})}function V5(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:a,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=e;if(s&&De(s[r]))return s[r];var d=n[r]-o-(i>0?i:0),f=n[r]+i;if(t[r])return a[r]?d:f;var h=c[r];if(h==null)return 0;if(a[r]){var p=d,m=h;return p<m?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var g=f+o,v=h+u;return g>v?Math.max(d,h):Math.max(f,h)}function JCe(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function ZCe(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:a,useTranslate3d:o,viewBox:c}=e,u,d,f;return a.height>0&&a.width>0&&n?(d=V5({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:c,viewBoxDimension:c.width}),f=V5({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:c,viewBoxDimension:c.height}),u=JCe({translateX:d,translateY:f,useTranslate3d:o})):u=XCe,{cssProperties:u,cssClasses:QCe({translateX:d,translateY:f,coordinate:n})}}function W5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?W5(Object(n),!0).forEach(function(r){yT(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yT(e,t,n){return(t=eTe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eTe(e){var t=tTe(e,"string");return typeof t=="symbol"?t:t+""}function tTe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class nTe extends w.PureComponent{constructor(){super(...arguments),yT(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),yT(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:a,hasPayload:o,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:p,wrapperStyle:m,lastBoundingBox:g,innerRef:v,hasPortalFromProps:y}=this.props,{cssClasses:x,cssProperties:b}=ZCe({allowEscapeViewBox:n,coordinate:a,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:g.height,width:g.width},useTranslate3d:h,viewBox:p}),S=y?{}:gy(gy({transition:c&&t?"transform ".concat(r,"ms ").concat(i):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),E=gy(gy({},S),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},m);return w.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:x,style:E,ref:v},s)}}var rTe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Qc={isSsr:rTe()},cY=()=>We(e=>e.rootProps.accessibilityLayer);function qr(e){return Number.isFinite(e)}function Ch(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function xT(){return xT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xT.apply(null,arguments)}function q5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function K5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q5(Object(n),!0).forEach(function(r){iTe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function iTe(e,t,n){return(t=sTe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sTe(e){var t=aTe(e,"string");return typeof t=="symbol"?t:t+""}function aTe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var G5={curveBasisClosed:$_e,curveBasisOpen:U_e,curveBasis:B_e,curveBumpX:__e,curveBumpY:k_e,curveLinearClosed:z_e,curveLinear:UE,curveMonotoneX:H_e,curveMonotoneY:V_e,curveNatural:W_e,curveStep:q_e,curveStepAfter:G_e,curveStepBefore:K_e},vy=e=>qr(e.x)&&qr(e.y),Vp=e=>e.x,Wp=e=>e.y,oTe=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Z0(e));return(n==="curveMonotone"||n==="curveBump")&&t?G5["".concat(n).concat(t==="vertical"?"Y":"X")]:G5[n]||UE},lTe=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=e,a=oTe(t,i),o=s?n.filter(vy):n,c;if(Array.isArray(r)){var u=s?r.filter(f=>vy(f)):r,d=o.map((f,h)=>K5(K5({},f),{},{base:u[h]}));return i==="vertical"?c=dy().y(Wp).x1(Vp).x0(f=>f.base.x):c=dy().x(Vp).y1(Wp).y0(f=>f.base.y),c.defined(vy).curve(a),c(d)}return i==="vertical"&&De(r)?c=dy().y(Wp).x1(Vp).x0(r):De(r)?c=dy().x(Vp).y1(Wp).y0(r):c=BK().x(Vp).y(Wp),c.defined(vy).curve(a),c(o)},Xf=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var s=n&&n.length?lTe(e):r;return w.createElement("path",xT({},Da(e),$P(e),{className:bt("recharts-curve",t),d:s===null?void 0:s,ref:i}))},cTe=["x","y","top","left","width","height","className"];function bT(){return bT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bT.apply(null,arguments)}function Y5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function uTe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Y5(Object(n),!0).forEach(function(r){dTe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dTe(e,t,n){return(t=fTe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fTe(e){var t=hTe(e,"string");return typeof t=="symbol"?t:t+""}function hTe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pTe(e,t){if(e==null)return{};var n,r,i=mTe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function mTe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var gTe=(e,t,n,r,i,s)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(s,",").concat(t,"h").concat(n),vTe=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:s=0,height:a=0,className:o}=e,c=pTe(e,cTe),u=uTe({x:t,y:n,top:r,left:i,width:s,height:a},c);return!De(t)||!De(n)||!De(s)||!De(a)||!De(r)||!De(i)?null:w.createElement("path",bT({},Zt(u,!0),{className:bt("recharts-cross",o),d:gTe(t,n,s,a,r,i)}))};function yTe(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function X5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xTe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?X5(Object(n),!0).forEach(function(r){bTe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bTe(e,t,n){return(t=wTe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wTe(e){var t=ETe(e,"string");return typeof t=="symbol"?t:t+""}function ETe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ti(e,t){var n=xTe({},e),r=t,i=Object.keys(t),s=i.reduce((a,o)=>(a[o]===void 0&&r[o]!==void 0&&(a[o]=r[o]),a),n);return s}var uY={},dY={},fY={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(!n||typeof n!="object")return!1;const r=Object.getPrototypeOf(n);return r===null||r===Object.prototype||Object.getPrototypeOf(r)===null?Object.prototype.toString.call(n)==="[object Object]":!1}e.isPlainObject=t})(fY);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fY,n=ZP,r=WE,i=qE,s=VE;function a(u,d,f){return o(u,d,void 0,void 0,void 0,void 0,f)}function o(u,d,f,h,p,m,g){const v=g(u,d,f,h,p,m);if(v!==void 0)return v;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,m,g)}return c(u,d,m,g)}function c(u,d,f,h){if(Object.is(u,d))return!0;let p=r.getTag(u),m=r.getTag(d);if(p===i.argumentsTag&&(p=i.objectTag),m===i.argumentsTag&&(m=i.objectTag),p!==m)return!1;switch(p){case i.stringTag:return u.toString()===d.toString();case i.numberTag:{const y=u.valueOf(),x=d.valueOf();return s.eq(y,x)}case i.booleanTag:case i.dateTag:case i.symbolTag:return Object.is(u.valueOf(),d.valueOf());case i.regexpTag:return u.source===d.source&&u.flags===d.flags;case i.functionTag:return u===d}f=f??new Map;const g=f.get(u),v=f.get(d);if(g!=null&&v!=null)return g===d;f.set(u,d),f.set(d,u);try{switch(p){case i.mapTag:{if(u.size!==d.size)return!1;for(const[y,x]of u.entries())if(!d.has(y)||!o(x,d.get(y),y,u,d,f,h))return!1;return!0}case i.setTag:{if(u.size!==d.size)return!1;const y=Array.from(u.values()),x=Array.from(d.values());for(let b=0;b<y.length;b++){const S=y[b],E=x.findIndex(N=>o(S,N,void 0,u,d,f,h));if(E===-1)return!1;x.splice(E,1)}return!0}case i.arrayTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:case i.bigUint64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.bigInt64ArrayTag:case i.float32ArrayTag:case i.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let y=0;y<u.length;y++)if(!o(u[y],d[y],y,u,d,f,h))return!1;return!0}case i.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case i.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case i.errorTag:return u.name===d.name&&u.message===d.message;case i.objectTag:{if(!(c(u.constructor,d.constructor,f,h)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const x=[...Object.keys(u),...n.getSymbols(u)],b=[...Object.keys(d),...n.getSymbols(d)];if(x.length!==b.length)return!1;for(let S=0;S<x.length;S++){const E=x[S],N=u[E];if(!Object.hasOwn(d,E))return!1;const _=d[E];if(!o(N,_,E,u,d,f,h))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=a})(dY);var hY={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t})(hY);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dY,n=hY;function r(i,s){return t.isEqualWith(i,s,n.noop)}e.isEqual=r})(uY);var STe=uY.isEqual;const NTe=oi(STe);var Gb=1e-4,pY=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],mY=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),Q5=(e,t)=>n=>{var r=pY(e,t);return mY(r,n)},_Te=(e,t)=>n=>{var r=pY(e,t),i=[...r.map((s,a)=>s*a).slice(1),0];return mY(i,n)},J5=function(){for(var t,n,r,i,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];if(a.length===1)switch(a[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var c=a[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,r,n,i]=c[1].split(")")[0].split(",").map(m=>parseFloat(m)))}}else a.length===4&&([t,r,n,i]=a);var u=Q5(t,n),d=Q5(r,i),f=_Te(t,n),h=m=>m>1?1:m<0?0:m,p=m=>{for(var g=m>1?1:m,v=g,y=0;y<8;++y){var x=u(v)-g,b=f(v);if(Math.abs(x-g)<Gb||b<Gb)return d(v);v=h(v-x/b)}return d(v)};return p.isStepper=!1,p},kTe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,s=(a,o,c)=>{var u=-(a-o)*n,d=c*r,f=c+(u-d)*i/1e3,h=c*i/1e3+a;return Math.abs(h-o)<Gb&&Math.abs(f)<Gb?[o,0]:[h,f]};return s.isStepper=!0,s.dt=i,s},gY=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return J5(e);case"spring":return kTe();default:if(e.split("(")[0]==="cubic-bezier")return J5(e)}return typeof e=="function"?e:null};function Z5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function eF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z5(Object(n),!0).forEach(function(r){CTe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function CTe(e,t,n){return(t=TTe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TTe(e){var t=ATe(e,"string");return typeof t=="symbol"?t:t+""}function ATe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jTe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),OTe=(e,t,n)=>e.map(r=>"".concat(jTe(r)," ").concat(t,"ms ").concat(n)).join(","),PTe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),Gg=(e,t)=>Object.keys(t).reduce((n,r)=>eF(eF({},n),{},{[r]:e(r,t[r])}),{});function tF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Br(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tF(Object(n),!0).forEach(function(r){ITe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ITe(e,t,n){return(t=DTe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DTe(e){var t=MTe(e,"string");return typeof t=="symbol"?t:t+""}function MTe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yb=(e,t,n)=>e+(t-e)*n,wT=e=>{var{from:t,to:n}=e;return t!==n},vY=(e,t,n)=>{var r=Gg((i,s)=>{if(wT(s)){var[a,o]=e(s.from,s.to,s.velocity);return Br(Br({},s),{},{from:a,velocity:o})}return s},t);return n<1?Gg((i,s)=>wT(s)?Br(Br({},s),{},{velocity:Yb(s.velocity,r[i].velocity,n),from:Yb(s.from,r[i].from,n)}):s,t):vY(e,r,n-1)};function RTe(e,t,n,r,i,s){var a,o=r.reduce((h,p)=>Br(Br({},h),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),c=()=>Gg((h,p)=>p.from,o),u=()=>!Object.values(o).filter(wT).length,d=null,f=h=>{a||(a=h);var p=h-a,m=p/n.dt;o=vY(n,o,m),i(Br(Br(Br({},e),t),c())),a=h,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{d()})}function LTe(e,t,n,r,i,s,a){var o=null,c=i.reduce((f,h)=>Br(Br({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/r,p=Gg((g,v)=>Yb(...v,n(h)),c);if(s(Br(Br(Br({},e),t),p)),h<1)o=a.setTimeout(d);else{var m=Gg((g,v)=>Yb(...v,n(1)),c);s(Br(Br(Br({},e),t),m))}};return()=>(o=a.setTimeout(d),()=>{o()})}const yY=(e,t,n,r,i,s)=>{var a=PTe(e,t);return n.isStepper===!0?RTe(e,t,n,a,i,s):LTe(e,t,n,r,a,i,s)};function FTe(e){var t,n=()=>null,r=!1,i=null,s=a=>{if(!r){if(Array.isArray(a)){if(!a.length)return;var o=a,[c,...u]=o;if(typeof c=="number"){i=e.setTimeout(s.bind(null,u),c);return}s(c),i=e.setTimeout(s.bind(null,u));return}typeof a=="string"&&(t=a,n(t)),typeof a=="object"&&(t=a,n(t)),typeof a=="function"&&a()}};return{stop:()=>{r=!0},start:a=>{r=!1,i&&(i(),i=null),s(a)},subscribe:a=>(n=a,()=>{n=()=>null}),getTimeoutController:()=>e}}class BTe{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=a=>{a-r>=n?t(a):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{cancelAnimationFrame(i)}}}function $Te(){return FTe(new BTe)}var UTe=w.createContext($Te);function xY(e,t){var n=w.useContext(UTe);return w.useMemo(()=>t??n(e),[e,t,n])}var zTe=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function ET(){return ET=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ET.apply(null,arguments)}function HTe(e,t){if(e==null)return{};var n,r,i=VTe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function VTe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function nF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nF(Object(n),!0).forEach(function(r){Lu(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lu(e,t,n){return(t=WTe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WTe(e){var t=qTe(e,"string");return typeof t=="symbol"?t:t+""}function qTe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class mI extends w.PureComponent{constructor(t,n){super(t,n),Lu(this,"mounted",!1),Lu(this,"manager",void 0),Lu(this,"stopJSAnimation",null),Lu(this,"unSubscribe",null);var{isActive:r,attributeName:i,from:s,to:a,children:o,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!r||c<=0){this.state={style:{}},typeof o=="function"&&(this.state={style:a});return}if(s){if(typeof o=="function"){this.state={style:s};return}this.state={style:i?{[i]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:n}=this.props;this.mounted=!0,!(!t||!n)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:n,canBegin:r,attributeName:i,shouldReAnimate:s,to:a,from:o}=this.props,{style:c}=this.state;if(r){if(!n){var u={style:i?{[i]:a}:a};this.state&&c&&(i&&c[i]!==a||!i&&c!==a)&&this.setState(u);return}if(!(NTe(t.to,a)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||s?o:t.to;if(this.state&&c){var h={style:i?{[i]:f}:f};(i&&c[i]!==f||!i&&c!==f)&&this.setState(h)}this.runAnimation(Tl(Tl({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:n,to:r,duration:i,easing:s,begin:a,onAnimationEnd:o,onAnimationStart:c}=t,u=yY(n,r,gY(s),i,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,a,d,i,o])}runAnimation(t){var{begin:n,duration:r,attributeName:i,to:s,easing:a,onAnimationStart:o,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof a=="function"||typeof u=="function"||a==="spring"){this.runJSAnimation(t);return}var d=i?{[i]:s}:s,f=OTe(Object.keys(d),r,a);this.manager.start([o,n,Tl(Tl({},d),{},{transition:f}),r,c])}render(){var t=this.props,{children:n,begin:r,duration:i,attributeName:s,easing:a,isActive:o,from:c,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:h,onAnimationReStart:p,animationManager:m}=t,g=HTe(t,zTe),v=w.Children.count(n),y=this.state.style;if(typeof n=="function")return n(y);if(!o||v===0||i<=0)return n;var x=b=>{var{style:S={},className:E}=b.props,N=w.cloneElement(b,Tl(Tl({},g),{},{style:Tl(Tl({},S),y),className:E}));return N};return v===1?x(w.Children.only(n)):w.createElement("div",null,w.Children.map(n,b=>x(b)))}}Lu(mI,"displayName","Animate");Lu(mI,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function Xb(e){var t,n=xY((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return w.createElement(mI,ET({},e,{animationManager:n}))}function Qb(){return Qb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qb.apply(null,arguments)}var rF=(e,t,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),a=r>=0?1:-1,o=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0,u;if(s>0&&i instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=i[f]>s?s:i[f];u="M".concat(e,",").concat(t+a*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+o*d[0],",").concat(t)),u+="L ".concat(e+n-o*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+n,",").concat(t+a*d[1])),u+="L ".concat(e+n,",").concat(t+r-a*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+n-o*d[2],",").concat(t+r)),u+="L ".concat(e+o*d[3],",").concat(t+r),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+r-a*d[3])),u+="Z"}else if(s>0&&i===+i&&i>0){var p=Math.min(s,i);u="M ".concat(e,",").concat(t+a*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+o*p,",").concat(t,`
            L `).concat(e+n-o*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+n,",").concat(t+a*p,`
            L `).concat(e+n,",").concat(t+r-a*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+n-o*p,",").concat(t+r,`
            L `).concat(e+o*p,",").concat(t+r,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e,",").concat(t+r-a*p," Z")}else u="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return u},KTe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},bY=e=>{var t=Ti(e,KTe),n=w.useRef(null),[r,i]=w.useState(-1);w.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var y=n.current.getTotalLength();y&&i(y)}catch{}},[]);var{x:s,y:a,width:o,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isAnimationActive:m,isUpdateAnimationActive:g}=t;if(s!==+s||a!==+a||o!==+o||c!==+c||o===0||c===0)return null;var v=bt("recharts-rectangle",d);return g?w.createElement(Xb,{canBegin:r>0,from:{width:o,height:c,x:s,y:a},to:{width:o,height:c,x:s,y:a},duration:h,animationEasing:f,isActive:g},y=>{var{width:x,height:b,x:S,y:E}=y;return w.createElement(Xb,{canBegin:r>0,from:"0px ".concat(r===-1?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,isActive:m,easing:f},w.createElement("path",Qb({},Zt(t,!0),{className:v,d:rF(S,E,x,b,u),ref:n})))}):w.createElement("path",Qb({},Zt(t,!0),{className:v,d:rF(s,a,o,c,u)}))};function wY(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:s}=e,a=Yn(t,n,r,i),o=Yn(t,n,r,s);return{points:[a,o],cx:t,cy:n,radius:r,startAngle:i,endAngle:s}}function ST(){return ST=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ST.apply(null,arguments)}var GTe=(e,t)=>{var n=Sr(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},yy=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:s,isExternal:a,cornerRadius:o,cornerIsExternal:c}=e,u=o*(a?1:-1)+r,d=Math.asin(o/u)/qb,f=c?i:i+s*d,h=Yn(t,n,u,f),p=Yn(t,n,r,f),m=c?i-s*d:i,g=Yn(t,n,u*Math.cos(d*qb),m);return{center:h,circleTangency:p,lineTangency:g,theta:d}},EY=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:a}=e,o=GTe(s,a),c=s+o,u=Yn(t,n,i,s),d=Yn(t,n,i,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(s>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(r>0){var h=Yn(t,n,r,s),p=Yn(t,n,r,c);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(s<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(n," Z");return f},YTe=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:o,startAngle:c,endAngle:u}=e,d=Sr(u-c),{circleTangency:f,lineTangency:h,theta:p}=yy({cx:t,cy:n,radius:i,angle:c,sign:d,cornerRadius:s,cornerIsExternal:o}),{circleTangency:m,lineTangency:g,theta:v}=yy({cx:t,cy:n,radius:i,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:o}),y=o?Math.abs(c-u):Math.abs(c-u)-p-v;if(y<0)return a?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):EY({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:c,endAngle:u});var x="M ".concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
  `);if(r>0){var{circleTangency:b,lineTangency:S,theta:E}=yy({cx:t,cy:n,radius:r,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:N,lineTangency:_,theta:k}=yy({cx:t,cy:n,radius:r,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),T=o?Math.abs(c-u):Math.abs(c-u)-E-k;if(T<0&&s===0)return"".concat(x,"L").concat(t,",").concat(n,"Z");x+="L".concat(_.x,",").concat(_.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(T>180),",").concat(+(d>0),",").concat(b.x,",").concat(b.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(S.x,",").concat(S.y,"Z")}else x+="L".concat(t,",").concat(n,"Z");return x},XTe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},SY=e=>{var t=Ti(e,XTe),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(s<i||u===d)return null;var h=bt("recharts-sector",f),p=s-i,m=wi(a,p,0,!0),g;return m>0&&Math.abs(u-d)<360?g=YTe({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(m,p/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d}):g=EY({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:u,endAngle:d}),w.createElement("path",ST({},Zt(t,!0),{className:h,d:g}))};function QTe(e,t,n){var r,i,s,a;if(e==="horizontal")r=t.x,s=r,i=n.top,a=n.top+n.height;else if(e==="vertical")i=t.y,a=i,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,h=Yn(o,c,u,f),p=Yn(o,c,d,f);r=h.x,i=h.y,s=p.x,a=p.y}else return wY(t);return[{x:r,y:i},{x:s,y:a}]}var NY={},_Y={},kY={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nI;function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(kY);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kY;function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(_Y);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rI,n=_Y;function r(i,s,a){a&&typeof a!="number"&&t.isIterateeCall(i,s,a)&&(s=a=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),a=a===void 0?i<s?1:-1:n.toFinite(a);const o=Math.max(Math.ceil((s-i)/(a||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=i,i+=a;return c}e.range=r})(NY);var JTe=NY.range;const CY=oi(JTe);function xc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ZTe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function gI(e){let t,n,r;e.length!==2?(t=xc,n=(o,c)=>xc(e(o),c),r=(o,c)=>e(o)-c):(t=e===xc||e===ZTe?e:eAe,n=e,r=e);function i(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;n(o[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;n(o[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function a(o,c,u=0,d=o.length){const f=i(o,c,u,d-1);return f>u&&r(o[f-1],c)>-r(o[f],c)?f-1:f}return{left:i,center:a,right:s}}function eAe(){return 0}function TY(e){return e===null?NaN:+e}function*tAe(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const nAe=gI(xc),sv=nAe.right;gI(TY).center;class iF extends Map{constructor(t,n=sAe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(sF(this,t))}has(t){return super.has(sF(this,t))}set(t,n){return super.set(rAe(this,t),n)}delete(t){return super.delete(iAe(this,t))}}function sF({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function rAe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function iAe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function sAe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function aAe(e=xc){if(e===xc)return AY;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function AY(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const oAe=Math.sqrt(50),lAe=Math.sqrt(10),cAe=Math.sqrt(2);function Jb(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=oAe?10:s>=lAe?5:s>=cAe?2:1;let o,c,u;return i<0?(u=Math.pow(10,-i)/a,o=Math.round(e*u),c=Math.round(t*u),o/u<e&&++o,c/u>t&&--c,u=-u):(u=Math.pow(10,i)*a,o=Math.round(e/u),c=Math.round(t/u),o*u<e&&++o,c*u>t&&--c),c<o&&.5<=n&&n<2?Jb(e,t,n*2):[o,c,u]}function NT(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,a]=r?Jb(t,e,n):Jb(e,t,n);if(!(s>=i))return[];const o=s-i+1,c=new Array(o);if(r)if(a<0)for(let u=0;u<o;++u)c[u]=(s-u)/-a;else for(let u=0;u<o;++u)c[u]=(s-u)*a;else if(a<0)for(let u=0;u<o;++u)c[u]=(i+u)/-a;else for(let u=0;u<o;++u)c[u]=(i+u)*a;return c}function _T(e,t,n){return t=+t,e=+e,n=+n,Jb(e,t,n)[2]}function kT(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?_T(t,e,n):_T(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function aF(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function oF(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function jY(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?AY:aAe(i);r>n;){if(r-n>600){const c=r-n+1,u=t-n+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),p=Math.max(n,Math.floor(t-u*f/c+h)),m=Math.min(r,Math.floor(t+(c-u)*f/c+h));jY(e,t,p,m,i)}const s=e[t];let a=n,o=r;for(qp(e,n,t),i(e[r],s)>0&&qp(e,n,r);a<o;){for(qp(e,a,o),++a,--o;i(e[a],s)<0;)++a;for(;i(e[o],s)>0;)--o}i(e[n],s)===0?qp(e,n,o):(++o,qp(e,o,r)),o<=t&&(n=o+1),t<=o&&(r=o-1)}return e}function qp(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function uAe(e,t,n){if(e=Float64Array.from(tAe(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return oF(e);if(t>=1)return aF(e);var r,i=(r-1)*t,s=Math.floor(i),a=aF(jY(e,s).subarray(0,s+1)),o=oF(e.subarray(s+1));return a+(o-a)*(i-s)}}function dAe(e,t,n=TY){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),a=+n(e[s],s,e),o=+n(e[s+1],s+1,e);return a+(o-a)*(i-s)}}function fAe(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function ia(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function yl(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const CT=Symbol("implicit");function vI(){var e=new iF,t=[],n=[],r=CT;function i(s){let a=e.get(s);if(a===void 0){if(r!==CT)return r;e.set(s,a=t.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new iF;for(const a of s)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return vI(t,n).unknown(r)},ia.apply(i,arguments),i}function yI(){var e=vI().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,a,o=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,p=i<r,m=p?i:r,g=p?r:i;s=(g-m)/Math.max(1,h-c+u*2),o&&(s=Math.floor(s)),m+=(g-m-s*(h-c))*d,a=s*(1-c),o&&(m=Math.round(m),a=Math.round(a));var v=fAe(h).map(function(y){return m+s*y});return n(p?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,o=!0,f()},e.bandwidth=function(){return a},e.step=function(){return s},e.round=function(h){return arguments.length?(o=!!h,f()):o},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return yI(t(),[r,i]).round(o).paddingInner(c).paddingOuter(u).align(d)},ia.apply(f(),arguments)}function OY(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return OY(t())},e}function hAe(){return OY(yI.apply(null,arguments).paddingInner(1))}function xI(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function PY(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function av(){}var Yg=.7,Zb=1/Yg,Qf="\\s*([+-]?\\d+)\\s*",Xg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",oo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pAe=/^#([0-9a-f]{3,8})$/,mAe=new RegExp(`^rgb\\(${Qf},${Qf},${Qf}\\)$`),gAe=new RegExp(`^rgb\\(${oo},${oo},${oo}\\)$`),vAe=new RegExp(`^rgba\\(${Qf},${Qf},${Qf},${Xg}\\)$`),yAe=new RegExp(`^rgba\\(${oo},${oo},${oo},${Xg}\\)$`),xAe=new RegExp(`^hsl\\(${Xg},${oo},${oo}\\)$`),bAe=new RegExp(`^hsla\\(${Xg},${oo},${oo},${Xg}\\)$`),lF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xI(av,Qg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:cF,formatHex:cF,formatHex8:wAe,formatHsl:EAe,formatRgb:uF,toString:uF});function cF(){return this.rgb().formatHex()}function wAe(){return this.rgb().formatHex8()}function EAe(){return IY(this).formatHsl()}function uF(){return this.rgb().formatRgb()}function Qg(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=pAe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?dF(t):n===3?new Fi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?xy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?xy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=mAe.exec(e))?new Fi(t[1],t[2],t[3],1):(t=gAe.exec(e))?new Fi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=vAe.exec(e))?xy(t[1],t[2],t[3],t[4]):(t=yAe.exec(e))?xy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=xAe.exec(e))?pF(t[1],t[2]/100,t[3]/100,1):(t=bAe.exec(e))?pF(t[1],t[2]/100,t[3]/100,t[4]):lF.hasOwnProperty(e)?dF(lF[e]):e==="transparent"?new Fi(NaN,NaN,NaN,0):null}function dF(e){return new Fi(e>>16&255,e>>8&255,e&255,1)}function xy(e,t,n,r){return r<=0&&(e=t=n=NaN),new Fi(e,t,n,r)}function SAe(e){return e instanceof av||(e=Qg(e)),e?(e=e.rgb(),new Fi(e.r,e.g,e.b,e.opacity)):new Fi}function TT(e,t,n,r){return arguments.length===1?SAe(e):new Fi(e,t,n,r??1)}function Fi(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}xI(Fi,TT,PY(av,{brighter(e){return e=e==null?Zb:Math.pow(Zb,e),new Fi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Yg:Math.pow(Yg,e),new Fi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fi(td(this.r),td(this.g),td(this.b),e1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fF,formatHex:fF,formatHex8:NAe,formatRgb:hF,toString:hF}));function fF(){return`#${Fu(this.r)}${Fu(this.g)}${Fu(this.b)}`}function NAe(){return`#${Fu(this.r)}${Fu(this.g)}${Fu(this.b)}${Fu((isNaN(this.opacity)?1:this.opacity)*255)}`}function hF(){const e=e1(this.opacity);return`${e===1?"rgb(":"rgba("}${td(this.r)}, ${td(this.g)}, ${td(this.b)}${e===1?")":`, ${e})`}`}function e1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function td(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Fu(e){return e=td(e),(e<16?"0":"")+e.toString(16)}function pF(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ya(e,t,n,r)}function IY(e){if(e instanceof ya)return new ya(e.h,e.s,e.l,e.opacity);if(e instanceof av||(e=Qg(e)),!e)return new ya;if(e instanceof ya)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),a=NaN,o=s-i,c=(s+i)/2;return o?(t===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-t)/o+2:a=(t-n)/o+4,o/=c<.5?s+i:2-s-i,a*=60):o=c>0&&c<1?0:a,new ya(a,o,c,e.opacity)}function _Ae(e,t,n,r){return arguments.length===1?IY(e):new ya(e,t,n,r??1)}function ya(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}xI(ya,_Ae,PY(av,{brighter(e){return e=e==null?Zb:Math.pow(Zb,e),new ya(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Yg:Math.pow(Yg,e),new ya(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Fi(z_(e>=240?e-240:e+120,i,r),z_(e,i,r),z_(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ya(mF(this.h),by(this.s),by(this.l),e1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=e1(this.opacity);return`${e===1?"hsl(":"hsla("}${mF(this.h)}, ${by(this.s)*100}%, ${by(this.l)*100}%${e===1?")":`, ${e})`}`}}));function mF(e){return e=(e||0)%360,e<0?e+360:e}function by(e){return Math.max(0,Math.min(1,e||0))}function z_(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const bI=e=>()=>e;function kAe(e,t){return function(n){return e+n*t}}function CAe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function TAe(e){return(e=+e)==1?DY:function(t,n){return n-t?CAe(t,n,e):bI(isNaN(t)?n:t)}}function DY(e,t){var n=t-e;return n?kAe(e,n):bI(isNaN(e)?t:e)}const gF=function e(t){var n=TAe(t);function r(i,s){var a=n((i=TT(i)).r,(s=TT(s)).r),o=n(i.g,s.g),c=n(i.b,s.b),u=DY(i.opacity,s.opacity);return function(d){return i.r=a(d),i.g=o(d),i.b=c(d),i.opacity=u(d),i+""}}return r.gamma=e,r}(1);function AAe(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function jAe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function OAe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=op(e[a],t[a]);for(;a<n;++a)s[a]=t[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function PAe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function t1(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function IAe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=op(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var AT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,H_=new RegExp(AT.source,"g");function DAe(e){return function(){return e}}function MAe(e){return function(t){return e(t)+""}}function RAe(e,t){var n=AT.lastIndex=H_.lastIndex=0,r,i,s,a=-1,o=[],c=[];for(e=e+"",t=t+"";(r=AT.exec(e))&&(i=H_.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,c.push({i:a,x:t1(r,i)})),n=H_.lastIndex;return n<t.length&&(s=t.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?c[0]?MAe(c[0].x):DAe(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)o[(f=c[d]).i]=f.x(u);return o.join("")})}function op(e,t){var n=typeof t,r;return t==null||n==="boolean"?bI(t):(n==="number"?t1:n==="string"?(r=Qg(t))?(t=r,gF):RAe:t instanceof Qg?gF:t instanceof Date?PAe:jAe(t)?AAe:Array.isArray(t)?OAe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?IAe:t1)(e,t)}function wI(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function LAe(e,t){t===void 0&&(t=e,e=op);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(a){var o=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[o](a-o)}}function FAe(e){return function(){return e}}function n1(e){return+e}var vF=[0,1];function xi(e){return e}function jT(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:FAe(isNaN(t)?NaN:.5)}function BAe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function $Ae(e,t,n){var r=e[0],i=e[1],s=t[0],a=t[1];return i<r?(r=jT(i,r),s=n(a,s)):(r=jT(r,i),s=n(s,a)),function(o){return s(r(o))}}function UAe(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=jT(e[a],e[a+1]),s[a]=n(t[a],t[a+1]);return function(o){var c=sv(e,o,1,r)-1;return s[c](i[c](o))}}function ov(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function sS(){var e=vF,t=vF,n=op,r,i,s,a=xi,o,c,u;function d(){var h=Math.min(e.length,t.length);return a!==xi&&(a=BAe(e[0],e[h-1])),o=h>2?UAe:$Ae,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=o(e.map(r),t,n)))(r(a(h)))}return f.invert=function(h){return a(i((u||(u=o(t,e.map(r),t1)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,n1),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=wI,d()},f.clamp=function(h){return arguments.length?(a=h?!0:xi,d()):a!==xi},f.interpolate=function(h){return arguments.length?(n=h,d()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,p){return r=h,i=p,d()}}function EI(){return sS()(xi,xi)}function zAe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function r1(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Th(e){return e=r1(Math.abs(e)),e?e[1]:NaN}function HAe(e,t){return function(n,r){for(var i=n.length,s=[],a=0,o=e[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),s.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=e[a=(a+1)%e.length];return s.reverse().join(t)}}function VAe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var WAe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Jg(e){if(!(t=WAe.exec(e)))throw new Error("invalid format: "+e);var t;return new SI({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Jg.prototype=SI.prototype;function SI(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}SI.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function qAe(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var MY;function KAe(e,t){var n=r1(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(MY=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+r1(e,Math.max(0,t+s-1))[0]}function yF(e,t){var n=r1(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const xF={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:zAe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>yF(e*100,t),r:yF,s:KAe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function bF(e){return e}var wF=Array.prototype.map,EF=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function GAe(e){var t=e.grouping===void 0||e.thousands===void 0?bF:HAe(wF.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?bF:VAe(wF.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Jg(f);var h=f.fill,p=f.align,m=f.sign,g=f.symbol,v=f.zero,y=f.width,x=f.comma,b=f.precision,S=f.trim,E=f.type;E==="n"?(x=!0,E="g"):xF[E]||(b===void 0&&(b=12),S=!0,E="g"),(v||h==="0"&&p==="=")&&(v=!0,h="0",p="=");var N=g==="$"?n:g==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",_=g==="$"?r:/[%p]/.test(E)?a:"",k=xF[E],T=/[defgprs%]/.test(E);b=b===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function A(j){var D=N,I=_,M,L,P;if(E==="c")I=k(j)+I,j="";else{j=+j;var B=j<0||1/j<0;if(j=isNaN(j)?c:k(Math.abs(j),b),S&&(j=qAe(j)),B&&+j==0&&m!=="+"&&(B=!1),D=(B?m==="("?m:o:m==="-"||m==="("?"":m)+D,I=(E==="s"?EF[8+MY/3]:"")+I+(B&&m==="("?")":""),T){for(M=-1,L=j.length;++M<L;)if(P=j.charCodeAt(M),48>P||P>57){I=(P===46?i+j.slice(M+1):j.slice(M))+I,j=j.slice(0,M);break}}}x&&!v&&(j=t(j,1/0));var R=D.length+j.length+I.length,F=R<y?new Array(y-R+1).join(h):"";switch(x&&v&&(j=t(F+j,F.length?y-I.length:1/0),F=""),p){case"<":j=D+j+I+F;break;case"=":j=D+F+j+I;break;case"^":j=F.slice(0,R=F.length>>1)+D+j+I+F.slice(R);break;default:j=F+D+j+I;break}return s(j)}return A.toString=function(){return f+""},A}function d(f,h){var p=u((f=Jg(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(Th(h)/3)))*3,g=Math.pow(10,-m),v=EF[8+m/3];return function(y){return p(g*y)+v}}return{format:u,formatPrefix:d}}var wy,NI,RY;YAe({thousands:",",grouping:[3],currency:["$",""]});function YAe(e){return wy=GAe(e),NI=wy.format,RY=wy.formatPrefix,wy}function XAe(e){return Math.max(0,-Th(Math.abs(e)))}function QAe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Th(t)/3)))*3-Th(Math.abs(e)))}function JAe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Th(t)-Th(e))+1}function LY(e,t,n,r){var i=kT(e,t,n),s;switch(r=Jg(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=QAe(i,a))&&(r.precision=s),RY(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=JAe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=XAe(i))&&(r.precision=s-(r.type==="%")*2);break}}return NI(r)}function Jc(e){var t=e.domain;return e.ticks=function(n){var r=t();return NT(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return LY(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,a=r[i],o=r[s],c,u,d=10;for(o<a&&(u=a,a=o,o=u,u=i,i=s,s=u);d-- >0;){if(u=_T(a,o,n),u===c)return r[i]=a,r[s]=o,t(r);if(u>0)a=Math.floor(a/u)*u,o=Math.ceil(o/u)*u;else if(u<0)a=Math.ceil(a*u)/u,o=Math.floor(o*u)/u;else break;c=u}return e},e}function FY(){var e=EI();return e.copy=function(){return ov(e,FY())},ia.apply(e,arguments),Jc(e)}function BY(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,n1),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return BY(e).unknown(t)},e=arguments.length?Array.from(e,n1):[0,1],Jc(n)}function $Y(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),e[n]=t.floor(i),e[r]=t.ceil(s),e}function SF(e){return Math.log(e)}function NF(e){return Math.exp(e)}function ZAe(e){return-Math.log(-e)}function eje(e){return-Math.exp(-e)}function tje(e){return isFinite(e)?+("1e"+e):e<0?0:e}function nje(e){return e===10?tje:e===Math.E?Math.exp:t=>Math.pow(e,t)}function rje(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function _F(e){return(t,n)=>-e(-t,n)}function _I(e){const t=e(SF,NF),n=t.domain;let r=10,i,s;function a(){return i=rje(r),s=nje(r),n()[0]<0?(i=_F(i),s=_F(s),e(ZAe,eje)):e(SF,NF),t}return t.base=function(o){return arguments.length?(r=+o,a()):r},t.domain=function(o){return arguments.length?(n(o),a()):n()},t.ticks=o=>{const c=n();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=i(u),p=i(d),m,g;const v=o==null?10:+o;let y=[];if(!(r%1)&&p-h<v){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(m=1;m<r;++m)if(g=h<0?m/s(-h):m*s(h),!(g<u)){if(g>d)break;y.push(g)}}else for(;h<=p;++h)for(m=r-1;m>=1;--m)if(g=h>0?m/s(-h):m*s(h),!(g<u)){if(g>d)break;y.push(g)}y.length*2<v&&(y=NT(u,d,v))}else y=NT(h,p,Math.min(p-h,v)).map(s);return f?y.reverse():y},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Jg(c)).precision==null&&(c.trim=!0),c=NI(c)),o===1/0)return c;const u=Math.max(1,r*o/t.ticks().length);return d=>{let f=d/s(Math.round(i(d)));return f*r<r-.5&&(f*=r),f<=u?c(d):""}},t.nice=()=>n($Y(n(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),t}function UY(){const e=_I(sS()).domain([1,10]);return e.copy=()=>ov(e,UY()).base(e.base()),ia.apply(e,arguments),e}function kF(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function CF(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function kI(e){var t=1,n=e(kF(t),CF(t));return n.constant=function(r){return arguments.length?e(kF(t=+r),CF(t)):t},Jc(n)}function zY(){var e=kI(sS());return e.copy=function(){return ov(e,zY()).constant(e.constant())},ia.apply(e,arguments)}function TF(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ije(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function sje(e){return e<0?-e*e:e*e}function CI(e){var t=e(xi,xi),n=1;function r(){return n===1?e(xi,xi):n===.5?e(ije,sje):e(TF(n),TF(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Jc(t)}function TI(){var e=CI(sS());return e.copy=function(){return ov(e,TI()).exponent(e.exponent())},ia.apply(e,arguments),e}function aje(){return TI.apply(null,arguments).exponent(.5)}function AF(e){return Math.sign(e)*e*e}function oje(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function HY(){var e=EI(),t=[0,1],n=!1,r;function i(s){var a=oje(e(s));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(s){return e.invert(AF(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,n1)).map(AF)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return HY(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},ia.apply(i,arguments),Jc(i)}function VY(){var e=[],t=[],n=[],r;function i(){var a=0,o=Math.max(1,t.length);for(n=new Array(o-1);++a<o;)n[a-1]=dAe(e,a/o);return s}function s(a){return a==null||isNaN(a=+a)?r:t[sv(n,a)]}return s.invertExtent=function(a){var o=t.indexOf(a);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},s.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let o of a)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(xc),i()},s.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return VY().domain(e).range(t).unknown(r)},ia.apply(s,arguments)}function WY(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function a(c){return c!=null&&c<=c?i[sv(r,c,0,n)]:s}function o(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return a}return a.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},a.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,o()):i.slice()},a.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},a.unknown=function(c){return arguments.length&&(s=c),a},a.thresholds=function(){return r.slice()},a.copy=function(){return WY().domain([e,t]).range(i).unknown(s)},ia.apply(Jc(a),arguments)}function qY(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[sv(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var a=t.indexOf(s);return[e[a-1],e[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return qY().domain(e).range(t).unknown(n)},ia.apply(i,arguments)}const V_=new Date,W_=new Date;function fr(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(t(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const c=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return c;let u;do c.push(u=new Date(+s)),t(s,o),e(s);while(u<s&&s<a);return c},i.filter=s=>fr(a=>{if(a>=a)for(;e(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;t(a,-1),!s(a););else for(;--o>=0;)for(;t(a,1),!s(a););}),n&&(i.count=(s,a)=>(V_.setTime(+s),W_.setTime(+a),e(V_),e(W_),Math.floor(n(V_,W_))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const i1=fr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);i1.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?fr(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):i1);i1.range;const Uo=1e3,Hs=Uo*60,zo=Hs*60,ol=zo*24,AI=ol*7,jF=ol*30,q_=ol*365,Bu=fr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Uo)},(e,t)=>(t-e)/Uo,e=>e.getUTCSeconds());Bu.range;const jI=fr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Uo)},(e,t)=>{e.setTime(+e+t*Hs)},(e,t)=>(t-e)/Hs,e=>e.getMinutes());jI.range;const OI=fr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Hs)},(e,t)=>(t-e)/Hs,e=>e.getUTCMinutes());OI.range;const PI=fr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Uo-e.getMinutes()*Hs)},(e,t)=>{e.setTime(+e+t*zo)},(e,t)=>(t-e)/zo,e=>e.getHours());PI.range;const II=fr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*zo)},(e,t)=>(t-e)/zo,e=>e.getUTCHours());II.range;const lv=fr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Hs)/ol,e=>e.getDate()-1);lv.range;const aS=fr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ol,e=>e.getUTCDate()-1);aS.range;const KY=fr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ol,e=>Math.floor(e/ol));KY.range;function Fd(e){return fr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Hs)/AI)}const oS=Fd(0),s1=Fd(1),lje=Fd(2),cje=Fd(3),Ah=Fd(4),uje=Fd(5),dje=Fd(6);oS.range;s1.range;lje.range;cje.range;Ah.range;uje.range;dje.range;function Bd(e){return fr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/AI)}const lS=Bd(0),a1=Bd(1),fje=Bd(2),hje=Bd(3),jh=Bd(4),pje=Bd(5),mje=Bd(6);lS.range;a1.range;fje.range;hje.range;jh.range;pje.range;mje.range;const DI=fr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());DI.range;const MI=fr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());MI.range;const ll=fr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ll.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ll.range;const cl=fr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());cl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});cl.range;function GY(e,t,n,r,i,s){const a=[[Bu,1,Uo],[Bu,5,5*Uo],[Bu,15,15*Uo],[Bu,30,30*Uo],[s,1,Hs],[s,5,5*Hs],[s,15,15*Hs],[s,30,30*Hs],[i,1,zo],[i,3,3*zo],[i,6,6*zo],[i,12,12*zo],[r,1,ol],[r,2,2*ol],[n,1,AI],[t,1,jF],[t,3,3*jF],[e,1,q_]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:c(u,d,f),m=p?p.range(u,+d+1):[];return h?m.reverse():m}function c(u,d,f){const h=Math.abs(d-u)/f,p=gI(([,,v])=>v).right(a,h);if(p===a.length)return e.every(kT(u/q_,d/q_,f));if(p===0)return i1.every(Math.max(kT(u,d,f),1));const[m,g]=a[h/a[p-1][2]<a[p][2]/h?p-1:p];return m.every(g)}return[o,c]}const[gje,vje]=GY(cl,MI,lS,KY,II,OI),[yje,xje]=GY(ll,DI,oS,lv,PI,jI);function K_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function G_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Kp(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function bje(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,a=e.shortDays,o=e.months,c=e.shortMonths,u=Gp(i),d=Yp(i),f=Gp(s),h=Yp(s),p=Gp(a),m=Yp(a),g=Gp(o),v=Yp(o),y=Gp(c),x=Yp(c),b={a:B,A:R,b:F,B:O,c:null,d:RF,e:RF,f:Hje,g:Zje,G:tOe,H:$je,I:Uje,j:zje,L:YY,m:Vje,M:Wje,p:Q,q:Y,Q:BF,s:$F,S:qje,u:Kje,U:Gje,V:Yje,w:Xje,W:Qje,x:null,X:null,y:Jje,Y:eOe,Z:nOe,"%":FF},S={a:$,A:ye,b:Te,B:U,c:null,d:LF,e:LF,f:aOe,g:gOe,G:yOe,H:rOe,I:iOe,j:sOe,L:QY,m:oOe,M:lOe,p:K,q:fe,Q:BF,s:$F,S:cOe,u:uOe,U:dOe,V:fOe,w:hOe,W:pOe,x:null,X:null,y:mOe,Y:vOe,Z:xOe,"%":FF},E={a:A,A:j,b:D,B:I,c:M,d:DF,e:DF,f:Rje,g:IF,G:PF,H:MF,I:MF,j:Pje,L:Mje,m:Oje,M:Ije,p:T,q:jje,Q:Fje,s:Bje,S:Dje,u:_je,U:kje,V:Cje,w:Nje,W:Tje,x:L,X:P,y:IF,Y:PF,Z:Aje,"%":Lje};b.x=N(n,b),b.X=N(r,b),b.c=N(t,b),S.x=N(n,S),S.X=N(r,S),S.c=N(t,S);function N(oe,le){return function(Ee){var se=[],qe=-1,Oe=0,et=oe.length,J,pe,q;for(Ee instanceof Date||(Ee=new Date(+Ee));++qe<et;)oe.charCodeAt(qe)===37&&(se.push(oe.slice(Oe,qe)),(pe=OF[J=oe.charAt(++qe)])!=null?J=oe.charAt(++qe):pe=J==="e"?" ":"0",(q=le[J])&&(J=q(Ee,pe)),se.push(J),Oe=qe+1);return se.push(oe.slice(Oe,qe)),se.join("")}}function _(oe,le){return function(Ee){var se=Kp(1900,void 0,1),qe=k(se,oe,Ee+="",0),Oe,et;if(qe!=Ee.length)return null;if("Q"in se)return new Date(se.Q);if("s"in se)return new Date(se.s*1e3+("L"in se?se.L:0));if(le&&!("Z"in se)&&(se.Z=0),"p"in se&&(se.H=se.H%12+se.p*12),se.m===void 0&&(se.m="q"in se?se.q:0),"V"in se){if(se.V<1||se.V>53)return null;"w"in se||(se.w=1),"Z"in se?(Oe=G_(Kp(se.y,0,1)),et=Oe.getUTCDay(),Oe=et>4||et===0?a1.ceil(Oe):a1(Oe),Oe=aS.offset(Oe,(se.V-1)*7),se.y=Oe.getUTCFullYear(),se.m=Oe.getUTCMonth(),se.d=Oe.getUTCDate()+(se.w+6)%7):(Oe=K_(Kp(se.y,0,1)),et=Oe.getDay(),Oe=et>4||et===0?s1.ceil(Oe):s1(Oe),Oe=lv.offset(Oe,(se.V-1)*7),se.y=Oe.getFullYear(),se.m=Oe.getMonth(),se.d=Oe.getDate()+(se.w+6)%7)}else("W"in se||"U"in se)&&("w"in se||(se.w="u"in se?se.u%7:"W"in se?1:0),et="Z"in se?G_(Kp(se.y,0,1)).getUTCDay():K_(Kp(se.y,0,1)).getDay(),se.m=0,se.d="W"in se?(se.w+6)%7+se.W*7-(et+5)%7:se.w+se.U*7-(et+6)%7);return"Z"in se?(se.H+=se.Z/100|0,se.M+=se.Z%100,G_(se)):K_(se)}}function k(oe,le,Ee,se){for(var qe=0,Oe=le.length,et=Ee.length,J,pe;qe<Oe;){if(se>=et)return-1;if(J=le.charCodeAt(qe++),J===37){if(J=le.charAt(qe++),pe=E[J in OF?le.charAt(qe++):J],!pe||(se=pe(oe,Ee,se))<0)return-1}else if(J!=Ee.charCodeAt(se++))return-1}return se}function T(oe,le,Ee){var se=u.exec(le.slice(Ee));return se?(oe.p=d.get(se[0].toLowerCase()),Ee+se[0].length):-1}function A(oe,le,Ee){var se=p.exec(le.slice(Ee));return se?(oe.w=m.get(se[0].toLowerCase()),Ee+se[0].length):-1}function j(oe,le,Ee){var se=f.exec(le.slice(Ee));return se?(oe.w=h.get(se[0].toLowerCase()),Ee+se[0].length):-1}function D(oe,le,Ee){var se=y.exec(le.slice(Ee));return se?(oe.m=x.get(se[0].toLowerCase()),Ee+se[0].length):-1}function I(oe,le,Ee){var se=g.exec(le.slice(Ee));return se?(oe.m=v.get(se[0].toLowerCase()),Ee+se[0].length):-1}function M(oe,le,Ee){return k(oe,t,le,Ee)}function L(oe,le,Ee){return k(oe,n,le,Ee)}function P(oe,le,Ee){return k(oe,r,le,Ee)}function B(oe){return a[oe.getDay()]}function R(oe){return s[oe.getDay()]}function F(oe){return c[oe.getMonth()]}function O(oe){return o[oe.getMonth()]}function Q(oe){return i[+(oe.getHours()>=12)]}function Y(oe){return 1+~~(oe.getMonth()/3)}function $(oe){return a[oe.getUTCDay()]}function ye(oe){return s[oe.getUTCDay()]}function Te(oe){return c[oe.getUTCMonth()]}function U(oe){return o[oe.getUTCMonth()]}function K(oe){return i[+(oe.getUTCHours()>=12)]}function fe(oe){return 1+~~(oe.getUTCMonth()/3)}return{format:function(oe){var le=N(oe+="",b);return le.toString=function(){return oe},le},parse:function(oe){var le=_(oe+="",!1);return le.toString=function(){return oe},le},utcFormat:function(oe){var le=N(oe+="",S);return le.toString=function(){return oe},le},utcParse:function(oe){var le=_(oe+="",!0);return le.toString=function(){return oe},le}}}var OF={"-":"",_:" ",0:"0"},Pr=/^\s*\d+/,wje=/^%/,Eje=/[\\^$*+?|[\]().{}]/g;function Tt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function Sje(e){return e.replace(Eje,"\\$&")}function Gp(e){return new RegExp("^(?:"+e.map(Sje).join("|")+")","i")}function Yp(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Nje(e,t,n){var r=Pr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function _je(e,t,n){var r=Pr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function kje(e,t,n){var r=Pr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Cje(e,t,n){var r=Pr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Tje(e,t,n){var r=Pr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function PF(e,t,n){var r=Pr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function IF(e,t,n){var r=Pr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Aje(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function jje(e,t,n){var r=Pr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Oje(e,t,n){var r=Pr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function DF(e,t,n){var r=Pr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Pje(e,t,n){var r=Pr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function MF(e,t,n){var r=Pr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Ije(e,t,n){var r=Pr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Dje(e,t,n){var r=Pr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Mje(e,t,n){var r=Pr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Rje(e,t,n){var r=Pr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Lje(e,t,n){var r=wje.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Fje(e,t,n){var r=Pr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Bje(e,t,n){var r=Pr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function RF(e,t){return Tt(e.getDate(),t,2)}function $je(e,t){return Tt(e.getHours(),t,2)}function Uje(e,t){return Tt(e.getHours()%12||12,t,2)}function zje(e,t){return Tt(1+lv.count(ll(e),e),t,3)}function YY(e,t){return Tt(e.getMilliseconds(),t,3)}function Hje(e,t){return YY(e,t)+"000"}function Vje(e,t){return Tt(e.getMonth()+1,t,2)}function Wje(e,t){return Tt(e.getMinutes(),t,2)}function qje(e,t){return Tt(e.getSeconds(),t,2)}function Kje(e){var t=e.getDay();return t===0?7:t}function Gje(e,t){return Tt(oS.count(ll(e)-1,e),t,2)}function XY(e){var t=e.getDay();return t>=4||t===0?Ah(e):Ah.ceil(e)}function Yje(e,t){return e=XY(e),Tt(Ah.count(ll(e),e)+(ll(e).getDay()===4),t,2)}function Xje(e){return e.getDay()}function Qje(e,t){return Tt(s1.count(ll(e)-1,e),t,2)}function Jje(e,t){return Tt(e.getFullYear()%100,t,2)}function Zje(e,t){return e=XY(e),Tt(e.getFullYear()%100,t,2)}function eOe(e,t){return Tt(e.getFullYear()%1e4,t,4)}function tOe(e,t){var n=e.getDay();return e=n>=4||n===0?Ah(e):Ah.ceil(e),Tt(e.getFullYear()%1e4,t,4)}function nOe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Tt(t/60|0,"0",2)+Tt(t%60,"0",2)}function LF(e,t){return Tt(e.getUTCDate(),t,2)}function rOe(e,t){return Tt(e.getUTCHours(),t,2)}function iOe(e,t){return Tt(e.getUTCHours()%12||12,t,2)}function sOe(e,t){return Tt(1+aS.count(cl(e),e),t,3)}function QY(e,t){return Tt(e.getUTCMilliseconds(),t,3)}function aOe(e,t){return QY(e,t)+"000"}function oOe(e,t){return Tt(e.getUTCMonth()+1,t,2)}function lOe(e,t){return Tt(e.getUTCMinutes(),t,2)}function cOe(e,t){return Tt(e.getUTCSeconds(),t,2)}function uOe(e){var t=e.getUTCDay();return t===0?7:t}function dOe(e,t){return Tt(lS.count(cl(e)-1,e),t,2)}function JY(e){var t=e.getUTCDay();return t>=4||t===0?jh(e):jh.ceil(e)}function fOe(e,t){return e=JY(e),Tt(jh.count(cl(e),e)+(cl(e).getUTCDay()===4),t,2)}function hOe(e){return e.getUTCDay()}function pOe(e,t){return Tt(a1.count(cl(e)-1,e),t,2)}function mOe(e,t){return Tt(e.getUTCFullYear()%100,t,2)}function gOe(e,t){return e=JY(e),Tt(e.getUTCFullYear()%100,t,2)}function vOe(e,t){return Tt(e.getUTCFullYear()%1e4,t,4)}function yOe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?jh(e):jh.ceil(e),Tt(e.getUTCFullYear()%1e4,t,4)}function xOe(){return"+0000"}function FF(){return"%"}function BF(e){return+e}function $F(e){return Math.floor(+e/1e3)}var tf,ZY,eX;bOe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function bOe(e){return tf=bje(e),ZY=tf.format,tf.parse,eX=tf.utcFormat,tf.utcParse,tf}function wOe(e){return new Date(e)}function EOe(e){return e instanceof Date?+e:+new Date(+e)}function RI(e,t,n,r,i,s,a,o,c,u){var d=EI(),f=d.invert,h=d.domain,p=u(".%L"),m=u(":%S"),g=u("%I:%M"),v=u("%I %p"),y=u("%a %d"),x=u("%b %d"),b=u("%B"),S=u("%Y");function E(N){return(c(N)<N?p:o(N)<N?m:a(N)<N?g:s(N)<N?v:r(N)<N?i(N)<N?y:x:n(N)<N?b:S)(N)}return d.invert=function(N){return new Date(f(N))},d.domain=function(N){return arguments.length?h(Array.from(N,EOe)):h().map(wOe)},d.ticks=function(N){var _=h();return e(_[0],_[_.length-1],N??10)},d.tickFormat=function(N,_){return _==null?E:u(_)},d.nice=function(N){var _=h();return(!N||typeof N.range!="function")&&(N=t(_[0],_[_.length-1],N??10)),N?h($Y(_,N)):d},d.copy=function(){return ov(d,RI(e,t,n,r,i,s,a,o,c,u))},d}function SOe(){return ia.apply(RI(yje,xje,ll,DI,oS,lv,PI,jI,Bu,ZY).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function NOe(){return ia.apply(RI(gje,vje,cl,MI,lS,aS,II,OI,Bu,eX).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function cS(){var e=0,t=1,n,r,i,s,a=xi,o=!1,c;function u(f){return f==null||isNaN(f=+f)?c:a(i===0?.5:(f=(s(f)-n)*i,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(a=f,u):a};function d(f){return function(h){var p,m;return arguments.length?([p,m]=h,a=f(p,m),u):[a(0),a(1)]}}return u.range=d(op),u.rangeRound=d(wI),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),u}}function Zc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function tX(){var e=Jc(cS()(xi));return e.copy=function(){return Zc(e,tX())},yl.apply(e,arguments)}function nX(){var e=_I(cS()).domain([1,10]);return e.copy=function(){return Zc(e,nX()).base(e.base())},yl.apply(e,arguments)}function rX(){var e=kI(cS());return e.copy=function(){return Zc(e,rX()).constant(e.constant())},yl.apply(e,arguments)}function LI(){var e=CI(cS());return e.copy=function(){return Zc(e,LI()).exponent(e.exponent())},yl.apply(e,arguments)}function _Oe(){return LI.apply(null,arguments).exponent(.5)}function iX(){var e=[],t=xi;function n(r){if(r!=null&&!isNaN(r=+r))return t((sv(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(xc),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>uAe(e,s/r))},n.copy=function(){return iX(t).domain(e)},yl.apply(n,arguments)}function uS(){var e=0,t=.5,n=1,r=1,i,s,a,o,c,u=xi,d,f=!1,h;function p(g){return isNaN(g=+g)?h:(g=.5+((g=+d(g))-s)*(r*g<r*s?o:c),u(f?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([e,t,n]=g,i=d(e=+e),s=d(t=+t),a=d(n=+n),o=i===s?0:.5/(s-i),c=s===a?0:.5/(a-s),r=s<i?-1:1,p):[e,t,n]},p.clamp=function(g){return arguments.length?(f=!!g,p):f},p.interpolator=function(g){return arguments.length?(u=g,p):u};function m(g){return function(v){var y,x,b;return arguments.length?([y,x,b]=v,u=LAe(g,[y,x,b]),p):[u(0),u(.5),u(1)]}}return p.range=m(op),p.rangeRound=m(wI),p.unknown=function(g){return arguments.length?(h=g,p):h},function(g){return d=g,i=g(e),s=g(t),a=g(n),o=i===s?0:.5/(s-i),c=s===a?0:.5/(a-s),r=s<i?-1:1,p}}function sX(){var e=Jc(uS()(xi));return e.copy=function(){return Zc(e,sX())},yl.apply(e,arguments)}function aX(){var e=_I(uS()).domain([.1,1,10]);return e.copy=function(){return Zc(e,aX()).base(e.base())},yl.apply(e,arguments)}function oX(){var e=kI(uS());return e.copy=function(){return Zc(e,oX()).constant(e.constant())},yl.apply(e,arguments)}function FI(){var e=CI(uS());return e.copy=function(){return Zc(e,FI()).exponent(e.exponent())},yl.apply(e,arguments)}function kOe(){return FI.apply(null,arguments).exponent(.5)}const mm=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:yI,scaleDiverging:sX,scaleDivergingLog:aX,scaleDivergingPow:FI,scaleDivergingSqrt:kOe,scaleDivergingSymlog:oX,scaleIdentity:BY,scaleImplicit:CT,scaleLinear:FY,scaleLog:UY,scaleOrdinal:vI,scalePoint:hAe,scalePow:TI,scaleQuantile:VY,scaleQuantize:WY,scaleRadial:HY,scaleSequential:tX,scaleSequentialLog:nX,scaleSequentialPow:LI,scaleSequentialQuantile:iX,scaleSequentialSqrt:_Oe,scaleSequentialSymlog:rX,scaleSqrt:aje,scaleSymlog:zY,scaleThreshold:qY,scaleTime:SOe,scaleUtc:NOe,tickFormat:LY},Symbol.toStringTag,{value:"Module"}));var eu=e=>e.chartData,BI=ae([eu],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),cv=(e,t,n,r)=>r?BI(e):eu(e);function Oh(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(qr(t)&&qr(n))return!0}return!1}function UF(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function COe(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,s;if(qr(n))i=n;else if(typeof n=="function")return;if(qr(r))s=r;else if(typeof r=="function")return;var a=[i,s];if(Oh(a))return a}}function TOe(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(Oh(r))return UF(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,a,o;if(i==="auto")t!=null&&(a=Math.min(...t));else if(De(i))a=i;else if(typeof i=="function")try{t!=null&&(a=i(t==null?void 0:t[0]))}catch{}else if(typeof i=="string"&&L5.test(i)){var c=L5.exec(i);if(c==null||t==null)a=void 0;else{var u=+c[1];a=t[0]-u}}else a=t==null?void 0:t[0];if(s==="auto")t!=null&&(o=Math.max(...t));else if(De(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&F5.test(s)){var d=F5.exec(s);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t==null?void 0:t[1];var h=[a,o];if(Oh(h))return t==null?h:UF(h,t,n)}}}var lp=1e9,AOe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},UI,bn=!0,ta="[DecimalError] ",nd=ta+"Invalid argument: ",$I=ta+"Exponent out of range: ",cp=Math.floor,ku=Math.pow,jOe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,rs,vr=1e7,on=7,lX=9007199254740991,o1=cp(lX/on),Fe={};Fe.absoluteValue=Fe.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Fe.comparedTo=Fe.cmp=function(e){var t,n,r,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Fe.decimalPlaces=Fe.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*on;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Fe.dividedBy=Fe.div=function(e){return Go(this,new this.constructor(e))};Fe.dividedToIntegerBy=Fe.idiv=function(e){var t=this,n=t.constructor;return Ht(Go(t,new n(e),0,1),n.precision)};Fe.equals=Fe.eq=function(e){return!this.cmp(e)};Fe.exponent=function(){return Jn(this)};Fe.greaterThan=Fe.gt=function(e){return this.cmp(e)>0};Fe.greaterThanOrEqualTo=Fe.gte=function(e){return this.cmp(e)>=0};Fe.isInteger=Fe.isint=function(){return this.e>this.d.length-2};Fe.isNegative=Fe.isneg=function(){return this.s<0};Fe.isPositive=Fe.ispos=function(){return this.s>0};Fe.isZero=function(){return this.s===0};Fe.lessThan=Fe.lt=function(e){return this.cmp(e)<0};Fe.lessThanOrEqualTo=Fe.lte=function(e){return this.cmp(e)<1};Fe.logarithm=Fe.log=function(e){var t,n=this,r=n.constructor,i=r.precision,s=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(rs))throw Error(ta+"NaN");if(n.s<1)throw Error(ta+(n.s?"NaN":"-Infinity"));return n.eq(rs)?new r(0):(bn=!1,t=Go(Zg(n,s),Zg(e,s),s),bn=!0,Ht(t,i))};Fe.minus=Fe.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?dX(t,e):cX(t,(e.s=-e.s,e))};Fe.modulo=Fe.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(ta+"NaN");return n.s?(bn=!1,t=Go(n,e,0,1).times(e),bn=!0,n.minus(t)):Ht(new r(n),i)};Fe.naturalExponential=Fe.exp=function(){return uX(this)};Fe.naturalLogarithm=Fe.ln=function(){return Zg(this)};Fe.negated=Fe.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Fe.plus=Fe.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?cX(t,e):dX(t,(e.s=-e.s,e))};Fe.precision=Fe.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(nd+e);if(t=Jn(i)+1,r=i.d.length-1,n=r*on+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Fe.squareRoot=Fe.sqrt=function(){var e,t,n,r,i,s,a,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(ta+"NaN")}for(e=Jn(o),bn=!1,i=Math.sqrt(+o),i==0||i==1/0?(t=Xa(o.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=cp((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(i.toString()),n=c.precision,i=a=n+3;;)if(s=r,r=s.plus(Go(o,s,a+2)).times(.5),Xa(s.d).slice(0,a)===(t=Xa(r.d)).slice(0,a)){if(t=t.slice(a-3,a+1),i==a&&t=="4999"){if(Ht(s,n+1,0),s.times(s).eq(o)){r=s;break}}else if(t!="9999")break;a+=4}return bn=!0,Ht(r,n)};Fe.times=Fe.mul=function(e){var t,n,r,i,s,a,o,c,u,d=this,f=d.constructor,h=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,n=d.e+e.e,c=h.length,u=p.length,c<u&&(s=h,h=p,p=s,a=c,c=u,u=a),s=[],a=c+u,r=a;r--;)s.push(0);for(r=u;--r>=0;){for(t=0,i=c+r;i>r;)o=s[i]+p[r]*h[i-r-1]+t,s[i--]=o%vr|0,t=o/vr|0;s[i]=(s[i]+t)%vr|0}for(;!s[--a];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,bn?Ht(e,f.precision):e};Fe.toDecimalPlaces=Fe.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(ho(e,0,lp),t===void 0?t=r.rounding:ho(t,0,8),Ht(n,e+Jn(n)+1,t))};Fe.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=wd(r,!0):(ho(e,0,lp),t===void 0?t=i.rounding:ho(t,0,8),r=Ht(new i(r),e+1,t),n=wd(r,!0,e+1)),n};Fe.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?wd(i):(ho(e,0,lp),t===void 0?t=s.rounding:ho(t,0,8),r=Ht(new s(i),e+Jn(i)+1,t),n=wd(r.abs(),!1,e+Jn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Fe.toInteger=Fe.toint=function(){var e=this,t=e.constructor;return Ht(new t(e),Jn(e)+1,t.rounding)};Fe.toNumber=function(){return+this};Fe.toPower=Fe.pow=function(e){var t,n,r,i,s,a,o=this,c=o.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(rs);if(o=new c(o),!o.s){if(e.s<1)throw Error(ta+"Infinity");return o}if(o.eq(rs))return o;if(r=c.precision,e.eq(rs))return Ht(o,r);if(t=e.e,n=e.d.length-1,a=t>=n,s=o.s,a){if((n=d<0?-d:d)<=lX){for(i=new c(rs),t=Math.ceil(r/on+4),bn=!1;n%2&&(i=i.times(o),HF(i.d,t)),n=cp(n/2),n!==0;)o=o.times(o),HF(o.d,t);return bn=!0,e.s<0?new c(rs).div(i):Ht(i,r)}}else if(s<0)throw Error(ta+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,o.s=1,bn=!1,i=e.times(Zg(o,r+u)),bn=!0,i=uX(i),i.s=s,i};Fe.toPrecision=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?(n=Jn(i),r=wd(i,n<=s.toExpNeg||n>=s.toExpPos)):(ho(e,1,lp),t===void 0?t=s.rounding:ho(t,0,8),i=Ht(new s(i),e,t),n=Jn(i),r=wd(i,e<=n||n<=s.toExpNeg,e)),r};Fe.toSignificantDigits=Fe.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(ho(e,1,lp),t===void 0?t=r.rounding:ho(t,0,8)),Ht(new r(n),e,t)};Fe.toString=Fe.valueOf=Fe.val=Fe.toJSON=Fe[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Jn(e),n=e.constructor;return wd(e,t<=n.toExpNeg||t>=n.toExpPos)};function cX(e,t){var n,r,i,s,a,o,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),bn?Ht(t,f):t;if(c=e.d,u=t.d,a=e.e,i=t.e,c=c.slice(),s=a-i,s){for(s<0?(r=c,s=-s,o=u.length):(r=u,i=a,o=c.length),a=Math.ceil(f/on),o=a>o?a+1:o+1,s>o&&(s=o,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(o=c.length,s=u.length,o-s<0&&(s=o,r=u,u=c,c=r),n=0;s;)n=(c[--s]=c[s]+u[s]+n)/vr|0,c[s]%=vr;for(n&&(c.unshift(n),++i),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=i,bn?Ht(t,f):t}function ho(e,t,n){if(e!==~~e||e<t||e>n)throw Error(nd+e)}function Xa(e){var t,n,r,i=e.length-1,s="",a=e[0];if(i>0){for(s+=a,t=1;t<i;t++)r=e[t]+"",n=on-r.length,n&&(s+=$l(n)),s+=r;a=e[t],r=a+"",n=on-r.length,n&&(s+=$l(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var Go=function(){function e(r,i){var s,a=0,o=r.length;for(r=r.slice();o--;)s=r[o]*i+a,r[o]=s%vr|0,a=s/vr|0;return a&&r.unshift(a),r}function t(r,i,s,a){var o,c;if(s!=a)c=s>a?1:-1;else for(o=c=0;o<s;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function n(r,i,s){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*vr+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,a){var o,c,u,d,f,h,p,m,g,v,y,x,b,S,E,N,_,k,T=r.constructor,A=r.s==i.s?1:-1,j=r.d,D=i.d;if(!r.s)return new T(r);if(!i.s)throw Error(ta+"Division by zero");for(c=r.e-i.e,_=D.length,E=j.length,p=new T(A),m=p.d=[],u=0;D[u]==(j[u]||0);)++u;if(D[u]>(j[u]||0)&&--c,s==null?x=s=T.precision:a?x=s+(Jn(r)-Jn(i))+1:x=s,x<0)return new T(0);if(x=x/on+2|0,u=0,_==1)for(d=0,D=D[0],x++;(u<E||d)&&x--;u++)b=d*vr+(j[u]||0),m[u]=b/D|0,d=b%D|0;else{for(d=vr/(D[0]+1)|0,d>1&&(D=e(D,d),j=e(j,d),_=D.length,E=j.length),S=_,g=j.slice(0,_),v=g.length;v<_;)g[v++]=0;k=D.slice(),k.unshift(0),N=D[0],D[1]>=vr/2&&++N;do d=0,o=t(D,g,_,v),o<0?(y=g[0],_!=v&&(y=y*vr+(g[1]||0)),d=y/N|0,d>1?(d>=vr&&(d=vr-1),f=e(D,d),h=f.length,v=g.length,o=t(f,g,h,v),o==1&&(d--,n(f,_<h?k:D,h))):(d==0&&(o=d=1),f=D.slice()),h=f.length,h<v&&f.unshift(0),n(g,f,v),o==-1&&(v=g.length,o=t(D,g,_,v),o<1&&(d++,n(g,_<v?k:D,v))),v=g.length):o===0&&(d++,g=[0]),m[u++]=d,o&&g[0]?g[v++]=j[S]||0:(g=[j[S]],v=1);while((S++<E||g[0]!==void 0)&&x--)}return m[0]||m.shift(),p.e=c,Ht(p,a?s+Jn(p)+1:s)}}();function uX(e,t){var n,r,i,s,a,o,c=0,u=0,d=e.constructor,f=d.precision;if(Jn(e)>16)throw Error($I+Jn(e));if(!e.s)return new d(rs);for(bn=!1,o=f,a=new d(.03125);e.abs().gte(.1);)e=e.times(a),u+=5;for(r=Math.log(ku(2,u))/Math.LN10*2+5|0,o+=r,n=i=s=new d(rs),d.precision=o;;){if(i=Ht(i.times(e),o),n=n.times(++c),a=s.plus(Go(i,n,o)),Xa(a.d).slice(0,o)===Xa(s.d).slice(0,o)){for(;u--;)s=Ht(s.times(s),o);return d.precision=f,t==null?(bn=!0,Ht(s,f)):s}s=a}}function Jn(e){for(var t=e.e*on,n=e.d[0];n>=10;n/=10)t++;return t}function Y_(e,t,n){if(t>e.LN10.sd())throw bn=!0,n&&(e.precision=n),Error(ta+"LN10 precision limit exceeded");return Ht(new e(e.LN10),t)}function $l(e){for(var t="";e--;)t+="0";return t}function Zg(e,t){var n,r,i,s,a,o,c,u,d,f=1,h=10,p=e,m=p.d,g=p.constructor,v=g.precision;if(p.s<1)throw Error(ta+(p.s?"NaN":"-Infinity"));if(p.eq(rs))return new g(0);if(t==null?(bn=!1,u=v):u=t,p.eq(10))return t==null&&(bn=!0),Y_(g,u);if(u+=h,g.precision=u,n=Xa(m),r=n.charAt(0),s=Jn(p),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(e),n=Xa(p.d),r=n.charAt(0),f++;s=Jn(p),r>1?(p=new g("0."+n),s++):p=new g(r+"."+n.slice(1))}else return c=Y_(g,u+2,v).times(s+""),p=Zg(new g(r+"."+n.slice(1)),u-h).plus(c),g.precision=v,t==null?(bn=!0,Ht(p,v)):p;for(o=a=p=Go(p.minus(rs),p.plus(rs),u),d=Ht(p.times(p),u),i=3;;){if(a=Ht(a.times(d),u),c=o.plus(Go(a,new g(i),u)),Xa(c.d).slice(0,u)===Xa(o.d).slice(0,u))return o=o.times(2),s!==0&&(o=o.plus(Y_(g,u+2,v).times(s+""))),o=Go(o,new g(f),u),g.precision=v,t==null?(bn=!0,Ht(o,v)):o;o=c,i+=2}}function zF(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=cp(n/on),e.d=[],r=(n+1)%on,n<0&&(r+=on),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=on;r<i;)e.d.push(+t.slice(r,r+=on));t=t.slice(r),r=on-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),bn&&(e.e>o1||e.e<-o1))throw Error($I+n)}else e.s=0,e.e=0,e.d=[0];return e}function Ht(e,t,n){var r,i,s,a,o,c,u,d,f=e.d;for(a=1,s=f[0];s>=10;s/=10)a++;if(r=t-a,r<0)r+=on,i=t,u=f[d=0];else{if(d=Math.ceil((r+1)/on),s=f.length,d>=s)return e;for(u=s=f[d],a=1;s>=10;s/=10)a++;r%=on,i=r-on+a}if(n!==void 0&&(s=ku(10,a-i-1),o=u/s%10|0,c=t<0||f[d+1]!==void 0||u%s,c=n<4?(o||c)&&(n==0||n==(e.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(r>0?i>0?u/ku(10,a-i):0:f[d-1])%10&1||n==(e.s<0?8:7))),t<1||!f[0])return c?(s=Jn(e),f.length=1,t=t-s-1,f[0]=ku(10,(on-t%on)%on),e.e=cp(-t/on)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(r==0?(f.length=d,s=1,d--):(f.length=d+1,s=ku(10,on-r),f[d]=i>0?(u/ku(10,a-i)%ku(10,i)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==vr&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=vr)break;f[d--]=0,s=1}for(r=f.length;f[--r]===0;)f.pop();if(bn&&(e.e>o1||e.e<-o1))throw Error($I+Jn(e));return e}function dX(e,t){var n,r,i,s,a,o,c,u,d,f,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),bn?Ht(t,p):t;if(c=e.d,f=t.d,r=t.e,u=e.e,c=c.slice(),a=u-r,a){for(d=a<0,d?(n=c,a=-a,o=f.length):(n=f,r=u,o=c.length),i=Math.max(Math.ceil(p/on),o)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=c.length,o=f.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(c[i]!=f[i]){d=c[i]<f[i];break}a=0}for(d&&(n=c,c=f,f=n,t.s=-t.s),o=c.length,i=f.length-o;i>0;--i)c[o++]=0;for(i=f.length;i>a;){if(c[--i]<f[i]){for(s=i;s&&c[--s]===0;)c[s]=vr-1;--c[s],c[i]+=vr}c[i]-=f[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,bn?Ht(t,p):t):new h(0)}function wd(e,t,n){var r,i=Jn(e),s=Xa(e.d),a=s.length;return t?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+$l(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+$l(-i-1)+s,n&&(r=n-a)>0&&(s+=$l(r))):i>=a?(s+=$l(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+$l(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=$l(r))),e.s<0?"-"+s:s}function HF(e,t){if(e.length>t)return e.length=t,!0}function fX(e){var t,n,r;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(nd+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return zF(a,s.toString())}else if(typeof s!="string")throw Error(nd+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,jOe.test(s))zF(a,s);else throw Error(nd+s)}if(i.prototype=Fe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=fX,i.config=i.set=OOe,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function OOe(e){if(!e||typeof e!="object")throw Error(ta+"Object expected");var t,n,r,i=["precision",1,lp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(cp(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(nd+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(nd+n+": "+r);return this}var UI=fX(AOe);rs=new UI(1);const Dt=UI;var POe=e=>e,hX={},pX=e=>e===hX,VF=e=>function t(){return arguments.length===0||arguments.length===1&&pX(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},mX=(e,t)=>e===1?t:VF(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(a=>a!==hX).length;return s>=e?t(...r):mX(e-s,VF(function(){for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];var u=r.map(d=>pX(d)?o.shift():d);return t(...u,...o)}))}),dS=e=>mX(e.length,e),OT=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},IOe=dS((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),DOe=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return POe;var i=n.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce((o,c)=>c(o),s(...arguments))}},PT=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),gX=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t&&i.every((a,o)=>{var c;return a===((c=t)===null||c===void 0?void 0:c[o])})||(t=i,n=e(...i)),n}};function vX(e){var t;return e===0?t=1:t=Math.floor(new Dt(e).abs().log(10).toNumber())+1,t}function yX(e,t,n){for(var r=new Dt(e),i=0,s=[];r.lt(t)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}dS((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});dS((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});dS((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var xX=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},bX=(e,t,n)=>{if(e.lte(0))return new Dt(0);var r=vX(e.toNumber()),i=new Dt(10).pow(r),s=e.div(i),a=r!==1?.05:.1,o=new Dt(Math.ceil(s.div(a).toNumber())).add(n).mul(a),c=o.mul(i);return t?new Dt(c.toNumber()):new Dt(Math.ceil(c.toNumber()))},MOe=(e,t,n)=>{var r=new Dt(1),i=new Dt(e);if(!i.isint()&&n){var s=Math.abs(e);s<1?(r=new Dt(10).pow(vX(e)-1),i=new Dt(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new Dt(Math.floor(e)))}else e===0?i=new Dt(Math.floor((t-1)/2)):n||(i=new Dt(Math.floor(e)));var a=Math.floor((t-1)/2),o=DOe(IOe(c=>i.add(new Dt(c-a).mul(r)).toNumber()),OT);return o(0,t)},wX=function(t,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new Dt(0),tickMin:new Dt(0),tickMax:new Dt(0)};var a=bX(new Dt(n).sub(t).div(r-1),i,s),o;t<=0&&n>=0?o=new Dt(0):(o=new Dt(t).add(n).div(2),o=o.sub(new Dt(o).mod(a)));var c=Math.ceil(o.sub(t).div(a).toNumber()),u=Math.ceil(new Dt(n).sub(o).div(a).toNumber()),d=c+u+1;return d>r?wX(t,n,r,i,s+1):(d<r&&(u=n>0?u+(r-d):u,c=n>0?c:c+(r-d)),{step:a,tickMin:o.sub(new Dt(c).mul(a)),tickMax:o.add(new Dt(u).mul(a))})};function ROe(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[a,o]=xX([t,n]);if(a===-1/0||o===1/0){var c=o===1/0?[a,...OT(0,r-1).map(()=>1/0)]:[...OT(0,r-1).map(()=>-1/0),o];return t>n?PT(c):c}if(a===o)return MOe(a,r,i);var{step:u,tickMin:d,tickMax:f}=wX(a,o,s,i,0),h=yX(d,f.add(new Dt(.1).mul(u)),u);return t>n?PT(h):h}function LOe(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,a]=xX([n,r]);if(s===-1/0||a===1/0)return[n,r];if(s===a)return[s];var o=Math.max(t,2),c=bX(new Dt(a).sub(s).div(o-1),i,0),u=[...yX(new Dt(s),new Dt(a),c),a];return i===!1&&(u=u.map(d=>Math.round(d))),n>r?PT(u):u}var FOe=gX(ROe),BOe=gX(LOe),EX=e=>e.rootProps.maxBarSize,$Oe=e=>e.rootProps.barGap,SX=e=>e.rootProps.barCategoryGap,UOe=e=>e.rootProps.barSize,uv=e=>e.rootProps.stackOffset,zI=e=>e.options.chartName,HI=e=>e.rootProps.syncId,NX=e=>e.rootProps.syncMethod,VI=e=>e.options.eventEmitter,Ro={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},es={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},fS=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},zOe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ro.angleAxisId,includeHidden:!1,name:void 0,reversed:Ro.reversed,scale:Ro.scale,tick:Ro.tick,tickCount:void 0,ticks:void 0,type:Ro.type,unit:void 0},HOe={allowDataOverflow:es.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:es.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:es.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:es.scale,tick:es.tick,tickCount:es.tickCount,ticks:void 0,type:es.type,unit:void 0},VOe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ro.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ro.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ro.scale,tick:Ro.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},WOe={allowDataOverflow:es.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:es.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:es.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:es.scale,tick:es.tick,tickCount:es.tickCount,ticks:void 0,type:"category",unit:void 0},WI=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?VOe:zOe,qI=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?WOe:HOe,hS=e=>e.polarOptions,KI=ae([gl,vl,dr],XG),_X=ae([hS,KI],(e,t)=>{if(e!=null)return wi(e.innerRadius,t,0)}),kX=ae([hS,KI],(e,t)=>{if(e!=null)return wi(e.outerRadius,t,t*.8)}),qOe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},CX=ae([hS],qOe);ae([WI,CX],fS);var TX=ae([KI,_X,kX],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});ae([qI,TX],fS);var AX=ae([yt,hS,_X,kX,gl,vl],(e,t,n,r,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:a,cy:o,startAngle:c,endAngle:u}=t;return{cx:wi(a,i,i/2),cy:wi(o,s,s/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:u,clockWise:!1}}}),En=(e,t)=>t,dv=(e,t,n)=>n;function pS(e){return e==null?void 0:e.id}var hr=e=>{var t=yt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},up=e=>e.tooltip.settings.axisId,pr=e=>{var t=hr(e),n=up(e);return fv(e,t,n)};function jX(e,t,n){var{chartData:r=[]}=t,i=n==null?void 0:n.dataKey,s=new Map;return e.forEach(a=>{var o,c=(o=a.data)!==null&&o!==void 0?o:r;if(!(c==null||c.length===0)){var u=pS(a);c.forEach((d,f)=>{var h=i==null?f:String(Mt(d,i,null)),p=Mt(d,a.dataKey,0),m;s.has(h)?m=s.get(h):m={},Object.assign(m,{[u]:p}),s.set(h,m)})}}),Array.from(s.values())}function mS(e){return e.stackId!=null&&e.dataKey!=null}function WF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function l1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WF(Object(n),!0).forEach(function(r){KOe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function KOe(e,t,n){return(t=GOe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GOe(e){var t=YOe(e,"string");return typeof t=="symbol"?t:t+""}function YOe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IT=[0,"auto"],Qi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},xl=(e,t)=>{var n=e.cartesianAxis.xAxis[t];return n??Qi},Ji={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:IT,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:nS},tu=(e,t)=>{var n=e.cartesianAxis.yAxis[t];return n??Ji},XOe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},GI=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??XOe},Vn=(e,t,n)=>{switch(t){case"xAxis":return xl(e,n);case"yAxis":return tu(e,n);case"zAxis":return GI(e,n);case"angleAxis":return WI(e,n);case"radiusAxis":return qI(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},QOe=(e,t,n)=>{switch(t){case"xAxis":return xl(e,n);case"yAxis":return tu(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},fv=(e,t,n)=>{switch(t){case"xAxis":return xl(e,n);case"yAxis":return tu(e,n);case"angleAxis":return WI(e,n);case"radiusAxis":return qI(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},OX=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function YI(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var hv=e=>e.graphicalItems.cartesianItems,JOe=ae([En,dv],YI),XI=(e,t,n)=>e.filter(n).filter(r=>(t==null?void 0:t.includeHidden)===!0?!0:!r.hide),pv=ae([hv,Vn,JOe],XI),PX=ae([pv],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(mS)),IX=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),DX=ae([pv],IX),QI=e=>e.map(t=>t.data).filter(Boolean).flat(1),ZOe=ae([pv],QI),JI=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},ZI=ae([ZOe,cv],JI),eD=(e,t,n)=>(t==null?void 0:t.dataKey)!=null?e.map(r=>({value:Mt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:Mt(i,r)}))):e.map(r=>({value:r})),gS=ae([ZI,Vn,pv],eD);function MX(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function $d(e){return e.filter(t=>fo(t)||t instanceof Date).map(Number).filter(t=>qi(t)===!1)}function ePe(e,t,n){return!n||typeof t!="number"||qi(t)?[]:n.length?$d(n.flatMap(r=>{var i=Mt(e,r.dataKey),s,a;if(Array.isArray(i)?[s,a]=i:s=a=i,!(!qr(s)||!qr(a)))return[t-s,t+a]})):[]}var tPe=ae([PX,cv,pr],jX),RX=(e,t,n)=>{var r={},i=t.reduce((s,a)=>(a.stackId==null||(s[a.stackId]==null&&(s[a.stackId]=[]),s[a.stackId].push(a)),s),r);return Object.fromEntries(Object.entries(i).map(s=>{var[a,o]=s,c=o.map(pS);return[a,{stackedData:hCe(e,c,n),graphicalItems:o}]}))},e0=ae([tPe,PX,uv],RX),LX=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var s=vCe(e,r,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},nPe=ae([e0,eu,En],LX),FX=(e,t,n,r,i)=>n.length>0?e.flatMap(s=>n.flatMap(a=>{var o,c,u=(o=r[a.id])===null||o===void 0?void 0:o.filter(f=>MX(i,f)),d=Mt(s,(c=t.dataKey)!==null&&c!==void 0?c:a.dataKey);return{value:d,errorDomain:ePe(s,d,u)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Mt(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),vS=e=>e.errorBars,BX=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>MX(n,r));ae([DX,vS,En],BX);var rPe=ae([ZI,Vn,DX,vS,En],FX);function iPe(e){var{value:t}=e;if(fo(t)||t instanceof Date)return t}var qF=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=$d(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},sPe=(e,t,n)=>{var r=e.map(iPe).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&AK(r))?CY(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},tD=e=>{var t;if(e==null||!("domain"in e))return IT;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=$d(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:IT},c1=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),a=Math.min(...s),o=Math.max(...s);return[a,o]}},$X=e=>e.referenceElements.dots,dp=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),aPe=ae([$X,En,dv],dp),UX=e=>e.referenceElements.areas,oPe=ae([UX,En,dv],dp),zX=e=>e.referenceElements.lines,lPe=ae([zX,En,dv],dp),HX=(e,t)=>{var n=$d(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},cPe=ae(aPe,En,HX),VX=(e,t)=>{var n=$d(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},uPe=ae([oPe,En],VX),WX=(e,t)=>{var n=$d(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},dPe=ae(lPe,En,WX),fPe=ae(cPe,dPe,uPe,(e,t,n)=>c1(e,n,t)),qX=ae([Vn],tD),nD=(e,t,n,r,i,s,a)=>{var o=COe(t,e.allowDataOverflow);if(o!=null)return o;var c=s==="vertical"&&a==="xAxis"||s==="horizontal"&&a==="yAxis",u=c?c1(n,i,qF(r)):c1(i,qF(r));return TOe(t,u,e.allowDataOverflow)},hPe=ae([Vn,qX,nPe,rPe,fPe,yt,En],nD),pPe=[0,1],rD=(e,t,n,r,i,s,a)=>{if(!((e==null||n==null||n.length===0)&&a===void 0)){var{dataKey:o,type:c}=e,u=bo(t,s);return u&&o==null?CY(0,n.length):c==="category"?sPe(r,e,u):i==="expand"?pPe:a}},iD=ae([Vn,yt,ZI,gS,uv,En,hPe],rD),KX=(e,t,n,r,i)=>{if(e!=null){var{scale:s,type:a}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":a==="category"?"band":"linear";if(typeof s=="string"){var o="scale".concat(Z0(s));return o in mm?o:"point"}}},fp=ae([Vn,yt,OX,zI,En],KX);function mPe(e){if(e!=null){if(e in mm)return mm[e]();var t="scale".concat(Z0(e));if(t in mm)return mm[t]()}}function sD(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=mPe(t);if(i!=null){var s=i.domain(n).range(r);return lCe(s),s}}}var aD=(e,t,n)=>{var r=tD(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Oh(e))return FOe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Oh(e))return BOe(e,t.tickCount,t.allowDecimals)}},oD=ae([iD,fv,fp],aD),lD=(e,t,n,r)=>{if(r!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Oh(t)&&Array.isArray(n)&&n.length>0){var i=t[0],s=n[0],a=t[1],o=n[n.length-1];return[Math.min(i,s),Math.max(a,o)]}return t},gPe=ae([Vn,iD,oD,En],lD),vPe=ae(gS,Vn,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from($d(e.map(o=>o.value))).sort((o,c)=>o-c);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var a=r[s+1]-r[s];n=Math.min(n,a)}return n/i}}),GX=ae(vPe,yt,SX,dr,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!qr(e))return 0;var s=t==="vertical"?r.height:r.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var a=wi(n,e*s),o=e*s/2;return o-a-(o-a)/s*a}return 0}),yPe=(e,t)=>{var n=xl(e,t);return n==null||typeof n.padding!="string"?0:GX(e,"xAxis",t,n.padding)},xPe=(e,t)=>{var n=tu(e,t);return n==null||typeof n.padding!="string"?0:GX(e,"yAxis",t,n.padding)},bPe=ae(xl,yPe,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),wPe=ae(tu,xPe,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),EPe=ae([dr,bPe,iS,rS,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),SPe=ae([dr,yt,wPe,iS,rS,(e,t,n)=>n],(e,t,n,r,i,s)=>{var{padding:a}=i;return s?[r.height-a.bottom,a.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),mv=(e,t,n,r)=>{var i;switch(t){case"xAxis":return EPe(e,n,r);case"yAxis":return SPe(e,n,r);case"zAxis":return(i=GI(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return CX(e);case"radiusAxis":return TX(e,n);default:return}},YX=ae([Vn,mv],fS),hp=ae([Vn,fp,gPe,YX],sD);ae([pv,vS,En],BX);function XX(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var yS=(e,t)=>t,xS=(e,t,n)=>n,NPe=ae(cI,yS,xS,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(XX)),_Pe=ae(uI,yS,xS,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(XX)),QX=(e,t)=>({width:e.width,height:t.height}),kPe=(e,t)=>{var n=typeof t.width=="number"?t.width:nS;return{width:n,height:e.height}},JX=ae(dr,xl,QX),CPe=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},TPe=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},APe=ae(vl,dr,NPe,yS,xS,(e,t,n,r,i)=>{var s={},a;return n.forEach(o=>{var c=QX(t,o);a==null&&(a=CPe(t,r,e));var u=r==="top"&&!i||r==="bottom"&&i;s[o.id]=a-Number(u)*c.height,a+=(u?-1:1)*c.height}),s}),jPe=ae(gl,dr,_Pe,yS,xS,(e,t,n,r,i)=>{var s={},a;return n.forEach(o=>{var c=kPe(t,o);a==null&&(a=TPe(t,r,e));var u=r==="left"&&!i||r==="right"&&i;s[o.id]=a-Number(u)*c.width,a+=(u?-1:1)*c.width}),s}),OPe=(e,t)=>{var n=dr(e),r=xl(e,t);if(r!=null){var i=APe(e,r.orientation,r.mirror),s=i[t];return s==null?{x:n.left,y:0}:{x:n.left,y:s}}},PPe=(e,t)=>{var n=dr(e),r=tu(e,t);if(r!=null){var i=jPe(e,r.orientation,r.mirror),s=i[t];return s==null?{x:0,y:n.top}:{x:s,y:n.top}}},ZX=ae(dr,tu,(e,t)=>{var n=typeof t.width=="number"?t.width:nS;return{width:n,height:e.height}}),KF=(e,t,n)=>{switch(t){case"xAxis":return JX(e,n).width;case"yAxis":return ZX(e,n).height;default:return}},eQ=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:a}=n,o=bo(e,r),c=t.map(u=>u.value);if(a&&o&&s==="category"&&i&&AK(c))return c}},cD=ae([yt,gS,Vn,En],eQ),tQ=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,a=bo(e,r);if(a&&(i==="number"||s!=="auto"))return t.map(o=>o.value)}},uD=ae([yt,gS,fv,En],tQ),GF=ae([yt,QOe,fp,hp,cD,uD,mv,oD,En],(e,t,n,r,i,s,a,o,c)=>{if(t==null)return null;var u=bo(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:s,duplicateDomain:i,isCategorical:u,niceTicks:o,range:a,realScaleType:n,scale:r}}),IPe=(e,t,n,r,i,s,a,o,c)=>{if(!(t==null||r==null)){var u=bo(e,c),{type:d,ticks:f,tickCount:h}=t,p=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,m=d==="category"&&r.bandwidth?r.bandwidth()/p:0;m=c==="angleAxis"&&s!=null&&s.length>=2?Sr(s[0]-s[1])*2*m:m;var g=f||i;if(g){var v=g.map((y,x)=>{var b=a?a.indexOf(y):y;return{index:x,coordinate:r(b)+m,value:y,offset:m}});return v.filter(y=>!qi(y.coordinate))}return u&&o?o.map((y,x)=>({coordinate:r(y)+m,value:y,index:x,offset:m})):r.ticks?r.ticks(h).map(y=>({coordinate:r(y)+m,value:y,offset:m})):r.domain().map((y,x)=>({coordinate:r(y)+m,value:a?a[y]:y,index:x,offset:m}))}},nQ=ae([yt,fv,fp,hp,oD,mv,cD,uD,En],IPe),DPe=(e,t,n,r,i,s,a)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var o=bo(e,a),{tickCount:c}=t,u=0;return u=a==="angleAxis"&&(r==null?void 0:r.length)>=2?Sr(r[0]-r[1])*2*u:u,o&&s?s.map((d,f)=>({coordinate:n(d)+u,value:d,index:f,offset:u})):n.ticks?n.ticks(c).map(d=>({coordinate:n(d)+u,value:d,offset:u})):n.domain().map((d,f)=>({coordinate:n(d)+u,value:i?i[d]:d,index:f,offset:u}))}},po=ae([yt,fv,hp,mv,cD,uD,En],DPe),mo=ae(Vn,hp,(e,t)=>{if(!(e==null||t==null))return l1(l1({},e),{},{scale:t})}),MPe=ae([Vn,fp,iD,YX],sD);ae((e,t,n)=>GI(e,n),MPe,(e,t)=>{if(!(e==null||t==null))return l1(l1({},e),{},{scale:t})});var RPe=ae([yt,cI,uI],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),rQ=e=>e.options.defaultTooltipEventType,iQ=e=>e.options.validateTooltipEventTypes;function sQ(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function dD(e,t){var n=rQ(e),r=iQ(e);return sQ(t,n,r)}function LPe(e){return We(t=>dD(t,e))}var aQ=(e,t)=>{var n,r=Number(t);if(!(qi(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},FPe=e=>e.tooltip.settings,Kl={active:!1,index:null,dataKey:void 0,coordinate:void 0},BPe={itemInteraction:{click:Kl,hover:Kl},axisInteraction:{click:Kl,hover:Kl},keyboardInteraction:Kl,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},oQ=Es({name:"tooltip",initialState:BPe,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=Ko(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:$Pe,removeTooltipEntrySettings:UPe,setTooltipSettingsState:zPe,setActiveMouseOverItemIndex:lQ,mouseLeaveItem:HPe,mouseLeaveChart:cQ,setActiveClickItemIndex:VPe,setMouseOverAxisIndex:uQ,setMouseClickAxisIndex:WPe,setSyncInteraction:DT,setKeyboardInteraction:MT}=oQ.actions,qPe=oQ.reducer;function YF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ey(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YF(Object(n),!0).forEach(function(r){KPe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function KPe(e,t,n){return(t=GPe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GPe(e){var t=YPe(e,"string");return typeof t=="symbol"?t:t+""}function YPe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XPe(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function QPe(e){return e.index!=null}var dQ=(e,t,n,r)=>{if(t==null)return Kl;var i=XPe(e,t,n);if(i==null)return Kl;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(QPe(i)){if(s)return Ey(Ey({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return Ey(Ey({},Kl),{},{coordinate:i.coordinate})},fD=(e,t)=>{var n=e==null?void 0:e.index;if(n==null)return null;var r=Number(n);if(!qr(r))return n;var i=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(i,Math.min(r,s)))},fQ=(e,t,n,r,i,s,a,o)=>{if(!(s==null||o==null)){var c=a[0],u=c==null?void 0:o(c.positions,s);if(u!=null)return u;var d=i==null?void 0:i[Number(s)];if(d)switch(n){case"horizontal":return{x:d.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:d.coordinate}}}},hQ=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var a;return((a=s.settings)===null||a===void 0?void 0:a.dataKey)===i})},gv=e=>e.options.tooltipPayloadSearcher,pp=e=>e.tooltip;function XF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function QF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XF(Object(n),!0).forEach(function(r){JPe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function JPe(e,t,n){return(t=ZPe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZPe(e){var t=eIe(e,"string");return typeof t=="symbol"?t:t+""}function eIe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tIe(e,t){return e??t}var pQ=(e,t,n,r,i,s,a)=>{if(!(t==null||s==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:d}=n,f=[];return e.reduce((h,p)=>{var m,{dataDefinedOnItem:g,settings:v}=p,y=tIe(g,o),x=Array.isArray(y)?QG(y,u,d):y,b=(m=v==null?void 0:v.dataKey)!==null&&m!==void 0?m:r==null?void 0:r.dataKey,S=v==null?void 0:v.nameKey,E;if(r!=null&&r.dataKey&&Array.isArray(x)&&!Array.isArray(x[0])&&a==="axis"?E=jK(x,r.dataKey,i):E=s(x,t,c,S),Array.isArray(E))E.forEach(_=>{var k=QF(QF({},v),{},{name:_.name,unit:_.unit,color:void 0,fill:void 0});h.push(B5({tooltipEntrySettings:k,dataKey:_.dataKey,payload:_.payload,value:Mt(_.payload,_.dataKey),name:_.name}))});else{var N;h.push(B5({tooltipEntrySettings:v,dataKey:b,payload:E,value:Mt(E,b),name:(N=Mt(E,S))!==null&&N!==void 0?N:v==null?void 0:v.name}))}return h},f)}},hD=ae([pr,yt,OX,zI,hr],KX),nIe=ae([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),rIe=ae([hr,up],YI),vv=ae([nIe,pr,rIe],XI),iIe=ae([vv],e=>e.filter(mS)),sIe=ae([vv],QI),mp=ae([sIe,eu],JI),aIe=ae([iIe,eu,pr],jX),pD=ae([mp,pr,vv],eD),oIe=ae([pr],tD),lIe=ae([vv],e=>e.filter(mS)),cIe=ae([aIe,lIe,uv],RX),uIe=ae([cIe,eu,hr],LX),dIe=ae([vv],IX),fIe=ae([mp,pr,dIe,vS,hr],FX),hIe=ae([$X,hr,up],dp),pIe=ae([hIe,hr],HX),mIe=ae([UX,hr,up],dp),gIe=ae([mIe,hr],VX),vIe=ae([zX,hr,up],dp),yIe=ae([vIe,hr],WX),xIe=ae([pIe,yIe,gIe],c1),bIe=ae([pr,oIe,uIe,fIe,xIe,yt,hr],nD),mQ=ae([pr,yt,mp,pD,uv,hr,bIe],rD),wIe=ae([mQ,pr,hD],aD),EIe=ae([pr,mQ,wIe,hr],lD),gQ=e=>{var t=hr(e),n=up(e),r=!1;return mv(e,t,n,r)},vQ=ae([pr,gQ],fS),yQ=ae([pr,hD,EIe,vQ],sD),SIe=ae([yt,pD,pr,hr],eQ),NIe=ae([yt,pD,pr,hr],tQ),_Ie=(e,t,n,r,i,s,a,o)=>{if(t){var{type:c}=t,u=bo(e,o);if(r){var d=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,f=c==="category"&&r.bandwidth?r.bandwidth()/d:0;return f=o==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?Sr(i[0]-i[1])*2*f:f,u&&a?a.map((h,p)=>({coordinate:r(h)+f,value:h,index:p,offset:f})):r.domain().map((h,p)=>({coordinate:r(h)+f,value:s?s[h]:h,index:p,offset:f}))}}},bl=ae([yt,pr,hD,yQ,gQ,SIe,NIe,hr],_Ie),mD=ae([rQ,iQ,FPe],(e,t,n)=>sQ(n.shared,e,t)),xQ=e=>e.tooltip.settings.trigger,gD=e=>e.tooltip.settings.defaultIndex,bS=ae([pp,mD,xQ,gD],dQ),Ic=ae([bS,mp],fD),bQ=ae([bl,Ic],aQ),wQ=ae([bS],e=>{if(e)return e.dataKey}),EQ=ae([pp,mD,xQ,gD],hQ),kIe=ae([gl,vl,yt,dr,bl,gD,EQ,gv],fQ),CIe=ae([bS,kIe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),TIe=ae([bS],e=>e.active),AIe=ae([EQ,Ic,eu,pr,bQ,gv,mD],pQ),jIe=ae([AIe],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function JF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ZF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JF(Object(n),!0).forEach(function(r){OIe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function OIe(e,t,n){return(t=PIe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PIe(e){var t=IIe(e,"string");return typeof t=="symbol"?t:t+""}function IIe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DIe=()=>We(pr),MIe=()=>{var e=DIe(),t=We(bl),n=We(yQ);return bd(ZF(ZF({},e),{},{scale:n}),t)},SQ=()=>We(zI),vD=(e,t)=>t,NQ=(e,t,n)=>n,yD=(e,t,n,r)=>r,RIe=ae(bl,e=>YE(e,t=>t.coordinate)),xD=ae([pp,vD,NQ,yD],dQ),_Q=ae([xD,mp],fD),LIe=(e,t,n)=>{if(t!=null){var r=pp(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},kQ=ae([pp,vD,NQ,yD],hQ),u1=ae([gl,vl,yt,dr,bl,yD,kQ,gv],fQ),FIe=ae([xD,u1],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),CQ=ae(bl,_Q,aQ),BIe=ae([kQ,_Q,eu,pr,CQ,gv,vD],pQ),$Ie=ae([xD],e=>({isActive:e.active,activeIndex:e.index})),UIe=(e,t,n,r,i,s,a,o)=>{if(!(!e||!t||!r||!i||!s)){var c=yCe(e.chartX,e.chartY,t,n,o);if(c){var u=bCe(c,t),d=aCe(u,a,s,r,i),f=xCe(t,s,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function RT(){return RT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RT.apply(null,arguments)}function eB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Sy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eB(Object(n),!0).forEach(function(r){zIe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zIe(e,t,n){return(t=HIe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HIe(e){var t=VIe(e,"string");return typeof t=="symbol"?t:t+""}function VIe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WIe(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:s,layout:a,cursor:o,tooltipEventType:c,chartName:u}=e,d=t,f=n,h=r;if(!o||!d||u!=="ScatterChart"&&c!=="axis")return null;var p,m;if(u==="ScatterChart")p=d,m=vTe;else if(u==="BarChart")p=yTe(a,d,i,s),m=bY;else if(a==="radial"){var{cx:g,cy:v,radius:y,startAngle:x,endAngle:b}=wY(d);p={cx:g,cy:v,startAngle:x,endAngle:b,innerRadius:y,outerRadius:y},m=SY}else p={points:QTe(a,d,i)},m=Xf;var S=typeof o=="object"&&"className"in o?o.className:void 0,E=Sy(Sy(Sy(Sy({stroke:"#ccc",pointerEvents:"none"},i),p),Zt(o,!1)),{},{payload:f,payloadIndex:h,className:bt("recharts-tooltip-cursor",S)});return w.isValidElement(o)?w.cloneElement(o,E):w.createElement(m,E)}function qIe(e){var t=MIe(),n=sY(),r=rv(),i=SQ();return w.createElement(WIe,RT({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var TQ=w.createContext(null),KIe=()=>w.useContext(TQ),AQ={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,f||c,h),m=n?n+u:u;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],p]:c._events[m].push(p):(c._events[m]=p,c._eventsCount++),c}function a(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,m=new Array(p);h<p;h++)m[h]=f[h].fn;return m},o.prototype.listenerCount=function(u){var d=n?n+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,p,m){var g=n?n+u:u;if(!this._events[g])return!1;var v=this._events[g],y=arguments.length,x,b;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,p),!0;case 6:return v.fn.call(v.context,d,f,h,p,m),!0}for(b=1,x=new Array(y-1);b<y;b++)x[b-1]=arguments[b];v.fn.apply(v.context,x)}else{var S=v.length,E;for(b=0;b<S;b++)switch(v[b].once&&this.removeListener(u,v[b].fn,void 0,!0),y){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,d);break;case 3:v[b].fn.call(v[b].context,d,f);break;case 4:v[b].fn.call(v[b].context,d,f,h);break;default:if(!x)for(E=1,x=new Array(y-1);E<y;E++)x[E-1]=arguments[E];v[b].fn.apply(v[b].context,x)}}return!0},o.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var p=n?n+u:u;if(!this._events[p])return this;if(!d)return a(this,p),this;var m=this._events[p];if(m.fn)m.fn===d&&(!h||m.once)&&(!f||m.context===f)&&a(this,p);else{for(var g=0,v=[],y=m.length;g<y;g++)(m[g].fn!==d||h&&!m[g].once||f&&m[g].context!==f)&&v.push(m[g]);v.length?this._events[p]=v.length===1?v[0]:v:a(this,p)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&a(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o})(AQ);var GIe=AQ.exports;const YIe=oi(GIe);var t0=new YIe,LT="recharts.syncEvent.tooltip",tB="recharts.syncEvent.brush";function wS(e,t){if(t){var n=Number.parseInt(t,10);if(!qi(n))return e==null?void 0:e[n]}}var XIe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},jQ=Es({name:"options",initialState:XIe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),QIe=jQ.reducer,{createEventEmitter:JIe}=jQ.actions;function ZIe(e){return e.tooltip.syncInteraction}var eDe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},OQ=Es({name:"chartData",initialState:eDe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:nB,setDataStartEndIndexes:tDe,setComputedData:dct}=OQ.actions,nDe=OQ.reducer,PQ=()=>{};function rDe(){var e=We(HI),t=We(VI),n=Cn(),r=We(NX),i=We(bl),s=rv(),a=dI(),o=We(c=>c.rootProps.className);w.useEffect(()=>{if(e==null)return PQ;var c=(u,d,f)=>{if(t!==f&&e===u){if(r==="index"){n(d);return}if(i!=null){var h;if(typeof r=="function"){var p={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},m=r(i,p);h=i[m]}else r==="value"&&(h=i.find(N=>String(N.value)===d.payload.label));var{coordinate:g}=d.payload;if(h==null||d.payload.active===!1||g==null||a==null){n(DT({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:v,y}=g,x=Math.min(v,a.x+a.width),b=Math.min(y,a.y+a.height),S={x:s==="horizontal"?h.coordinate:x,y:s==="horizontal"?b:h.coordinate},E=DT({active:d.payload.active,coordinate:S,dataKey:d.payload.dataKey,index:String(h.index),label:d.payload.label});n(E)}}};return t0.on(LT,c),()=>{t0.off(LT,c)}},[o,n,t,e,r,i,s,a])}function iDe(){var e=We(HI),t=We(VI),n=Cn();w.useEffect(()=>{if(e==null)return PQ;var r=(i,s,a)=>{t!==a&&e===i&&n(tDe(s))};return t0.on(tB,r),()=>{t0.off(tB,r)}},[n,t,e])}function sDe(){var e=Cn();w.useEffect(()=>{e(JIe())},[e]),rDe(),iDe()}function aDe(e,t,n,r,i,s){var a=We(h=>LIe(h,e,t)),o=We(VI),c=We(HI),u=We(NX),d=We(ZIe),f=d==null?void 0:d.active;w.useEffect(()=>{if(!f&&c!=null&&o!=null){var h=DT({active:s,coordinate:n,dataKey:a,index:i,label:typeof r=="number"?String(r):r});t0.emit(LT,c,h,o)}},[f,n,a,i,r,o,c,u,s])}function rB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function iB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rB(Object(n),!0).forEach(function(r){oDe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oDe(e,t,n){return(t=lDe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lDe(e){var t=cDe(e,"string");return typeof t=="symbol"?t:t+""}function cDe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uDe(e){return e.dataKey}function dDe(e,t){return w.isValidElement(e)?w.cloneElement(e,t):typeof e=="function"?w.createElement(e,t):w.createElement(YCe,t)}var sB=[],fDe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Qc.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Vs(e){var t=Ti(e,fDe),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:s,content:a,filterNull:o,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:p,wrapperStyle:m,cursor:g,shared:v,trigger:y,defaultIndex:x,portal:b,axisId:S}=t,E=Cn(),N=typeof x=="number"?String(x):x;w.useEffect(()=>{E(zPe({shared:v,trigger:y,axisId:S,active:n,defaultIndex:N}))},[E,v,y,S,n,N]);var _=dI(),k=cY(),T=LPe(v),{activeIndex:A,isActive:j}=We(Te=>$Ie(Te,T,y,N)),D=We(Te=>BIe(Te,T,y,N)),I=We(Te=>CQ(Te,T,y,N)),M=We(Te=>FIe(Te,T,y,N)),L=D,P=KIe(),B=n??j,[R,F]=_G([L,B]),O=T==="axis"?I:void 0;aDe(T,y,M,O,A,B);var Q=b??P;if(Q==null)return null;var Y=L??sB;B||(Y=sB),o&&Y.length&&(Y=fG(L.filter(Te=>Te.value!=null&&(Te.hide!==!0||t.includeHidden)),d,uDe));var $=Y.length>0,ye=w.createElement(nTe,{allowEscapeViewBox:r,animationDuration:i,animationEasing:s,isAnimationActive:c,active:B,coordinate:M,hasPayload:$,offset:u,position:f,reverseDirection:h,useTranslate3d:p,viewBox:_,wrapperStyle:m,lastBoundingBox:R,innerRef:F,hasPortalFromProps:!!b},dDe(a,iB(iB({},t),{},{payload:Y,label:O,active:B,coordinate:M,accessibilityLayer:k})));return w.createElement(w.Fragment,null,ml.createPortal(ye,Q),B&&w.createElement(qIe,{cursor:g,tooltipEventType:T,coordinate:M,payload:L,index:A}))}var IQ={},DQ={},MQ={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:s}={}){let a,o=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{o!==null&&(n.apply(a,o),a=void 0,o=null)},f=()=>{u&&d(),g()};let h=null;const p=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},r)},m=()=>{h!==null&&(clearTimeout(h),h=null)},g=()=>{m(),a=void 0,o=null},v=()=>{d()},y=function(...x){if(i!=null&&i.aborted)return;a=this,o=x;const b=h==null;p(),c&&b&&d()};return y.schedule=p,y.cancel=g,y.flush=v,i==null||i.addEventListener("abort",g,{once:!0}),y}e.debounce=t})(MQ);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MQ;function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:a=!1,trailing:o=!0,maxWait:c}=s,u=Array(2);a&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...g){d=r.apply(this,g),f=null},i,{edges:u}),p=function(...g){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=r.apply(this,g),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,g),d)},m=()=>(h.flush(),d);return p.cancel=h.cancel,p.flush=m,p}e.debounce=n})(DQ);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DQ;function n(r,i=0,s={}){const{leading:a=!0,trailing:o=!0}=s;return t.debounce(r,i,{leading:a,maxWait:i,trailing:o})}e.throttle=n})(IQ);var hDe=IQ.throttle;const pDe=oi(hDe);var Vm=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function aB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function X_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aB(Object(n),!0).forEach(function(r){mDe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mDe(e,t,n){return(t=gDe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gDe(e){var t=vDe(e,"string");return typeof t=="symbol"?t:t+""}function vDe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bi=w.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:s="100%",minWidth:a=0,minHeight:o,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:p,style:m={}}=e,g=w.useRef(null),v=w.useRef();v.current=p,w.useImperativeHandle(t,()=>g.current);var[y,x]=w.useState({containerWidth:r.width,containerHeight:r.height}),b=w.useCallback((E,N)=>{x(_=>{var k=Math.round(E),T=Math.round(N);return _.containerWidth===k&&_.containerHeight===T?_:{containerWidth:k,containerHeight:T}})},[]);w.useEffect(()=>{var E=T=>{var A,{width:j,height:D}=T[0].contentRect;b(j,D),(A=v.current)===null||A===void 0||A.call(v,j,D)};d>0&&(E=pDe(E,d,{trailing:!0,leading:!1}));var N=new ResizeObserver(E),{width:_,height:k}=g.current.getBoundingClientRect();return b(_,k),N.observe(g.current),()=>{N.disconnect()}},[b,d]);var S=w.useMemo(()=>{var{containerWidth:E,containerHeight:N}=y;if(E<0||N<0)return null;Vm(Ru(i)||Ru(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,s),Vm(!n||n>0,"The aspect(%s) must be greater than zero.",n);var _=Ru(i)?E:i,k=Ru(s)?N:s;return n&&n>0&&(_?k=_/n:k&&(_=k*n),c&&k>c&&(k=c)),Vm(_>0||k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,_,k,i,s,a,o,n),w.Children.map(u,T=>w.cloneElement(T,{width:_,height:k,style:X_({width:_,height:k},T.props.style)}))},[n,u,s,c,o,a,y,i]);return w.createElement("div",{id:f?"".concat(f):void 0,className:bt("recharts-responsive-container",h),style:X_(X_({},m),{},{width:i,height:s,minWidth:a,minHeight:o,maxHeight:c}),ref:g},w.createElement("div",{style:{width:0,height:0,overflow:"visible"}},S))}),ul=e=>null;ul.displayName="Cell";function yDe(e,t,n){return(t=xDe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xDe(e){var t=bDe(e,"string");return typeof t=="symbol"?t:t+""}function bDe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class wDe{constructor(t){yDe(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function oB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function EDe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oB(Object(n),!0).forEach(function(r){SDe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function SDe(e,t,n){return(t=NDe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NDe(e){var t=_De(e,"string");return typeof t=="symbol"?t:t+""}function _De(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kDe={cacheSize:2e3,enableCache:!0},RQ=EDe({},kDe),lB=new wDe(RQ.cacheSize),CDe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},cB="recharts_measurement_span";function TDe(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",a=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(a,"|").concat(o)}var uB=(e,t)=>{try{var n=document.getElementById(cB);n||(n=document.createElement("span"),n.setAttribute("id",cB),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,CDe,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Wm=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Qc.isSsr)return{width:0,height:0};if(!RQ.enableCache)return uB(t,n);var r=TDe(t,n),i=lB.get(r);if(i)return i;var s=uB(t,n);return lB.set(r,s),s},dB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,fB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ADe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,jDe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,LQ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},ODe=Object.keys(LQ),Ff="NaN";function PDe(e,t){return e*LQ[t]}class Pi{static parse(t){var n,[,r,i]=(n=jDe.exec(t))!==null&&n!==void 0?n:[];return new Pi(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,qi(t)&&(this.unit=""),n!==""&&!ADe.test(n)&&(this.num=NaN,this.unit=""),ODe.includes(n)&&(this.num=PDe(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new Pi(NaN,""):new Pi(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Pi(NaN,""):new Pi(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Pi(NaN,""):new Pi(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Pi(NaN,""):new Pi(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return qi(this.num)}}function FQ(e){if(e.includes(Ff))return Ff;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,s]=(n=dB.exec(t))!==null&&n!==void 0?n:[],a=Pi.parse(r??""),o=Pi.parse(s??""),c=i==="*"?a.multiply(o):a.divide(o);if(c.isNaN())return Ff;t=t.replace(dB,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=fB.exec(t))!==null&&u!==void 0?u:[],p=Pi.parse(d??""),m=Pi.parse(h??""),g=f==="+"?p.add(m):p.subtract(m);if(g.isNaN())return Ff;t=t.replace(fB,g.toString())}return t}var hB=/\(([^()]*)\)/;function IDe(e){for(var t=e,n;(n=hB.exec(t))!=null;){var[,r]=n;t=t.replace(hB,FQ(r))}return t}function DDe(e){var t=e.replace(/\s+/g,"");return t=IDe(t),t=FQ(t),t}function MDe(e){try{return DDe(e)}catch{return Ff}}function Q_(e){var t=MDe(e.slice(5,-1));return t===Ff?"":t}var RDe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],LDe=["dx","dy","angle","className","breakAll"];function FT(){return FT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FT.apply(null,arguments)}function pB(e,t){if(e==null)return{};var n,r,i=FDe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function FDe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var BQ=/[ \f\n\r\t\v\u2028\u2029]+/,$Q=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];tn(t)||(n?i=t.toString().split(""):i=t.toString().split(BQ));var s=i.map(o=>({word:o,width:Wm(o,r).width})),a=n?0:Wm("",r).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}},BDe=(e,t,n,r,i)=>{var{maxLines:s,children:a,style:o,breakAll:c}=e,u=De(s),d=a,f=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j.reduce((D,I)=>{var{word:M,width:L}=I,P=D[D.length-1];if(P&&(r==null||i||P.width+L+n<Number(r)))P.words.push(M),P.width+=L+n;else{var B={words:[M],width:L};D.push(B)}return D},[])},h=f(t),p=A=>A.reduce((j,D)=>j.width>D.width?j:D);if(!u||i)return h;var m=h.length>s||p(h).width>Number(r);if(!m)return h;for(var g="",v=A=>{var j=d.slice(0,A),D=$Q({breakAll:c,style:o,children:j+g}).wordsWithComputedWidth,I=f(D),M=I.length>s||p(I).width>Number(r);return[M,I]},y=0,x=d.length-1,b=0,S;y<=x&&b<=d.length-1;){var E=Math.floor((y+x)/2),N=E-1,[_,k]=v(N),[T]=v(E);if(!_&&!T&&(y=E+1),_&&T&&(x=E-1),!_&&T){S=k;break}b++}return S||h},mB=e=>{var t=tn(e)?[]:e.toString().split(BQ);return[{words:t}]},$De=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:a}=e;if((t||n)&&!Qc.isSsr){var o,c,u=$Q({breakAll:s,children:r,style:i});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,c=f}else return mB(r);return BDe({breakAll:s,children:r,maxLines:a,style:i},o,c,t,n)}return mB(r)},gB="#808080",ES=w.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:a=!1,textAnchor:o="start",verticalAnchor:c="end",fill:u=gB}=e,d=pB(e,RDe),f=w.useMemo(()=>$De({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:a,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,a,d.style,d.width]),{dx:h,dy:p,angle:m,className:g,breakAll:v}=d,y=pB(d,LDe);if(!fo(n)||!fo(r))return null;var x=n+(De(h)?h:0),b=r+(De(p)?p:0),S;switch(c){case"start":S=Q_("calc(".concat(s,")"));break;case"middle":S=Q_("calc(".concat((f.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:S=Q_("calc(".concat(f.length-1," * -").concat(i,")"));break}var E=[];if(a){var N=f[0].width,{width:_}=d;E.push("scale(".concat(De(_)?_/N:1,")"))}return m&&E.push("rotate(".concat(m,", ").concat(x,", ").concat(b,")")),E.length&&(y.transform=E.join(" ")),w.createElement("text",FT({},Zt(y,!0),{ref:t,x,y:b,className:bt("recharts-text",g),textAnchor:o,fill:u.includes("url")?gB:u}),f.map((k,T)=>{var A=k.words.join(v?"":" ");return w.createElement("tspan",{x,dy:T===0?S:i,key:"".concat(A,"-").concat(T)},A)}))});ES.displayName="Text";var UDe=["offset"],zDe=["labelRef"];function vB(e,t){if(e==null)return{};var n,r,i=HDe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function HDe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function yB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function On(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yB(Object(n),!0).forEach(function(r){VDe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VDe(e,t,n){return(t=WDe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WDe(e){var t=qDe(e,"string");return typeof t=="symbol"?t:t+""}function qDe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lo(){return Lo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lo.apply(null,arguments)}var KDe=e=>{var{value:t,formatter:n}=e,r=tn(e.children)?t:e.children;return typeof n=="function"?n(r):r},bD=e=>e!=null&&typeof e=="function",GDe=(e,t)=>{var n=Sr(t-e),r=Math.min(Math.abs(t-e),360);return n*r},YDe=(e,t,n,r)=>{var{position:i,offset:s,className:a}=e,{cx:o,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:p}=r,m=(u+d)/2,g=GDe(f,h),v=g>=0?1:-1,y,x;i==="insideStart"?(y=f+v*s,x=p):i==="insideEnd"?(y=h-v*s,x=!p):i==="end"&&(y=h+v*s,x=p),x=g<=0?x:!x;var b=Yn(o,c,m,y),S=Yn(o,c,m,y+(x?1:-1)*359),E="M".concat(b.x,",").concat(b.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(x?0:1,`,
    `).concat(S.x,",").concat(S.y),N=tn(e.id)?Wg("recharts-radial-line-"):e.id;return w.createElement("text",Lo({},n,{dominantBaseline:"central",className:bt("recharts-radial-bar-label",a)}),w.createElement("defs",null,w.createElement("path",{id:N,d:E})),w.createElement("textPath",{xlinkHref:"#".concat(N)},t))},XDe=(e,t,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:a,startAngle:o,endAngle:c}=e,u=(o+c)/2;if(n==="outside"){var{x:d,y:f}=Yn(r,i,a+t,u);return{x:d,y:f,textAnchor:d>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var h=(s+a)/2,{x:p,y:m}=Yn(r,i,h,u);return{x:p,y:m,textAnchor:"middle",verticalAnchor:"middle"}},QDe=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,{x:s,y:a,width:o,height:c}=t,u=c>=0?1:-1,d=u*r,f=u>0?"end":"start",h=u>0?"start":"end",p=o>=0?1:-1,m=p*r,g=p>0?"end":"start",v=p>0?"start":"end";if(i==="top"){var y={x:s+o/2,y:a-u*r,textAnchor:"middle",verticalAnchor:f};return On(On({},y),n?{height:Math.max(a-n.y,0),width:o}:{})}if(i==="bottom"){var x={x:s+o/2,y:a+c+d,textAnchor:"middle",verticalAnchor:h};return On(On({},x),n?{height:Math.max(n.y+n.height-(a+c),0),width:o}:{})}if(i==="left"){var b={x:s-m,y:a+c/2,textAnchor:g,verticalAnchor:"middle"};return On(On({},b),n?{width:Math.max(b.x-n.x,0),height:c}:{})}if(i==="right"){var S={x:s+o+m,y:a+c/2,textAnchor:v,verticalAnchor:"middle"};return On(On({},S),n?{width:Math.max(n.x+n.width-S.x,0),height:c}:{})}var E=n?{width:o,height:c}:{};return i==="insideLeft"?On({x:s+m,y:a+c/2,textAnchor:v,verticalAnchor:"middle"},E):i==="insideRight"?On({x:s+o-m,y:a+c/2,textAnchor:g,verticalAnchor:"middle"},E):i==="insideTop"?On({x:s+o/2,y:a+d,textAnchor:"middle",verticalAnchor:h},E):i==="insideBottom"?On({x:s+o/2,y:a+c-d,textAnchor:"middle",verticalAnchor:f},E):i==="insideTopLeft"?On({x:s+m,y:a+d,textAnchor:v,verticalAnchor:h},E):i==="insideTopRight"?On({x:s+o-m,y:a+d,textAnchor:g,verticalAnchor:h},E):i==="insideBottomLeft"?On({x:s+m,y:a+c-d,textAnchor:v,verticalAnchor:f},E):i==="insideBottomRight"?On({x:s+o-m,y:a+c-d,textAnchor:g,verticalAnchor:f},E):i&&typeof i=="object"&&(De(i.x)||Ru(i.x))&&(De(i.y)||Ru(i.y))?On({x:s+wi(i.x,o),y:a+wi(i.y,c),textAnchor:"end",verticalAnchor:"end"},E):On({x:s+o/2,y:a+c/2,textAnchor:"middle",verticalAnchor:"middle"},E)},JDe=e=>"cx"in e&&De(e.cx);function ts(e){var{offset:t=5}=e,n=vB(e,UDe),r=On({offset:t},n),{viewBox:i,position:s,value:a,children:o,content:c,className:u="",textBreakAll:d,labelRef:f}=r,h=We(AX),p=dI(),m=s==="center"?p:h??p,g=i||m;if(!g||tn(a)&&tn(o)&&!w.isValidElement(c)&&typeof c!="function")return null;var v=On(On({},r),{},{viewBox:g});if(w.isValidElement(c)){var{labelRef:y}=v,x=vB(v,zDe);return w.cloneElement(c,x)}var b;if(typeof c=="function"){if(b=w.createElement(c,v),w.isValidElement(b))return b}else b=KDe(r);var S=JDe(g),E=Zt(r,!0);if(S&&(s==="insideStart"||s==="insideEnd"||s==="end"))return YDe(r,b,E,g);var N=S?XDe(g,r.offset,r.position):QDe(r,g);return w.createElement(ES,Lo({ref:f,className:bt("recharts-label",u)},E,N,{breakAll:d}),b)}ts.displayName="Label";var UQ=e=>{var{cx:t,cy:n,angle:r,startAngle:i,endAngle:s,r:a,radius:o,innerRadius:c,outerRadius:u,x:d,y:f,top:h,left:p,width:m,height:g,clockWise:v,labelViewBox:y}=e;if(y)return y;if(De(m)&&De(g)){if(De(d)&&De(f))return{x:d,y:f,width:m,height:g};if(De(h)&&De(p))return{x:h,y:p,width:m,height:g}}if(De(d)&&De(f))return{x:d,y:f,width:0,height:0};if(De(t)&&De(n))return{cx:t,cy:n,startAngle:i||r||0,endAngle:s||r||0,innerRadius:c||0,outerRadius:u||o||a||0,clockWise:v};if(e.viewBox)return e.viewBox},ZDe=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?w.createElement(ts,Lo({key:"label-implicit"},r)):fo(e)?w.createElement(ts,Lo({key:"label-implicit",value:e},r)):w.isValidElement(e)?e.type===ts?w.cloneElement(e,On({key:"label-implicit"},r)):w.createElement(ts,Lo({key:"label-implicit",content:e},r)):bD(e)?w.createElement(ts,Lo({key:"label-implicit",content:e},r)):e&&typeof e=="object"?w.createElement(ts,Lo({},e,{key:"label-implicit"},r)):null},eMe=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var{children:i,labelRef:s}=t,a=UQ(t),o=tv(i,ts).map((u,d)=>w.cloneElement(u,{viewBox:n||a,key:"label-".concat(d)}));if(!r)return o;var c=ZDe(t.label,n||a,s);return[c,...o]};ts.parseViewBox=UQ;ts.renderCallByParent=eMe;var zQ={},HQ={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(HQ);var VQ={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(VQ);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HQ,n=VQ,r=HE;function i(s){if(r.isArrayLike(s))return t.last(n.toArray(s))}e.last=i})(zQ);var tMe=zQ.last;const nMe=oi(tMe);var rMe=["valueAccessor"],iMe=["data","dataKey","clockWise","id","textBreakAll"];function d1(){return d1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d1.apply(null,arguments)}function xB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xB(Object(n),!0).forEach(function(r){sMe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sMe(e,t,n){return(t=aMe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aMe(e){var t=oMe(e,"string");return typeof t=="symbol"?t:t+""}function oMe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wB(e,t){if(e==null)return{};var n,r,i=lMe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function lMe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var cMe=e=>Array.isArray(e.value)?nMe(e.value):e.value;function Yo(e){var{valueAccessor:t=cMe}=e,n=wB(e,rMe),{data:r,dataKey:i,clockWise:s,id:a,textBreakAll:o}=n,c=wB(n,iMe);return!r||!r.length?null:w.createElement(Hn,{className:"recharts-label-list"},r.map((u,d)=>{var f=tn(i)?t(u,d):Mt(u&&u.payload,i),h=tn(a)?{}:{id:"".concat(a,"-").concat(d)};return w.createElement(ts,d1({},Zt(u,!0),c,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:o,viewBox:ts.parseViewBox(tn(s)?u:bB(bB({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}Yo.displayName="LabelList";function uMe(e,t){return e?e===!0?w.createElement(Yo,{key:"labelList-implicit",data:t}):w.isValidElement(e)||bD(e)?w.createElement(Yo,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?w.createElement(Yo,d1({data:t},e,{key:"labelList-implicit"})):null:null}function dMe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var{children:r}=e,i=tv(r,Yo).map((a,o)=>w.cloneElement(a,{data:t,key:"labelList-".concat(o)}));if(!n)return i;var s=uMe(e.label,t);return[s,...i]}Yo.renderCallByParent=dMe;function BT(){return BT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BT.apply(null,arguments)}var wD=e=>{var{cx:t,cy:n,r,className:i}=e,s=bt("recharts-dot",i);return t===+t&&n===+n&&r===+r?w.createElement("circle",BT({},Da(e),$P(e),{className:s,cx:t,cy:n,r})):null},WQ=e=>e.graphicalItems.polarItems,fMe=ae([En,dv],YI),ED=ae([WQ,Vn,fMe],XI),hMe=ae([ED],QI),SD=ae([hMe,BI],JI),pMe=ae([SD,Vn,ED],eD),mMe=ae([SD,Vn,ED],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(i=>{var s,a=Mt(r,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:a,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(r=>({value:Mt(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]}))),EB=()=>{},gMe=ae([Vn,qX,EB,mMe,EB,yt,En],nD),qQ=ae([Vn,yt,SD,pMe,uv,En,gMe],rD),vMe=ae([qQ,Vn,fp],aD);ae([Vn,qQ,vMe,En],lD);var yMe={radiusAxis:{},angleAxis:{}},KQ=Es({name:"polarAxis",initialState:yMe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:fct,removeRadiusAxis:hct,addAngleAxis:pct,removeAngleAxis:mct}=KQ.actions,xMe=KQ.reducer;function SB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function NB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SB(Object(n),!0).forEach(function(r){bMe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bMe(e,t,n){return(t=wMe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wMe(e){var t=EMe(e,"string");return typeof t=="symbol"?t:t+""}function EMe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SMe=(e,t)=>t,ND=ae([WQ,SMe],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),NMe=[],_D=(e,t,n)=>(n==null?void 0:n.length)===0?NMe:n,GQ=ae([BI,ND,_D],(e,t,n)=>{var{chartData:r}=e;if(t!=null){var i;if((t==null?void 0:t.data)!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>NB(NB({},t.presentationProps),s.props))),i!=null)return i}}),_Me=ae([GQ,ND,_D],(e,t,n)=>{if(!(e==null||t==null))return e.map((r,i)=>{var s,a=Mt(r,t.nameKey,t.name),o;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?o=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?o=r.fill:o=t.fill,{value:Xc(a,t.dataKey),color:o,payload:r,type:t.legendType}})}),kMe=ae([GQ,ND,_D,dr],(e,t,n,r)=>{if(!(t==null||e==null))return v3e({offset:r,pieSettings:t,displayedData:e,cells:n})}),YQ={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const s=n[Symbol.toStringTag];return s==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${s}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(YQ);var CMe=YQ.isPlainObject;const TMe=oi(CMe);function f1(){return f1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f1.apply(null,arguments)}var _B=(e,t,n,r,i)=>{var s=n-r,a;return a="M ".concat(e,",").concat(t),a+="L ".concat(e+n,",").concat(t),a+="L ".concat(e+n-s/2,",").concat(t+i),a+="L ".concat(e+n-s/2-r,",").concat(t+i),a+="L ".concat(e,",").concat(t," Z"),a},AMe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},jMe=e=>{var t=Ti(e,AMe),n=w.useRef(),[r,i]=w.useState(-1);w.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var v=n.current.getTotalLength();v&&i(v)}catch{}},[]);var{x:s,y:a,upperWidth:o,lowerWidth:c,height:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isUpdateAnimationActive:m}=t;if(s!==+s||a!==+a||o!==+o||c!==+c||u!==+u||o===0&&c===0||u===0)return null;var g=bt("recharts-trapezoid",d);return m?w.createElement(Xb,{canBegin:r>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:a},to:{upperWidth:o,lowerWidth:c,height:u,x:s,y:a},duration:h,animationEasing:f,isActive:m},v=>{var{upperWidth:y,lowerWidth:x,height:b,x:S,y:E}=v;return w.createElement(Xb,{canBegin:r>0,from:"0px ".concat(r===-1?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,easing:f},w.createElement("path",f1({},Zt(t,!0),{className:g,d:_B(S,E,y,x,b),ref:n})))}):w.createElement("g",null,w.createElement("path",f1({},Zt(t,!0),{className:g,d:_B(s,a,o,c,u)})))},OMe=["option","shapeType","propTransformer","activeClassName","isActive"];function PMe(e,t){if(e==null)return{};var n,r,i=IMe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function IMe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function kB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function h1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kB(Object(n),!0).forEach(function(r){DMe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function DMe(e,t,n){return(t=MMe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MMe(e){var t=RMe(e,"string");return typeof t=="symbol"?t:t+""}function RMe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LMe(e,t){return h1(h1({},t),e)}function FMe(e,t){return e==="symbols"}function CB(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return w.createElement(bY,n);case"trapezoid":return w.createElement(jMe,n);case"sector":return w.createElement(SY,n);case"symbols":if(FMe(t))return w.createElement(WP,n);break;default:return null}}function BMe(e){return w.isValidElement(e)?e.props:e}function XQ(e){var{option:t,shapeType:n,propTransformer:r=LMe,activeClassName:i="recharts-active-shape",isActive:s}=e,a=PMe(e,OMe),o;if(w.isValidElement(t))o=w.cloneElement(t,h1(h1({},a),BMe(t)));else if(typeof t=="function")o=t(a);else if(TMe(t)&&typeof t!="boolean"){var c=r(t,a);o=w.createElement(CB,{shapeType:n,elementProps:c})}else{var u=a;o=w.createElement(CB,{shapeType:n,elementProps:u})}return s?w.createElement(Hn,{className:i},o):o}var kD=(e,t)=>{var n=Cn();return(r,i)=>s=>{e==null||e(r,i,s),n(lQ({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},CD=e=>{var t=Cn();return(n,r)=>i=>{e==null||e(n,r,i),t(HPe())}},TD=(e,t)=>{var n=Cn();return(r,i)=>s=>{e==null||e(r,i,s),n(VPe({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function SS(e){var{fn:t,args:n}=e,r=Cn(),i=ci();return w.useEffect(()=>{if(!i){var s=t(n);return r($Pe(s)),()=>{r(UPe(s))}}},[t,n,r,i]),null}var QQ=()=>{};function AD(e){var{legendPayload:t}=e,n=Cn(),r=ci();return w.useEffect(()=>r?QQ:(n(oY(t)),()=>{n(lY(t))}),[n,r,t]),null}function $Me(e){var{legendPayload:t}=e,n=Cn(),r=We(yt);return w.useEffect(()=>r!=="centric"&&r!=="radial"?QQ:(n(oY(t)),()=>{n(lY(t))}),[n,r,t]),null}function NS(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=w.useRef(Wg(t)),r=w.useRef(e);return r.current!==e&&(n.current=Wg(t),r.current=e),n.current}var J_,UMe=()=>{var[e]=w.useState(()=>Wg("uid-"));return e},zMe=(J_=jw.useId)!==null&&J_!==void 0?J_:UMe;function HMe(e,t){var n=zMe();return t||(e?"".concat(e,"-").concat(n):n)}var VMe=w.createContext(void 0),_S=e=>{var{id:t,type:n,children:r}=e,i=HMe("recharts-".concat(n),t);return w.createElement(VMe.Provider,{value:i},r(i))},WMe={cartesianItems:[],polarItems:[]},JQ=Es({name:"graphicalItems",initialState:WMe,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=Ko(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=Ko(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=Ko(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:qMe,replaceCartesianGraphicalItem:KMe,removeCartesianGraphicalItem:GMe,addPolarGraphicalItem:YMe,removePolarGraphicalItem:XMe}=JQ.actions,QMe=JQ.reducer;function jD(e){var t=Cn(),n=w.useRef(null);return w.useEffect(()=>{n.current===null?t(qMe(e)):n.current!==e&&t(KMe({prev:n.current,next:e})),n.current=e},[t,e]),w.useEffect(()=>()=>{n.current&&(t(GMe(n.current)),n.current=null)},[t]),null}function JMe(e){var t=Cn();return w.useEffect(()=>(t(YMe(e)),()=>{t(XMe(e))}),[t,e]),null}function ZMe(){}var e3e={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},TB={t:0},Z_={t:1};function kS(e){var t=Ti(e,e3e),{isActive:n,canBegin:r,duration:i,easing:s,begin:a,onAnimationEnd:o,onAnimationStart:c,children:u}=t,d=xY("JavascriptAnimate",t.animationManager),[f,h]=w.useState(n?TB:Z_),p=w.useRef(null);return w.useEffect(()=>{n||h(Z_)},[n]),w.useEffect(()=>{if(!n||!r)return ZMe;var m=yY(TB,Z_,gY(s),i,h,d.getTimeoutController()),g=()=>{p.current=m()};return d.start([c,a,g,i,o]),()=>{d.stop(),p.current&&p.current(),o()}},[n,r,i,s,a,c,o,d]),u(f.t)}var t3e=["onMouseEnter","onClick","onMouseLeave"],n3e=["id"],r3e=["id"];function OD(e,t){if(e==null)return{};var n,r,i=i3e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function i3e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function AB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Dn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AB(Object(n),!0).forEach(function(r){s3e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function s3e(e,t,n){return(t=a3e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a3e(e){var t=o3e(e,"string");return typeof t=="symbol"?t:t+""}function o3e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dl(){return dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dl.apply(null,arguments)}function l3e(e){var t=w.useMemo(()=>tv(e.children,ul),[e.children]),n=We(r=>_Me(r,e.id,t));return n==null?null:w.createElement($Me,{legendPayload:n})}function c3e(e){var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:a,name:o,hide:c,tooltipType:u}=e;return{dataDefinedOnItem:r==null?void 0:r.map(d=>d.tooltipPayload),positions:r==null?void 0:r.map(d=>d.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:a,dataKey:t,nameKey:n,name:Xc(o,t),hide:c,type:u,color:a,unit:""}}}var u3e=(e,t)=>e>t?"start":e<t?"end":"middle",d3e=(e,t,n)=>typeof t=="function"?t(e):wi(t,n,n*.8),f3e=(e,t,n)=>{var{top:r,left:i,width:s,height:a}=t,o=XG(s,a),c=i+wi(e.cx,s,s/2),u=r+wi(e.cy,a,a/2),d=wi(e.innerRadius,o,0),f=d3e(n,e.outerRadius,o),h=e.maxRadius||Math.sqrt(s*s+a*a)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:h}},h3e=(e,t)=>{var n=Sr(t-e),r=Math.min(Math.abs(t-e),360);return n*r},p3e=(e,t)=>{if(w.isValidElement(e))return w.cloneElement(e,t);if(typeof e=="function")return e(t);var n=bt("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return w.createElement(Xf,dl({},t,{type:"linear",className:n}))},m3e=(e,t,n)=>{if(w.isValidElement(e))return w.cloneElement(e,t);var r=n;if(typeof e=="function"&&(r=e(t),w.isValidElement(r)))return r;var i=bt("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return w.createElement(ES,dl({},t,{alignmentBaseline:"middle",className:i}),r)};function g3e(e){var{sectors:t,props:n,showLabels:r}=e,{label:i,labelLine:s,dataKey:a}=n;if(!r||!i||!t)return null;var o=Da(n),c=Zt(i,!1),u=Zt(s,!1),d=typeof i=="object"&&"offsetRadius"in i&&i.offsetRadius||20,f=t.map((h,p)=>{var m=(h.startAngle+h.endAngle)/2,g=Yn(h.cx,h.cy,h.outerRadius+d,m),v=Dn(Dn(Dn(Dn({},o),h),{},{stroke:"none"},c),{},{index:p,textAnchor:u3e(g.x,h.cx)},g),y=Dn(Dn(Dn(Dn({},o),h),{},{fill:"none",stroke:h.fill},u),{},{index:p,points:[Yn(h.cx,h.cy,h.outerRadius,m),g],key:"line"});return w.createElement(Hn,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(p)},s&&p3e(s,y),m3e(i,v,Mt(h,a)))});return w.createElement(Hn,{className:"recharts-pie-labels"},f)}function ZQ(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:i,showLabels:s}=e,a=We(Ic),{onMouseEnter:o,onClick:c,onMouseLeave:u}=i,d=OD(i,t3e),f=kD(o,i.dataKey),h=CD(u),p=TD(c,i.dataKey);return t==null?null:w.createElement(w.Fragment,null,t.map((m,g)=>{if((m==null?void 0:m.startAngle)===0&&(m==null?void 0:m.endAngle)===0&&t.length!==1)return null;var v=n&&String(g)===a,y=a?r:null,x=v?n:y,b=Dn(Dn({},m),{},{stroke:m.stroke,tabIndex:-1,[nY]:g,[rY]:i.dataKey});return w.createElement(Hn,dl({tabIndex:-1,className:"recharts-pie-sector"},ev(d,m,g),{onMouseEnter:f(m,g),onMouseLeave:h(m,g),onClick:p(m,g),key:"sector-".concat(m==null?void 0:m.startAngle,"-").concat(m==null?void 0:m.endAngle,"-").concat(m.midAngle,"-").concat(g)}),w.createElement(XQ,dl({option:x,isActive:v,shapeType:"sector"},b)))}),w.createElement(g3e,{sectors:t,props:i,showLabels:s}))}function v3e(e){var t,{pieSettings:n,displayedData:r,cells:i,offset:s}=e,{cornerRadius:a,startAngle:o,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=n,h=Math.abs(n.minAngle),p=h3e(o,c),m=Math.abs(p),g=r.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,v=r.filter(N=>Mt(N,u,0)!==0).length,y=(m>=360?v:v-1)*g,x=m-v*h-y,b=r.reduce((N,_)=>{var k=Mt(_,u,0);return N+(De(k)?k:0)},0),S;if(b>0){var E;S=r.map((N,_)=>{var k=Mt(N,u,0),T=Mt(N,d,_),A=f3e(n,s,N),j=(De(k)?k:0)/b,D,I=Dn(Dn({},N),i&&i[_]&&i[_].props);_?D=E.endAngle+Sr(p)*g*(k!==0?1:0):D=o;var M=D+Sr(p)*((k!==0?h:0)+j*x),L=(D+M)/2,P=(A.innerRadius+A.outerRadius)/2,B=[{name:T,value:k,payload:I,dataKey:u,type:f}],R=Yn(A.cx,A.cy,P,L);return E=Dn(Dn(Dn(Dn({},n.presentationProps),{},{percent:j,cornerRadius:a,name:T,tooltipPayload:B,midAngle:L,middleRadius:P,tooltipPosition:R},I),A),{},{value:Mt(N,u),startAngle:D,endAngle:M,payload:I,paddingAngle:Sr(p)*g}),E})}return S}function y3e(e){var{props:t,previousSectorsRef:n}=e,{sectors:r,isAnimationActive:i,animationBegin:s,animationDuration:a,animationEasing:o,activeShape:c,inactiveShape:u,onAnimationStart:d,onAnimationEnd:f}=t,h=NS(t,"recharts-pie-"),p=n.current,[m,g]=w.useState(!0),v=w.useCallback(()=>{typeof f=="function"&&f(),g(!1)},[f]),y=w.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return w.createElement(kS,{begin:s,duration:a,isActive:i,easing:o,onAnimationStart:y,onAnimationEnd:v,key:h},x=>{var b=[],S=r&&r[0],E=S.startAngle;return r.forEach((N,_)=>{var k=p&&p[_],T=_>0?Pc(N,"paddingAngle",0):0;if(k){var A=s5(k.endAngle-k.startAngle,N.endAngle-N.startAngle),j=Dn(Dn({},N),{},{startAngle:E+T,endAngle:E+A(x)+T});b.push(j),E=j.endAngle}else{var{endAngle:D,startAngle:I}=N,M=s5(0,D-I),L=M(x),P=Dn(Dn({},N),{},{startAngle:E+T,endAngle:E+L+T});b.push(P),E=P.endAngle}}),n.current=b,w.createElement(Hn,null,w.createElement(ZQ,{sectors:b,activeShape:c,inactiveShape:u,allOtherPieProps:t,showLabels:!m}))})}function x3e(e){var{sectors:t,isAnimationActive:n,activeShape:r,inactiveShape:i}=e,s=w.useRef(null),a=s.current;return n&&t&&t.length&&(!a||a!==t)?w.createElement(y3e,{props:e,previousSectorsRef:s}):w.createElement(ZQ,{sectors:t,activeShape:r,inactiveShape:i,allOtherPieProps:e,showLabels:!0})}function b3e(e){var{hide:t,className:n,rootTabIndex:r}=e,i=bt("recharts-pie",n);return t?null:w.createElement(Hn,{tabIndex:r,className:i},w.createElement(x3e,e))}var w3e={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Qc.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function E3e(e){var{id:t}=e,n=OD(e,n3e),r=w.useMemo(()=>tv(e.children,ul),[e.children]),i=We(s=>kMe(s,t,r));return w.createElement(w.Fragment,null,w.createElement(SS,{fn:c3e,args:Dn(Dn({},e),{},{sectors:i})}),w.createElement(b3e,dl({},n,{sectors:i})))}function Ph(e){var t=Ti(e,w3e),{id:n}=t,r=OD(t,r3e),i=Da(r);return w.createElement(_S,{id:n,type:"pie"},s=>w.createElement(w.Fragment,null,w.createElement(JMe,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i}),w.createElement(l3e,dl({},r,{id:s})),w.createElement(E3e,dl({},r,{id:s})),r.children))}Ph.displayName="Pie";var S3e=ae([dr],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),N3e=ae([S3e,gl,vl],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),CS=()=>We(N3e),_3e=()=>We(jIe);function jB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function OB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jB(Object(n),!0).forEach(function(r){k3e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function k3e(e,t,n){return(t=C3e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C3e(e){var t=T3e(e,"string");return typeof t=="symbol"?t:t+""}function T3e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var A3e=e=>{var{point:t,childIndex:n,mainColor:r,activeDot:i,dataKey:s}=e;if(i===!1||t.x==null||t.y==null)return null;var a=OB(OB({index:n,dataKey:s,cx:t.x,cy:t.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Zt(i,!1)),$P(i)),o;return w.isValidElement(i)?o=w.cloneElement(i,a):typeof i=="function"?o=i(a):o=w.createElement(wD,a),w.createElement(Hn,{className:"recharts-active-dot"},o)};function $T(e){var{points:t,mainColor:n,activeDot:r,itemDataKey:i}=e,s=We(Ic),a=_3e();if(t==null||a==null)return null;var o=t.find(c=>a.includes(c.payload));return tn(o)?null:A3e({point:o,childIndex:Number(s),mainColor:n,dataKey:i,activeDot:r})}var j3e=["x","y"];function UT(){return UT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UT.apply(null,arguments)}function PB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PB(Object(n),!0).forEach(function(r){O3e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function O3e(e,t,n){return(t=P3e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P3e(e){var t=I3e(e,"string");return typeof t=="symbol"?t:t+""}function I3e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D3e(e,t){if(e==null)return{};var n,r,i=M3e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function M3e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function R3e(e,t){var{x:n,y:r}=e,i=D3e(e,j3e),s="".concat(n),a=parseInt(s,10),o="".concat(r),c=parseInt(o,10),u="".concat(t.height||i.height),d=parseInt(u,10),f="".concat(t.width||i.width),h=parseInt(f,10);return Xp(Xp(Xp(Xp(Xp({},t),i),a?{x:a}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function eJ(e){return w.createElement(XQ,UT({shapeType:"rectangle",propTransformer:R3e,activeClassName:"recharts-active-bar"},e))}var L3e=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(De(t))return t;var s=De(r)||tn(r);return s?t(r,i):(s||WV(),n)}},F3e={},tJ=Es({name:"errorBars",initialState:F3e,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:gct,removeErrorBar:vct}=tJ.actions,B3e=tJ.reducer,$3e=["children"];function U3e(e,t){if(e==null)return{};var n,r,i=z3e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function z3e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var H3e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},V3e=w.createContext(H3e);function nJ(e){var{children:t}=e,n=U3e(e,$3e);return w.createElement(V3e.Provider,{value:n},t)}function TS(e,t){var n,r,i=We(u=>xl(u,e)),s=We(u=>tu(u,t)),a=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Qi.allowDataOverflow,o=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Ji.allowDataOverflow,c=a||o;return{needClip:c,needClipX:a,needClipY:o}}function PD(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=CS(),{needClipX:s,needClipY:a,needClip:o}=TS(t,n);if(!o)return null;var{x:c,y:u,width:d,height:f}=i;return w.createElement("clipPath",{id:"clipPath-".concat(r)},w.createElement("rect",{x:s?c:c-d/2,y:a?u:u-f/2,width:s?d:d*2,height:a?f:f*2}))}var W3e=["onMouseEnter","onMouseLeave","onClick"],q3e=["value","background","tooltipPosition"],K3e=["id"],G3e=["onMouseEnter","onClick","onMouseLeave"];function Ih(){return Ih=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ih.apply(null,arguments)}function IB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Jr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IB(Object(n),!0).forEach(function(r){Y3e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Y3e(e,t,n){return(t=X3e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X3e(e){var t=Q3e(e,"string");return typeof t=="symbol"?t:t+""}function Q3e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p1(e,t){if(e==null)return{};var n,r,i=J3e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function J3e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Z3e=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:r,value:Xc(n,t),payload:e}]};function eRe(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:s,hide:a,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:Xc(s,t),hide:a,type:e.tooltipType,color:e.fill,unit:o}}}function tRe(e){var t=We(Ic),{data:n,dataKey:r,background:i,allOtherBarProps:s}=e,{onMouseEnter:a,onMouseLeave:o,onClick:c}=s,u=p1(s,W3e),d=kD(a,r),f=CD(o),h=TD(c,r);if(!i||n==null)return null;var p=Zt(i,!1);return w.createElement(w.Fragment,null,n.map((m,g)=>{var{value:v,background:y,tooltipPosition:x}=m,b=p1(m,q3e);if(!y)return null;var S=d(m,g),E=f(m,g),N=h(m,g),_=Jr(Jr(Jr(Jr(Jr({option:i,isActive:String(g)===t},b),{},{fill:"#eee"},y),p),ev(u,m,g)),{},{onMouseEnter:S,onMouseLeave:E,onClick:N,dataKey:r,index:g,className:"recharts-bar-background-rectangle"});return w.createElement(eJ,Ih({key:"background-bar-".concat(g)},_))}))}function rJ(e){var{data:t,props:n,showLabels:r}=e,i=Da(n),{id:s}=i,a=p1(i,K3e),{shape:o,dataKey:c,activeBar:u}=n,d=We(Ic),f=We(wQ),{onMouseEnter:h,onClick:p,onMouseLeave:m}=n,g=p1(n,G3e),v=kD(h,c),y=CD(m),x=TD(p,c);return t?w.createElement(w.Fragment,null,t.map((b,S)=>{var E=u&&String(S)===d&&(f==null||c===f),N=E?u:o,_=Jr(Jr(Jr({},a),b),{},{isActive:E,option:N,index:S,dataKey:c});return w.createElement(Hn,Ih({className:"recharts-bar-rectangle"},ev(g,b,S),{onMouseEnter:v(b,S),onMouseLeave:y(b,S),onClick:x(b,S),key:"rectangle-".concat(b==null?void 0:b.x,"-").concat(b==null?void 0:b.y,"-").concat(b==null?void 0:b.value,"-").concat(S)}),w.createElement(eJ,_))}),r&&Yo.renderCallByParent(n,t)):null}function nRe(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:s,animationBegin:a,animationDuration:o,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=n.current,h=NS(t,"recharts-bar-"),[p,m]=w.useState(!1),g=w.useCallback(()=>{typeof u=="function"&&u(),m(!1)},[u]),v=w.useCallback(()=>{typeof d=="function"&&d(),m(!0)},[d]);return w.createElement(kS,{begin:a,duration:o,isActive:s,easing:c,onAnimationEnd:g,onAnimationStart:v,key:h},y=>{var x=y===1?r:r==null?void 0:r.map((b,S)=>{var E=f&&f[S];if(E)return Jr(Jr({},b),{},{x:$r(E.x,b.x,y),y:$r(E.y,b.y,y),width:$r(E.width,b.width,y),height:$r(E.height,b.height,y)});if(i==="horizontal"){var N=$r(0,b.height,y);return Jr(Jr({},b),{},{y:b.y+b.height-N,height:N})}var _=$r(0,b.width,y);return Jr(Jr({},b),{},{width:_})});return y>0&&(n.current=x??null),x==null?null:w.createElement(Hn,null,w.createElement(rJ,{props:t,data:x,showLabels:!p}))})}function rRe(e){var{data:t,isAnimationActive:n}=e,r=w.useRef(null);return n&&t&&t.length&&(r.current==null||r.current!==t)?w.createElement(nRe,{previousRectanglesRef:r,props:e}):w.createElement(rJ,{props:e,data:t,showLabels:!0})}var iJ=0,iRe=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:Mt(e,t)}};class sRe extends w.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:a,needClip:o,background:c,id:u}=this.props;if(t)return null;var d=bt("recharts-bar",i),f=u;return w.createElement(Hn,{className:d,id:u},o&&w.createElement("defs",null,w.createElement(PD,{clipPathId:f,xAxisId:s,yAxisId:a})),w.createElement(Hn,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},w.createElement(tRe,{data:n,dataKey:r,background:c,allOtherBarProps:this.props}),w.createElement(rRe,this.props)),this.props.children)}}var aRe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Qc.isSsr,legendType:"rect",minPointSize:iJ,xAxisId:0,yAxisId:0};function oRe(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:a,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=TS(t,n),h=rv(),p=ci(),m=tv(e.children,ul),g=We(x=>DRe(x,t,n,p,e.id,m));if(h!=="vertical"&&h!=="horizontal")return null;var v,y=g==null?void 0:g[0];return y==null||y.height==null||y.width==null?v=0:v=h==="vertical"?y.height/2:y.width/2,w.createElement(nJ,{xAxisId:t,yAxisId:n,data:g,dataPointFormatter:iRe,errorBarOffset:v},w.createElement(sRe,Ih({},e,{layout:h,needClip:f,data:g,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:a,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function lRe(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:a,yAxis:o,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:p}=e,m=t==="horizontal"?o:a,g=d?m.scale.domain():null,v=pCe({numericAxis:m});return f.map((y,x)=>{var b,S,E,N,_,k;d?b=cCe(d[x],g):(b=Mt(y,n),Array.isArray(b)||(b=[v,b]));var T=L3e(r,iJ)(b[1],x);if(t==="horizontal"){var A,[j,D]=[o.scale(b[0]),o.scale(b[1])];S=R5({axis:a,ticks:c,bandSize:s,offset:i.offset,entry:y,index:x}),E=(A=D??j)!==null&&A!==void 0?A:void 0,N=i.size;var I=j-D;if(_=qi(I)?0:I,k={x:S,y:h.top,width:N,height:h.height},Math.abs(T)>0&&Math.abs(_)<Math.abs(T)){var M=Sr(_||T)*(Math.abs(T)-Math.abs(_));E-=M,_+=M}}else{var[L,P]=[a.scale(b[0]),a.scale(b[1])];if(S=L,E=R5({axis:o,ticks:u,bandSize:s,offset:i.offset,entry:y,index:x}),N=P-L,_=i.size,k={x:h.left,y:E,width:h.width,height:_},Math.abs(T)>0&&Math.abs(N)<Math.abs(T)){var B=Sr(N||T)*(Math.abs(T)-Math.abs(N));N+=B}}if(S==null||E==null||N==null||_==null)return null;var R=Jr(Jr({},y),{},{x:S,y:E,width:N,height:_,value:d?b:b[1],payload:y,background:k,tooltipPosition:{x:S+N/2,y:E+_/2}},p&&p[x]&&p[x].props);return R}).filter(Boolean)}function Qa(e){var t=Ti(e,aRe),n=ci();return w.createElement(_S,{id:t.id,type:"bar"},r=>w.createElement(w.Fragment,null,w.createElement(AD,{legendPayload:Z3e(t)}),w.createElement(SS,{fn:eRe,args:t}),w.createElement(jD,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:eY(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),w.createElement(oRe,Ih({},t,{id:r}))))}Qa.displayName="Bar";function DB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ny(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DB(Object(n),!0).forEach(function(r){cRe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cRe(e,t,n){return(t=uRe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uRe(e){var t=dRe(e,"string");return typeof t=="symbol"?t:t+""}function dRe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fRe=(e,t)=>t,hRe=(e,t,n)=>n,pRe=(e,t,n,r)=>r,mRe=(e,t,n,r,i)=>i,yv=ae([hv,mRe],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),gRe=ae([yv],e=>e==null?void 0:e.maxBarSize),vRe=(e,t,n,r,i,s)=>s,MB=(e,t,n)=>{var r=n??e;if(!tn(r))return wi(r,t,0)},yRe=ae([yt,hv,fRe,hRe,pRe],(e,t,n,r,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),xRe=(e,t,n,r)=>{var i=yt(e);return i==="horizontal"?e0(e,"yAxis",n,r):e0(e,"xAxis",t,r)},bRe=(e,t,n)=>{var r=yt(e);return r==="horizontal"?KF(e,"xAxis",t):KF(e,"yAxis",n)},wRe=(e,t,n)=>{var r={},i=e.filter(mS),s=e.filter(u=>u.stackId==null),a=i.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),r),o=Object.entries(a).map(u=>{var[d,f]=u,h=f.map(m=>m.dataKey),p=MB(t,n,f[0].barSize);return{stackId:d,dataKeys:h,barSize:p}}),c=s.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=MB(t,n,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...o,...c]},ERe=ae([yRe,UOe,bRe],wRe),SRe=(e,t,n,r,i)=>{var s,a,o=yv(e,t,n,r,i);if(o!=null){var c=yt(e),u=EX(e),{maxBarSize:d}=o,f=tn(d)?u:d,h,p;return c==="horizontal"?(h=mo(e,"xAxis",t,r),p=po(e,"xAxis",t,r)):(h=mo(e,"yAxis",n,r),p=po(e,"yAxis",n,r)),(s=(a=bd(h,p,!0))!==null&&a!==void 0?a:f)!==null&&s!==void 0?s:0}},sJ=(e,t,n,r)=>{var i=yt(e),s,a;return i==="horizontal"?(s=mo(e,"xAxis",t,r),a=po(e,"xAxis",t,r)):(s=mo(e,"yAxis",n,r),a=po(e,"yAxis",n,r)),bd(s,a)};function NRe(e,t,n,r,i){var s=r.length;if(!(s<1)){var a=wi(e,n,0,!0),o,c=[];if(qr(r[0].barSize)){var u=!1,d=n/s,f=r.reduce((y,x)=>y+(x.barSize||0),0);f+=(s-1)*a,f>=n&&(f-=(s-1)*a,a=0),f>=n&&d>0&&(u=!0,d*=.9,f=s*d);var h=(n-f)/2>>0,p={offset:h-a,size:0};o=r.reduce((y,x)=>{var b,S={stackId:x.stackId,dataKeys:x.dataKeys,position:{offset:p.offset+p.size+a,size:u?d:(b=x.barSize)!==null&&b!==void 0?b:0}},E=[...y,S];return p=E[E.length-1].position,E},c)}else{var m=wi(t,n,0,!0);n-2*m-(s-1)*a<=0&&(a=0);var g=(n-2*m-(s-1)*a)/s;g>1&&(g>>=0);var v=qr(i)?Math.min(g,i):g;o=r.reduce((y,x,b)=>[...y,{stackId:x.stackId,dataKeys:x.dataKeys,position:{offset:m+(g+a)*b+(g-v)/2,size:v}}],c)}return o}}var _Re=(e,t,n,r,i,s,a)=>{var o=tn(a)?t:a,c=NRe(n,r,i!==s?i:s,e,o);return i!==s&&c!=null&&(c=c.map(u=>Ny(Ny({},u),{},{position:Ny(Ny({},u.position),{},{offset:u.position.offset-i/2})}))),c},kRe=ae([ERe,EX,$Oe,SX,SRe,sJ,gRe],_Re),CRe=(e,t,n,r)=>mo(e,"xAxis",t,r),TRe=(e,t,n,r)=>mo(e,"yAxis",n,r),ARe=(e,t,n,r)=>po(e,"xAxis",t,r),jRe=(e,t,n,r)=>po(e,"yAxis",n,r),ORe=ae([kRe,yv],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),PRe=(e,t)=>{var n=pS(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:s}=i;if(s)return s.find(a=>a.key===n)}}}},IRe=ae([xRe,yv],PRe),DRe=ae([dr,CRe,TRe,ARe,jRe,ORe,yt,cv,sJ,IRe,yv,vRe],(e,t,n,r,i,s,a,o,c,u,d,f)=>{var{chartData:h,dataStartIndex:p,dataEndIndex:m}=o;if(!(d==null||s==null||a!=="horizontal"&&a!=="vertical"||t==null||n==null||r==null||i==null||c==null)){var{data:g}=d,v;if(g!=null&&g.length>0?v=g:v=h==null?void 0:h.slice(p,m+1),v!=null)return lRe({layout:a,barSettings:d,pos:s,bandSize:c,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:i,stackedData:u,displayedData:v,offset:e,cells:f})}}),aJ=e=>{var{chartData:t}=e,n=Cn(),r=ci();return w.useEffect(()=>r?()=>{}:(n(nB(t)),()=>{n(nB(void 0))}),[t,n,r]),null},RB={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},oJ=Es({name:"brush",initialState:RB,reducers:{setBrushSettings(e,t){return t.payload==null?RB:t.payload}}}),{setBrushSettings:yct}=oJ.actions,MRe=oJ.reducer;function RRe(e,t,n){return(t=LRe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LRe(e){var t=FRe(e,"string");return typeof t=="symbol"?t:t+""}function FRe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class ID{static create(t){return new ID(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}RRe(ID,"EPS",1e-4);function BRe(e){return(e%180+180)%180}var $Re=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=BRe(i),a=s*Math.PI/180,o=Math.atan(r/n),c=a>o&&a<Math.PI-o?r/Math.sin(a):n/Math.cos(a);return Math.abs(c)},URe={dots:[],areas:[],lines:[]},lJ=Es({name:"referenceElements",initialState:URe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Ko(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Ko(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Ko(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:xct,removeDot:bct,addArea:wct,removeArea:Ect,addLine:Sct,removeLine:Nct}=lJ.actions,zRe=lJ.reducer,HRe=w.createContext(void 0),VRe=e=>{var{children:t}=e,[n]=w.useState("".concat(Wg("recharts"),"-clip")),r=CS();if(r==null)return null;var{x:i,y:s,width:a,height:o}=r;return w.createElement(HRe.Provider,{value:n},w.createElement("defs",null,w.createElement("clipPath",{id:n},w.createElement("rect",{x:i,y:s,height:o,width:a}))),t)};function ek(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function cJ(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function WRe(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return $Re(r,n)}function qRe(e,t,n){var r=n==="width",{x:i,y:s,width:a,height:o}=e;return t===1?{start:r?i:s,end:r?i+a:s+o}:{start:r?i+a:s+o,end:r?i:s}}function m1(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-i)<=0}function KRe(e,t){return cJ(e,t+1)}function GRe(e,t,n,r,i){for(var s=(r||[]).slice(),{start:a,end:o}=t,c=0,u=1,d=a,f=function(){var m=r==null?void 0:r[c];if(m===void 0)return{v:cJ(r,u)};var g=c,v,y=()=>(v===void 0&&(v=n(m,g)),v),x=m.coordinate,b=c===0||m1(e,x,y,d,o);b||(c=0,d=a,u+=1),b&&(d=x+e*(y()/2+i),c+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function LB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Yr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LB(Object(n),!0).forEach(function(r){YRe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function YRe(e,t,n){return(t=XRe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XRe(e){var t=QRe(e,"string");return typeof t=="symbol"?t:t+""}function QRe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JRe(e,t,n,r,i){for(var s=(r||[]).slice(),a=s.length,{start:o}=t,{end:c}=t,u=function(h){var p=s[h],m,g=()=>(m===void 0&&(m=n(p,h)),m);if(h===a-1){var v=e*(p.coordinate+e*g()/2-c);s[h]=p=Yr(Yr({},p),{},{tickCoord:v>0?p.coordinate-v*e:p.coordinate})}else s[h]=p=Yr(Yr({},p),{},{tickCoord:p.coordinate});var y=m1(e,p.tickCoord,g,o,c);y&&(c=p.tickCoord-e*(g()/2+i),s[h]=Yr(Yr({},p),{},{isShow:!0}))},d=a-1;d>=0;d--)u(d);return s}function ZRe(e,t,n,r,i,s){var a=(r||[]).slice(),o=a.length,{start:c,end:u}=t;if(s){var d=r[o-1],f=n(d,o-1),h=e*(d.coordinate+e*f/2-u);a[o-1]=d=Yr(Yr({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var p=m1(e,d.tickCoord,()=>f,c,u);p&&(u=d.tickCoord-e*(f/2+i),a[o-1]=Yr(Yr({},d),{},{isShow:!0}))}for(var m=s?o-1:o,g=function(x){var b=a[x],S,E=()=>(S===void 0&&(S=n(b,x)),S);if(x===0){var N=e*(b.coordinate-e*E()/2-c);a[x]=b=Yr(Yr({},b),{},{tickCoord:N<0?b.coordinate-N*e:b.coordinate})}else a[x]=b=Yr(Yr({},b),{},{tickCoord:b.coordinate});var _=m1(e,b.tickCoord,E,c,u);_&&(c=b.tickCoord+e*(E()/2+i),a[x]=Yr(Yr({},b),{},{isShow:!0}))},v=0;v<m;v++)g(v);return a}function DD(e,t,n){var{tick:r,ticks:i,viewBox:s,minTickGap:a,orientation:o,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!i||!i.length||!r)return[];if(De(c)||Qc.isSsr){var h;return(h=KRe(i,De(c)?c:0))!==null&&h!==void 0?h:[]}var p=[],m=o==="top"||o==="bottom"?"width":"height",g=d&&m==="width"?Wm(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},v=(b,S)=>{var E=typeof u=="function"?u(b.value,S):b.value;return m==="width"?WRe(Wm(E,{fontSize:t,letterSpacing:n}),g,f):Wm(E,{fontSize:t,letterSpacing:n})[m]},y=i.length>=2?Sr(i[1].coordinate-i[0].coordinate):1,x=qRe(s,y,m);return c==="equidistantPreserveStart"?GRe(y,x,v,i,a):(c==="preserveStart"||c==="preserveStartEnd"?p=ZRe(y,x,v,i,a,c==="preserveStartEnd"):p=JRe(y,x,v,i,a),p.filter(b=>b.isShow))}var e4e=["viewBox"],t4e=["viewBox"];function Bf(){return Bf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bf.apply(null,arguments)}function FB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FB(Object(n),!0).forEach(function(r){MD(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function BB(e,t){if(e==null)return{};var n,r,i=n4e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function n4e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function MD(e,t,n){return(t=r4e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r4e(e){var t=i4e(e,"string");return typeof t=="symbol"?t:t+""}function i4e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class nu extends w.Component{constructor(t){super(t),this.tickRefs=w.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,n){var{viewBox:r}=t,i=BB(t,e4e),s=this.props,{viewBox:a}=s,o=BB(s,t4e);return!ek(r,a)||!ek(i,o)||!ek(n,this.state)}getTickLineCoord(t){var{x:n,y:r,width:i,height:s,orientation:a,tickSize:o,mirror:c,tickMargin:u}=this.props,d,f,h,p,m,g,v=c?-1:1,y=t.tickSize||o,x=De(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":d=f=t.coordinate,p=r+ +!c*s,h=p-v*y,g=h-v*u,m=x;break;case"left":h=p=t.coordinate,f=n+ +!c*i,d=f-v*y,m=d-v*u,g=x;break;case"right":h=p=t.coordinate,f=n+ +c*i,d=f+v*y,m=d+v*u,g=x;break;default:d=f=t.coordinate,p=r+ +c*s,h=p+v*y,g=h+v*u,m=x;break}return{line:{x1:d,y1:h,x2:f,y2:p},tick:{x:m,y:g}}}getTickTextAnchor(){var{orientation:t,mirror:n}=this.props,r;switch(t){case"left":r=n?"start":"end";break;case"right":r=n?"end":"start";break;default:r="middle";break}return r}getTickVerticalAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:t,y:n,width:r,height:i,orientation:s,mirror:a,axisLine:o}=this.props,c=nr(nr(nr({},Zt(this.props,!1)),Zt(o,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!a||s==="bottom"&&a);c=nr(nr({},c),{},{x1:t,y1:n+u*i,x2:t+r,y2:n+u*i})}else{var d=+(s==="left"&&!a||s==="right"&&a);c=nr(nr({},c),{},{x1:t+d*r,y1:n,x2:t+d*r,y2:n+i})}return w.createElement("line",Bf({},c,{className:bt("recharts-cartesian-axis-line",Pc(o,"className"))}))}static renderTickItem(t,n,r){var i,s=bt(n.className,"recharts-cartesian-axis-tick-value");if(w.isValidElement(t))i=w.cloneElement(t,nr(nr({},n),{},{className:s}));else if(typeof t=="function")i=t(nr(nr({},n),{},{className:s}));else{var a="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(a=bt(a,t.className)),i=w.createElement(ES,Bf({},n,{className:a}),r)}return i}renderTicks(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:s,tick:a,tickFormatter:o,unit:c,padding:u}=this.props,d=DD(nr(nr({},this.props),{},{ticks:r}),t,n),f=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),p=Da(this.props),m=Zt(a,!1),g=nr(nr({},p),{},{fill:"none"},Zt(i,!1)),v=d.map((y,x)=>{var{line:b,tick:S}=this.getTickLineCoord(y),E=nr(nr(nr(nr({textAnchor:f,verticalAnchor:h},p),{},{stroke:"none",fill:s},m),S),{},{index:x,payload:y,visibleTicksCount:d.length,tickFormatter:o,padding:u});return w.createElement(Hn,Bf({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},ev(this.props,y,x)),i&&w.createElement("line",Bf({},g,b,{className:bt("recharts-cartesian-axis-tick-line",Pc(i,"className"))})),a&&nu.renderTickItem(a,E,"".concat(typeof o=="function"?o(y.value,x):y.value).concat(c||"")))});return v.length>0?w.createElement("g",{className:"recharts-cartesian-axis-ticks"},v):null}render(){var{axisLine:t,width:n,height:r,className:i,hide:s}=this.props;if(s)return null;var{ticks:a}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:w.createElement(Hn,{className:bt("recharts-cartesian-axis",i),ref:o=>{if(o){var c=o.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,a),ts.renderCallByParent(this.props))}}MD(nu,"displayName","CartesianAxis");MD(nu,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var s4e=["x1","y1","x2","y2","key"],a4e=["offset"],o4e=["xAxisId","yAxisId"],l4e=["xAxisId","yAxisId"];function $B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Zr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$B(Object(n),!0).forEach(function(r){c4e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$B(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function c4e(e,t,n){return(t=u4e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u4e(e){var t=d4e(e,"string");return typeof t=="symbol"?t:t+""}function d4e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $u(){return $u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$u.apply(null,arguments)}function g1(e,t){if(e==null)return{};var n,r,i=f4e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function f4e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var h4e=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:a,ry:o}=e;return w.createElement("rect",{x:r,y:i,ry:o,width:s,height:a,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function uJ(e,t){var n;if(w.isValidElement(e))n=w.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:s,y2:a,key:o}=t,c=g1(t,s4e),u=Da(c),{offset:d}=u,f=g1(u,a4e);n=w.createElement("line",$u({},f,{x1:r,y1:i,x2:s,y2:a,fill:"none",key:o}))}return n}function p4e(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:a}=e,o=g1(e,o4e),c=i.map((u,d)=>{var f=Zr(Zr({},o),{},{x1:t,y1:u,x2:t+n,y2:u,key:"line-".concat(d),index:d});return uJ(r,f)});return w.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function m4e(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:a}=e,o=g1(e,l4e),c=i.map((u,d)=>{var f=Zr(Zr({},o),{},{x1:u,y1:t,x2:u,y2:t+n,key:"line-".concat(d),index:d});return uJ(r,f)});return w.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function g4e(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:s,height:a,horizontalPoints:o,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=o.map(f=>Math.round(f+i-i)).sort((f,h)=>f-h);i!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],m=p?i+a-f:u[h+1]-f;if(m<=0)return null;var g=h%t.length;return w.createElement("rect",{key:"react-".concat(h),y:f,x:r,height:m,width:s,stroke:"none",fill:t[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function v4e(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:a,height:o,verticalPoints:c}=e;if(!t||!n||!n.length)return null;var u=c.map(f=>Math.round(f+i-i)).sort((f,h)=>f-h);i!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],m=p?i+a-f:u[h+1]-f;if(m<=0)return null;var g=h%n.length;return w.createElement("rect",{key:"react-".concat(h),x:f,y:s,width:m,height:o,stroke:"none",fill:n[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var y4e=(e,t)=>{var{xAxis:n,width:r,height:i,offset:s}=e;return JG(DD(Zr(Zr(Zr({},nu.defaultProps),n),{},{ticks:ZG(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,t)},x4e=(e,t)=>{var{yAxis:n,width:r,height:i,offset:s}=e;return JG(DD(Zr(Zr(Zr({},nu.defaultProps),n),{},{ticks:ZG(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,t)},b4e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function dJ(e){var t=fI(),n=hI(),r=sY(),i=Zr(Zr({},Ti(e,b4e)),{},{x:De(e.x)?e.x:r.left,y:De(e.y)?e.y:r.top,width:De(e.width)?e.width:r.width,height:De(e.height)?e.height:r.height}),{xAxisId:s,yAxisId:a,x:o,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:p}=i,m=ci(),g=We(T=>GF(T,"xAxis",s,m)),v=We(T=>GF(T,"yAxis",a,m));if(!De(u)||u<=0||!De(d)||d<=0||!De(o)||o!==+o||!De(c)||c!==+c)return null;var y=i.verticalCoordinatesGenerator||y4e,x=i.horizontalCoordinatesGenerator||x4e,{horizontalPoints:b,verticalPoints:S}=i;if((!b||!b.length)&&typeof x=="function"){var E=h&&h.length,N=x({yAxis:v?Zr(Zr({},v),{},{ticks:E?h:v.ticks}):void 0,width:t,height:n,offset:r},E?!0:f);Vm(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(b=N)}if((!S||!S.length)&&typeof y=="function"){var _=p&&p.length,k=y({xAxis:g?Zr(Zr({},g),{},{ticks:_?p:g.ticks}):void 0,width:t,height:n,offset:r},_?!0:f);Vm(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(S=k)}return w.createElement("g",{className:"recharts-cartesian-grid"},w.createElement(h4e,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),w.createElement(g4e,$u({},i,{horizontalPoints:b})),w.createElement(v4e,$u({},i,{verticalPoints:S})),w.createElement(p4e,$u({},i,{offset:r,horizontalPoints:b,xAxis:g,yAxis:v})),w.createElement(m4e,$u({},i,{offset:r,verticalPoints:S,xAxis:g,yAxis:v})))}dJ.displayName="CartesianGrid";var fJ=(e,t,n,r)=>mo(e,"xAxis",t,r),hJ=(e,t,n,r)=>po(e,"xAxis",t,r),pJ=(e,t,n,r)=>mo(e,"yAxis",n,r),mJ=(e,t,n,r)=>po(e,"yAxis",n,r),w4e=ae([yt,fJ,pJ,hJ,mJ],(e,t,n,r,i)=>bo(e,"xAxis")?bd(t,r,!1):bd(n,i,!1)),E4e=(e,t,n,r,i)=>i;function S4e(e){return e.type==="line"}var N4e=ae([hv,E4e],(e,t)=>e.filter(S4e).find(n=>n.id===t)),_4e=ae([yt,fJ,pJ,hJ,mJ,N4e,w4e,cv],(e,t,n,r,i,s,a,o)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=o;if(!(s==null||t==null||n==null||r==null||i==null||r.length===0||i.length===0||a==null)){var{dataKey:f,data:h}=s,p;if(h!=null&&h.length>0?p=h:p=c==null?void 0:c.slice(u,d+1),p!=null)return q4e({layout:e,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:f,bandSize:a,displayedData:p})}}),k4e=["id"],C4e=["type","layout","connectNulls","needClip"],T4e=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function UB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ga(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UB(Object(n),!0).forEach(function(r){A4e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function A4e(e,t,n){return(t=j4e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j4e(e){var t=O4e(e,"string");return typeof t=="symbol"?t:t+""}function O4e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RD(e,t){if(e==null)return{};var n,r,i=P4e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function P4e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Ed(){return Ed=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ed.apply(null,arguments)}var I4e=e=>{var{dataKey:t,name:n,stroke:r,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:r,value:Xc(n,t),payload:e}]};function D4e(e){var{dataKey:t,data:n,stroke:r,strokeWidth:i,fill:s,name:a,hide:o,unit:c}=e;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:t,nameKey:void 0,name:Xc(a,t),hide:o,type:e.tooltipType,color:e.stroke,unit:c}}}var gJ=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function M4e(e,t){for(var n=e.length%2!==0?[...e,0]:e,r=[],i=0;i<t;++i)r=[...r,...n];return r}var R4e=(e,t,n)=>{var r=n.reduce((f,h)=>f+h);if(!r)return gJ(t,e);for(var i=Math.floor(e/r),s=e%r,a=t-e,o=[],c=0,u=0;c<n.length;u+=n[c],++c)if(u+n[c]>s){o=[...n.slice(0,c),s-u];break}var d=o.length%2===0?[0,a]:[a];return[...M4e(n,i),...o,...d].map(f=>"".concat(f,"px")).join(", ")};function L4e(e,t){var n;if(w.isValidElement(e))n=w.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var r=bt("recharts-line-dot",typeof e!="boolean"?e.className:"");n=w.createElement(wD,Ed({},t,{className:r}))}return n}function F4e(e,t){return e==null?!1:t?!0:e.length===1}function B4e(e){var{clipPathId:t,points:n,props:r}=e,{dot:i,dataKey:s,needClip:a}=r;if(!F4e(n,i))return null;var{id:o}=r,c=RD(r,k4e),u=BE(i),d=Da(c),f=Zt(i,!0),h=n.map((m,g)=>{var v=ga(ga(ga({key:"dot-".concat(g),r:3},d),f),{},{index:g,cx:m.x,cy:m.y,dataKey:s,value:m.value,payload:m.payload,points:n});return L4e(i,v)}),p={clipPath:a?"url(#clipPath-".concat(u?"":"dots-").concat(t,")"):void 0};return w.createElement(Hn,Ed({className:"recharts-line-dots",key:"dots"},p),h)}function zT(e){var{clipPathId:t,pathRef:n,points:r,strokeDasharray:i,props:s,showLabels:a}=e,{type:o,layout:c,connectNulls:u,needClip:d}=s,f=RD(s,C4e),h=ga(ga({},Zt(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):void 0,points:r,type:o,layout:c,connectNulls:u,strokeDasharray:i??s.strokeDasharray});return w.createElement(w.Fragment,null,(r==null?void 0:r.length)>1&&w.createElement(Xf,Ed({},h,{pathRef:n})),w.createElement(B4e,{points:r,clipPathId:t,props:s}),a&&Yo.renderCallByParent(s,r))}function $4e(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function U4e(e){var{clipPathId:t,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:s}=e,{points:a,strokeDasharray:o,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:h,width:p,height:m,onAnimationEnd:g,onAnimationStart:v}=n,y=i.current,x=NS(n,"recharts-line-"),[b,S]=w.useState(!1),E=w.useCallback(()=>{typeof g=="function"&&g(),S(!1)},[g]),N=w.useCallback(()=>{typeof v=="function"&&v(),S(!0)},[v]),_=$4e(r.current),k=s.current;return w.createElement(kS,{begin:u,duration:d,isActive:c,easing:f,onAnimationEnd:E,onAnimationStart:N,key:x},T=>{var A=$r(k,_+k,T),j=Math.min(A,_),D;if(o){var I="".concat(o).split(/[,\s]+/gim).map(P=>parseFloat(P));D=R4e(j,_,I)}else D=gJ(_,j);if(y){var M=y.length/a.length,L=T===1?a:a.map((P,B)=>{var R=Math.floor(B*M);if(y[R]){var F=y[R];return ga(ga({},P),{},{x:$r(F.x,P.x,T),y:$r(F.y,P.y,T)})}return h?ga(ga({},P),{},{x:$r(p*2,P.x,T),y:$r(m/2,P.y,T)}):ga(ga({},P),{},{x:P.x,y:P.y})});return i.current=L,w.createElement(zT,{props:n,points:L,clipPathId:t,pathRef:r,showLabels:!b,strokeDasharray:D})}return T>0&&_>0&&(i.current=a,s.current=j),w.createElement(zT,{props:n,points:a,clipPathId:t,pathRef:r,showLabels:!b,strokeDasharray:D})})}function z4e(e){var{clipPathId:t,props:n}=e,{points:r,isAnimationActive:i}=n,s=w.useRef(null),a=w.useRef(0),o=w.useRef(null),c=s.current;return i&&r&&r.length&&c!==r?w.createElement(U4e,{props:n,clipPathId:t,previousPointsRef:s,longestAnimatedLengthRef:a,pathRef:o}):w.createElement(zT,{props:n,points:r,clipPathId:t,pathRef:o,showLabels:!0})}var H4e=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Mt(e.payload,t)});class V4e extends w.Component{render(){var t,{hide:n,dot:r,points:i,className:s,xAxisId:a,yAxisId:o,top:c,left:u,width:d,height:f,id:h,needClip:p}=this.props;if(n)return null;var m=bt("recharts-line",s),g=h,{r:v=3,strokeWidth:y=2}=(t=Zt(r,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},x=BE(r),b=v*2+y;return w.createElement(w.Fragment,null,w.createElement(Hn,{className:m},p&&w.createElement("defs",null,w.createElement(PD,{clipPathId:g,xAxisId:a,yAxisId:o}),!x&&w.createElement("clipPath",{id:"clipPath-dots-".concat(g)},w.createElement("rect",{x:u-b/2,y:c-b/2,width:d+b,height:f+b}))),w.createElement(z4e,{props:this.props,clipPathId:g}),w.createElement(nJ,{xAxisId:a,yAxisId:o,data:i,dataPointFormatter:H4e,errorBarOffset:0},this.props.children)),w.createElement($T,{activeDot:this.props.activeDot,points:i,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var vJ={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Qc.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function W4e(e){var t=Ti(e,vJ),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:a,connectNulls:o,dot:c,hide:u,isAnimationActive:d,label:f,legendType:h,xAxisId:p,yAxisId:m,id:g}=t,v=RD(t,T4e),{needClip:y}=TS(p,m),x=CS(),b=rv(),S=ci(),E=We(A=>_4e(A,p,m,S,g));if(b!=="horizontal"&&b!=="vertical"||E==null||x==null)return null;var{height:N,width:_,x:k,y:T}=x;return w.createElement(V4e,Ed({},v,{id:g,connectNulls:o,dot:c,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:a,isAnimationActive:d,hide:u,label:f,legendType:h,xAxisId:p,yAxisId:m,points:E,layout:b,height:N,width:_,left:k,top:T,needClip:y}))}function q4e(e){var{layout:t,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,dataKey:a,bandSize:o,displayedData:c}=e;return c.map((u,d)=>{var f=Mt(u,a);if(t==="horizontal"){var h=Kb({axis:n,ticks:i,bandSize:o,entry:u,index:d}),p=tn(f)?null:r.scale(f);return{x:h,y:p,value:f,payload:u}}var m=tn(f)?null:n.scale(f),g=Kb({axis:r,ticks:s,bandSize:o,entry:u,index:d});return m==null||g==null?null:{x:m,y:g,value:f,payload:u}}).filter(Boolean)}function n0(e){var t=Ti(e,vJ),n=ci();return w.createElement(_S,{id:t.id,type:"line"},r=>w.createElement(w.Fragment,null,w.createElement(AD,{legendPayload:I4e(t)}),w.createElement(SS,{fn:D4e,args:t}),w.createElement(jD,{type:"line",id:r,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:n}),w.createElement(W4e,Ed({},t,{id:r}))))}n0.displayName="Line";var yJ=(e,t,n,r)=>mo(e,"xAxis",t,r),xJ=(e,t,n,r)=>po(e,"xAxis",t,r),bJ=(e,t,n,r)=>mo(e,"yAxis",n,r),wJ=(e,t,n,r)=>po(e,"yAxis",n,r),K4e=ae([yt,yJ,bJ,xJ,wJ],(e,t,n,r,i)=>bo(e,"xAxis")?bd(t,r,!1):bd(n,i,!1)),G4e=(e,t,n,r,i)=>i,EJ=ae([hv,G4e],(e,t)=>e.filter(n=>n.type==="area").find(n=>n.id===t)),Y4e=(e,t,n,r,i)=>{var s,a=EJ(e,t,n,r,i);if(a!=null){var o=yt(e),c=bo(o,"xAxis"),u;if(c?u=e0(e,"yAxis",n,r):u=e0(e,"xAxis",t,r),u!=null){var{stackId:d}=a,f=pS(a);if(!(d==null||f==null)){var h=(s=u[d])===null||s===void 0?void 0:s.stackedData;return h==null?void 0:h.find(p=>p.key===f)}}}},X4e=ae([yt,yJ,bJ,xJ,wJ,Y4e,cv,K4e,EJ],(e,t,n,r,i,s,a,o,c)=>{var{chartData:u,dataStartIndex:d,dataEndIndex:f}=a;if(!(c==null||e!=="horizontal"&&e!=="vertical"||t==null||n==null||r==null||i==null||r.length===0||i.length===0||o==null)){var{data:h}=c,p;if(h&&h.length>0?p=h:p=u==null?void 0:u.slice(d,f+1),p!=null){var m=void 0;return gLe({layout:e,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataStartIndex:d,areaSettings:c,stackedData:s,displayedData:p,chartBaseValue:m,bandSize:o})}}}),Q4e=["id"],J4e=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function SJ(e,t){if(e==null)return{};var n,r,i=Z4e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Z4e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function zB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Uu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zB(Object(n),!0).forEach(function(r){eLe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eLe(e,t,n){return(t=tLe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tLe(e){var t=nLe(e,"string");return typeof t=="symbol"?t:t+""}function nLe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xo(){return Xo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xo.apply(null,arguments)}function v1(e,t){return e&&e!=="none"?e:t}var rLe=e=>{var{dataKey:t,name:n,stroke:r,fill:i,legendType:s,hide:a}=e;return[{inactive:a,dataKey:t,type:s,color:v1(r,i),value:Xc(n,t),payload:e}]};function iLe(e){var{dataKey:t,data:n,stroke:r,strokeWidth:i,fill:s,name:a,hide:o,unit:c}=e;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:t,nameKey:void 0,name:Xc(a,t),hide:o,type:e.tooltipType,color:v1(r,s),unit:c}}}var sLe=(e,t)=>{var n;if(w.isValidElement(e))n=w.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var r=bt("recharts-area-dot",typeof e!="boolean"?e.className:"");n=w.createElement(wD,Xo({},t,{className:r}))}return n};function aLe(e,t){return e==null?!1:t?!0:e.length===1}function oLe(e){var{clipPathId:t,points:n,props:r}=e,{needClip:i,dot:s,dataKey:a}=r;if(!aLe(n,s))return null;var o=BE(s),c=Da(r),u=Zt(s,!0),d=n.map((h,p)=>{var m=Uu(Uu(Uu({key:"dot-".concat(p),r:3},c),u),{},{index:p,cx:h.x,cy:h.y,dataKey:a,value:h.value,payload:h.payload,points:n});return sLe(s,m)}),f={clipPath:i?"url(#clipPath-".concat(o?"":"dots-").concat(t,")"):void 0};return w.createElement(Hn,Xo({className:"recharts-area-dots"},f),d)}function HT(e){var{points:t,baseLine:n,needClip:r,clipPathId:i,props:s,showLabels:a}=e,{layout:o,type:c,stroke:u,connectNulls:d,isRange:f}=s,{id:h}=s,p=SJ(s,Q4e),m=Da(p);return w.createElement(w.Fragment,null,(t==null?void 0:t.length)>1&&w.createElement(Hn,{clipPath:r?"url(#clipPath-".concat(i,")"):void 0},w.createElement(Xf,Xo({},m,{id:h,points:t,connectNulls:d,type:c,baseLine:n,layout:o,stroke:"none",className:"recharts-area-area"})),u!=="none"&&w.createElement(Xf,Xo({},m,{className:"recharts-area-curve",layout:o,type:c,connectNulls:d,fill:"none",points:t})),u!=="none"&&f&&w.createElement(Xf,Xo({},m,{className:"recharts-area-curve",layout:o,type:c,connectNulls:d,fill:"none",points:n}))),w.createElement(oLe,{points:t,props:p,clipPathId:i}),a&&Yo.renderCallByParent(p,t))}function lLe(e){var{alpha:t,baseLine:n,points:r,strokeWidth:i}=e,s=r[0].y,a=r[r.length-1].y;if(!qr(s)||!qr(a))return null;var o=t*Math.abs(s-a),c=Math.max(...r.map(u=>u.x||0));return De(n)?c=Math.max(n,c):n&&Array.isArray(n)&&n.length&&(c=Math.max(...n.map(u=>u.x||0),c)),De(c)?w.createElement("rect",{x:0,y:s<a?s:s-o,width:c+(i?parseInt("".concat(i),10):1),height:Math.floor(o)}):null}function cLe(e){var{alpha:t,baseLine:n,points:r,strokeWidth:i}=e,s=r[0].x,a=r[r.length-1].x;if(!qr(s)||!qr(a))return null;var o=t*Math.abs(s-a),c=Math.max(...r.map(u=>u.y||0));return De(n)?c=Math.max(n,c):n&&Array.isArray(n)&&n.length&&(c=Math.max(...n.map(u=>u.y||0),c)),De(c)?w.createElement("rect",{x:s<a?s:s-o,y:0,width:o,height:Math.floor(c+(i?parseInt("".concat(i),10):1))}):null}function uLe(e){var{alpha:t,layout:n,points:r,baseLine:i,strokeWidth:s}=e;return n==="vertical"?w.createElement(lLe,{alpha:t,points:r,baseLine:i,strokeWidth:s}):w.createElement(cLe,{alpha:t,points:r,baseLine:i,strokeWidth:s})}function dLe(e){var{needClip:t,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:s}=e,{points:a,baseLine:o,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:f,onAnimationStart:h,onAnimationEnd:p}=r,m=NS(r,"recharts-area-"),[g,v]=w.useState(!0),y=w.useCallback(()=>{typeof p=="function"&&p(),v(!1)},[p]),x=w.useCallback(()=>{typeof h=="function"&&h(),v(!0)},[h]),b=i.current,S=s.current;return w.createElement(kS,{begin:u,duration:d,isActive:c,easing:f,onAnimationEnd:y,onAnimationStart:x,key:m},E=>{if(b){var N=b.length/a.length,_=E===1?a:a.map((T,A)=>{var j=Math.floor(A*N);if(b[j]){var D=b[j];return Uu(Uu({},T),{},{x:$r(D.x,T.x,E),y:$r(D.y,T.y,E)})}return T}),k;return De(o)?k=$r(S,o,E):tn(o)||qi(o)?k=$r(S,0,E):k=o.map((T,A)=>{var j=Math.floor(A*N);if(Array.isArray(S)&&S[j]){var D=S[j];return Uu(Uu({},T),{},{x:$r(D.x,T.x,E),y:$r(D.y,T.y,E)})}return T}),E>0&&(i.current=_,s.current=k),w.createElement(HT,{points:_,baseLine:k,needClip:t,clipPathId:n,props:r,showLabels:!g})}return E>0&&(i.current=a,s.current=o),w.createElement(Hn,null,w.createElement("defs",null,w.createElement("clipPath",{id:"animationClipPath-".concat(n)},w.createElement(uLe,{alpha:E,points:a,baseLine:o,layout:r.layout,strokeWidth:r.strokeWidth}))),w.createElement(Hn,{clipPath:"url(#animationClipPath-".concat(n,")")},w.createElement(HT,{points:a,baseLine:o,needClip:t,clipPathId:n,props:r,showLabels:!0})))})}function fLe(e){var{needClip:t,clipPathId:n,props:r}=e,{points:i,baseLine:s,isAnimationActive:a}=r,o=w.useRef(null),c=w.useRef(),u=o.current,d=c.current;return a&&i&&i.length&&(u!==i||d!==s)?w.createElement(dLe,{needClip:t,clipPathId:n,props:r,previousPointsRef:o,previousBaselineRef:c}):w.createElement(HT,{points:i,baseLine:s,needClip:t,clipPathId:n,props:r,showLabels:!0})}class hLe extends w.PureComponent{render(){var t,{hide:n,dot:r,points:i,className:s,top:a,left:o,needClip:c,xAxisId:u,yAxisId:d,width:f,height:h,id:p,baseLine:m}=this.props;if(n)return null;var g=bt("recharts-area",s),v=p,{r:y=3,strokeWidth:x=2}=(t=Zt(r,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},b=BE(r),S=y*2+x;return w.createElement(w.Fragment,null,w.createElement(Hn,{className:g},c&&w.createElement("defs",null,w.createElement(PD,{clipPathId:v,xAxisId:u,yAxisId:d}),!b&&w.createElement("clipPath",{id:"clipPath-dots-".concat(v)},w.createElement("rect",{x:o-S/2,y:a-S/2,width:f+S,height:h+S}))),w.createElement(fLe,{needClip:c,clipPathId:v,props:this.props})),w.createElement($T,{points:i,mainColor:v1(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(m)&&w.createElement($T,{points:m,mainColor:v1(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var NJ={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!Qc.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function pLe(e){var t,n=Ti(e,NJ),{activeDot:r,animationBegin:i,animationDuration:s,animationEasing:a,connectNulls:o,dot:c,fill:u,fillOpacity:d,hide:f,isAnimationActive:h,legendType:p,stroke:m,xAxisId:g,yAxisId:v}=n,y=SJ(n,J4e),x=rv(),b=SQ(),{needClip:S}=TS(g,v),E=ci(),{points:N,isRange:_,baseLine:k}=(t=We(M=>X4e(M,g,v,E,e.id)))!==null&&t!==void 0?t:{},T=CS();if(x!=="horizontal"&&x!=="vertical"||T==null||b!=="AreaChart"&&b!=="ComposedChart")return null;var{height:A,width:j,x:D,y:I}=T;return!N||!N.length?null:w.createElement(hLe,Xo({},y,{activeDot:r,animationBegin:i,animationDuration:s,animationEasing:a,baseLine:k,connectNulls:o,dot:c,fill:u,fillOpacity:d,height:A,hide:f,layout:x,isAnimationActive:h,isRange:_,legendType:p,needClip:S,points:N,stroke:m,width:j,left:D,top:I,xAxisId:g,yAxisId:v}))}var mLe=(e,t,n,r,i)=>{var s=n??t;if(De(s))return s;var a=e==="horizontal"?i:r,o=a.scale.domain();if(a.type==="number"){var c=Math.max(o[0],o[1]),u=Math.min(o[0],o[1]);return s==="dataMin"?u:s==="dataMax"||c<0?c:Math.max(Math.min(o[0],o[1]),0)}return s==="dataMin"?o[0]:s==="dataMax"?o[1]:o[0]};function gLe(e){var{areaSettings:{connectNulls:t,baseValue:n,dataKey:r},stackedData:i,layout:s,chartBaseValue:a,xAxis:o,yAxis:c,displayedData:u,dataStartIndex:d,xAxisTicks:f,yAxisTicks:h,bandSize:p}=e,m=i&&i.length,g=mLe(s,a,n,o,c),v=s==="horizontal",y=!1,x=u.map((S,E)=>{var N;m?N=i[d+E]:(N=Mt(S,r),Array.isArray(N)?y=!0:N=[g,N]);var _=N[1]==null||m&&!t&&Mt(S,r)==null;return v?{x:Kb({axis:o,ticks:f,bandSize:p,entry:S,index:E}),y:_?null:c.scale(N[1]),value:N,payload:S}:{x:_?null:o.scale(N[1]),y:Kb({axis:c,ticks:h,bandSize:p,entry:S,index:E}),value:N,payload:S}}),b;return m||y?b=x.map(S=>{var E=Array.isArray(S.value)?S.value[0]:null;return v?{x:S.x,y:E!=null&&S.y!=null?c.scale(E):null,payload:S.payload}:{x:E!=null?o.scale(E):null,y:S.y,payload:S.payload}}):b=v?c.scale(g):o.scale(g),{points:x,baseLine:b,isRange:y}}function Jf(e){var t=Ti(e,NJ),n=ci();return w.createElement(_S,{id:t.id,type:"area"},r=>w.createElement(w.Fragment,null,w.createElement(AD,{legendPayload:rLe(t)}),w.createElement(SS,{fn:iLe,args:t}),w.createElement(jD,{type:"area",id:r,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:eY(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:n,connectNulls:t.connectNulls}),w.createElement(pLe,Xo({},t,{id:r}))))}Jf.displayName="Area";function HB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function VB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HB(Object(n),!0).forEach(function(r){vLe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vLe(e,t,n){return(t=yLe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yLe(e){var t=xLe(e,"string");return typeof t=="symbol"?t:t+""}function xLe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bLe={xAxis:{},yAxis:{},zAxis:{}},_J=Es({name:"cartesianAxis",initialState:bLe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=VB(VB({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:wLe,removeXAxis:ELe,addYAxis:SLe,removeYAxis:NLe,addZAxis:_ct,removeZAxis:kct,updateYAxisWidth:_Le}=_J.actions,kLe=_J.reducer,CLe=["children"],TLe=["dangerouslySetInnerHTML","ticks"];function kJ(e,t,n){return(t=ALe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ALe(e){var t=jLe(e,"string");return typeof t=="symbol"?t:t+""}function jLe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VT(){return VT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VT.apply(null,arguments)}function CJ(e,t){if(e==null)return{};var n,r,i=OLe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function OLe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function PLe(e){var t=Cn(),n=w.useMemo(()=>{var{children:s}=e,a=CJ(e,CLe);return a},[e]),r=We(s=>xl(s,n.id)),i=n===r;return w.useEffect(()=>(t(wLe(n)),()=>{t(ELe(n))}),[n,t]),i?e.children:null}var ILe=e=>{var{xAxisId:t,className:n}=e,r=We(iY),i=ci(),s="xAxis",a=We(p=>hp(p,s,t,i)),o=We(p=>nQ(p,s,t,i)),c=We(p=>JX(p,t)),u=We(p=>OPe(p,t));if(c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=e,h=CJ(e,TLe);return w.createElement(nu,VT({},h,{scale:a,x:u.x,y:u.y,width:c.width,height:c.height,className:bt("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:o}))},DLe=e=>{var t,n,r,i,s;return w.createElement(PLe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},w.createElement(ILe,e))};class Ca extends w.Component{render(){return w.createElement(DLe,this.props)}}kJ(Ca,"displayName","XAxis");kJ(Ca,"defaultProps",{allowDataOverflow:Qi.allowDataOverflow,allowDecimals:Qi.allowDecimals,allowDuplicatedCategory:Qi.allowDuplicatedCategory,height:Qi.height,hide:!1,mirror:Qi.mirror,orientation:Qi.orientation,padding:Qi.padding,reversed:Qi.reversed,scale:Qi.scale,tickCount:Qi.tickCount,type:Qi.type,xAxisId:0});var MLe=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=e,a=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>a&&(a=f.width)}});var o=n?n.getBoundingClientRect().width:0,c=i+s,u=a+c+o+(n?r:0);return Math.round(u)}return 0},RLe=["dangerouslySetInnerHTML","ticks"];function TJ(e,t,n){return(t=LLe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LLe(e){var t=FLe(e,"string");return typeof t=="symbol"?t:t+""}function FLe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WT(){return WT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WT.apply(null,arguments)}function BLe(e,t){if(e==null)return{};var n,r,i=$Le(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function $Le(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function ULe(e){var t=Cn();return w.useEffect(()=>(t(SLe(e)),()=>{t(NLe(e))}),[e,t]),null}var zLe=e=>{var t,{yAxisId:n,className:r,width:i,label:s}=e,a=w.useRef(null),o=w.useRef(null),c=We(iY),u=ci(),d=Cn(),f="yAxis",h=We(b=>hp(b,f,n,u)),p=We(b=>ZX(b,n)),m=We(b=>PPe(b,n)),g=We(b=>nQ(b,f,n,u));if(w.useLayoutEffect(()=>{var b;if(!(i!=="auto"||!p||bD(s)||w.isValidElement(s))){var S=a.current,E=S==null||(b=S.tickRefs)===null||b===void 0?void 0:b.current,{tickSize:N,tickMargin:_}=S.props,k=MLe({ticks:E,label:o.current,labelGapWithTick:5,tickSize:N,tickMargin:_});Math.round(p.width)!==Math.round(k)&&d(_Le({id:n,width:k}))}},[a,a==null||(t=a.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,p==null?void 0:p.width,p,d,s,n,i]),p==null||m==null)return null;var{dangerouslySetInnerHTML:v,ticks:y}=e,x=BLe(e,RLe);return w.createElement(nu,WT({},x,{ref:a,labelRef:o,scale:h,x:m.x,y:m.y,width:p.width,height:p.height,className:bt("recharts-".concat(f," ").concat(f),r),viewBox:c,ticks:g}))},HLe=e=>{var t,n,r,i,s;return w.createElement(w.Fragment,null,w.createElement(ULe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),w.createElement(zLe,e))},VLe={allowDataOverflow:Ji.allowDataOverflow,allowDecimals:Ji.allowDecimals,allowDuplicatedCategory:Ji.allowDuplicatedCategory,hide:!1,mirror:Ji.mirror,orientation:Ji.orientation,padding:Ji.padding,reversed:Ji.reversed,scale:Ji.scale,tickCount:Ji.tickCount,type:Ji.type,width:Ji.width,yAxisId:0};class Ta extends w.Component{render(){return w.createElement(HLe,this.props)}}TJ(Ta,"displayName","YAxis");TJ(Ta,"defaultProps",VLe);var WLe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xv=w;function qLe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var KLe=typeof Object.is=="function"?Object.is:qLe,GLe=xv.useSyncExternalStore,YLe=xv.useRef,XLe=xv.useEffect,QLe=xv.useMemo,JLe=xv.useDebugValue;WLe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=YLe(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=QLe(function(){function c(p){if(!u){if(u=!0,d=p,p=r(p),i!==void 0&&a.hasValue){var m=a.value;if(i(m,p))return f=m}return f=p}if(m=f,KLe(d,p))return m;var g=r(p);return i!==void 0&&i(m,g)?(d=p,m):(d=p,f=g)}var u=!1,d,f,h=n===void 0?null:n;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,n,r,i]);var o=GLe(e,s[0],s[1]);return XLe(function(){a.hasValue=!0,a.value=o},[o]),JLe(o),o};function ZLe(e){e()}function e6e(){let e=null,t=null;return{clear(){e=null,t=null},notify(){ZLe(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var WB={notify(){},get:()=>[]};function t6e(e,t){let n,r=WB,i=0,s=!1;function a(g){d();const v=r.subscribe(g);let y=!1;return()=>{y||(y=!0,v(),f())}}function o(){r.notify()}function c(){m.onStateChange&&m.onStateChange()}function u(){return s}function d(){i++,n||(n=e.subscribe(c),r=e6e())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=WB)}function h(){s||(s=!0,d())}function p(){s&&(s=!1,f())}const m={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>r};return m}var n6e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",r6e=n6e(),i6e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",s6e=i6e(),a6e=()=>r6e||s6e?w.useLayoutEffect:w.useEffect,o6e=a6e(),tk=Symbol.for("react-redux-context"),nk=typeof globalThis<"u"?globalThis:{};function l6e(){if(!w.createContext)return{};const e=nk[tk]??(nk[tk]=new Map);let t=e.get(w.createContext);return t||(t=w.createContext(null),e.set(w.createContext,t)),t}var c6e=l6e();function u6e(e){const{children:t,context:n,serverState:r,store:i}=e,s=w.useMemo(()=>{const c=t6e(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),a=w.useMemo(()=>i.getState(),[i]);o6e(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,a]);const o=n||c6e;return w.createElement(o.Provider,{value:s},t)}var d6e=u6e,f6e=(e,t)=>t,LD=ae([f6e,yt,AX,hr,vQ,bl,RIe,dr],UIe),FD=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},AJ=ea("mouseClick"),jJ=nv();jJ.startListening({actionCreator:AJ,effect:(e,t)=>{var n=e.payload,r=LD(t.getState(),FD(n));(r==null?void 0:r.activeIndex)!=null&&t.dispatch(WPe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var qT=ea("mouseMove"),OJ=nv();OJ.startListening({actionCreator:qT,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=dD(r,r.tooltip.settings.shared),s=LD(r,FD(n));i==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch(uQ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(cQ()))}});function h6e(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var qB={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},PJ=Es({name:"rootProps",initialState:qB,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:qB.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),p6e=PJ.reducer,{updateOptions:m6e}=PJ.actions,IJ=Es({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:g6e}=IJ.actions,v6e=IJ.reducer,DJ=ea("keyDown"),MJ=ea("focus"),BD=nv();BD.startListening({actionCreator:DJ,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var a=Number(fD(i,mp(n))),o=bl(n);if(s==="Enter"){var c=u1(n,"axis","hover",String(i.index));t.dispatch(MT({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:c}));return}var u=RPe(n),d=u==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,h=a+f*d;if(!(o==null||h>=o.length||h<0)){var p=u1(n,"axis","hover",String(h));t.dispatch(MT({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});BD.startListening({actionCreator:MJ,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",a=u1(n,"axis","hover",String(s));t.dispatch(MT({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:a}))}}}});var Os=ea("externalEvent"),RJ=nv();RJ.startListening({actionCreator:Os,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:CIe(n),activeDataKey:wQ(n),activeIndex:Ic(n),activeLabel:bQ(n),activeTooltipIndex:Ic(n),isTooltipActive:TIe(n)};e.payload.handler(r,e.payload.reactEvent)}}});var y6e=ae([pp],e=>e.tooltipItemPayloads),x6e=ae([y6e,gv,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(o=>o.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var a=t(s,n);return a}}}),LJ=ea("touchMove"),FJ=nv();FJ.startListening({actionCreator:LJ,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=dD(r,r.tooltip.settings.shared);if(i==="axis"){var s=LD(r,FD({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(uQ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var a,o=n.touches[0],c=document.elementFromPoint(o.clientX,o.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(nY),d=(a=c.getAttribute(rY))!==null&&a!==void 0?a:void 0,f=x6e(t.getState(),u,d);t.dispatch(lQ({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var b6e=CG({brush:MRe,cartesianAxis:kLe,chartData:nDe,errorBars:B3e,graphicalItems:QMe,layout:K2e,legend:ICe,options:QIe,polarAxis:xMe,polarOptions:v6e,referenceElements:zRe,rootProps:p6e,tooltip:qPe}),w6e=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return y2e({reducer:b6e,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([jJ.middleware,OJ.middleware,BD.middleware,RJ.middleware,FJ.middleware]),devTools:{serialize:{replacer:h6e},name:"recharts-".concat(n)}})};function BJ(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=ci(),s=w.useRef(null);if(i)return n;s.current==null&&(s.current=w6e(t,r));var a=tI;return w.createElement(d6e,{context:a,store:s.current},n)}function $J(e){var{layout:t,width:n,height:r,margin:i}=e,s=Cn(),a=ci();return w.useEffect(()=>{a||(s(V2e(t)),s(W2e({width:n,height:r})),s(H2e(i)))},[s,a,t,n,r,i]),null}function UJ(e){var t=Cn();return w.useEffect(()=>{t(m6e(e))},[t,e]),null}var E6e=["children"];function S6e(e,t){if(e==null)return{};var n,r,i=N6e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function N6e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function y1(){return y1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y1.apply(null,arguments)}var _6e={width:"100%",height:"100%"},k6e=w.forwardRef((e,t)=>{var n=fI(),r=hI(),i=cY();if(!Ch(n)||!Ch(r))return null;var{children:s,otherAttributes:a,title:o,desc:c}=e,u,d;return typeof a.tabIndex=="number"?u=a.tabIndex:u=i?0:void 0,typeof a.role=="string"?d=a.role:d=i?"application":void 0,w.createElement(UP,y1({},a,{title:o,desc:c,role:d,tabIndex:u,width:n,height:r,style:_6e,ref:t}),s)}),C6e=e=>{var{children:t}=e,n=We(iS);if(!n)return null;var{width:r,height:i,y:s,x:a}=n;return w.createElement(UP,{width:r,height:i,x:a,y:s},t)},KB=w.forwardRef((e,t)=>{var{children:n}=e,r=S6e(e,E6e),i=ci();return i?w.createElement(C6e,null,n):w.createElement(k6e,y1({ref:t},r),n)});function T6e(){var e=Cn(),[t,n]=w.useState(null),r=We(wCe);return w.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;qr(s)&&s!==r&&e(q2e(s))}},[t,e,r]),n}function GB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function A6e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GB(Object(n),!0).forEach(function(r){j6e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function j6e(e,t,n){return(t=O6e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O6e(e){var t=P6e(e,"string");return typeof t=="symbol"?t:t+""}function P6e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var I6e=w.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:a,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:p,onTouchMove:m,onTouchStart:g,style:v,width:y}=e,x=Cn(),[b,S]=w.useState(null),[E,N]=w.useState(null);sDe();var _=T6e(),k=w.useCallback(Y=>{_(Y),typeof t=="function"&&t(Y),S(Y),N(Y)},[_,t,S,N]),T=w.useCallback(Y=>{x(AJ(Y)),x(Os({handler:s,reactEvent:Y}))},[x,s]),A=w.useCallback(Y=>{x(qT(Y)),x(Os({handler:u,reactEvent:Y}))},[x,u]),j=w.useCallback(Y=>{x(cQ()),x(Os({handler:d,reactEvent:Y}))},[x,d]),D=w.useCallback(Y=>{x(qT(Y)),x(Os({handler:f,reactEvent:Y}))},[x,f]),I=w.useCallback(()=>{x(MJ())},[x]),M=w.useCallback(Y=>{x(DJ(Y.key))},[x]),L=w.useCallback(Y=>{x(Os({handler:a,reactEvent:Y}))},[x,a]),P=w.useCallback(Y=>{x(Os({handler:o,reactEvent:Y}))},[x,o]),B=w.useCallback(Y=>{x(Os({handler:c,reactEvent:Y}))},[x,c]),R=w.useCallback(Y=>{x(Os({handler:h,reactEvent:Y}))},[x,h]),F=w.useCallback(Y=>{x(Os({handler:g,reactEvent:Y}))},[x,g]),O=w.useCallback(Y=>{x(LJ(Y)),x(Os({handler:m,reactEvent:Y}))},[x,m]),Q=w.useCallback(Y=>{x(Os({handler:p,reactEvent:Y}))},[x,p]);return w.createElement(TQ.Provider,{value:b},w.createElement(IK.Provider,{value:E},w.createElement("div",{className:bt("recharts-wrapper",r),style:A6e({position:"relative",cursor:"default",width:y,height:i},v),onClick:T,onContextMenu:L,onDoubleClick:P,onFocus:I,onKeyDown:M,onMouseDown:B,onMouseEnter:A,onMouseLeave:j,onMouseMove:D,onMouseUp:R,onTouchEnd:Q,onTouchMove:O,onTouchStart:F,ref:k},n)))}),D6e=["children","className","width","height","style","compact","title","desc"];function M6e(e,t){if(e==null)return{};var n,r,i=R6e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function R6e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var zJ=w.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:s,style:a,compact:o,title:c,desc:u}=e,d=M6e(e,D6e),f=Da(d);return o?w.createElement(KB,{otherAttributes:f,title:c,desc:u},n):w.createElement(I6e,{className:r,style:a,width:i,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},w.createElement(KB,{otherAttributes:f,title:c,desc:u,ref:t},w.createElement(VRe,null,n)))}),L6e=["width","height"];function KT(){return KT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KT.apply(null,arguments)}function F6e(e,t){if(e==null)return{};var n,r,i=B6e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function B6e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var $6e={top:5,right:5,bottom:5,left:5},U6e={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:$6e,reverseStackOrder:!1,syncMethod:"index"},$D=w.forwardRef(function(t,n){var r,i=Ti(t.categoricalChartProps,U6e),{width:s,height:a}=i,o=F6e(i,L6e);if(!Ch(s)||!Ch(a))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,p={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return w.createElement(BJ,{preloadedState:{options:p},reduxStoreName:(r=h.id)!==null&&r!==void 0?r:c},w.createElement(aJ,{chartData:h.data}),w.createElement($J,{width:s,height:a,layout:i.layout,margin:i.margin}),w.createElement(UJ,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),w.createElement(zJ,KT({},o,{width:s,height:a,ref:n})))}),z6e=["axis"],UD=w.forwardRef((e,t)=>w.createElement($D,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:z6e,tooltipPayloadSearcher:wS,categoricalChartProps:e,ref:t})),H6e=["axis","item"],x1=w.forwardRef((e,t)=>w.createElement($D,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:H6e,tooltipPayloadSearcher:wS,categoricalChartProps:e,ref:t}));function V6e(e){var t=Cn();return w.useEffect(()=>{t(g6e(e))},[t,e]),null}var W6e=["width","height","layout"];function GT(){return GT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GT.apply(null,arguments)}function q6e(e,t){if(e==null)return{};var n,r,i=K6e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function K6e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var G6e={top:5,right:5,bottom:5,left:5},Y6e={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:G6e,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},X6e=w.forwardRef(function(t,n){var r,i=Ti(t.categoricalChartProps,Y6e),{width:s,height:a,layout:o}=i,c=q6e(i,W6e);if(!Ch(s)||!Ch(a))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h}=t,p={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h,eventEmitter:void 0};return w.createElement(BJ,{preloadedState:{options:p},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:u},w.createElement(aJ,{chartData:i.data}),w.createElement($J,{width:s,height:a,layout:o,margin:i.margin}),w.createElement(UJ,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),w.createElement(V6e,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),w.createElement(zJ,GT({width:s,height:a},c,{ref:n})))}),Q6e=["item"],J6e={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},r0=w.forwardRef((e,t)=>{var n=Ti(e,J6e);return w.createElement(X6e,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Q6e,tooltipPayloadSearcher:wS,categoricalChartProps:n,ref:t})}),Z6e=["axis"],HJ=w.forwardRef((e,t)=>w.createElement($D,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Z6e,tooltipPayloadSearcher:wS,categoricalChartProps:e,ref:t}));function e5e({widget:e,isDarkMode:t}){var a,o;const n=[{month:"Jan",revenue:12e3},{month:"Feb",revenue:15e3},{month:"Mar",revenue:11e3},{month:"Apr",revenue:18e3},{month:"May",revenue:22e3},{month:"Jun",revenue:19e3}],r=((a=n[n.length-1])==null?void 0:a.revenue)||0,i=((o=n[n.length-2])==null?void 0:o.revenue)||0,s=i?(r-i)/i*100:0;return l.jsxs(Z,{className:"h-full",children:[l.jsx(de,{className:"pb-2",children:l.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(wn,{className:"h-4 w-4"}),"Revenue Trend"]})}),l.jsx(ee,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold",children:ue(r)}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]}),l.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[l.jsx(cr,{className:`h-4 w-4 ${s>0?"text-green-500":"text-red-500"}`}),l.jsxs("span",{className:s>0?"text-green-500":"text-red-500",children:[Math.abs(s).toFixed(1),"%"]})]})]}),l.jsx("div",{className:"h-32",children:l.jsx(Bi,{width:"100%",height:"100%",children:l.jsxs(UD,{data:n,children:[l.jsx(Ca,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:t?"#94a3b8":"#64748b"}}),l.jsx(Ta,{hide:!0}),l.jsx(Vs,{formatter:c=>[ue(c),"Revenue"],labelStyle:{color:t?"#fff":"#000"},contentStyle:{backgroundColor:t?"#1e293b":"#fff",border:t?"1px solid #334155":"1px solid #e2e8f0",borderRadius:"6px"}}),l.jsx(n0,{type:"monotone",dataKey:"revenue",stroke:"#2563eb",strokeWidth:2,dot:{fill:"#2563eb",strokeWidth:2,r:3},activeDot:{r:4,stroke:"#2563eb",strokeWidth:2}})]})})}),l.jsx("div",{className:"text-xs text-muted-foreground",children:"6-month revenue trend"})]})})]})}function er(e){const{user:t}=jr(),[n,r]=w.useState([]),[i,s]=w.useState(!0),[a,o]=w.useState(null),c=t==null?void 0:t.id,u=[{name:"Cisco",color:"#3B82F6",status:"active"},{name:"PTS",color:"#10B981",status:"active"},{name:"Other",color:"#F59E0B",status:"active"}],d=async()=>{if(!c){r([]),s(!1);return}try{s(!0),o(null);const{data:b,error:S}=await ie.from("projects").select("*").eq("user_id",c).order("created_at",{ascending:!1});if(S)throw S;b.length===0?await f():r(b)}catch(b){console.error("Error fetching projects:",b),o(b instanceof Error?b.message:"Failed to fetch projects");const S=localStorage.getItem(`projects_${c}`);S&&r(JSON.parse(S))}finally{s(!1)}},f=async()=>{if(c)try{const b=u.map(N=>({...N,user_id:c})),{data:S,error:E}=await ie.from("projects").insert(b).select();if(E)throw E;r(S||[]),localStorage.setItem(`projects_${c}`,JSON.stringify(S||[]))}catch(b){console.error("Error creating default projects:",b),o(b instanceof Error?b.message:"Failed to create default projects")}},h=async b=>{if(!c)throw new Error("User not authenticated");try{const S={...b,user_id:c,status:b.status||"planning",start_date:b.start_date||null,end_date:b.end_date||null,description:b.description||null,client_id:b.client_id||null};console.log("Attempting to insert project:",S);const{data:E,error:N}=await ie.from("projects").insert([S]).select().single();if(N)throw console.error("Database insert error:",N),N;if(console.log("Project inserted successfully:",E),E){r(k=>[E,...k]);const _=[E,...n];return localStorage.setItem(`projects_${c}`,JSON.stringify(_)),E}return null}catch(S){console.error("Error adding project:",S);const N=[{id:`local_${Date.now()}`,name:b.name,color:b.color,client_id:b.client_id||null,description:b.description||null,status:b.status||"planning",start_date:b.start_date||null,end_date:b.end_date||null,budget:b.budget||null,hourly_rate:b.hourly_rate||null,user_id:c,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},...n];throw r(N),localStorage.setItem(`projects_${c}`,JSON.stringify(N)),S}},p=async b=>{if(!c)throw new Error("User not authenticated");try{const{id:S,...E}=b,{data:N,error:_}=await ie.from("projects").update({...E,updated_at:new Date().toISOString()}).eq("id",S).eq("user_id",c).select().single();if(_)throw _;if(N){r(T=>T.map(A=>A.id===S?N:A));const k=n.map(T=>T.id===S?N:T);return localStorage.setItem(`projects_${c}`,JSON.stringify(k)),N}return null}catch(S){throw console.error("Error updating project:",S),S}},m=async b=>{if(!c)throw new Error("User not authenticated");try{const{error:S}=await ie.from("projects").delete().eq("id",b).eq("user_id",c);if(S)throw S;r(N=>N.filter(_=>_.id!==b));const E=n.filter(N=>N.id!==b);localStorage.setItem(`projects_${c}`,JSON.stringify(E))}catch(S){throw console.error("Error deleting project:",S),S}},g=b=>n.find(S=>S.id===b),v=b=>n.filter(S=>S.client_id===b),y=()=>n.filter(b=>b.status==="active"),x=async(b,S)=>{try{return{data:await h({name:b,color:S}),error:null}}catch(E){return{data:null,error:E instanceof Error?E.message:"Failed to create project"}}};return w.useEffect(()=>{d()},[c]),{projects:n,loading:i,error:a,addProject:h,updateProject:p,deleteProject:m,getProjectById:g,getProjectsByClient:v,getActiveProjects:y,createProject:x,refetch:d}}function Tn(e){const{user:t}=jr(),[n,r]=w.useState([]),[i,s]=w.useState(!0),[a,o]=w.useState(null),c=t==null?void 0:t.id,u=async()=>{if(!c){r([]),s(!1);return}try{s(!0),o(null);const{data:y,error:x}=await ie.from("clients").select("*").eq("user_id",c).order("created_at",{ascending:!1});if(x)throw x;r(y||[])}catch(y){console.error("Error fetching clients:",y),o(y instanceof Error?y.message:"Failed to fetch clients");const x=localStorage.getItem(`clients_${c}`);x&&r(JSON.parse(x))}finally{s(!1)}},d=async y=>{if(!c)throw new Error("User not authenticated");try{const x={...y,user_id:c,currency:y.currency||"SEK",status:y.status||"active"},{data:b,error:S}=await ie.from("clients").insert([x]).select().single();if(S)throw S;if(b){r(N=>[b,...N]);const E=[b,...n];return localStorage.setItem(`clients_${c}`,JSON.stringify(E)),b}return null}catch(x){console.error("Error adding client:",x);const S=[{id:`local_${Date.now()}`,name:y.name,email:y.email||null,phone:y.phone||null,company:y.company||null,address:y.address||null,hourly_rate:y.hourly_rate||null,notes:y.notes||null,user_id:c,currency:y.currency||"SEK",status:y.status||"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},...n];throw r(S),localStorage.setItem(`clients_${c}`,JSON.stringify(S)),x}},f=async y=>{if(!c)throw new Error("User not authenticated");try{const{id:x,...b}=y,{data:S,error:E}=await ie.from("clients").update({...b,updated_at:new Date().toISOString()}).eq("id",x).eq("user_id",c).select().single();if(E)throw E;if(S){r(_=>_.map(k=>k.id===x?S:k));const N=n.map(_=>_.id===x?S:_);return localStorage.setItem(`clients_${c}`,JSON.stringify(N)),S}return null}catch(x){throw console.error("Error updating client:",x),x}},h=async y=>{if(!c)throw new Error("User not authenticated");try{const{error:x}=await ie.from("clients").delete().eq("id",y).eq("user_id",c);if(x)throw x;r(S=>S.filter(E=>E.id!==y));const b=n.filter(S=>S.id!==y);localStorage.setItem(`clients_${c}`,JSON.stringify(b))}catch(x){throw console.error("Error deleting client:",x),x}},p=y=>n.find(x=>x.id===y),m=()=>n.filter(y=>y.status==="active"),g=async y=>{await f({id:y,status:"archived"})},v=async y=>{await f({id:y,status:"active"})};return w.useEffect(()=>{u()},[c]),{clients:n,loading:i,error:a,addClient:d,updateClient:f,deleteClient:h,getClientById:p,getActiveClients:m,archiveClient:g,activateClient:v,refetch:u}}function t5e({widget:e,isDarkMode:t}){const{projects:n}=er(),{clients:r}=Tn(),{entries:i}=li(),s=n.filter(m=>m.status==="active").length,a=r.filter(m=>m.status==="active").length,o=new Date;o.setDate(o.getDate()-30);const c=i.filter(m=>new Date(m.date+"T00:00:00")>=o),u=c.reduce((m,g)=>m+g.hours,0),d=new Set(c.map(m=>m.date)).size,f=d>0?u/d:0,h=i.length,p=[{label:"Active Projects",value:s.toString(),icon:Tc,color:"text-blue-600",bgColor:"bg-blue-100",darkBgColor:"bg-blue-900/30"},{label:"Active Clients",value:a.toString(),icon:Tr,color:"text-green-600",bgColor:"bg-green-100",darkBgColor:"bg-green-900/30"},{label:"Time Entries",value:h.toString(),icon:en,color:"text-purple-600",bgColor:"bg-purple-100",darkBgColor:"bg-purple-900/30"},{label:"Avg Hours/Day",value:f.toFixed(1),icon:gt,color:"text-orange-600",bgColor:"bg-orange-100",darkBgColor:"bg-orange-900/30"}];return l.jsxs(Z,{className:"h-full",children:[l.jsx(de,{className:"pb-3",children:l.jsx(he,{className:"text-sm font-medium",children:"Quick Stats"})}),l.jsx(ee,{children:l.jsx("div",{className:"grid grid-cols-2 gap-3",children:p.map((m,g)=>{const v=m.icon;return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:`p-1.5 rounded-md ${t?m.darkBgColor:m.bgColor}`,children:l.jsx(v,{className:`h-3 w-3 ${m.color}`})}),l.jsx("div",{className:"text-lg font-bold",children:m.value})]}),l.jsx("p",{className:"text-xs text-muted-foreground leading-tight",children:m.label})]},g)})})})]})}function n5e(){const[e,t]=w.useState(!1),[n,r]=w.useState(!1),i=[{icon:Xe,label:"Add Income",description:"Log new income",color:"green",action:()=>t(!0)},{icon:C4,label:"Add Expense",description:"Record expense",color:"red",action:()=>r(!0)},{icon:en,label:"Create Invoice",description:"Generate invoice",color:"blue",action:()=>console.log("Create invoice")},{icon:Tr,label:"New Client",description:"Add client",color:"purple",action:()=>console.log("Add client")},{icon:Lt,label:"Schedule Meeting",description:"Book appointment",color:"orange",action:()=>console.log("Schedule meeting")},{icon:rE,label:"View Reports",description:"Analytics",color:"indigo",action:()=>console.log("View reports")}],s=o=>{o.preventDefault(),t(!1)},a=o=>{o.preventDefault(),r(!1)};return e?l.jsxs(Z,{className:"h-full",children:[l.jsx(de,{className:"pb-3",children:l.jsxs(he,{className:"text-lg flex items-center gap-2",children:[l.jsx(Xe,{className:"h-5 w-5 text-green-600"}),"Add Income"]})}),l.jsx(ee,{children:l.jsxs("form",{onSubmit:s,className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Amount"}),l.jsx(re,{type:"number",placeholder:"0.00",className:"text-lg font-bold",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Description"}),l.jsx(re,{placeholder:"Client payment, consulting, etc.",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Category"}),l.jsxs("select",{className:"w-full p-2 border rounded text-sm",title:"Income Category",children:[l.jsx("option",{children:"Client Payment"}),l.jsx("option",{children:"Consulting"}),l.jsx("option",{children:"Retainer"}),l.jsx("option",{children:"Other"})]})]}),l.jsxs("div",{className:"flex gap-2 pt-2",children:[l.jsx(H,{type:"submit",size:"sm",className:"flex-1",children:"Add Income"}),l.jsx(H,{type:"button",size:"sm",variant:"outline",onClick:()=>t(!1),children:"Cancel"})]})]})})]}):n?l.jsxs(Z,{className:"h-full",children:[l.jsx(de,{className:"pb-3",children:l.jsxs(he,{className:"text-lg flex items-center gap-2",children:[l.jsx(C4,{className:"h-5 w-5 text-red-600"}),"Add Expense"]})}),l.jsx(ee,{children:l.jsxs("form",{onSubmit:a,className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Amount"}),l.jsx(re,{type:"number",placeholder:"0.00",className:"text-lg font-bold",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Description"}),l.jsx(re,{placeholder:"Software, office supplies, etc.",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Category"}),l.jsxs("select",{className:"w-full p-2 border rounded text-sm",title:"Expense Category",children:[l.jsx("option",{children:"Software"}),l.jsx("option",{children:"Office"}),l.jsx("option",{children:"Travel"}),l.jsx("option",{children:"Marketing"}),l.jsx("option",{children:"Other"})]})]}),l.jsxs("div",{className:"flex gap-2 pt-2",children:[l.jsx(H,{type:"submit",size:"sm",className:"flex-1",children:"Add Expense"}),l.jsx(H,{type:"button",size:"sm",variant:"outline",onClick:()=>r(!1),children:"Cancel"})]})]})})]}):l.jsxs(Z,{className:"h-full",children:[l.jsx(de,{className:"pb-3",children:l.jsxs(he,{className:"text-lg flex items-center gap-2",children:[l.jsx(Zs,{className:"h-5 w-5 text-gray-600"}),"Quick Actions"]})}),l.jsxs(ee,{children:[l.jsx("div",{className:"grid grid-cols-2 gap-2",children:i.map((o,c)=>{const u=o.icon,d={green:"bg-green-50 hover:bg-green-100 dark:bg-green-900/20 dark:hover:bg-green-900/30 text-green-700 dark:text-green-400",red:"bg-red-50 hover:bg-red-100 dark:bg-red-900/20 dark:hover:bg-red-900/30 text-red-700 dark:text-red-400",blue:"bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-400",purple:"bg-purple-50 hover:bg-purple-100 dark:bg-purple-900/20 dark:hover:bg-purple-900/30 text-purple-700 dark:text-purple-400",orange:"bg-orange-50 hover:bg-orange-100 dark:bg-orange-900/20 dark:hover:bg-orange-900/30 text-orange-700 dark:text-orange-400",indigo:"bg-indigo-50 hover:bg-indigo-100 dark:bg-indigo-900/20 dark:hover:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400"};return l.jsx("button",{onClick:o.action,className:`p-3 rounded-lg text-left transition-colors ${d[o.color]}`,children:l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx(u,{className:"h-5 w-5"}),l.jsx("div",{className:"text-xs font-medium text-center",children:o.label})]})},c)})}),l.jsxs("div",{className:"mt-4 pt-4 border-t",children:[l.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Today's Summary"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-muted-foreground",children:"Income:"}),l.jsx("span",{className:"font-medium text-green-600",children:"+25,000 kr"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-muted-foreground",children:"Expenses:"}),l.jsx("span",{className:"font-medium text-red-600",children:"-4,500 kr"})]})]})]})]})]})}function r5e({widget:e,isDarkMode:t}){const{entries:n}=li(),{projects:r}=er(),{clients:i}=Tn(),s=n.slice(0,10).map(d=>{const f=r.find(m=>m.id===d.project_id),h=i.find(m=>m.id===(f==null?void 0:f.client_id)),p=u(d.created_at);return{id:d.id,type:"time",message:`Logged ${d.hours}h on ${(f==null?void 0:f.name)||"Unknown Project"}${h?` for ${h.name}`:""}`,time:p,icon:gt,color:"text-blue-600",date:d.created_at}}),a=r.sort((d,f)=>new Date(f.created_at||"").getTime()-new Date(d.created_at||"").getTime()).slice(0,3).map(d=>{const f=i.find(p=>p.id===d.client_id),h=u(d.created_at||"");return{id:`project-${d.id}`,type:"project",message:`Created project "${d.name}"${f?` for ${f.name}`:""}`,time:h,icon:nE,color:"text-green-600",date:d.created_at||""}}),o=i.sort((d,f)=>new Date(f.created_at||"").getTime()-new Date(d.created_at||"").getTime()).slice(0,2).map(d=>{const f=u(d.created_at||"");return{id:`client-${d.id}`,type:"client",message:`Added new client "${d.name}"${d.company?` (${d.company})`:""}`,time:f,icon:Ei,color:"text-purple-600",date:d.created_at||""}}),c=[...s,...a,...o].sort((d,f)=>new Date(f.date).getTime()-new Date(d.date).getTime()).slice(0,6);function u(d){if(!d)return"Unknown time";const f=new Date(d),p=new Date().getTime()-f.getTime(),m=Math.floor(p/(1e3*60)),g=Math.floor(m/60),v=Math.floor(g/24);return m<1?"Just now":m<60?`${m} minutes ago`:g<24?`${g} hour${g>1?"s":""} ago`:v===1?"Yesterday":v<7?`${v} days ago`:v<30?`${Math.floor(v/7)} week${Math.floor(v/7)>1?"s":""} ago`:f.toLocaleDateString("sv-SE")}return l.jsxs(Z,{className:"h-full",children:[l.jsx(de,{className:"pb-3",children:l.jsx(he,{className:"text-sm font-medium",children:"Recent Activities"})}),l.jsx(ee,{children:l.jsx("div",{className:"space-y-3",children:c.length===0?l.jsx("div",{className:"text-center py-4",children:l.jsx("p",{className:"text-xs text-muted-foreground",children:"No recent activities"})}):c.map(d=>{const f=d.icon;return l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"p-1.5 rounded-full bg-muted flex-shrink-0",children:l.jsx(f,{className:`h-3 w-3 ${d.color}`})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-xs font-medium leading-relaxed",children:d.message}),l.jsx("p",{className:"text-xs text-muted-foreground",children:d.time})]})]},d.id)})})})]})}function i5e({widget:e,isDarkMode:t}){const{projects:n}=er(),{clients:r}=Tn(),{entries:i}=li(),s=n.filter(d=>d.status==="active").slice(0,3).map(d=>{const f=r.find(g=>g.id===d.client_id),p=i.filter(g=>g.project_id===d.id).reduce((g,v)=>g+v.hours,0);let m=0;if(d.budget&&d.hourly_rate){const g=d.budget/d.hourly_rate;m=Math.min(p/g*100,100)}else if(d.start_date&&d.end_date){const g=new Date(d.start_date),v=new Date(d.end_date),y=new Date,x=v.getTime()-g.getTime(),b=y.getTime()-g.getTime();m=Math.max(0,Math.min(b/x*100,100))}else m=Math.min(p*2,100);return{id:d.id,name:d.name,client:(f==null?void 0:f.name)||"No Client",status:d.status||"active",progress:Math.round(m),hoursLogged:Math.round(p*10)/10,budget:d.budget||0,deadline:d.end_date,hourlyRate:d.hourly_rate}}),a=d=>{switch(d){case"active":return"text-blue-600 bg-blue-100";case"planning":return"text-yellow-600 bg-yellow-100";case"on-hold":return"text-orange-600 bg-orange-100";case"completed":return"text-green-600 bg-green-100";case"cancelled":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},o=d=>{switch(d){case"active":return"Active";case"planning":return"Planning";case"on-hold":return"On Hold";case"completed":return"Completed";case"cancelled":return"Cancelled";default:return d}},c=d=>{if(!d)return!1;const f=new Date(d),h=new Date,p=Math.ceil((f.getTime()-h.getTime())/(1e3*60*60*24));return p<=7&&p>=0},u=d=>d?`Due ${new Date(d).toLocaleDateString("sv-SE")}`:"No deadline";return l.jsxs(Z,{className:"h-full",children:[l.jsx(de,{className:"pb-3",children:l.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(nE,{className:"h-4 w-4"}),"Active Projects"]})}),l.jsx(ee,{children:l.jsx("div",{className:"space-y-4",children:s.length===0?l.jsx("div",{className:"text-center py-4",children:l.jsx("p",{className:"text-xs text-muted-foreground",children:"No active projects"})}):s.map(d=>l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"text-sm font-medium truncate",children:d.name}),l.jsx("p",{className:"text-xs text-muted-foreground",children:d.client})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[c(d.deadline)&&l.jsx(gd,{className:"h-3 w-3 text-red-500"}),l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a(d.status)}`,children:o(d.status)})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[l.jsxs("span",{children:[d.progress,"% complete"]}),l.jsxs("span",{children:[d.hoursLogged,"h logged"]})]}),l.jsx("div",{className:"w-full bg-muted rounded-full h-1.5",children:l.jsx("div",{className:"bg-primary h-1.5 rounded-full transition-all duration-300",style:{width:`${d.progress}%`}})})]}),l.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-xs",children:"SEK"}),l.jsx("span",{children:d.budget>0?ue(d.budget):"No budget"})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(gt,{className:"h-3 w-3"}),l.jsx("span",{children:u(d.deadline)})]})]})]},d.id))})})]})}function s5e({isDarkMode:e}){const t=[{month:"Jan",balance:45e3,netFlow:7e3},{month:"Feb",balance:53500,netFlow:8500},{month:"Mar",balance:59700,netFlow:6200},{month:"Apr",balance:70700,netFlow:11e3},{month:"May",balance:79200,netFlow:8500},{month:"Jun",balance:88200,netFlow:9e3}],n=t[t.length-1].balance,r=t[t.length-1].netFlow,i=t[t.length-2].netFlow,s=r-i,a=s/i*100,o=n+r*1.05;return l.jsxs(Z,{className:"h-full",children:[l.jsx(de,{className:"pb-3",children:l.jsxs(he,{className:"text-lg flex items-center gap-2",children:[l.jsx(wn,{className:"h-5 w-5 text-green-600"}),"Cash Flow"]})}),l.jsxs(ee,{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Current Balance"}),l.jsx("div",{className:"text-xl font-bold text-green-600",children:ue(n)})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Monthly Net Flow"}),l.jsxs("div",{className:`text-xl font-bold flex items-center gap-1 ${r>=0?"text-green-600":"text-red-600"}`,children:[r>=0?l.jsx(cr,{className:"h-4 w-4"}):l.jsx(yb,{className:"h-4 w-4"}),ue(Math.abs(r))]})]})]}),l.jsx("div",{className:"h-24",children:l.jsx(Bi,{width:"100%",height:"100%",children:l.jsxs(UD,{data:t,children:[l.jsx(Ca,{dataKey:"month",hide:!0}),l.jsx(Ta,{hide:!0}),l.jsx(Vs,{formatter:c=>[ue(c),"Balance"],labelStyle:{color:e?"#fff":"#000"},contentStyle:{backgroundColor:e?"#1e293b":"#fff",border:e?"1px solid #334155":"1px solid #e2e8f0",borderRadius:"6px",fontSize:"12px"}}),l.jsx(n0,{type:"monotone",dataKey:"balance",stroke:"#16a34a",strokeWidth:2,dot:!1,name:"Balance"})]})})}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:`flex items-center gap-2 text-xs p-2 rounded ${s>=0?"bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-400":"bg-red-50 text-red-700 dark:bg-red-900/20 dark:text-red-400"}`,children:[s>=0?l.jsx(cr,{className:"h-3 w-3"}):l.jsx(yb,{className:"h-3 w-3"}),l.jsxs("span",{children:[s>=0?"+":"",a.toFixed(1),"% vs last month"]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(wn,{className:"h-3 w-3"}),l.jsxs("span",{children:["Projected next month: ",ue(o)]})]}),r<5e3&&l.jsxs("div",{className:"flex items-center gap-2 text-xs p-2 rounded bg-yellow-50 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400",children:[l.jsx(to,{className:"h-3 w-3"}),l.jsx("span",{children:"Consider increasing revenue streams"})]})]}),l.jsxs("div",{className:"pt-2 border-t",children:[l.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Quick Actions"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"flex-1 text-xs py-1 px-2 bg-blue-100 hover:bg-blue-200 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded transition-colors",children:"Add Income"}),l.jsx("button",{className:"flex-1 text-xs py-1 px-2 bg-red-100 hover:bg-red-200 dark:bg-red-900/20 dark:hover:bg-red-900/30 text-red-700 dark:text-red-400 rounded transition-colors",children:"Log Expense"})]})]})]})]})}function a5e({isDarkMode:e}){const t=[{month:"Apr",conservative:70700,realistic:70700,optimistic:70700},{month:"May",conservative:79200,realistic:79200,optimistic:79200},{month:"Jun",conservative:88200,realistic:88200,optimistic:88200},{month:"Jul",conservative:93e3,realistic:97e3,optimistic:102e3,isProjection:!0},{month:"Aug",conservative:97500,realistic:105500,optimistic:116e3,isProjection:!0},{month:"Sep",conservative:101800,realistic:114200,optimistic:131500,isProjection:!0}],n=88200,r=26e3/88200*100,s=Math.floor(n/18500);return l.jsxs(Z,{className:"h-full",children:[l.jsx(de,{className:"pb-3",children:l.jsxs(he,{className:"text-lg flex items-center gap-2",children:[l.jsx(cr,{className:"h-5 w-5 text-blue-600"}),"Cash Flow Projections"]})}),l.jsxs(ee,{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[l.jsxs("div",{className:"p-2 rounded bg-green-50 dark:bg-green-900/20",children:[l.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:"Conservative"}),l.jsx("div",{className:"text-lg font-bold text-green-700 dark:text-green-300",children:ue(t[t.length-1].conservative)})]}),l.jsxs("div",{className:"p-2 rounded bg-blue-50 dark:bg-blue-900/20",children:[l.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium",children:"Realistic"}),l.jsx("div",{className:"text-lg font-bold text-blue-700 dark:text-blue-300",children:ue(t[t.length-1].realistic)})]}),l.jsxs("div",{className:"p-2 rounded bg-purple-50 dark:bg-purple-900/20",children:[l.jsx("div",{className:"text-xs text-purple-600 dark:text-purple-400 font-medium",children:"Optimistic"}),l.jsx("div",{className:"text-lg font-bold text-purple-700 dark:text-purple-300",children:ue(t[t.length-1].optimistic)})]})]}),l.jsx("div",{className:"h-32",children:l.jsx(Bi,{width:"100%",height:"100%",children:l.jsxs(HJ,{data:t,children:[l.jsx(Ca,{dataKey:"month",tick:{fontSize:10,fill:e?"#94a3b8":"#64748b"},axisLine:!1,tickLine:!1}),l.jsx(Ta,{hide:!0}),l.jsx(Vs,{formatter:(a,o)=>[ue(a),o.charAt(0).toUpperCase()+o.slice(1)],labelStyle:{color:e?"#fff":"#000"},contentStyle:{backgroundColor:e?"#1e293b":"#fff",border:e?"1px solid #334155":"1px solid #e2e8f0",borderRadius:"6px",fontSize:"12px"}}),l.jsx(Jf,{type:"monotone",dataKey:"optimistic",stackId:"1",stroke:"#9333ea",fill:"#9333ea",fillOpacity:.1,strokeWidth:1,strokeDasharray:"3 3"}),l.jsx(Jf,{type:"monotone",dataKey:"realistic",stackId:"2",stroke:"#2563eb",fill:"#2563eb",fillOpacity:.2,strokeWidth:2}),l.jsx(Jf,{type:"monotone",dataKey:"conservative",stackId:"3",stroke:"#16a34a",fill:"#16a34a",fillOpacity:.3,strokeWidth:1})]})})}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsxs("div",{className:"flex items-center gap-1 text-blue-600 dark:text-blue-400",children:[l.jsx(cr,{className:"h-3 w-3"}),l.jsx("span",{children:"3-Month Growth"})]}),l.jsxs("span",{className:"font-medium",children:["+",r.toFixed(1),"%"]})]}),l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsxs("div",{className:"flex items-center gap-1 text-orange-600 dark:text-orange-400",children:[l.jsx(Lt,{className:"h-3 w-3"}),l.jsx("span",{children:"Cash Runway"})]}),l.jsxs("span",{className:"font-medium",children:[s," months"]})]}),l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400",children:[l.jsx(Wi,{className:"h-3 w-3"}),l.jsx("span",{children:"Goal: 1,500,000 kr"})]}),l.jsx("span",{className:"font-medium",children:"75% achieved"})]})]}),s<6&&l.jsxs("div",{className:"flex items-center gap-2 text-xs p-2 rounded bg-orange-50 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400",children:[l.jsx(gd,{className:"h-3 w-3"}),l.jsx("span",{children:"Consider building larger cash reserves"})]}),l.jsxs("div",{className:"pt-2 border-t",children:[l.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Model Assumptions"}),l.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[l.jsx("div",{children:" Conservative: 5% growth/month"}),l.jsx("div",{children:" Realistic: 8% growth/month"}),l.jsx("div",{children:" Optimistic: 12% growth/month"})]})]})]})]})}function VJ({widget:e,isDarkMode:t}){return l.jsx(Z,{className:"h-full border-dashed border-2",children:l.jsx(ee,{className:"p-6 flex items-center justify-center h-full",children:l.jsxs("div",{className:"text-center space-y-4",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center mx-auto",children:l.jsx(Xe,{className:"h-6 w-6 text-muted-foreground"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium text-sm mb-1",children:"Add Content"}),l.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"This widget is ready for your content"}),l.jsx(H,{variant:"outline",size:"sm",children:"Configure"})]})]})})})}function AS(e){const[t,n]=w.useState(null),[r,i]=w.useState(!0),[s,a]=w.useState(null),o=async()=>{if(!e){i(!1);return}try{i(!0),a(null);const{data:h,error:p}=await ie.from("user_profiles").select("auto_generate_yearly_vat, vat_rate_income, vat_rate_expenses, vat_payment_month, vat_payment_day").eq("id",e).single();if(p)throw p;n(h)}catch(h){console.error("Error fetching VAT settings:",h),a(h instanceof Error?h.message:"Failed to load VAT settings")}finally{i(!1)}},c=async h=>{if(!e)return console.log(` Cannot calculate VAT for ${h}: no userId`),null;console.log(` Fetching fresh VAT settings for ${h} calculation...`);const{data:p,error:m}=await ie.from("user_profiles").select("auto_generate_yearly_vat, vat_rate_income, vat_rate_expenses, vat_payment_month, vat_payment_day").eq("id",e).single();if(m)return console.error(` Error fetching VAT settings for ${h}:`,m),null;if(!(p!=null&&p.auto_generate_yearly_vat))return console.log(` Cannot calculate VAT for ${h}: auto_generate_yearly_vat=${p==null?void 0:p.auto_generate_yearly_vat}`),null;try{console.log(` Calculating MOMS for year ${h}...`),console.log(" Fresh VAT Settings:",p),console.log(` Querying invoices for ${h}...`);const{data:g,error:v}=await ie.from("invoice_items").select("total_amount, invoice_date, client_id, project_id, description").eq("user_id",e).gte("invoice_date",`${h}-01-01`).lt("invoice_date",`${h+1}-01-01`);if(v)throw v;console.log(` Found ${(g==null?void 0:g.length)||0} invoice items for ${h}:`,g),console.log(` Querying business expenses for ${h}...`);const{data:y,error:x}=await ie.from("cash_flow_entries").select("amount, description, category, date, is_budget_entry, is_recurring_instance, is_recurring, recurring_interval").eq("user_id",e).eq("type","expense").gte("date",`${h}-01-01`).lte("date",`${h}-12-31`).not("category","in","(Salary,Employer Tax,MOMS Tax,Frmner)");if(x)throw x;console.log(` Found ${(y==null?void 0:y.length)||0} business expense entries for ${h}:`,y);const b=(y||[]).reduce((A,j)=>{let D=j.amount;if(j.is_recurring&&j.recurring_interval==="monthly"&&j.is_budget_entry){const I=new Date(j.date),M=I.getMonth();if(I.getFullYear()===h){const P=12-M;D=j.amount*P,console.log(` Recurring expense "${j.description}": ${j.amount}  ${P} months = ${D}`)}}return A+D},0);console.log(` Total expense amount for ${h} (including recurring): ${b}`),console.log(` Found ${(g==null?void 0:g.length)||0} invoices and ${(y==null?void 0:y.length)||0} expenses for ${h}`,{expenseBreakdown:y==null?void 0:y.reduce((A,j)=>{const D=j.is_budget_entry?"budget":j.is_recurring_instance?"recurring":"manual";return A[D]=(A[D]||0)+1,A},{})});const S=(g||[]).reduce((A,j)=>A+j.total_amount,0),E=S*(p.vat_rate_income/100);console.log(` Income VAT calculation for ${h}:`,{invoiceCount:(g==null?void 0:g.length)||0,incomeTaxableAmount:Math.round(S*100)/100,incomeVatRate:p.vat_rate_income+"%",totalIncomeVat:Math.round(E*100)/100});const N=b-b/(1+p.vat_rate_expenses/100);console.log(` Expense VAT calculation for ${h}:`,{expenseCount:(y==null?void 0:y.length)||0,totalExpenseAmount:Math.round(b*100)/100,expenseVatRate:p.vat_rate_expenses+"%",totalExpenseVat:Math.round(N*100)/100});const _=E-N,k=h+1,T=new Date(k,(p.vat_payment_month||1)-1,Math.min(p.vat_payment_day||12,28));return console.log(` Net MOMS calculation for ${h}:`,{totalIncomeVat:Math.round(E*100)/100,totalExpenseVat:Math.round(N*100)/100,netVatObligation:Math.round(_*100)/100,paymentDate:T.toISOString().split("T")[0]}),{year:h,totalIncomeVat:Math.round(E*100)/100,totalExpenseVat:Math.round(N*100)/100,netVatObligation:Math.round(_*100)/100,paymentDate:T}}catch(g){throw console.error(` Error calculating VAT for ${h}:`,g),g}},u=async h=>{if(console.log(` Checking if VAT entry should be created for ${h.year}: netVatObligation=${h.netVatObligation}, userId=${!!e}`),!e||h.netVatObligation<=0)return console.log(` No VAT owed for ${h.year} (${h.netVatObligation}), skipping entry creation`),null;try{const{data:p}=await ie.from("cash_flow_entries").select("id").eq("user_id",e).eq("category","MOMS Tax").ilike("description",`%${h.year}%`).single();if(p)return console.log(` MOMS tax entry already exists for ${h.year}`),p.id;const{data:m,error:g}=await ie.from("cash_flow_entries").insert([{user_id:e,type:"expense",amount:h.netVatObligation,description:`MOMS Tax ${h.year} (Income VAT: ${h.totalIncomeVat} - Expense VAT: ${h.totalExpenseVat})`,category:"MOMS Tax",date:h.paymentDate.toISOString().split("T")[0],is_recurring:!1,is_budget_entry:!1,is_recurring_instance:!1,vat_amount:0,amount_excluding_vat:h.netVatObligation,vat_rate:0}]).select("id").single();if(g)throw g;return console.log(` Created MOMS tax entry for ${h.year}:`,{amount:h.netVatObligation,date:h.paymentDate.toISOString().split("T")[0],description:`MOMS Tax ${h.year}`,id:m.id}),m.id}catch(p){throw console.error(` Error creating MOMS tax entry for ${h.year}:`,p),p}},d=async h=>{const p=await c(h);return p?await u(p):null},f=async()=>{if(!(t!=null&&t.auto_generate_yearly_vat)||!e)return;const h=new Date().getFullYear(),p=h-1;try{console.log(" Updating VAT calculations due to data changes..."),await ie.from("cash_flow_entries").delete().eq("user_id",e).eq("category","MOMS Tax").or(`date.gte.${p}-01-01,date.gte.${h}-01-01`),await d(p),await d(h),console.log(" VAT calculations updated successfully")}catch(m){console.error(" Error updating VAT calculations:",m)}};return w.useEffect(()=>{o()},[e]),{vatSettings:t,loading:r,error:s,calculateYearlyVat:c,createYearlyVatEntry:u,processYearlyVat:d,updateCurrentVatCalculations:f,refetch:o}}function WJ(e){const[t,n]=w.useState([]),[r,i]=w.useState(!0),[s,a]=w.useState(null),{updateCurrentVatCalculations:o}=AS(e),c=async()=>{if(!e){i(!1);return}try{i(!0),a(null);const{data:h,error:p}=await ie.from("user_profiles").select("auto_generate_yearly_vat, vat_rate_income").eq("id",e).single();p&&p.code!=="PGRST116"&&console.error("Error fetching user settings:",p);const{data:m,error:g}=await ie.from("cash_flow_entries").select("*").eq("user_id",e).order("date",{ascending:!1});if(g)throw g;const{data:v,error:y}=await ie.from("invoice_items").select(`
          id,
          description,
          total_amount,
          due_date,
          currency,
          status,
          created_at,
          client_id,
          project_id
        `).eq("user_id",e).in("status",["sent","paid"]).not("due_date","is",null).order("due_date",{ascending:!1});if(y)throw y;console.log(" Invoice Items Fetched:",{total:(v||[]).length,items:v==null?void 0:v.map(E=>({id:E.id,description:E.description,amount:E.total_amount,due_date:E.due_date,status:E.status}))});const x=(m||[]).map(E=>{var k,T;let N="manual",_=!0;return E.is_budget_entry&&(N="budget",_=!1),((k=E.description)!=null&&k.toLowerCase().includes("intershape")||(T=E.description)!=null&&T.toLowerCase().includes("digitalidg"))&&console.log(` DEBUG Entry "${E.description}":`,{id:E.id,is_budget_entry:E.is_budget_entry,source:N,is_editable:_,raw_entry:E}),{...E,is_editable:_,source:N}}),b=(v||[]).map(E=>{const N=E.total_amount;let _=N,k=0,T=0;return h!=null&&h.auto_generate_yearly_vat&&(h==null?void 0:h.vat_rate_income)>0&&(T=h.vat_rate_income,k=N*(T/100),_=N+k,console.log(` VAT Calculation for invoice "${E.description}":`,{baseAmount:N,vatRate:T+"%",vatAmount:Math.round(k*100)/100,totalWithVat:Math.round(_*100)/100})),{id:`invoice_${E.id}`,user_id:e,type:"income",amount:_,description:`Invoice: ${E.description}${E.status==="paid"?" (PAID)":""}`,category:"Client Payment",date:E.due_date,is_recurring:!1,recurring_interval:null,next_due_date:null,is_budget_entry:!1,is_recurring_instance:!1,project_id:E.project_id,client_id:E.client_id,created_at:E.created_at,updated_at:new Date().toISOString(),vat_amount:Math.round(k*100)/100,amount_excluding_vat:Math.round(N*100)/100,vat_rate:T,is_editable:!1,source:"invoice"}}),S=[...x,...b];console.log(" Cash Flow Entries Loaded:",{total:S.length,manual:S.filter(E=>E.source==="manual").length,budget:S.filter(E=>E.source==="budget").length,invoice:S.filter(E=>E.source==="invoice").length,income:S.filter(E=>E.type==="income").length,expenses:S.filter(E=>E.type==="expense").length,editable:S.filter(E=>E.is_editable).length,readonly:S.filter(E=>!E.is_editable).length}),n(S)}catch(h){console.error("Error loading cash flow data:",h),a(h instanceof Error?h.message:"Failed to load cash flow data")}finally{i(!1)}};return w.useEffect(()=>{c()},[e]),{entries:t,loading:r,error:s,addEntry:async h=>{if(e)try{i(!0),a(null);const{data:p,error:m}=await ie.from("cash_flow_entries").insert([{...h,user_id:e}]).select().single();if(m)throw m;const g={...p,is_editable:!p.is_budget_entry,source:p.is_budget_entry?"budget":"manual"};n(v=>[g,...v]),console.log(" New entry added:",p.description,p.amount,p.is_budget_entry?"[BUDGET]":"[MANUAL]"),(h.type==="income"||h.type==="expense")&&o&&o().catch(v=>{console.log("VAT recalculation failed (non-critical):",v)})}catch(p){throw console.error("Error adding cash flow entry:",p),a(p instanceof Error?p.message:"Failed to add entry"),p}finally{i(!1)}},updateEntry:async(h,p)=>{const m=t.find(g=>g.id===h);if(!m||!m.is_editable){a("Budget entries cannot be edited from cash flow page"),console.warn("Attempted to edit read-only budget entry:",h);return}try{i(!0),a(null);const{data:g,error:v}=await ie.from("cash_flow_entries").update(p).eq("id",h).eq("user_id",e).select().single();if(v)throw v;n(x=>x.map(b=>b.id===h?{...b,...g,is_editable:!0,source:"manual"}:b)),console.log(" Manual entry updated:",g.description,g.amount);const y={...m,...g};(y.type==="income"||y.type==="expense")&&o&&o().catch(x=>{console.log("VAT recalculation failed (non-critical):",x)})}catch(g){throw console.error("Error updating cash flow entry:",g),a(g instanceof Error?g.message:"Failed to update entry"),g}finally{i(!1)}},deleteEntry:async(h,p=!1)=>{let m=t.find(v=>v.id===h),g=h;if(!m&&h.includes("_recurring_")){const v=h.split("_recurring_")[0];m=t.find(y=>y.id===v),g=v,console.log(" Recurring instance delete - converting to original entry:",{generatedId:h,originalId:g,foundOriginal:!!m})}if(console.log(` DELETE ATTEMPT for "${m==null?void 0:m.description}":`,{entryId:h,actualEntryId:g,found:!!m,is_editable:m==null?void 0:m.is_editable,source:m==null?void 0:m.source,is_budget_entry:m==null?void 0:m.is_budget_entry,allowBudgetEntryDeletion:p,totalEntries:t.length,entryIds:t.map(v=>{var y;return{id:v.id,desc:(y=v.description)==null?void 0:y.substring(0,20)}})}),g.startsWith("invoice_")){const v="Invoice entries cannot be deleted";return a(v),console.warn(" Delete blocked:",v,{entryId:g}),!1}if(!m){const v="Entry not found";return a(v),console.warn(" Delete blocked:",v,{entryId:g,availableIds:t.map(y=>y.id)}),!1}if(!m.is_editable&&!p){const v=`${m.source} entries cannot be deleted from cash flow page`;return a(v),console.warn(" Delete blocked:",v,{entry:m,entryId:g}),!1}try{i(!0),a(null);const{error:v}=await ie.from("cash_flow_entries").delete().eq("id",g).eq("user_id",e);if(v)throw v;return n(y=>y.filter(x=>x.id!==g)),console.log(" Manual entry deleted"),(m.type==="income"||m.type==="expense")&&o&&o().catch(y=>{console.log("VAT recalculation failed (non-critical):",y)}),!0}catch(v){return console.error("Error deleting cash flow entry:",v),a(v instanceof Error?v.message:"Failed to delete entry"),!1}finally{i(!1)}},refetch:c}}function o5e(e){const[t,n]=w.useState([]),[r,i]=w.useState(!0),[s,a]=w.useState(null),o=async()=>{if(!e){i(!1);return}try{i(!0);const{data:m,error:g}=await ie.from("budgets").select("*").eq("user_id",e).eq("is_active",!0).order("created_at",{ascending:!1});if(g)throw g;n(m||[])}catch(m){a(m instanceof Error?m.message:"An error occurred")}finally{i(!1)}},c=async m=>{if(!e)return null;try{const{data:g,error:v}=await ie.from("budgets").insert([{...m,user_id:e}]).select().single();if(v)throw v;return n(y=>[g,...y]),g}catch(g){return a(g instanceof Error?g.message:"Failed to add budget"),null}},u=async(m,g)=>{try{const{data:v,error:y}=await ie.from("budgets").update(g).eq("id",m).eq("user_id",e).select().single();if(y)throw y;return n(x=>x.map(b=>b.id===m?v:b)),v}catch(v){return a(v instanceof Error?v.message:"Failed to update budget"),null}},d=async m=>{try{const{error:g}=await ie.from("budgets").delete().eq("id",m).eq("user_id",e);if(g)throw g;return n(v=>v.filter(y=>y.id!==m)),!0}catch(g){return a(g instanceof Error?g.message:"Failed to delete budget"),!1}},f=async m=>{if(!e)return null;try{const{data:g,error:v}=await ie.from("budget_entries").insert([{...m,user_id:e}]).select().single();if(v)throw v;return g}catch(g){return a(g instanceof Error?g.message:"Failed to add budget entry"),null}},h=async()=>{if(!e)return[];try{const{data:m,error:g}=await ie.from("budget_status").select("*").eq("user_id",e);if(g)throw g;return m||[]}catch(m){return a(m instanceof Error?m.message:"Failed to get budget status"),[]}},p=async m=>{try{const{data:g,error:v}=await ie.from("budget_entries").select("*").eq("budget_id",m).eq("user_id",e).order("date",{ascending:!1});if(v)throw v;return g||[]}catch(g){return a(g instanceof Error?g.message:"Failed to get budget entries"),[]}};return w.useEffect(()=>{o()},[e]),{budgets:t,loading:r,error:s,addBudget:c,updateBudget:u,deleteBudget:d,addBudgetEntry:f,getBudgetStatus:h,getBudgetEntries:p,refetch:o}}const jS=()=>{const{user:e}=jr(),{entries:t,refetch:n,addEntry:r,deleteEntry:i}=WJ((e==null?void 0:e.id)||null),{budgets:s,addBudget:a,updateBudget:o,deleteBudget:c,loading:u}=o5e((e==null?void 0:e.id)||null),{toast:d}=xo(),[f,h]=w.useState([]),[p,m]=w.useState([]),[g,v]=w.useState(!1),y=new Date().toISOString().slice(0,7),x=new Date().getFullYear(),b=()=>new Date().toLocaleDateString("sv-SE",{month:"long",year:"numeric"}),S=()=>new Date().getFullYear().toString(),E=(P,B)=>{if(!t)return[];console.log(" getCategoryEntries called:",{categoryName:P,period:B,totalEntries:t.length,expenseEntries:t.filter(O=>O.type==="expense").length,budgetEntries:t.filter(O=>O.is_budget_entry===!0).length});const R=(O,Q)=>{const Y=Q.toLowerCase(),$=O.toLowerCase();return!!($===Y||(Y.includes("travel")||Y.includes("resa"))&&($.includes("resa")||$.includes("travel")||$.includes("konferens"))||(Y.includes("office")||Y.includes("kontor"))&&($.includes("kontor")||$.includes("office")||$.includes("material"))||(Y.includes("software")||Y.includes("tool")||Y.includes("verktyg"))&&($.includes("software")||$.includes("tool")||$.includes("verktyg")||$.includes("licens"))||(Y.includes("development")||Y.includes("utveckling"))&&($.includes("kurs")||$.includes("utbildning")||$.includes("development"))||(Y.includes("utrustning")||Y.includes("equipment"))&&($.includes("utrustning")||$.includes("equipment")||$.includes("dator")||$.includes("hrdvara"))||Y.includes($.split(" ")[0])||$.includes(Y.split(" ")[0]))},F=t.filter(O=>O.type==="expense");if(console.log(` Filtering for category "${P}":`,{actualExpenses:F.length,budgetExpenses:F.filter(O=>O.is_budget_entry===!0).length,sampleEntries:F.slice(0,3).map(O=>({description:O.description,category:O.category,is_budget_entry:O.is_budget_entry,amount:O.amount}))}),B==="monthly"){const O=F.filter(Q=>{const Y=R(Q.category,P);return Q.is_budget_entry===!0&&console.log(` Budget entry check: "${Q.description}" (${Q.category}) vs "${P}" = ${Y}`),Y});return console.log(` Final result for "${P}" (${B}): ${O.length} entries`),O}else{const O=F.filter(Q=>{const $=new Date(Q.date).getFullYear(),ye=$===x&&R(Q.category,P);return Q.is_budget_entry===!0&&console.log(` Yearly budget entry check: "${Q.description}" (${Q.category}, ${$}) vs "${P}" (${x}) = ${ye}`),ye});return console.log(` Final result for "${P}" (${B}): ${O.length} entries`),O}},N=w.useMemo(()=>{const P=f.reduce((O,Q)=>O+Q.budgeted,0),B=f.reduce((O,Q)=>O+Q.spent,0),R=p.reduce((O,Q)=>O+Q.budgeted,0),F=p.reduce((O,Q)=>O+Q.spent,0);return{monthly:{budget:P,spent:B,remaining:P-B,percentage:P>0?B/P*100:0},annual:{budget:R,spent:F,remaining:R-F,percentage:R>0?F/R*100:0,completed:p.filter(O=>O.status==="completed").length,overdue:p.filter(O=>O.status==="overdue").length}}},[f,p]),_=w.useMemo(()=>f.map(P=>({name:P.name,budgeted:P.budgeted,spent:P.spent,remaining:P.budgeted-P.spent})),[f]),k=w.useMemo(()=>f.filter(P=>P.spent>0).map(P=>({name:P.name,value:P.spent,color:P.color})),[f]);w.useEffect(()=>{(async()=>{if(!(!e||u||!t)){console.log(" useBudgetLogic: Loading data"),console.log(" Budgets:",(s==null?void 0:s.length)||0),console.log(" Entries:",(t==null?void 0:t.length)||0),v(!0);try{const B=s.filter($=>$.period==="monthly");console.log(" Monthly budgets:",B.length);const R=t.filter($=>$.type==="expense");console.log(" All expenses (including budget entries):",R.length),R.forEach($=>{console.log(`  - ${$.description}: ${$.amount} SEK (${$.category})`)});const F=B.map(($,ye)=>{console.log(`
 Processing budget: ${$.name} (${$.category})`);const U=R.filter(fe=>{const oe=$.category.toLowerCase(),le=fe.category.toLowerCase(),Ee=le===oe,se=(oe.includes("travel")||oe.includes("resa"))&&(le.includes("resa")||le.includes("travel")||le.includes("konferens")),qe=(oe.includes("office")||oe.includes("kontor"))&&(le.includes("kontor")||le.includes("office")||le.includes("material")),Oe=(oe.includes("software")||oe.includes("tool")||oe.includes("verktyg"))&&(le.includes("software")||le.includes("tool")||le.includes("verktyg")||le.includes("licens")),et=(oe.includes("development")||oe.includes("utveckling"))&&(le.includes("kurs")||le.includes("utbildning")||le.includes("development")),J=(oe.includes("utrustning")||oe.includes("equipment"))&&(le.includes("utrustning")||le.includes("equipment")||le.includes("dator")||le.includes("hrdvara")),pe=oe.includes(le.split(" ")[0]),q=le.includes(oe.split(" ")[0]),me=Ee||se||qe||Oe||et||J||pe||q;return me&&console.log(`     MATCH: "${fe.category}" -> "${$.category}" (${fe.amount} SEK)`),me}).reduce((fe,oe)=>fe+oe.amount,0);console.log(`     Total spent for ${$.name}: ${U} SEK`);const K=["#2563eb","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4","#84cc16"];return{id:$.id,name:$.name,budgeted:$.budget_limit,spent:U,color:K[ye%K.length]}}),O=s.filter($=>$.period==="yearly"),Q=R.filter($=>new Date($.date).getFullYear()===x),Y=O.map(($,ye)=>{const U=Q.filter(Ee=>Ee.category.toLowerCase()===$.category.toLowerCase()).reduce((Ee,se)=>Ee+se.amount,0),K=new Date($.start_date||new Date),fe=new Date;let oe="pending";U>=$.budget_limit?oe="completed":K<fe&&(oe="overdue");const le=["#dc2626","#ea580c","#d97706","#65a30d","#059669","#0891b2","#7c3aed","#c2410c"];return{id:$.id,name:$.name,budgeted:$.budget_limit,spent:U,targetDate:$.start_date||new Date().toISOString().split("T")[0],status:oe,color:le[ye%le.length]}});h(F),m(Y),console.log(" Final budget categories:",F.length),F.forEach($=>{console.log(`  - ${$.name}: ${$.spent}/${$.budgeted} SEK`)})}catch(B){console.error("Error loading budgets and expenses:",B),d({title:"Fel",description:"Kunde inte ladda budgetdata.",variant:"destructive"})}finally{v(!1)}}})()},[e==null?void 0:e.id,s,u,t,d,y,x,e]);const T=async(P,B)=>{if(s.find(F=>F.name.toLowerCase().trim()===P.toLowerCase().trim()||F.category.toLowerCase().trim()===P.toLowerCase().trim()))return d({title:"Kategori finns redan",description:`En kategori med namnet "${P.trim()}" finns redan.`,variant:"destructive"}),!1;if(B<0)return d({title:"Fel",description:"Budget kan inte vara negativ. Ange 0 fr ingen budget.",variant:"destructive"}),!1;v(!0);try{if(await a({name:P.trim(),category:P.trim(),budget_limit:B,period:"monthly",start_date:new Date().toISOString().split("T")[0],is_active:!0})&&B>0){const O=new Date;O.setDate(1);const Q=new Date(O);Q.setMonth(Q.getMonth()+1),await r({type:"expense",amount:B,description:`Budget fr ${P.trim()}`,category:P.trim(),date:O.toISOString().split("T")[0],is_recurring:!0,recurring_interval:"monthly",next_due_date:Q.toISOString().split("T")[0],is_budget_entry:!0,is_recurring_instance:!1})}return d({title:"Mnadskategori tillagd",description:B>0?`${P.trim()} med budget ${ue(B)}/mnad har lagts till`:`${P.trim()} har lagts till utan automatisk budget`}),await n(),!0}catch(F){return console.error("Error adding category:",F),d({title:"Fel",description:"Kunde inte lgga till kategori.",variant:"destructive"}),!1}finally{v(!1)}},A=async(P,B)=>{if(B<0)return d({title:"Fel",description:"Budget kan inte vara negativ. Ange 0 fr ingen budget.",variant:"destructive"}),!1;v(!0);try{if(await o(P,{budget_limit:B,updated_at:new Date().toISOString()})){const F=f.find(O=>O.id===P);return d({title:"Mnadsbudget uppdaterad",description:`Budget fr ${F==null?void 0:F.name} uppdaterad till ${ue(B)}/mnad`}),await n(),!0}return!1}catch(R){return console.error("Error updating category:",R),d({title:"Fel",description:"Kunde inte uppdatera budget.",variant:"destructive"}),!1}finally{v(!1)}},j=async P=>{v(!0);try{if(await c(P.id)){const R=t.filter(F=>F.category===P.name&&F.is_budget_entry===!0);for(const F of R)await L(F.id);return d({title:"Kategori borttagen",description:`${P.name} har tagits bort`}),await n(),!0}return!1}catch(B){return console.error("Error deleting category:",B),d({title:"Fel",description:"Kunde inte ta bort kategori.",variant:"destructive"}),!1}finally{v(!1)}},D=async(P,B,R)=>{if(s.find(O=>O.name.toLowerCase().trim()===P.toLowerCase().trim()||O.category.toLowerCase().trim()===P.toLowerCase().trim()))return d({title:"rlig post finns redan",description:`En rlig post med namnet "${P.trim()}" finns redan.`,variant:"destructive"}),!1;if(B<0)return d({title:"Fel",description:"Budget kan inte vara negativ. Ange 0 fr ingen budget.",variant:"destructive"}),!1;v(!0);try{if(await a({name:P.trim(),category:P.trim(),budget_limit:B,period:"yearly",start_date:R,is_active:!0})){if(B>0){const Q=new Date(R),Y=new Date(Q);Y.setFullYear(Y.getFullYear()+1),await r({type:"expense",amount:B,description:`rlig budget fr ${P.trim()}`,category:P.trim(),date:R,is_recurring:!0,recurring_interval:"yearly",next_due_date:Y.toISOString().split("T")[0],is_budget_entry:!0,is_recurring_instance:!1})}return d({title:"rlig post tillagd",description:B>0?`${P.trim()} med budget ${ue(B)}/r har lagts till`:`${P.trim()} har lagts till utan automatisk budget`}),await n(),!0}return!1}catch(O){return console.error("Error adding annual item:",O),d({title:"Fel",description:"Kunde inte lgga till rlig post.",variant:"destructive"}),!1}finally{v(!1)}},I=async(P,B,R)=>{if(B<0)return d({title:"Fel",description:"Budget kan inte vara negativ. Ange 0 fr ingen budget.",variant:"destructive"}),!1;v(!0);try{const F={budget_limit:B,updated_at:new Date().toISOString()};if(R&&(F.start_date=R),await o(P,F)){const Q=p.find(Y=>Y.id===P);return d({title:"rlig post uppdaterad",description:`Budget fr ${Q==null?void 0:Q.name} uppdaterad till ${ue(B)}`}),await n(),!0}return!1}catch(F){return console.error("Error updating annual item:",F),d({title:"Fel",description:"Kunde inte uppdatera rlig post.",variant:"destructive"}),!1}finally{v(!1)}},M=async P=>{v(!0);try{return await c(P.id)?(d({title:"rlig post borttagen",description:`${P.name} har tagits bort`}),await n(),!0):!1}catch(B){return console.error("Error deleting annual item:",B),d({title:"Fel",description:"Kunde inte ta bort rlig post.",variant:"destructive"}),!1}finally{v(!1)}},L=async P=>await i(P,!0);return{categories:f,annualItems:p,totals:N,chartData:_,pieData:k,budgetsLoading:u,isLoading:g,getCurrentMonthName:b,getCurrentYear:S,getCategoryEntries:E,handleAddCategory:T,handleUpdateCategory:A,handleDeleteCategory:j,handleAddAnnualItem:D,handleUpdateAnnualItem:I,handleDeleteAnnualItem:M,addEntry:r,deleteEntry:L,addBudget:a,updateBudget:o,deleteBudget:c,refetch:n,entries:t,budgets:s,toast:d}};function l5e({isDarkMode:e}){const{annualItems:t}=jS(),n=t.map(a=>({name:a.name.length>12?a.name.substring(0,12)+"...":a.name,fullName:a.name,budgeted:a.budgeted,spent:a.spent,remaining:Math.max(0,a.budgeted-a.spent)})),r=t.reduce((a,o)=>a+o.budgeted,0),i=t.reduce((a,o)=>a+o.spent,0),s=r>0?i/r*100:0;return l.jsxs(Z,{className:"h-full",children:[l.jsx(de,{className:"pb-2",children:l.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(no,{className:"h-4 w-4"}),"rsbudget vs Faktisk"]})}),l.jsx(ee,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:ue(i)}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Totalt spenderat"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"font-medium",children:ue(r)}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Total budget"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex justify-between text-xs",children:[l.jsx("span",{children:"Frbrukat"}),l.jsxs("span",{children:[s.toFixed(1),"%"]})]}),l.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:l.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${s>100?"bg-red-500":s>80?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(s,100)}%`}})})]}),n.length>0?l.jsx("div",{className:"h-40",children:l.jsx(Bi,{width:"100%",height:"100%",children:l.jsxs(x1,{data:n,margin:{top:5,right:5,left:5,bottom:5},children:[l.jsx(Ca,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:e?"#94a3b8":"#64748b"}}),l.jsx(Ta,{hide:!0}),l.jsx(Vs,{formatter:(a,o)=>[ue(a),o==="budgeted"?"Budget":o==="spent"?"Spenderat":"terstr"],labelFormatter:a=>{const o=n.find(c=>c.name===a);return(o==null?void 0:o.fullName)||a},labelStyle:{color:e?"#fff":"#000"},contentStyle:{backgroundColor:e?"#1e293b":"#fff",border:e?"1px solid #334155":"1px solid #e2e8f0",borderRadius:"6px",fontSize:"12px"}}),l.jsx(iv,{wrapperStyle:{fontSize:"10px"},iconType:"rect"}),l.jsx(Qa,{dataKey:"budgeted",fill:e?"#475569":"#e2e8f0",name:"Budget",radius:[2,2,0,0]}),l.jsx(Qa,{dataKey:"spent",fill:e?"#3b82f6":"#2563eb",name:"Spenderat",radius:[2,2,0,0]})]})})}):l.jsx("div",{className:"h-40 flex items-center justify-center text-muted-foreground text-sm",children:"Inga rliga budgetposter att visa"}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.length," rliga budgetposter  Uppdateras i realtid"]})]})})]})}const YB=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#06b6d4","#ec4899","#84cc16","#f97316","#6366f1"];function c5e({isDarkMode:e}){const{annualItems:t}=jS(),n=t.filter(o=>o.spent>0).map((o,c)=>({name:o.name,value:o.spent,color:o.color||YB[c%YB.length],percentage:0})),r=n.reduce((o,c)=>o+c.value,0);n.forEach(o=>{o.percentage=r>0?o.value/r*100:0}),n.sort((o,c)=>c.value-o.value);const i=t.filter(o=>o.spent>0).length,s=t.length,a=i>0?r/i:0;return l.jsxs(Z,{className:"h-full",children:[l.jsx(de,{className:"pb-2",children:l.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(rE,{className:"h-4 w-4"}),"rlig Utgiftsfrdelning"]})}),l.jsx(ee,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:ue(r)}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Totalt spenderat"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:ue(a)}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Snitt per kategori"})]})]}),n.length>0?l.jsx("div",{className:"h-48",children:l.jsx(Bi,{width:"100%",height:"100%",children:l.jsxs(r0,{children:[l.jsx(Ph,{data:n,cx:"50%",cy:"50%",innerRadius:30,outerRadius:70,dataKey:"value",labelLine:!1,children:n.map((o,c)=>l.jsx(ul,{fill:o.color},`cell-${c}`))}),l.jsx(Vs,{formatter:o=>[ue(o),"Spenderat"],labelStyle:{color:e?"#fff":"#000"},contentStyle:{backgroundColor:e?"#1e293b":"#fff",border:e?"1px solid #334155":"1px solid #e2e8f0",borderRadius:"6px",fontSize:"12px"}})]})})}):l.jsx("div",{className:"h-48 flex items-center justify-center text-muted-foreground text-sm",children:"Inga utgifter att visa n"}),n.length>0&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Strsta utgifter:"}),l.jsxs("div",{className:"space-y-1",children:[n.slice(0,3).map((o,c)=>l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:o.color}}),l.jsx("span",{className:"truncate max-w-24",children:o.name})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"font-medium",children:ue(o.value)}),l.jsxs("span",{className:"text-muted-foreground",children:["(",o.percentage.toFixed(0),"%)"]})]})]},c)),n.length>3&&l.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",n.length-3," fler kategorier"]})]})]}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:[i," av ",s," kategorier med utgifter"]})]})})]})}function $t(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function u5e(e,t){const n=w.createContext(t),r=s=>{const{children:a,...o}=s,c=w.useMemo(()=>o,Object.values(o));return l.jsx(n.Provider,{value:c,children:a})};r.displayName=e+"Provider";function i(s){const a=w.useContext(n);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[r,i]}function ru(e,t=[]){let n=[];function r(s,a){const o=w.createContext(a),c=n.length;n=[...n,a];const u=f=>{var y;const{scope:h,children:p,...m}=f,g=((y=h==null?void 0:h[e])==null?void 0:y[c])||o,v=w.useMemo(()=>m,Object.values(m));return l.jsx(g.Provider,{value:v,children:p})};u.displayName=s+"Provider";function d(f,h){var g;const p=((g=h==null?void 0:h[e])==null?void 0:g[c])||o,m=w.useContext(p);if(m)return m;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[u,d]}const i=()=>{const s=n.map(a=>w.createContext(a));return function(o){const c=(o==null?void 0:o[e])||s;return w.useMemo(()=>({[`__scope${e}`]:{...o,[e]:c}}),[o,c])}};return i.scopeName=e,[r,d5e(i,...t)]}function d5e(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:c,scopeName:u})=>{const f=c(s)[`__scope${u}`];return{...o,...f}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var ur=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},f5e=jw[" useId ".trim().toString()]||(()=>{}),h5e=0;function Zf(e){const[t,n]=w.useState(f5e());return ur(()=>{n(r=>r??String(h5e++))},[e]),t?`radix-${t}`:""}var p5e=jw[" useInsertionEffect ".trim().toString()]||ur;function b1({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[i,s,a]=m5e({defaultProp:t,onChange:n}),o=e!==void 0,c=o?e:i;{const d=w.useRef(e!==void 0);w.useEffect(()=>{const f=d.current;f!==o&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=o},[o,r])}const u=w.useCallback(d=>{var f;if(o){const h=g5e(d)?d(e):d;h!==e&&((f=a.current)==null||f.call(a,h))}else s(d)},[o,e,s,a]);return[c,u]}function m5e({defaultProp:e,onChange:t}){const[n,r]=w.useState(e),i=w.useRef(n),s=w.useRef(t);return p5e(()=>{s.current=t},[t]),w.useEffect(()=>{var a;i.current!==n&&((a=s.current)==null||a.call(s,n),i.current=n)},[n,i]),[n,r,s]}function g5e(e){return typeof e=="function"}var v5e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],kt=v5e.reduce((e,t)=>{const n=vh(`Primitive.${t}`),r=w.forwardRef((i,s)=>{const{asChild:a,...o}=i,c=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(c,{...o,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function y5e(e,t){e&&ml.flushSync(()=>e.dispatchEvent(t))}function Dc(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function x5e(e,t=globalThis==null?void 0:globalThis.document){const n=Dc(e);w.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var b5e="DismissableLayer",YT="dismissableLayer.update",w5e="dismissableLayer.pointerDownOutside",E5e="dismissableLayer.focusOutside",XB,qJ=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zD=w.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...c}=e,u=w.useContext(qJ),[d,f]=w.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=w.useState({}),m=fn(t,_=>f(_)),g=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(v),x=d?g.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,S=x>=y,E=_5e(_=>{const k=_.target,T=[...u.branches].some(A=>A.contains(k));!S||T||(i==null||i(_),a==null||a(_),_.defaultPrevented||o==null||o())},h),N=k5e(_=>{const k=_.target;[...u.branches].some(A=>A.contains(k))||(s==null||s(_),a==null||a(_),_.defaultPrevented||o==null||o())},h);return x5e(_=>{x===u.layers.size-1&&(r==null||r(_),!_.defaultPrevented&&o&&(_.preventDefault(),o()))},h),w.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(XB=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),QB(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=XB)}},[d,h,n,u]),w.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),QB())},[d,u]),w.useEffect(()=>{const _=()=>p({});return document.addEventListener(YT,_),()=>document.removeEventListener(YT,_)},[]),l.jsx(kt.div,{...c,ref:m,style:{pointerEvents:b?S?"auto":"none":void 0,...e.style},onFocusCapture:$t(e.onFocusCapture,N.onFocusCapture),onBlurCapture:$t(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:$t(e.onPointerDownCapture,E.onPointerDownCapture)})});zD.displayName=b5e;var S5e="DismissableLayerBranch",N5e=w.forwardRef((e,t)=>{const n=w.useContext(qJ),r=w.useRef(null),i=fn(t,r);return w.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),l.jsx(kt.div,{...e,ref:i})});N5e.displayName=S5e;function _5e(e,t=globalThis==null?void 0:globalThis.document){const n=Dc(e),r=w.useRef(!1),i=w.useRef(()=>{});return w.useEffect(()=>{const s=o=>{if(o.target&&!r.current){let c=function(){KJ(w5e,n,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function k5e(e,t=globalThis==null?void 0:globalThis.document){const n=Dc(e),r=w.useRef(!1);return w.useEffect(()=>{const i=s=>{s.target&&!r.current&&KJ(E5e,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function QB(){const e=new CustomEvent(YT);document.dispatchEvent(e)}function KJ(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?y5e(i,s):i.dispatchEvent(s)}var rk="focusScope.autoFocusOnMount",ik="focusScope.autoFocusOnUnmount",JB={bubbles:!1,cancelable:!0},C5e="FocusScope",HD=w.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=e,[o,c]=w.useState(null),u=Dc(i),d=Dc(s),f=w.useRef(null),h=fn(t,g=>c(g)),p=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(r){let g=function(b){if(p.paused||!o)return;const S=b.target;o.contains(S)?f.current=S:Dl(f.current,{select:!0})},v=function(b){if(p.paused||!o)return;const S=b.relatedTarget;S!==null&&(o.contains(S)||Dl(f.current,{select:!0}))},y=function(b){if(document.activeElement===document.body)for(const E of b)E.removedNodes.length>0&&Dl(o)};document.addEventListener("focusin",g),document.addEventListener("focusout",v);const x=new MutationObserver(y);return o&&x.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",v),x.disconnect()}}},[r,o,p.paused]),w.useEffect(()=>{if(o){e8.add(p);const g=document.activeElement;if(!o.contains(g)){const y=new CustomEvent(rk,JB);o.addEventListener(rk,u),o.dispatchEvent(y),y.defaultPrevented||(T5e(I5e(GJ(o)),{select:!0}),document.activeElement===g&&Dl(o))}return()=>{o.removeEventListener(rk,u),setTimeout(()=>{const y=new CustomEvent(ik,JB);o.addEventListener(ik,d),o.dispatchEvent(y),y.defaultPrevented||Dl(g??document.body,{select:!0}),o.removeEventListener(ik,d),e8.remove(p)},0)}}},[o,u,d,p]);const m=w.useCallback(g=>{if(!n&&!r||p.paused)return;const v=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,y=document.activeElement;if(v&&y){const x=g.currentTarget,[b,S]=A5e(x);b&&S?!g.shiftKey&&y===S?(g.preventDefault(),n&&Dl(b,{select:!0})):g.shiftKey&&y===b&&(g.preventDefault(),n&&Dl(S,{select:!0})):y===x&&g.preventDefault()}},[n,r,p.paused]);return l.jsx(kt.div,{tabIndex:-1,...a,ref:h,onKeyDown:m})});HD.displayName=C5e;function T5e(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Dl(r,{select:t}),document.activeElement!==n)return}function A5e(e){const t=GJ(e),n=ZB(t,e),r=ZB(t.reverse(),e);return[n,r]}function GJ(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function ZB(e,t){for(const n of e)if(!j5e(n,{upTo:t}))return n}function j5e(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function O5e(e){return e instanceof HTMLInputElement&&"select"in e}function Dl(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&O5e(e)&&t&&e.select()}}var e8=P5e();function P5e(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=t8(e,t),e.unshift(t)},remove(t){var n;e=t8(e,t),(n=e[0])==null||n.resume()}}}function t8(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function I5e(e){return e.filter(t=>t.tagName!=="A")}var D5e="Portal",VD=w.forwardRef((e,t)=>{var o;const{container:n,...r}=e,[i,s]=w.useState(!1);ur(()=>s(!0),[]);const a=n||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?nO.createPortal(l.jsx(kt.div,{...r,ref:t}),a):null});VD.displayName=D5e;function M5e(e,t){return w.useReducer((n,r)=>t[n][r]??n,e)}var OS=e=>{const{present:t,children:n}=e,r=R5e(t),i=typeof n=="function"?n({present:r.isPresent}):w.Children.only(n),s=fn(r.ref,L5e(i));return typeof n=="function"||r.isPresent?w.cloneElement(i,{ref:s}):null};OS.displayName="Presence";function R5e(e){const[t,n]=w.useState(),r=w.useRef(null),i=w.useRef(e),s=w.useRef("none"),a=e?"mounted":"unmounted",[o,c]=M5e(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const u=_y(r.current);s.current=o==="mounted"?u:"none"},[o]),ur(()=>{const u=r.current,d=i.current;if(d!==e){const h=s.current,p=_y(u);e?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),ur(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=p=>{const g=_y(r.current).includes(CSS.escape(p.animationName));if(p.target===t&&g&&(c("ANIMATION_END"),!i.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},h=p=>{p.target===t&&(s.current=_y(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:w.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function _y(e){return(e==null?void 0:e.animationName)||"none"}function L5e(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var sk=0;function YJ(){w.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??n8()),document.body.insertAdjacentElement("beforeend",e[1]??n8()),sk++,()=>{sk===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),sk--}},[])}function n8(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ya=function(){return Ya=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ya.apply(this,arguments)};function XJ(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function F5e(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var _x="right-scroll-bar-position",kx="width-before-scroll-bar",B5e="with-scroll-bars-hidden",$5e="--removed-body-scroll-bar-size";function ak(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function U5e(e,t){var n=w.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var z5e=typeof window<"u"?w.useLayoutEffect:w.useEffect,r8=new WeakMap;function H5e(e,t){var n=U5e(null,function(r){return e.forEach(function(i){return ak(i,r)})});return z5e(function(){var r=r8.get(n);if(r){var i=new Set(r),s=new Set(e),a=n.current;i.forEach(function(o){s.has(o)||ak(o,null)}),s.forEach(function(o){i.has(o)||ak(o,a)})}r8.set(n,e)},[e]),n}function V5e(e){return e}function W5e(e,t){t===void 0&&(t=V5e);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var a=t(s,r);return n.push(a),function(){n=n.filter(function(o){return o!==a})}},assignSyncMedium:function(s){for(r=!0;n.length;){var a=n;n=[],a.forEach(s)}n={push:function(o){return s(o)},filter:function(){return n}}},assignMedium:function(s){r=!0;var a=[];if(n.length){var o=n;n=[],o.forEach(s),a=n}var c=function(){var d=a;a=[],d.forEach(s)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),n}}}};return i}function q5e(e){e===void 0&&(e={});var t=W5e(null);return t.options=Ya({async:!0,ssr:!1},e),t}var QJ=function(e){var t=e.sideCar,n=XJ(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return w.createElement(r,Ya({},n))};QJ.isSideCarExport=!0;function K5e(e,t){return e.useMedium(t),QJ}var JJ=q5e(),ok=function(){},PS=w.forwardRef(function(e,t){var n=w.useRef(null),r=w.useState({onScrollCapture:ok,onWheelCapture:ok,onTouchMoveCapture:ok}),i=r[0],s=r[1],a=e.forwardProps,o=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,p=e.noRelative,m=e.noIsolation,g=e.inert,v=e.allowPinchZoom,y=e.as,x=y===void 0?"div":y,b=e.gapMode,S=XJ(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=h,N=H5e([n,t]),_=Ya(Ya({},S),i);return w.createElement(w.Fragment,null,d&&w.createElement(E,{sideCar:JJ,removeScrollBar:u,shards:f,noRelative:p,noIsolation:m,inert:g,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:b}),a?w.cloneElement(w.Children.only(o),Ya(Ya({},_),{ref:N})):w.createElement(x,Ya({},_,{className:c,ref:N}),o))});PS.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};PS.classNames={fullWidth:kx,zeroRight:_x};var G5e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Y5e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=G5e();return t&&e.setAttribute("nonce",t),e}function X5e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Q5e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var J5e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Y5e())&&(X5e(t,n),Q5e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Z5e=function(){var e=J5e();return function(t,n){w.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},ZJ=function(){var e=Z5e(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},eFe={left:0,top:0,right:0,gap:0},lk=function(e){return parseInt(e||"",10)||0},tFe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[lk(n),lk(r),lk(i)]},nFe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return eFe;var t=tFe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},rFe=ZJ(),eh="data-scroll-locked",iFe=function(e,t,n,r){var i=e.left,s=e.top,a=e.right,o=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(B5e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(eh,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(_x,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(kx,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(_x," .").concat(_x,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(kx," .").concat(kx,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(eh,`] {
    `).concat($5e,": ").concat(o,`px;
  }
`)},i8=function(){var e=parseInt(document.body.getAttribute(eh)||"0",10);return isFinite(e)?e:0},sFe=function(){w.useEffect(function(){return document.body.setAttribute(eh,(i8()+1).toString()),function(){var e=i8()-1;e<=0?document.body.removeAttribute(eh):document.body.setAttribute(eh,e.toString())}},[])},aFe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;sFe();var s=w.useMemo(function(){return nFe(i)},[i]);return w.createElement(rFe,{styles:iFe(s,!t,i,n?"":"!important")})},XT=!1;if(typeof window<"u")try{var ky=Object.defineProperty({},"passive",{get:function(){return XT=!0,!0}});window.addEventListener("test",ky,ky),window.removeEventListener("test",ky,ky)}catch{XT=!1}var nf=XT?{passive:!1}:!1,oFe=function(e){return e.tagName==="TEXTAREA"},eZ=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!oFe(e)&&n[t]==="visible")},lFe=function(e){return eZ(e,"overflowY")},cFe=function(e){return eZ(e,"overflowX")},s8=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=tZ(e,r);if(i){var s=nZ(e,r),a=s[1],o=s[2];if(a>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},uFe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},dFe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},tZ=function(e,t){return e==="v"?lFe(t):cFe(t)},nZ=function(e,t){return e==="v"?uFe(t):dFe(t)},fFe=function(e,t){return e==="h"&&t==="rtl"?-1:1},hFe=function(e,t,n,r,i){var s=fFe(e,window.getComputedStyle(t).direction),a=s*r,o=n.target,c=t.contains(o),u=!1,d=a>0,f=0,h=0;do{if(!o)break;var p=nZ(e,o),m=p[0],g=p[1],v=p[2],y=g-v-s*m;(m||y)&&tZ(e,o)&&(f+=y,h+=m);var x=o.parentNode;o=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!c&&o!==document.body||c&&(t.contains(o)||t===o));return(d&&Math.abs(f)<1||!d&&Math.abs(h)<1)&&(u=!0),u},Cy=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},a8=function(e){return[e.deltaX,e.deltaY]},o8=function(e){return e&&"current"in e?e.current:e},pFe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},mFe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},gFe=0,rf=[];function vFe(e){var t=w.useRef([]),n=w.useRef([0,0]),r=w.useRef(),i=w.useState(gFe++)[0],s=w.useState(ZJ)[0],a=w.useRef(e);w.useEffect(function(){a.current=e},[e]),w.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var g=F5e([e.lockRef.current],(e.shards||[]).map(o8),!0).filter(Boolean);return g.forEach(function(v){return v.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var o=w.useCallback(function(g,v){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!a.current.allowPinchZoom;var y=Cy(g),x=n.current,b="deltaX"in g?g.deltaX:x[0]-y[0],S="deltaY"in g?g.deltaY:x[1]-y[1],E,N=g.target,_=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in g&&_==="h"&&N.type==="range")return!1;var k=s8(_,N);if(!k)return!0;if(k?E=_:(E=_==="v"?"h":"v",k=s8(_,N)),!k)return!1;if(!r.current&&"changedTouches"in g&&(b||S)&&(r.current=E),!E)return!0;var T=r.current||E;return hFe(T,v,g,T==="h"?b:S)},[]),c=w.useCallback(function(g){var v=g;if(!(!rf.length||rf[rf.length-1]!==s)){var y="deltaY"in v?a8(v):Cy(v),x=t.current.filter(function(E){return E.name===v.type&&(E.target===v.target||v.target===E.shadowParent)&&pFe(E.delta,y)})[0];if(x&&x.should){v.cancelable&&v.preventDefault();return}if(!x){var b=(a.current.shards||[]).map(o8).filter(Boolean).filter(function(E){return E.contains(v.target)}),S=b.length>0?o(v,b[0]):!a.current.noIsolation;S&&v.cancelable&&v.preventDefault()}}},[]),u=w.useCallback(function(g,v,y,x){var b={name:g,delta:v,target:y,should:x,shadowParent:yFe(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(S){return S!==b})},1)},[]),d=w.useCallback(function(g){n.current=Cy(g),r.current=void 0},[]),f=w.useCallback(function(g){u(g.type,a8(g),g.target,o(g,e.lockRef.current))},[]),h=w.useCallback(function(g){u(g.type,Cy(g),g.target,o(g,e.lockRef.current))},[]);w.useEffect(function(){return rf.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,nf),document.addEventListener("touchmove",c,nf),document.addEventListener("touchstart",d,nf),function(){rf=rf.filter(function(g){return g!==s}),document.removeEventListener("wheel",c,nf),document.removeEventListener("touchmove",c,nf),document.removeEventListener("touchstart",d,nf)}},[]);var p=e.removeScrollBar,m=e.inert;return w.createElement(w.Fragment,null,m?w.createElement(s,{styles:mFe(i)}):null,p?w.createElement(aFe,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function yFe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const xFe=K5e(JJ,vFe);var WD=w.forwardRef(function(e,t){return w.createElement(PS,Ya({},e,{ref:t,sideCar:xFe}))});WD.classNames=PS.classNames;var bFe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},sf=new WeakMap,Ty=new WeakMap,Ay={},ck=0,rZ=function(e){return e&&(e.host||rZ(e.parentNode))},wFe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=rZ(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},EFe=function(e,t,n,r){var i=wFe(t,Array.isArray(e)?e:[e]);Ay[n]||(Ay[n]=new WeakMap);var s=Ay[n],a=[],o=new Set,c=new Set(i),u=function(f){!f||o.has(f)||(o.add(f),u(f.parentNode))};i.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(o.has(h))d(h);else try{var p=h.getAttribute(r),m=p!==null&&p!=="false",g=(sf.get(h)||0)+1,v=(s.get(h)||0)+1;sf.set(h,g),s.set(h,v),a.push(h),g===1&&m&&Ty.set(h,!0),v===1&&h.setAttribute(n,"true"),m||h.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return d(t),o.clear(),ck++,function(){a.forEach(function(f){var h=sf.get(f)-1,p=s.get(f)-1;sf.set(f,h),s.set(f,p),h||(Ty.has(f)||f.removeAttribute(r),Ty.delete(f)),p||f.removeAttribute(n)}),ck--,ck||(sf=new WeakMap,sf=new WeakMap,Ty=new WeakMap,Ay={})}},iZ=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=bFe(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),EFe(r,i,n,"aria-hidden")):function(){return null}},IS="Dialog",[sZ,aZ]=ru(IS),[SFe,Ra]=sZ(IS),oZ=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:a=!0}=e,o=w.useRef(null),c=w.useRef(null),[u,d]=b1({prop:r,defaultProp:i??!1,onChange:s,caller:IS});return l.jsx(SFe,{scope:t,triggerRef:o,contentRef:c,contentId:Zf(),titleId:Zf(),descriptionId:Zf(),open:u,onOpenChange:d,onOpenToggle:w.useCallback(()=>d(f=>!f),[d]),modal:a,children:n})};oZ.displayName=IS;var lZ="DialogTrigger",cZ=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Ra(lZ,n),s=fn(t,i.triggerRef);return l.jsx(kt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":GD(i.open),...r,ref:s,onClick:$t(e.onClick,i.onOpenToggle)})});cZ.displayName=lZ;var qD="DialogPortal",[NFe,uZ]=sZ(qD,{forceMount:void 0}),dZ=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,s=Ra(qD,t);return l.jsx(NFe,{scope:t,forceMount:n,children:w.Children.map(r,a=>l.jsx(OS,{present:n||s.open,children:l.jsx(VD,{asChild:!0,container:i,children:a})}))})};dZ.displayName=qD;var w1="DialogOverlay",fZ=w.forwardRef((e,t)=>{const n=uZ(w1,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=Ra(w1,e.__scopeDialog);return s.modal?l.jsx(OS,{present:r||s.open,children:l.jsx(kFe,{...i,ref:t})}):null});fZ.displayName=w1;var _Fe=vh("DialogOverlay.RemoveScroll"),kFe=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Ra(w1,n);return l.jsx(WD,{as:_Fe,allowPinchZoom:!0,shards:[i.contentRef],children:l.jsx(kt.div,{"data-state":GD(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Sd="DialogContent",hZ=w.forwardRef((e,t)=>{const n=uZ(Sd,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=Ra(Sd,e.__scopeDialog);return l.jsx(OS,{present:r||s.open,children:s.modal?l.jsx(CFe,{...i,ref:t}):l.jsx(TFe,{...i,ref:t})})});hZ.displayName=Sd;var CFe=w.forwardRef((e,t)=>{const n=Ra(Sd,e.__scopeDialog),r=w.useRef(null),i=fn(t,n.contentRef,r);return w.useEffect(()=>{const s=r.current;if(s)return iZ(s)},[]),l.jsx(pZ,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$t(e.onCloseAutoFocus,s=>{var a;s.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:$t(e.onPointerDownOutside,s=>{const a=s.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&s.preventDefault()}),onFocusOutside:$t(e.onFocusOutside,s=>s.preventDefault())})}),TFe=w.forwardRef((e,t)=>{const n=Ra(Sd,e.__scopeDialog),r=w.useRef(!1),i=w.useRef(!1);return l.jsx(pZ,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var a,o;(a=e.onCloseAutoFocus)==null||a.call(e,s),s.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),pZ=w.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=e,o=Ra(Sd,n),c=w.useRef(null),u=fn(t,c);return YJ(),l.jsxs(l.Fragment,{children:[l.jsx(HD,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:l.jsx(zD,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":GD(o.open),...a,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(jFe,{titleId:o.titleId}),l.jsx(PFe,{contentRef:c,descriptionId:o.descriptionId})]})]})}),KD="DialogTitle",mZ=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Ra(KD,n);return l.jsx(kt.h2,{id:i.titleId,...r,ref:t})});mZ.displayName=KD;var gZ="DialogDescription",vZ=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Ra(gZ,n);return l.jsx(kt.p,{id:i.descriptionId,...r,ref:t})});vZ.displayName=gZ;var yZ="DialogClose",xZ=w.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Ra(yZ,n);return l.jsx(kt.button,{type:"button",...r,ref:t,onClick:$t(e.onClick,()=>i.onOpenChange(!1))})});xZ.displayName=yZ;function GD(e){return e?"open":"closed"}var bZ="DialogTitleWarning",[AFe,wZ]=u5e(bZ,{contentName:Sd,titleName:KD,docsSlug:"dialog"}),jFe=({titleId:e})=>{const t=wZ(bZ),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return w.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},OFe="DialogDescriptionWarning",PFe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${wZ(OFe).contentName}}.`;return w.useEffect(()=>{var s;const i=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},EZ=oZ,SZ=cZ,NZ=dZ,YD=fZ,XD=hZ,QD=mZ,JD=vZ,ZD=xZ;const xt=EZ,IFe=SZ,DFe=NZ,_Z=w.forwardRef(({className:e,...t},n)=>l.jsx(YD,{ref:n,className:Re("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));_Z.displayName=YD.displayName;const ft=w.forwardRef(({className:e,children:t,...n},r)=>l.jsxs(DFe,{children:[l.jsx(_Z,{}),l.jsxs(XD,{ref:r,className:Re("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,l.jsxs(ZD,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[l.jsx(Qn,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ft.displayName=XD.displayName;const ht=({className:e,...t})=>l.jsx("div",{className:Re("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});ht.displayName="DialogHeader";const gp=({className:e,...t})=>l.jsx("div",{className:Re("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});gp.displayName="DialogFooter";const pt=w.forwardRef(({className:e,...t},n)=>l.jsx(QD,{ref:n,className:Re("text-lg font-semibold leading-none tracking-tight",e),...t}));pt.displayName=QD.displayName;const iu=w.forwardRef(({className:e,...t},n)=>l.jsx(JD,{ref:n,className:Re("text-sm text-muted-foreground",e),...t}));iu.displayName=JD.displayName;const MFe={"Privat utlgg":dV,"Mynt kortet":pO,Faktura:en,Annat:oV};function RFe(){const{entries:e}=jS(),[t,n]=w.useState(null),[r,i]=w.useState(!1),a=(()=>{const u=new Map;return e.filter(d=>d.type==="expense"&&!d.is_budget_entry).forEach(d=>{const f=d.payment_source||"Oknd";u.has(f)||u.set(f,{count:0,totalAmount:0,expenses:[]});const h=u.get(f);h.count+=1,h.totalAmount+=d.amount,h.expenses.push({id:d.id,amount:d.amount,description:d.description,category:d.category,date:d.date,payment_source:d.payment_source})}),Array.from(u.entries()).map(([d,f])=>({source:d,count:f.count,totalAmount:f.totalAmount,expenses:f.expenses})).sort((d,f)=>f.count-d.count)})(),o=u=>{n(u),i(!0)},c=u=>{const d=MFe[u]||oV;return l.jsx(d,{className:"h-4 w-4"})};return l.jsxs(l.Fragment,{children:[l.jsxs(Z,{children:[l.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(he,{className:"text-sm font-medium",children:"Betalningskllor"}),l.jsx(pO,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(ee,{children:l.jsx("div",{className:"space-y-3",children:a.length>0?a.map(u=>l.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer transition-colors",onClick:()=>o(u),children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[c(u.source),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:u.source}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:[u.count," utgift",u.count!==1?"er":""]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"font-semibold",children:ue(u.totalAmount)}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"totalt"})]})]},u.source)):l.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[l.jsx(Js,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{children:"Inga utgifter nnu"})]})})})]}),l.jsx(xt,{open:r,onOpenChange:i,children:l.jsxs(ft,{className:"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[l.jsx(ht,{className:"flex-shrink-0",children:l.jsxs(pt,{className:"flex items-center gap-2",children:[t&&c(t.source),"Utgifter frn ",t==null?void 0:t.source]})}),l.jsx("div",{className:"space-y-4 flex-1 overflow-y-auto",children:t&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Antal utgifter"}),l.jsx("div",{className:"text-lg font-semibold",children:t.count})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Totalt belopp"}),l.jsx("div",{className:"text-lg font-semibold",children:ue(t.totalAmount)})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Genomsnitt per utgift"}),l.jsx("div",{className:"text-lg font-semibold",children:ue(t.totalAmount/t.count)})]})]}),l.jsx("div",{className:"border rounded-lg overflow-hidden",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left p-3 font-medium",children:"Datum"}),l.jsx("th",{className:"text-left p-3 font-medium",children:"Beskrivning"}),l.jsx("th",{className:"text-left p-3 font-medium",children:"Kategori"}),l.jsx("th",{className:"text-right p-3 font-medium",children:"Belopp"})]})}),l.jsx("tbody",{className:"divide-y",children:t.expenses.sort((u,d)=>new Date(d.date).getTime()-new Date(u.date).getTime()).map(u=>l.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[l.jsx("td",{className:"p-3",children:new Date(u.date).toLocaleDateString("sv-SE")}),l.jsx("td",{className:"p-3",children:u.description}),l.jsx("td",{className:"p-3",children:l.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-xs",children:u.category})}),l.jsx("td",{className:"p-3 text-right font-medium",children:ue(u.amount)})]},u.id))})]})})]})}),l.jsx("div",{className:"flex justify-end pt-4 border-t flex-shrink-0",children:l.jsx(H,{variant:"outline",onClick:()=>i(!1),children:"Stng"})})]})})]})}const LFe=_O("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ot({className:e,variant:t,...n}){return l.jsx("div",{className:Re(LFe({variant:t}),e),...n})}const X=w.forwardRef(({className:e,...t},n)=>l.jsx("label",{ref:n,className:Re("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));X.displayName="Label";function l8(e,[t,n]){return Math.min(n,Math.max(t,e))}function FFe(e){const t=e+"CollectionProvider",[n,r]=ru(t),[i,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:v,children:y}=g,x=at.useRef(null),b=at.useRef(new Map).current;return l.jsx(i,{scope:v,itemMap:b,collectionRef:x,children:y})};a.displayName=t;const o=e+"CollectionSlot",c=vh(o),u=at.forwardRef((g,v)=>{const{scope:y,children:x}=g,b=s(o,y),S=fn(v,b.collectionRef);return l.jsx(c,{ref:S,children:x})});u.displayName=o;const d=e+"CollectionItemSlot",f="data-radix-collection-item",h=vh(d),p=at.forwardRef((g,v)=>{const{scope:y,children:x,...b}=g,S=at.useRef(null),E=fn(v,S),N=s(d,y);return at.useEffect(()=>(N.itemMap.set(S,{ref:S,...b}),()=>void N.itemMap.delete(S))),l.jsx(h,{[f]:"",ref:E,children:x})});p.displayName=d;function m(g){const v=s(e+"CollectionConsumer",g);return at.useCallback(()=>{const x=v.collectionRef.current;if(!x)return[];const b=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(v.itemMap.values()).sort((N,_)=>b.indexOf(N.ref.current)-b.indexOf(_.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:a,Slot:u,ItemSlot:p},m,r]}var BFe=w.createContext(void 0);function $Fe(e){const t=w.useContext(BFe);return e||t||"ltr"}const UFe=["top","right","bottom","left"],Mc=Math.min,ns=Math.max,E1=Math.round,jy=Math.floor,lo=e=>({x:e,y:e}),zFe={left:"right",right:"left",bottom:"top",top:"bottom"},HFe={start:"end",end:"start"};function QT(e,t,n){return ns(e,Mc(t,n))}function fl(e,t){return typeof e=="function"?e(t):e}function hl(e){return e.split("-")[0]}function vp(e){return e.split("-")[1]}function eM(e){return e==="x"?"y":"x"}function tM(e){return e==="y"?"height":"width"}const VFe=new Set(["top","bottom"]);function Ja(e){return VFe.has(hl(e))?"y":"x"}function nM(e){return eM(Ja(e))}function WFe(e,t,n){n===void 0&&(n=!1);const r=vp(e),i=nM(e),s=tM(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=S1(a)),[a,S1(a)]}function qFe(e){const t=S1(e);return[JT(e),t,JT(t)]}function JT(e){return e.replace(/start|end/g,t=>HFe[t])}const c8=["left","right"],u8=["right","left"],KFe=["top","bottom"],GFe=["bottom","top"];function YFe(e,t,n){switch(e){case"top":case"bottom":return n?t?u8:c8:t?c8:u8;case"left":case"right":return t?KFe:GFe;default:return[]}}function XFe(e,t,n,r){const i=vp(e);let s=YFe(hl(e),n==="start",r);return i&&(s=s.map(a=>a+"-"+i),t&&(s=s.concat(s.map(JT)))),s}function S1(e){return e.replace(/left|right|bottom|top/g,t=>zFe[t])}function QFe(e){return{top:0,right:0,bottom:0,left:0,...e}}function kZ(e){return typeof e!="number"?QFe(e):{top:e,right:e,bottom:e,left:e}}function N1(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function d8(e,t,n){let{reference:r,floating:i}=e;const s=Ja(t),a=nM(t),o=tM(a),c=hl(t),u=s==="y",d=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,h=r[o]/2-i[o]/2;let p;switch(c){case"top":p={x:d,y:r.y-i.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-i.width,y:f};break;default:p={x:r.x,y:r.y}}switch(vp(t)){case"start":p[a]-=h*(n&&u?-1:1);break;case"end":p[a]+=h*(n&&u?-1:1);break}return p}const JFe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=n,o=s.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:f}=d8(u,r,c),h=r,p={},m=0;for(let g=0;g<o.length;g++){const{name:v,fn:y}=o[g],{x,y:b,data:S,reset:E}=await y({x:d,y:f,initialPlacement:r,placement:h,strategy:i,middlewareData:p,rects:u,platform:a,elements:{reference:e,floating:t}});d=x??d,f=b??f,p={...p,[v]:{...p[v],...S}},E&&m<=50&&(m++,typeof E=="object"&&(E.placement&&(h=E.placement),E.rects&&(u=E.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:d,y:f}=d8(u,h,c)),g=-1)}return{x:d,y:f,placement:h,strategy:i,middlewareData:p}};async function i0(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:a,elements:o,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=fl(t,e),m=kZ(p),v=o[h?f==="floating"?"reference":"floating":f],y=N1(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:u,rootBoundary:d,strategy:c})),x=f==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),S=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},E=N1(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:x,offsetParent:b,strategy:c}):x);return{top:(y.top-E.top+m.top)/S.y,bottom:(E.bottom-y.bottom+m.bottom)/S.y,left:(y.left-E.left+m.left)/S.x,right:(E.right-y.right+m.right)/S.x}}const ZFe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:a,elements:o,middlewareData:c}=t,{element:u,padding:d=0}=fl(e,t)||{};if(u==null)return{};const f=kZ(d),h={x:n,y:r},p=nM(i),m=tM(p),g=await a.getDimensions(u),v=p==="y",y=v?"top":"left",x=v?"bottom":"right",b=v?"clientHeight":"clientWidth",S=s.reference[m]+s.reference[p]-h[p]-s.floating[m],E=h[p]-s.reference[p],N=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let _=N?N[b]:0;(!_||!await(a.isElement==null?void 0:a.isElement(N)))&&(_=o.floating[b]||s.floating[m]);const k=S/2-E/2,T=_/2-g[m]/2-1,A=Mc(f[y],T),j=Mc(f[x],T),D=A,I=_-g[m]-j,M=_/2-g[m]/2+k,L=QT(D,M,I),P=!c.arrow&&vp(i)!=null&&M!==L&&s.reference[m]/2-(M<D?A:j)-g[m]/2<0,B=P?M<D?M-D:M-I:0;return{[p]:h[p]+B,data:{[p]:L,centerOffset:M-L-B,...P&&{alignmentOffset:B}},reset:P}}}),eBe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...v}=fl(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=hl(i),x=Ja(o),b=hl(o)===o,S=await(c.isRTL==null?void 0:c.isRTL(u.floating)),E=h||(b||!g?[S1(o)]:qFe(o)),N=m!=="none";!h&&N&&E.push(...XFe(o,g,m,S));const _=[o,...E],k=await i0(t,v),T=[];let A=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&T.push(k[y]),f){const M=WFe(i,a,S);T.push(k[M[0]],k[M[1]])}if(A=[...A,{placement:i,overflows:T}],!T.every(M=>M<=0)){var j,D;const M=(((j=s.flip)==null?void 0:j.index)||0)+1,L=_[M];if(L&&(!(f==="alignment"?x!==Ja(L):!1)||A.every(R=>Ja(R.placement)===x?R.overflows[0]>0:!0)))return{data:{index:M,overflows:A},reset:{placement:L}};let P=(D=A.filter(B=>B.overflows[0]<=0).sort((B,R)=>B.overflows[1]-R.overflows[1])[0])==null?void 0:D.placement;if(!P)switch(p){case"bestFit":{var I;const B=(I=A.filter(R=>{if(N){const F=Ja(R.placement);return F===x||F==="y"}return!0}).map(R=>[R.placement,R.overflows.filter(F=>F>0).reduce((F,O)=>F+O,0)]).sort((R,F)=>R[1]-F[1])[0])==null?void 0:I[0];B&&(P=B);break}case"initialPlacement":P=o;break}if(i!==P)return{reset:{placement:P}}}return{}}}};function f8(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function h8(e){return UFe.some(t=>e[t]>=0)}const tBe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=fl(e,t);switch(r){case"referenceHidden":{const s=await i0(t,{...i,elementContext:"reference"}),a=f8(s,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:h8(a)}}}case"escaped":{const s=await i0(t,{...i,altBoundary:!0}),a=f8(s,n.floating);return{data:{escapedOffsets:a,escaped:h8(a)}}}default:return{}}}}},CZ=new Set(["left","top"]);async function nBe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=hl(n),o=vp(n),c=Ja(n)==="y",u=CZ.has(a)?-1:1,d=s&&c?-1:1,f=fl(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof m=="number"&&(p=o==="end"?m*-1:m),c?{x:p*d,y:h*u}:{x:h*u,y:p*d}}const rBe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:a,middlewareData:o}=t,c=await nBe(t,e);return a===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:a}}}}},iBe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:v=>{let{x:y,y:x}=v;return{x:y,y:x}}},...c}=fl(e,t),u={x:n,y:r},d=await i0(t,c),f=Ja(hl(i)),h=eM(f);let p=u[h],m=u[f];if(s){const v=h==="y"?"top":"left",y=h==="y"?"bottom":"right",x=p+d[v],b=p-d[y];p=QT(x,p,b)}if(a){const v=f==="y"?"top":"left",y=f==="y"?"bottom":"right",x=m+d[v],b=m-d[y];m=QT(x,m,b)}const g=o.fn({...t,[h]:p,[f]:m});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[h]:s,[f]:a}}}}}},sBe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:a}=t,{offset:o=0,mainAxis:c=!0,crossAxis:u=!0}=fl(e,t),d={x:n,y:r},f=Ja(i),h=eM(f);let p=d[h],m=d[f];const g=fl(o,t),v=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const b=h==="y"?"height":"width",S=s.reference[h]-s.floating[b]+v.mainAxis,E=s.reference[h]+s.reference[b]-v.mainAxis;p<S?p=S:p>E&&(p=E)}if(u){var y,x;const b=h==="y"?"width":"height",S=CZ.has(hl(i)),E=s.reference[f]-s.floating[b]+(S&&((y=a.offset)==null?void 0:y[f])||0)+(S?0:v.crossAxis),N=s.reference[f]+s.reference[b]+(S?0:((x=a.offset)==null?void 0:x[f])||0)-(S?v.crossAxis:0);m<E?m=E:m>N&&(m=N)}return{[h]:p,[f]:m}}}},aBe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:s,platform:a,elements:o}=t,{apply:c=()=>{},...u}=fl(e,t),d=await i0(t,u),f=hl(i),h=vp(i),p=Ja(i)==="y",{width:m,height:g}=s.floating;let v,y;f==="top"||f==="bottom"?(v=f,y=h===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(y=f,v=h==="end"?"top":"bottom");const x=g-d.top-d.bottom,b=m-d.left-d.right,S=Mc(g-d[v],x),E=Mc(m-d[y],b),N=!t.middlewareData.shift;let _=S,k=E;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(k=b),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(_=x),N&&!h){const A=ns(d.left,0),j=ns(d.right,0),D=ns(d.top,0),I=ns(d.bottom,0);p?k=m-2*(A!==0||j!==0?A+j:ns(d.left,d.right)):_=g-2*(D!==0||I!==0?D+I:ns(d.top,d.bottom))}await c({...t,availableWidth:k,availableHeight:_});const T=await a.getDimensions(o.floating);return m!==T.width||g!==T.height?{reset:{rects:!0}}:{}}}};function DS(){return typeof window<"u"}function yp(e){return TZ(e)?(e.nodeName||"").toLowerCase():"#document"}function hs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function wo(e){var t;return(t=(TZ(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function TZ(e){return DS()?e instanceof Node||e instanceof hs(e).Node:!1}function Aa(e){return DS()?e instanceof Element||e instanceof hs(e).Element:!1}function go(e){return DS()?e instanceof HTMLElement||e instanceof hs(e).HTMLElement:!1}function p8(e){return!DS()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof hs(e).ShadowRoot}const oBe=new Set(["inline","contents"]);function bv(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=ja(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!oBe.has(i)}const lBe=new Set(["table","td","th"]);function cBe(e){return lBe.has(yp(e))}const uBe=[":popover-open",":modal"];function MS(e){return uBe.some(t=>{try{return e.matches(t)}catch{return!1}})}const dBe=["transform","translate","scale","rotate","perspective"],fBe=["transform","translate","scale","rotate","perspective","filter"],hBe=["paint","layout","strict","content"];function rM(e){const t=iM(),n=Aa(e)?ja(e):e;return dBe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||fBe.some(r=>(n.willChange||"").includes(r))||hBe.some(r=>(n.contain||"").includes(r))}function pBe(e){let t=Rc(e);for(;go(t)&&!Dh(t);){if(rM(t))return t;if(MS(t))return null;t=Rc(t)}return null}function iM(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const mBe=new Set(["html","body","#document"]);function Dh(e){return mBe.has(yp(e))}function ja(e){return hs(e).getComputedStyle(e)}function RS(e){return Aa(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Rc(e){if(yp(e)==="html")return e;const t=e.assignedSlot||e.parentNode||p8(e)&&e.host||wo(e);return p8(t)?t.host:t}function AZ(e){const t=Rc(e);return Dh(t)?e.ownerDocument?e.ownerDocument.body:e.body:go(t)&&bv(t)?t:AZ(t)}function s0(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=AZ(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),a=hs(i);if(s){const o=ZT(a);return t.concat(a,a.visualViewport||[],bv(i)?i:[],o&&n?s0(o):[])}return t.concat(i,s0(i,[],n))}function ZT(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function jZ(e){const t=ja(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=go(e),s=i?e.offsetWidth:n,a=i?e.offsetHeight:r,o=E1(n)!==s||E1(r)!==a;return o&&(n=s,r=a),{width:n,height:r,$:o}}function sM(e){return Aa(e)?e:e.contextElement}function th(e){const t=sM(e);if(!go(t))return lo(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=jZ(t);let a=(s?E1(n.width):n.width)/r,o=(s?E1(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const gBe=lo(0);function OZ(e){const t=hs(e);return!iM()||!t.visualViewport?gBe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function vBe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==hs(e)?!1:t}function Nd(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=sM(e);let a=lo(1);t&&(r?Aa(r)&&(a=th(r)):a=th(e));const o=vBe(s,n,r)?OZ(s):lo(0);let c=(i.left+o.x)/a.x,u=(i.top+o.y)/a.y,d=i.width/a.x,f=i.height/a.y;if(s){const h=hs(s),p=r&&Aa(r)?hs(r):r;let m=h,g=ZT(m);for(;g&&r&&p!==m;){const v=th(g),y=g.getBoundingClientRect(),x=ja(g),b=y.left+(g.clientLeft+parseFloat(x.paddingLeft))*v.x,S=y.top+(g.clientTop+parseFloat(x.paddingTop))*v.y;c*=v.x,u*=v.y,d*=v.x,f*=v.y,c+=b,u+=S,m=hs(g),g=ZT(m)}}return N1({width:d,height:f,x:c,y:u})}function LS(e,t){const n=RS(e).scrollLeft;return t?t.left+n:Nd(wo(e)).left+n}function PZ(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-LS(e,n),i=n.top+t.scrollTop;return{x:r,y:i}}function yBe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",a=wo(r),o=t?MS(t.floating):!1;if(r===a||o&&s)return n;let c={scrollLeft:0,scrollTop:0},u=lo(1);const d=lo(0),f=go(r);if((f||!f&&!s)&&((yp(r)!=="body"||bv(a))&&(c=RS(r)),go(r))){const p=Nd(r);u=th(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const h=a&&!f&&!s?PZ(a,c):lo(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+h.x,y:n.y*u.y-c.scrollTop*u.y+d.y+h.y}}function xBe(e){return Array.from(e.getClientRects())}function bBe(e){const t=wo(e),n=RS(e),r=e.ownerDocument.body,i=ns(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=ns(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+LS(e);const o=-n.scrollTop;return ja(r).direction==="rtl"&&(a+=ns(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:o}}const m8=25;function wBe(e,t){const n=hs(e),r=wo(e),i=n.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,c=0;if(i){s=i.width,a=i.height;const d=iM();(!d||d&&t==="fixed")&&(o=i.offsetLeft,c=i.offsetTop)}const u=LS(r);if(u<=0){const d=r.ownerDocument,f=d.body,h=getComputedStyle(f),p=d.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,m=Math.abs(r.clientWidth-f.clientWidth-p);m<=m8&&(s-=m)}else u<=m8&&(s+=u);return{width:s,height:a,x:o,y:c}}const EBe=new Set(["absolute","fixed"]);function SBe(e,t){const n=Nd(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=go(e)?th(e):lo(1),a=e.clientWidth*s.x,o=e.clientHeight*s.y,c=i*s.x,u=r*s.y;return{width:a,height:o,x:c,y:u}}function g8(e,t,n){let r;if(t==="viewport")r=wBe(e,n);else if(t==="document")r=bBe(wo(e));else if(Aa(t))r=SBe(t,n);else{const i=OZ(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return N1(r)}function IZ(e,t){const n=Rc(e);return n===t||!Aa(n)||Dh(n)?!1:ja(n).position==="fixed"||IZ(n,t)}function NBe(e,t){const n=t.get(e);if(n)return n;let r=s0(e,[],!1).filter(o=>Aa(o)&&yp(o)!=="body"),i=null;const s=ja(e).position==="fixed";let a=s?Rc(e):e;for(;Aa(a)&&!Dh(a);){const o=ja(a),c=rM(a);!c&&o.position==="fixed"&&(i=null),(s?!c&&!i:!c&&o.position==="static"&&!!i&&EBe.has(i.position)||bv(a)&&!c&&IZ(e,a))?r=r.filter(d=>d!==a):i=o,a=Rc(a)}return t.set(e,r),r}function _Be(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const a=[...n==="clippingAncestors"?MS(t)?[]:NBe(t,this._c):[].concat(n),r],o=a[0],c=a.reduce((u,d)=>{const f=g8(t,d,i);return u.top=ns(f.top,u.top),u.right=Mc(f.right,u.right),u.bottom=Mc(f.bottom,u.bottom),u.left=ns(f.left,u.left),u},g8(t,o,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function kBe(e){const{width:t,height:n}=jZ(e);return{width:t,height:n}}function CBe(e,t,n){const r=go(t),i=wo(t),s=n==="fixed",a=Nd(e,!0,s,t);let o={scrollLeft:0,scrollTop:0};const c=lo(0);function u(){c.x=LS(i)}if(r||!r&&!s)if((yp(t)!=="body"||bv(i))&&(o=RS(t)),r){const p=Nd(t,!0,s,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else i&&u();s&&!r&&i&&u();const d=i&&!r&&!s?PZ(i,o):lo(0),f=a.left+o.scrollLeft-c.x-d.x,h=a.top+o.scrollTop-c.y-d.y;return{x:f,y:h,width:a.width,height:a.height}}function uk(e){return ja(e).position==="static"}function v8(e,t){if(!go(e)||ja(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return wo(e)===n&&(n=n.ownerDocument.body),n}function DZ(e,t){const n=hs(e);if(MS(e))return n;if(!go(e)){let i=Rc(e);for(;i&&!Dh(i);){if(Aa(i)&&!uk(i))return i;i=Rc(i)}return n}let r=v8(e,t);for(;r&&cBe(r)&&uk(r);)r=v8(r,t);return r&&Dh(r)&&uk(r)&&!rM(r)?n:r||pBe(e)||n}const TBe=async function(e){const t=this.getOffsetParent||DZ,n=this.getDimensions,r=await n(e.floating);return{reference:CBe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function ABe(e){return ja(e).direction==="rtl"}const jBe={convertOffsetParentRelativeRectToViewportRelativeRect:yBe,getDocumentElement:wo,getClippingRect:_Be,getOffsetParent:DZ,getElementRects:TBe,getClientRects:xBe,getDimensions:kBe,getScale:th,isElement:Aa,isRTL:ABe};function MZ(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function OBe(e,t){let n=null,r;const i=wo(e);function s(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function a(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),s();const u=e.getBoundingClientRect(),{left:d,top:f,width:h,height:p}=u;if(o||t(),!h||!p)return;const m=jy(f),g=jy(i.clientWidth-(d+h)),v=jy(i.clientHeight-(f+p)),y=jy(d),b={rootMargin:-m+"px "+-g+"px "+-v+"px "+-y+"px",threshold:ns(0,Mc(1,c))||1};let S=!0;function E(N){const _=N[0].intersectionRatio;if(_!==c){if(!S)return a();_?a(!1,_):r=setTimeout(()=>{a(!1,1e-7)},1e3)}_===1&&!MZ(u,e.getBoundingClientRect())&&a(),S=!1}try{n=new IntersectionObserver(E,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,b)}n.observe(e)}return a(!0),s}function PBe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=sM(e),d=i||s?[...u?s0(u):[],...s0(t)]:[];d.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=u&&o?OBe(u,n):null;let h=-1,p=null;a&&(p=new ResizeObserver(y=>{let[x]=y;x&&x.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(t)})),n()}),u&&!c&&p.observe(u),p.observe(t));let m,g=c?Nd(e):null;c&&v();function v(){const y=Nd(e);g&&!MZ(g,y)&&n(),g=y,m=requestAnimationFrame(v)}return n(),()=>{var y;d.forEach(x=>{i&&x.removeEventListener("scroll",n),s&&x.removeEventListener("resize",n)}),f==null||f(),(y=p)==null||y.disconnect(),p=null,c&&cancelAnimationFrame(m)}}const IBe=rBe,DBe=iBe,MBe=eBe,RBe=aBe,LBe=tBe,y8=ZFe,FBe=sBe,BBe=(e,t,n)=>{const r=new Map,i={platform:jBe,...n},s={...i.platform,_c:r};return JFe(e,t,{...i,platform:s})};var $Be=typeof document<"u",UBe=function(){},Cx=$Be?w.useLayoutEffect:UBe;function _1(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!_1(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!_1(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function RZ(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function x8(e,t){const n=RZ(e);return Math.round(t*n)/n}function dk(e){const t=w.useRef(e);return Cx(()=>{t.current=e}),t}function zBe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:a}={},transform:o=!0,whileElementsMounted:c,open:u}=e,[d,f]=w.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=w.useState(r);_1(h,r)||p(r);const[m,g]=w.useState(null),[v,y]=w.useState(null),x=w.useCallback(R=>{R!==N.current&&(N.current=R,g(R))},[]),b=w.useCallback(R=>{R!==_.current&&(_.current=R,y(R))},[]),S=s||m,E=a||v,N=w.useRef(null),_=w.useRef(null),k=w.useRef(d),T=c!=null,A=dk(c),j=dk(i),D=dk(u),I=w.useCallback(()=>{if(!N.current||!_.current)return;const R={placement:t,strategy:n,middleware:h};j.current&&(R.platform=j.current),BBe(N.current,_.current,R).then(F=>{const O={...F,isPositioned:D.current!==!1};M.current&&!_1(k.current,O)&&(k.current=O,ml.flushSync(()=>{f(O)}))})},[h,t,n,j,D]);Cx(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,f(R=>({...R,isPositioned:!1})))},[u]);const M=w.useRef(!1);Cx(()=>(M.current=!0,()=>{M.current=!1}),[]),Cx(()=>{if(S&&(N.current=S),E&&(_.current=E),S&&E){if(A.current)return A.current(S,E,I);I()}},[S,E,I,A,T]);const L=w.useMemo(()=>({reference:N,floating:_,setReference:x,setFloating:b}),[x,b]),P=w.useMemo(()=>({reference:S,floating:E}),[S,E]),B=w.useMemo(()=>{const R={position:n,left:0,top:0};if(!P.floating)return R;const F=x8(P.floating,d.x),O=x8(P.floating,d.y);return o?{...R,transform:"translate("+F+"px, "+O+"px)",...RZ(P.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:O}},[n,o,P.floating,d.x,d.y]);return w.useMemo(()=>({...d,update:I,refs:L,elements:P,floatingStyles:B}),[d,I,L,P,B])}const HBe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?y8({element:r.current,padding:i}).fn(n):{}:r?y8({element:r,padding:i}).fn(n):{}}}},VBe=(e,t)=>({...IBe(e),options:[e,t]}),WBe=(e,t)=>({...DBe(e),options:[e,t]}),qBe=(e,t)=>({...FBe(e),options:[e,t]}),KBe=(e,t)=>({...MBe(e),options:[e,t]}),GBe=(e,t)=>({...RBe(e),options:[e,t]}),YBe=(e,t)=>({...LBe(e),options:[e,t]}),XBe=(e,t)=>({...HBe(e),options:[e,t]});var QBe="Arrow",LZ=w.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...s}=e;return l.jsx(kt.svg,{...s,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});LZ.displayName=QBe;var JBe=LZ;function FZ(e){const[t,n]=w.useState(void 0);return ur(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,o;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,o=u.blockSize}else a=e.offsetWidth,o=e.offsetHeight;n({width:a,height:o})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var aM="Popper",[BZ,$Z]=ru(aM),[ZBe,UZ]=BZ(aM),zZ=e=>{const{__scopePopper:t,children:n}=e,[r,i]=w.useState(null);return l.jsx(ZBe,{scope:t,anchor:r,onAnchorChange:i,children:n})};zZ.displayName=aM;var HZ="PopperAnchor",VZ=w.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,s=UZ(HZ,n),a=w.useRef(null),o=fn(t,a),c=w.useRef(null);return w.useEffect(()=>{const u=c.current;c.current=(r==null?void 0:r.current)||a.current,u!==c.current&&s.onAnchorChange(c.current)}),r?null:l.jsx(kt.div,{...i,ref:o})});VZ.displayName=HZ;var oM="PopperContent",[e8e,t8e]=BZ(oM),WZ=w.forwardRef((e,t)=>{var K,fe,oe,le,Ee,se;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:m,...g}=e,v=UZ(oM,n),[y,x]=w.useState(null),b=fn(t,qe=>x(qe)),[S,E]=w.useState(null),N=FZ(S),_=(N==null?void 0:N.width)??0,k=(N==null?void 0:N.height)??0,T=r+(s!=="center"?"-"+s:""),A=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},j=Array.isArray(u)?u:[u],D=j.length>0,I={padding:A,boundary:j.filter(r8e),altBoundary:D},{refs:M,floatingStyles:L,placement:P,isPositioned:B,middlewareData:R}=zBe({strategy:"fixed",placement:T,whileElementsMounted:(...qe)=>PBe(...qe,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[VBe({mainAxis:i+k,alignmentAxis:a}),c&&WBe({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?qBe():void 0,...I}),c&&KBe({...I}),GBe({...I,apply:({elements:qe,rects:Oe,availableWidth:et,availableHeight:J})=>{const{width:pe,height:q}=Oe.reference,me=qe.floating.style;me.setProperty("--radix-popper-available-width",`${et}px`),me.setProperty("--radix-popper-available-height",`${J}px`),me.setProperty("--radix-popper-anchor-width",`${pe}px`),me.setProperty("--radix-popper-anchor-height",`${q}px`)}}),S&&XBe({element:S,padding:o}),i8e({arrowWidth:_,arrowHeight:k}),h&&YBe({strategy:"referenceHidden",...I})]}),[F,O]=GZ(P),Q=Dc(m);ur(()=>{B&&(Q==null||Q())},[B,Q]);const Y=(K=R.arrow)==null?void 0:K.x,$=(fe=R.arrow)==null?void 0:fe.y,ye=((oe=R.arrow)==null?void 0:oe.centerOffset)!==0,[Te,U]=w.useState();return ur(()=>{y&&U(window.getComputedStyle(y).zIndex)},[y]),l.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...L,transform:B?L.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Te,"--radix-popper-transform-origin":[(le=R.transformOrigin)==null?void 0:le.x,(Ee=R.transformOrigin)==null?void 0:Ee.y].join(" "),...((se=R.hide)==null?void 0:se.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:l.jsx(e8e,{scope:n,placedSide:F,onArrowChange:E,arrowX:Y,arrowY:$,shouldHideArrow:ye,children:l.jsx(kt.div,{"data-side":F,"data-align":O,...g,ref:b,style:{...g.style,animation:B?void 0:"none"}})})})});WZ.displayName=oM;var qZ="PopperArrow",n8e={top:"bottom",right:"left",bottom:"top",left:"right"},KZ=w.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,s=t8e(qZ,r),a=n8e[s.placedSide];return l.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:l.jsx(JBe,{...i,ref:n,style:{...i.style,display:"block"}})})});KZ.displayName=qZ;function r8e(e){return e!==null}var i8e=e=>({name:"transformOrigin",options:e,fn(t){var v,y,x;const{placement:n,rects:r,middlewareData:i}=t,a=((v=i.arrow)==null?void 0:v.centerOffset)!==0,o=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[u,d]=GZ(n),f={start:"0%",center:"50%",end:"100%"}[d],h=(((y=i.arrow)==null?void 0:y.x)??0)+o/2,p=(((x=i.arrow)==null?void 0:x.y)??0)+c/2;let m="",g="";return u==="bottom"?(m=a?f:`${h}px`,g=`${-c}px`):u==="top"?(m=a?f:`${h}px`,g=`${r.floating.height+c}px`):u==="right"?(m=`${-c}px`,g=a?f:`${p}px`):u==="left"&&(m=`${r.floating.width+c}px`,g=a?f:`${p}px`),{data:{x:m,y:g}}}});function GZ(e){const[t,n="center"]=e.split("-");return[t,n]}var s8e=zZ,a8e=VZ,o8e=WZ,l8e=KZ;function YZ(e){const t=w.useRef({value:e,previous:e});return w.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var XZ=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),c8e="VisuallyHidden",u8e=w.forwardRef((e,t)=>l.jsx(kt.span,{...e,ref:t,style:{...XZ,...e.style}}));u8e.displayName=c8e;var d8e=[" ","Enter","ArrowUp","ArrowDown"],f8e=[" ","Enter"],_d="Select",[FS,BS,h8e]=FFe(_d),[xp,Cct]=ru(_d,[h8e,$Z]),$S=$Z(),[p8e,su]=xp(_d),[m8e,g8e]=xp(_d),QZ=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:s,value:a,defaultValue:o,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:h,required:p,form:m}=e,g=$S(t),[v,y]=w.useState(null),[x,b]=w.useState(null),[S,E]=w.useState(!1),N=$Fe(u),[_,k]=b1({prop:r,defaultProp:i??!1,onChange:s,caller:_d}),[T,A]=b1({prop:a,defaultProp:o,onChange:c,caller:_d}),j=w.useRef(null),D=v?m||!!v.closest("form"):!0,[I,M]=w.useState(new Set),L=Array.from(I).map(P=>P.props.value).join(";");return l.jsx(s8e,{...g,children:l.jsxs(p8e,{required:p,scope:t,trigger:v,onTriggerChange:y,valueNode:x,onValueNodeChange:b,valueNodeHasChildren:S,onValueNodeHasChildrenChange:E,contentId:Zf(),value:T,onValueChange:A,open:_,onOpenChange:k,dir:N,triggerPointerDownPosRef:j,disabled:h,children:[l.jsx(FS.Provider,{scope:t,children:l.jsx(m8e,{scope:e.__scopeSelect,onNativeOptionAdd:w.useCallback(P=>{M(B=>new Set(B).add(P))},[]),onNativeOptionRemove:w.useCallback(P=>{M(B=>{const R=new Set(B);return R.delete(P),R})},[]),children:n})}),D?l.jsxs(wee,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:f,value:T,onChange:P=>A(P.target.value),disabled:h,form:m,children:[T===void 0?l.jsx("option",{value:""}):null,Array.from(I)]},L):null]})})};QZ.displayName=_d;var JZ="SelectTrigger",ZZ=w.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...i}=e,s=$S(n),a=su(JZ,n),o=a.disabled||r,c=fn(t,a.onTriggerChange),u=BS(n),d=w.useRef("touch"),[f,h,p]=See(g=>{const v=u().filter(b=>!b.disabled),y=v.find(b=>b.value===a.value),x=Nee(v,g,y);x!==void 0&&a.onValueChange(x.value)}),m=g=>{o||(a.onOpenChange(!0),p()),g&&(a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return l.jsx(a8e,{asChild:!0,...s,children:l.jsx(kt.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":Eee(a.value)?"":void 0,...i,ref:c,onClick:$t(i.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&m(g)}),onPointerDown:$t(i.onPointerDown,g=>{d.current=g.pointerType;const v=g.target;v.hasPointerCapture(g.pointerId)&&v.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(m(g),g.preventDefault())}),onKeyDown:$t(i.onKeyDown,g=>{const v=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&h(g.key),!(v&&g.key===" ")&&d8e.includes(g.key)&&(m(),g.preventDefault())})})})});ZZ.displayName=JZ;var eee="SelectValue",tee=w.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:a="",...o}=e,c=su(eee,n),{onValueNodeHasChildrenChange:u}=c,d=s!==void 0,f=fn(t,c.onValueNodeChange);return ur(()=>{u(d)},[u,d]),l.jsx(kt.span,{...o,ref:f,style:{pointerEvents:"none"},children:Eee(c.value)?l.jsx(l.Fragment,{children:a}):s})});tee.displayName=eee;var v8e="SelectIcon",nee=w.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...i}=e;return l.jsx(kt.span,{"aria-hidden":!0,...i,ref:t,children:r||""})});nee.displayName=v8e;var y8e="SelectPortal",ree=e=>l.jsx(VD,{asChild:!0,...e});ree.displayName=y8e;var kd="SelectContent",iee=w.forwardRef((e,t)=>{const n=su(kd,e.__scopeSelect),[r,i]=w.useState();if(ur(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?ml.createPortal(l.jsx(see,{scope:e.__scopeSelect,children:l.jsx(FS.Slot,{scope:e.__scopeSelect,children:l.jsx("div",{children:e.children})})}),s):null}return l.jsx(aee,{...e,ref:t})});iee.displayName=kd;var da=10,[see,au]=xp(kd),x8e="SelectContentImpl",b8e=vh("SelectContent.RemoveScroll"),aee=w.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:a,side:o,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:v,...y}=e,x=su(kd,n),[b,S]=w.useState(null),[E,N]=w.useState(null),_=fn(t,K=>S(K)),[k,T]=w.useState(null),[A,j]=w.useState(null),D=BS(n),[I,M]=w.useState(!1),L=w.useRef(!1);w.useEffect(()=>{if(b)return iZ(b)},[b]),YJ();const P=w.useCallback(K=>{const[fe,...oe]=D().map(se=>se.ref.current),[le]=oe.slice(-1),Ee=document.activeElement;for(const se of K)if(se===Ee||(se==null||se.scrollIntoView({block:"nearest"}),se===fe&&E&&(E.scrollTop=0),se===le&&E&&(E.scrollTop=E.scrollHeight),se==null||se.focus(),document.activeElement!==Ee))return},[D,E]),B=w.useCallback(()=>P([k,b]),[P,k,b]);w.useEffect(()=>{I&&B()},[I,B]);const{onOpenChange:R,triggerPointerDownPosRef:F}=x;w.useEffect(()=>{if(b){let K={x:0,y:0};const fe=le=>{var Ee,se;K={x:Math.abs(Math.round(le.pageX)-(((Ee=F.current)==null?void 0:Ee.x)??0)),y:Math.abs(Math.round(le.pageY)-(((se=F.current)==null?void 0:se.y)??0))}},oe=le=>{K.x<=10&&K.y<=10?le.preventDefault():b.contains(le.target)||R(!1),document.removeEventListener("pointermove",fe),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",fe),document.addEventListener("pointerup",oe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",fe),document.removeEventListener("pointerup",oe,{capture:!0})}}},[b,R,F]),w.useEffect(()=>{const K=()=>R(!1);return window.addEventListener("blur",K),window.addEventListener("resize",K),()=>{window.removeEventListener("blur",K),window.removeEventListener("resize",K)}},[R]);const[O,Q]=See(K=>{const fe=D().filter(Ee=>!Ee.disabled),oe=fe.find(Ee=>Ee.ref.current===document.activeElement),le=Nee(fe,K,oe);le&&setTimeout(()=>le.ref.current.focus())}),Y=w.useCallback((K,fe,oe)=>{const le=!L.current&&!oe;(x.value!==void 0&&x.value===fe||le)&&(T(K),le&&(L.current=!0))},[x.value]),$=w.useCallback(()=>b==null?void 0:b.focus(),[b]),ye=w.useCallback((K,fe,oe)=>{const le=!L.current&&!oe;(x.value!==void 0&&x.value===fe||le)&&j(K)},[x.value]),Te=r==="popper"?eA:oee,U=Te===eA?{side:o,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:v}:{};return l.jsx(see,{scope:n,content:b,viewport:E,onViewportChange:N,itemRefCallback:Y,selectedItem:k,onItemLeave:$,itemTextRefCallback:ye,focusSelectedItem:B,selectedItemText:A,position:r,isPositioned:I,searchRef:O,children:l.jsx(WD,{as:b8e,allowPinchZoom:!0,children:l.jsx(HD,{asChild:!0,trapped:x.open,onMountAutoFocus:K=>{K.preventDefault()},onUnmountAutoFocus:$t(i,K=>{var fe;(fe=x.trigger)==null||fe.focus({preventScroll:!0}),K.preventDefault()}),children:l.jsx(zD,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:K=>K.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:l.jsx(Te,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:K=>K.preventDefault(),...y,...U,onPlaced:()=>M(!0),ref:_,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:$t(y.onKeyDown,K=>{const fe=K.ctrlKey||K.altKey||K.metaKey;if(K.key==="Tab"&&K.preventDefault(),!fe&&K.key.length===1&&Q(K.key),["ArrowUp","ArrowDown","Home","End"].includes(K.key)){let le=D().filter(Ee=>!Ee.disabled).map(Ee=>Ee.ref.current);if(["ArrowUp","End"].includes(K.key)&&(le=le.slice().reverse()),["ArrowUp","ArrowDown"].includes(K.key)){const Ee=K.target,se=le.indexOf(Ee);le=le.slice(se+1)}setTimeout(()=>P(le)),K.preventDefault()}})})})})})})});aee.displayName=x8e;var w8e="SelectItemAlignedPosition",oee=w.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...i}=e,s=su(kd,n),a=au(kd,n),[o,c]=w.useState(null),[u,d]=w.useState(null),f=fn(t,_=>d(_)),h=BS(n),p=w.useRef(!1),m=w.useRef(!0),{viewport:g,selectedItem:v,selectedItemText:y,focusSelectedItem:x}=a,b=w.useCallback(()=>{if(s.trigger&&s.valueNode&&o&&u&&g&&v&&y){const _=s.trigger.getBoundingClientRect(),k=u.getBoundingClientRect(),T=s.valueNode.getBoundingClientRect(),A=y.getBoundingClientRect();if(s.dir!=="rtl"){const Ee=A.left-k.left,se=T.left-Ee,qe=_.left-se,Oe=_.width+qe,et=Math.max(Oe,k.width),J=window.innerWidth-da,pe=l8(se,[da,Math.max(da,J-et)]);o.style.minWidth=Oe+"px",o.style.left=pe+"px"}else{const Ee=k.right-A.right,se=window.innerWidth-T.right-Ee,qe=window.innerWidth-_.right-se,Oe=_.width+qe,et=Math.max(Oe,k.width),J=window.innerWidth-da,pe=l8(se,[da,Math.max(da,J-et)]);o.style.minWidth=Oe+"px",o.style.right=pe+"px"}const j=h(),D=window.innerHeight-da*2,I=g.scrollHeight,M=window.getComputedStyle(u),L=parseInt(M.borderTopWidth,10),P=parseInt(M.paddingTop,10),B=parseInt(M.borderBottomWidth,10),R=parseInt(M.paddingBottom,10),F=L+P+I+R+B,O=Math.min(v.offsetHeight*5,F),Q=window.getComputedStyle(g),Y=parseInt(Q.paddingTop,10),$=parseInt(Q.paddingBottom,10),ye=_.top+_.height/2-da,Te=D-ye,U=v.offsetHeight/2,K=v.offsetTop+U,fe=L+P+K,oe=F-fe;if(fe<=ye){const Ee=j.length>0&&v===j[j.length-1].ref.current;o.style.bottom="0px";const se=u.clientHeight-g.offsetTop-g.offsetHeight,qe=Math.max(Te,U+(Ee?$:0)+se+B),Oe=fe+qe;o.style.height=Oe+"px"}else{const Ee=j.length>0&&v===j[0].ref.current;o.style.top="0px";const qe=Math.max(ye,L+g.offsetTop+(Ee?Y:0)+U)+oe;o.style.height=qe+"px",g.scrollTop=fe-ye+g.offsetTop}o.style.margin=`${da}px 0`,o.style.minHeight=O+"px",o.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[h,s.trigger,s.valueNode,o,u,g,v,y,s.dir,r]);ur(()=>b(),[b]);const[S,E]=w.useState();ur(()=>{u&&E(window.getComputedStyle(u).zIndex)},[u]);const N=w.useCallback(_=>{_&&m.current===!0&&(b(),x==null||x(),m.current=!1)},[b,x]);return l.jsx(S8e,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:p,onScrollButtonChange:N,children:l.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:l.jsx(kt.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});oee.displayName=w8e;var E8e="SelectPopperPosition",eA=w.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=da,...s}=e,a=$S(n);return l.jsx(o8e,{...a,...s,ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});eA.displayName=E8e;var[S8e,lM]=xp(kd,{}),tA="SelectViewport",lee=w.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...i}=e,s=au(tA,n),a=lM(tA,n),o=fn(t,s.onViewportChange),c=w.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),l.jsx(FS.Slot,{scope:n,children:l.jsx(kt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:$t(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=a;if(h!=null&&h.current&&f){const p=Math.abs(c.current-d.scrollTop);if(p>0){const m=window.innerHeight-da*2,g=parseFloat(f.style.minHeight),v=parseFloat(f.style.height),y=Math.max(g,v);if(y<m){const x=y+p,b=Math.min(m,x),S=x-b;f.style.height=b+"px",f.style.bottom==="0px"&&(d.scrollTop=S>0?S:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});lee.displayName=tA;var cee="SelectGroup",[N8e,_8e]=xp(cee),k8e=w.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=Zf();return l.jsx(N8e,{scope:n,id:i,children:l.jsx(kt.div,{role:"group","aria-labelledby":i,...r,ref:t})})});k8e.displayName=cee;var uee="SelectLabel",dee=w.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=_8e(uee,n);return l.jsx(kt.div,{id:i.id,...r,ref:t})});dee.displayName=uee;var k1="SelectItem",[C8e,fee]=xp(k1),hee=w.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...a}=e,o=su(k1,n),c=au(k1,n),u=o.value===r,[d,f]=w.useState(s??""),[h,p]=w.useState(!1),m=fn(t,x=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,x,r,i)}),g=Zf(),v=w.useRef("touch"),y=()=>{i||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(C8e,{scope:n,value:r,disabled:i,textId:g,isSelected:u,onItemTextChange:w.useCallback(x=>{f(b=>b||((x==null?void 0:x.textContent)??"").trim())},[]),children:l.jsx(FS.ItemSlot,{scope:n,value:r,disabled:i,textValue:d,children:l.jsx(kt.div,{role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:m,onFocus:$t(a.onFocus,()=>p(!0)),onBlur:$t(a.onBlur,()=>p(!1)),onClick:$t(a.onClick,()=>{v.current!=="mouse"&&y()}),onPointerUp:$t(a.onPointerUp,()=>{v.current==="mouse"&&y()}),onPointerDown:$t(a.onPointerDown,x=>{v.current=x.pointerType}),onPointerMove:$t(a.onPointerMove,x=>{var b;v.current=x.pointerType,i?(b=c.onItemLeave)==null||b.call(c):v.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:$t(a.onPointerLeave,x=>{var b;x.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:$t(a.onKeyDown,x=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&x.key===" "||(f8e.includes(x.key)&&y(),x.key===" "&&x.preventDefault())})})})})});hee.displayName=k1;var gm="SelectItemText",pee=w.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,...s}=e,a=su(gm,n),o=au(gm,n),c=fee(gm,n),u=g8e(gm,n),[d,f]=w.useState(null),h=fn(t,y=>f(y),c.onItemTextChange,y=>{var x;return(x=o.itemTextRefCallback)==null?void 0:x.call(o,y,c.value,c.disabled)}),p=d==null?void 0:d.textContent,m=w.useMemo(()=>l.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:v}=u;return ur(()=>(g(m),()=>v(m)),[g,v,m]),l.jsxs(l.Fragment,{children:[l.jsx(kt.span,{id:c.textId,...s,ref:h}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?ml.createPortal(s.children,a.valueNode):null]})});pee.displayName=gm;var mee="SelectItemIndicator",gee=w.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return fee(mee,n).isSelected?l.jsx(kt.span,{"aria-hidden":!0,...r,ref:t}):null});gee.displayName=mee;var nA="SelectScrollUpButton",vee=w.forwardRef((e,t)=>{const n=au(nA,e.__scopeSelect),r=lM(nA,e.__scopeSelect),[i,s]=w.useState(!1),a=fn(t,r.onScrollButtonChange);return ur(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=c.scrollTop>0;s(u)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?l.jsx(xee,{...e,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});vee.displayName=nA;var rA="SelectScrollDownButton",yee=w.forwardRef((e,t)=>{const n=au(rA,e.__scopeSelect),r=lM(rA,e.__scopeSelect),[i,s]=w.useState(!1),a=fn(t,r.onScrollButtonChange);return ur(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;s(d)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?l.jsx(xee,{...e,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});yee.displayName=rA;var xee=w.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=e,s=au("SelectScrollButton",n),a=w.useRef(null),o=BS(n),c=w.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return w.useEffect(()=>()=>c(),[c]),ur(()=>{var d;const u=o().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[o]),l.jsx(kt.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:$t(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:$t(i.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:$t(i.onPointerLeave,()=>{c()})})}),T8e="SelectSeparator",bee=w.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return l.jsx(kt.div,{"aria-hidden":!0,...r,ref:t})});bee.displayName=T8e;var iA="SelectArrow",A8e=w.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=$S(n),s=su(iA,n),a=au(iA,n);return s.open&&a.position==="popper"?l.jsx(l8e,{...i,...r,ref:t}):null});A8e.displayName=iA;var j8e="SelectBubbleInput",wee=w.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const i=w.useRef(null),s=fn(r,i),a=YZ(t);return w.useEffect(()=>{const o=i.current;if(!o)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==t&&d){const f=new Event("change",{bubbles:!0});d.call(o,t),o.dispatchEvent(f)}},[a,t]),l.jsx(kt.select,{...n,style:{...XZ,...n.style},ref:s,defaultValue:t})});wee.displayName=j8e;function Eee(e){return e===""||e===void 0}function See(e){const t=Dc(e),n=w.useRef(""),r=w.useRef(0),i=w.useCallback(a=>{const o=n.current+a;t(o),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(o)},[t]),s=w.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function Nee(e,t,n){const i=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let a=O8e(e,Math.max(s,0));i.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function O8e(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var P8e=QZ,_ee=ZZ,I8e=tee,D8e=nee,M8e=ree,kee=iee,R8e=lee,Cee=dee,Tee=hee,L8e=pee,F8e=gee,Aee=vee,jee=yee,Oee=bee;const gn=P8e,vn=I8e,ln=w.forwardRef(({className:e,children:t,...n},r)=>l.jsxs(_ee,{ref:r,className:Re("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,l.jsx(D8e,{asChild:!0,children:l.jsx(aV,{className:"h-4 w-4 opacity-50"})})]}));ln.displayName=_ee.displayName;const Pee=w.forwardRef(({className:e,...t},n)=>l.jsx(Aee,{ref:n,className:Re("flex cursor-default items-center justify-center py-1",e),...t,children:l.jsx(khe,{className:"h-4 w-4"})}));Pee.displayName=Aee.displayName;const Iee=w.forwardRef(({className:e,...t},n)=>l.jsx(jee,{ref:n,className:Re("flex cursor-default items-center justify-center py-1",e),...t,children:l.jsx(aV,{className:"h-4 w-4"})}));Iee.displayName=jee.displayName;const cn=w.forwardRef(({className:e,children:t,position:n="popper",...r},i)=>l.jsx(M8e,{children:l.jsxs(kee,{ref:i,className:Re("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[l.jsx(Pee,{}),l.jsx(R8e,{className:Re("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),l.jsx(Iee,{})]})}));cn.displayName=kee.displayName;const B8e=w.forwardRef(({className:e,...t},n)=>l.jsx(Cee,{ref:n,className:Re("px-2 py-1.5 text-sm font-semibold",e),...t}));B8e.displayName=Cee.displayName;const Ve=w.forwardRef(({className:e,children:t,...n},r)=>l.jsxs(Tee,{ref:r,className:Re("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[l.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(F8e,{children:l.jsx(mb,{className:"h-4 w-4"})})}),l.jsx(L8e,{children:t})]}));Ve.displayName=Tee.displayName;const $8e=w.forwardRef(({className:e,...t},n)=>l.jsx(Oee,{ref:n,className:Re("-mx-1 my-1 h-px bg-muted",e),...t}));$8e.displayName=Oee.displayName;var US="Switch",[U8e,Tct]=ru(US),[z8e,H8e]=U8e(US),Dee=w.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:a,disabled:o,value:c="on",onCheckedChange:u,form:d,...f}=e,[h,p]=w.useState(null),m=fn(t,b=>p(b)),g=w.useRef(!1),v=h?d||!!h.closest("form"):!0,[y,x]=b1({prop:i,defaultProp:s??!1,onChange:u,caller:US});return l.jsxs(z8e,{scope:n,checked:y,disabled:o,children:[l.jsx(kt.button,{type:"button",role:"switch","aria-checked":y,"aria-required":a,"data-state":Fee(y),"data-disabled":o?"":void 0,disabled:o,value:c,...f,ref:m,onClick:$t(e.onClick,b=>{x(S=>!S),v&&(g.current=b.isPropagationStopped(),g.current||b.stopPropagation())})}),v&&l.jsx(Lee,{control:h,bubbles:!g.current,name:r,value:c,checked:y,required:a,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});Dee.displayName=US;var Mee="SwitchThumb",Ree=w.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,i=H8e(Mee,n);return l.jsx(kt.span,{"data-state":Fee(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t})});Ree.displayName=Mee;var V8e="SwitchBubbleInput",Lee=w.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...i},s)=>{const a=w.useRef(null),o=fn(a,s),c=YZ(n),u=FZ(t);return w.useEffect(()=>{const d=a.current;if(!d)return;const f=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&p){const m=new Event("click",{bubbles:r});p.call(d,n),d.dispatchEvent(m)}},[c,n,r]),l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:o,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Lee.displayName=V8e;function Fee(e){return e?"checked":"unchecked"}var Bee=Dee,W8e=Ree;const zu=w.forwardRef(({className:e,...t},n)=>l.jsx(Bee,{className:Re("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:l.jsx(W8e,{className:Re("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));zu.displayName=Bee.displayName;const cM=w.createContext(void 0),Qo=({value:e,defaultValue:t,onValueChange:n,children:r,className:i})=>{const[s,a]=w.useState(t||""),o=e!==void 0?e:s,c=w.useCallback(d=>{e===void 0&&a(d),n==null||n(d)},[e,n]),u=w.useMemo(()=>({value:o,onValueChange:c}),[o,c]);return l.jsx(cM.Provider,{value:u,children:l.jsx("div",{className:i,children:r})})},co=w.forwardRef(({className:e,...t},n)=>l.jsx("div",{ref:n,role:"tablist",className:Re("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));co.displayName="TabsList";const St=w.forwardRef(({className:e,value:t,...n},r)=>{const i=w.useContext(cM);if(!i)throw new Error("TabsTrigger must be used within a Tabs component");const s=i.value===t;return l.jsx("button",{ref:r,role:"tab","aria-selected":s,className:Re("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",s?"bg-background text-foreground shadow-sm":"",e),onClick:()=>i.onValueChange(t),...n})});St.displayName="TabsTrigger";const wt=w.forwardRef(({className:e,value:t,...n},r)=>{const i=w.useContext(cM);if(!i)throw new Error("TabsContent must be used within a Tabs component");return i.value!==t?null:l.jsx("div",{ref:r,role:"tabpanel",className:Re("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...n})});wt.displayName="TabsContent";const q8e={interval_minutes:5,timeout_seconds:10,retries:3,enabled:!0};function K8e(){const[e,t]=w.useState([]),[n,r]=w.useState([]),[i,s]=w.useState(null),[a,o]=w.useState(!1),[c,u]=w.useState(!0),d=w.useRef(null),f=w.useCallback(async()=>{const{data:{user:j}}=await ie.auth.getUser();return j},[]),h=w.useCallback(async()=>{try{u(!0);const j=await f();if(!j)return;const{data:D,error:I}=await ie.from("ping_targets").select("*").eq("user_id",j.id).order("created_at",{ascending:!1});I?console.error("Error loading targets:",I):t(D||[]);const{data:M,error:L}=await ie.from("ping_results").select("*").eq("user_id",j.id).order("timestamp",{ascending:!1}).limit(1e3);L?console.error("Error loading results:",L):r(M||[]);const{data:P,error:B}=await ie.from("ping_settings").select("*").eq("user_id",j.id).single();if(B&&B.code!=="PGRST116"&&console.error("Error loading settings:",B),P)s(P);else{const R={...q8e,user_id:j.id},{data:F,error:O}=await ie.from("ping_settings").insert(R).select().single();O?console.error("Error creating default settings:",O):s(F)}}catch(j){console.error("Error loading data from database:",j)}finally{u(!1)}},[f]);w.useEffect(()=>{h()},[h]);const p=w.useCallback(async j=>{const D=new AbortController,I=j.timeout||((i==null?void 0:i.timeout_seconds)??10),M=setTimeout(()=>D.abort(),I*1e3);try{const L=performance.now(),P=j.method!=="GET"||j.headers&&Object.keys(j.headers).length>0||j.body||j.url.includes("/api/")||j.url.includes("algolia.net")||j.expected_text,B={method:j.method||"GET",signal:D.signal};P?(B.headers={"Content-Type":"application/json",...j.headers},j.body&&["POST","PUT","PATCH"].includes(j.method||"GET")&&(B.body=j.body)):B.mode="no-cors";const R=await fetch(j.url,B),O=performance.now()-L;clearTimeout(M);let Q="",Y=0,$=R.status;if(P&&R.type!=="opaque")try{Q=await R.text().then(fe=>fe.slice(0,1024)),Y=new Blob([Q]).size}catch(fe){console.warn("Could not read response text:",fe)}else $=200;const Te=(j.expected_status||[200,201,202,204]).includes($),U=!j.expected_text||Q.includes(j.expected_text),K=Te&&U;return{responseTime:O,status:K?"success":"failure",statusCode:$,responseText:Q,responseSize:Y,error:K?void 0:`Status: ${$}${U?"":", Expected text not found"}`}}catch(L){return clearTimeout(M),L instanceof Error?L.name==="AbortError"?{responseTime:I*1e3,status:"timeout",error:"Request timed out"}:{responseTime:0,status:"failure",error:L.message}:{responseTime:0,status:"failure",error:"Unknown error"}}},[i==null?void 0:i.timeout_seconds]),m=w.useCallback(async j=>{var I;const D=performance.now();try{const M=j.url,L=j.mongodb_config||{};console.log("MongoDB ping - URI:",M),console.log("MongoDB ping - Config:",L);const P=void 0,B=void 0;console.log("MongoDB API endpoint:",P),console.log("Webhook secret exists:",!!B);const R=M.startsWith("mongodb://")||M.startsWith("mongodb+srv://");if(console.log("MongoDB validation - URI valid:",R),console.log("MongoDB validation - URI:",M.substring(0,50)+"..."),!R)return console.log("MongoDB validation failed: Invalid URI format"),{responseTime:performance.now()-D,status:"failure",error:"Invalid MongoDB URI format",responseText:"URI must start with mongodb:// or mongodb+srv://"};const F=M.split("/"),O=(I=F[F.length-1])==null?void 0:I.split("?")[0],Q=L.database||O||"test",Y=L.collection||"partners",$=L.operation||"ping";console.log("MongoDB config - Database:",Q,"Collection:",Y,"Operation:",$);let ye="";const Te=50+Math.random()*100;switch($){case"count":{ye="";break}case"find":{ye="";break}case"ping":default:ye="";break}const U=M.includes("@"),K=Q&&Q.length>0;console.log("MongoDB validation - Has credentials:",U,"Has database:",K);const oe=performance.now()-D+Te;return U&&K?(console.log("MongoDB ping SUCCESS:",ye),{responseTime:oe,status:"success",responseText:ye}):(console.log("MongoDB ping FAILED: Missing credentials or database"),{responseTime:oe,status:"failure",error:"MongoDB URI missing credentials or database name",responseText:"Please ensure URI includes authentication and database"})}catch(M){const P=performance.now()-D;return M instanceof Error?{responseTime:P,status:"failure",error:M.message}:{responseTime:P,status:"failure",error:"Unknown MongoDB connection error"}}},[]),g=w.useCallback(async j=>{if(!j.enabled||!i)return;const D=await f();if(!D)return;let I,M=null;for(let L=0;L<=i.retries;L++){let P;if(console.log("Pinging target:",j.name,"Type:",j.type,"URL:",j.url),j.type==="mongodb"?(console.log("Using MongoDB monitoring for:",j.name),P={...await m(j),statusCode:void 0,responseSize:void 0}):(console.log("Using HTTP monitoring for:",j.name),P=await p(j)),console.log("Ping result for",j.name,":",P),P.status==="success"){M=P;break}else I=P.error,M=P,L<i.retries&&await new Promise(B=>setTimeout(B,1e3))}if(M){const L={target_id:j.id,user_id:D.id,timestamp:new Date().toISOString(),response_time:M.responseTime,status:M.status,status_code:M.statusCode??void 0,response_text:M.responseText??void 0,response_size:M.responseSize??void 0,error_message:I??void 0},{data:P,error:B}=await ie.from("ping_results").insert(L).select().single();B?console.error("Error saving ping result:",B):P&&r(R=>[...R.filter(O=>O.target_id!==j.id).slice(-999),P])}},[p,m,i,f]),v=w.useCallback(async()=>{const j=e.filter(D=>D.enabled);await Promise.all(j.map(D=>g(D)))},[e,g]),y=w.useCallback(()=>{if(d.current||!i)return;o(!0),e.length>0&&v();const j=i.interval_minutes*60*1e3;d.current=setInterval(()=>{v()},j)},[v,i,e.length]),x=w.useCallback(()=>{d.current&&(clearInterval(d.current),d.current=null),o(!1)},[]);w.useEffect(()=>()=>{d.current&&clearInterval(d.current)},[]);const b=w.useCallback(j=>{const D=n.filter(O=>O.target_id===j),I=new Date,M=O=>{const Q=new Date(I.getTime()-O*60*60*1e3),Y=D.filter(ye=>new Date(ye.timestamp)>=Q);return Y.length===0?0:Y.filter(ye=>ye.status==="success").length/Y.length*100},L=D.slice(-10),P=L.length>0?L.filter(O=>O.response_time!==null&&O.status==="success").reduce((O,Q)=>O+(Q.response_time||0),0)/L.filter(O=>O.status==="success").length:0,B=D[D.length-1],R=B?B.status:"timeout",F=e.find(O=>O.id===j);return{target_id:j,target_name:(F==null?void 0:F.name)||"Unknown",url:(F==null?void 0:F.url)||"",user_id:(F==null?void 0:F.user_id)||"",total_checks:D.length,successful_checks:D.filter(O=>O.status==="success").length,uptime_percentage:M(24),avg_response_time:isNaN(P)?0:P,last_check:(B==null?void 0:B.timestamp)||"",current_status:R}},[n,e]),S=w.useCallback(j=>{const D=n.filter(M=>M.target_id===j),I=D[D.length-1];return(I==null?void 0:I.response_text)||""},[n]),E=w.useCallback(j=>n.filter(D=>D.target_id===j).length,[n]),N=w.useCallback(async j=>{const D=await f();if(!D)return;const I={method:"GET",headers:{},expected_status:[200,201,202,204],...j,user_id:D.id},{data:M,error:L}=await ie.from("ping_targets").insert(I).select().single();L?console.error("Error adding target:",L):M&&t(P=>[...P,M])},[f]),_=w.useCallback(async(j,D)=>{const{data:I,error:M}=await ie.from("ping_targets").update(D).eq("id",j).select().single();M?console.error("Error updating target:",M):I&&t(L=>L.map(P=>P.id===j?I:P))},[]),k=w.useCallback(async j=>{const{error:D}=await ie.from("ping_targets").delete().eq("id",j);D?console.error("Error removing target:",D):(t(I=>I.filter(M=>M.id!==j)),r(I=>I.filter(M=>M.target_id!==j)))},[]),T=w.useCallback(async j=>{if(!i)return;const{data:D,error:I}=await ie.from("ping_settings").update(j).eq("id",i.id).select().single();I?console.error("Error updating settings:",I):D&&s(D)},[i]),A=w.useCallback(async j=>{const D=e.find(I=>I.id===j);D&&await g(D)},[e,g]);return{targets:e,results:n,settings:i,isMonitoring:a,isLoading:c,addTarget:N,updateTarget:_,removeTarget:k,updateSettings:T,startMonitoring:y,stopMonitoring:x,manualPing:A,pingAllTargets:v,getUptimeStats:b,getLatestResultText:S,getTargetEntriesCount:E,loadDataFromDatabase:h}}function G8e(){var O,Q,Y,$,ye,Te;const{targets:e,settings:t,isMonitoring:n,isLoading:r,addTarget:i,updateTarget:s,removeTarget:a,updateSettings:o,startMonitoring:c,stopMonitoring:u,manualPing:d,getUptimeStats:f,getTargetEntriesCount:h}=K8e(),[p,m]=w.useState(!1),[g,v]=w.useState(!1),[y,x]=w.useState(!1),[b,S]=w.useState(null),[E,N]=w.useState(""),[_,k]=w.useState("200,201,202,204"),[T,A]=w.useState({name:"",url:"",enabled:!0,type:"http",method:"GET",headers:{},expected_status:[200,201,202,204],mongodb_config:{database:"",collection:"",operation:"ping",query:""}}),j=()=>{if(T.name&&T.url){const U={name:T.name,url:T.url,type:T.type||"http",method:T.method||"GET",headers:T.headers||{},body:T.body,timeout:T.timeout,expected_status:T.expected_status||[200,201,202,204],expected_text:T.expected_text,mongodb_config:T.type==="mongodb"?T.mongodb_config:void 0,enabled:T.enabled??!0};i(U),A({name:"",url:"",enabled:!0,type:"http",method:"GET",headers:{},expected_status:[200,201,202,204],mongodb_config:{database:"",collection:"",operation:"ping",query:""}}),v(!1)}},D=U=>{S(U),N(JSON.stringify(U.headers||{},null,2)),k((U.expected_status||[200]).join(",")),x(!0)},I=()=>{if(b){const U={name:b.name,url:b.url,method:b.method,headers:b.headers,body:b.body,timeout:b.timeout,expected_status:b.expected_status,expected_text:b.expected_text,enabled:b.enabled};s(b.id,U),x(!1),S(null)}},M=()=>{n?u():c()},L=U=>U<60?`${U}min`:`${U/60}h`,P=U=>{if(!U)return"Aldrig";const K=new Date(U),oe=new Date().getTime()-K.getTime(),le=Math.floor(oe/(1e3*60));if(le<1)return"Nyss";if(le<60)return`${le}min sedan`;const Ee=Math.floor(le/60);return Ee<24?`${Ee}h sedan`:`${Math.floor(Ee/24)}d sedan`},B=U=>U<1e3?`${Math.round(U)}ms`:`${(U/1e3).toFixed(1)}s`,R=U=>{switch(U){case"up":return"bg-green-500";case"down":return"bg-red-500";default:return"bg-gray-500"}},F=U=>{switch(U){case"up":return l.jsx(Er,{className:"h-4 w-4 text-green-600"});case"down":return l.jsx(L0,{className:"h-4 w-4 text-red-600"});default:return l.jsx(gt,{className:"h-4 w-4 text-gray-600"})}};return l.jsxs(l.Fragment,{children:[l.jsxs(Z,{children:[l.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsxs("div",{children:[l.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(Tc,{className:"h-4 w-4"}),"Uptime Monitor"]}),l.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:t?`Kontrollerar var ${L(t.interval_minutes)}  ${t.timeout_seconds}s timeout`:"Loading..."})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ot,{variant:n?"default":"secondary",className:"text-xs",children:n?"Monitoring":"Stopped"}),l.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>m(!0),children:l.jsx(Zs,{className:"h-4 w-4"})})]})]}),l.jsxs(ee,{children:[l.jsx("div",{className:"space-y-3",children:r?l.jsx("div",{className:"text-center text-muted-foreground py-4",children:"Loading ping targets..."}):e.length>0?e.map(U=>{var oe;const K=f(U.id),fe=h(U.id);return l.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer",onClick:()=>D(U),title:"Click to edit target settings",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:`w-3 h-3 rounded-full ${R(K.current_status==="success"?"up":K.current_status==="failure"?"down":"unknown")}`}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-sm",children:U.name}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:[U.url,"  ",P(K.last_check),U.method&&U.method!=="GET"&&`  ${U.method}`,U.type==="mongodb"&&`  ${fe} entries`]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[F((K==null?void 0:K.current_status)==="success"?"up":(K==null?void 0:K.current_status)==="failure"?"down":"unknown"),l.jsxs("span",{className:"font-medium",children:[((oe=K==null?void 0:K.uptime_percentage)==null?void 0:oe.toFixed(1))||"0.0","%"]})]}),l.jsx("div",{className:"text-xs text-muted-foreground",children:((K==null?void 0:K.avg_response_time)||0)>0&&B((K==null?void 0:K.avg_response_time)||0)})]}),l.jsx(H,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-50 hover:opacity-100",onClick:le=>{le.stopPropagation(),d(U.id)},title:"Test now",children:l.jsx(yC,{className:"h-3 w-3"})})]})]},U.id)}):l.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[l.jsx(Og,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{children:"Inga vervakade webbplatser"}),l.jsxs(H,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>v(!0),children:[l.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Lgg till frsta webbplats"]})]})}),e.length>0&&l.jsxs("div",{className:"flex justify-between mt-4 pt-4 border-t",children:[l.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.filter(U=>U.enabled).length," av ",e.length," aktiva",n&&t&&`  Nsta kontroll: ${L(t.interval_minutes)}`]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(H,{variant:"outline",size:"sm",onClick:()=>v(!0),children:[l.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Lgg till"]}),l.jsx(H,{variant:"outline",size:"sm",onClick:M,children:n?l.jsxs(l.Fragment,{children:[l.jsx(Yhe,{className:"h-4 w-4 mr-2"}),"Pausa"]}):l.jsxs(l.Fragment,{children:[l.jsx(cV,{className:"h-4 w-4 mr-2"}),"Starta"]})})]})]})]})]}),l.jsx(xt,{open:g,onOpenChange:v,children:l.jsxs(ft,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[l.jsx(ht,{children:l.jsx(pt,{children:"Lgg till API/webbplats vervakning"})}),l.jsxs(Qo,{defaultValue:"basic",className:"w-full",children:[l.jsxs(co,{className:"grid w-full grid-cols-3",children:[l.jsx(St,{value:"basic",children:"Grundlggande"}),l.jsx(St,{value:"advanced",children:"Avancerat"}),l.jsx(St,{value:"templates",children:"Mallar"})]}),l.jsxs(wt,{value:"basic",className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(X,{htmlFor:"target-name",children:"Namn"}),l.jsx(re,{id:"target-name",value:T.name,onChange:U=>A(K=>({...K,name:U.target.value})),placeholder:"Min API / webbplats"})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"target-url",children:"URL"}),l.jsx(re,{id:"target-url",value:T.url,onChange:U=>A(K=>({...K,url:U.target.value})),placeholder:"https://api.example.com/health or mongodb+srv://..."})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"target-type",children:"Typ av vervakning"}),l.jsxs(gn,{value:T.type||"http",onValueChange:U=>A(K=>({...K,type:U})),children:[l.jsx(ln,{children:l.jsx(vn,{})}),l.jsxs(cn,{children:[l.jsx(Ve,{value:"http",children:"HTTP/API"}),l.jsx(Ve,{value:"mongodb",children:"MongoDB Database"})]})]})]}),T.type==="http"&&l.jsxs("div",{children:[l.jsx(X,{htmlFor:"target-method",children:"HTTP-metod"}),l.jsxs(gn,{value:T.method||"GET",onValueChange:U=>A(K=>({...K,method:U})),children:[l.jsx(ln,{children:l.jsx(vn,{})}),l.jsxs(cn,{children:[l.jsx(Ve,{value:"GET",children:"GET"}),l.jsx(Ve,{value:"POST",children:"POST"}),l.jsx(Ve,{value:"PUT",children:"PUT"}),l.jsx(Ve,{value:"DELETE",children:"DELETE"}),l.jsx(Ve,{value:"HEAD",children:"HEAD"}),l.jsx(Ve,{value:"OPTIONS",children:"OPTIONS"})]})]})]}),T.type==="mongodb"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(X,{htmlFor:"mongodb-database",children:"Databasnamn"}),l.jsx(re,{id:"mongodb-database",value:((O=T.mongodb_config)==null?void 0:O.database)||"",onChange:U=>A(K=>({...K,mongodb_config:{...K.mongodb_config,database:U.target.value}})),placeholder:"digitalidag"})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"mongodb-collection",children:"Kollektionsnamn (valfritt)"}),l.jsx(re,{id:"mongodb-collection",value:((Q=T.mongodb_config)==null?void 0:Q.collection)||"",onChange:U=>A(K=>({...K,mongodb_config:{...K.mongodb_config,collection:U.target.value}})),placeholder:"test_collection"})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"mongodb-operation",children:"Operation"}),l.jsxs(gn,{value:((Y=T.mongodb_config)==null?void 0:Y.operation)||"ping",onValueChange:U=>A(K=>({...K,mongodb_config:{...K.mongodb_config,operation:U}})),children:[l.jsx(ln,{children:l.jsx(vn,{})}),l.jsxs(cn,{children:[l.jsx(Ve,{value:"ping",children:"Ping (testa anslutning)"}),l.jsx(Ve,{value:"count",children:"Count (rkna dokument)"}),l.jsx(Ve,{value:"find",children:"Find (sk dokument)"})]})]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(zu,{id:"target-enabled",checked:T.enabled,onCheckedChange:U=>A(K=>({...K,enabled:U}))}),l.jsx(X,{htmlFor:"target-enabled",children:"Aktiverad"})]})]}),l.jsxs(wt,{value:"advanced",className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(X,{htmlFor:"target-headers",children:"Headers (JSON format)"}),l.jsx("textarea",{id:"target-headers",className:"w-full h-24 p-2 border rounded-md text-sm font-mono",value:E||JSON.stringify(T.headers||{},null,2),onChange:U=>{N(U.target.value);try{const K=JSON.parse(U.target.value);A(fe=>({...fe,headers:K}))}catch{}},placeholder:'{\\n  "Authorization": "Bearer your-token",\\n  "X-API-Key": "your-api-key"\\n}'})]}),["POST","PUT","PATCH"].includes(T.method||"GET")&&l.jsxs("div",{children:[l.jsx(X,{htmlFor:"target-body",children:"Request Body"}),l.jsx("textarea",{id:"target-body",className:"w-full h-24 p-2 border rounded-md text-sm font-mono",value:T.body||"",onChange:U=>A(K=>({...K,body:U.target.value})),placeholder:'{"query": "test"}'})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"target-expected-status",children:"Frvntade statuskoder (kommaseparerade)"}),l.jsx(re,{id:"target-expected-status",value:_,onChange:U=>{k(U.target.value);try{const K=U.target.value.split(",").map(fe=>parseInt(fe.trim())).filter(fe=>!isNaN(fe));A(fe=>({...fe,expected_status:K}))}catch{}},placeholder:"200,201,202,204"})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"target-expected-text",children:"Frvntad text i svar (valfritt)"}),l.jsx(re,{id:"target-expected-text",value:T.expected_text||"",onChange:U=>A(K=>({...K,expected_text:U.target.value})),placeholder:"success"})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"target-timeout",children:"Timeout (sekunder, valfritt)"}),l.jsx(re,{id:"target-timeout",type:"number",value:T.timeout||"",onChange:U=>A(K=>({...K,timeout:U.target.value?parseInt(U.target.value):void 0})),placeholder:"10"})]})]}),l.jsx(wt,{value:"templates",className:"space-y-4",children:l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"font-medium",children:"Snabbmallar"}),l.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[l.jsx(H,{variant:"outline",size:"sm",onClick:()=>{A({name:"Algolia Search Index",url:"https://APPLICATION_ID-dsn.algolia.net/1/indexes/INDEX_NAME/query",type:"http",method:"POST",headers:{"X-Algolia-Application-Id":"YOUR_APPLICATION_ID","X-Algolia-API-Key":"YOUR_SEARCH_API_KEY","Content-Type":"application/json"},body:'{"query": "test", "hitsPerPage": 1}',expected_status:[200],enabled:!0}),N(JSON.stringify({"X-Algolia-Application-Id":"YOUR_APPLICATION_ID","X-Algolia-API-Key":"YOUR_SEARCH_API_KEY","Content-Type":"application/json"},null,2)),k("200")},children:" Algolia Search API"}),l.jsx(H,{variant:"outline",size:"sm",onClick:()=>{A({name:"REST API Health Check",url:"https://api.example.com/health",type:"http",method:"GET",headers:{Authorization:"Bearer YOUR_TOKEN"},expected_status:[200],expected_text:"healthy",enabled:!0}),N(JSON.stringify({Authorization:"Bearer YOUR_TOKEN"},null,2)),k("200")},children:" REST API Health"}),l.jsx(H,{variant:"outline",size:"sm",onClick:()=>{A({name:"GraphQL Endpoint",url:"https://api.example.com/graphql",type:"http",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer YOUR_TOKEN"},body:'{"query": "{ __schema { types { name } } }"}',expected_status:[200],enabled:!0}),N(JSON.stringify({"Content-Type":"application/json",Authorization:"Bearer YOUR_TOKEN"},null,2)),k("200")},children:" GraphQL API"}),l.jsx(H,{variant:"outline",size:"sm",onClick:()=>{A({name:"DigitalIdag Users Count",url:"mongodb+srv://app:YOUR_PASSWORD@digitalidag.khxg9ko.mongodb.net/digitalidag?retryWrites=true&w=majority&appName=DigitalIdag",type:"mongodb",enabled:!0,mongodb_config:{database:"digitalidag",collection:"partners",operation:"count",query:""}})},children:" MongoDB Users Count"})]})]})})]}),l.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[l.jsx(H,{variant:"outline",onClick:()=>v(!1),children:"Avbryt"}),l.jsx(H,{onClick:j,children:"Lgg till vervakning"})]})]})}),l.jsx(xt,{open:y,onOpenChange:x,children:l.jsxs(ft,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[l.jsx(ht,{children:l.jsxs(pt,{children:["Edit ",b==null?void 0:b.name]})}),b&&l.jsxs(Qo,{defaultValue:"basic",className:"w-full",children:[l.jsxs(co,{className:"grid w-full grid-cols-2",children:[l.jsx(St,{value:"basic",children:"Grundlggande"}),l.jsx(St,{value:"advanced",children:"Avancerat"})]}),l.jsxs(wt,{value:"basic",className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(X,{htmlFor:"edit-target-name",children:"Namn"}),l.jsx(re,{id:"edit-target-name",value:b.name,onChange:U=>S(K=>K?{...K,name:U.target.value}:null),placeholder:"Min API / webbplats"})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"edit-target-url",children:"URL"}),l.jsx(re,{id:"edit-target-url",value:b.url,onChange:U=>S(K=>K?{...K,url:U.target.value}:null),placeholder:"https://api.example.com/health"})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"edit-target-method",children:"HTTP-metod"}),l.jsxs(gn,{value:b.method||"GET",onValueChange:U=>S(K=>K?{...K,method:U}:null),children:[l.jsx(ln,{children:l.jsx(vn,{})}),l.jsxs(cn,{children:[l.jsx(Ve,{value:"GET",children:"GET"}),l.jsx(Ve,{value:"POST",children:"POST"}),l.jsx(Ve,{value:"PUT",children:"PUT"}),l.jsx(Ve,{value:"DELETE",children:"DELETE"}),l.jsx(Ve,{value:"HEAD",children:"HEAD"}),l.jsx(Ve,{value:"OPTIONS",children:"OPTIONS"})]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(zu,{id:"edit-target-enabled",checked:b.enabled,onCheckedChange:U=>S(K=>K?{...K,enabled:U}:null)}),l.jsx(X,{htmlFor:"edit-target-enabled",children:"Aktiverad"})]})]}),l.jsxs(wt,{value:"advanced",className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(X,{htmlFor:"edit-target-headers",children:"Headers (JSON format)"}),l.jsx("textarea",{id:"edit-target-headers",className:"w-full h-24 p-2 border rounded-md text-sm font-mono",value:E,onChange:U=>{N(U.target.value);try{const K=JSON.parse(U.target.value);S(fe=>fe?{...fe,headers:K}:null)}catch{}},placeholder:'{\\n  "Authorization": "Bearer your-token"\\n}'})]}),["POST","PUT","PATCH"].includes(b.method||"GET")&&l.jsxs("div",{children:[l.jsx(X,{htmlFor:"edit-target-body",children:"Request Body"}),l.jsx("textarea",{id:"edit-target-body",className:"w-full h-24 p-2 border rounded-md text-sm font-mono",value:b.body||"",onChange:U=>S(K=>K?{...K,body:U.target.value}:null),placeholder:'{"query": "test"}'})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"edit-target-expected-status",children:"Frvntade statuskoder"}),l.jsx(re,{id:"edit-target-expected-status",value:_,onChange:U=>{k(U.target.value);try{const K=U.target.value.split(",").map(fe=>parseInt(fe.trim())).filter(fe=>!isNaN(fe));S(fe=>fe?{...fe,expected_status:K}:null)}catch{}},placeholder:"200,201,202,204"})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"edit-target-expected-text",children:"Frvntad text i svar"}),l.jsx(re,{id:"edit-target-expected-text",value:b.expected_text||"",onChange:U=>S(K=>K?{...K,expected_text:U.target.value}:null),placeholder:"success"})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"edit-target-timeout",children:"Timeout (sekunder)"}),l.jsx(re,{id:"edit-target-timeout",type:"number",value:b.timeout||"",onChange:U=>S(K=>K?{...K,timeout:U.target.value?parseInt(U.target.value):void 0}:null),placeholder:"10"})]})]})]}),l.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[l.jsxs(H,{variant:"destructive",onClick:()=>{b&&(a(b.id),x(!1),S(null))},children:[l.jsx(lr,{className:"h-4 w-4 mr-2"}),"Ta bort"]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(H,{variant:"outline",onClick:()=>x(!1),children:"Avbryt"}),l.jsx(H,{onClick:I,children:"Spara ndringar"})]})]})]})}),l.jsx(xt,{open:p,onOpenChange:m,children:l.jsxs(ft,{className:"max-w-2xl",children:[l.jsx(ht,{children:l.jsx(pt,{children:"Instllningar fr Uptime Monitor"})}),l.jsxs(Qo,{defaultValue:"general",className:"w-full",children:[l.jsxs(co,{className:"grid w-full grid-cols-2",children:[l.jsx(St,{value:"general",children:"Allmnt"}),l.jsx(St,{value:"targets",children:"Webbplatser"})]}),l.jsx(wt,{value:"general",className:"space-y-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(X,{htmlFor:"interval",children:"Kontrollintervall (minuter)"}),l.jsxs(gn,{value:(($=t==null?void 0:t.interval_minutes)==null?void 0:$.toString())||"5",onValueChange:U=>o({interval_minutes:parseInt(U)}),children:[l.jsx(ln,{children:l.jsx(vn,{})}),l.jsxs(cn,{children:[l.jsx(Ve,{value:"1",children:"1 minut"}),l.jsx(Ve,{value:"5",children:"5 minuter"}),l.jsx(Ve,{value:"10",children:"10 minuter"}),l.jsx(Ve,{value:"30",children:"30 minuter"}),l.jsx(Ve,{value:"60",children:"1 timme"})]})]})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"timeout",children:"Timeout (sekunder)"}),l.jsxs(gn,{value:((ye=t==null?void 0:t.timeout_seconds)==null?void 0:ye.toString())||"10",onValueChange:U=>o({timeout_seconds:parseInt(U)}),children:[l.jsx(ln,{children:l.jsx(vn,{})}),l.jsxs(cn,{children:[l.jsx(Ve,{value:"5",children:"5 sekunder"}),l.jsx(Ve,{value:"10",children:"10 sekunder"}),l.jsx(Ve,{value:"30",children:"30 sekunder"}),l.jsx(Ve,{value:"60",children:"60 sekunder"})]})]})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"retries",children:"Antal terfrsk"}),l.jsxs(gn,{value:((Te=t==null?void 0:t.retries)==null?void 0:Te.toString())||"3",onValueChange:U=>o({retries:parseInt(U)}),children:[l.jsx(ln,{children:l.jsx(vn,{})}),l.jsxs(cn,{children:[l.jsx(Ve,{value:"0",children:"0"}),l.jsx(Ve,{value:"1",children:"1"}),l.jsx(Ve,{value:"3",children:"3"}),l.jsx(Ve,{value:"5",children:"5"})]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(zu,{id:"monitoring-enabled",checked:(t==null?void 0:t.enabled)||!1,onCheckedChange:U=>o({enabled:U})}),l.jsx(X,{htmlFor:"monitoring-enabled",children:"Aktivera vervakning"})]})]})}),l.jsx(wt,{value:"targets",className:"space-y-4",children:l.jsx("div",{className:"space-y-3",children:e.map(U=>{var fe;const K=f(U.id);return l.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(zu,{checked:U.enabled,onCheckedChange:oe=>s(U.id,{enabled:oe})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:U.name}),l.jsx("div",{className:"text-sm text-muted-foreground",children:U.url}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Uptime: ",((fe=K==null?void 0:K.uptime_percentage)==null?void 0:fe.toFixed(1))||"0.0","% (24h)"]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(H,{variant:"ghost",size:"icon",onClick:()=>d(U.id),title:"Manuell kontroll",children:l.jsx(yC,{className:"h-4 w-4"})}),l.jsx(H,{variant:"ghost",size:"icon",onClick:()=>a(U.id),title:"Ta bort",children:l.jsx(lr,{className:"h-4 w-4"})})]})]},U.id)})})})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx(H,{onClick:()=>m(!1),children:"Stng"})})]})})]})}function Ss(e){const{user:t}=jr(),{clients:n}=Tn(),{projects:r}=er(),{entries:i}=li(),{updateCurrentVatCalculations:s}=AS((t==null?void 0:t.id)||null),[a,o]=w.useState([]),[c,u]=w.useState(!0),[d,f]=w.useState(null),h=t==null?void 0:t.id,p=w.useCallback(async()=>{if(!h){o([]),u(!1);return}try{u(!0),f(null);const{data:_,error:k}=await ie.from("invoice_items").select("*").eq("user_id",h).order("created_at",{ascending:!1});if(k)throw k;o(_||[])}catch(_){console.error("Error fetching invoice items:",_),f(_ instanceof Error?_.message:"Failed to fetch invoice items");const k=localStorage.getItem(`invoice_items_${h}`);k&&o(JSON.parse(k))}finally{u(!1)}},[h]),m=w.useCallback(async _=>{if(!h)throw new Error("User not authenticated");try{let k;_.type==="hourly"?k=(_.quantity||0)*(_.rate||0):k=_.rate||0;const T={user_id:h,client_id:_.client_id||null,project_id:_.project_id||null,description:_.description,hours:_.type==="hourly"?_.quantity:null,hourly_rate:_.type==="hourly"?_.rate:null,fixed_amount:_.type==="fixed"?_.rate:null,total_amount:k,currency:"SEK",invoice_date:_.invoice_date||new Date().toISOString().split("T")[0],due_date:_.due_date||null,status:_.status||"draft"},{data:A,error:j}=await ie.from("invoice_items").insert([T]).select().single();if(j)throw j;if(A){o(I=>[A,...I]);const D=[A,...a];return localStorage.setItem(`invoice_items_${h}`,JSON.stringify(D)),s&&s().catch(I=>{console.log("VAT recalculation failed (non-critical):",I)}),A}return null}catch(k){console.error("Error adding invoice item:",k);const T=_.type==="hourly"?(_.quantity||0)*(_.rate||0):_.rate||0,j=[{id:`local_${Date.now()}`,user_id:h,client_id:_.client_id||null,project_id:_.project_id||null,description:_.description,hours:_.type==="hourly"?_.quantity:null,hourly_rate:_.type==="hourly"?_.rate:null,fixed_amount:_.type==="fixed"?_.rate:null,total_amount:T,currency:"SEK",invoice_date:_.invoice_date||new Date().toISOString().split("T")[0],due_date:_.due_date||null,status:_.status||"draft",notes:_.notes||null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},...a];throw o(j),localStorage.setItem(`invoice_items_${h}`,JSON.stringify(j)),k}},[h,a,s]),g=w.useCallback(async _=>{if(!h)throw new Error("User not authenticated");try{const{id:k,...T}=_,A={};if(T.quantity!==void 0||T.rate!==void 0||T.type!==void 0){const I=a.find(M=>M.id===k);if(I){const M=T.type||(I.hours?"hourly":"fixed"),L=T.quantity??(I.hours||1),P=T.rate??(I.hourly_rate||I.fixed_amount||0);M==="hourly"?(A.hours=L,A.hourly_rate=P,A.fixed_amount=null,A.total_amount=L*P):(A.hours=null,A.hourly_rate=null,A.fixed_amount=P,A.total_amount=P)}}T.description!==void 0&&(A.description=T.description),T.client_id!==void 0&&(A.client_id=T.client_id),T.project_id!==void 0&&(A.project_id=T.project_id),T.invoice_date!==void 0&&(A.invoice_date=T.invoice_date),T.due_date!==void 0&&(A.due_date=T.due_date),T.status!==void 0&&(A.status=T.status),T.notes!==void 0&&(A.notes=T.notes);const{data:j,error:D}=await ie.from("invoice_items").update({...A,updated_at:new Date().toISOString()}).eq("id",k).eq("user_id",h).select().single();if(D)throw D;if(j){o(M=>M.map(L=>L.id===k?j:L));const I=a.map(M=>M.id===k?j:M);return localStorage.setItem(`invoice_items_${h}`,JSON.stringify(I)),j}return null}catch(k){throw console.error("Error updating invoice item:",k),k}},[h,a]),v=w.useCallback(async _=>{if(!h)throw new Error("User not authenticated");try{const{error:k}=await ie.from("invoice_items").delete().eq("id",_).eq("user_id",h);if(k)throw k;o(A=>A.filter(j=>j.id!==_));const T=a.filter(A=>A.id!==_);localStorage.setItem(`invoice_items_${h}`,JSON.stringify(T))}catch(k){throw console.error("Error deleting invoice item:",k),k}},[h,a]),y=w.useCallback(()=>{const _=a.reduce((T,A)=>{switch(T.itemCount++,A.status){case"draft":T.totalDraft+=A.total_amount,T.totalUnbilled+=A.total_amount;break;case"sent":T.totalSent+=A.total_amount;break;case"paid":T.totalPaid+=A.total_amount;break}return T},{totalUnbilled:0,totalDraft:0,totalSent:0,totalPaid:0,itemCount:0,clientCount:0}),k=new Set(a.map(T=>T.client_id));return _.clientCount=k.size,_},[a]),x=w.useCallback(()=>{const _=new Map;a.forEach(T=>{if(!T.client_id)return;const A=n.find(D=>D.id===T.client_id);if(!A)return;_.has(T.client_id)||_.set(T.client_id,{client_id:T.client_id,client_name:A.name,company:A.company||void 0,totalUnbilled:0,totalDraft:0,totalSent:0,totalPaid:0,itemCount:0,projectCount:0,lastActivity:T.created_at});const j=_.get(T.client_id);switch(j.itemCount++,T.created_at>j.lastActivity&&(j.lastActivity=T.created_at),T.status){case"draft":j.totalDraft+=T.total_amount,j.totalUnbilled+=T.total_amount;break;case"sent":j.totalSent+=T.total_amount;break;case"paid":j.totalPaid+=T.total_amount;break}});const k=new Map;return a.forEach(T=>{!T.client_id||!T.project_id||(k.has(T.client_id)||k.set(T.client_id,new Set),k.get(T.client_id).add(T.project_id))}),_.forEach((T,A)=>{var j;T.projectCount=((j=k.get(A))==null?void 0:j.size)||0}),Array.from(_.values()).sort((T,A)=>A.totalUnbilled-T.totalUnbilled)},[a,n]),b=w.useCallback(()=>{const _=new Map;return a.forEach(k=>{if(!k.project_id||!k.client_id)return;const T=r.find(D=>D.id===k.project_id),A=n.find(D=>D.id===k.client_id);if(!T||!A)return;_.has(k.project_id)||_.set(k.project_id,{project_id:k.project_id,project_name:T.name,client_id:k.client_id,client_name:A.name,totalUnbilled:0,totalDraft:0,totalSent:0,totalPaid:0,itemCount:0,totalHours:0,averageRate:0,lastActivity:k.created_at});const j=_.get(k.project_id);switch(j.itemCount++,k.created_at>j.lastActivity&&(j.lastActivity=k.created_at),k.hours&&(j.totalHours+=k.hours),k.status){case"draft":j.totalDraft+=k.total_amount,j.totalUnbilled+=k.total_amount;break;case"sent":j.totalSent+=k.total_amount;break;case"paid":j.totalPaid+=k.total_amount;break}}),_.forEach(k=>{const T=a.filter(D=>D.project_id===k.project_id),A=T.reduce((D,I)=>D+I.total_amount,0),j=T.reduce((D,I)=>D+(I.hours||0),0);k.averageRate=j>0?A/j:0}),Array.from(_.values()).sort((k,T)=>T.totalUnbilled-k.totalUnbilled)},[a,r,n]),S=w.useCallback(async(_,k,T)=>{const A=i.filter(L=>_.includes(L.id));if(A.length===0)return null;const j=A.reduce((L,P)=>L+P.hours,0),D=r.find(L=>L.id===A[0].project_id),I=n.find(L=>L.id===k);if(!D||!I)return null;const M=D.hourly_rate||I.hourly_rate||0;return m({client_id:k,project_id:A[0].project_id,description:T||`${D.name} - ${j} hours`,quantity:j,rate:M,type:"hourly",invoice_date:new Date().toISOString().split("T")[0],due_date:new Date(Date.now()+20*24*60*60*1e3).toISOString().split("T")[0]})},[i,r,n,m]),E=w.useCallback(async _=>{const k=_.map(T=>g({id:T,status:"sent"}));await Promise.all(k)},[g]),N=w.useCallback(async _=>{const k=_.map(T=>g({id:T,status:"paid"}));await Promise.all(k)},[g]);return w.useEffect(()=>{p()},[p]),{invoiceItems:a,loading:c,error:d,addInvoiceItem:m,updateInvoiceItem:g,deleteInvoiceItem:v,getInvoiceSummary:y,getClientSummaries:x,getProjectSummaries:b,createInvoiceFromTimeEntries:S,markAsInvoiced:E,markAsPaid:N,refetch:p}}const $ee=6048e5,Y8e=864e5,Uee=6e4,zee=36e5,Oy=43200,b8=1440,w8=Symbol.for("constructDateFrom");function Oa(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&w8 in e?e[w8](t):e instanceof Date?new e.constructor(t):new Date(t)}function dn(e,t){return Oa(t||e,e)}function X8e(e,t,n){const r=dn(e,n==null?void 0:n.in);return isNaN(t)?Oa(e,NaN):(t&&r.setDate(r.getDate()+t),r)}let Q8e={};function wv(){return Q8e}function a0(e,t){var o,c,u,d;const n=wv(),r=(t==null?void 0:t.weekStartsOn)??((c=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=dn(e,t==null?void 0:t.in),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function C1(e,t){return a0(e,{...t,weekStartsOn:1})}function Hee(e,t){const n=dn(e,t==null?void 0:t.in),r=n.getFullYear(),i=Oa(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=C1(i),a=Oa(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=C1(a);return n.getTime()>=s.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function T1(e){const t=dn(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Ev(e,...t){const n=Oa.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function E8(e,t){const n=dn(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function Vee(e,t,n){const[r,i]=Ev(n==null?void 0:n.in,e,t),s=E8(r),a=E8(i),o=+s-T1(s),c=+a-T1(a);return Math.round((o-c)/Y8e)}function J8e(e,t){const n=Hee(e,t),r=Oa(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),C1(r)}function Tx(e,t){const n=+dn(e)-+dn(t);return n<0?-1:n>0?1:n}function Z8e(e){return Oa(e,Date.now())}function e$e(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function t$e(e){return!(!e$e(e)&&typeof e!="number"||isNaN(+dn(e)))}function n$e(e,t,n){const[r,i]=Ev(n==null?void 0:n.in,e,t),s=r.getFullYear()-i.getFullYear(),a=r.getMonth()-i.getMonth();return s*12+a}function r$e(e,t,n){const[r,i]=Ev(n==null?void 0:n.in,e,t),s=S8(r,i),a=Math.abs(Vee(r,i));r.setDate(r.getDate()-s*a);const o=+(S8(r,i)===-s),c=s*(a-o);return c===0?0:c}function S8(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function i$e(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function s$e(e,t){return+dn(e)-+dn(t)}function a$e(e,t){const n=dn(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function Ax(e,t){const n=dn(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function o$e(e,t){const n=dn(e,t==null?void 0:t.in);return+a$e(n,t)==+Ax(n,t)}function l$e(e,t,n){const[r,i,s]=Ev(n==null?void 0:n.in,e,e,t),a=Tx(i,s),o=Math.abs(n$e(i,s));if(o<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-a*o);let c=Tx(i,s)===-a;o$e(r)&&o===1&&Tx(r,s)===1&&(c=!1);const u=a*(o-+c);return u===0?0:u}function c$e(e,t,n){const r=s$e(e,t)/1e3;return i$e(n==null?void 0:n.roundingMethod)(r)}function fk(e,t){const n=dn(e,t==null?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function u$e(e,t){const n=dn(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const d$e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},f$e=(e,t,n)=>{let r;const i=d$e[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function hk(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const h$e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},p$e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},m$e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},g$e={date:hk({formats:h$e,defaultWidth:"full"}),time:hk({formats:p$e,defaultWidth:"full"}),dateTime:hk({formats:m$e,defaultWidth:"full"})},v$e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},y$e=(e,t,n,r)=>v$e[e];function Qp(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):a;i=e.formattingValues[o]||e.formattingValues[a]}else{const a=e.defaultWidth,o=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[o]||e.values[a]}const s=e.argumentCallback?e.argumentCallback(t):t;return i[s]}}const x$e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},b$e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},w$e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},E$e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},S$e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},N$e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},_$e=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},k$e={ordinalNumber:_$e,era:Qp({values:x$e,defaultWidth:"wide"}),quarter:Qp({values:b$e,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Qp({values:w$e,defaultWidth:"wide"}),day:Qp({values:E$e,defaultWidth:"wide"}),dayPeriod:Qp({values:S$e,defaultWidth:"wide",formattingValues:N$e,defaultFormattingWidth:"wide"})};function Jp(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const a=s[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(o)?T$e(o,f=>f.test(a)):C$e(o,f=>f.test(a));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(a.length);return{value:u,rest:d}}}function C$e(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function T$e(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function A$e(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],s=t.match(e.parsePattern);if(!s)return null;let a=e.valueCallback?e.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const o=t.slice(i.length);return{value:a,rest:o}}}const j$e=/^(\d+)(th|st|nd|rd)?/i,O$e=/\d+/i,P$e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},I$e={any:[/^b/i,/^(a|c)/i]},D$e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},M$e={any:[/1/i,/2/i,/3/i,/4/i]},R$e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},L$e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},F$e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},B$e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$$e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},U$e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},z$e={ordinalNumber:A$e({matchPattern:j$e,parsePattern:O$e,valueCallback:e=>parseInt(e,10)}),era:Jp({matchPatterns:P$e,defaultMatchWidth:"wide",parsePatterns:I$e,defaultParseWidth:"any"}),quarter:Jp({matchPatterns:D$e,defaultMatchWidth:"wide",parsePatterns:M$e,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Jp({matchPatterns:R$e,defaultMatchWidth:"wide",parsePatterns:L$e,defaultParseWidth:"any"}),day:Jp({matchPatterns:F$e,defaultMatchWidth:"wide",parsePatterns:B$e,defaultParseWidth:"any"}),dayPeriod:Jp({matchPatterns:$$e,defaultMatchWidth:"any",parsePatterns:U$e,defaultParseWidth:"any"})},Wee={code:"en-US",formatDistance:f$e,formatLong:g$e,formatRelative:y$e,localize:k$e,match:z$e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function H$e(e,t){const n=dn(e,t==null?void 0:t.in);return Vee(n,u$e(n))+1}function V$e(e,t){const n=dn(e,t==null?void 0:t.in),r=+C1(n)-+J8e(n);return Math.round(r/$ee)+1}function qee(e,t){var d,f,h,p;const n=dn(e,t==null?void 0:t.in),r=n.getFullYear(),i=wv(),s=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(h=i.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,a=Oa((t==null?void 0:t.in)||e,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const o=a0(a,t),c=Oa((t==null?void 0:t.in)||e,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const u=a0(c,t);return+n>=+o?r+1:+n>=+u?r:r-1}function W$e(e,t){var o,c,u,d;const n=wv(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=qee(e,t),s=Oa((t==null?void 0:t.in)||e,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),a0(s,t)}function q$e(e,t){const n=dn(e,t==null?void 0:t.in),r=+a0(n,t)-+W$e(n,t);return Math.round(r/$ee)+1}function It(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Al={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return It(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):It(n+1,2)},d(e,t){return It(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return It(e.getHours()%12||12,t.length)},H(e,t){return It(e.getHours(),t.length)},m(e,t){return It(e.getMinutes(),t.length)},s(e,t){return It(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return It(i,t.length)}},af={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},N8={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Al.y(e,t)},Y:function(e,t,n,r){const i=qee(e,r),s=i>0?i:1-i;if(t==="YY"){const a=s%100;return It(a,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):It(s,t.length)},R:function(e,t){const n=Hee(e);return It(n,t.length)},u:function(e,t){const n=e.getFullYear();return It(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return It(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return It(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Al.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return It(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=q$e(e,r);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):It(i,t.length)},I:function(e,t,n){const r=V$e(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):It(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Al.d(e,t)},D:function(e,t,n){const r=H$e(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):It(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return It(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return It(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return It(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(r===12?i=af.noon:r===0?i=af.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(r>=17?i=af.evening:r>=12?i=af.afternoon:r>=4?i=af.morning:i=af.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Al.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Al.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):It(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):It(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Al.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Al.s(e,t)},S:function(e,t){return Al.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return k8(r);case"XXXX":case"XX":return Cu(r);case"XXXXX":case"XXX":default:return Cu(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return k8(r);case"xxxx":case"xx":return Cu(r);case"xxxxx":case"xxx":default:return Cu(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+_8(r,":");case"OOOO":default:return"GMT"+Cu(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+_8(r,":");case"zzzz":default:return"GMT"+Cu(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return It(r,t.length)},T:function(e,t,n){return It(+e,t.length)}};function _8(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+t+It(s,2)}function k8(e,t){return e%60===0?(e>0?"-":"+")+It(Math.abs(e)/60,2):Cu(e,t)}function Cu(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=It(Math.trunc(r/60),2),s=It(r%60,2);return n+i+t+s}const C8=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Kee=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},K$e=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return C8(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",C8(r,t)).replace("{{time}}",Kee(i,t))},G$e={p:Kee,P:K$e},Y$e=/^D+$/,X$e=/^Y+$/,Q$e=["D","DD","YY","YYYY"];function J$e(e){return Y$e.test(e)}function Z$e(e){return X$e.test(e)}function e9e(e,t,n){const r=t9e(e,t,n);if(console.warn(r),Q$e.includes(e))throw new RangeError(r)}function t9e(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const n9e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,r9e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,i9e=/^'([^]*?)'?$/,s9e=/''/g,a9e=/[a-zA-Z]/;function Cd(e,t,n){var d,f,h,p;const r=wv(),i=r.locale??Wee,s=r.firstWeekContainsDate??((f=(d=r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,a=r.weekStartsOn??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.weekStartsOn)??0,o=dn(e,n==null?void 0:n.in);if(!t$e(o))throw new RangeError("Invalid time value");let c=t.match(r9e).map(m=>{const g=m[0];if(g==="p"||g==="P"){const v=G$e[g];return v(m,i.formatLong)}return m}).join("").match(n9e).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:o9e(m)};if(N8[g])return{isToken:!0,value:m};if(g.match(a9e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(c=i.localize.preprocessor(o,c));const u={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return c.map(m=>{if(!m.isToken)return m.value;const g=m.value;(Z$e(g)||J$e(g))&&e9e(g,t,String(e));const v=N8[g[0]];return v(o,g,i.localize,u)}).join("")}function o9e(e){const t=e.match(i9e);return t?t[1].replace(s9e,"'"):e}function l9e(e,t,n){const r=wv(),i=(n==null?void 0:n.locale)??r.locale??Wee,s=2520,a=Tx(e,t);if(isNaN(a))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:a}),[c,u]=Ev(n==null?void 0:n.in,...a>0?[t,e]:[e,t]),d=c$e(u,c),f=(T1(u)-T1(c))/1e3,h=Math.round((d-f)/60);let p;if(h<2)return n!=null&&n.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,o):d<10?i.formatDistance("lessThanXSeconds",10,o):d<20?i.formatDistance("lessThanXSeconds",20,o):d<40?i.formatDistance("halfAMinute",0,o):d<60?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",1,o):h===0?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",h,o);if(h<45)return i.formatDistance("xMinutes",h,o);if(h<90)return i.formatDistance("aboutXHours",1,o);if(h<b8){const m=Math.round(h/60);return i.formatDistance("aboutXHours",m,o)}else{if(h<s)return i.formatDistance("xDays",1,o);if(h<Oy){const m=Math.round(h/b8);return i.formatDistance("xDays",m,o)}else if(h<Oy*2)return p=Math.round(h/Oy),i.formatDistance("aboutXMonths",p,o)}if(p=l$e(u,c),p<12){const m=Math.round(h/Oy);return i.formatDistance("xMonths",m,o)}else{const m=p%12,g=Math.trunc(p/12);return m<3?i.formatDistance("aboutXYears",g,o):m<9?i.formatDistance("overXYears",g,o):i.formatDistance("almostXYears",g+1,o)}}function A1(e,t){return l9e(e,Z8e(e),t)}function bc(e,t,n){const r=+dn(e,n==null?void 0:n.in),[i,s]=[+dn(t.start,n==null?void 0:n.in),+dn(t.end,n==null?void 0:n.in)].sort((a,o)=>a-o);return r>=i&&r<=s}function Py(e,t,n){return X8e(e,-t,n)}function Ws(e,t){const n=()=>Oa(t==null?void 0:t.in,NaN),i=f9e(e);let s;if(i.date){const u=h9e(i.date,2);s=p9e(u.restDateString,u.year)}if(!s||isNaN(+s))return n();const a=+s;let o=0,c;if(i.time&&(o=m9e(i.time),isNaN(o)))return n();if(i.timezone){if(c=g9e(i.timezone),isNaN(c))return n()}else{const u=new Date(a+o),d=dn(0,t==null?void 0:t.in);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return dn(a+o+c,t==null?void 0:t.in)}const Iy={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},c9e=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,u9e=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,d9e=/^([+-])(\d{2})(?::?(\d{2}))?$/;function f9e(e){const t={},n=e.split(Iy.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],Iy.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Iy.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const i=Iy.timezone.exec(r);i?(t.time=r.replace(i[1],""),t.timezone=i[1]):t.time=r}return t}function h9e(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:e.slice((r[1]||r[2]).length)}}function p9e(e,t){if(t===null)return new Date(NaN);const n=e.match(c9e);if(!n)return new Date(NaN);const r=!!n[4],i=Zp(n[1]),s=Zp(n[2])-1,a=Zp(n[3]),o=Zp(n[4]),c=Zp(n[5])-1;if(r)return w9e(t,o,c)?v9e(t,o,c):new Date(NaN);{const u=new Date(0);return!x9e(t,s,a)||!b9e(t,i)?new Date(NaN):(u.setUTCFullYear(t,s,Math.max(i,a)),u)}}function Zp(e){return e?parseInt(e):1}function m9e(e){const t=e.match(u9e);if(!t)return NaN;const n=pk(t[1]),r=pk(t[2]),i=pk(t[3]);return E9e(n,r,i)?n*zee+r*Uee+i*1e3:NaN}function pk(e){return e&&parseFloat(e.replace(",","."))||0}function g9e(e){if(e==="Z")return 0;const t=e.match(d9e);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return S9e(r,i)?n*(r*zee+i*Uee):NaN}function v9e(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const i=r.getUTCDay()||7,s=(t-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const y9e=[31,null,31,30,31,30,31,31,30,31,30,31];function Gee(e){return e%400===0||e%4===0&&e%100!==0}function x9e(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(y9e[t]||(Gee(e)?29:28))}function b9e(e,t){return t>=1&&t<=(Gee(e)?366:365)}function w9e(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function E9e(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function S9e(e,t){return t>=0&&t<=59}function N9e(){const{invoiceItems:e}=Ss(),{clients:t}=Tn(),n=7,r=w.useMemo(()=>{const o=new Date;o.setHours(0,0,0,0);const c=new Date(o);return c.setDate(o.getDate()+n),c.setHours(23,59,59,999),e.filter(u=>{const d=new Date(u.invoice_date);return d>=o&&d<=c&&u.status!=="paid"}).sort((u,d)=>{const f=new Date(u.invoice_date),h=new Date(d.invoice_date);return f.getTime()-h.getTime()}).slice(0,5).map(u=>{const d=t.find(v=>v.id===u.client_id),f=new Date(u.invoice_date),h=new Date;h.setHours(0,0,0,0);const p=f.getTime()-h.getTime(),m=Math.ceil(p/(1e3*60*60*24));let g="normal";return m<0?g="overdue":m<=2?g="urgent":m<=4&&(g="soon"),{...u,clientName:(d==null?void 0:d.name)||"Unknown Client",daysUntilCreation:m,urgency:g}})},[e,t,n]),i=o=>{switch(o){case"overdue":return l.jsx(to,{className:"h-4 w-4 text-red-500"});case"urgent":return l.jsx(gt,{className:"h-4 w-4 text-orange-500"});case"soon":return l.jsx(Lt,{className:"h-4 w-4 text-yellow-500"});default:return l.jsx(Er,{className:"h-4 w-4 text-green-500"})}},s=o=>{switch(o){case"overdue":return"bg-red-100 text-red-800 border-red-200";case"urgent":return"bg-orange-100 text-orange-800 border-orange-200";case"soon":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-green-100 text-green-800 border-green-200"}},a=o=>o<0?`${Math.abs(o)} days overdue to create`:o===0?"Ready to create today":o===1?"Ready to create tomorrow":`Create in ${o} days`;return r.length===0?l.jsxs(Z,{className:"h-full",children:[l.jsx(de,{className:"pb-3",children:l.jsxs(he,{className:"text-base flex items-center gap-2",children:[l.jsx(Lt,{className:"h-4 w-4"}),"Ready to Create (",n," days)"]})}),l.jsx(ee,{children:l.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[l.jsx(Er,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{children:"No invoices ready to create"}),l.jsxs("p",{className:"text-sm",children:["All caught up for the next ",n," days!"]})]})})]}):l.jsxs(Z,{className:"h-full",children:[l.jsx(de,{className:"pb-3",children:l.jsxs(he,{className:"text-base flex items-center gap-2",children:[l.jsx(Lt,{className:"h-4 w-4"}),"Ready to Create (",n," days)"]})}),l.jsx(ee,{children:l.jsx("div",{className:"space-y-3",children:r.map(o=>l.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[i(o.urgency),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("p",{className:"font-medium text-sm truncate",children:o.clientName}),l.jsx(Ot,{variant:"outline",className:`text-xs ${s(o.urgency)}`,children:o.status})]}),l.jsx("p",{className:"text-xs text-muted-foreground truncate",children:o.description})]})]}),l.jsxs("div",{className:"text-right flex-shrink-0 ml-2",children:[l.jsx("div",{className:"font-medium text-sm",children:ue(o.total_amount)}),l.jsx("div",{className:"text-xs text-muted-foreground",children:a(o.daysUntilCreation)}),l.jsx("div",{className:"text-xs text-muted-foreground",children:Cd(new Date(o.invoice_date),"MMM d")})]})]},o.id))})})]})}function _9e(){const{invoiceItems:e}=Ss(),{clients:t}=Tn(),n=w.useMemo(()=>{const o=new Date;return o.setHours(0,0,0,0),e.filter(c=>!c.due_date||c.status==="paid"?!1:new Date(c.due_date)<o).sort((c,u)=>{const d=new Date(c.due_date),f=new Date(u.due_date);return d.getTime()-f.getTime()}).slice(0,10).map(c=>{const u=t.find(g=>g.id===c.client_id),d=new Date(c.due_date),f=new Date;f.setHours(0,0,0,0);const h=f.getTime()-d.getTime(),p=Math.ceil(h/(1e3*60*60*24));let m="medium";return p>30?m="critical":p>14&&(m="high"),{...c,clientName:(u==null?void 0:u.name)||"Unknown Client",daysOverdue:p,urgency:m}})},[e,t]),r=o=>{switch(o){case"critical":return l.jsx(to,{className:"h-4 w-4 text-red-600"});case"high":return l.jsx(to,{className:"h-4 w-4 text-red-500"});default:return l.jsx(gt,{className:"h-4 w-4 text-red-400"})}},i=o=>{switch(o){case"critical":return"bg-red-200 text-red-900 border-red-300";case"high":return"bg-red-100 text-red-800 border-red-200";default:return"bg-red-50 text-red-700 border-red-150"}},s=o=>o===1?"1 day overdue":`${o} days overdue`,a=n.reduce((o,c)=>o+c.total_amount,0);return n.length===0?l.jsxs(Z,{className:"h-full",children:[l.jsx(de,{className:"pb-3",children:l.jsxs(he,{className:"text-base flex items-center gap-2",children:[l.jsx(wn,{className:"h-4 w-4"}),"Overdue Invoices"]})}),l.jsx(ee,{children:l.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[l.jsx(wn,{className:"h-8 w-8 mx-auto mb-2 opacity-50 text-green-500"}),l.jsx("p",{children:"No overdue invoices"}),l.jsx("p",{className:"text-sm",children:"All payments are on track!"})]})})]}):l.jsxs(Z,{className:"h-full",children:[l.jsxs(de,{className:"pb-3",children:[l.jsxs(he,{className:"text-base flex items-center gap-2",children:[l.jsx(to,{className:"h-4 w-4 text-red-500"}),"Overdue Invoices",l.jsx(Ot,{variant:"destructive",className:"ml-auto",children:n.length})]}),a>0&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total overdue: ",l.jsx("span",{className:"font-semibold text-red-600",children:ue(a)})]})]}),l.jsx(ee,{children:l.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:n.map(o=>l.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-red-200 bg-red-50 hover:bg-red-100 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[r(o.urgency),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("p",{className:"font-medium text-sm truncate text-red-900",children:o.clientName}),l.jsx(Ot,{variant:"outline",className:`text-xs ${i(o.urgency)}`,children:o.status})]}),l.jsx("p",{className:"text-xs text-red-700 truncate",children:o.description})]})]}),l.jsxs("div",{className:"text-right flex-shrink-0 ml-2",children:[l.jsx("div",{className:"font-medium text-sm text-red-900",children:ue(o.total_amount)}),l.jsx("div",{className:"text-xs font-medium text-red-600",children:s(o.daysOverdue)}),l.jsxs("div",{className:"text-xs text-red-600",children:["Due: ",Cd(new Date(o.due_date),"MMM d")]})]})]},o.id))})})]})}const mk=[{type:"today-time",name:"Today's Hours",description:"Track your daily time logging progress",icon:gt,category:"Time",size:{w:1,h:1}},{type:"time-logged",name:"Monthly Time",description:"Monitor your monthly time tracking progress",icon:gt,category:"Time",size:{w:1,h:1}},{type:"quick-stats",name:"Quick Stats",description:"Key metrics at a glance",icon:no,category:"Overview",size:{w:1,h:1}},{type:"projects-overview",name:"Projects Overview",description:"Status of your active projects",icon:nE,category:"Projects",size:{w:2,h:1}},{type:"recent-activities",name:"Recent Activities",description:"Latest actions and updates",icon:Tc,category:"Overview",size:{w:1,h:1}},{type:"quick-actions",name:"Quick Actions",description:"Fast access to common tasks",icon:iE,category:"Overview",size:{w:1,h:1}},{type:"monthly-expenses",name:"Monthly Expenses",description:"Track your monthly expenses and trends",icon:wn,category:"Finance",size:{w:1,h:1}},{type:"revenue-chart",name:"Revenue Chart",description:"Visual representation of revenue trends",icon:cr,category:"Finance",size:{w:2,h:1}},{type:"cash-flow",name:"Cash Flow",description:"Monitor your cash flow and balance",icon:dV,category:"Finance",size:{w:1,h:1}},{type:"cash-flow-projections",name:"Cash Flow Projections",description:"Forecast future cash flow scenarios",icon:Wi,category:"Finance",size:{w:2,h:1}},{type:"blank-card",name:"Custom Widget",description:"Create your own custom content",icon:Xe,category:"Custom",size:{w:1,h:1}},{type:"yearly-budget-chart",name:"rsbudget vs Faktisk",description:"Bar chart comparing yearly budget to actual spending",icon:no,category:"Finance",size:{w:2,h:1}},{type:"yearly-expense-distribution",name:"rlig Utgiftsfrdelning",description:"Pie chart showing yearly expense distribution",icon:rE,category:"Finance",size:{w:2,h:1}},{type:"payment-sources",name:"Betalningskllor",description:"Overview of payment sources with expense counts",icon:pO,category:"Finance",size:{w:1,h:1}},{type:"uptime-monitor",name:"Uptime Monitor",description:"Monitor website uptime and response times",icon:Tc,category:"Custom",size:{w:2,h:1}},{type:"upcoming-invoices",name:"Ready to Create",description:"Invoices ready to be created in the next 7 days",icon:Lt,category:"Finance",size:{w:1,h:1}},{type:"overdue-invoices",name:"Overdue Invoices",description:"Invoices past their due date that need attention",icon:to,category:"Finance",size:{w:1,h:1}}];function T8({onAddWidget:e,children:t}){const[n,r]=w.useState(!1),i=(u,d)=>{const f=mk.find(p=>p.type===u);if(!f)return;const h={id:Date.now().toString(),type:u,title:f.name,size:d,position:{x:0,y:999,w:d.w,h:d.h}};e(h),r(!1)},s=["All","Overview","Finance","Time","Projects","Custom"],[a,o]=w.useState("All"),c=a==="All"?mk:mk.filter(u=>u.category===a);return l.jsxs(xt,{open:n,onOpenChange:r,children:[l.jsx(IFe,{asChild:!0,children:t}),l.jsxs(ft,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[l.jsxs(ht,{children:[l.jsx(pt,{children:"Add Widget"}),l.jsx(iu,{children:"Choose a widget to add to your dashboard"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(u=>l.jsx(H,{variant:a===u?"default":"outline",size:"sm",onClick:()=>o(u),children:u},u))}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(u=>{const d=u.icon;return l.jsx(Z,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>i(u.type,u.size),children:l.jsx(ee,{className:"p-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:l.jsx(d,{className:"h-5 w-5 text-primary"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-medium text-sm mb-1",children:u.name}),l.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:u.description}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:u.category}),l.jsxs("span",{className:"text-xs text-muted-foreground",children:[u.size.w,"",u.size.h]})]})]})]})})},u.type)})})]})]})]})}function k9e({widgetId:e,widgetTitle:t,onRemove:n,className:r=""}){const[i,s]=w.useState(!1),a=()=>{n(e),s(!1)};return l.jsxs(l.Fragment,{children:[l.jsx(H,{variant:"ghost",size:"icon",className:`h-8 w-8 bg-red-500/10 hover:bg-red-500/20 text-red-600 hover:text-red-700 ${r}`,onClick:()=>s(!0),title:"Remove widget",children:l.jsx(Qn,{className:"h-4 w-4"})}),l.jsx(xt,{open:i,onOpenChange:s,children:l.jsxs(ft,{children:[l.jsxs(ht,{children:[l.jsxs(pt,{className:"flex items-center gap-2",children:[l.jsx(to,{className:"h-5 w-5 text-red-500"}),"Remove Widget"]}),l.jsxs(iu,{children:['Are you sure you want to remove the "',t,'" widget from your dashboard? This action cannot be undone.']})]}),l.jsxs(gp,{children:[l.jsx(H,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),l.jsx(H,{onClick:a,className:"bg-red-600 hover:bg-red-700 focus:ring-red-600",children:"Remove Widget"})]})]})})]})}const C9e={"company-motto":t_e,"monthly-expenses":n_e,"time-logged":r_e,"today-time":i_e,"revenue-chart":e5e,"quick-stats":t5e,"quick-actions":n5e,"recent-activities":r5e,"projects-overview":i5e,"cash-flow":s5e,"cash-flow-projections":a5e,"yearly-budget-chart":l5e,"yearly-expense-distribution":c5e,"payment-sources":RFe,"uptime-monitor":G8e,"upcoming-invoices":N9e,"overdue-invoices":_9e,"blank-card":VJ};function T9e({isDarkMode:e}){const[t,n]=w.useState(!1),{user:r}=jr(),{widgets:i,loading:s,updateWidgets:a,addWidget:o,removeWidget:c,updateWidget:u}=Pxe((r==null?void 0:r.id)||null),d=v=>{c(v)},f=v=>{const y=i.find(b=>b.id===v);if(!y)return;const x=y.size.w===1?2:y.size.w===2?3:1;u(v,{size:{...y.size,w:x},position:{...y.position,w:x}})},h=v=>{if(n(!1),!v.destination)return;const y=Array.from(i),[x]=y.splice(v.source.index,1);y.splice(v.destination.index,0,x);const b=y.map((S,E)=>({...S,position:{...S.position,y:E}}));a(b)},p=v=>{o(v)},m=()=>{n(!0)},g=v=>{switch(v){case 2:return"col-span-1 md:col-span-2";case 3:return"col-span-1 md:col-span-2 lg:col-span-3";default:return"col-span-1"}};return s?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading dashboard..."})]})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"}),l.jsx("p",{className:"text-muted-foreground",children:"Welcome back! Here's what's happening with your business."})]}),l.jsx(T8,{onAddWidget:p,children:l.jsxs(H,{children:[l.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Add Widget"]})})]}),l.jsx(zye,{onDragEnd:h,onDragStart:m,children:l.jsx(HW,{droppableId:"dashboard",children:v=>l.jsxs("div",{...v.droppableProps,ref:v.innerRef,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 auto-rows-min",children:[i.map((y,x)=>{const b=C9e[y.type]||VJ;return l.jsx(_xe,{draggableId:y.id,index:x,children:(S,E)=>l.jsxs("div",{ref:S.innerRef,...S.draggableProps,className:`relative group ${g(y.size.w)} ${E.isDragging?"opacity-70 shadow-2xl z-50":""}`,style:S.draggableProps.style,children:[l.jsxs("div",{className:`absolute top-2 right-2 z-10 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity ${t?"opacity-100":""}`,children:[l.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8 bg-blue-500/10 hover:bg-blue-500/20 text-blue-600 hover:text-blue-700",onClick:()=>f(y.id),title:`Resize widget (currently ${y.size.w===1?"small":y.size.w===2?"medium":"large"})`,children:y.size.w===1?l.jsx(Whe,{className:"h-4 w-4"}):l.jsx(Khe,{className:"h-4 w-4"})}),l.jsx(k9e,{widgetId:y.id,widgetTitle:y.title,onRemove:d}),l.jsx("div",{...S.dragHandleProps,children:l.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Drag to reorder",children:l.jsx(Ahe,{className:"h-4 w-4"})})})]}),l.jsx(b,{widget:y,isDarkMode:e})]})},y.id)}),v.placeholder]})})}),i.length===0&&l.jsx(Z,{className:"border-dashed border-2",children:l.jsx(ee,{className:"flex items-center justify-center py-12",children:l.jsxs("div",{className:"text-center space-y-4",children:[l.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mx-auto",children:l.jsx(Xe,{className:"h-8 w-8 text-muted-foreground"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium mb-1",children:"No widgets yet"}),l.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Get started by adding your first widget to the dashboard"}),l.jsx(T8,{onAddWidget:p,children:l.jsxs(H,{children:[l.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Add Your First Widget"]})})]})]})})})]})}function A9e({isDarkMode:e}){return l.jsx(T9e,{isDarkMode:e})}function j9e({isDarkMode:e,onTimeLogged:t,shouldFocus:n}){const{projects:r}=er(),{clients:i}=Tn(),{createTimeEntry:s}=li(),[a,o]=w.useState(""),[c,u]=w.useState(""),[d,f]=w.useState(""),[h,p]=w.useState(new Date().toISOString().split("T")[0]),[m,g]=w.useState(!1),[v,y]=w.useState(!1),x=w.useRef(null);w.useEffect(()=>{n&&x.current&&x.current.focus()},[n]);const b=async _=>{if(_.preventDefault(),!a||!c||v)return;y(!0);const{error:k}=await s({date:h,hours:parseFloat(a),project_id:c,comment:d.trim()||void 0});k||(o(""),f(""),t==null||t()),y(!1)},S=_=>{const k=new Date(_+"T00:00:00"),T=new Date().toISOString().split("T")[0];return _===T?"Today":k.toLocaleDateString("sv-SE",{weekday:"short",month:"short",day:"numeric"})},E=r.filter(_=>_.status==="active"),N=_=>i.find(T=>T.id===_.client_id);return l.jsxs("div",{className:`rounded-xl shadow-sm border p-6 transition-colors duration-200 ${e?"bg-slate-800 border-slate-700":"bg-white border-slate-200"}`,children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:`p-2 rounded-lg ${e?"bg-blue-900":"bg-blue-100"}`,children:l.jsx(gt,{className:`w-5 h-5 ${e?"text-blue-400":"text-blue-600"}`})}),l.jsx("h2",{className:`text-xl font-semibold ${e?"text-white":"text-slate-900"}`,children:"Log Today's Time"})]}),l.jsxs("form",{onSubmit:b,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-slate-300":"text-slate-700"}`,children:"Date"}),l.jsxs("div",{className:"relative",children:[l.jsx("button",{type:"button",onClick:()=>g(!m),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent flex items-center justify-between transition-colors duration-200 ${e?"bg-slate-700 border-slate-600 text-white":"bg-white border-slate-300 text-slate-900"}`,children:l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(Lt,{className:`w-4 h-4 ${e?"text-slate-400":"text-slate-500"}`}),S(h)]})}),m&&l.jsx("div",{className:`absolute top-full left-0 right-0 mt-1 border rounded-lg shadow-lg z-10 transition-colors duration-200 ${e?"bg-slate-700 border-slate-600":"bg-white border-slate-300"}`,children:l.jsx("input",{type:"date",value:h,onChange:_=>{p(_.target.value),g(!1)},"aria-label":"Select date for time entry",className:`w-full px-3 py-2 border-0 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-slate-700 text-white":"bg-white text-slate-900"}`})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-slate-300":"text-slate-700"}`,children:"Hours"}),l.jsx("input",{ref:x,type:"number",step:"0.25",min:"0",max:"24",value:a,onChange:_=>o(_.target.value),placeholder:"0.0",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 ${e?"bg-slate-700 border-slate-600 text-white placeholder-slate-400":"bg-white border-slate-300 text-slate-900 placeholder-slate-500"}`,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-slate-300":"text-slate-700"}`,children:"Project"}),l.jsxs("select",{value:c,onChange:_=>u(_.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 ${e?"bg-slate-700 border-slate-600 text-white":"bg-white border-slate-300 text-slate-900"}`,required:!0,"aria-label":"Select project",children:[l.jsx("option",{value:"",children:"Select project"}),E.map(_=>{const k=N(_);return l.jsxs("option",{value:_.id,children:[_.name," ",k?`- ${k.name}${k.company?` (${k.company})`:""}`:""]},_.id)})]}),E.length===0&&l.jsxs("p",{className:`text-sm mt-1 ${e?"text-slate-400":"text-slate-500"}`,children:["No active projects available. ",l.jsx("a",{href:"/projects",className:"text-blue-500 hover:underline",children:"Create a project"})," to start tracking time."]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-slate-300":"text-slate-700"}`,children:"Comment (Optional)"}),l.jsx("textarea",{value:d,onChange:_=>f(_.target.value),placeholder:"Add any notes about this time entry...",rows:3,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none transition-colors duration-200 ${e?"bg-slate-700 border-slate-600 text-white placeholder-slate-400":"bg-white border-slate-300 text-slate-900 placeholder-slate-500"}`})]}),l.jsx("button",{type:"submit",disabled:v,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2.5 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2","data-testid":"log-time-btn",children:v?l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):l.jsxs(l.Fragment,{children:[l.jsx(Xe,{className:"w-4 h-4"}),"Log Time"]})})]})]})}function O9e({isDarkMode:e}){const{entries:t}=li(),{clients:n}=Tn(),r=new Date().toISOString().split("T")[0],i=t.filter(c=>c.date===r),s=i.reduce((c,u)=>c+u.hours,0),a=c=>new Date(c+"T00:00:00").toLocaleDateString("sv-SE",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=c=>n.find(u=>u.id===c);return l.jsxs("div",{className:`rounded-xl shadow-sm border p-6 transition-colors duration-200 ${e?"bg-slate-800 border-slate-700":"bg-white border-slate-200"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`p-2 rounded-lg ${e?"bg-green-900":"bg-green-100"}`,children:l.jsx(Lt,{className:`w-5 h-5 ${e?"text-green-400":"text-green-600"}`})}),l.jsxs("div",{children:[l.jsx("h2",{className:`text-xl font-semibold ${e?"text-white":"text-slate-900"}`,children:"Today's Summary"}),l.jsx("p",{className:`text-sm ${e?"text-slate-400":"text-slate-600"}`,children:a(r)})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:`flex items-center gap-2 text-2xl font-bold ${e?"text-white":"text-slate-900"}`,children:[l.jsx(gt,{className:`w-6 h-6 ${e?"text-blue-400":"text-blue-600"}`}),s.toFixed(1),"h"]}),l.jsxs("p",{className:`text-sm ${e?"text-slate-400":"text-slate-600"}`,children:[i.length," entries"]})]})]}),i.length===0?l.jsxs("div",{className:`text-center py-8 ${e?"text-slate-400":"text-slate-500"}`,children:[l.jsx(gt,{className:`w-12 h-12 mx-auto mb-3 ${e?"text-slate-600":"text-slate-300"}`}),l.jsx("p",{children:"No time logged today yet"})]}):l.jsx("div",{className:"space-y-3",children:i.map(c=>{var d,f,h;const u=o((d=c.project)==null?void 0:d.client_id);return l.jsxs("div",{className:`flex items-center gap-4 p-3 rounded-lg transition-colors duration-200 ${e?"bg-slate-700":"bg-slate-50"}`,children:[l.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:((f=c.project)==null?void 0:f.color)||"#64748B"}}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:`font-medium ${e?"text-white":"text-slate-900"}`,children:(h=c.project)==null?void 0:h.name}),u&&l.jsxs("div",{className:`flex items-center gap-1 text-xs ${e?"text-slate-400":"text-slate-600"}`,children:[l.jsx(Ei,{className:"w-3 h-3"}),l.jsxs("span",{children:[u.name,u.company?` (${u.company})`:""]})]}),c.comment&&l.jsx("p",{className:`text-sm truncate ${e?"text-slate-400":"text-slate-600"}`,children:c.comment})]}),l.jsxs("div",{className:`font-medium ${e?"text-white":"text-slate-900"}`,children:[c.hours,"h"]})]},c.id)})})]})}function P9e({isDarkMode:e}){const{entries:t}=li(),{projects:n}=er(),{clients:r}=Tn(),[i,s]=w.useState(""),[a,o]=w.useState(""),c=t.filter(p=>{var y,x;const m=r.find(b=>{var S;return b.id===((S=p.project)==null?void 0:S.client_id)}),g=!i||((y=p.project)==null?void 0:y.name.toLowerCase().includes(i.toLowerCase()))||(m==null?void 0:m.name.toLowerCase().includes(i.toLowerCase()))||((x=m==null?void 0:m.company)==null?void 0:x.toLowerCase().includes(i.toLowerCase()))||p.comment&&p.comment.toLowerCase().includes(i.toLowerCase()),v=!a||p.project_id===a;return g&&v}),u=c.reduce((p,m)=>p+m.hours,0),d=p=>new Date(p+"T00:00:00").toLocaleDateString("sv-SE",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),f=p=>r.find(m=>m.id===p),h=[...c].sort((p,m)=>new Date(m.date).getTime()-new Date(p.date).getTime());return l.jsxs("div",{className:`rounded-xl shadow-sm border p-6 transition-colors duration-200 ${e?"bg-slate-800 border-slate-700":"bg-white border-slate-200"}`,children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:`p-2 rounded-lg ${e?"bg-purple-900":"bg-purple-100"}`,children:l.jsx(SO,{className:`w-5 h-5 ${e?"text-purple-400":"text-purple-600"}`})}),l.jsxs("div",{children:[l.jsx("h2",{className:`text-xl font-semibold ${e?"text-white":"text-slate-900"}`,children:"Time Entries"}),l.jsxs("p",{className:`text-sm ${e?"text-slate-400":"text-slate-600"}`,children:[c.length," entries  ",u.toFixed(1)," hours total"]})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(Jh,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${e?"text-slate-500":"text-slate-400"}`}),l.jsx("input",{type:"text",placeholder:"Search projects or comments...",value:i,onChange:p=>s(p.target.value),className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 ${e?"bg-slate-700 border-slate-600 text-white placeholder-slate-400":"bg-white border-slate-300 text-slate-900 placeholder-slate-500"}`})]}),l.jsxs("select",{value:a,onChange:p=>o(p.target.value),"aria-label":"Filter by project",className:`px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 ${e?"bg-slate-700 border-slate-600 text-white":"bg-white border-slate-300 text-slate-900"}`,children:[l.jsx("option",{value:"",children:"All projects"}),n.map(p=>{const m=f(p.client_id);return l.jsxs("option",{value:p.id,children:[p.name," ",m?`- ${m.name}`:""]},p.id)})]})]}),h.length===0?l.jsxs("div",{className:`text-center py-12 ${e?"text-slate-400":"text-slate-500"}`,children:[l.jsx(Lt,{className:`w-12 h-12 mx-auto mb-3 ${e?"text-slate-600":"text-slate-300"}`}),l.jsx("p",{children:"No time entries found"})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:`border-b ${e?"border-slate-600":"border-slate-200"}`,children:[l.jsx("th",{className:`text-left py-3 px-4 font-medium ${e?"text-slate-300":"text-slate-700"}`,children:"Date"}),l.jsx("th",{className:`text-left py-3 px-4 font-medium ${e?"text-slate-300":"text-slate-700"}`,children:"Project"}),l.jsx("th",{className:`text-left py-3 px-4 font-medium ${e?"text-slate-300":"text-slate-700"}`,children:"Client"}),l.jsx("th",{className:`text-left py-3 px-4 font-medium ${e?"text-slate-300":"text-slate-700"}`,children:"Hours"}),l.jsx("th",{className:`text-left py-3 px-4 font-medium ${e?"text-slate-300":"text-slate-700"}`,children:"Comment"})]})}),l.jsx("tbody",{children:h.map(p=>{var g,v,y;const m=f((g=p.project)==null?void 0:g.client_id);return l.jsxs("tr",{className:`border-b transition-colors duration-150 ${e?"border-slate-700 hover:bg-slate-700":"border-slate-100 hover:bg-slate-50"}`,children:[l.jsx("td",{className:`py-3 px-4 ${e?"text-white":"text-slate-900"}`,children:d(p.date)}),l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:((v=p.project)==null?void 0:v.color)||"#64748B"}}),l.jsx("span",{className:e?"text-white":"text-slate-900",children:(y=p.project)==null?void 0:y.name})]})}),l.jsx("td",{className:`py-3 px-4 ${e?"text-slate-300":"text-slate-600"}`,children:m?l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Ei,{className:"w-3 h-3"}),l.jsx("span",{children:m.name}),m.company&&l.jsxs("span",{className:"text-xs",children:["(",m.company,")"]})]}):"-"}),l.jsxs("td",{className:`py-3 px-4 font-medium ${e?"text-white":"text-slate-900"}`,children:[p.hours,"h"]}),l.jsx("td",{className:`py-3 px-4 ${e?"text-slate-400":"text-slate-600"}`,children:p.comment||"-"})]},p.id)})})]})})]})}function I9e({isDarkMode:e}){const{entries:t}=li(),{projects:n}=er(),[r,i]=w.useState(""),[s,a]=w.useState(""),[o,c]=w.useState(""),u=t.filter(y=>{const x=new Date(y.date),b=r?new Date(r):null,S=s?new Date(s):null,E=(!b||x>=b)&&(!S||x<=S),N=!o||y.project_id===o;return E&&N}),d=u.reduce((y,x)=>y+x.hours,0),f=u.length>0?d/new Set(u.map(y=>y.date)).size:0,h=new Set(u.map(y=>y.date)).size,p=u.reduce((y,x)=>{var S,E;const b=((S=x.project)==null?void 0:S.name)||"Unknown";return y[b]||(y[b]={hours:0,color:((E=x.project)==null?void 0:E.color)||"#64748B"}),y[b].hours+=x.hours,y},{}),m=u.reduce((y,x)=>{const b=x.date.substring(0,7);return y[b]||(y[b]=0),y[b]+=x.hours,y},{}),g=y=>{const[x,b]=y.split("-");return new Date(parseInt(x),parseInt(b)-1).toLocaleDateString("sv-SE",{month:"long",year:"numeric"})},v=()=>!r&&!s?"All time":r&&!s?`From ${new Date(r).toLocaleDateString("sv-SE")}`:!r&&s?`Until ${new Date(s).toLocaleDateString("sv-SE")}`:`${new Date(r).toLocaleDateString("sv-SE")} - ${new Date(s).toLocaleDateString("sv-SE")}`;return l.jsxs("div",{className:`rounded-xl shadow-sm border p-6 transition-colors duration-200 ${e?"bg-slate-800 border-slate-700":"bg-white border-slate-200"}`,children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:`p-2 rounded-lg ${e?"bg-orange-900":"bg-orange-100"}`,children:l.jsx(en,{className:`w-5 h-5 ${e?"text-orange-400":"text-orange-600"}`})}),l.jsxs("div",{children:[l.jsx("h2",{className:`text-xl font-semibold ${e?"text-white":"text-slate-900"}`,children:"Summary"}),l.jsx("p",{className:`text-sm ${e?"text-slate-400":"text-slate-600"}`,children:v()})]})]}),l.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 p-4 rounded-lg transition-colors duration-200 ${e?"bg-slate-700":"bg-slate-50"}`,children:[l.jsxs("div",{children:[l.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-slate-300":"text-slate-700"}`,children:"Start Date"}),l.jsx("input",{type:"date",value:r,onChange:y=>i(y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 ${e?"bg-slate-600 border-slate-500 text-white":"bg-white border-slate-300 text-slate-900"}`})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-slate-300":"text-slate-700"}`,children:"End Date"}),l.jsx("input",{type:"date",value:s,onChange:y=>a(y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 ${e?"bg-slate-600 border-slate-500 text-white":"bg-white border-slate-300 text-slate-900"}`})]}),l.jsxs("div",{children:[l.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-slate-300":"text-slate-700"}`,children:"Project Filter"}),l.jsxs("select",{value:o,onChange:y=>c(y.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 ${e?"bg-slate-600 border-slate-500 text-white":"bg-white border-slate-300 text-slate-900"}`,children:[l.jsx("option",{value:"",children:"All projects"}),n.map(y=>l.jsx("option",{value:y.id,children:y.name},y.id))]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[l.jsxs("div",{className:`rounded-lg p-4 transition-colors duration-200 ${e?"bg-blue-900":"bg-blue-50"}`,children:[l.jsxs("div",{className:`text-2xl font-bold ${e?"text-blue-400":"text-blue-600"}`,children:[d.toFixed(1),"h"]}),l.jsx("div",{className:`text-sm ${e?"text-blue-400":"text-blue-600"}`,children:"Total Hours"})]}),l.jsxs("div",{className:`rounded-lg p-4 transition-colors duration-200 ${e?"bg-green-900":"bg-green-50"}`,children:[l.jsx("div",{className:`text-2xl font-bold ${e?"text-green-400":"text-green-600"}`,children:u.length}),l.jsx("div",{className:`text-sm ${e?"text-green-400":"text-green-600"}`,children:"Total Entries"})]}),l.jsxs("div",{className:`rounded-lg p-4 transition-colors duration-200 ${e?"bg-purple-900":"bg-purple-50"}`,children:[l.jsx("div",{className:`text-2xl font-bold ${e?"text-purple-400":"text-purple-600"}`,children:h}),l.jsx("div",{className:`text-sm ${e?"text-purple-400":"text-purple-600"}`,children:"Days Worked"})]}),l.jsxs("div",{className:`rounded-lg p-4 transition-colors duration-200 ${e?"bg-orange-900":"bg-orange-50"}`,children:[l.jsxs("div",{className:`text-2xl font-bold ${e?"text-orange-400":"text-orange-600"}`,children:[f.toFixed(1),"h"]}),l.jsx("div",{className:`text-sm ${e?"text-orange-400":"text-orange-600"}`,children:"Avg. Hours/Day"})]})]}),Object.keys(p).length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:`text-lg font-semibold mb-3 ${e?"text-white":"text-slate-900"}`,children:"Hours by Project"}),l.jsx("div",{className:"space-y-3",children:Object.entries(p).sort(([,y],[,x])=>x.hours-y.hours).map(([y,x])=>l.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg transition-colors duration-200 ${e?"bg-slate-700":"bg-slate-50"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:x.color}}),l.jsx("span",{className:`font-medium ${e?"text-white":"text-slate-900"}`,children:y})]}),l.jsxs("div",{className:`font-semibold ${e?"text-white":"text-slate-900"}`,children:[x.hours.toFixed(1),"h"]})]},y))})]}),Object.keys(m).length>0&&l.jsxs("div",{children:[l.jsx("h3",{className:`text-lg font-semibold mb-3 ${e?"text-white":"text-slate-900"}`,children:"Hours by Month"}),l.jsx("div",{className:"space-y-3",children:Object.entries(m).sort(([y],[x])=>x.localeCompare(y)).map(([y,x])=>l.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg transition-colors duration-200 ${e?"bg-slate-700":"bg-slate-50"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Lt,{className:`w-4 h-4 ${e?"text-slate-400":"text-slate-500"}`}),l.jsx("span",{className:`font-medium ${e?"text-white":"text-slate-900"}`,children:g(y)})]}),l.jsxs("div",{className:`font-semibold ${e?"text-white":"text-slate-900"}`,children:[x.toFixed(1),"h"]})]},y))})]}),u.length===0&&l.jsxs("div",{className:`text-center py-8 ${e?"text-slate-400":"text-slate-500"}`,children:[l.jsx(gO,{className:`w-12 h-12 mx-auto mb-3 ${e?"text-slate-600":"text-slate-300"}`}),l.jsx("p",{children:"No entries found for the selected filters"})]})]})}function D9e({currentDate:e,onDateChange:t,isDarkMode:n}){const{entries:r}=li(),i=(f,h)=>new Date(f,h+1,0).getDate(),s=(f,h)=>new Date(f,h,1).getDay(),a=(f,h)=>{const p=i(f,h),m=s(f,h),g=[];for(let v=0;v<m;v++)g.push(null);for(let v=1;v<=p;v++){const y=`${f}-${String(h+1).padStart(2,"0")}-${String(v).padStart(2,"0")}`,x=r.filter(S=>S.date===y),b=x.reduce((S,E)=>S+E.hours,0);g.push({day:v,dateStr:y,entries:x,totalHours:b})}return g},o=f=>{const h=new Date(e);h.setMonth(h.getMonth()+(f==="next"?3:-3)),t(h)},c=[];for(let f=0;f<3;f++){const h=new Date(e.getFullYear(),e.getMonth()+f,1);c.push(h)}const u=f=>f.toLocaleDateString("sv-SE",{month:"long",year:"numeric"}),d=f=>`Q${Math.floor(f.getMonth()/3)+1} ${f.getFullYear()}`;return l.jsxs("div",{className:`rounded-xl shadow-sm border p-6 transition-colors duration-200 ${n?"bg-slate-800 border-slate-700":"bg-white border-slate-200"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h2",{className:`text-xl font-semibold ${n?"text-white":"text-slate-900"}`,children:["Quarter Overview - ",d(e)]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>o("prev"),title:"Previous quarter",className:`p-2 rounded-lg transition-colors duration-200 ${n?"hover:bg-slate-700 text-slate-400":"hover:bg-slate-100 text-slate-600"}`,children:l.jsx(uO,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>o("next"),title:"Next quarter",className:`p-2 rounded-lg transition-colors duration-200 ${n?"hover:bg-slate-700 text-slate-400":"hover:bg-slate-100 text-slate-600"}`,children:l.jsx(dO,{className:"w-5 h-5"})})]})]}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:c.map((f,h)=>{const p=a(f.getFullYear(),f.getMonth());return l.jsxs("div",{className:"space-y-3",children:[l.jsx("h3",{className:`font-semibold text-center ${n?"text-white":"text-slate-900"}`,children:u(f)}),l.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["Su","Mo","Tu","We","Th","Fr","Sa"].map(m=>l.jsx("div",{className:`text-xs font-medium text-center py-2 ${n?"text-slate-400":"text-slate-500"}`,children:m},m)),p.map((m,g)=>l.jsx("div",{className:"aspect-square",children:m?l.jsxs("div",{className:`w-full h-full rounded-lg border p-1 flex flex-col justify-between text-xs ${m.totalHours>0?n?"bg-blue-900 border-blue-700":"bg-blue-50 border-blue-200":n?"bg-slate-700 border-slate-600":"bg-white border-slate-200"}`,children:[l.jsx("div",{className:`font-medium ${n?"text-white":"text-slate-900"}`,children:m.day}),m.totalHours>0&&l.jsxs("div",{className:`font-medium ${n?"text-blue-400":"text-blue-600"}`,children:[m.totalHours,"h"]})]}):l.jsx("div",{})},g))]})]},h)})})]})}function M9e({isDarkMode:e}){const[t,n]=w.useState("daily"),[r,i]=w.useState(new Date),[s,a]=w.useState(!1),{refetch:o,loading:c}=li(),u=Xh(),d=w.useCallback(async()=>{await o()},[o]),f=w.useCallback(()=>{},[]);w.useEffect(()=>{u.timeModalOpen&&(n("daily"),a(!0),u.setTimeModalOpen(!1),setTimeout(()=>a(!1),1e3))},[u.timeModalOpen,u]);const h=[{id:"daily",label:"Daily View",icon:gt,description:"Log time and view today's summary"},{id:"summary",label:"Summary & Filters",icon:no,description:"Overview with date filters and project breakdown"},{id:"quarterly",label:"Quarterly View",icon:Lt,description:"Calendar view by quarters"},{id:"table",label:"All Entries",icon:SO,description:"Detailed table of all time entries"}];return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Time Tracking"}),l.jsx("p",{className:"text-muted-foreground",children:"Log your hours and track your productivity"})]}),l.jsxs("button",{onClick:d,disabled:c,className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors duration-200 ${e?"bg-slate-800 border-slate-700 text-slate-300 hover:bg-slate-700":"bg-white border-slate-300 text-slate-700 hover:bg-slate-50"} ${c?"opacity-50 cursor-not-allowed":""}`,children:[l.jsx(yC,{className:`w-4 h-4 ${c?"animate-spin":""}`}),"Refresh"]})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(p=>{const m=p.icon,g=t===p.id;return l.jsxs("button",{onClick:()=>n(p.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors duration-200 ${g?e?"bg-blue-900 border-blue-700 text-blue-300":"bg-blue-50 border-blue-300 text-blue-700":e?"bg-slate-800 border-slate-700 text-slate-300 hover:bg-slate-700":"bg-white border-slate-300 text-slate-700 hover:bg-slate-50"}`,title:p.description,children:[l.jsx(m,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:p.label})]},p.id)})}),t==="daily"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsx("div",{className:"lg:col-span-1",children:l.jsxs(Z,{children:[l.jsx(de,{children:l.jsx(he,{children:"Log Time"})}),l.jsx(ee,{children:l.jsx(j9e,{isDarkMode:e,onTimeLogged:f,shouldFocus:s})})]})}),l.jsx("div",{className:"lg:col-span-2",children:l.jsxs(Z,{children:[l.jsx(de,{children:l.jsx(he,{children:"Today's Summary"})}),l.jsx(ee,{children:l.jsx(O9e,{isDarkMode:e})})]})})]}),t==="summary"&&l.jsx(I9e,{isDarkMode:e}),t==="quarterly"&&l.jsx(D9e,{currentDate:r,onDateChange:i,isDarkMode:e}),t==="table"&&l.jsxs(Z,{children:[l.jsx(de,{children:l.jsx(he,{children:"All Time Entries"})}),l.jsx(ee,{children:l.jsx(P9e,{isDarkMode:e})})]})]})}function R9e({totals:e,getCurrentMonthName:t,getCurrentYear:n}){return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsxs(Z,{children:[l.jsx(de,{className:"pb-2",children:l.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(wn,{className:"h-4 w-4"}),"Mnadsbudget (budgeterad)"]})}),l.jsxs(ee,{children:[l.jsx("div",{className:"text-2xl font-bold",children:ue(e.monthly.budget)}),l.jsx("p",{className:"text-xs text-muted-foreground",children:t()})]})]}),l.jsxs(Z,{children:[l.jsx(de,{className:"pb-2",children:l.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(cr,{className:"h-4 w-4"}),"Faktiska kostnader (mnad)"]})}),l.jsxs(ee,{children:[l.jsx("div",{className:"text-2xl font-bold",children:ue(e.monthly.spent)}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.monthly.percentage.toFixed(1),"% av budget"]}),l.jsx("div",{className:"w-full bg-muted rounded-full h-2 mt-2",children:l.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(e.monthly.percentage,100)}%`}})})]})]}),l.jsxs(Z,{children:[l.jsx(de,{className:"pb-2",children:l.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(Wi,{className:"h-4 w-4"}),"rsbudget (budgeterad)"]})}),l.jsxs(ee,{children:[l.jsx("div",{className:"text-2xl font-bold",children:ue(e.annual.budget)}),l.jsx("p",{className:"text-xs text-muted-foreground",children:n()})]})]}),l.jsxs(Z,{children:[l.jsx(de,{className:"pb-2",children:l.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(sV,{className:"h-4 w-4"}),"Faktiska rrliga kostnader"]})}),l.jsxs(ee,{children:[l.jsxs("div",{className:"text-2xl font-bold",children:[e.annual.completed,"/",e.annual.completed+e.annual.overdue]}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.annual.overdue>0&&l.jsxs("span",{className:"text-red-500",children:[e.annual.overdue," frsenade"]}),e.annual.overdue===0&&"Inga frsenade"]})]})]})]})}function L9e({chartData:e,pieData:t,annualItems:n,isDarkMode:r}){if(e.length===0&&n.length===0)return null;const i=n.map(a=>({name:a.name.length>12?a.name.substring(0,12)+"...":a.name,fullName:a.name,budgeted:a.budgeted,spent:a.spent,remaining:Math.max(0,a.budgeted-a.spent)})),s=n.filter(a=>a.spent>0).map(a=>({name:a.name,value:a.spent,color:a.color}));return l.jsxs("div",{className:"space-y-8",children:[e.length>0&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(Z,{children:[l.jsx(de,{children:l.jsx(he,{children:"Mnadsbudget vs Faktisk"})}),l.jsx(ee,{children:l.jsx("div",{className:"h-64",children:l.jsx(Bi,{width:"100%",height:"100%",children:l.jsxs(x1,{data:e,children:[l.jsx(Ca,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:r?"#94a3b8":"#64748b"}}),l.jsx(Ta,{hide:!0}),l.jsx(Vs,{formatter:a=>[ue(a),""],labelStyle:{color:r?"#fff":"#000"},contentStyle:{backgroundColor:r?"#1e293b":"#fff",border:r?"1px solid #334155":"1px solid #e2e8f0",borderRadius:"6px"}}),l.jsx(Qa,{dataKey:"budgeted",fill:"#e2e8f0",name:"Budget"}),l.jsx(Qa,{dataKey:"spent",fill:"#2563eb",name:"Spenderat"})]})})})})]}),l.jsxs(Z,{children:[l.jsx(de,{children:l.jsx(he,{children:"Utgiftsfrdelning"})}),l.jsx(ee,{children:l.jsx("div",{className:"h-64",children:t.length>0?l.jsx(Bi,{width:"100%",height:"100%",children:l.jsxs(r0,{children:[l.jsx(Ph,{data:t,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,dataKey:"value",children:t.map((a,o)=>l.jsx(ul,{fill:a.color},`cell-${o}`))}),l.jsx(Vs,{formatter:a=>[ue(a),"Spenderat"],labelStyle:{color:r?"#fff":"#000"},contentStyle:{backgroundColor:r?"#1e293b":"#fff",border:r?"1px solid #334155":"1px solid #e2e8f0",borderRadius:"6px"}})]})}):l.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Inga utgifter att visa n"})})})]})]}),n.length>0&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(Z,{children:[l.jsx(de,{children:l.jsx(he,{children:"rsbudget vs Faktisk"})}),l.jsx(ee,{children:l.jsx("div",{className:"h-64",children:i.length>0?l.jsx(Bi,{width:"100%",height:"100%",children:l.jsxs(x1,{data:i,margin:{top:5,right:5,left:5,bottom:5},children:[l.jsx(Ca,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:r?"#94a3b8":"#64748b"}}),l.jsx(Ta,{hide:!0}),l.jsx(Vs,{formatter:(a,o)=>[ue(a),o==="budgeted"?"Budget":o==="spent"?"Spenderat":"terstr"],labelFormatter:a=>{const o=i.find(c=>c.name===a);return(o==null?void 0:o.fullName)||a},labelStyle:{color:r?"#fff":"#000"},contentStyle:{backgroundColor:r?"#1e293b":"#fff",border:r?"1px solid #334155":"1px solid #e2e8f0",borderRadius:"6px"}}),l.jsx(iv,{wrapperStyle:{fontSize:"12px"},iconType:"rect"}),l.jsx(Qa,{dataKey:"budgeted",fill:r?"#475569":"#e2e8f0",name:"Budget",radius:[2,2,0,0]}),l.jsx(Qa,{dataKey:"spent",fill:r?"#3b82f6":"#2563eb",name:"Spenderat",radius:[2,2,0,0]})]})}):l.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Inga rliga budgetposter att visa"})})})]}),l.jsxs(Z,{children:[l.jsx(de,{children:l.jsx(he,{children:"rlig Utgiftsfrdelning"})}),l.jsx(ee,{children:l.jsx("div",{className:"h-64",children:s.length>0?l.jsx(Bi,{width:"100%",height:"100%",children:l.jsxs(r0,{children:[l.jsx(Ph,{data:s,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,dataKey:"value",children:s.map((a,o)=>l.jsx(ul,{fill:a.color},`yearly-cell-${o}`))}),l.jsx(Vs,{formatter:a=>[ue(a),"Spenderat"],labelStyle:{color:r?"#fff":"#000"},contentStyle:{backgroundColor:r?"#1e293b":"#fff",border:r?"1px solid #334155":"1px solid #e2e8f0",borderRadius:"6px"}})]})}):l.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Inga rliga utgifter att visa n"})})})]})]})]})}function Yee({percentage:e,isOverBudget:t=!1,className:n}){const r=Math.min(e,100);return l.jsx("div",{className:Re("w-full bg-gray-200 rounded-full h-2",n),children:l.jsx("div",{className:Re("h-2 rounded-full transition-all duration-300",t?"bg-red-500":"bg-green-500"),style:{width:`${r}%`}})})}function F9e({categories:e,onViewDetails:t,onAddExpense:n,onEditCategory:r,onDeleteCategory:i}){return e.length===0?null:l.jsxs(Z,{children:[l.jsx(de,{children:l.jsx(he,{children:"Budget (mnadsvis)"})}),l.jsx(ee,{children:l.jsx("div",{className:"space-y-4",children:e.map(s=>{const a=s.budgeted>0?s.spent/s.budgeted*100:0,o=s.spent>s.budgeted;return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-3 h-3 rounded-full","data-color":s.color}),l.jsx("span",{className:"font-medium",children:s.name})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(H,{variant:"outline",size:"sm",onClick:()=>t(s),className:"h-8",children:[l.jsx(Hi,{className:"h-4 w-4 mr-1"}),"Detaljer"]}),l.jsxs(H,{variant:"outline",size:"sm",onClick:()=>n(s),className:"h-8","data-testid":"add-expense-btn",children:[l.jsx(Js,{className:"h-4 w-4 mr-1"}),"Lgg till"]}),l.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>r(s),children:l.jsx(uo,{className:"h-4 w-4"})}),l.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>i(s),children:l.jsx(lr,{className:"h-4 w-4"})})]})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsxs("span",{className:"text-muted-foreground",children:[ue(s.spent)," / ",ue(s.budgeted)]}),l.jsxs("span",{className:o?"text-red-500":"text-muted-foreground",children:[a.toFixed(1),"%"]})]}),l.jsx(Yee,{percentage:a,isOverBudget:o})]},s.id)})})})]})}function B9e({annualItems:e,getCurrentYear:t,onAddExpense:n,onDeleteItem:r,onViewDetails:i,onEditItem:s}){return e.length===0?null:l.jsxs(Z,{children:[l.jsx(de,{children:l.jsxs(he,{className:"flex items-center gap-2",children:[l.jsx(Wi,{className:"h-5 w-5"}),"Budget (rsbas)"]})}),l.jsx(ee,{children:l.jsx("div",{className:"space-y-4",children:e.map(a=>{const o=a.budgeted>0?a.spent/a.budgeted*100:0,c=a.status==="completed",u=a.status==="overdue";return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.color}}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:a.name}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Mlmndag: ",new Date(a.targetDate).toLocaleDateString("sv-SE"),c&&l.jsx("span",{className:"text-green-600 ml-2",children:" Genomfrd"}),u&&l.jsx("span",{className:"text-red-600 ml-2",children:" Frsenad"})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[i&&l.jsx(H,{variant:"outline",size:"sm",onClick:()=>i(a),className:"h-8",children:"Detaljer"}),s&&l.jsx(H,{variant:"outline",size:"sm",onClick:()=>s(a),className:"h-8",children:"Redigera"}),l.jsxs(H,{variant:"outline",size:"sm",onClick:()=>n(a),className:"h-8",disabled:c,children:[l.jsx(Js,{className:"h-4 w-4 mr-1"}),"Lgg till utgift"]}),l.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>r(a),children:l.jsx(lr,{className:"h-4 w-4"})})]})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsxs("span",{className:"text-muted-foreground",children:[ue(a.spent)," / ",ue(a.budgeted)]}),l.jsxs("span",{className:c?"text-green-600":u?"text-red-500":"text-muted-foreground",children:[o.toFixed(1),"%"]})]}),l.jsx(Yee,{percentage:o,isOverBudget:!1,className:c?"bg-green-100":u?"bg-red-100":""})]},a.id)})})})]})}function $9e({onAddCategory:e,onAddAnnualItem:t}){return l.jsx(Z,{children:l.jsxs(ee,{className:"text-center py-12",children:[l.jsx(rE,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Ingen budget n"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"Skapa din frsta budgetkategori eller rliga post fr att brja spra utgifter"}),l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg mt-4 text-sm",children:[l.jsx("p",{className:"font-medium mb-2",children:" S fungerar det:"}),l.jsxs("ul",{className:"text-left space-y-1 text-muted-foreground",children:[l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Mnadskategorier:"})," terkommande utgifter (mat, transport, hyra)"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"rliga poster:"})," Engngsutgifter (konferenser, utrustning, resor)"]}),l.jsx("li",{children:" Allt syns automatiskt i Cash Flow fr helhetsbild"})]})]}),l.jsxs("div",{className:"flex gap-2 justify-center mt-4",children:[l.jsxs(H,{variant:"outline",onClick:t,children:[l.jsx(Xe,{className:"h-4 w-4 mr-2"}),"rlig post"]}),l.jsxs(H,{onClick:e,children:[l.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Mnadskategori"]})]})]})})}function U9e({categories:e,annualItems:t,totals:n,chartData:r,pieData:i,isDarkMode:s,getCurrentMonthName:a,getCurrentYear:o,getCategoryEntries:c,onViewDetails:u,onAddExpense:d,onEditCategory:f,onDeleteCategory:h,onDeleteItem:p,onAddCategory:m,onAddAnnualItem:g,onViewAnnualDetails:v,onEditAnnualItem:y}){console.log(" Rendering OVERVIEW");const x=e.length>0||t.length>0;return l.jsxs("div",{className:"space-y-6",children:[l.jsx(Z,{className:"bg-blue-50 dark:bg-blue-950 border-blue-200 dark:border-blue-800",children:l.jsx(ee,{className:"py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Lt,{className:"h-5 w-5 text-blue-600"}),l.jsx("span",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Spra utgifter mot dina budgetml"})]}),l.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.length," mnadskategorier  ",t.length," rliga poster"]})]})})}),x?l.jsxs(l.Fragment,{children:[l.jsx(R9e,{totals:n,getCurrentMonthName:a,getCurrentYear:o}),l.jsx(L9e,{chartData:r,pieData:i,annualItems:t,isDarkMode:s}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.length>0&&l.jsx("div",{className:"min-w-0",children:l.jsx(F9e,{categories:e,onViewDetails:u,onAddExpense:d,onEditCategory:f,onDeleteCategory:h})}),t.length>0&&l.jsx("div",{className:"min-w-0",children:l.jsx(B9e,{annualItems:t,getCurrentYear:o,onAddExpense:d,onDeleteItem:p,onViewDetails:v,onEditItem:y})})]})]}):l.jsx($9e,{onAddCategory:m,onAddAnnualItem:g})]})}function z9e({categories:e,annualItems:t,totals:n,getCurrentMonthName:r,getCurrentYear:i,getCategoryEntries:s}){return console.log(" Rendering DETAILED view"),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsxs(Z,{className:"shadow-lg",children:[l.jsxs(de,{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-950 dark:to-blue-900 rounded-t-lg",children:[l.jsx(he,{className:"flex items-center gap-3 text-xl",children:" Mnadskategorier"}),l.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300 mt-2",children:["Totalsumma: ",l.jsx("span",{className:"bg-blue-200/60 dark:bg-blue-800/60 px-2 py-1 rounded-md font-semibold text-blue-900 dark:text-blue-100 shadow-sm border border-blue-300/30 dark:border-blue-600/30",children:ue(n.monthly.spent)})," / Budgeterat: ",ue(n.monthly.budget)]})]}),l.jsx(ee,{className:"p-0",children:l.jsx("div",{className:"space-y-0",children:e.length>0?e.map((a,o)=>{const c=s(a.name,"monthly"),u=c.reduce((d,f)=>d+f.amount,0);return l.jsxs("div",{className:"border-b last:border-b-0",style:{borderLeft:`6px solid ${a.color}`,backgroundColor:`${a.color}08`},children:[l.jsx("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-5 h-5 rounded-lg shadow-sm",style:{backgroundColor:a.color}}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-base font-semibold",children:a.name}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.jsx("span",{className:"font-medium",children:ue(u)})," / ",ue(a.budgeted),l.jsxs("span",{className:"ml-2 text-xs",children:["(",c.length," utgifter)"]})]})]})]})}),l.jsx("div",{className:"bg-white dark:bg-gray-900",children:c.length>0?l.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:c.map((d,f)=>l.jsxs("div",{className:`flex justify-between items-center p-2 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors ${f%2===0?"bg-gray-25 dark:bg-gray-900":"bg-white dark:bg-gray-850"}`,children:[l.jsx("div",{className:"flex-1 truncate pr-2",children:l.jsx("div",{className:"text-sm font-medium truncate",children:d.description})}),l.jsx("div",{className:"text-sm font-semibold tabular-nums",style:{color:a.color},children:ue(d.amount)})]},d.id))}):l.jsx("div",{className:"p-6 text-center text-muted-foreground",children:l.jsx("p",{className:"text-sm",children:"Inga utgifter registrerade"})})})]},a.id)}):l.jsx("div",{className:"p-8 text-center text-muted-foreground",children:l.jsx("p",{className:"text-base",children:"Inga mnadskategorier nnu"})})})})]}),l.jsxs(Z,{className:"shadow-lg",children:[l.jsxs(de,{className:"bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-950 dark:to-purple-900 rounded-t-lg",children:[l.jsx(he,{className:"flex items-center gap-3 text-xl",children:" rliga poster"}),l.jsxs("div",{className:"text-sm text-purple-700 dark:text-purple-300 mt-2",children:["Totalsumma: ",l.jsx("span",{className:"bg-purple-200/60 dark:bg-purple-800/60 px-2 py-1 rounded-md font-semibold text-purple-900 dark:text-purple-100 shadow-sm border border-purple-300/30 dark:border-purple-600/30",children:ue(n.annual.spent)})," / Budgeterat: ",ue(n.annual.budget)]})]}),l.jsx(ee,{className:"p-0",children:l.jsx("div",{className:"space-y-0",children:t.length>0?t.map((a,o)=>{const c=s(a.name,"yearly"),u=c.reduce((d,f)=>d+f.amount,0);return l.jsxs("div",{className:"border-b last:border-b-0",style:{borderLeft:`6px solid ${a.color}`,backgroundColor:`${a.color}08`},children:[l.jsx("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-900",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-5 h-5 rounded-lg shadow-sm",style:{backgroundColor:a.color}}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-base font-semibold",children:a.name}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.jsx("span",{className:"font-medium",children:ue(u)})," / ",ue(a.budgeted),l.jsxs("span",{className:"ml-2 text-xs",children:["(",c.length," utgifter)"]})]})]})]})}),l.jsx("div",{className:"bg-white dark:bg-gray-900",children:c.length>0?l.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:c.map((d,f)=>l.jsxs("div",{className:`flex justify-between items-center p-2 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors ${f%2===0?"bg-gray-25 dark:bg-gray-900":"bg-white dark:bg-gray-850"}`,children:[l.jsx("div",{className:"flex-1 truncate pr-2",children:l.jsx("div",{className:"text-sm font-medium truncate",children:d.description})}),l.jsx("div",{className:"text-sm font-semibold tabular-nums",style:{color:a.color},children:ue(d.amount)})]},d.id))}):l.jsx("div",{className:"p-6 text-center text-muted-foreground",children:l.jsx("p",{className:"text-sm",children:"Inga utgifter registrerade"})})})]},a.id)}):l.jsx("div",{className:"p-8 text-center text-muted-foreground",children:l.jsx("p",{className:"text-base",children:"Inga rliga poster nnu"})})})})]})]})}const ti=w.forwardRef(({className:e,...t},n)=>l.jsx("textarea",{className:Re("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));ti.displayName="Textarea";function H9e({handleAddCategory:e,handleUpdateCategory:t,handleDeleteCategory:n,handleAddAnnualItem:r,handleUpdateAnnualItem:i,handleDeleteAnnualItem:s,addEntry:a,deleteEntry:o,getCategoryEntries:c,toast:u,showDetailDialog:d=!1,setShowDetailDialog:f=()=>{},showAddExpenseDialog:h=!1,setShowAddExpenseDialog:p=()=>{},showEditCategoryDialog:m=!1,setShowEditCategoryDialog:g=()=>{},showDeleteDialog:v=!1,setShowDeleteDialog:y=()=>{},showAddCategoryDialog:x=!1,setShowAddCategoryDialog:b=()=>{},showAddAnnualItemDialog:S=!1,setShowAddAnnualItemDialog:E=()=>{},selectedCategory:N=null,setSelectedCategory:_=()=>{},selectedExpenseCategory:k=null,setSelectedExpenseCategory:T=()=>{}}){const[A,j]=w.useState(!1),[D,I]=w.useState(!1),[M,L]=w.useState(!1),[P,B]=w.useState(""),[R,F]=w.useState(""),[O,Q]=w.useState(null),[Y,$]=w.useState(null),[ye,Te]=w.useState(""),[U,K]=w.useState(""),[fe,oe]=w.useState(""),[le,Ee]=w.useState(null),[se,qe]=w.useState(null),[Oe,et]=w.useState(null),[J,pe]=w.useState(""),[q,me]=w.useState(""),[Be,He]=w.useState(new Date().toISOString().split("T")[0]),[ct,Pt]=w.useState("Privat utlgg"),[pn,Me]=w.useState(null),[G,te]=w.useState(!1),[xe,Pe]=w.useState(!1),[$e,Ct]=w.useState(null);w.useEffect(()=>{m&&N&&!O&&(Q(N),F(N.budgeted.toString()))},[m,N,O]);const be=()=>b(!0),At=je=>{Q(je),F(je.budgeted.toString()),g(!0)},Kt=je=>{$(je),y(!0)},mr=je=>{T(je),pe(""),me(""),He(new Date().toISOString().split("T")[0]),Pt("Privat utlgg"),p(!0)},An=je=>{Me(je),pe(je.amount.toString()),me(je.description),He(je.date),Pt(je.payment_source||"Privat utlgg"),te(!0)},aa=je=>{Ct(je),Pe(!0)},oa=()=>E(!0),ioe=je=>{Ee(je),K(je.budgeted.toString()),j(!0)},soe=je=>{qe(je),I(!0)},aoe=je=>{et(je),L(!0)},ooe=je=>{_(je),f(!0)},U3=()=>N?c(N.name,"monthly"):[],loe=async()=>{if(!P.trim()){u({title:"Fel",description:"Ange ett namn fr kategorin.",variant:"destructive"});return}const je=parseFloat(R)||0;await e(P.trim(),je)&&(B(""),F(""),b(!1))},coe=async()=>{if(!O)return;const je=parseFloat(R)||0;await t(O.id,je)&&(Q(null),F(""),g(!1))},uoe=async()=>{if(!Y)return;await n(Y)&&($(null),y(!1))},doe=async()=>{if(!k||!J||!q){u({title:"Fel",description:"Fyll i alla flt.",variant:"destructive"});return}const je=parseFloat(J);if(je<=0){u({title:"Fel",description:"Beloppet mste vara strre n 0.",variant:"destructive"});return}try{const du="targetDate"in k;await a({type:"expense",amount:je,description:q,category:k.name,date:Be,payment_source:ct,is_recurring:!0,recurring_interval:du?"yearly":"monthly",next_due_date:du?new Date(new Date(Be).getFullYear()+1,new Date(Be).getMonth(),new Date(Be).getDate()).toISOString().split("T")[0]:new Date(new Date(Be).getFullYear(),new Date(Be).getMonth()+1,new Date(Be).getDate()).toISOString().split("T")[0],is_budget_entry:!0,is_recurring_instance:!1}),u({title:"Utgift tillagd",description:`${ue(je)} fr ${q}`}),pe(""),me(""),He(new Date().toISOString().split("T")[0]),Pt("Privat utlgg"),p(!1),T(null)}catch{u({title:"Fel",description:"Kunde inte lgga till utgift.",variant:"destructive"})}},foe=async()=>{if($e)try{await o($e.id)&&(u({title:"Utgift borttagen",description:`${$e.description} har tagits bort`}),Ct(null),Pe(!1))}catch{u({title:"Fel",description:"Kunde inte ta bort utgift.",variant:"destructive"})}},hoe=async()=>{if(!pn||!J||!q){u({title:"Fel",description:"Fyll i alla flt.",variant:"destructive"});return}const je=parseFloat(J);if(je<=0){u({title:"Fel",description:"Beloppet mste vara strre n 0.",variant:"destructive"});return}try{await o(pn.id),await a({type:"expense",amount:je,description:q,category:pn.category,date:Be,payment_source:ct,is_recurring:!1,is_budget_entry:!0}),u({title:"Utgift uppdaterad",description:`${q} har uppdaterats`}),Me(null),pe(""),me(""),He(new Date().toISOString().split("T")[0]),Pt("Privat utlgg"),te(!1)}catch{u({title:"Fel",description:"Kunde inte uppdatera utgift.",variant:"destructive"})}},poe=async()=>{if(!ye.trim()){u({title:"Fel",description:"Ange ett namn fr rsposten.",variant:"destructive"});return}if(!fe){u({title:"Fel",description:"Ange mlmnad fr rsposten.",variant:"destructive"});return}const je=parseFloat(U)||0,du=fe+"-01";await r(ye.trim(),je,du)&&(Te(""),K(""),oe(""),E(!1))},moe=async()=>{if(!le)return;const je=parseFloat(U)||0;await i(le.id,je)&&(Ee(null),K(""),j(!1))},goe=async()=>{if(!se)return;await s(se)&&(qe(null),I(!1))};return l.jsxs(l.Fragment,{children:[l.jsx(xt,{open:x,onOpenChange:b,children:l.jsxs(ft,{children:[l.jsx(ht,{children:l.jsx(pt,{children:"Lgg till mnadskategori"})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(X,{htmlFor:"categoryName",children:"Kategorinamn"}),l.jsx(re,{id:"categoryName",value:P,onChange:je=>B(je.target.value),placeholder:"t.ex. Mat & Dryck"})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"categoryBudget",children:"Mnadsbudget (kr)"}),l.jsx(re,{id:"categoryBudget",type:"number",value:R,onChange:je=>F(je.target.value),placeholder:"0 = ingen automatisk budget"})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(H,{variant:"outline",onClick:()=>b(!1),children:"Avbryt"}),l.jsx(H,{onClick:loe,children:"Lgg till"})]})]})]})}),l.jsx(xt,{open:m,onOpenChange:g,children:l.jsxs(ft,{children:[l.jsx(ht,{children:l.jsxs(pt,{children:["Redigera kategori: ",O==null?void 0:O.name]})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(X,{htmlFor:"editCategoryBudget",children:"Mnadsbudget (kr)"}),l.jsx(re,{id:"editCategoryBudget",type:"number",value:R,onChange:je=>F(je.target.value)})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(H,{variant:"outline",onClick:()=>g(!1),children:"Avbryt"}),l.jsx(H,{onClick:coe,children:"Spara"})]})]})]})}),l.jsx(xt,{open:v,onOpenChange:y,children:l.jsxs(ft,{children:[l.jsx(ht,{children:l.jsx(pt,{children:"Ta bort kategori"})}),l.jsxs("p",{children:['r du sker p att du vill ta bort kategorin "',Y==null?void 0:Y.name,'"?']}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(H,{variant:"outline",onClick:()=>y(!1),children:"Avbryt"}),l.jsx(H,{variant:"destructive",onClick:uoe,children:"Ta bort"})]})]})}),l.jsx(xt,{open:h,onOpenChange:p,children:l.jsxs(ft,{children:[l.jsx(ht,{children:l.jsxs(pt,{children:["Lgg till utgift - ",k==null?void 0:k.name]})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(X,{htmlFor:"expenseAmount",children:"Belopp (kr)"}),l.jsx(re,{id:"expenseAmount",type:"number",value:J,onChange:je=>pe(je.target.value),placeholder:"0"})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"expenseDescription",children:"Beskrivning"}),l.jsx(ti,{id:"expenseDescription",value:q,onChange:je=>me(je.target.value),placeholder:"Vad kpte du?"})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"expenseDate",children:"Datum"}),l.jsx(re,{id:"expenseDate",type:"date",value:Be,onChange:je=>He(je.target.value)})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"expensePaymentSource",children:"Betalningsklla"}),l.jsxs(gn,{value:ct,onValueChange:Pt,children:[l.jsx(ln,{children:l.jsx(vn,{placeholder:"Vlj betalningsklla"})}),l.jsxs(cn,{children:[l.jsx(Ve,{value:"Privat utlgg",children:"Privat utlgg"}),l.jsx(Ve,{value:"Mynt kortet",children:"Mynt kortet"}),l.jsx(Ve,{value:"Faktura",children:"Faktura"}),l.jsx(Ve,{value:"Annat",children:"Annat"})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(H,{variant:"outline",onClick:()=>p(!1),children:"Avbryt"}),l.jsx(H,{onClick:doe,children:"Lgg till"})]})]})]})}),l.jsx(xt,{open:G,onOpenChange:te,children:l.jsxs(ft,{children:[l.jsx(ht,{children:l.jsx(pt,{children:"Redigera utgift"})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(X,{htmlFor:"editExpenseAmount",children:"Belopp (kr)"}),l.jsx(re,{id:"editExpenseAmount",type:"number",value:J,onChange:je=>pe(je.target.value),placeholder:"0"})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"editExpenseDescription",children:"Beskrivning"}),l.jsx(ti,{id:"editExpenseDescription",value:q,onChange:je=>me(je.target.value),placeholder:"Vad kpte du?"})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"editExpenseDate",children:"Datum"}),l.jsx(re,{id:"editExpenseDate",type:"date",value:Be,onChange:je=>He(je.target.value)})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"editExpensePaymentSource",children:"Betalningsklla"}),l.jsxs(gn,{value:ct,onValueChange:Pt,children:[l.jsx(ln,{children:l.jsx(vn,{placeholder:"Vlj betalningsklla"})}),l.jsxs(cn,{children:[l.jsx(Ve,{value:"Privat utlgg",children:"Privat utlgg"}),l.jsx(Ve,{value:"Mynt kortet",children:"Mynt kortet"}),l.jsx(Ve,{value:"Faktura",children:"Faktura"}),l.jsx(Ve,{value:"Annat",children:"Annat"})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(H,{variant:"outline",onClick:()=>te(!1),children:"Avbryt"}),l.jsx(H,{onClick:hoe,children:"Spara ndringar"})]})]})]})}),l.jsx(xt,{open:xe,onOpenChange:Pe,children:l.jsxs(ft,{children:[l.jsx(ht,{children:l.jsx(pt,{children:"Ta bort utgift"})}),l.jsxs("p",{children:['r du sker p att du vill ta bort utgiften "',$e==null?void 0:$e.description,'"?']}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(H,{variant:"outline",onClick:()=>Pe(!1),children:"Avbryt"}),l.jsx(H,{variant:"destructive",onClick:foe,children:"Ta bort"})]})]})}),l.jsx(xt,{open:S,onOpenChange:E,children:l.jsxs(ft,{children:[l.jsx(ht,{children:l.jsx(pt,{children:"Lgg till rspost"})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(X,{htmlFor:"annualItemName",children:"Namn p rspost"}),l.jsx(re,{id:"annualItemName",value:ye,onChange:je=>Te(je.target.value),placeholder:"t.ex. Semester, Julklappar"})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"annualItemBudget",children:"Budget (kr)"}),l.jsx(re,{id:"annualItemBudget",type:"number",value:U,onChange:je=>K(je.target.value),placeholder:"Totalt belopp fr ret"})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"annualItemTargetDate",children:"Mlmnad"}),l.jsx(re,{id:"annualItemTargetDate",type:"month",value:fe,onChange:je=>oe(je.target.value)})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(H,{variant:"outline",onClick:()=>E(!1),children:"Avbryt"}),l.jsx(H,{onClick:poe,children:"Lgg till"})]})]})]})}),l.jsx(xt,{open:A,onOpenChange:j,children:l.jsxs(ft,{children:[l.jsx(ht,{children:l.jsxs(pt,{children:["Redigera rspost: ",le==null?void 0:le.name]})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(X,{htmlFor:"editAnnualItemBudget",children:"Budget (kr)"}),l.jsx(re,{id:"editAnnualItemBudget",type:"number",value:U,onChange:je=>K(je.target.value),placeholder:"Totalt belopp fr ret"})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(H,{variant:"outline",onClick:()=>j(!1),children:"Avbryt"}),l.jsx(H,{onClick:moe,children:"Spara"})]})]})]})}),l.jsx(xt,{open:D,onOpenChange:I,children:l.jsxs(ft,{children:[l.jsx(ht,{children:l.jsx(pt,{children:"Ta bort rspost"})}),l.jsxs("p",{children:['r du sker p att du vill ta bort rsposten "',se==null?void 0:se.name,'"?']}),l.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[l.jsx(H,{variant:"outline",onClick:()=>I(!1),children:"Avbryt"}),l.jsx(H,{variant:"destructive",onClick:goe,children:"Ta bort"})]})]})}),l.jsx(xt,{open:M,onOpenChange:L,children:l.jsxs(ft,{className:"max-w-2xl",children:[l.jsx(ht,{children:l.jsxs(pt,{children:["Detaljer: ",Oe==null?void 0:Oe.name]})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(X,{children:"Budget"}),l.jsx("p",{className:"text-lg font-semibold",children:ue((Oe==null?void 0:Oe.budgeted)||0)})]}),l.jsxs("div",{children:[l.jsx(X,{children:"Spenderat"}),l.jsx("p",{className:"text-lg font-semibold",children:ue((Oe==null?void 0:Oe.spent)||0)})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx(X,{children:"Utgifter fr denna rspost"}),l.jsxs(H,{size:"sm",onClick:()=>mr(Oe),children:[l.jsx(Xe,{className:"h-4 w-4 mr-1"}),"Lgg till"]})]}),l.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[Oe&&c&&c(Oe.name,"yearly").map(je=>l.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted rounded",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:je.description}),l.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(je.date).toLocaleDateString("sv-SE")})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-semibold",children:ue(je.amount)}),l.jsx(H,{variant:"destructive",size:"sm",onClick:()=>o&&o(je.id),children:l.jsx(lr,{className:"h-4 w-4"})})]})]},je.id)),(!Oe||!c||c(Oe.name,"yearly").length===0)&&l.jsx("p",{className:"text-center text-muted-foreground py-4",children:"Inga utgifter nnu"})]})]})]})]})}),l.jsx(xt,{open:d,onOpenChange:f,children:l.jsxs(ft,{className:"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[l.jsx(ht,{className:"flex-shrink-0",children:l.jsxs(pt,{children:["Detaljer fr ",N==null?void 0:N.name]})}),l.jsx("div",{className:"space-y-4 flex-1 overflow-y-auto",children:N&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Budget denna mnad"}),l.jsx("div",{className:"text-lg font-semibold",children:ue(N.budgeted)})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Spenderat"}),l.jsx("div",{className:"text-lg font-semibold",children:ue(N.spent)})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Kvar"}),l.jsx("div",{className:`text-lg font-semibold ${N.budgeted-N.spent<0?"text-red-600":"text-green-600"}`,children:ue(N.budgeted-N.spent)})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Procent anvnt"}),l.jsxs("div",{className:`text-lg font-semibold ${N.spent/N.budgeted*100>100?"text-red-600":"text-blue-600"}`,children:[(N.spent/N.budgeted*100).toFixed(1),"%"]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Utgifter i denna kategori"}),l.jsxs(H,{onClick:()=>{f(!1),mr(N)},children:[l.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Ny utgift"]})]}),l.jsx("div",{className:"border rounded-lg overflow-hidden",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left p-3 font-medium",children:"Datum"}),l.jsx("th",{className:"text-left p-3 font-medium",children:"Beskrivning"}),l.jsx("th",{className:"text-left p-3 font-medium",children:"Betalningsklla"}),l.jsx("th",{className:"text-right p-3 font-medium",children:"Belopp"}),l.jsx("th",{className:"text-center p-3 font-medium",children:"tgrder"})]})}),l.jsx("tbody",{className:"divide-y",children:U3().length>0?U3().map(je=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-3",children:je.date}),l.jsx("td",{className:"p-3",children:je.description}),l.jsx("td",{className:"p-3",children:je.payment_source||"Oknd"}),l.jsx("td",{className:"p-3 text-right font-medium",children:ue(je.amount)}),l.jsx("td",{className:"p-3",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx(H,{size:"sm",variant:"outline",onClick:()=>An(je),children:l.jsx(uo,{className:"h-4 w-4"})}),l.jsx(H,{size:"sm",variant:"outline",onClick:()=>aa(je),children:l.jsx(lr,{className:"h-4 w-4"})})]})})]},je.id)):l.jsx("tr",{children:l.jsxs("td",{colSpan:5,className:"p-8 text-center text-gray-500",children:[l.jsx(Js,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{children:"Inga utgifter nnu"}),l.jsx("p",{className:"text-sm mt-1",children:'Klicka p "Ny utgift" fr att lgga till en utgift'})]})})})]})})]})]})}),l.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t flex-shrink-0",children:[l.jsx(H,{variant:"outline",onClick:()=>f(!1),children:"Stng"}),N&&l.jsx(H,{onClick:()=>{f(!1),mr(N)},children:"Lgg till utgift"})]})]})}),(window.budgetDialogs={openAddCategoryDialog:be,openEditCategoryDialog:At,openDeleteDialog:Kt,openAddExpenseDialog:mr,openDetailDialog:ooe,openAddAnnualItemDialog:oa,openEditAnnualItemDialog:ioe,openDeleteAnnualDialog:soe,openAnnualDetailDialog:aoe},null)]})}function V9e({isDarkMode:e}){const[t,n]=w.useState(!1),r=jS(),i=Xh(),[s,a]=w.useState(!1),[o,c]=w.useState(!1),[u,d]=w.useState(!1),[f,h]=w.useState(!1),[p,m]=w.useState(!1),[g,v]=w.useState(!1),[y,x]=w.useState(!1),[b,S]=w.useState(!1),[E,N]=w.useState(null),[_,k]=w.useState(null);if(w.useEffect(()=>{i.expenseModalOpen&&!r.budgetsLoading&&(r.categories&&r.categories.length>0&&k(r.categories[0]),h(!0),i.setExpenseModalOpen(!1))},[i.expenseModalOpen,i,r.categories,r.budgetsLoading]),r.budgetsLoading)return l.jsx("div",{className:"space-y-6",children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Budget"}),l.jsx("p",{className:"text-muted-foreground",children:"Laddar budgetdata..."})]})})});const T=()=>{a(!0)},A=()=>{c(!0)},j=F=>{N(F),d(!0)},D=F=>{k(F),h(!0)},I=F=>{N(F),m(!0)},M=F=>{N(F),S(!0)},L=F=>{var O;(O=window.budgetDialogs)==null||O.openAnnualDetailDialog(F)},P=F=>{var O;(O=window.budgetDialogs)==null||O.openEditAnnualItemDialog(F)},B=F=>{var O;(O=window.budgetDialogs)==null||O.openDeleteAnnualDialog(F)},R=F=>{B(F)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Budget"}),l.jsx("p",{className:"text-muted-foreground",children:"Hantera din mnads- och rsbudget - synkroniseras med Cash Flow"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(H,{variant:t?"default":"outline",onClick:()=>{console.log(" Button clicked! Current state:",t,"-> New state:",!t),n(!t)},children:[l.jsx(Hi,{className:"h-4 w-4 mr-2"}),t?"versikt":"Detaljvy"]}),l.jsxs(H,{variant:"outline",onClick:A,children:[l.jsx(Xe,{className:"h-4 w-4 mr-2"}),"rlig post"]}),l.jsxs(H,{onClick:T,children:[l.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Mnadskategori"]})]})]}),t?l.jsx(z9e,{...r}):l.jsx(U9e,{...r,isDarkMode:e,onViewDetails:j,onAddExpense:D,onEditCategory:I,onDeleteCategory:M,onDeleteItem:R,onAddCategory:T,onAddAnnualItem:A,onViewAnnualDetails:L,onEditAnnualItem:P}),l.jsx(H9e,{...r,deleteEntry:r.deleteEntry,getCategoryEntries:r.getCategoryEntries,showDetailDialog:u,setShowDetailDialog:d,showAddExpenseDialog:f,setShowAddExpenseDialog:h,showEditCategoryDialog:p,setShowEditCategoryDialog:m,showDeleteDialog:b,setShowDeleteDialog:S,showAddCategoryDialog:s,setShowAddCategoryDialog:a,showAddAnnualItemDialog:o,setShowAddAnnualItemDialog:c,selectedCategory:E,setSelectedCategory:N,selectedExpenseCategory:_,setSelectedExpenseCategory:k})]})}const W9e=0;function q9e({isDarkMode:e}){var pe;console.log(" CASHFLOW COMPONENT MOUNTED/RENDERED");const{user:t}=jr();console.log(" USER FROM AUTH:",t==null?void 0:t.id);const{entries:n,loading:r,addEntry:i,updateEntry:s,deleteEntry:a,error:o}=WJ((t==null?void 0:t.id)||null),{toast:c}=xo(),[u,d]=w.useState(!1),[f,h]=w.useState("income"),[p,m]=w.useState(""),[g,v]=w.useState(null),[y,x]=w.useState(!1),[b,S]=w.useState(!1),[E,N]=w.useState(!1),[_,k]=w.useState(null),[T,A]=w.useState([]),[j,D]=w.useState([]),[I,M]=w.useState(!0),[L,P]=w.useState({amount:"",description:"",category:"",date:new Date().toISOString().split("T")[0],isRecurring:!1}),[B,R]=w.useState([]),[F,O]=w.useState({income:[],expense:[]});w.useEffect(()=>{console.log(" PROCESSING USEEFFECT TRIGGERED"),console.log(" entries.length:",n.length),console.log(" salaryPayments.length:",T.length),n.length>0?(console.log(" Calling processMonthlyData..."),Y(),console.log(" Calling processCategoryData..."),Te()):(console.log(" No entries, calling initializeEmptyMonthlyData..."),Q())},[n,T]),w.useEffect(()=>{console.log(" USER EFFECT TRIGGERED - user?.id:",t==null?void 0:t.id),console.log(" USER EFFECT - user object:",t),console.log(" USER EFFECT - user type:",typeof t);const q=async()=>{if(console.log(" FETCH SALARY DATA CALLED"),!(t!=null&&t.id)){console.log(" No user ID available for salary fetch");return}console.log(" User ID available:",t.id);try{M(!0);const{data:me,error:Be}=await ie.from("salary_payments").select(`
            *,
            employee:salary_employees(
              id,
              name,
              position,
              base_salary
            )
          `).eq("user_id",t.id).eq("status","paid");if(console.log(" Salary payments query result:",{payments:(me==null?void 0:me.length)||0,error:Be,samplePayment:me==null?void 0:me[0]}),Be)throw Be;const{data:He,error:ct}=await ie.from("user_profiles").select("auto_generate_employer_tax, employer_tax_payment_date").eq("id",t.id).single();ct&&ct.code!=="PGRST116"&&console.error("Error fetching user settings:",ct),A(me||[]),console.log(" Fetched salary payments:",(me==null?void 0:me.length)||0),console.log(" FINAL STATE: salaryPayments will be set to:",(me==null?void 0:me.length)||0,"entries")}catch(me){console.error("Error fetching salary data:",me)}finally{M(!1)}};t!=null&&t.id?(console.log(" About to call fetchSalaryDataLocal..."),q()):console.log(" USER EFFECT - No user ID, not calling fetchSalaryData")},[t]);const Q=()=>{const q=[],me=new Date;for(let Be=-2;Be<=4;Be++){const He=new Date(me.getFullYear(),me.getMonth()+Be,1),ct=`${He.getFullYear()}-${String(He.getMonth()+1).padStart(2,"0")}`,Pt=He.toLocaleDateString("sv-SE",{month:"long",year:"numeric"});q.push({month:ct,monthName:Pt,income:0,expenses:0,netFlow:0,cumulativeBalance:5e4,entries:[],isPast:Be<0,isCurrent:Be===0,isFuture:Be>0})}R(q)},Y=()=>{console.log(" RAW ENTRIES FROM DATABASE:",n.length);const q=n.filter(be=>be.is_budget_entry===!0||be.source==="budget");console.log(" RAW BUDGET ENTRIES FROM DATABASE:",q.length),q.forEach(be=>{console.log(` RAW BUDGET: "${be.description}" (source: ${be.source}, is_budget_entry: ${be.is_budget_entry}, id: ${be.id})`)});const me=[],Be=new Date;for(let be=-2;be<=4;be++){const At=new Date(Be.getFullYear(),Be.getMonth()+be,1),Kt=`${At.getFullYear()}-${String(At.getMonth()+1).padStart(2,"0")}`,mr=At.toLocaleDateString("sv-SE",{month:"long",year:"numeric"});me.push({month:Kt,monthName:mr,income:0,expenses:0,netFlow:0,cumulativeBalance:0,entries:[],isPast:be<0,isCurrent:be===0,isFuture:be>0})}const He=new Map;me.forEach(be=>{He.set(be.month,be)});const ct=n;console.log("=== ENTRY PROCESSING ==="),console.log("Total entries to process:",ct.length);const Pt={budget:ct.filter(be=>be.source==="budget").length,manual:ct.filter(be=>be.source==="manual").length,invoice:ct.filter(be=>be.source==="invoice").length,total:ct.length};console.log("Entry breakdown by source:",Pt),console.log(" BEFORE generateRecurringEntries - allEntriesToProcess:",ct.length),console.log(" Checking each entry before recurring generation:"),ct.forEach((be,At)=>{const Kt=be.is_budget_entry===!0||be.source==="budget";console.log(`${At+1}. "${be.description}" - is_budget: ${be.is_budget_entry}, source: ${be.source}, id: ${be.id}`),Kt&&console.log(` BUDGET ENTRY: "${be.description}" - This should appear in cash flow`)});const pn=ye(ct,me);console.log(" AFTER generateRecurringEntries - generated entries:",pn.length),console.log(" Checking each generated recurring entry:"),pn.forEach(be=>{const At=be.is_budget_entry===!0||be.source==="budget",Kt=["Youtube premium","Supabase Databas","Copilot AI","Halebop mobil+klocka","Geforce now","Raycast AI","Netlify IT tjnst","Telia bredband","ManageWP wordpress","Icloud cloud storage","Frmnscykel","Kaffe, Te, Frukt","Hyra av rum","Fortnox"].some(mr=>{var An;return(An=be.description)==null?void 0:An.toLowerCase().includes(mr.toLowerCase())});(At||Kt)&&console.log(` BUDGET ENTRY GENERATED: "${be.description}" - is_budget: ${be.is_budget_entry}, source: ${be.source}, id: ${be.id}`)}),console.log(" About to generate salary entries..."),console.log(" Salary payments available:",T.length),console.log(" Salary employees available:",j.length),console.log(" Sample salary payment:",T[0]),console.log(" Sample salary employee:",j[0]),console.log(" Salary payments data:",T),console.log(" Salary employees data:",j);const Me=$(me);console.log(" Salary entries returned from generateSalaryEntries:",Me.length),console.log(" Salary entries details:",Me);const G=[...pn,...Me],te=G;console.log("=== MONTHLY DATA PROCESSING ==="),console.log("Total entries after generation:",G.length),console.log("Final entries to process:",te.length),console.log("Original entries:",ct.length),console.log("Generated entries:",te.length-ct.length);const xe={manual:te.filter(be=>be.source==="manual").length,budget:te.filter(be=>be.source==="budget").length,invoice:te.filter(be=>be.source==="invoice").length,editable:te.filter(be=>be.is_editable).length,readonly:te.filter(be=>!be.is_editable).length};console.log("Entry source breakdown:",xe),xe.invoice>0&&console.log(`INFO: ${xe.invoice} invoice entries included (read-only)`),xe.editable>0&&console.log(`INFO: ${xe.editable} manual entries (editable)`),te.forEach(be=>{const At=be.date.toString().slice(0,7),Kt=He.get(At);if(At<"2025-09"){console.log(` FILTERED pre-business entry: ${At} - "${be.description}" (${be.amount} SEK)`);return}const An=be.source==="invoice"?"[INV]":be.source==="budget"?"[BUD]":be.source==="manual"?"[MAN]":"[GEN]";console.log(`${An} ${At}: ${be.type} ${be.amount} SEK - "${be.description}"`),Kt&&(Kt.entries.push(be),be.type==="income"?Kt.income+=be.amount:be.type==="expense"&&(Kt.expenses+=be.amount))});const Pe="2025-09";let $e=0;const Ct=me.map(be=>{if(be.netFlow=be.income-be.expenses,be.month<Pe)be.cumulativeBalance=0,be.income=0,be.expenses=0,be.netFlow=0,be.entries=[];else{be.month===Pe&&$e===0&&($e=W9e);const At=$e;$e+=be.netFlow,be.cumulativeBalance=$e,console.log(` ${be.monthName}: Opening ${At} + Net ${be.netFlow} = Closing ${$e}`)}return be});console.log("Final monthly breakdown:",Ct.map(be=>({month:be.month,monthName:be.monthName,entriesCount:be.entries.length,income:be.income,expenses:be.expenses,netFlow:be.netFlow,cumulativeBalance:be.cumulativeBalance}))),console.log("=== END MONTHLY PROCESSING ==="),R(Ct)},$=q=>{console.log(" SALARY GENERATION STARTED"),console.log(" monthsData length:",q.length),console.log(" monthsData:",q.map(He=>({month:He.month,monthName:He.monthName}))),console.log(" salaryPayments length:",(T==null?void 0:T.length)||0),console.log(" salaryEmployees length:",(j==null?void 0:j.length)||0),console.log(" salaryPayments raw data:",T),console.log(" salaryEmployees raw data:",j);const me=[];if(!T||T.length===0)return console.log(" No salary payments available - returning empty array"),console.log(" salaryPayments is:",T),me;if(!j||j.length===0)return console.log(" No salary employees available - returning empty array"),console.log(" salaryEmployees is:",j),me;console.log(" GENERATING SALARY ENTRIES for months:",q.map(He=>He.month));const Be=new Map;return T.forEach(He=>{if(He.employee){const ct=He.employee.id;(!Be.has(ct)||new Date(He.payment_date)>new Date(Be.get(ct).payment_date))&&Be.set(ct,He)}}),console.log(" Active employees with salaries:",Be.size),q.forEach(He=>{He.month<"2025-09"||Be.forEach((Pt,pn)=>{if(!Pt.employee)return;const Me=Pt.employee,G=`${He.month}-15`,te={id:`salary_${pn}_${He.month}`,user_id:(t==null?void 0:t.id)||"",type:"expense",amount:Me.base_salary,description:`Salary - ${Me.name}${Me.position?` (${Me.position})`:""}`,category:"Salary",date:G,is_recurring:!1,is_budget_entry:!1,is_recurring_instance:!1,recurring_interval:null,next_due_date:null,project_id:null,client_id:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),vat_amount:null,amount_excluding_vat:null,vat_rate:null,is_editable:!1,source:"manual"},xe=new Date(He.month+"-01");xe.setMonth(xe.getMonth()+1);const Pe=`${xe.getFullYear()}-${String(xe.getMonth()+1).padStart(2,"0")}`,$e=Math.round(Me.base_salary*.3142);if(q.some(be=>be.month===Pe)){const be={id:`employer_tax_${pn}_${He.month}`,user_id:(t==null?void 0:t.id)||"",type:"expense",amount:$e,description:`Employer Tax - ${Me.name}${Me.position?` (${Me.position})`:""}`,category:"Employer Tax",date:`${Pe}-25`,is_recurring:!1,is_budget_entry:!1,is_recurring_instance:!1,recurring_interval:null,next_due_date:null,project_id:null,client_id:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),vat_amount:null,amount_excluding_vat:null,vat_rate:null,is_editable:!1,source:"manual"};me.push(be)}me.push(te),console.log(` Generated for ${Me.name}: Salary ${Me.base_salary} SEK (${G})`)})}),console.log(" Total salary entries generated:",me.length),me},ye=(q,me)=>{const Be=[...q],He=me.map(Me=>Me.month),ct=q.filter(Me=>Me.is_recurring===!0);console.log("=== RECURRING ENTRY GENERATION ==="),console.log("Total entries:",q.length),console.log("Found recurring entries to process:",ct.length);const Pt=new Map;ct.forEach(Me=>{const G=`${Me.description}_${Me.amount}_${Me.category}`;Pt.has(G)?console.log(`Skipping duplicate recurring entry: ${Me.description}`):Pt.set(G,Me)});const pn=Array.from(Pt.values());return console.log("Deduplicated actual recurring entries:",pn.length),pn.forEach(Me=>{const G=new Date(Me.date),te=Me.date.slice(0,7);console.log(`Processing recurring entry: ${Me.description} from ${te}, interval: ${Me.recurring_interval}`),He.forEach(xe=>{if(xe===te){console.log(`Skipping original month ${xe} for ${Me.description}`);return}if(Me.recurring_interval==="yearly"){const mr=G.getMonth(),[,An]=xe.split("-").map(Number),aa=An-1;if(mr!==aa){console.log(`Skipping yearly entry ${Me.description} for ${xe} - not the right month (original: ${mr}, target: ${aa})`);return}}const[Pe,$e]=xe.split("-").map(Number);let Ct=new Date(Pe,$e-1,G.getDate());Ct.getMonth()!==$e-1&&(Ct=new Date(Pe,$e,0));const be=`${Pe}-${String($e).padStart(2,"0")}-${String(Ct.getDate()).padStart(2,"0")}`,At=be.slice(0,7);if(At!==xe){console.error(`Date generation error: expected ${xe}, got ${At}`);return}const Kt={...Me,id:`${Me.id}_recurring_${xe}`,date:be,original_entry_id:Me.id};console.log(` Generated recurring entry for ${xe}:`,{id:Kt.id,description:Kt.description,amount:Kt.amount,date:Kt.date,source:Kt.source,is_budget_entry:Kt.is_budget_entry,targetMonth:xe}),Be.push(Kt)})}),Be},Te=()=>{const q=new Map,me=new Map,Be=n;console.log("=== PROCESSING CATEGORY DATA (for pie charts) ==="),console.log("Total entries loaded:",n.length),console.log("All entries included in category analysis:",Be.length);const He=Be.filter(Me=>Me.source==="manual"||!Me.source),ct=Be.filter(Me=>Me.source==="invoice"),Pt=Be.filter(Me=>Me.source==="budget");console.log("Manual entries in categories:",He.length),console.log("Invoice entries in categories:",ct.length),console.log("Budget entries in categories:",Pt.length),Be.forEach(Me=>{const G=Me.source==="invoice"?"[INVOICE]":Me.source==="budget"?"[BUDGET]":"[MANUAL]";if(console.log(`${G} ${Me.type.toUpperCase()}: ${Me.description} - ${Me.category} - ${Me.amount} SEK`),Me.type==="income"){const te=q.get(Me.category)||0;q.set(Me.category,te+Me.amount)}else{const te=me.get(Me.category)||0;me.set(Me.category,te+Me.amount)}}),console.log("Final income categories:",Array.from(q.entries())),console.log("Final expense categories:",Array.from(me.entries())),console.log("=== END CATEGORY PROCESSING ===");const pn=["#2563eb","#16a34a","#ca8a04","#9333ea","#dc2626","#06b6d4","#84cc16","#f59e0b"];O({income:Array.from(q.entries()).map(([Me,G],te)=>({name:Me,value:G,color:pn[te%pn.length]})),expense:Array.from(me.entries()).map(([Me,G],te)=>({name:Me,value:G,color:pn[te%pn.length]}))})},U=async q=>{if(q.preventDefault(),!L.amount||!L.description||!L.category){c({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}try{const me={type:f,amount:parseFloat(L.amount),description:L.description,category:L.category,date:L.date,is_recurring:L.isRecurring,recurring_interval:L.isRecurring?"monthly":null,next_due_date:L.isRecurring?L.date:null,is_budget_entry:!1,is_recurring_instance:!1,project_id:null,client_id:null};if(await i(me))c({title:"Success",description:`${f==="income"?"Income":"Expense"} added successfully`}),P({amount:"",description:"",category:"",date:new Date().toISOString().split("T")[0],isRecurring:!1}),d(!1);else throw new Error("Failed to add entry")}catch(me){console.error("Error adding transaction:",me),c({title:"Error",description:"Failed to add transaction",variant:"destructive"})}},K=q=>{v(q),P({amount:q.amount.toString(),description:q.description,category:q.category,date:q.date,isRecurring:q.is_recurring}),S(!0)},fe=q=>{k(q),N(!0)},oe=async()=>{if(g)try{await s(g.id,{amount:parseFloat(L.amount),description:L.description,category:L.category,date:L.date,is_recurring:L.isRecurring}),S(!1),v(null),c({title:"Success",description:"Transaction updated successfully"})}catch(q){console.error("Error updating transaction:",q),c({title:"Error",description:"Failed to update transaction",variant:"destructive"})}},le=async()=>{if(_)try{await a(_.id),N(!1),k(null),c({title:"Success",description:"Transaction deleted successfully"})}catch(q){console.error("Error deleting transaction:",q),c({title:"Error",description:"Failed to delete transaction",variant:"destructive"})}},Ee=async()=>{if(g)try{const q={type:f,amount:parseFloat(L.amount),description:L.description,category:L.category,date:L.date,is_recurring:L.isRecurring,recurring_interval:L.isRecurring?"monthly":null,next_due_date:L.isRecurring?L.date:null,is_budget_entry:!1,is_recurring_instance:!1,project_id:null,client_id:null};await s(g.id,q)&&(x(!1),v(null),P({amount:"",description:"",category:"",date:new Date().toISOString().split("T")[0],isRecurring:!1}),c({title:"Success",description:"Transaction updated successfully"}))}catch(q){console.error("Error updating transaction:",q),c({title:"Error",description:"Failed to update transaction",variant:"destructive"})}},se=()=>B.find(me=>me.isCurrent)||{month:new Date().toISOString().slice(0,7),monthName:new Date().toLocaleDateString("sv-SE",{month:"long",year:"numeric"}),income:0,expenses:0,netFlow:0,cumulativeBalance:5e4,entries:[],isPast:!1,isCurrent:!0,isFuture:!1},qe=()=>p&&B.find(me=>me.month===p)||se(),Oe=q=>{const me=q.is_editable===!0;return console.log(`Entry "${q.description}": canEdit=${me}, source=${q.source}, is_budget_entry=${q.is_budget_entry}, id=${q.id}`),me};if(r)return l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"text-lg",children:"Loading cash flow data..."})});if(o)return l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsxs("div",{className:"text-lg text-red-600",children:["Error: ",o]})});const et=se(),J=qe();return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Cash Flow Analysis"}),l.jsxs("p",{className:"text-muted-foreground",children:["Monitor your income and expenses flow (",n.length," entries) - 7 month view"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(H,{variant:"outline",children:[l.jsx(gO,{className:"h-4 w-4 mr-2"}),"Filter"]}),l.jsxs(H,{variant:"outline",children:[l.jsx(Wo,{className:"h-4 w-4 mr-2"}),"Export"]}),l.jsxs(H,{onClick:()=>d(!0),children:[l.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Add Transaction"]})]})]}),u&&l.jsxs(Z,{children:[l.jsx(de,{children:l.jsxs(he,{children:["Add ",f==="income"?"Income":"Expense"]})}),l.jsx(ee,{children:l.jsxs("form",{onSubmit:U,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{children:"Type"}),l.jsxs("select",{value:f,onChange:q=>h(q.target.value),className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[l.jsx("option",{value:"income",children:"Income"}),l.jsx("option",{value:"expense",children:"Expense"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{children:"Amount (SEK)"}),l.jsx(re,{type:"number",placeholder:"0.00",step:"0.01",value:L.amount,onChange:q=>P(me=>({...me,amount:q.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{children:"Category"}),l.jsxs("select",{value:L.category,onChange:q=>P(me=>({...me,category:q.target.value})),className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0,children:[l.jsx("option",{value:"",children:"Select category"}),f==="income"?l.jsxs(l.Fragment,{children:[l.jsx("option",{value:"Client Payment",children:"Client Payment"}),l.jsx("option",{value:"Consulting",children:"Consulting"}),l.jsx("option",{value:"Retainer",children:"Retainer"}),l.jsx("option",{value:"Investment",children:"Investment"}),l.jsx("option",{value:"Other",children:"Other"})]}):l.jsxs(l.Fragment,{children:[l.jsx("option",{value:"Software & Tools",children:"Software & Tools"}),l.jsx("option",{value:"Office Expenses",children:"Office Expenses"}),l.jsx("option",{value:"Travel",children:"Travel"}),l.jsx("option",{value:"Marketing",children:"Marketing"}),l.jsx("option",{value:"Insurance",children:"Insurance"}),l.jsx("option",{value:"Professional Development",children:"Professional Development"}),l.jsx("option",{value:"Tax",children:"Tax"}),l.jsx("option",{value:"Other",children:"Other"})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{children:"Date"}),l.jsx(re,{type:"date",value:L.date,onChange:q=>P(me=>({...me,date:q.target.value})),required:!0})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{children:"Description"}),l.jsx(re,{placeholder:"Description of transaction",value:L.description,onChange:q=>P(me=>({...me,description:q.target.value})),required:!0})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:"recurring",checked:L.isRecurring,onChange:q=>P(me=>({...me,isRecurring:q.target.checked})),className:"h-4 w-4 rounded border-gray-300"}),l.jsx(X,{htmlFor:"recurring",children:"Recurring monthly transaction"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(H,{type:"submit",children:"Add Transaction"}),l.jsx(H,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"})]})]})})]}),y&&l.jsxs(Z,{children:[l.jsx(de,{children:l.jsxs(he,{children:["Edit ",f==="income"?"Income":"Expense"]})}),l.jsx(ee,{children:l.jsxs("form",{onSubmit:q=>{q.preventDefault(),Ee()},className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{children:"Type"}),l.jsxs("select",{value:f,onChange:q=>h(q.target.value),className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[l.jsx("option",{value:"income",children:"Income"}),l.jsx("option",{value:"expense",children:"Expense"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{children:"Amount (SEK)"}),l.jsx(re,{type:"number",placeholder:"0.00",step:"0.01",value:L.amount,onChange:q=>P(me=>({...me,amount:q.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{children:"Category"}),l.jsxs("select",{value:L.category,onChange:q=>P(me=>({...me,category:q.target.value})),className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0,children:[l.jsx("option",{value:"",children:"Select category"}),f==="income"?l.jsxs(l.Fragment,{children:[l.jsx("option",{value:"Client Payment",children:"Client Payment"}),l.jsx("option",{value:"Consulting",children:"Consulting"}),l.jsx("option",{value:"Investment",children:"Investment"}),l.jsx("option",{value:"Other Income",children:"Other Income"})]}):l.jsxs(l.Fragment,{children:[l.jsx("option",{value:"Software",children:"Software"}),l.jsx("option",{value:"Marketing",children:"Marketing"}),l.jsx("option",{value:"Equipment",children:"Equipment"}),l.jsx("option",{value:"Travel",children:"Travel"}),l.jsx("option",{value:"Office",children:"Office"}),l.jsx("option",{value:"Other",children:"Other"})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{children:"Description"}),l.jsx(re,{placeholder:"Enter description",value:L.description,onChange:q=>P(me=>({...me,description:q.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{children:"Date"}),l.jsx(re,{type:"date",value:L.date,onChange:q=>P(me=>({...me,date:q.target.value})),required:!0})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:"recurring-edit",checked:L.isRecurring,onChange:q=>P(me=>({...me,isRecurring:q.target.checked})),className:"rounded"}),l.jsx(X,{htmlFor:"recurring-edit",children:"Recurring monthly transaction"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(H,{type:"submit",children:"Update Transaction"}),l.jsx(H,{type:"button",variant:"outline",onClick:()=>{x(!1),v(null)},children:"Cancel"})]})]})})]}),l.jsxs(Z,{children:[l.jsxs(de,{children:[l.jsx(he,{children:"7-Month Cash Flow Overview"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"2 past months  Current month  4 future months"})]}),l.jsx(ee,{children:l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-7 gap-4",children:B.map(q=>l.jsxs("div",{className:`p-4 rounded-lg border cursor-pointer transition-all ${p===q.month?"border-blue-500 bg-blue-50 dark:bg-blue-950":q.isCurrent?"border-green-500 bg-green-50 dark:bg-green-950":q.isPast?"border-gray-300 bg-gray-50 dark:bg-gray-800":"border-purple-300 bg-purple-50 dark:bg-purple-950"}`,onClick:()=>m(p===q.month?"":q.month),children:[l.jsxs("div",{className:"text-sm font-medium text-muted-foreground mb-2 flex items-center justify-between",children:[l.jsx("span",{children:q.monthName}),q.isCurrent&&l.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full dark:bg-green-900 dark:text-green-200",children:"NOW"}),q.isPast&&l.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full dark:bg-gray-700 dark:text-gray-300",children:"PAST"}),q.isFuture&&l.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full dark:bg-purple-900 dark:text-purple-200",children:"FUTURE"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"text-xs text-green-600",children:["In: ",ue(q.income)]}),l.jsxs("div",{className:"text-xs text-red-600",children:["Out: ",ue(q.expenses)]}),l.jsxs("div",{className:`text-sm font-bold ${q.netFlow>=0?"text-green-600":"text-red-600"}`,children:["Net: ",ue(q.netFlow)]}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Balance: ",ue(q.cumulativeBalance)]})]})]},q.month))})})]}),l.jsxs(Z,{children:[l.jsx(de,{children:l.jsxs(he,{children:[p?J.monthName:et.monthName," Details",!p&&l.jsx("span",{className:"ml-2 px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full dark:bg-green-900 dark:text-green-200",children:"CURRENT MONTH"}),p&&J.isPast&&l.jsx("span",{className:"ml-2 px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full dark:bg-gray-700 dark:text-gray-300",children:"PAST MONTH"}),p&&J.isFuture&&l.jsx("span",{className:"ml-2 px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full dark:bg-purple-900 dark:text-purple-200",children:"FUTURE MONTH"})]})}),l.jsxs(ee,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[l.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-950 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:ue(J.income)}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Income"})]}),l.jsxs("div",{className:"text-center p-4 bg-red-50 dark:bg-red-950 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-red-600",children:ue(J.expenses)}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Expenses"})]}),l.jsxs("div",{className:`text-center p-4 rounded-lg ${J.netFlow>=0?"bg-blue-50 dark:bg-blue-950":"bg-orange-50 dark:bg-orange-950"}`,children:[l.jsx("div",{className:`text-2xl font-bold ${J.netFlow>=0?"text-blue-600":"text-orange-600"}`,children:ue(J.netFlow)}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Net Flow"})]}),l.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-950 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-purple-600",children:ue(J.cumulativeBalance)}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Balance"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h4",{className:"font-medium",children:["Transactions (",J.entries.length,")"]}),l.jsxs("div",{className:"max-h-84 overflow-y-auto space-y-2",children:[J.entries.map(q=>{var me;return l.jsxs("div",{className:"flex items-center justify-between p-3 rounded border",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`p-2 rounded-full ${q.type==="income"?"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-600 dark:bg-red-900 dark:text-red-300"}`,children:q.type==="income"?l.jsx(cr,{className:"h-4 w-4"}):l.jsx(yb,{className:"h-4 w-4"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-medium",children:q.description}),l.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[l.jsx("span",{children:q.category}),q.source==="invoice"&&l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(wn,{className:"h-3 w-3 text-blue-600"}),l.jsx("span",{className:"text-blue-600 text-xs font-medium",children:(me=q.description)!=null&&me.includes("(PAID)")?"Invoice Paid":"Invoice Due"})]})]}),q.is_recurring&&q.source==="manual"&&l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Lt,{className:"h-3 w-3"}),l.jsx("span",{children:q.recurring_interval==="yearly"?"Yearly recurring":"Monthly recurring"})]})]}),q.source==="budget"&&l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),l.jsx("span",{className:"text-orange-600 text-xs font-medium",children:q.recurring_interval==="yearly"?"Yearly expense":"Recurring expense"})]}),q.source==="manual"&&!q.is_recurring&&l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),l.jsx("span",{className:"text-green-600 text-xs font-medium",children:"Manual Entry"})]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:`text-lg font-semibold ${q.type==="income"?"text-green-600":"text-red-600"}`,children:[q.type==="income"?"+":"-",ue(q.amount)]}),Oe(q)&&l.jsxs(l.Fragment,{children:[l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>K(q),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:hover:bg-blue-950",title:"Edit transaction",children:l.jsx(uo,{className:"h-4 w-4"})}),l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>fe(q),className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950",title:q.is_recurring?"Delete recurring transaction":"Delete transaction",children:l.jsx(lr,{className:"h-4 w-4"})})]})]})]},q.id)}),J.entries.length===0&&l.jsx("div",{className:"text-center py-8 text-muted-foreground",children:J.isFuture?"No planned transactions for this future month":"No transactions for this month"})]})]})]})]}),B.some(q=>q.income>0||q.expenses>0)&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(Z,{children:[l.jsx(de,{children:l.jsx(he,{children:"7-Month Trend"})}),l.jsx(ee,{children:l.jsx("div",{className:"h-64",children:l.jsx(Bi,{width:"100%",height:"100%",children:l.jsxs(UD,{data:B,children:[l.jsx(Ca,{dataKey:"monthName",tick:{fontSize:10,fill:e?"#94a3b8":"#64748b"},axisLine:!1,tickLine:!1}),l.jsx(Ta,{hide:!0}),l.jsx(Vs,{formatter:(q,me)=>[ue(q),me==="netFlow"?"Net Flow":me==="cumulativeBalance"?"Balance":me],labelStyle:{color:e?"#fff":"#000"},contentStyle:{backgroundColor:e?"#1e293b":"#fff",border:e?"1px solid #334155":"1px solid #e2e8f0",borderRadius:"6px"}}),l.jsx(n0,{type:"monotone",dataKey:"netFlow",stroke:"#2563eb",strokeWidth:2,dot:{fill:"#2563eb",strokeWidth:2,r:3},name:"Net Flow"}),l.jsx(n0,{type:"monotone",dataKey:"cumulativeBalance",stroke:"#16a34a",strokeWidth:2,dot:{fill:"#16a34a",strokeWidth:2,r:3},name:"Balance"})]})})})})]}),l.jsxs(Z,{children:[l.jsx(de,{children:l.jsx(he,{children:"Income vs Expenses"})}),l.jsx(ee,{children:l.jsx("div",{className:"h-64",children:l.jsx(Bi,{width:"100%",height:"100%",children:l.jsxs(HJ,{data:B,children:[l.jsx(Ca,{dataKey:"monthName",tick:{fontSize:10,fill:e?"#94a3b8":"#64748b"},axisLine:!1,tickLine:!1}),l.jsx(Ta,{hide:!0}),l.jsx(Vs,{formatter:(q,me)=>[ue(q),me],labelStyle:{color:e?"#fff":"#000"},contentStyle:{backgroundColor:e?"#1e293b":"#fff",border:e?"1px solid #334155":"1px solid #e2e8f0",borderRadius:"6px"}}),l.jsx(Jf,{type:"monotone",dataKey:"income",stackId:"1",stroke:"#16a34a",fill:"#16a34a",fillOpacity:.6,name:"Income"}),l.jsx(Jf,{type:"monotone",dataKey:"expenses",stackId:"2",stroke:"#dc2626",fill:"#dc2626",fillOpacity:.6,name:"Expenses"})]})})})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(Z,{children:[l.jsx(de,{children:l.jsx(he,{children:"Income Categories"})}),l.jsx(ee,{children:F.income.length>0?l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsx("div",{className:"h-32 w-32",children:l.jsx(Bi,{width:"100%",height:"100%",children:l.jsx(r0,{children:l.jsx(Ph,{data:F.income,cx:"50%",cy:"50%",innerRadius:30,outerRadius:60,dataKey:"value",children:F.income.map((q,me)=>l.jsx(ul,{fill:q.color},`income-${me}`))})})})}),l.jsx("div",{className:"flex-1 space-y-2",children:F.income.map((q,me)=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:q.color}}),l.jsx("span",{className:"text-sm",children:q.name})]}),l.jsx("span",{className:"text-sm font-medium",children:ue(q.value)})]},me))})]}):l.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No actual income transactions yet"})})]}),l.jsxs(Z,{children:[l.jsx(de,{children:l.jsx(he,{children:"Expense Categories"})}),l.jsx(ee,{children:F.expense.length>0?l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsx("div",{className:"h-32 w-32",children:l.jsx(Bi,{width:"100%",height:"100%",children:l.jsx(r0,{children:l.jsx(Ph,{data:F.expense,cx:"50%",cy:"50%",innerRadius:30,outerRadius:60,dataKey:"value",children:F.expense.map((q,me)=>l.jsx(ul,{fill:q.color},`expense-${me}`))})})})}),l.jsx("div",{className:"flex-1 space-y-2",children:F.expense.map((q,me)=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:q.color}}),l.jsx("span",{className:"text-sm",children:q.name})]}),l.jsx("span",{className:"text-sm font-medium",children:ue(q.value)})]},me))})]}):l.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No actual expense transactions yet"})})]})]})]}),l.jsx(xt,{open:b,onOpenChange:S,children:l.jsxs(ft,{className:"max-w-md",children:[l.jsx(ht,{children:l.jsx(pt,{children:"Edit Transaction"})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(X,{htmlFor:"editAmount",children:"Amount (kr)"}),l.jsx(re,{id:"editAmount",type:"number",value:L.amount,onChange:q=>P(me=>({...me,amount:q.target.value}))})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"editDescription",children:"Description"}),l.jsx(re,{id:"editDescription",value:L.description,onChange:q=>P(me=>({...me,description:q.target.value}))})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"editCategory",children:"Category"}),l.jsx(re,{id:"editCategory",value:L.category,onChange:q=>P(me=>({...me,category:q.target.value}))})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"editDate",children:"Date"}),l.jsx(re,{id:"editDate",type:"date",value:L.date,onChange:q=>P(me=>({...me,date:q.target.value}))})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(H,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),l.jsx(H,{onClick:oe,children:"Save Changes"})]})]})]})}),l.jsx(xt,{open:E,onOpenChange:N,children:l.jsxs(ft,{className:"max-w-md",children:[l.jsx(ht,{children:l.jsx(pt,{children:"Delete Transaction"})}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("p",{children:['Are you sure you want to delete "',_==null?void 0:_.description,'"?']}),(_==null?void 0:_.is_recurring)&&l.jsx("div",{className:"bg-orange-50 border border-orange-200 p-3 rounded-lg",children:l.jsxs("p",{className:"text-sm text-orange-800",children:[l.jsx("strong",{children:"Note:"})," This is a recurring transaction. Deleting it will remove the original entry and stop all future recurring instances."]})}),((pe=_==null?void 0:_.id)==null?void 0:pe.includes("_recurring_"))&&l.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-lg",children:l.jsxs("p",{className:"text-sm text-blue-800",children:[l.jsx("strong",{children:"Note:"})," This will delete the original recurring entry and stop all future instances."]})})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(H,{variant:"outline",onClick:()=>N(!1),children:"Cancel"}),l.jsx(H,{variant:"destructive",onClick:le,children:"Delete"})]})]})})]})}function K9e(){const{projects:e,loading:t,error:n,addProject:r,updateProject:i,deleteProject:s}=er(),{clients:a,loading:o}=Tn(),c=Xh(),[u,d]=w.useState(""),[f,h]=w.useState(!1),[p,m]=w.useState(null),[g,v]=w.useState("all"),[y,x]=w.useState("all");w.useEffect(()=>{c.projectModalOpen&&(h(!0),c.setProjectModalOpen(!1))},[c.projectModalOpen,c]);const[b,S]=w.useState({name:"",color:"#3B82F6",description:"",client_id:"",status:"planning",start_date:"",end_date:"",budget:void 0,hourly_rate:void 0}),E=e.filter(I=>{var R,F;const M=a.find(O=>O.id===I.client_id),L=I.name.toLowerCase().includes(u.toLowerCase())||((R=I.description)==null?void 0:R.toLowerCase().includes(u.toLowerCase()))||(M==null?void 0:M.name.toLowerCase().includes(u.toLowerCase()))||((F=M==null?void 0:M.company)==null?void 0:F.toLowerCase().includes(u.toLowerCase())),P=g==="all"||I.status===g,B=y==="all"||I.client_id===y;return L&&P&&B}),N=async I=>{I.preventDefault();try{p?(await i({...b,id:p.id}),m(null)):await r(b),S({name:"",color:"#3B82F6",description:"",client_id:"",status:"planning",start_date:"",end_date:"",budget:void 0,hourly_rate:void 0}),h(!1)}catch(M){console.error("Error saving project:",M)}},_=I=>{m(I),S({name:I.name,color:I.color,description:I.description||"",client_id:I.client_id||"",status:I.status||"planning",start_date:I.start_date||"",end_date:I.end_date||"",budget:I.budget||void 0,hourly_rate:I.hourly_rate||void 0}),h(!0)},k=async I=>{if(window.confirm("Are you sure you want to delete this project? This action cannot be undone."))try{await s(I)}catch(M){console.error("Error deleting project:",M)}},T=async I=>{try{await i({id:I,status:"cancelled"})}catch(M){console.error("Error archiving project:",M)}},A=async I=>{try{await i({id:I,status:"active"})}catch(M){console.error("Error activating project:",M)}},j=I=>{switch(I){case"active":return{icon:Er,color:"text-green-600",bg:"bg-green-50 dark:bg-green-900/20"};case"completed":return{icon:Er,color:"text-blue-600",bg:"bg-blue-50 dark:bg-blue-900/20"};case"on-hold":return{icon:gt,color:"text-yellow-600",bg:"bg-yellow-50 dark:bg-yellow-900/20"};case"cancelled":return{icon:L0,color:"text-red-600",bg:"bg-red-50 dark:bg-red-900/20"};case"planning":return{icon:gt,color:"text-gray-600",bg:"bg-gray-50 dark:bg-gray-900/20"};default:return{icon:Er,color:"text-green-600",bg:"bg-green-50 dark:bg-green-900/20"}}},D=I=>{if(!I.start_date)return null;const M=new Date(I.start_date),L=I.end_date?new Date(I.end_date):new Date,P=new Date,B=Math.max(1,(L.getTime()-M.getTime())/(1e3*60*60*24)),R=Math.max(0,(P.getTime()-M.getTime())/(1e3*60*60*24));return Math.min(100,Math.max(0,R/B*100))};return t||o?l.jsx("div",{className:"space-y-6",children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Projects"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading projects..."})]})})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Projects"}),l.jsx("p",{className:"text-muted-foreground",children:"Manage your projects and track progress"})]}),l.jsxs(H,{onClick:()=>h(!0),className:"flex items-center gap-2",children:[l.jsx(Xe,{className:"h-4 w-4"}),"Add Project"]})]}),n&&l.jsx(Z,{className:"border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-900/20",children:l.jsx(ee,{className:"pt-6",children:l.jsx("p",{className:"text-red-600 dark:text-red-400",children:n})})}),a.length===0&&l.jsx(Z,{className:"border-yellow-200 bg-yellow-50 dark:border-yellow-800 dark:bg-yellow-900/20",children:l.jsx(ee,{className:"pt-6",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(gd,{className:"h-5 w-5 text-yellow-600"}),l.jsxs("p",{className:"text-yellow-800 dark:text-yellow-200",children:["You need to add clients first before creating projects.",l.jsx("a",{href:"/clients",className:"underline font-medium ml-1",children:"Go to Clients"})]})]})})}),l.jsx(Z,{children:l.jsx(ee,{className:"pt-6",children:l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx(Jh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(re,{placeholder:"Search projects...",value:u,onChange:I=>d(I.target.value),className:"pl-10"})]}),l.jsxs("select",{value:g,onChange:I=>v(I.target.value),className:"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Filter projects by status",children:[l.jsx("option",{value:"all",children:"All Statuses"}),l.jsx("option",{value:"planning",children:"Planning"}),l.jsx("option",{value:"active",children:"Active"}),l.jsx("option",{value:"completed",children:"Completed"}),l.jsx("option",{value:"on-hold",children:"On Hold"}),l.jsx("option",{value:"cancelled",children:"Cancelled"})]}),l.jsxs("select",{value:y,onChange:I=>x(I.target.value),className:"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Filter projects by client",children:[l.jsx("option",{value:"all",children:"All Clients"}),a.map(I=>l.jsxs("option",{value:I.id,children:[I.name," ",I.company?`(${I.company})`:""]},I.id))]})]})})}),f&&l.jsxs(Z,{children:[l.jsx(de,{children:l.jsx(he,{children:p?"Edit Project":"Add New Project"})}),l.jsx(ee,{children:l.jsxs("form",{onSubmit:N,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Project Name *"}),l.jsx(re,{value:b.name,onChange:I=>S({...b,name:I.target.value}),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Client *"}),l.jsxs("select",{value:b.client_id||"",onChange:I=>S({...b,client_id:I.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,"aria-label":"Select client for project",children:[l.jsx("option",{value:"",children:"Select a client"}),a.filter(I=>I.status==="active").map(I=>l.jsxs("option",{value:I.id,children:[I.name," ",I.company?`(${I.company})`:""]},I.id))]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),l.jsx("textarea",{value:b.description,onChange:I=>S({...b,description:I.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[80px]",placeholder:"Project description..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),l.jsxs("select",{value:b.status,onChange:I=>S({...b,status:I.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Project status",children:[l.jsx("option",{value:"planning",children:"Planning"}),l.jsx("option",{value:"active",children:"Active"}),l.jsx("option",{value:"completed",children:"Completed"}),l.jsx("option",{value:"on-hold",children:"On Hold"}),l.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Color"}),l.jsx(re,{type:"color",value:b.color,onChange:I=>S({...b,color:I.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Start Date"}),l.jsx(re,{type:"date",value:b.start_date,onChange:I=>S({...b,start_date:I.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"End Date"}),l.jsx(re,{type:"date",value:b.end_date,onChange:I=>S({...b,end_date:I.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Budget (SEK)"}),l.jsx(re,{type:"number",step:"0.01",value:b.budget||"",onChange:I=>S({...b,budget:I.target.value?parseFloat(I.target.value):void 0})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Hourly Rate (SEK)"}),l.jsx(re,{type:"number",step:"0.01",value:b.hourly_rate||"",onChange:I=>S({...b,hourly_rate:I.target.value?parseFloat(I.target.value):void 0})})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Project Summary"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure your project settings above. Use the color to help identify projects in time tracking."})]})]}),l.jsxs("div",{className:"flex gap-2 pt-4",children:[l.jsx(H,{type:"submit",children:p?"Update Project":"Add Project"}),l.jsx(H,{type:"button",variant:"outline",onClick:()=>{h(!1),m(null),S({name:"",color:"#3B82F6",description:"",client_id:"",status:"planning",start_date:"",end_date:"",budget:void 0,hourly_rate:void 0})},children:"Cancel"})]})]})})]}),E.length===0?l.jsx(Z,{children:l.jsx(ee,{className:"pt-6",children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx(Mm,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),l.jsx("h3",{className:"text-lg font-medium mb-2",children:"No projects found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:u||g!=="all"||y!=="all"?"Try adjusting your search or filter criteria.":"Get started by adding your first project."}),!u&&g==="all"&&y==="all"&&a.length>0&&l.jsxs(H,{onClick:()=>h(!0),children:[l.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Add Your First Project"]})]})})}):l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:E.map(I=>{var R;const M=j(I.status),L=M.icon,P=a.find(F=>F.id===I.client_id),B=D(I);return l.jsxs(Z,{className:"hover:shadow-lg transition-shadow",children:[l.jsx(de,{className:"pb-3",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx(he,{className:"text-lg",children:I.name}),P&&l.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1 mt-1",children:[l.jsx(Ei,{className:"h-3 w-3"}),P.name,P.company&&l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(cO,{className:"h-3 w-3"}),P.company]})]})]}),l.jsxs("div",{className:`px-2 py-1 rounded-full flex items-center gap-1 ${M.bg}`,children:[l.jsx(L,{className:`h-3 w-3 ${M.color}`}),l.jsx("span",{className:`text-xs font-medium capitalize ${M.color}`,children:((R=I.status)==null?void 0:R.replace("-"," "))||"planning"})]})]})}),l.jsxs(ee,{className:"space-y-3",children:[I.description&&l.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:I.description}),(I.start_date||I.end_date)&&l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx(Lt,{className:"h-4 w-4 text-muted-foreground"}),l.jsxs("span",{children:[I.start_date&&new Date(I.start_date).toLocaleDateString("sv-SE"),I.start_date&&I.end_date&&" - ",I.end_date&&new Date(I.end_date).toLocaleDateString("sv-SE")]})]}),B!==null&&I.status==="active"&&l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex justify-between text-xs",children:[l.jsx("span",{children:"Progress"}),l.jsxs("span",{children:[Math.round(B),"%"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${B}%`}})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[I.budget&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Wi,{className:"h-3 w-3 text-muted-foreground"}),l.jsx("span",{children:ue(I.budget)})]}),I.hourly_rate&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(gt,{className:"h-3 w-3 text-muted-foreground"}),l.jsxs("span",{children:[ue(I.hourly_rate),"/h"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:I.color||"#3B82F6"}}),l.jsx("span",{children:"Project Color"})]}),l.jsxs("div",{className:"flex gap-2 pt-2",children:[l.jsxs(H,{size:"sm",variant:"outline",onClick:()=>_(I),className:"flex-1",children:[l.jsx(uo,{className:"h-3 w-3 mr-1"}),"Edit"]}),I.status!=="cancelled"?l.jsx(H,{size:"sm",variant:"outline",onClick:()=>T(I.id),children:l.jsx(iV,{className:"h-3 w-3"})}):l.jsx(H,{size:"sm",variant:"outline",onClick:()=>A(I.id),children:l.jsx(Er,{className:"h-3 w-3"})}),l.jsx(H,{size:"sm",variant:"outline",onClick:()=>k(I.id),className:"text-red-600 hover:text-red-700",children:l.jsx(lr,{className:"h-3 w-3"})})]})]})]},I.id)})}),l.jsx(Z,{children:l.jsx(ee,{className:"pt-6",children:l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-4 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.filter(I=>I.status==="active").length}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Active"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.filter(I=>I.status==="completed").length}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Completed"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:e.filter(I=>I.status==="on-hold").length}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"On Hold"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-red-600",children:e.filter(I=>I.status==="cancelled").length}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Cancelled"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold",children:e.length}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Projects"})]})]})})})]})}var Xee="AlertDialog",[G9e,Act]=ru(Xee,[aZ]),wl=aZ(),Qee=e=>{const{__scopeAlertDialog:t,...n}=e,r=wl(t);return l.jsx(EZ,{...r,...n,modal:!0})};Qee.displayName=Xee;var Y9e="AlertDialogTrigger",X9e=w.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=wl(n);return l.jsx(SZ,{...i,...r,ref:t})});X9e.displayName=Y9e;var Q9e="AlertDialogPortal",Jee=e=>{const{__scopeAlertDialog:t,...n}=e,r=wl(t);return l.jsx(NZ,{...r,...n})};Jee.displayName=Q9e;var J9e="AlertDialogOverlay",Zee=w.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=wl(n);return l.jsx(YD,{...i,...r,ref:t})});Zee.displayName=J9e;var nh="AlertDialogContent",[Z9e,e7e]=G9e(nh),t7e=Vpe("AlertDialogContent"),ete=w.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...i}=e,s=wl(n),a=w.useRef(null),o=fn(t,a),c=w.useRef(null);return l.jsx(AFe,{contentName:nh,titleName:tte,docsSlug:"alert-dialog",children:l.jsx(Z9e,{scope:n,cancelRef:c,children:l.jsxs(XD,{role:"alertdialog",...s,...i,ref:o,onOpenAutoFocus:$t(i.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[l.jsx(t7e,{children:r}),l.jsx(r7e,{contentRef:a})]})})})});ete.displayName=nh;var tte="AlertDialogTitle",nte=w.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=wl(n);return l.jsx(QD,{...i,...r,ref:t})});nte.displayName=tte;var rte="AlertDialogDescription",ite=w.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=wl(n);return l.jsx(JD,{...i,...r,ref:t})});ite.displayName=rte;var n7e="AlertDialogAction",ste=w.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=wl(n);return l.jsx(ZD,{...i,...r,ref:t})});ste.displayName=n7e;var ate="AlertDialogCancel",ote=w.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:i}=e7e(ate,n),s=wl(n),a=fn(t,i);return l.jsx(ZD,{...s,...r,ref:a})});ote.displayName=ate;var r7e=({contentRef:e})=>{const t=`\`${nh}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${nh}\` by passing a \`${rte}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${nh}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return w.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},i7e=Qee,s7e=Jee,lte=Zee,cte=ete,ute=ste,dte=ote,fte=nte,hte=ite;const pte=i7e,a7e=s7e,mte=w.forwardRef(({className:e,...t},n)=>l.jsx(lte,{className:Re("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));mte.displayName=lte.displayName;const uM=w.forwardRef(({className:e,...t},n)=>l.jsxs(a7e,{children:[l.jsx(mte,{}),l.jsx(cte,{ref:n,className:Re("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));uM.displayName=cte.displayName;const dM=({className:e,...t})=>l.jsx("div",{className:Re("flex flex-col space-y-2 text-center sm:text-left",e),...t});dM.displayName="AlertDialogHeader";const fM=({className:e,...t})=>l.jsx("div",{className:Re("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});fM.displayName="AlertDialogFooter";const hM=w.forwardRef(({className:e,...t},n)=>l.jsx(fte,{ref:n,className:Re("text-lg font-semibold",e),...t}));hM.displayName=fte.displayName;const pM=w.forwardRef(({className:e,...t},n)=>l.jsx(hte,{ref:n,className:Re("text-sm text-muted-foreground",e),...t}));pM.displayName=hte.displayName;const mM=w.forwardRef(({className:e,...t},n)=>l.jsx(ute,{ref:n,className:Re(kO(),e),...t}));mM.displayName=ute.displayName;const gM=w.forwardRef(({className:e,...t},n)=>l.jsx(dte,{ref:n,className:Re(kO({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));gM.displayName=dte.displayName;function Lr(e){this.content=e}Lr.prototype={constructor:Lr,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),s=r.content.slice();return i==-1?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new Lr(s)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new Lr(n)},addToStart:function(e,t){return new Lr([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Lr(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),s=r.find(e);return i.splice(s==-1?i.length:s,0,t,n),new Lr(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Lr.from(e),e.size?new Lr(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Lr.from(e),e.size?new Lr(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Lr.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};Lr.from=function(e){if(e instanceof Lr)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Lr(t)};function gte(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),s=t.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let a=0;i.text[a]==s.text[a];a++)n++;return n}if(i.content.size||s.content.size){let a=gte(i.content,s.content,n+1);if(a!=null)return a}n+=i.nodeSize}}function vte(e,t,n,r){for(let i=e.childCount,s=t.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let a=e.child(--i),o=t.child(--s),c=a.nodeSize;if(a==o){n-=c,r-=c;continue}if(!a.sameMarkup(o))return{a:n,b:r};if(a.isText&&a.text!=o.text){let u=0,d=Math.min(a.text.length,o.text.length);for(;u<d&&a.text[a.text.length-u-1]==o.text[o.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(a.content.size||o.content.size){let u=vte(a.content,o.content,n-1,r-1);if(u)return u}n-=c,r-=c}}class ve{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,i=0,s){for(let a=0,o=0;o<n;a++){let c=this.content[a],u=o+c.nodeSize;if(u>t&&r(c,i+o,s||null,a)!==!1&&c.content.size){let d=o+1;c.nodesBetween(Math.max(0,t-d),Math.min(c.content.size,n-d),r,i+d)}o=u}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,i){let s="",a=!0;return this.nodesBetween(t,n,(o,c)=>{let u=o.isText?o.text.slice(Math.max(t,c)-c,n-c):o.isLeaf?i?typeof i=="function"?i(o):i:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&u||o.isTextblock)&&r&&(a?a=!1:s+=r),s+=u},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<t.content.length;s++)i.push(t.content[s]);return new ve(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],i=0;if(n>t)for(let s=0,a=0;a<n;s++){let o=this.content[s],c=a+o.nodeSize;c>t&&((a<t||c>n)&&(o.isText?o=o.cut(Math.max(0,t-a),Math.min(o.text.length,n-a)):o=o.cut(Math.max(0,t-a-1),Math.min(o.content.size,n-a-1))),r.push(o),i+=o.nodeSize),a=c}return new ve(r,i)}cutByIndex(t,n){return t==n?ve.empty:t==0&&n==this.content.length?this:new ve(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new ve(i,s)}addToStart(t){return new ve([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new ve(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];t(i,r,n),r+=i.nodeSize}}findDiffStart(t,n=0){return gte(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return vte(this,t,n,r)}findIndex(t){if(t==0)return Dy(0,t);if(t==this.size)return Dy(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=t)return s==t?Dy(n+1,s):Dy(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return ve.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new ve(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return ve.empty;let n,r=0;for(let i=0;i<t.length;i++){let s=t[i];r+=s.nodeSize,i&&s.isText&&t[i-1].sameMarkup(s)?(n||(n=t.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new ve(n||t,r)}static from(t){if(!t)return ve.empty;if(t instanceof ve)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new ve([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ve.empty=new ve([],0);const gk={index:0,offset:0};function Dy(e,t){return gk.index=e,gk.offset=t,gk}function j1(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!j1(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!j1(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let zt=class sA{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let i=0;i<t.length;i++){let s=t[i];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,i));else{if(s.type.excludes(this.type))return t;!r&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&j1(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return sA.none;if(t instanceof sA)return[t];let n=t.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};zt.none=[];class O1 extends Error{}class Ie{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=xte(this.content,t+this.openStart,n);return r&&new Ie(r,this.openStart,this.openEnd)}removeBetween(t,n){return new Ie(yte(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return Ie.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Ie(ve.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let s=t.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new Ie(t,r,i)}}Ie.empty=new Ie(ve.empty,0,0);function yte(e,t,n){let{index:r,offset:i}=e.findIndex(t),s=e.maybeChild(r),{index:a,offset:o}=e.findIndex(n);if(i==t||s.isText){if(o!=n&&!e.child(a).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=a)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(yte(s.content,t-i-1,n-i-1)))}function xte(e,t,n,r){let{index:i,offset:s}=e.findIndex(t),a=e.maybeChild(i);if(s==t||a.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let o=xte(a.content,t-s-1,n,a);return o&&e.replaceChild(i,a.copy(o))}function o7e(e,t,n){if(n.openStart>e.depth)throw new O1("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new O1("Inconsistent open depths");return bte(e,t,n,0)}function bte(e,t,n,r){let i=e.index(r),s=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let a=bte(e,t,n,r+1);return s.copy(s.content.replaceChild(i,a))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let a=e.parent,o=a.content;return id(a,o.cut(0,e.parentOffset).append(n.content).append(o.cut(t.parentOffset)))}else{let{start:a,end:o}=l7e(n,e);return id(s,Ete(e,a,o,t,r))}else return id(s,P1(e,t,r))}function wte(e,t){if(!t.type.compatibleContent(e.type))throw new O1("Cannot join "+t.type.name+" onto "+e.type.name)}function aA(e,t,n){let r=e.node(n);return wte(r,t.node(n)),r}function rd(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function qm(e,t,n,r){let i=(t||e).node(n),s=0,a=t?t.index(n):i.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(rd(e.nodeAfter,r),s++));for(let o=s;o<a;o++)rd(i.child(o),r);t&&t.depth==n&&t.textOffset&&rd(t.nodeBefore,r)}function id(e,t){return e.type.checkContent(t),e.copy(t)}function Ete(e,t,n,r,i){let s=e.depth>i&&aA(e,t,i+1),a=r.depth>i&&aA(n,r,i+1),o=[];return qm(null,e,i,o),s&&a&&t.index(i)==n.index(i)?(wte(s,a),rd(id(s,Ete(e,t,n,r,i+1)),o)):(s&&rd(id(s,P1(e,t,i+1)),o),qm(t,n,i,o),a&&rd(id(a,P1(n,r,i+1)),o)),qm(r,null,i,o),new ve(o)}function P1(e,t,n){let r=[];if(qm(null,e,n,r),e.depth>n){let i=aA(e,t,n+1);rd(id(i,P1(e,t,n+1)),r)}return qm(t,null,n,r),new ve(r)}function l7e(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let s=n-1;s>=0;s--)i=t.node(s).copy(ve.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}class o0{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(n);return r?t.child(n).cut(r):i}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<t;s++)i+=r.child(s).nodeSize;return i}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return zt.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),i=t.maybeChild(n);if(!r){let o=r;r=i,i=o}let s=r.marks;for(var a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!i||!s[a].isInSet(i.marks))&&(s=s[a--].removeFromSet(s));return s}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=t.parent.maybeChild(t.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new I1(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let a=t;;){let{index:o,offset:c}=a.content.findIndex(s),u=s-c;if(r.push(a,o,i+c),!u||(a=a.child(o),a.isText))break;s=u-1,i+=c+1}return new o0(n,r,s)}static resolveCached(t,n){let r=A8.get(t);if(r)for(let s=0;s<r.elts.length;s++){let a=r.elts[s];if(a.pos==n)return a}else A8.set(t,r=new c7e);let i=r.elts[r.i]=o0.resolve(t,n);return r.i=(r.i+1)%u7e,i}}class c7e{constructor(){this.elts=[],this.i=0}}const u7e=12,A8=new WeakMap;class I1{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const d7e=Object.create(null);let wc=class oA{constructor(t,n,r,i=zt.none){this.type=t,this.attrs=n,this.marks=i,this.content=r||ve.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,i=0){this.content.nodesBetween(t,n,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,i){return this.content.textBetween(t,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&j1(this.attrs,n||t.defaultAttrs||d7e)&&zt.sameSet(this.marks,r||zt.none)}copy(t=null){return t==this.content?this:new oA(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new oA(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return Ie.empty;let i=this.resolve(t),s=this.resolve(n),a=r?0:i.sharedDepth(n),o=i.start(a),u=i.node(a).content.cut(i.pos-o,s.pos-o);return new Ie(u,i.depth-a,s.depth-a)}replace(t,n,r){return o7e(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(i==t||n.isText)return n;t-=i+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(t){return o0.resolveCached(this,t)}resolveNoCache(t){return o0.resolve(this,t)}rangeHasMark(t,n,r){let i=!1;return n>t&&this.nodesBetween(t,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),Ste(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=ve.empty,i=0,s=r.childCount){let a=this.contentMatchAt(t).matchFragment(r,i,s),o=a&&a.matchFragment(this.content,n);if(!o||!o.validEnd)return!1;for(let c=i;c<s;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(t,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(t).matchType(r),a=s&&s.matchFragment(this.content,n);return a?a.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=zt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!zt.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let i=ve.fromJSON(t,n.content),s=t.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};wc.prototype.text=void 0;class D1 extends wc{constructor(t,n,r,i){if(super(t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Ste(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new D1(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new D1(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function Ste(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class Td{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new f7e(t,n);if(r.next==null)return Td.empty;let i=Nte(r);r.next&&r.err("Unexpected trailing text");let s=x7e(y7e(i));return b7e(s,r),s}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(t.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let i=[this];function s(a,o){let c=a.matchFragment(t,r);if(c&&(!n||c.validEnd))return ve.from(o.map(u=>u.createAndFill()));for(let u=0;u<a.next.length;u++){let{type:d,next:f}=a.next[u];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let h=s(f,o.concat(d));if(h)return h}}return null}return s(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(t)){let a=[];for(let o=i;o.type;o=o.via)a.push(o.type);return a.reverse()}for(let a=0;a<s.next.length;a++){let{type:o,next:c}=s.next[a];!o.isLeaf&&!o.hasRequiredAttrs()&&!(o.name in n)&&(!i.type||c.validEnd)&&(r.push({match:o.contentMatch,type:o,via:i}),n[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),t.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)s+=(a?", ":"")+r.next[a].type.name+"->"+t.indexOf(r.next[a].next);return s}).join(`
`)}}Td.empty=new Td(!0);class f7e{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function Nte(e){let t=[];do t.push(h7e(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function h7e(e){let t=[];do t.push(p7e(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function p7e(e){let t=v7e(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=m7e(e,t);else break;return t}function j8(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function m7e(e,t){let n=j8(e),r=n;return e.eat(",")&&(e.next!="}"?r=j8(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function g7e(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let s in n){let a=n[s];a.isInGroup(t)&&i.push(a)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function v7e(e){if(e.eat("(")){let t=Nte(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=g7e(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function y7e(e){let t=[[]];return i(s(e,0),n()),t;function n(){return t.push([])-1}function r(a,o,c){let u={term:c,to:o};return t[a].push(u),u}function i(a,o){a.forEach(c=>c.to=o)}function s(a,o){if(a.type=="choice")return a.exprs.reduce((c,u)=>c.concat(s(u,o)),[]);if(a.type=="seq")for(let c=0;;c++){let u=s(a.exprs[c],o);if(c==a.exprs.length-1)return u;i(u,o=n())}else if(a.type=="star"){let c=n();return r(o,c),i(s(a.expr,c),c),[r(c)]}else if(a.type=="plus"){let c=n();return i(s(a.expr,o),c),i(s(a.expr,c),c),[r(c)]}else{if(a.type=="opt")return[r(o)].concat(s(a.expr,o));if(a.type=="range"){let c=o;for(let u=0;u<a.min;u++){let d=n();i(s(a.expr,c),d),c=d}if(a.max==-1)i(s(a.expr,c),c);else for(let u=a.min;u<a.max;u++){let d=n();r(c,d),i(s(a.expr,c),d),c=d}return[r(c)]}else{if(a.type=="name")return[r(o,void 0,a.value)];throw new Error("Unknown expr type")}}}}function _te(e,t){return t-e}function O8(e,t){let n=[];return r(t),n.sort(_te);function r(i){let s=e[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let a=0;a<s.length;a++){let{term:o,to:c}=s[a];!o&&n.indexOf(c)==-1&&r(c)}}}function x7e(e){let t=Object.create(null);return n(O8(e,0));function n(r){let i=[];r.forEach(a=>{e[a].forEach(({term:o,to:c})=>{if(!o)return;let u;for(let d=0;d<i.length;d++)i[d][0]==o&&(u=i[d][1]);O8(e,c).forEach(d=>{u||i.push([o,u=[]]),u.indexOf(d)==-1&&u.push(d)})})});let s=t[r.join(",")]=new Td(r.indexOf(e.length-1)>-1);for(let a=0;a<i.length;a++){let o=i[a][1].sort(_te);s.next.push({type:i[a][0],next:t[o.join(",")]||n(o)})}return s}}function b7e(e,t){for(let n=0,r=[e];n<r.length;n++){let i=r[n],s=!i.validEnd,a=[];for(let o=0;o<i.next.length;o++){let{type:c,next:u}=i.next[o];a.push(c.name),s&&!(c.isText||c.hasRequiredAttrs())&&(s=!1),r.indexOf(u)==-1&&r.push(u)}s&&t.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function kte(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function Cte(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(i===void 0){let s=e[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function Tte(e,t,n,r){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in e){let s=e[i];s.validate&&s.validate(t[i])}}function Ate(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new E7e(e,r,t[r]);return n}let P8=class jte{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Ate(t,r.attrs),this.defaultAttrs=kte(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Td.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:Cte(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new wc(this,this.computeAttrs(t),ve.from(n),zt.setFrom(r))}createChecked(t=null,n,r){return n=ve.from(n),this.checkContent(n),new wc(this,this.computeAttrs(t),n,zt.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=ve.from(n),n.size){let a=this.contentMatch.fillBefore(n);if(!a)return null;n=a.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(ve.empty,!0);return s?new wc(this,t,n.append(s),zt.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){Tte(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:zt.none:t}static compile(t,n){let r=Object.create(null);t.forEach((s,a)=>r[s]=new jte(s,n,a));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function w7e(e,t,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${s}`)}}class E7e{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?w7e(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class zS{constructor(t,n,r,i){this.name=t,this.rank=n,this.schema=r,this.spec=i,this.attrs=Ate(t,i.attrs),this.excluded=null;let s=kte(this.attrs);this.instance=s?new zt(this,s):null}create(t=null){return!t&&this.instance?this.instance:new zt(this,Cte(this.attrs,t))}static compile(t,n){let r=Object.create(null),i=0;return t.forEach((s,a)=>r[s]=new zS(s,i++,n,a)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){Tte(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}let Ote=class{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in t)n[i]=t[i];n.nodes=Lr.from(t.nodes),n.marks=Lr.from(t.marks||{}),this.nodes=P8.compile(this.spec.nodes,this),this.marks=zS.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],a=s.spec.content||"",o=s.spec.marks;if(s.contentMatch=r[a]||(r[a]=Td.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=o=="_"?null:o?I8(this,o.split(" ")):o==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],a=s.spec.excludes;s.excluded=a==null?[s]:a==""?[]:I8(this,a.split(" "))}this.nodeFromJSON=i=>wc.fromJSON(this,i),this.markFromJSON=i=>zt.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof P8){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,i)}text(t,n){let r=this.nodes.text;return new D1(r,r.defaultAttrs,t,zt.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}};function I8(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],s=e.marks[i],a=s;if(s)n.push(s);else for(let o in e.marks){let c=e.marks[o];(i=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&n.push(a=c)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function S7e(e){return e.tag!=null}function N7e(e){return e.style!=null}class Ec{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(S7e(i))this.tags.push(i);else if(N7e(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=t.nodes[i.node];return s.contentMatch.matchType(s)})}parse(t,n={}){let r=new M8(this,n,!1);return r.addAll(t,zt.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new M8(this,n,!0);return r.addAll(t,zt.none,n.from,n.to),Ie.maxOpen(r.finish())}matchTag(t,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(C7e(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let a=s.getAttrs(t);if(a===!1)continue;s.attrs=a||void 0}return s}}}matchStyle(t,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let a=this.styles[s],o=a.style;if(!(o.indexOf(t)!=0||a.context&&!r.matchesContext(a.context)||o.length>t.length&&(o.charCodeAt(t.length)!=61||o.slice(t.length+1)!=n))){if(a.getAttrs){let c=a.getAttrs(n);if(c===!1)continue;a.attrs=c||void 0}return a}}}static schemaRules(t){let n=[];function r(i){let s=i.priority==null?50:i.priority,a=0;for(;a<n.length;a++){let o=n[a];if((o.priority==null?50:o.priority)<s)break}n.splice(a,0,i)}for(let i in t.marks){let s=t.marks[i].spec.parseDOM;s&&s.forEach(a=>{r(a=R8(a)),a.mark||a.ignore||a.clearMark||(a.mark=i)})}for(let i in t.nodes){let s=t.nodes[i].spec.parseDOM;s&&s.forEach(a=>{r(a=R8(a)),a.node||a.ignore||a.mark||(a.node=i)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new Ec(t,Ec.schemaRules(t)))}}const Pte={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},_7e={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Ite={ol:!0,ul:!0},l0=1,lA=2,Km=4;function D8(e,t,n){return t!=null?(t?l0:0)|(t==="full"?lA:0):e&&e.whitespace=="pre"?l0|lA:n&~Km}class My{constructor(t,n,r,i,s,a){this.type=t,this.attrs=n,this.marks=r,this.solid=i,this.options=a,this.content=[],this.activeMarks=zt.none,this.match=s||(a&Km?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(ve.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&l0)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=ve.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(ve.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!Pte.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class M8{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,a=D8(null,n.preserveWhitespace,0)|(r?Km:0);i?s=new My(i.type,i.attrs,zt.none,!0,n.topMatch||i.type.contentMatch,a):r?s=new My(null,null,zt.none,!0,null,a):s=new My(t.schema.topNodeType,null,zt.none,!0,null,a),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,i=this.top,s=i.options&lA?"full":this.localPreserveWS||(i.options&l0)>0;if(s==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],o=t.previousSibling;(!a||o&&o.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let i=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let a=t.nodeName.toLowerCase(),o;Ite.hasOwnProperty(a)&&this.parser.normalizeLists&&k7e(t);let c=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(o=this.parser.matchTag(t,this,r));e:if(c?c.ignore:_7e.hasOwnProperty(a))this.findInside(t),this.ignoreFallback(t,n);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(t=c.skip);let u,d=this.needsBlock;if(Pte.hasOwnProperty(a))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),u=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let f=c&&c.skip?n:this.readStyles(t,n);f&&this.addAll(t,f),u&&this.sync(s),this.needsBlock=d}else{let u=this.readStyles(t,n);u&&this.addElementByRule(t,c,u,c.consuming===!1?o:void 0)}this.localPreserveWS=i}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],a=r.getPropertyValue(s);if(a)for(let o=void 0;;){let c=this.parser.matchStyle(s,a,this,o);if(!c)break;if(c.ignore)return null;if(c.clearMark?n=n.filter(u=>!c.clearMark(u)):n=n.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)o=c;else break}}return n}addElementByRule(t,n,r,i){let s,a;if(n.node)if(a=this.parser.schema.nodes[n.node],a.isLeaf)this.insertNode(a.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let c=this.enter(a,n.attrs||null,r,n.preserveWhitespace);c&&(s=!0,r=c)}else{let c=this.parser.schema.marks[n.mark];r=r.concat(c.create(n.attrs))}let o=this.top;if(a&&a.isLeaf)this.findInside(t);else if(i)this.addElement(t,r,i);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(c=>this.insertNode(c,r,!1));else{let c=t;typeof n.contentElement=="string"?c=t.querySelector(n.contentElement):typeof n.contentElement=="function"?c=n.contentElement(t):n.contentElement&&(c=n.contentElement),this.findAround(t,c,!0),this.addAll(c,r),this.findAround(t,c,!1)}s&&this.sync(o)&&this.open--}addAll(t,n,r,i){let s=r||0;for(let a=r?t.childNodes[r]:t.firstChild,o=i==null?null:t.childNodes[i];a!=o;a=a.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(a,n);this.findAtPoint(t,s)}findPlace(t,n,r){let i,s;for(let a=this.open,o=0;a>=0;a--){let c=this.nodes[a],u=c.findWrapping(t);if(u&&(!i||i.length>u.length+o)&&(i=u,s=c,!u.length))break;if(c.solid){if(r)break;o+=2}}if(!i)return null;this.sync(s);for(let a=0;a<i.length;a++)n=this.enterInner(i[a],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(t,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let a=zt.none;for(let o of i.concat(t.marks))(s.type?s.type.allowsMarkType(o.type):L8(o.type,t.type))&&(a=o.addToSet(a));return s.content.push(t.mark(a)),!0}return!1}enter(t,n,r,i){let s=this.findPlace(t.create(n),r,!1);return s&&(s=this.enterInner(t,n,r,!0,i)),s}enterInner(t,n,r,i=!1,s){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(t);let o=D8(t,s,a.options);a.options&Km&&a.content.length==0&&(o|=Km);let c=zt.none;return r=r.filter(u=>(a.type?a.type.allowsMarkType(u.type):L8(u.type,t))?(c=u.addToSet(c),!1):!0),this.nodes.push(new My(t,n,c,i,null,o)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=l0)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),a=(o,c)=>{for(;o>=0;o--){let u=n[o];if(u==""){if(o==n.length-1||o==0)continue;for(;c>=s;c--)if(a(o-1,c))return!0;return!1}else{let d=c>0||c==0&&i?this.nodes[c].type:r&&c>=s?r.node(c-s).type:null;if(!d||d.name!=u&&!d.isInGroup(u))return!1;c--}}return!0};return a(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function k7e(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&Ite.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function C7e(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function R8(e){let t={};for(let n in e)t[n]=e[n];return t}function L8(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let s=[],a=o=>{s.push(o);for(let c=0;c<o.edgeCount;c++){let{type:u,next:d}=o.edge(c);if(u==t||s.indexOf(d)<0&&a(d))return!0}};if(a(i.contentMatch))return!0}}class Ud{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=vk(n).createDocumentFragment());let i=r,s=[];return t.forEach(a=>{if(s.length||a.marks.length){let o=0,c=0;for(;o<s.length&&c<a.marks.length;){let u=a.marks[c];if(!this.marks[u.type.name]){c++;continue}if(!u.eq(s[o][0])||u.type.spec.spanning===!1)break;o++,c++}for(;o<s.length;)i=s.pop()[1];for(;c<a.marks.length;){let u=a.marks[c++],d=this.serializeMark(u,a.isInline,n);d&&(s.push([u,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(a,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:i}=jx(vk(n),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let i=t.marks.length-1;i>=0;i--){let s=this.serializeMark(t.marks[i],t.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(t,n,r={}){let i=this.marks[t.type.name];return i&&jx(vk(r),i(t,n),null,t.attrs)}static renderSpec(t,n,r=null,i){return jx(t,n,r,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new Ud(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=F8(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return F8(t.marks)}}function F8(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function vk(e){return e.document||window.document}const B8=new WeakMap;function T7e(e){let t=B8.get(e);return t===void 0&&B8.set(e,t=A7e(e)),t}function A7e(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(e),t}function jx(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=T7e(r))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=i.indexOf(" ");a>0&&(n=i.slice(0,a),i=i.slice(a+1));let o,c=n?e.createElementNS(n,i):e.createElement(i),u=t[1],d=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){d=2;for(let f in u)if(u[f]!=null){let h=f.indexOf(" ");h>0?c.setAttributeNS(f.slice(0,h),f.slice(h+1),u[f]):f=="style"&&c.style?c.style.cssText=u[f]:c.setAttribute(f,u[f])}}for(let f=d;f<t.length;f++){let h=t[f];if(h===0){if(f<t.length-1||f>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:p,contentDOM:m}=jx(e,h,n,r);if(c.appendChild(p),m){if(o)throw new RangeError("Multiple content holes");o=m}}}return{dom:c,contentDOM:o}}const Dte=65535,Mte=Math.pow(2,16);function j7e(e,t){return e+t*Mte}function $8(e){return e&Dte}function O7e(e){return(e-(e&Dte))/Mte}const Rte=1,Lte=2,Ox=4,Fte=8;class cA{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Fte)>0}get deletedBefore(){return(this.delInfo&(Rte|Ox))>0}get deletedAfter(){return(this.delInfo&(Lte|Ox))>0}get deletedAcross(){return(this.delInfo&Ox)>0}}class is{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&is.empty)return is.empty}recover(t){let n=0,r=$8(t);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+O7e(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let i=0,s=this.inverted?2:1,a=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let c=this.ranges[o]-(this.inverted?i:0);if(c>t)break;let u=this.ranges[o+s],d=this.ranges[o+a],f=c+u;if(t<=f){let h=u?t==c?-1:t==f?1:n:n,p=c+i+(h<0?0:d);if(r)return p;let m=t==(n<0?c:f)?null:j7e(o/3,t-c),g=t==c?Lte:t==f?Rte:Ox;return(n<0?t!=c:t!=f)&&(g|=Fte),new cA(p,g,m)}i+=d-u}return r?t+i:new cA(t+i,0,null)}touches(t,n){let r=0,i=$8(n),s=this.inverted?2:1,a=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let c=this.ranges[o]-(this.inverted?r:0);if(c>t)break;let u=this.ranges[o+s],d=c+u;if(t<=d&&o==i*3)return!0;r+=this.ranges[o+a]-u}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let a=this.ranges[i],o=a-(this.inverted?s:0),c=a+(this.inverted?0:s),u=this.ranges[i+n],d=this.ranges[i+r];t(o,o+u,c,c+d),s+=d-u}}invert(){return new is(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?is.empty:new is(t<0?[0,-t,0]:[0,0,t])}}is.empty=new is([]);class c0{constructor(t,n,r=0,i=t?t.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new c0(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let i=t.getMirror(n);this.appendMap(t._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let i=t.getMirror(n);this.appendMap(t._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let t=new c0;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let i=0;for(let s=this.from;s<this.to;s++){let a=this._maps[s],o=a.mapResult(t,n);if(o.recover!=null){let c=this.getMirror(s);if(c!=null&&c>s&&c<this.to){s=c,t=this._maps[c].recover(o.recover);continue}}i|=o.delInfo,t=o.pos}return r?t:new cA(t,i,null)}}const yk=Object.create(null);class ui{getMap(){return is.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=yk[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in yk)throw new RangeError("Duplicate use of step JSON ID "+t);return yk[t]=n,n.prototype.jsonID=t,n}}class Xn{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new Xn(t,null)}static fail(t){return new Xn(null,t)}static fromReplace(t,n,r,i){try{return Xn.ok(t.replace(n,r,i))}catch(s){if(s instanceof O1)return Xn.fail(s.message);throw s}}}function vM(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(vM(s.content,t,s))),s.isInline&&(s=t(s,n,i)),r.push(s)}return ve.fromArray(r)}class tc extends ui{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new Ie(vM(n.content,(a,o)=>!a.isAtom||!o.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),i),n.openStart,n.openEnd);return Xn.fromReplace(t,this.from,this.to,s)}invert(){return new Ea(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new tc(n.pos,r.pos,this.mark)}merge(t){return t instanceof tc&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new tc(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new tc(n.from,n.to,t.markFromJSON(n.mark))}}ui.jsonID("addMark",tc);class Ea extends ui{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new Ie(vM(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return Xn.fromReplace(t,this.from,this.to,r)}invert(){return new tc(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ea(n.pos,r.pos,this.mark)}merge(t){return t instanceof Ea&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Ea(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ea(n.from,n.to,t.markFromJSON(n.mark))}}ui.jsonID("removeMark",Ea);class nc extends ui{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Xn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Xn.fromReplace(t,this.pos,this.pos+1,new Ie(ve.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new nc(this.pos,n.marks[i]);return new nc(this.pos,this.mark)}}return new Ad(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new nc(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new nc(n.pos,t.markFromJSON(n.mark))}}ui.jsonID("addNodeMark",nc);class Ad extends ui{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Xn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Xn.fromReplace(t,this.pos,this.pos+1,new Ie(ve.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new nc(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Ad(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ad(n.pos,t.markFromJSON(n.mark))}}ui.jsonID("removeNodeMark",Ad);class xr extends ui{constructor(t,n,r,i=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=i}apply(t){return this.structure&&uA(t,this.from,this.to)?Xn.fail("Structure replace would overwrite content"):Xn.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new is([this.from,this.to-this.from,this.slice.size])}invert(t){return new xr(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new xr(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof xr)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?Ie.empty:new Ie(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new xr(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?Ie.empty:new Ie(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new xr(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new xr(n.from,n.to,Ie.fromJSON(t,n.slice),!!n.structure)}}ui.jsonID("replace",xr);class kr extends ui{constructor(t,n,r,i,s,a,o=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=a,this.structure=o}apply(t){if(this.structure&&(uA(t,this.from,this.gapFrom)||uA(t,this.gapTo,this.to)))return Xn.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Xn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Xn.fromReplace(t,this.from,this.to,r):Xn.fail("Content does not fit in gap")}getMap(){return new is([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new kr(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new kr(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new kr(n.from,n.to,n.gapFrom,n.gapTo,Ie.fromJSON(t,n.slice),n.insert,!!n.structure)}}ui.jsonID("replaceAround",kr);function uA(e,t,n){let r=e.resolve(t),i=n-t,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let a=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}}return!1}function P7e(e,t,n,r){let i=[],s=[],a,o;e.doc.nodesBetween(t,n,(c,u,d)=>{if(!c.isInline)return;let f=c.marks;if(!r.isInSet(f)&&d.type.allowsMarkType(r.type)){let h=Math.max(u,t),p=Math.min(u+c.nodeSize,n),m=r.addToSet(f);for(let g=0;g<f.length;g++)f[g].isInSet(m)||(a&&a.to==h&&a.mark.eq(f[g])?a.to=p:i.push(a=new Ea(h,p,f[g])));o&&o.to==h?o.to=p:s.push(o=new tc(h,p,r))}}),i.forEach(c=>e.step(c)),s.forEach(c=>e.step(c))}function I7e(e,t,n,r){let i=[],s=0;e.doc.nodesBetween(t,n,(a,o)=>{if(!a.isInline)return;s++;let c=null;if(r instanceof zS){let u=a.marks,d;for(;d=r.isInSet(u);)(c||(c=[])).push(d),u=d.removeFromSet(u)}else r?r.isInSet(a.marks)&&(c=[r]):c=a.marks;if(c&&c.length){let u=Math.min(o+a.nodeSize,n);for(let d=0;d<c.length;d++){let f=c[d],h;for(let p=0;p<i.length;p++){let m=i[p];m.step==s-1&&f.eq(i[p].style)&&(h=m)}h?(h.to=u,h.step=s):i.push({style:f,from:Math.max(o,t),to:u,step:s})}}}),i.forEach(a=>e.step(new Ea(a.from,a.to,a.style)))}function yM(e,t,n,r=n.contentMatch,i=!0){let s=e.doc.nodeAt(t),a=[],o=t+1;for(let c=0;c<s.childCount;c++){let u=s.child(c),d=o+u.nodeSize,f=r.matchType(u.type);if(!f)a.push(new xr(o,d,Ie.empty));else{r=f;for(let h=0;h<u.marks.length;h++)n.allowsMarkType(u.marks[h].type)||e.step(new Ea(o,d,u.marks[h]));if(i&&u.isText&&n.whitespace!="pre"){let h,p=/\r?\n|\r/g,m;for(;h=p.exec(u.text);)m||(m=new Ie(ve.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),a.push(new xr(o+h.index,o+h.index+h[0].length,m))}}o=d}if(!r.validEnd){let c=r.fillBefore(ve.empty,!0);e.replace(o,o,new Ie(c,0,0))}for(let c=a.length-1;c>=0;c--)e.step(a[c])}function D7e(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function bp(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let i=e.$from.node(r),s=e.$from.index(r),a=e.$to.indexAfter(r);if(r<e.depth&&i.canReplace(s,a,n))return r;if(r==0||i.type.spec.isolating||!D7e(i,s,a))break}return null}function M7e(e,t,n){let{$from:r,$to:i,depth:s}=t,a=r.before(s+1),o=i.after(s+1),c=a,u=o,d=ve.empty,f=0;for(let m=s,g=!1;m>n;m--)g||r.index(m)>0?(g=!0,d=ve.from(r.node(m).copy(d)),f++):c--;let h=ve.empty,p=0;for(let m=s,g=!1;m>n;m--)g||i.after(m+1)<i.end(m)?(g=!0,h=ve.from(i.node(m).copy(h)),p++):u++;e.step(new kr(c,u,a,o,new Ie(d.append(h),f,p),d.size-f,!0))}function xM(e,t,n=null,r=e){let i=R7e(e,t),s=i&&L7e(r,t);return s?i.map(U8).concat({type:t,attrs:n}).concat(s.map(U8)):null}function U8(e){return{type:e,attrs:null}}function R7e(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.contentMatchAt(r).findWrapping(t);if(!s)return null;let a=s.length?s[0]:t;return n.canReplaceWith(r,i,a)?s:null}function L7e(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.child(r),a=t.contentMatch.findWrapping(s.type);if(!a)return null;let c=(a.length?a[a.length-1]:t).contentMatch;for(let u=r;c&&u<i;u++)c=c.matchType(n.child(u).type);return!c||!c.validEnd?null:a}function F7e(e,t,n){let r=ve.empty;for(let a=n.length-1;a>=0;a--){if(r.size){let o=n[a].type.contentMatch.matchFragment(r);if(!o||!o.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ve.from(n[a].type.create(n[a].attrs,r))}let i=t.start,s=t.end;e.step(new kr(i,s,i,s,new Ie(r,0,0),n.length,!0))}function B7e(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(a,o)=>{let c=typeof i=="function"?i(a):i;if(a.isTextblock&&!a.hasMarkup(r,c)&&$7e(e.doc,e.mapping.slice(s).map(o),r)){let u=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!m?u=!1:!p&&m&&(u=!0)}u===!1&&$te(e,a,o,s),yM(e,e.mapping.slice(s).map(o,1),r,void 0,u===null);let d=e.mapping.slice(s),f=d.map(o,1),h=d.map(o+a.nodeSize,1);return e.step(new kr(f,h,f+1,h-1,new Ie(ve.from(r.create(c,null,a.marks)),0,0),1,!0)),u===!0&&Bte(e,a,o,s),!1}})}function Bte(e,t,n,r){t.forEach((i,s)=>{if(i.isText){let a,o=/\r?\n|\r/g;for(;a=o.exec(i.text);){let c=e.mapping.slice(r).map(n+1+s+a.index);e.replaceWith(c,c+1,t.type.schema.linebreakReplacement.create())}}})}function $te(e,t,n,r){t.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let a=e.mapping.slice(r).map(n+1+s);e.replaceWith(a,a+1,t.type.schema.text(`
`))}})}function $7e(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function U7e(e,t,n,r,i){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let a=n.create(r,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,a);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new kr(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new Ie(ve.from(a),0,0),1,!0))}function Jo(e,t,n=1,r){let i=e.resolve(t),s=i.depth-n,a=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,d=n-2;u>s;u--,d--){let f=i.node(u),h=i.index(u);if(f.type.spec.isolating)return!1;let p=f.content.cutByIndex(h,f.childCount),m=r&&r[d+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let g=r&&r[d]||f;if(!f.canReplace(h+1,f.childCount)||!g.type.validContent(p))return!1}let o=i.indexAfter(s),c=r&&r[0];return i.node(s).canReplaceWith(o,o,c?c.type:i.node(s+1).type)}function z7e(e,t,n=1,r){let i=e.doc.resolve(t),s=ve.empty,a=ve.empty;for(let o=i.depth,c=i.depth-n,u=n-1;o>c;o--,u--){s=ve.from(i.node(o).copy(s));let d=r&&r[u];a=ve.from(d?d.type.create(d.attrs,a):i.node(o).copy(a))}e.step(new xr(t,t,new Ie(s.append(a),n,n),!0))}function ou(e,t){let n=e.resolve(t),r=n.index();return Ute(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function H7e(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let s=t.child(i),a=s.type==r?e.type.schema.nodes.text:s.type;if(n=n.matchType(a),!n||!e.type.allowsMarks(s.marks))return!1}return n.validEnd}function Ute(e,t){return!!(e&&t&&!e.isLeaf&&H7e(e,t))}function HS(e,t,n=-1){let r=e.resolve(t);for(let i=r.depth;;i--){let s,a,o=r.index(i);if(i==r.depth?(s=r.nodeBefore,a=r.nodeAfter):n>0?(s=r.node(i+1),o++,a=r.node(i).maybeChild(o)):(s=r.node(i).maybeChild(o-1),a=r.node(i+1)),s&&!s.isTextblock&&Ute(s,a)&&r.node(i).canReplace(o,o+1))return t;if(i==0)break;t=n<0?r.before(i):r.after(i)}}function V7e(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-n),a=s.node().type;if(i&&a.inlineContent){let d=a.whitespace=="pre",f=!!a.contentMatch.matchType(i);d&&!f?r=!1:!d&&f&&(r=!0)}let o=e.steps.length;if(r===!1){let d=e.doc.resolve(t+n);$te(e,d.node(),d.before(),o)}a.inlineContent&&yM(e,t+n-1,a,s.node().contentMatchAt(s.index()),r==null);let c=e.mapping.slice(o),u=c.map(t-n);if(e.step(new xr(u,c.map(t+n,-1),Ie.empty,!0)),r===!0){let d=e.doc.resolve(u);Bte(e,d.node(),d.before(),e.steps.length)}return e}function W7e(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function zte(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let a=r.depth;a>=0;a--){let o=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,c=r.index(a)+(o>0?1:0),u=r.node(a),d=!1;if(s==1)d=u.canReplace(c,c,i);else{let f=u.contentMatchAt(c).findWrapping(i.firstChild.type);d=f&&u.canReplaceWith(c,c,f[0])}if(d)return o==0?r.pos:o<0?r.before(a+1):r.after(a+1)}return null}function VS(e,t,n=t,r=Ie.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),s=e.resolve(n);return Hte(i,s,r)?new xr(t,n,r):new q7e(i,s,r).fit()}function Hte(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class q7e{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=ve.empty;for(let i=0;i<=t.depth;i++){let s=t.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=ve.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let s=this.placed,a=r.depth,o=i.depth;for(;a&&o&&s.childCount==1;)s=s.firstChild.content,a--,o--;let c=new Ie(s,a,o);return t>-1?new kr(r.pos,t,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new xr(r.pos,i.pos,c):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){t=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=xk(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let a=i.firstChild;for(let o=this.depth;o>=0;o--){let{type:c,match:u}=this.frontier[o],d,f=null;if(n==1&&(a?u.matchType(a.type)||(f=u.fillBefore(ve.from(a),!1)):s&&c.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:o,parent:s,inject:f};if(n==2&&a&&(d=u.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:o,parent:s,wrap:d};if(s&&u.matchType(s.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=xk(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Ie(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=xk(t,n);if(i.childCount<=1&&n>0){let s=t.size-n<=n+i.size;this.unplaced=new Ie(vm(t,n-1,1),n-1,s?n-1:r)}else this.unplaced=new Ie(vm(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let a=this.unplaced,o=r?r.content:a.content,c=a.openStart-t,u=0,d=[],{match:f,type:h}=this.frontier[n];if(i){for(let g=0;g<i.childCount;g++)d.push(i.child(g));f=f.matchFragment(i)}let p=o.size+t-(a.content.size-a.openEnd);for(;u<o.childCount;){let g=o.child(u),v=f.matchType(g.type);if(!v)break;u++,(u>1||c==0||g.content.size)&&(f=v,d.push(Vte(g.mark(h.allowedMarks(g.marks)),u==1?c:0,u==o.childCount?p:-1)))}let m=u==o.childCount;m||(p=-1),this.placed=ym(this.placed,n,ve.from(d)),this.frontier[n].match=f,m&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,v=o;g<p;g++){let y=v.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),v=y.content}this.unplaced=m?t==0?Ie.empty:new Ie(vm(a.content,t-1,1),t-1,p<0?a.openEnd:t-1):new Ie(vm(a.content,t,u),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!bk(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),a=bk(t,n,i,r,s);if(a){for(let o=n-1;o>=0;o--){let{match:c,type:u}=this.frontier[o],d=bk(t,o,u,c,!0);if(!d||d.childCount)continue e}return{depth:n,fit:a,move:s?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=ym(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let i=t.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,s)}return t}openFrontierNode(t,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=ym(this.placed,this.depth,ve.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(ve.empty,!0);n.childCount&&(this.placed=ym(this.placed,this.frontier.length,n))}}function vm(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(vm(e.firstChild.content,t-1,n)))}function ym(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(ym(e.lastChild.content,t-1,n)))}function xk(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function Vte(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,Vte(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(ve.empty,!0)))),e.copy(r)}function bk(e,t,n,r,i){let s=e.node(t),a=i?e.indexAfter(t):e.index(t);if(a==s.childCount&&!n.compatibleContent(s.type))return null;let o=r.fillBefore(s.content,!0,a);return o&&!K7e(n,s.content,a)?o:null}function K7e(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function G7e(e){return e.spec.defining||e.spec.definingForContent}function Y7e(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),s=e.doc.resolve(n);if(Hte(i,s,r))return e.step(new xr(t,n,r));let a=qte(i,e.doc.resolve(n));a[a.length-1]==0&&a.pop();let o=-(i.depth+1);a.unshift(o);for(let h=i.depth,p=i.pos-1;h>0;h--,p--){let m=i.node(h).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;a.indexOf(h)>-1?o=h:i.before(h)==p&&a.splice(1,0,-h)}let c=a.indexOf(o),u=[],d=r.openStart;for(let h=r.content,p=0;;p++){let m=h.firstChild;if(u.push(m),p==r.openStart)break;h=m.content}for(let h=d-1;h>=0;h--){let p=u[h],m=G7e(p.type);if(m&&!p.sameMarkup(i.node(Math.abs(o)-1)))d=h;else if(m||!p.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let p=(h+d+1)%(r.openStart+1),m=u[p];if(m)for(let g=0;g<a.length;g++){let v=a[(g+c)%a.length],y=!0;v<0&&(y=!1,v=-v);let x=i.node(v-1),b=i.index(v-1);if(x.canReplaceWith(b,b,m.type,m.marks))return e.replace(i.before(v),y?s.after(v):n,new Ie(Wte(r.content,0,r.openStart,p),p,r.openEnd))}}let f=e.steps.length;for(let h=a.length-1;h>=0&&(e.replace(t,n,r),!(e.steps.length>f));h--){let p=a[h];p<0||(t=i.before(p),n=s.after(p))}}function Wte(e,t,n,r,i){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy(Wte(s.content,t+1,n,r,s)))}if(t>r){let s=i.contentMatchAt(0),a=s.fillBefore(e).append(e);e=a.append(s.matchFragment(a).fillBefore(ve.empty,!0))}return e}function X7e(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=W7e(e.doc,t,r.type);i!=null&&(t=n=i)}e.replaceRange(t,n,new Ie(ve.from(r),0,0))}function Q7e(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),s=qte(r,i);for(let a=0;a<s.length;a++){let o=s[a],c=a==s.length-1;if(c&&o==0||r.node(o).type.contentMatch.validEnd)return e.delete(r.start(o),i.end(o));if(o>0&&(c||r.node(o-1).canReplace(r.index(o-1),i.indexAfter(o-1))))return e.delete(r.before(o),i.after(o))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(t-r.start(a)==r.depth-a&&n>r.end(a)&&i.end(a)-n!=i.depth-a&&r.start(a-1)==i.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),i.index(a-1)))return e.delete(r.before(a),n);e.delete(t,n)}function qte(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let s=e.start(i);if(s<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(s==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==s-1)&&n.push(i)}return n}class rh extends ui{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return Xn.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Xn.fromReplace(t,this.pos,this.pos+1,new Ie(ve.from(i),0,n.isLeaf?0:1))}getMap(){return is.empty}invert(t){return new rh(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new rh(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new rh(n.pos,n.attr,n.value)}}ui.jsonID("attr",rh);class u0 extends ui{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return Xn.ok(r)}getMap(){return is.empty}invert(t){return new u0(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new u0(n.attr,n.value)}}ui.jsonID("docAttr",u0);let Mh=class extends Error{};Mh=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};Mh.prototype=Object.create(Error.prototype);Mh.prototype.constructor=Mh;Mh.prototype.name="TransformError";class bM{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new c0}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new Mh(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=Ie.empty){let i=VS(this.doc,t,n,r);return i&&this.step(i),this}replaceWith(t,n,r){return this.replace(t,n,new Ie(ve.from(r),0,0))}delete(t,n){return this.replace(t,n,Ie.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return Y7e(this,t,n,r),this}replaceRangeWith(t,n,r){return X7e(this,t,n,r),this}deleteRange(t,n){return Q7e(this,t,n),this}lift(t,n){return M7e(this,t,n),this}join(t,n=1){return V7e(this,t,n),this}wrap(t,n){return F7e(this,t,n),this}setBlockType(t,n=t,r,i=null){return B7e(this,t,n,r,i),this}setNodeMarkup(t,n,r=null,i){return U7e(this,t,n,r,i),this}setNodeAttribute(t,n,r){return this.step(new rh(t,n,r)),this}setDocAttribute(t,n){return this.step(new u0(t,n)),this}addNodeMark(t,n){return this.step(new nc(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof zt)n.isInSet(r.marks)&&this.step(new Ad(t,n));else{let i=r.marks,s,a=[];for(;s=n.isInSet(i);)a.push(new Ad(t,s)),i=s.removeFromSet(i);for(let o=a.length-1;o>=0;o--)this.step(a[o])}return this}split(t,n=1,r){return z7e(this,t,n,r),this}addMark(t,n,r){return P7e(this,t,n,r),this}removeMark(t,n,r){return I7e(this,t,n,r),this}clearIncompatible(t,n,r){return yM(this,t,n,r),this}}const wk=Object.create(null);class tt{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new Kte(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=Ie.empty){let r=n.content.lastChild,i=null;for(let o=0;o<n.openEnd;o++)i=r,r=r.lastChild;let s=t.steps.length,a=this.ranges;for(let o=0;o<a.length;o++){let{$from:c,$to:u}=a[o],d=t.mapping.slice(s);t.replaceRange(d.map(c.pos),d.map(u.pos),o?Ie.empty:n),o==0&&V8(t,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:a,$to:o}=i[s],c=t.mapping.slice(r),u=c.map(a.pos),d=c.map(o.pos);s?t.deleteRange(u,d):(t.replaceRangeWith(u,d,n),V8(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let i=t.parent.inlineContent?new Qe(t):pf(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(let s=t.depth-1;s>=0;s--){let a=n<0?pf(t.node(0),t.node(s),t.before(s+1),t.index(s),n,r):pf(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,n,r);if(a)return a}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new ps(t.node(0))}static atStart(t){return pf(t,t,0,0,1)||new ps(t)}static atEnd(t){return pf(t,t,t.content.size,t.childCount,-1)||new ps(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=wk[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in wk)throw new RangeError("Duplicate use of selection JSON ID "+t);return wk[t]=n,n.prototype.jsonID=t,n}getBookmark(){return Qe.between(this.$anchor,this.$head).getBookmark()}}tt.prototype.visible=!0;class Kte{constructor(t,n){this.$from=t,this.$to=n}}let z8=!1;function H8(e){!z8&&!e.parent.inlineContent&&(z8=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Qe extends tt{constructor(t,n=t){H8(t),H8(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return tt.near(r);let i=t.resolve(n.map(this.anchor));return new Qe(i.parent.inlineContent?i:r,r)}replace(t,n=Ie.empty){if(super.replace(t,n),n==Ie.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof Qe&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new WS(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Qe(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let i=t.resolve(n);return new this(i,r==n?i:t.resolve(r))}static between(t,n,r){let i=t.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=tt.findFrom(n,r,!0)||tt.findFrom(n,-r,!0);if(s)n=s.$head;else return tt.near(n,r)}return t.parent.inlineContent||(i==0?t=n:(t=(tt.findFrom(t,-r,!0)||tt.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new Qe(t,n)}}tt.jsonID("text",Qe);class WS{constructor(t,n){this.anchor=t,this.head=n}map(t){return new WS(t.map(this.anchor),t.map(this.head))}resolve(t){return Qe.between(t.resolve(this.anchor),t.resolve(this.head))}}class Ye extends tt{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=t.resolve(i);return r?tt.near(s):new Ye(s)}content(){return new Ie(ve.from(this.node),0,0)}eq(t){return t instanceof Ye&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new wM(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ye(t.resolve(n.anchor))}static create(t,n){return new Ye(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}Ye.prototype.visible=!1;tt.jsonID("node",Ye);class wM{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new WS(r,r):new wM(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&Ye.isSelectable(r)?new Ye(n):tt.near(n)}}class ps extends tt{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=Ie.empty){if(n==Ie.empty){t.delete(0,t.doc.content.size);let r=tt.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new ps(t)}map(t){return new ps(t)}eq(t){return t instanceof ps}getBookmark(){return J7e}}tt.jsonID("all",ps);const J7e={map(){return this},resolve(e){return new ps(e)}};function pf(e,t,n,r,i,s=!1){if(t.inlineContent)return Qe.create(e,n);for(let a=r-(i>0?0:1);i>0?a<t.childCount:a>=0;a+=i){let o=t.child(a);if(o.isAtom){if(!s&&Ye.isSelectable(o))return Ye.create(e,n-(i<0?o.nodeSize:0))}else{let c=pf(e,o,n+i,i<0?o.childCount:0,i,s);if(c)return c}n+=o.nodeSize*i}return null}function V8(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof xr||i instanceof kr))return;let s=e.mapping.maps[r],a;s.forEach((o,c,u,d)=>{a==null&&(a=d)}),e.setSelection(tt.near(e.doc.resolve(a),n))}const W8=1,Ry=2,q8=4;class Z7e extends bM{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|W8)&~Ry,this.storedMarks=null,this}get selectionSet(){return(this.updated&W8)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=Ry,this}ensureMarks(t){return zt.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Ry)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~Ry,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||zt.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let i=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!t)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let a=this.doc.resolve(n);s=r==n?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(t,s)),this.selection.empty||this.setSelection(tt.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=q8,this}get scrolledIntoView(){return(this.updated&q8)>0}}function K8(e,t){return!t||!e?e:e.bind(t)}class xm{constructor(t,n,r){this.name=t,this.init=K8(n.init,r),this.apply=K8(n.apply,r)}}const eUe=[new xm("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new xm("selection",{init(e,t){return e.selection||tt.atStart(t.doc)},apply(e){return e.selection}}),new xm("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new xm("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class Ek{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=eUe.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new xm(r.key,r.spec.state,r))})}}class $f{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),i=null;for(;;){let s=!1;for(let a=0;a<this.config.plugins.length;a++){let o=this.config.plugins[a];if(o.spec.appendTransaction){let c=i?i[a].n:0,u=i?i[a].state:this,d=c<n.length&&o.spec.appendTransaction.call(o,c?n.slice(c):n,u,r);if(d&&r.filterTransaction(d,a)){if(d.setMeta("appendedTransaction",t),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<a?{state:r,n:n.length}:{state:this,n:0})}n.push(d),r=r.applyInner(d),s=!0}i&&(i[a]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new $f(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(t,this[s.name],this,n)}return n}get tr(){return new Z7e(this)}static create(t){let n=new Ek(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new $f(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}reconfigure(t){let n=new Ek(this.schema,t.plugins),r=n.fields,i=new $f(n);for(let s=0;s<r.length;s++){let a=r[s].name;i[a]=this.hasOwnProperty(a)?this[a]:r[s].init(t,i)}return i}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new Ek(t.schema,t.plugins),s=new $f(i);return i.fields.forEach(a=>{if(a.name=="doc")s.doc=wc.fromJSON(t.schema,n.doc);else if(a.name=="selection")s.selection=tt.fromJSON(s.doc,n.selection);else if(a.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let o in r){let c=r[o],u=c.spec.state;if(c.key==a.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,o)){s[a.name]=u.fromJSON.call(c,t,n[o],s);return}}s[a.name]=a.init(t,s)}}),s}}function Gte(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=Gte(i,t,{})),n[r]=i}return n}class hn{constructor(t){this.spec=t,this.props={},t.props&&Gte(t.props,this,this.props),this.key=t.key?t.key.key:Yte("plugin")}getState(t){return t[this.key]}}const Sk=Object.create(null);function Yte(e){return e in Sk?e+"$"+ ++Sk[e]:(Sk[e]=0,e+"$")}class Fn{constructor(t="key"){this.key=Yte(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const Ur=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Rh=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let dA=null;const Do=function(e,t,n){let r=dA||(dA=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},tUe=function(){dA=null},jd=function(e,t,n,r){return n&&(G8(e,t,n,r,-1)||G8(e,t,n,r,1))},nUe=/^(img|br|input|textarea|hr)$/i;function G8(e,t,n,r,i){for(var s;;){if(e==n&&t==r)return!0;if(t==(i<0?0:$s(e))){let a=e.parentNode;if(!a||a.nodeType!=1||Sv(e)||nUe.test(e.nodeName)||e.contentEditable=="false")return!1;t=Ur(e)+(i<0?0:1),e=a}else if(e.nodeType==1){let a=e.childNodes[t+(i<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")if(!((s=a.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)t+=i;else return!1;else e=a,t=i<0?$s(e):0}else return!1}}function $s(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function rUe(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=$s(e)}else if(e.parentNode&&!Sv(e))t=Ur(e),e=e.parentNode;else return null}}function iUe(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!Sv(e))t=Ur(e)+1,e=e.parentNode;else return null}}function sUe(e,t,n){for(let r=t==0,i=t==$s(e);r||i;){if(e==n)return!0;let s=Ur(e);if(e=e.parentNode,!e)return!1;r=r&&s==0,i=i&&s==$s(e)}}function Sv(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const qS=function(e){return e.focusNode&&jd(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function Au(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function aUe(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function oUe(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min($s(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min($s(r.startContainer),r.startOffset)}}}const vo=typeof navigator<"u"?navigator:null,Y8=typeof document<"u"?document:null,lu=vo&&vo.userAgent||"",fA=/Edge\/(\d+)/.exec(lu),Xte=/MSIE \d/.exec(lu),hA=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(lu),Vi=!!(Xte||hA||fA),Sc=Xte?document.documentMode:hA?+hA[1]:fA?+fA[1]:0,Pa=!Vi&&/gecko\/(\d+)/i.test(lu);Pa&&+(/Firefox\/(\d+)/.exec(lu)||[0,0])[1];const pA=!Vi&&/Chrome\/(\d+)/.exec(lu),ni=!!pA,Qte=pA?+pA[1]:0,Si=!Vi&&!!vo&&/Apple Computer/.test(vo.vendor),Lh=Si&&(/Mobile\/\w+/.test(lu)||!!vo&&vo.maxTouchPoints>2),Ds=Lh||(vo?/Mac/.test(vo.platform):!1),lUe=vo?/Win/.test(vo.platform):!1,Ho=/Android \d/.test(lu),Nv=!!Y8&&"webkitFontSmoothing"in Y8.documentElement.style,cUe=Nv?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function uUe(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function ko(e,t){return typeof e=="number"?e:e[t]}function dUe(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function X8(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let a=n||e.dom;a;){if(a.nodeType!=1){a=Rh(a);continue}let o=a,c=o==s.body,u=c?uUe(s):dUe(o),d=0,f=0;if(t.top<u.top+ko(r,"top")?f=-(u.top-t.top+ko(i,"top")):t.bottom>u.bottom-ko(r,"bottom")&&(f=t.bottom-t.top>u.bottom-u.top?t.top+ko(i,"top")-u.top:t.bottom-u.bottom+ko(i,"bottom")),t.left<u.left+ko(r,"left")?d=-(u.left-t.left+ko(i,"left")):t.right>u.right-ko(r,"right")&&(d=t.right-u.right+ko(i,"right")),d||f)if(c)s.defaultView.scrollBy(d,f);else{let p=o.scrollLeft,m=o.scrollTop;f&&(o.scrollTop+=f),d&&(o.scrollLeft+=d);let g=o.scrollLeft-p,v=o.scrollTop-m;t={left:t.left-g,top:t.top-v,right:t.right-g,bottom:t.bottom-v}}let h=c?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(h))break;a=h=="absolute"?a.offsetParent:Rh(a)}}function fUe(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i;for(let s=(t.left+t.right)/2,a=n+1;a<Math.min(innerHeight,t.bottom);a+=5){let o=e.root.elementFromPoint(s,a);if(!o||o==e.dom||!e.dom.contains(o))continue;let c=o.getBoundingClientRect();if(c.top>=n-20){r=o,i=c.top;break}}return{refDOM:r,refTop:i,stack:Jte(e.dom)}}function Jte(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=Rh(r));return t}function hUe({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;Zte(n,r==0?0:r-t)}function Zte(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:s}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}let of=null;function pUe(e){if(e.setActive)return e.setActive();if(of)return e.focus(of);let t=Jte(e);e.focus(of==null?{get preventScroll(){return of={preventScroll:!0},!0}}:void 0),of||(of=!1,Zte(t,0))}function ene(e,t){let n,r=2e8,i,s=0,a=t.top,o=t.top,c,u;for(let d=e.firstChild,f=0;d;d=d.nextSibling,f++){let h;if(d.nodeType==1)h=d.getClientRects();else if(d.nodeType==3)h=Do(d).getClientRects();else continue;for(let p=0;p<h.length;p++){let m=h[p];if(m.top<=a&&m.bottom>=o){a=Math.max(m.bottom,a),o=Math.min(m.top,o);let g=m.left>t.left?m.left-t.left:m.right<t.left?t.left-m.right:0;if(g<r){n=d,r=g,i=g&&n.nodeType==3?{left:m.right<t.left?m.right:m.left,top:t.top}:t,d.nodeType==1&&g&&(s=f+(t.left>=(m.left+m.right)/2?1:0));continue}}else m.top>t.top&&!c&&m.left<=t.left&&m.right>=t.left&&(c=d,u={left:Math.max(m.left,Math.min(m.right,t.left)),top:m.top});!n&&(t.left>=m.right&&t.top>=m.top||t.left>=m.left&&t.top>=m.bottom)&&(s=f+1)}}return!n&&c&&(n=c,i=u,r=0),n&&n.nodeType==3?mUe(n,i):!n||r&&n.nodeType==1?{node:e,offset:s}:ene(n,i)}function mUe(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let s=Ml(r,1);if(s.top!=s.bottom&&EM(t,s))return{node:e,offset:i+(t.left>=(s.left+s.right)/2?1:0)}}return{node:e,offset:0}}function EM(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function gUe(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function vUe(e,t,n){let{node:r,offset:i}=ene(t,n),s=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}function yUe(e,t,n,r){let i=-1;for(let s=t,a=!1;s!=e.dom;){let o=e.docView.nearestDesc(s,!0),c;if(!o)return null;if(o.dom.nodeType==1&&(o.node.isBlock&&o.parent||!o.contentDOM)&&((c=o.dom.getBoundingClientRect()).width||c.height)&&(o.node.isBlock&&o.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(o.dom.nodeName)&&(!a&&c.left>r.left||c.top>r.top?i=o.posBefore:(!a&&c.right<r.left||c.bottom<r.top)&&(i=o.posAfter),a=!0),!o.contentDOM&&i<0&&!o.node.isText))return(o.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?o.posBefore:o.posAfter;s=o.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function tne(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let a=e.childNodes[s];if(a.nodeType==1){let o=a.getClientRects();for(let c=0;c<o.length;c++){let u=o[c];if(EM(t,u))return tne(a,t,u)}}if((s=(s+1)%r)==i)break}return e}function xUe(e,t){let n=e.dom.ownerDocument,r,i=0,s=oUe(n,t.left,t.top);s&&({node:r,offset:i}=s);let a=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),o;if(!a||!e.dom.contains(a.nodeType!=1?a.parentNode:a)){let u=e.dom.getBoundingClientRect();if(!EM(t,u)||(a=tne(e.dom,t,u),!a))return null}if(Si)for(let u=a;r&&u;u=Rh(u))u.draggable&&(r=void 0);if(a=gUe(a,t),r){if(Pa&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let d=r.childNodes[i],f;d.nodeName=="IMG"&&(f=d.getBoundingClientRect()).right<=t.left&&f.bottom>t.top&&i++}let u;Nv&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=t.top&&i--,r==e.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?o=e.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(o=yUe(e,r,i,t))}o==null&&(o=vUe(e,a,t));let c=e.docView.nearestDesc(a,!0);return{pos:o,inside:c?c.posAtStart-c.border:-1}}function Q8(e){return e.top<e.bottom||e.left<e.right}function Ml(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(Q8(r))return r}return Array.prototype.find.call(n,Q8)||e.getBoundingClientRect()}const bUe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function nne(e,t,n){let{node:r,offset:i,atom:s}=e.docView.domFromPos(t,n<0?-1:1),a=Nv||Pa;if(r.nodeType==3)if(a&&(bUe.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let c=Ml(Do(r,i,i),n);if(Pa&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=Ml(Do(r,i-1,i-1),-1);if(u.top==c.top){let d=Ml(Do(r,i,i+1),-1);if(d.top!=c.top)return em(d,d.left<u.left)}}return c}else{let c=i,u=i,d=n<0?1:-1;return n<0&&!i?(u++,d=-1):n>=0&&i==r.nodeValue.length?(c--,d=1):n<0?c--:u++,em(Ml(Do(r,c,u),d),d<0)}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==$s(r))){let c=r.childNodes[i-1];if(c.nodeType==1)return Nk(c.getBoundingClientRect(),!1)}if(s==null&&i<$s(r)){let c=r.childNodes[i];if(c.nodeType==1)return Nk(c.getBoundingClientRect(),!0)}return Nk(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==$s(r))){let c=r.childNodes[i-1],u=c.nodeType==3?Do(c,$s(c)-(a?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(u)return em(Ml(u,1),!1)}if(s==null&&i<$s(r)){let c=r.childNodes[i];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let u=c?c.nodeType==3?Do(c,0,a?0:1):c.nodeType==1?c:null:null;if(u)return em(Ml(u,-1),!0)}return em(Ml(r.nodeType==3?Do(r):r,-n),n>=0)}function em(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function Nk(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function rne(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function wUe(e,t,n){let r=t.selection,i=n=="up"?r.$from:r.$to;return rne(e,t,()=>{let{node:s}=e.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let o=e.docView.nearestDesc(s,!0);if(!o)break;if(o.node.isBlock){s=o.contentDOM||o.dom;break}s=o.dom.parentNode}let a=nne(e,i.pos,1);for(let o=s.firstChild;o;o=o.nextSibling){let c;if(o.nodeType==1)c=o.getClientRects();else if(o.nodeType==3)c=Do(o,0,o.nodeValue.length).getClientRects();else continue;for(let u=0;u<c.length;u++){let d=c[u];if(d.bottom>d.top+1&&(n=="up"?a.top-d.top>(d.bottom-a.top)*2:d.bottom-a.bottom>(a.bottom-d.top)*2))return!1}}return!0})}const EUe=/[\u0590-\u08ac]/;function SUe(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,a=i==r.parent.content.size,o=e.domSelection();return o?!EUe.test(r.parent.textContent)||!o.modify?n=="left"||n=="backward"?s:a:rne(e,t,()=>{let{focusNode:c,focusOffset:u,anchorNode:d,anchorOffset:f}=e.domSelectionRange(),h=o.caretBidiLevel;o.modify("move",n,"character");let p=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:m,focusOffset:g}=e.domSelectionRange(),v=m&&!p.contains(m.nodeType==1?m:m.parentNode)||c==m&&u==g;try{o.collapse(d,f),c&&(c!=d||u!=f)&&o.extend&&o.extend(c,u)}catch{}return h!=null&&(o.caretBidiLevel=h),v}):r.pos==r.start()||r.pos==r.end()}let J8=null,Z8=null,e$=!1;function NUe(e,t,n){return J8==t&&Z8==n?e$:(J8=t,Z8=n,e$=n=="up"||n=="down"?wUe(e,t,n):SUe(e,t,n))}const Ys=0,t$=1,Hu=2,yo=3;class _v{constructor(t,n,r,i){this.parent=t,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Ys,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let s,a;if(t==this.contentDOM)s=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(a)+a.size:this.posAtStart}else{let s,a;if(t==this.contentDOM)s=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=n>Ur(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,i=t;i;i=i.parentNode){let s=this.getDesc(i),a;if(s&&(!n||s.node))if(r&&(a=s.nodeDOM)&&!(a.nodeType==1?a.contains(t.nodeType==1?t:t.parentNode):a==t))r=!1;else return s}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let i=t;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==t&&s!=r){for(;!i.border&&i.children.length;)for(let a=0;a<i.children.length;a++){let o=i.children[a];if(o.size){i=o;break}}return i}if(t<s)return i.descAt(t-r-i.border);r=s}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let a=this.children[r],o=s+a.size;if(o>t||a instanceof sne){i=t-s;break}s=o}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof ine&&s.side>=0;r--);if(n<=0){let s,a=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,a=!1);return s&&n&&a&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Ur(s.dom)+1:0}}else{let s,a=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,a=!1);return s&&a&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Ur(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let a=r,o=0;;o++){let c=this.children[o],u=a+c.size;if(i==-1&&t<=u){let d=a+c.border;if(t>=d&&n<=u-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(t,n,d);t=a;for(let f=o;f>0;f--){let h=this.children[f-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){i=Ur(h.dom)+1;break}t-=h.size}i==-1&&(i=0)}if(i>-1&&(u>n||o==this.children.length-1)){n=u;for(let d=o+1;d<this.children.length;d++){let f=this.children[d];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){s=Ur(f.dom);break}n+=f.size}s==-1&&(s=this.contentDOM.childNodes.length);break}a=u}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,i=!1){let s=Math.min(t,n),a=Math.max(t,n);for(let p=0,m=0;p<this.children.length;p++){let g=this.children[p],v=m+g.size;if(s>m&&a<v)return g.setSelection(t-m-g.border,n-m-g.border,r,i);m=v}let o=this.domFromPos(t,t?-1:1),c=n==t?o:this.domFromPos(n,n?-1:1),u=r.root.getSelection(),d=r.domSelectionRange(),f=!1;if((Pa||Si)&&t==n){let{node:p,offset:m}=o;if(p.nodeType==3){if(f=!!(m&&p.nodeValue[m-1]==`
`),f&&m==p.nodeValue.length)for(let g=p,v;g;g=g.parentNode){if(v=g.nextSibling){v.nodeName=="BR"&&(o=c={node:v.parentNode,offset:Ur(v)+1});break}let y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let g=p.childNodes[m-1];f=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Pa&&d.focusNode&&d.focusNode!=c.node&&d.focusNode.nodeType==1){let p=d.focusNode.childNodes[d.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||f&&Si)&&jd(o.node,o.offset,d.anchorNode,d.anchorOffset)&&jd(c.node,c.offset,d.focusNode,d.focusOffset))return;let h=!1;if((u.extend||t==n)&&!f){u.collapse(o.node,o.offset);try{t!=n&&u.extend(c.node,c.offset),h=!0}catch{}}if(!h){if(t>n){let m=o;o=c,c=m}let p=document.createRange();p.setEnd(c.node,c.offset),p.setStart(o.node,o.offset),u.removeAllRanges(),u.addRange(p)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],a=r+s.size;if(r==a?t<=a&&n>=r:t<a&&n>r){let o=r+s.border,c=a-s.border;if(t>=o&&n<=c){this.dirty=t==r||n==a?Hu:t$,t==o&&n==c&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=yo:s.markDirty(t-o,n-o);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Hu:yo}r=a}this.dirty=Hu}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?Hu:t$;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class ine extends _v{constructor(t,n,r,i){let s,a=n.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(a.nodeType!=1){let o=document.createElement("span");o.appendChild(a),a=o}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(t,[],a,null),this.widget=n,this.widget=n,s=this}matchesWidget(t){return this.dirty==Ys&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class _Ue extends _v{constructor(t,n,r,i){super(t,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class Od extends _v{constructor(t,n,r,i,s){super(t,[],r,i),this.mark=n,this.spec=s}static create(t,n,r,i){let s=i.nodeViews[n.type.name],a=s&&s(n,i,r);return(!a||!a.dom)&&(a=Ud.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Od(t,n,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&yo||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=yo&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=Ys){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Ys}}slice(t,n,r){let i=Od.create(this.parent,this.mark,!0,r),s=this.children,a=this.size;n<a&&(s=gA(s,n,a,r)),t>0&&(s=gA(s,0,t,r));for(let o=0;o<s.length;o++)s[o].parent=i;return i.children=s,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Nc extends _v{constructor(t,n,r,i,s,a,o,c,u){super(t,[],s,a),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=o}static create(t,n,r,i,s,a){let o=s.nodeViews[n.type.name],c,u=o&&o(n,s,()=>{if(!c)return a;if(c.parent)return c.parent.posBeforeChild(c)},r,i),d=u&&u.dom,f=u&&u.contentDOM;if(n.isText){if(!d)d=document.createTextNode(n.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:f}=Ud.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),n.type.spec.draggable&&(d.draggable=!0));let h=d;return d=lne(d,r,n),u?c=new kUe(t,n,r,i,d,f||null,h,u,s,a+1):n.isText?new KS(t,n,r,i,d,h,s):new Nc(t,n,r,i,d,f||null,h,s,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>ve.empty)}return t}matchesNode(t,n,r){return this.dirty==Ys&&t.eq(this.node)&&M1(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,i=n,s=t.composing?this.localCompositionInfo(t,n):null,a=s&&s.pos>-1?s:null,o=s&&s.pos<0,c=new TUe(this,a&&a.node,t);OUe(this.node,this.innerDeco,(u,d,f)=>{u.spec.marks?c.syncToMarks(u.spec.marks,r,t):u.type.side>=0&&!f&&c.syncToMarks(d==this.node.childCount?zt.none:this.node.child(d).marks,r,t),c.placeWidget(u,t,i)},(u,d,f,h)=>{c.syncToMarks(u.marks,r,t);let p;c.findNodeMatch(u,d,f,h)||o&&t.state.selection.from>i&&t.state.selection.to<i+u.nodeSize&&(p=c.findIndexWithChild(s.node))>-1&&c.updateNodeAt(u,d,f,p,t)||c.updateNextNode(u,d,f,t,h,i)||c.addNode(u,d,f,t,i),i+=u.nodeSize}),c.syncToMarks([],r,t),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==Hu)&&(a&&this.protectLocalComposition(t,a),ane(this.contentDOM,this.children,t),Lh&&PUe(this.dom))}localCompositionInfo(t,n){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof Qe)||r<n||i>n+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,o=IUe(this.node.content,a,r-n,i-n);return o<0?null:{node:s,pos:o,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let a=new _Ue(this,s,n,i);t.input.compositionNodes.push(a),this.children=gA(this.children,r,r+i.length,t,a)}update(t,n,r,i){return this.dirty==yo||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,i),!0)}updateInner(t,n,r,i){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Ys}updateOuterDeco(t){if(M1(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=one(this.dom,this.nodeDOM,mA(this.outerDeco,this.node,n),mA(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function n$(e,t,n,r,i){lne(r,t,e);let s=new Nc(void 0,e,t,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class KS extends Nc{constructor(t,n,r,i,s,a,o){super(t,n,r,i,s,null,a,o,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,i){return this.dirty==yo||this.dirty!=Ys&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Ys||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=Ys,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let i=this.node.cut(t,n),s=document.createTextNode(i.text);return new KS(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=yo)}get domAtom(){return!1}isText(t){return this.node.text==t}}class sne extends _v{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==Ys&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class kUe extends Nc{constructor(t,n,r,i,s,a,o,c,u,d){super(t,n,r,i,s,a,o,u,d),this.spec=c}update(t,n,r,i){if(this.dirty==yo)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,n,r);return s&&this.updateInner(t,n,r,i),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function ane(e,t,n){let r=e.firstChild,i=!1;for(let s=0;s<t.length;s++){let a=t[s],o=a.dom;if(o.parentNode==e){for(;o!=r;)r=r$(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(o,r);if(a instanceof Od){let c=r?r.previousSibling:e.lastChild;ane(a.contentDOM,a.children,n),r=c?c.nextSibling:e.firstChild}}for(;r;)r=r$(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const Gm=function(e){e&&(this.nodeName=e)};Gm.prototype=Object.create(null);const Vu=[new Gm];function mA(e,t,n){if(e.length==0)return Vu;let r=n?Vu[0]:new Gm,i=[r];for(let s=0;s<e.length;s++){let a=e[s].type.attrs;if(a){a.nodeName&&i.push(r=new Gm(a.nodeName));for(let o in a){let c=a[o];c!=null&&(n&&i.length==1&&i.push(r=new Gm(t.isInline?"span":"div")),o=="class"?r.class=(r.class?r.class+" ":"")+c:o=="style"?r.style=(r.style?r.style+";":"")+c:o!="nodeName"&&(r[o]=c))}}}return i}function one(e,t,n,r){if(n==Vu&&r==Vu)return t;let i=t;for(let s=0;s<r.length;s++){let a=r[s],o=n[s];if(s){let c;o&&o.nodeName==a.nodeName&&i!=e&&(c=i.parentNode)&&c.nodeName.toLowerCase()==a.nodeName||(c=document.createElement(a.nodeName),c.pmIsDeco=!0,c.appendChild(i),o=Vu[0]),i=c}CUe(i,o||Vu[0],a)}return i}function CUe(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&e.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&e.classList.add(i[s]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}}function lne(e,t,n){return one(e,e,Vu,mA(t,n,e.nodeType!=1))}function M1(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function r$(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class TUe{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=AUe(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let i=0,s=this.stack.length>>1,a=Math.min(s,t.length);for(;i<a&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Ys,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<t.length;){this.stack.push(this.top,this.index+1);let o=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let u=this.top.children[c];if(u.matchesMark(t[s])&&!this.isLocked(u.dom)){o=c;break}}if(o>-1)o>this.index&&(this.changed=!0,this.destroyBetween(this.index,o)),this.top=this.top.children[this.index];else{let c=Od.create(this.top,t[s],n,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,s++}}findNodeMatch(t,n,r,i){let s=-1,a;if(i>=this.preMatch.index&&(a=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&a.matchesNode(t,n,r))s=this.top.children.indexOf(a,this.index);else for(let o=this.index,c=Math.min(this.top.children.length,o+5);o<c;o++){let u=this.top.children[o];if(u.matchesNode(t,n,r)&&!this.preMatch.matched.has(u)){s=o;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,n,r,i,s){let a=this.top.children[i];return a.dirty==yo&&a.dom==a.contentDOM&&(a.dirty=Hu),a.update(t,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=n}}updateNextNode(t,n,r,i,s,a){for(let o=this.index;o<this.top.children.length;o++){let c=this.top.children[o];if(c instanceof Nc){let u=this.preMatch.matched.get(c);if(u!=null&&u!=s)return!1;let d=c.dom,f,h=this.isLocked(d)&&!(t.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==t.text&&c.dirty!=yo&&M1(n,c.outerDeco));if(!h&&c.update(t,n,r,i))return this.destroyBetween(this.index,o),c.dom!=d&&(this.changed=!0),this.index++,!0;if(!h&&(f=this.recreateWrapper(c,t,n,r,i,a)))return this.destroyBetween(this.index,o),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Hu,f.updateChildren(i,a+1),f.dirty=Ys),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,i,s,a){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!M1(r,t.outerDeco)||!i.eq(t.innerDeco))return null;let o=Nc.create(this.top,n,r,i,s,a);if(o.contentDOM){o.children=t.children,t.children=[];for(let c of o.children)c.parent=o}return t.destroy(),o}addNode(t,n,r,i,s){let a=Nc.create(this.top,t,n,r,i,s);a.contentDOM&&a.updateChildren(i,s+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(t,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new ine(this.top,t,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof Od;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof KS)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((Si||ni)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new sne(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function AUe(e,t){let n=t,r=n.children.length,i=e.childCount,s=new Map,a=[];e:for(;i>0;){let o;for(;;)if(r){let u=n.children[r-1];if(u instanceof Od)n=u,r=u.children.length;else{o=u,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let c=o.node;if(c){if(c!=e.child(i-1))break;--i,s.set(o,i),a.push(o)}}return{index:i,matched:s,matches:a.reverse()}}function jUe(e,t){return e.type.side-t.type.side}function OUe(e,t,n,r){let i=t.locals(e),s=0;if(i.length==0){for(let u=0;u<e.childCount;u++){let d=e.child(u);r(d,i,t.forChild(s,d),u),s+=d.nodeSize}return}let a=0,o=[],c=null;for(let u=0;;){let d,f;for(;a<i.length&&i[a].to==s;){let v=i[a++];v.widget&&(d?(f||(f=[d])).push(v):d=v)}if(d)if(f){f.sort(jUe);for(let v=0;v<f.length;v++)n(f[v],u,!!c)}else n(d,u,!!c);let h,p;if(c)p=-1,h=c,c=null;else if(u<e.childCount)p=u,h=e.child(u++);else break;for(let v=0;v<o.length;v++)o[v].to<=s&&o.splice(v--,1);for(;a<i.length&&i[a].from<=s&&i[a].to>s;)o.push(i[a++]);let m=s+h.nodeSize;if(h.isText){let v=m;a<i.length&&i[a].from<v&&(v=i[a].from);for(let y=0;y<o.length;y++)o[y].to<v&&(v=o[y].to);v<m&&(c=h.cut(v-s),h=h.cut(0,v-s),m=v,p=-1)}else for(;a<i.length&&i[a].to<m;)a++;let g=h.isInline&&!h.isLeaf?o.filter(v=>!v.inline):o.slice();r(h,g,t.forChild(s,h),p),s=m}}function PUe(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function IUe(e,t,n,r){for(let i=0,s=0;i<e.childCount&&s<=r;){let a=e.child(i++),o=s;if(s+=a.nodeSize,!a.isText)continue;let c=a.text;for(;i<e.childCount;){let u=e.child(i++);if(s+=u.nodeSize,!u.isText)break;c+=u.text}if(s>=n){if(s>=r&&c.slice(r-t.length-o,r-o)==t)return r-t.length;let u=o<r?c.lastIndexOf(t,r-o-1):-1;if(u>=0&&u+t.length+o>=n)return o+u;if(n==r&&c.length>=r+t.length-o&&c.slice(r-o,r-o+t.length)==t)return r}}return-1}function gA(e,t,n,r,i){let s=[];for(let a=0,o=0;a<e.length;a++){let c=e[a],u=o,d=o+=c.size;u>=n||d<=t?s.push(c):(u<t&&s.push(c.slice(0,t-u,r)),i&&(s.push(i),i=void 0),d>n&&s.push(c.slice(n-u,c.size,r)))}return s}function SM(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),s=i&&i.size==0,a=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;let o=r.resolve(a),c,u;if(qS(n)){for(c=a;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&Ye.isSelectable(f)&&i.parent&&!(f.isInline&&sUe(n.focusNode,n.focusOffset,i.dom))){let h=i.posBefore;u=new Ye(a==h?o:r.resolve(h))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=a,h=a;for(let p=0;p<n.rangeCount;p++){let m=n.getRangeAt(p);f=Math.min(f,e.docView.posFromDOM(m.startContainer,m.startOffset,1)),h=Math.max(h,e.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(f<0)return null;[c,a]=h==e.state.selection.anchor?[h,f]:[f,h],o=r.resolve(a)}else c=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null}let d=r.resolve(c);if(!u){let f=t=="pointer"||e.state.selection.head<o.pos&&!s?1:-1;u=NM(e,d,o,f)}return u}function cne(e){return e.editable?e.hasFocus():dne(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Zo(e,t=!1){let n=e.state.selection;if(une(e,n),!!cne(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&ni){let r=e.domSelectionRange(),i=e.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&jd(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)MUe(e);else{let{anchor:r,head:i}=n,s,a;i$&&!(n instanceof Qe)&&(n.$from.parent.inlineContent||(s=s$(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(a=s$(e,n.to))),e.docView.setSelection(r,i,e,t),i$&&(s&&a$(s),a&&a$(a)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&DUe(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const i$=Si||ni&&Qte<63;function s$(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Si&&i&&i.contentEditable=="false")return _k(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return _k(i);if(s)return _k(s)}}function _k(e){return e.contentEditable="true",Si&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function a$(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function DUe(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!cne(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function MUe(e){let t=e.domSelection(),n=document.createRange();if(!t)return;let r=e.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,Ur(r)+1):n.setStart(r,0),n.collapse(!0),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&Vi&&Sc<=11&&(r.disabled=!0,r.disabled=!1)}function une(e,t){if(t instanceof Ye){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(o$(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else o$(e)}function o$(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function NM(e,t,n,r){return e.someProp("createSelectionBetween",i=>i(e,t,n))||Qe.between(t,n,r)}function l$(e){return e.editable&&!e.hasFocus()?!1:dne(e)}function dne(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function RUe(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return jd(t.node,t.offset,n.anchorNode,n.anchorOffset)}function vA(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&tt.findFrom(s,t)}function Ul(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function c$(e,t,n){let r=e.state.selection;if(r instanceof Qe)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let a=e.state.doc.resolve(i.pos+s.nodeSize*(t<0?-1:1));return Ul(e,new Qe(r.$anchor,a))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=vA(e.state,t);return i&&i instanceof Ye?Ul(e,i):!1}else if(!(Ds&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,a;if(!s||s.isText)return!1;let o=t<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(a=e.docView.descAt(o))&&!a.contentDOM?Ye.isSelectable(s)?Ul(e,new Ye(t<0?e.state.doc.resolve(i.pos-s.nodeSize):i)):Nv?Ul(e,new Qe(e.state.doc.resolve(t<0?o:o+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Ye&&r.node.isInline)return Ul(e,new Qe(t>0?r.$to:r.$from));{let i=vA(e.state,t);return i?Ul(e,i):!1}}}function R1(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Ym(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function lf(e,t){return t<0?LUe(e):FUe(e)}function LUe(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,s,a=!1;for(Pa&&n.nodeType==1&&r<R1(n)&&Ym(n.childNodes[r],-1)&&(a=!0);;)if(r>0){if(n.nodeType!=1)break;{let o=n.childNodes[r-1];if(Ym(o,-1))i=n,s=--r;else if(o.nodeType==3)n=o,r=n.nodeValue.length;else break}}else{if(fne(n))break;{let o=n.previousSibling;for(;o&&Ym(o,-1);)i=n.parentNode,s=Ur(o),o=o.previousSibling;if(o)n=o,r=R1(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}a?yA(e,n,r):i&&yA(e,i,s)}function FUe(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i=R1(n),s,a;for(;;)if(r<i){if(n.nodeType!=1)break;let o=n.childNodes[r];if(Ym(o,1))s=n,a=++r;else break}else{if(fne(n))break;{let o=n.nextSibling;for(;o&&Ym(o,1);)s=o.parentNode,a=Ur(o)+1,o=o.nextSibling;if(o)n=o,r=0,i=R1(n);else{if(n=n.parentNode,n==e.dom)break;r=i=0}}}s&&yA(e,s,a)}function fne(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function BUe(e,t){for(;e&&t==e.childNodes.length&&!Sv(e);)t=Ur(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function $Ue(e,t){for(;e&&!t&&!Sv(e);)t=Ur(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function yA(e,t,n){if(t.nodeType!=3){let s,a;(a=BUe(t,n))?(t=a,n=0):(s=$Ue(t,n))&&(t=s,n=s.nodeValue.length)}let r=e.domSelection();if(!r)return;if(qS(r)){let s=document.createRange();s.setEnd(t,n),s.setStart(t,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&Zo(e)},50)}function u$(e,t){let n=e.state.doc.resolve(t);if(!(ni||lUe)&&n.parent.inlineContent){let i=e.coordsAtPos(t);if(t>n.start()){let s=e.coordsAtPos(t-1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(t<n.end()){let s=e.coordsAtPos(t+1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function d$(e,t,n){let r=e.state.selection;if(r instanceof Qe&&!r.empty||n.indexOf("s")>-1||Ds&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let a=vA(e.state,t);if(a&&a instanceof Ye)return Ul(e,a)}if(!i.parent.inlineContent){let a=t<0?i:s,o=r instanceof ps?tt.near(a,t):tt.findFrom(a,t);return o?Ul(e,o):!1}return!1}function f$(e,t){if(!(e.state.selection instanceof Qe))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let a=e.state.tr;return t<0?a.delete(n.pos-s.nodeSize,n.pos):a.delete(n.pos,n.pos+s.nodeSize),e.dispatch(a),!0}return!1}function h$(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function UUe(e){if(!Si||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;h$(e,r,"true"),setTimeout(()=>h$(e,r,"false"),20)}return!1}function zUe(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function HUe(e,t){let n=t.keyCode,r=zUe(t);if(n==8||Ds&&n==72&&r=="c")return f$(e,-1)||lf(e,-1);if(n==46&&!t.shiftKey||Ds&&n==68&&r=="c")return f$(e,1)||lf(e,1);if(n==13||n==27)return!0;if(n==37||Ds&&n==66&&r=="c"){let i=n==37?u$(e,e.state.selection.from)=="ltr"?-1:1:-1;return c$(e,i,r)||lf(e,i)}else if(n==39||Ds&&n==70&&r=="c"){let i=n==39?u$(e,e.state.selection.from)=="ltr"?1:-1:1;return c$(e,i,r)||lf(e,i)}else{if(n==38||Ds&&n==80&&r=="c")return d$(e,-1,r)||lf(e,-1);if(n==40||Ds&&n==78&&r=="c")return UUe(e)||d$(e,1,r)||lf(e,1);if(r==(Ds?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function _M(e,t){e.someProp("transformCopied",p=>{t=p(t,e)});let n=[],{content:r,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let a=e.someProp("clipboardSerializer")||Ud.fromSchema(e.state.schema),o=yne(),c=o.createElement("div");c.appendChild(a.serializeFragment(r,{document:o}));let u=c.firstChild,d,f=0;for(;u&&u.nodeType==1&&(d=vne[u.nodeName.toLowerCase()]);){for(let p=d.length-1;p>=0;p--){let m=o.createElement(d[p]);for(;c.firstChild;)m.appendChild(c.firstChild);c.appendChild(m),f++}u=c.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${s}${f?` -${f}`:""} ${JSON.stringify(n)}`);let h=e.someProp("clipboardTextSerializer",p=>p(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:c,text:h,slice:t}}function hne(e,t,n,r,i){let s=i.parent.type.spec.code,a,o;if(!n&&!t)return null;let c=t&&(r||s||!n);if(c){if(e.someProp("transformPastedText",h=>{t=h(t,s||r,e)}),s)return t?new Ie(ve.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):Ie.empty;let f=e.someProp("clipboardTextParser",h=>h(t,i,r,e));if(f)o=f;else{let h=i.marks(),{schema:p}=e.state,m=Ud.fromSchema(p);a=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(g=>{let v=a.appendChild(document.createElement("p"));g&&v.appendChild(m.serializeNode(p.text(g,h)))})}}else e.someProp("transformPastedHTML",f=>{n=f(n,e)}),a=KUe(n),Nv&&GUe(a);let u=a&&a.querySelector("[data-pm-slice]"),d=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let f=+d[3];f>0;f--){let h=a.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;a=h}if(o||(o=(e.someProp("clipboardParser")||e.someProp("domParser")||Ec.fromSchema(e.state.schema)).parseSlice(a,{preserveWhitespace:!!(c||d),context:i,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!VUe.test(h.parentNode.nodeName)?{ignore:!0}:null}})),d)o=YUe(p$(o,+d[1],+d[2]),d[4]);else if(o=Ie.maxOpen(WUe(o.content,i),!0),o.openStart||o.openEnd){let f=0,h=0;for(let p=o.content.firstChild;f<o.openStart&&!p.type.spec.isolating;f++,p=p.firstChild);for(let p=o.content.lastChild;h<o.openEnd&&!p.type.spec.isolating;h++,p=p.lastChild);o=p$(o,f,h)}return e.someProp("transformPasted",f=>{o=f(o,e)}),o}const VUe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function WUe(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),s,a=[];if(e.forEach(o=>{if(!a)return;let c=i.findWrapping(o.type),u;if(!c)return a=null;if(u=a.length&&s.length&&mne(c,s,o,a[a.length-1],0))a[a.length-1]=u;else{a.length&&(a[a.length-1]=gne(a[a.length-1],s.length));let d=pne(o,c);a.push(d),i=i.matchType(d.type),s=c}}),a)return ve.from(a)}return e}function pne(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,ve.from(e));return e}function mne(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let s=mne(e,t,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(ve.from(pne(n,e,i+1))))}}function gne(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,gne(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(ve.empty,!0);return e.copy(n.append(r))}function xA(e,t,n,r,i,s){let a=t<0?e.firstChild:e.lastChild,o=a.content;return e.childCount>1&&(s=0),i<r-1&&(o=xA(o,t,n,r,i+1,s)),i>=n&&(o=t<0?a.contentMatchAt(0).fillBefore(o,s<=i).append(o):o.append(a.contentMatchAt(a.childCount).fillBefore(ve.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(o))}function p$(e,t,n){return t<e.openStart&&(e=new Ie(xA(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new Ie(xA(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const vne={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let m$=null;function yne(){return m$||(m$=document.implementation.createHTMLDocument("title"))}let kk=null;function qUe(e){let t=window.trustedTypes;return t?(kk||(kk=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),kk.createHTML(e)):e}function KUe(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=yne().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&vne[r[1].toLowerCase()])&&(e=i.map(s=>"<"+s+">").join("")+e+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=qUe(e),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function GUe(e){let t=e.querySelectorAll(ni?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function YUe(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:i,openStart:s,openEnd:a}=e;for(let o=r.length-2;o>=0;o-=2){let c=n.nodes[r[o]];if(!c||c.hasRequiredAttrs())break;i=ve.from(c.create(r[o+1],i)),s++,a++}return new Ie(i,s,a)}const Ni={},_i={},XUe={touchstart:!0,touchmove:!0};class QUe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function JUe(e){for(let t in Ni){let n=Ni[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{eze(e,r)&&!kM(e,r)&&(e.editable||!(r.type in _i))&&n(e,r)},XUe[t]?{passive:!0}:void 0)}Si&&e.dom.addEventListener("input",()=>null),bA(e)}function rc(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function ZUe(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function bA(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>kM(e,r))})}function kM(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function eze(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function tze(e,t){!kM(e,t)&&Ni[t.type]&&(e.editable||!(t.type in _i))&&Ni[t.type](e,t)}_i.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!bne(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(Ho&&ni&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),Lh&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",i=>i(e,Au(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||HUe(e,n)?n.preventDefault():rc(e,"key")};_i.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};_i.keypress=(e,t)=>{let n=t;if(bne(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ds&&n.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof Qe)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",a=>a(e,r.$from.pos,r.$to.pos,i,s))&&e.dispatch(s()),n.preventDefault()}};function GS(e){return{left:e.clientX,top:e.clientY}}function nze(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function CM(e,t,n,r,i){if(r==-1)return!1;let s=e.state.doc.resolve(r);for(let a=s.depth+1;a>0;a--)if(e.someProp(t,o=>a>s.depth?o(e,n,s.nodeAfter,s.before(a),i,!0):o(e,n,s.node(a),s.before(a),i,!1)))return!0;return!1}function ih(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function rze(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&Ye.isSelectable(r)?(ih(e,new Ye(n)),!0):!1}function ize(e,t){if(t==-1)return!1;let n=e.state.selection,r,i;n instanceof Ye&&(r=n.node);let s=e.state.doc.resolve(t);for(let a=s.depth+1;a>0;a--){let o=a>s.depth?s.nodeAfter:s.node(a);if(Ye.isSelectable(o)){r&&n.$from.depth>0&&a>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(a);break}}return i!=null?(ih(e,Ye.create(e.state.doc,i)),!0):!1}function sze(e,t,n,r,i){return CM(e,"handleClickOn",t,n,r)||e.someProp("handleClick",s=>s(e,t,r))||(i?ize(e,n):rze(e,n))}function aze(e,t,n,r){return CM(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",i=>i(e,t,r))}function oze(e,t,n,r){return CM(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",i=>i(e,t,r))||lze(e,n,r)}function lze(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(ih(e,Qe.create(r,0,r.content.size)),!0):!1;let i=r.resolve(t);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s),o=i.before(s);if(a.inlineContent)ih(e,Qe.create(r,o+1,o+1+a.content.size));else if(Ye.isSelectable(a))ih(e,Ye.create(r,o));else continue;return!0}}function TM(e){return L1(e)}const xne=Ds?"metaKey":"ctrlKey";Ni.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=TM(e),i=Date.now(),s="singleClick";i-e.input.lastClick.time<500&&nze(n,e.input.lastClick)&&!n[xne]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?s="doubleClick":e.input.lastClick.type=="doubleClick"&&(s="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let a=e.posAtCoords(GS(n));a&&(s=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new cze(e,a,n,!!r)):(s=="doubleClick"?aze:oze)(e,a.pos,a.inside,n)?n.preventDefault():rc(e,"pointer"))};class cze{constructor(t,n,r,i){this.view=t,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[xne],this.allowDefault=r.shiftKey;let s,a;if(n.inside>-1)s=t.state.doc.nodeAt(n.inside),a=n.inside;else{let d=t.state.doc.resolve(n.pos);s=d.parent,a=d.depth?d.before():0}const o=i?null:r.target,c=o?t.docView.nearestDesc(o,!0):null;this.target=c&&c.dom.nodeType==1?c.dom:null;let{selection:u}=t.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||u instanceof Ye&&u.from<=a&&u.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Pa&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),rc(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Zo(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(GS(t))),this.updateAllowDefault(t),this.allowDefault||!n?rc(this.view,"pointer"):sze(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||Si&&this.mightDrag&&!this.mightDrag.node.isAtom||ni&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(ih(this.view,tt.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):rc(this.view,"pointer")}move(t){this.updateAllowDefault(t),rc(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}Ni.touchstart=e=>{e.input.lastTouch=Date.now(),TM(e),rc(e,"pointer")};Ni.touchmove=e=>{e.input.lastTouch=Date.now(),rc(e,"pointer")};Ni.contextmenu=e=>TM(e);function bne(e,t){return e.composing?!0:Si&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const uze=Ho?5e3:-1;_i.compositionstart=_i.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof Qe&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),L1(e,!0),e.markCursor=null;else if(L1(e,!t.selection.empty),Pa&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let a=s<0?i.lastChild:i.childNodes[s-1];if(!a)break;if(a.nodeType==3){let o=e.domSelection();o&&o.collapse(a,a.nodeValue.length);break}else i=a,s=-1}}e.input.composing=!0}wne(e,uze)};_i.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,wne(e,20))};function wne(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>L1(e),t))}function Ene(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=fze());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function dze(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=rUe(t.focusNode,t.focusOffset),r=iUe(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=e.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let a=n.pmViewDesc;if(!(!a||!a.isText(n.nodeValue)))return r}}return n||r}function fze(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function L1(e,t=!1){if(!(Ho&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),Ene(e),t||e.docView&&e.docView.dirty){let n=SM(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function hze(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const d0=Vi&&Sc<15||Lh&&cUe<604;Ni.copy=_i.cut=(e,t)=>{let n=t,r=e.state.selection,i=n.type=="cut";if(r.empty)return;let s=d0?null:n.clipboardData,a=r.content(),{dom:o,text:c}=_M(e,a);s?(n.preventDefault(),s.clearData(),s.setData("text/html",o.innerHTML),s.setData("text/plain",c)):hze(e,o),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function pze(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function mze(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?f0(e,r.value,null,i,t):f0(e,r.textContent,r.innerHTML,i,t)},50)}function f0(e,t,n,r,i){let s=hne(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",c=>c(e,i,s||Ie.empty)))return!0;if(!s)return!1;let a=pze(s),o=a?e.state.tr.replaceSelectionWith(a,r):e.state.tr.replaceSelection(s);return e.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Sne(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}_i.paste=(e,t)=>{let n=t;if(e.composing&&!Ho)return;let r=d0?null:n.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&f0(e,Sne(r),r.getData("text/html"),i,n)?n.preventDefault():mze(e,n)};class Nne{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const gze=Ds?"altKey":"ctrlKey";function _ne(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[gze]}Ni.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=e.state.selection,s=i.empty?null:e.posAtCoords(GS(n)),a;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Ye?i.to-1:i.to))){if(r&&r.mightDrag)a=Ye.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=e.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=e.docView&&(a=Ye.create(e.state.doc,f.posBefore))}}let o=(a||e.state.selection).content(),{dom:c,text:u,slice:d}=_M(e,o);(!n.dataTransfer.files.length||!ni||Qte>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(d0?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",d0||n.dataTransfer.setData("text/plain",u),e.dragging=new Nne(d,_ne(e,n),a)};Ni.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};_i.dragover=_i.dragenter=(e,t)=>t.preventDefault();_i.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(GS(n));if(!i)return;let s=e.state.doc.resolve(i.pos),a=r&&r.slice;a?e.someProp("transformPasted",m=>{a=m(a,e)}):a=hne(e,Sne(n.dataTransfer),d0?null:n.dataTransfer.getData("text/html"),!1,s);let o=!!(r&&_ne(e,n));if(e.someProp("handleDrop",m=>m(e,n,a||Ie.empty,o))){n.preventDefault();return}if(!a)return;n.preventDefault();let c=a?zte(e.state.doc,s.pos,a):s.pos;c==null&&(c=s.pos);let u=e.state.tr;if(o){let{node:m}=r;m?m.replace(u):u.deleteSelection()}let d=u.mapping.map(c),f=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,h=u.doc;if(f?u.replaceRangeWith(d,d,a.content.firstChild):u.replaceRange(d,d,a),u.doc.eq(h))return;let p=u.doc.resolve(d);if(f&&Ye.isSelectable(a.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(a.content.firstChild))u.setSelection(new Ye(p));else{let m=u.mapping.map(c);u.mapping.maps[u.mapping.maps.length-1].forEach((g,v,y,x)=>m=x),u.setSelection(NM(e,p,u.doc.resolve(m)))}e.focus(),e.dispatch(u.setMeta("uiEvent","drop"))};Ni.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Zo(e)},20))};Ni.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};Ni.beforeinput=(e,t)=>{if(ni&&Ho&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",s=>s(e,Au(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in _i)Ni[e]=_i[e];function h0(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class F1{constructor(t,n){this.toDOM=t,this.spec=n||sd,this.side=this.spec.side||0}map(t,n,r,i){let{pos:s,deleted:a}=t.mapResult(n.from+i,this.side<0?-1:1);return a?null:new or(s-r,s-r,this)}valid(){return!0}eq(t){return this==t||t instanceof F1&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&h0(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class _c{constructor(t,n){this.attrs=t,this.spec=n||sd}map(t,n,r,i){let s=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,a=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=a?null:new or(s,a,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof _c&&h0(this.attrs,t.attrs)&&h0(this.spec,t.spec)}static is(t){return t.type instanceof _c}destroy(){}}class AM{constructor(t,n){this.attrs=t,this.spec=n||sd}map(t,n,r,i){let s=t.mapResult(n.from+i,1);if(s.deleted)return null;let a=t.mapResult(n.to+i,-1);return a.deleted||a.pos<=s.pos?null:new or(s.pos-r,a.pos-r,this)}valid(t,n){let{index:r,offset:i}=t.content.findIndex(n.from),s;return i==n.from&&!(s=t.child(r)).isText&&i+s.nodeSize==n.to}eq(t){return this==t||t instanceof AM&&h0(this.attrs,t.attrs)&&h0(this.spec,t.spec)}destroy(){}}class or{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new or(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new or(t,t,new F1(n,r))}static inline(t,n,r,i){return new or(t,n,new _c(r,i))}static node(t,n,r,i){return new or(t,n,new AM(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof _c}get widget(){return this.type instanceof F1}}const mf=[],sd={};class Ut{constructor(t,n){this.local=t.length?t:mf,this.children=n.length?n:mf}static create(t,n){return n.length?B1(n,t,0,sd):Xr}find(t,n,r){let i=[];return this.findInner(t??0,n??1e9,i,0,r),i}findInner(t,n,r,i,s){for(let a=0;a<this.local.length;a++){let o=this.local[a];o.from<=n&&o.to>=t&&(!s||s(o.spec))&&r.push(o.copy(o.from+i,o.to+i))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<n&&this.children[a+1]>t){let o=this.children[a]+1;this.children[a+2].findInner(t-o,n-o,r,i+o,s)}}map(t,n,r){return this==Xr||t.maps.length==0?this:this.mapInner(t,n,0,0,r||sd)}mapInner(t,n,r,i,s){let a;for(let o=0;o<this.local.length;o++){let c=this.local[o].map(t,r,i);c&&c.type.valid(n,c)?(a||(a=[])).push(c):s.onRemove&&s.onRemove(this.local[o].spec)}return this.children.length?vze(this.children,a||[],t,n,r,i,s):a?new Ut(a.sort(ad),mf):Xr}add(t,n){return n.length?this==Xr?Ut.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let i,s=0;t.forEach((o,c)=>{let u=c+r,d;if(d=Cne(n,o,u)){for(i||(i=this.children.slice());s<i.length&&i[s]<c;)s+=3;i[s]==c?i[s+2]=i[s+2].addInner(o,d,u+1):i.splice(s,0,c,c+o.nodeSize,B1(d,o,u+1,sd)),s+=3}});let a=kne(s?Tne(n):n,-r);for(let o=0;o<a.length;o++)a[o].type.valid(t,a[o])||a.splice(o--,1);return new Ut(a.length?this.local.concat(a).sort(ad):this.local,i||this.children)}remove(t){return t.length==0||this==Xr?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let a,o=r[s]+n,c=r[s+1]+n;for(let d=0,f;d<t.length;d++)(f=t[d])&&f.from>o&&f.to<c&&(t[d]=null,(a||(a=[])).push(f));if(!a)continue;r==this.children&&(r=this.children.slice());let u=r[s+2].removeInner(a,o+1);u!=Xr?r[s+2]=u:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,a;s<t.length;s++)if(a=t[s])for(let o=0;o<i.length;o++)i[o].eq(a,n)&&(i==this.local&&(i=this.local.slice()),i.splice(o--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Ut(i,r):Xr}forChild(t,n){if(this==Xr)return this;if(n.isLeaf)return Ut.empty;let r,i;for(let o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(r=this.children[o+2]);break}let s=t+1,a=s+n.content.size;for(let o=0;o<this.local.length;o++){let c=this.local[o];if(c.from<a&&c.to>s&&c.type instanceof _c){let u=Math.max(s,c.from)-s,d=Math.min(a,c.to)-s;u<d&&(i||(i=[])).push(c.copy(u,d))}}if(i){let o=new Ut(i.sort(ad),mf);return r?new Gl([o,r]):o}return r||Xr}eq(t){if(this==t)return!0;if(!(t instanceof Ut)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return jM(this.localsInner(t))}localsInner(t){if(this==Xr)return mf;if(t.inlineContent||!this.local.some(_c.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof _c||n.push(this.local[r]);return n}forEachSet(t){t(this)}}Ut.empty=new Ut([],[]);Ut.removeOverlap=jM;const Xr=Ut.empty;class Gl{constructor(t){this.members=t}map(t,n){const r=this.members.map(i=>i.map(t,n,sd));return Gl.from(r)}forChild(t,n){if(n.isLeaf)return Ut.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(t,n);s!=Xr&&(s instanceof Gl?r=r.concat(s.members):r.push(s))}return Gl.from(r)}eq(t){if(!(t instanceof Gl)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(t);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let a=0;a<s.length;a++)n.push(s[a])}}return n?jM(r?n:n.sort(ad)):mf}static from(t){switch(t.length){case 0:return Xr;case 1:return t[0];default:return new Gl(t.every(n=>n instanceof Ut)?t:t.reduce((n,r)=>n.concat(r instanceof Ut?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function vze(e,t,n,r,i,s,a){let o=e.slice();for(let u=0,d=s;u<n.maps.length;u++){let f=0;n.maps[u].forEach((h,p,m,g)=>{let v=g-m-(p-h);for(let y=0;y<o.length;y+=3){let x=o[y+1];if(x<0||h>x+d-f)continue;let b=o[y]+d-f;p>=b?o[y+1]=h<=b?-2:-1:h>=d&&v&&(o[y]+=v,o[y+1]+=v)}f+=v}),d=n.maps[u].map(d,-1)}let c=!1;for(let u=0;u<o.length;u+=3)if(o[u+1]<0){if(o[u+1]==-2){c=!0,o[u+1]=-1;continue}let d=n.map(e[u]+s),f=d-i;if(f<0||f>=r.content.size){c=!0;continue}let h=n.map(e[u+1]+s,-1),p=h-i,{index:m,offset:g}=r.content.findIndex(f),v=r.maybeChild(m);if(v&&g==f&&g+v.nodeSize==p){let y=o[u+2].mapInner(n,v,d+1,e[u]+s+1,a);y!=Xr?(o[u]=f,o[u+1]=p,o[u+2]=y):(o[u+1]=-2,c=!0)}else c=!0}if(c){let u=yze(o,e,t,n,i,s,a),d=B1(u,r,0,a);t=d.local;for(let f=0;f<o.length;f+=3)o[f+1]<0&&(o.splice(f,3),f-=3);for(let f=0,h=0;f<d.children.length;f+=3){let p=d.children[f];for(;h<o.length&&o[h]<p;)h+=3;o.splice(h,0,d.children[f],d.children[f+1],d.children[f+2])}}return new Ut(t.sort(ad),o)}function kne(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new or(i.from+t,i.to+t,i.type))}return n}function yze(e,t,n,r,i,s,a){function o(c,u){for(let d=0;d<c.local.length;d++){let f=c.local[d].map(r,i,u);f?n.push(f):a.onRemove&&a.onRemove(c.local[d].spec)}for(let d=0;d<c.children.length;d+=3)o(c.children[d+2],c.children[d]+u+1)}for(let c=0;c<e.length;c+=3)e[c+1]==-1&&o(e[c+2],t[c]+s+1);return n}function Cne(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let s=0,a;s<e.length;s++)(a=e[s])&&a.from>n&&a.to<r&&((i||(i=[])).push(a),e[s]=null);return i}function Tne(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function B1(e,t,n,r){let i=[],s=!1;t.forEach((o,c)=>{let u=Cne(e,o,c+n);if(u){s=!0;let d=B1(u,o,n+c+1,r);d!=Xr&&i.push(c,c+o.nodeSize,d)}});let a=kne(s?Tne(e):e,-n).sort(ad);for(let o=0;o<a.length;o++)a[o].type.valid(t,a[o])||(r.onRemove&&r.onRemove(a[o].spec),a.splice(o--,1));return a.length||i.length?new Ut(a,i):Xr}function ad(e,t){return e.from-t.from||e.to-t.to}function jM(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let s=t[i];if(s.from==r.from){s.to!=r.to&&(t==e&&(t=e.slice()),t[i]=s.copy(s.from,r.to),g$(t,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,s.from),g$(t,i,r.copy(s.from,r.to)));break}}}return t}function g$(e,t,n){for(;t<e.length&&ad(n,e[t])>0;)t++;e.splice(t,0,n)}function Ck(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=Xr&&t.push(r)}),e.cursorWrapper&&t.push(Ut.create(e.state.doc,[e.cursorWrapper.deco])),Gl.from(t)}const xze={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},bze=Vi&&Sc<=11;class wze{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class Eze{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new wze,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Vi&&Sc<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),bze&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,xze)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(l$(this.view)){if(this.suppressingSelectionUpdates)return Zo(this.view);if(Vi&&Sc<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&jd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let s=t.focusNode;s;s=Rh(s))n.add(s);for(let s=t.anchorNode;s;s=Rh(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&l$(t)&&!this.ignoreSelectionChange(r),s=-1,a=-1,o=!1,c=[];if(t.editable)for(let d=0;d<n.length;d++){let f=this.registerMutation(n[d],c);f&&(s=s<0?f.from:Math.min(f.from,s),a=a<0?f.to:Math.max(f.to,a),f.typeOver&&(o=!0))}if(Pa&&c.length){let d=c.filter(f=>f.nodeName=="BR");if(d.length==2){let[f,h]=d;f.parentNode&&f.parentNode.parentNode==h.parentNode?h.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let h of d){let p=h.parentNode;p&&p.nodeName=="LI"&&(!f||_ze(t,f)!=p)&&h.remove()}}}let u=null;s<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&qS(r)&&(u=SM(t))&&u.eq(tt.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Zo(t),this.currentSelection.set(r),t.scrollToSelection()):(s>-1||i)&&(s>-1&&(t.docView.markDirty(s,a),Sze(t)),this.handleDOMChange(s,a,o,c),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||Zo(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let d=0;d<t.addedNodes.length;d++){let f=t.addedNodes[d];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,s=t.nextSibling;if(Vi&&Sc<=11&&t.addedNodes.length)for(let d=0;d<t.addedNodes.length;d++){let{previousSibling:f,nextSibling:h}=t.addedNodes[d];(!f||Array.prototype.indexOf.call(t.addedNodes,f)<0)&&(i=f),(!h||Array.prototype.indexOf.call(t.addedNodes,h)<0)&&(s=h)}let a=i&&i.parentNode==t.target?Ur(i)+1:0,o=r.localPosFromDOM(t.target,a,-1),c=s&&s.parentNode==t.target?Ur(s):t.target.childNodes.length,u=r.localPosFromDOM(t.target,c,1);return{from:o,to:u}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let v$=new WeakMap,y$=!1;function Sze(e){if(!v$.has(e)&&(v$.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=Pa,y$)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),y$=!0}}function x$(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,s=t.endOffset,a=e.domAtPos(e.state.selection.anchor);return jd(a.node,a.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function Nze(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return x$(e,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?x$(e,n):null}function _ze(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function kze(e,t,n){let{node:r,fromOffset:i,toOffset:s,from:a,to:o}=e.docView.parseRange(t,n),c=e.domSelectionRange(),u,d=c.anchorNode;if(d&&e.dom.contains(d.nodeType==1?d:d.parentNode)&&(u=[{node:d,offset:c.anchorOffset}],qS(c)||u.push({node:c.focusNode,offset:c.focusOffset})),ni&&e.input.lastKeyCode===8)for(let v=s;v>i;v--){let y=r.childNodes[v-1],x=y.pmViewDesc;if(y.nodeName=="BR"&&!x){s=v;break}if(!x||x.size)break}let f=e.state.doc,h=e.someProp("domParser")||Ec.fromSchema(e.state.schema),p=f.resolve(a),m=null,g=h.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:Cze,context:p});if(u&&u[0].pos!=null){let v=u[0].pos,y=u[1]&&u[1].pos;y==null&&(y=v),m={anchor:v+a,head:y+a}}return{doc:g,sel:m,from:a,to:o}}function Cze(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(Si&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||Si&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Tze=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Aze(e,t,n,r,i){let s=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let k=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,T=SM(e,k);if(T&&!e.state.selection.eq(T)){if(ni&&Ho&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",j=>j(e,Au(13,"Enter"))))return;let A=e.state.tr.setSelection(T);k=="pointer"?A.setMeta("pointer",!0):k=="key"&&A.scrollIntoView(),s&&A.setMeta("composition",s),e.dispatch(A)}return}let a=e.state.doc.resolve(t),o=a.sharedDepth(n);t=a.before(o+1),n=e.state.doc.resolve(n).after(o+1);let c=e.state.selection,u=kze(e,t,n),d=e.state.doc,f=d.slice(u.from,u.to),h,p;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(h=e.state.selection.to,p="end"):(h=e.state.selection.from,p="start"),e.input.lastKeyCode=null;let m=Pze(f.content,u.doc.content,u.from,h,p);if(m&&e.input.domChangeCount++,(Lh&&e.input.lastIOSEnter>Date.now()-225||Ho)&&i.some(k=>k.nodeType==1&&!Tze.test(k.nodeName))&&(!m||m.endA>=m.endB)&&e.someProp("handleKeyDown",k=>k(e,Au(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!m)if(r&&c instanceof Qe&&!c.empty&&c.$head.sameParent(c.$anchor)&&!e.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))m={start:c.from,endA:c.to,endB:c.to};else{if(u.sel){let k=b$(e,e.state.doc,u.sel);if(k&&!k.eq(e.state.selection)){let T=e.state.tr.setSelection(k);s&&T.setMeta("composition",s),e.dispatch(T)}}return}e.state.selection.from<e.state.selection.to&&m.start==m.endB&&e.state.selection instanceof Qe&&(m.start>e.state.selection.from&&m.start<=e.state.selection.from+2&&e.state.selection.from>=u.from?m.start=e.state.selection.from:m.endA<e.state.selection.to&&m.endA>=e.state.selection.to-2&&e.state.selection.to<=u.to&&(m.endB+=e.state.selection.to-m.endA,m.endA=e.state.selection.to)),Vi&&Sc<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>u.from&&u.doc.textBetween(m.start-u.from-1,m.start-u.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=u.doc.resolveNoCache(m.start-u.from),v=u.doc.resolveNoCache(m.endB-u.from),y=d.resolve(m.start),x=g.sameParent(v)&&g.parent.inlineContent&&y.end()>=m.endA,b;if((Lh&&e.input.lastIOSEnter>Date.now()-225&&(!x||i.some(k=>k.nodeName=="DIV"||k.nodeName=="P"))||!x&&g.pos<u.doc.content.size&&(!g.sameParent(v)||!g.parent.inlineContent)&&!/\S/.test(u.doc.textBetween(g.pos,v.pos,"",""))&&(b=tt.findFrom(u.doc.resolve(g.pos+1),1,!0))&&b.head>g.pos)&&e.someProp("handleKeyDown",k=>k(e,Au(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>m.start&&Oze(d,m.start,m.endA,g,v)&&e.someProp("handleKeyDown",k=>k(e,Au(8,"Backspace")))){Ho&&ni&&e.domObserver.suppressSelectionUpdates();return}ni&&m.endB==m.start&&(e.input.lastChromeDelete=Date.now()),Ho&&!x&&g.start()!=v.start()&&v.parentOffset==0&&g.depth==v.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==m.endA&&(m.endB-=2,v=u.doc.resolveNoCache(m.endB-u.from),setTimeout(()=>{e.someProp("handleKeyDown",function(k){return k(e,Au(13,"Enter"))})},20));let S=m.start,E=m.endA,N=k=>{let T=k||e.state.tr.replace(S,E,u.doc.slice(m.start-u.from,m.endB-u.from));if(u.sel){let A=b$(e,T.doc,u.sel);A&&!(ni&&e.composing&&A.empty&&(m.start!=m.endB||e.input.lastChromeDelete<Date.now()-100)&&(A.head==S||A.head==T.mapping.map(E)-1)||Vi&&A.empty&&A.head==S)&&T.setSelection(A)}return s&&T.setMeta("composition",s),T.scrollIntoView()},_;if(x){if(g.pos==v.pos){Vi&&Sc<=11&&g.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Zo(e),20));let k=N(e.state.tr.delete(S,E)),T=d.resolve(m.start).marksAcross(d.resolve(m.endA));T&&k.ensureMarks(T),e.dispatch(k)}else if(m.endA==m.endB&&(_=jze(g.parent.content.cut(g.parentOffset,v.parentOffset),y.parent.content.cut(y.parentOffset,m.endA-y.start())))){let k=N(e.state.tr);_.type=="add"?k.addMark(S,E,_.mark):k.removeMark(S,E,_.mark),e.dispatch(k)}else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let k=g.parent.textBetween(g.parentOffset,v.parentOffset),T=()=>N(e.state.tr.insertText(k,S,E));e.someProp("handleTextInput",A=>A(e,S,E,k,T))||e.dispatch(T())}}else e.dispatch(N())}function b$(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:NM(e,t.resolve(n.anchor),t.resolve(n.head))}function jze(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,s=r,a,o,c;for(let d=0;d<r.length;d++)i=r[d].removeFromSet(i);for(let d=0;d<n.length;d++)s=n[d].removeFromSet(s);if(i.length==1&&s.length==0)o=i[0],a="add",c=d=>d.mark(o.addToSet(d.marks));else if(i.length==0&&s.length==1)o=s[0],a="remove",c=d=>d.mark(o.removeFromSet(d.marks));else return null;let u=[];for(let d=0;d<t.childCount;d++)u.push(c(t.child(d)));if(ve.from(u).eq(e))return{mark:o,type:a}}function Oze(e,t,n,r,i){if(n-t<=i.pos-r.pos||Tk(r,!0,!1)<i.pos)return!1;let s=e.resolve(t);if(!r.parent.isTextblock){let o=s.nodeAfter;return o!=null&&n==t+o.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let a=e.resolve(Tk(s,!0,!0));return!a.parent.isTextblock||a.pos>n||Tk(a,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function Tk(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let s=e.node(r).maybeChild(e.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function Pze(e,t,n,r,i){let s=e.findDiffStart(t,n);if(s==null)return null;let{a,b:o}=e.findDiffEnd(t,n+e.size,n+t.size);if(i=="end"){let c=Math.max(0,s-Math.min(a,o));r-=a+c-s}if(a<s&&e.size<t.size){let c=r<=s&&r>=a?s-r:0;s-=c,s&&s<t.size&&w$(t.textBetween(s-1,s+1))&&(s+=c?1:-1),o=s+(o-a),a=s}else if(o<s){let c=r<=s&&r>=o?s-r:0;s-=c,s&&s<e.size&&w$(e.textBetween(s-1,s+1))&&(s+=c?1:-1),a=s+(a-o),o=s}return{start:s,endA:a,endB:o}}function w$(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class Ane{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new QUe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(k$),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=N$(this),S$(this),this.nodeViews=_$(this),this.docView=n$(this.state.doc,E$(this),Ck(this),this.dom,this),this.domObserver=new Eze(this,(r,i,s,a)=>Aze(this,r,i,s,a)),this.domObserver.start(),JUe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&bA(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(k$),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let i=this.state,s=!1,a=!1;t.storedMarks&&this.composing&&(Ene(this),a=!0),this.state=t;let o=i.plugins!=t.plugins||this._props.plugins!=n.plugins;if(o||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let p=_$(this);Dze(p,this.nodeViews)&&(this.nodeViews=p,s=!0)}(o||n.handleDOMEvents!=this._props.handleDOMEvents)&&bA(this),this.editable=N$(this),S$(this);let c=Ck(this),u=E$(this),d=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=s||!this.docView.matchesNode(t.doc,u,c);(f||!t.selection.eq(i.selection))&&(a=!0);let h=d=="preserve"&&a&&this.dom.style.overflowAnchor==null&&fUe(this);if(a){this.domObserver.stop();let p=f&&(Vi||ni)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&Ize(i.selection,t.selection);if(f){let m=ni?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=dze(this)),(s||!this.docView.update(t.doc,u,c,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=n$(t.doc,u,c,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&RUe(this))?Zo(this,p):(une(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():h&&hUe(h)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Ye){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&X8(this,n.getBoundingClientRect(),t)}else X8(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new Nne(t.slice,t.move,i<0?void 0:Ye.create(this.state.doc,i))}someProp(t,n){let r=this._props&&this._props[t],i;if(r!=null&&(i=n?n(r):r))return i;for(let a=0;a<this.directPlugins.length;a++){let o=this.directPlugins[a].props[t];if(o!=null&&(i=n?n(o):o))return i}let s=this.state.plugins;if(s)for(let a=0;a<s.length;a++){let o=s[a].props[t];if(o!=null&&(i=n?n(o):o))return i}}hasFocus(){if(Vi){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&pUe(this.dom),Zo(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return xUe(this,t)}coordsAtPos(t,n=1){return nne(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let i=this.docView.posFromDOM(t,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,n){return NUe(this,n||this.state,t)}pasteHTML(t,n){return f0(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return f0(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return _M(this,t)}destroy(){this.docView&&(ZUe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ck(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,tUe())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return tze(this,t)}domSelectionRange(){let t=this.domSelection();return t?Si&&this.root.nodeType===11&&aUe(this.dom.ownerDocument)==this.dom&&Nze(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Ane.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function E$(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[or.node(0,e.state.doc.content.size,t)]}function S$(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:or.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function N$(e){return!e.someProp("editable",t=>t(e.state)===!1)}function Ize(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function _$(e){let t=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function Dze(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r}function k$(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Lc={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},$1={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Mze=typeof navigator<"u"&&/Mac/.test(navigator.platform),Rze=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var zr=0;zr<10;zr++)Lc[48+zr]=Lc[96+zr]=String(zr);for(var zr=1;zr<=24;zr++)Lc[zr+111]="F"+zr;for(var zr=65;zr<=90;zr++)Lc[zr]=String.fromCharCode(zr+32),$1[zr]=String.fromCharCode(zr);for(var Ak in Lc)$1.hasOwnProperty(Ak)||($1[Ak]=Lc[Ak]);function Lze(e){var t=Mze&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||Rze&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?$1:Lc)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Fze=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Bze=typeof navigator<"u"&&/Win/.test(navigator.platform);function $ze(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,i,s,a;for(let o=0;o<t.length-1;o++){let c=t[o];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))Fze?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),a&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function Uze(e){let t=Object.create(null);for(let n in e)t[$ze(n)]=e[n];return t}function jk(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function zze(e){return new hn({props:{handleKeyDown:OM(e)}})}function OM(e){let t=Uze(e);return function(n,r){let i=Lze(r),s,a=t[jk(i,r)];if(a&&a(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let o=t[jk(i,r,!1)];if(o&&o(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(Bze&&r.ctrlKey&&r.altKey)&&(s=Lc[r.keyCode])&&s!=i){let o=t[jk(s,r)];if(o&&o(n.state,n.dispatch,n))return!0}}return!1}}const PM=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function jne(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const One=(e,t,n)=>{let r=jne(e,n);if(!r)return!1;let i=IM(r);if(!i){let a=r.blockRange(),o=a&&bp(a);return o==null?!1:(t&&t(e.tr.lift(a,o).scrollIntoView()),!0)}let s=i.nodeBefore;if($ne(e,i,t,-1))return!0;if(r.parent.content.size==0&&(Fh(s,"end")||Ye.isSelectable(s)))for(let a=r.depth;;a--){let o=VS(e.doc,r.before(a),r.after(a),Ie.empty);if(o&&o.slice.size<o.to-o.from){if(t){let c=e.tr.step(o);c.setSelection(Fh(s,"end")?tt.findFrom(c.doc.resolve(c.mapping.map(i.pos,-1)),-1):Ye.create(c.doc,i.pos-s.nodeSize)),t(c.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},Hze=(e,t,n)=>{let r=jne(e,n);if(!r)return!1;let i=IM(r);return i?Pne(e,i,t):!1},Vze=(e,t,n)=>{let r=Dne(e,n);if(!r)return!1;let i=DM(r);return i?Pne(e,i,t):!1};function Pne(e,t,n){let r=t.nodeBefore,i=r,s=t.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let a=t.nodeAfter,o=a,c=t.pos+1;for(;!o.isTextblock;c++){if(o.type.spec.isolating)return!1;let d=o.firstChild;if(!d)return!1;o=d}let u=VS(e.doc,s,c,Ie.empty);if(!u||u.from!=s||u instanceof xr&&u.slice.size>=c-s)return!1;if(n){let d=e.tr.step(u);d.setSelection(Qe.create(d.doc,s)),n(d.scrollIntoView())}return!0}function Fh(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Ine=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=IM(r)}let a=s&&s.nodeBefore;return!a||!Ye.isSelectable(a)?!1:(t&&t(e.tr.setSelection(Ye.create(e.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function IM(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function Dne(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const Mne=(e,t,n)=>{let r=Dne(e,n);if(!r)return!1;let i=DM(r);if(!i)return!1;let s=i.nodeAfter;if($ne(e,i,t,1))return!0;if(r.parent.content.size==0&&(Fh(s,"start")||Ye.isSelectable(s))){let a=VS(e.doc,r.before(),r.after(),Ie.empty);if(a&&a.slice.size<a.to-a.from){if(t){let o=e.tr.step(a);o.setSelection(Fh(s,"start")?tt.findFrom(o.doc.resolve(o.mapping.map(i.pos)),1):Ye.create(o.doc,o.mapping.map(i.pos))),t(o.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Rne=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=DM(r)}let a=s&&s.nodeAfter;return!a||!Ye.isSelectable(a)?!1:(t&&t(e.tr.setSelection(Ye.create(e.doc,s.pos)).scrollIntoView()),!0)};function DM(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const Wze=(e,t)=>{let n=e.selection,r=n instanceof Ye,i;if(r){if(n.node.isTextblock||!ou(e.doc,n.from))return!1;i=n.from}else if(i=HS(e.doc,n.from,-1),i==null)return!1;if(t){let s=e.tr.join(i);r&&s.setSelection(Ye.create(s.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},qze=(e,t)=>{let n=e.selection,r;if(n instanceof Ye){if(n.node.isTextblock||!ou(e.doc,n.to))return!1;r=n.to}else if(r=HS(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},Kze=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),s=i&&bp(i);return s==null?!1:(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)},Lne=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function MM(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Gze=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),a=MM(i.contentMatchAt(s));if(!a||!i.canReplaceWith(s,s,a))return!1;if(t){let o=n.after(),c=e.tr.replaceWith(o,o,a.createAndFill());c.setSelection(tt.near(c.doc.resolve(o),1)),t(c.scrollIntoView())}return!0},Fne=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof ps||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=MM(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,o=e.tr.insert(a,s.createAndFill());o.setSelection(Qe.create(o.doc,a+1)),t(o.scrollIntoView())}return!0},Bne=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Jo(e.doc,s))return t&&t(e.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&bp(r);return i==null?!1:(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)};function Yze(e){return(t,n)=>{let{$from:r,$to:i}=t.selection;if(t.selection instanceof Ye&&t.selection.node.isBlock)return!r.parentOffset||!Jo(t.doc,r.pos)?!1:(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],a,o,c=!1,u=!1;for(let p=r.depth;;p--)if(r.node(p).isBlock){c=r.end(p)==r.pos+(r.depth-p),u=r.start(p)==r.pos-(r.depth-p),o=MM(r.node(p-1).contentMatchAt(r.indexAfter(p-1))),s.unshift(c&&o?{type:o}:null),a=p;break}else{if(p==1)return!1;s.unshift(null)}let d=t.tr;(t.selection instanceof Qe||t.selection instanceof ps)&&d.deleteSelection();let f=d.mapping.map(r.pos),h=Jo(d.doc,f,s.length,s);if(h||(s[0]=o?{type:o}:null,h=Jo(d.doc,f,s.length,s)),!h)return!1;if(d.split(f,s.length,s),!c&&u&&r.node(a).type!=o){let p=d.mapping.map(r.before(a)),m=d.doc.resolve(p);o&&r.node(a-1).canReplaceWith(m.index(),m.index()+1,o)&&d.setNodeMarkup(d.mapping.map(r.before(a)),o)}return n&&n(d.scrollIntoView()),!0}}const Xze=Yze(),Qze=(e,t)=>{let{$from:n,to:r}=e.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),t&&t(e.tr.setSelection(Ye.create(e.doc,i))),!0)};function Jze(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,s=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(i.isTextblock||ou(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function $ne(e,t,n,r){let i=t.nodeBefore,s=t.nodeAfter,a,o,c=i.type.spec.isolating||s.type.spec.isolating;if(!c&&Jze(e,t,n))return!0;let u=!c&&t.parent.canReplace(t.index(),t.index()+1);if(u&&(a=(o=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&o.matchType(a[0]||s.type).validEnd){if(n){let p=t.pos+s.nodeSize,m=ve.empty;for(let y=a.length-1;y>=0;y--)m=ve.from(a[y].create(null,m));m=ve.from(i.copy(m));let g=e.tr.step(new kr(t.pos-1,p,t.pos,p,new Ie(m,1,0),a.length,!0)),v=g.doc.resolve(p+2*a.length);v.nodeAfter&&v.nodeAfter.type==i.type&&ou(g.doc,v.pos)&&g.join(v.pos),n(g.scrollIntoView())}return!0}let d=s.type.spec.isolating||r>0&&c?null:tt.findFrom(t,1),f=d&&d.$from.blockRange(d.$to),h=f&&bp(f);if(h!=null&&h>=t.depth)return n&&n(e.tr.lift(f,h).scrollIntoView()),!0;if(u&&Fh(s,"start",!0)&&Fh(i,"end")){let p=i,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let g=s,v=1;for(;!g.isTextblock;g=g.firstChild)v++;if(p.canReplace(p.childCount,p.childCount,g.content)){if(n){let y=ve.empty;for(let b=m.length-1;b>=0;b--)y=ve.from(m[b].copy(y));let x=e.tr.step(new kr(t.pos-m.length,t.pos+s.nodeSize,t.pos+v,t.pos+s.nodeSize-v,new Ie(y,m.length,0),0,!0));n(x.scrollIntoView())}return!0}}return!1}function Une(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(t.tr.setSelection(Qe.create(t.doc,e<0?i.start(s):i.end(s)))),!0):!1}}const Zze=Une(-1),eHe=Une(1);function tHe(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,a=i.blockRange(s),o=a&&xM(a,e,t);return o?(r&&r(n.tr.wrap(a,o).scrollIntoView()),!0):!1}}function C$(e,t=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:a},$to:{pos:o}}=n.selection.ranges[s];n.doc.nodesBetween(a,o,(c,u)=>{if(i)return!1;if(!(!c.isTextblock||c.hasMarkup(e,t)))if(c.type==e)i=!0;else{let d=n.doc.resolve(u),f=d.index();i=d.parent.canReplaceWith(f,f+1,e)}})}if(!i)return!1;if(r){let s=n.tr;for(let a=0;a<n.selection.ranges.length;a++){let{$from:{pos:o},$to:{pos:c}}=n.selection.ranges[a];s.setBlockType(o,c,e,t)}r(s.scrollIntoView())}return!0}}function RM(...e){return function(t,n,r){for(let i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}RM(PM,One,Ine);RM(PM,Mne,Rne);RM(Lne,Fne,Bne,Xze);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function nHe(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,a=i.blockRange(s);if(!a)return!1;let o=r?n.tr:null;return rHe(o,a,e,t)?(r&&r(o.scrollIntoView()),!0):!1}}function rHe(e,t,n,r=null){let i=!1,s=t,a=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let c=a.resolve(t.start-2);s=new I1(c,c,t.depth),t.endIndex<t.parent.childCount&&(t=new I1(t.$from,a.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let o=xM(s,n,r,t);return o?(e&&iHe(e,t,o,i,n),!0):!1}function iHe(e,t,n,r,i){let s=ve.empty;for(let d=n.length-1;d>=0;d--)s=ve.from(n[d].type.create(n[d].attrs,s));e.step(new kr(t.start-(r?2:0),t.end,t.start,t.end,new Ie(s,0,0),n.length,!0));let a=0;for(let d=0;d<n.length;d++)n[d].type==i&&(a=d+1);let o=n.length-a,c=t.start+n.length-(r?2:0),u=t.parent;for(let d=t.startIndex,f=t.endIndex,h=!0;d<f;d++,h=!1)!h&&Jo(e.doc,c,o)&&(e.split(c,o),c+=2*o),c+=u.child(d).nodeSize;return e}function sHe(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,a=>a.childCount>0&&a.firstChild.type==e);return s?n?r.node(s.depth-1).type==e?aHe(t,n,e,s):oHe(t,n,s):!0:!1}}function aHe(e,t,n,r){let i=e.tr,s=r.end,a=r.$to.end(r.depth);s<a&&(i.step(new kr(s-1,a,s,a,new Ie(ve.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new I1(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth));const o=bp(r);if(o==null)return!1;i.lift(r,o);let c=i.doc.resolve(i.mapping.map(s,-1)-1);return ou(i.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&i.join(c.pos),t(i.scrollIntoView()),!0}function oHe(e,t,n){let r=e.tr,i=n.parent;for(let p=n.end,m=n.endIndex-1,g=n.startIndex;m>g;m--)p-=i.child(m).nodeSize,r.delete(p-1,p+1);let s=r.doc.resolve(n.start),a=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let o=n.startIndex==0,c=n.endIndex==i.childCount,u=s.node(-1),d=s.index(-1);if(!u.canReplace(d+(o?0:1),d+1,a.content.append(c?ve.empty:ve.from(i))))return!1;let f=s.pos,h=f+a.nodeSize;return r.step(new kr(f-(o?1:0),h+(c?1:0),f+1,h-1,new Ie((o?ve.empty:ve.from(i.copy(ve.empty))).append(c?ve.empty:ve.from(i.copy(ve.empty))),o?0:1,c?0:1),o?0:1)),t(r.scrollIntoView()),!0}function lHe(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==e);if(!s)return!1;let a=s.startIndex;if(a==0)return!1;let o=s.parent,c=o.child(a-1);if(c.type!=e)return!1;if(n){let u=c.lastChild&&c.lastChild.type==o.type,d=ve.from(u?e.create():null),f=new Ie(ve.from(e.create(null,ve.from(o.type.create(null,d)))),u?3:1,0),h=s.start,p=s.end;n(t.tr.step(new kr(h-(u?3:1),p,h,p,f,1,!0)).scrollIntoView())}return!0}}var cHe=Object.defineProperty,zne=(e,t)=>{for(var n in t)cHe(e,n,{get:t[n],enumerable:!0})};function YS(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var XS=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([a,o])=>[a,(...u)=>{const d=o(...u)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,a=[],o=!!e,c=e||i.tr,u=()=>(!o&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(n).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),v=h(...m)(g);return a.push(v),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(t).map(([o,c])=>[o,(...u)=>c(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,a={tr:e,editor:r,view:s,state:YS({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([o,c])=>[o,(...u)=>c(...u)(a)]))}};return a}},uHe=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}};function Hne(e,t){const n=new bM(e);return t.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}var Vne=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&Vne(r)}return e};function Ly(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return Vne(n)}function p0(e,t,n){if(e instanceof wc||e instanceof ve)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,i=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return ve.fromArray(e.map(o=>t.nodeFromJSON(o)));const a=t.nodeFromJSON(e);return n.errorOnInvalidContent&&a.check(),a}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",s),p0("",t,n)}if(i){if(n.errorOnInvalidContent){let a=!1,o="";const c=new Ote({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(a=!0,o=typeof u=="string"?u:u.outerHTML,null)}]}})});if(n.slice?Ec.fromSchema(c).parseSlice(Ly(e),n.parseOptions):Ec.fromSchema(c).parse(Ly(e),n.parseOptions),n.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${o}`)})}const s=Ec.fromSchema(t);return n.slice?s.parseSlice(Ly(e),n.parseOptions).content:s.parse(Ly(e),n.parseOptions)}return p0("",t,n)}function wA(e,t,n={},r={}){return p0(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function dHe(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function EA(e,t){const n=[];return e.descendants((r,i)=>{t(r)&&n.push({node:r,pos:i})}),n}function fHe(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function Wne(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function QS(e){return t=>Wne(t.$from,e)}function Ke(e,t,n){return e.config[t]===void 0&&e.parent?Ke(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?Ke(e.parent,t,n):null}):e.config[t]}function LM(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=Ke(t,"addExtensions",n);return r?[t,...LM(r())]:t}).flat(10)}function FM(e,t){const n=Ud.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function qne(e){return typeof e=="function"}function jt(e,t=void 0,...n){return qne(e)?t?e.bind(t)(...n):e(...n):e}function hHe(e={}){return Object.keys(e).length===0&&e.constructor===Object}function m0(e){const t=e.filter(i=>i.type==="extension"),n=e.filter(i=>i.type==="node"),r=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function Kne(e){const t=[],{nodeExtensions:n,markExtensions:r}=m0(e),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(a=>{const o={name:a.name,options:a.options,storage:a.storage,extensions:i},c=Ke(a,"addGlobalAttributes",o);if(!c)return;c().forEach(d=>{d.types.forEach(f=>{Object.entries(d.attributes).forEach(([h,p])=>{t.push({type:f,name:h,attribute:{...s,...p}})})})})}),i.forEach(a=>{const o={name:a.name,options:a.options,storage:a.storage},c=Ke(a,"addAttributes",o);if(!c)return;const u=c();Object.entries(u).forEach(([d,f])=>{const h={...s,...f};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,t.push({type:a.name,name:d,attribute:h})})}),t}function rn(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const o=s?String(s).split(" "):[],c=r[i]?r[i].split(" "):[],u=o.filter(d=>!c.includes(d));r[i]=[...c,...u].join(" ")}else if(i==="style"){const o=s?s.split(";").map(d=>d.trim()).filter(Boolean):[],c=r[i]?r[i].split(";").map(d=>d.trim()).filter(Boolean):[],u=new Map;c.forEach(d=>{const[f,h]=d.split(":").map(p=>p.trim());u.set(f,h)}),o.forEach(d=>{const[f,h]=d.split(":").map(p=>p.trim());u.set(f,h)}),r[i]=Array.from(u.entries()).map(([d,f])=>`${d}: ${f}`).join("; ")}else r[i]=s}),r},{})}function U1(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>rn(n,r),{})}function pHe(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function T$(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const i=t.reduce((s,a)=>{const o=a.attribute.parseHTML?a.attribute.parseHTML(n):pHe(n.getAttribute(a.name));return o==null?s:{...s,[a.name]:o}},{});return{...r,...i}}}}function A$(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&hHe(n)?!1:n!=null))}function mHe(e,t){var n;const r=Kne(e),{nodeExtensions:i,markExtensions:s}=m0(e),a=(n=i.find(u=>Ke(u,"topNode")))==null?void 0:n.name,o=Object.fromEntries(i.map(u=>{const d=r.filter(y=>y.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:t},h=e.reduce((y,x)=>{const b=Ke(x,"extendNodeSchema",f);return{...y,...b?b(u):{}}},{}),p=A$({...h,content:jt(Ke(u,"content",f)),marks:jt(Ke(u,"marks",f)),group:jt(Ke(u,"group",f)),inline:jt(Ke(u,"inline",f)),atom:jt(Ke(u,"atom",f)),selectable:jt(Ke(u,"selectable",f)),draggable:jt(Ke(u,"draggable",f)),code:jt(Ke(u,"code",f)),whitespace:jt(Ke(u,"whitespace",f)),linebreakReplacement:jt(Ke(u,"linebreakReplacement",f)),defining:jt(Ke(u,"defining",f)),isolating:jt(Ke(u,"isolating",f)),attrs:Object.fromEntries(d.map(y=>{var x,b;return[y.name,{default:(x=y==null?void 0:y.attribute)==null?void 0:x.default,validate:(b=y==null?void 0:y.attribute)==null?void 0:b.validate}]}))}),m=jt(Ke(u,"parseHTML",f));m&&(p.parseDOM=m.map(y=>T$(y,d)));const g=Ke(u,"renderHTML",f);g&&(p.toDOM=y=>g({node:y,HTMLAttributes:U1(y,d)}));const v=Ke(u,"renderText",f);return v&&(p.toText=v),[u.name,p]})),c=Object.fromEntries(s.map(u=>{const d=r.filter(v=>v.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:t},h=e.reduce((v,y)=>{const x=Ke(y,"extendMarkSchema",f);return{...v,...x?x(u):{}}},{}),p=A$({...h,inclusive:jt(Ke(u,"inclusive",f)),excludes:jt(Ke(u,"excludes",f)),group:jt(Ke(u,"group",f)),spanning:jt(Ke(u,"spanning",f)),code:jt(Ke(u,"code",f)),attrs:Object.fromEntries(d.map(v=>{var y,x;return[v.name,{default:(y=v==null?void 0:v.attribute)==null?void 0:y.default,validate:(x=v==null?void 0:v.attribute)==null?void 0:x.validate}]}))}),m=jt(Ke(u,"parseHTML",f));m&&(p.parseDOM=m.map(v=>T$(v,d)));const g=Ke(u,"renderHTML",f);return g&&(p.toDOM=v=>g({mark:v,HTMLAttributes:U1(v,d)})),[u.name,p]}));return new Ote({topNode:a,nodes:o,marks:c})}function gHe(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function BM(e){return e.sort((n,r)=>{const i=Ke(n,"priority")||100,s=Ke(r,"priority")||100;return i>s?-1:i<s?1:0})}function Gne(e){const t=BM(LM(e)),n=gHe(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function Yne(e,t,n){const{from:r,to:i}=t,{blockSeparator:s=`

`,textSerializers:a={}}=n||{};let o="";return e.nodesBetween(r,i,(c,u,d,f)=>{var h;c.isBlock&&u>r&&(o+=s);const p=a==null?void 0:a[c.type.name];if(p)return d&&(o+=p({node:c,pos:u,parent:d,index:f,range:t})),!1;c.isText&&(o+=(h=c==null?void 0:c.text)==null?void 0:h.slice(Math.max(r,u)-u,i-u))}),o}function vHe(e,t){const n={from:0,to:e.content.size};return Yne(e,n,t)}function Xne(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function El(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function Qne(e,t){const n=El(t,e.schema),{from:r,to:i,empty:s}=e.selection,a=[];s?(e.storedMarks&&a.push(...e.storedMarks),a.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,c=>{a.push(...c.marks)});const o=a.find(c=>c.type.name===n.name);return o?{...o.attrs}:{}}function Zn(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function yHe(e,t){const n=Zn(t,e.schema),{from:r,to:i}=e.selection,s=[];e.doc.nodesBetween(r,i,o=>{s.push(o)});const a=s.reverse().find(o=>o.type.name===n.name);return a?{...a.attrs}:{}}function JS(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function Jne(e,t){const n=JS(typeof t=="string"?t:t.name,e.schema);return n==="node"?yHe(e,t):n==="mark"?Qne(e,t):{}}function xHe(e,t=JSON.stringify){const n={};return e.filter(r=>{const i=t(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function bHe(e){const t=xHe(e);return t.length===1?t:t.filter((n,r)=>!t.filter((s,a)=>a!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function Zne(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((i,s)=>{const a=[];if(i.ranges.length)i.forEach((o,c)=>{a.push({from:o,to:c})});else{const{from:o,to:c}=n[s];if(o===void 0||c===void 0)return;a.push({from:o,to:c})}a.forEach(({from:o,to:c})=>{const u=t.slice(s).map(o,-1),d=t.slice(s).map(c),f=t.invert().map(u,-1),h=t.invert().map(d);r.push({oldRange:{from:f,to:h},newRange:{from:u,to:d}})})}),bHe(r)}function $M(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function z1(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(i=>n.strict?t[i]===e[i]:$M(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function ere(e,t,n={}){return e.find(r=>r.type===t&&z1(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function j$(e,t,n={}){return!!ere(e,t,n)}function UM(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===t))&&(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===t)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!ere([...i.node.marks],t,n)))return;let a=i.index,o=e.start()+i.offset,c=a+1,u=o+i.node.nodeSize;for(;a>0&&j$([...e.parent.child(a-1).marks],t,n);)a-=1,o-=e.parent.child(a).nodeSize;for(;c<e.parent.childCount&&j$([...e.parent.child(c).marks],t,n);)u+=e.parent.child(c).nodeSize,c+=1;return{from:o,to:u}}function zM(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(i=>{const s=n.resolve(e),a=UM(s,i.type);a&&r.push({mark:i,...a})}):n.nodesBetween(e,t,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(a=>({from:s,to:s+i.nodeSize,mark:a})))}),r}var wHe=(e,t,n,r=20)=>{const i=e.doc.resolve(n);let s=r,a=null;for(;s>0&&a===null;){const o=i.node(s);(o==null?void 0:o.type.name)===t?a=o:s-=1}return[a,s]};function Ok(e,t){return t.nodes[e]||t.marks[e]||null}function Px(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=e.find(s=>s.type===t&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var EHe=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(i,s,a,o)=>{var c,u;const d=((u=(c=i.type.spec).toText)==null?void 0:u.call(c,{node:i,pos:s,parent:a,index:o}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,r-s))}),n};function SA(e,t,n={}){const{empty:r,ranges:i}=e.selection,s=t?El(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(f=>s?s.name===f.type.name:!0).find(f=>z1(f.attrs,n,{strict:!1}));let a=0;const o=[];if(i.forEach(({$from:f,$to:h})=>{const p=f.pos,m=h.pos;e.doc.nodesBetween(p,m,(g,v)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(p,v),x=Math.min(m,v+g.nodeSize),b=x-y;a+=b,o.push(...g.marks.map(S=>({mark:S,from:y,to:x})))})}),a===0)return!1;const c=o.filter(f=>s?s.name===f.mark.type.name:!0).filter(f=>z1(f.mark.attrs,n,{strict:!1})).reduce((f,h)=>f+h.to-h.from,0),u=o.filter(f=>s?f.mark.type!==s&&f.mark.type.excludes(s):!0).reduce((f,h)=>f+h.to-h.from,0);return(c>0?c+u:c)>=a}function Fc(e,t,n={}){const{from:r,to:i,empty:s}=e.selection,a=t?Zn(t,e.schema):null,o=[];e.doc.nodesBetween(r,i,(f,h)=>{if(f.isText)return;const p=Math.max(r,h),m=Math.min(i,h+f.nodeSize);o.push({node:f,from:p,to:m})});const c=i-r,u=o.filter(f=>a?a.name===f.node.type.name:!0).filter(f=>z1(f.node.attrs,n,{strict:!1}));return s?!!u.length:u.reduce((f,h)=>f+h.to-h.from,0)>=c}function SHe(e,t,n={}){if(!t)return Fc(e,null,n)||SA(e,null,n);const r=JS(t,e.schema);return r==="node"?Fc(e,t,n):r==="mark"?SA(e,t,n):!1}var NHe=(e,t)=>{const{$from:n,$to:r,$anchor:i}=e.selection;if(t){const s=QS(o=>o.type.name===t)(e.selection);if(!s)return!1;const a=e.doc.resolve(s.pos+1);return i.pos+1===a.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},_He=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function O$(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function P$(e,t){const{nodeExtensions:n}=m0(t),r=n.find(a=>a.name===e);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=jt(Ke(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function ZS(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let i=!0;return e.content.forEach(s=>{i!==!1&&(ZS(s,{ignoreWhitespace:n,checkChildren:t})||(i=!1))}),i}return!1}function tre(e){return e instanceof Ye}function nre(e){return e instanceof Qe}function Wu(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function rre(e,t=null){if(!t)return null;const n=tt.atStart(e),r=tt.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const i=n.from,s=r.to;return t==="all"?Qe.create(e,Wu(0,i,s),Wu(e.content.size,i,s)):Qe.create(e,Wu(t,i,s),Wu(t,i,s))}function kHe(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof xr||i instanceof kr))return;const s=e.mapping.maps[r];let a=0;s.forEach((o,c,u,d)=>{a===0&&(a=d)}),e.setSelection(tt.near(e.doc.resolve(a),n))}var eN=class{constructor(e){this.find=e.find,this.handler=e.handler}},CHe=(e,t)=>{if($M(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Fy(e){var t;const{editor:n,from:r,to:i,text:s,rules:a,plugin:o}=e,{view:c}=n;if(c.composing)return!1;const u=c.state.doc.resolve(r);if(u.parent.type.spec.code||(t=u.nodeBefore||u.nodeAfter)!=null&&t.marks.find(h=>h.type.spec.code))return!1;let d=!1;const f=EHe(u)+s;return a.forEach(h=>{if(d)return;const p=CHe(f,h.find);if(!p)return;const m=c.state.tr,g=YS({state:c.state,transaction:m}),v={from:r-(p[0].length-s.length),to:i},{commands:y,chain:x,can:b}=new XS({editor:n,state:g});h.handler({state:g,range:v,match:p,commands:y,chain:x,can:b})===null||!m.steps.length||(m.setMeta(o,{transform:m,from:r,to:i,text:s}),c.dispatch(m),d=!0)}),d}function THe(e){const{editor:t,rules:n}=e,r=new hn({state:{init(){return null},apply(i,s,a){const o=i.getMeta(r);if(o)return o;const c=i.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:d}=c;typeof d=="string"?d=d:d=FM(ve.from(d),a.schema);const{from:f}=c,h=f+d.length;Fy({editor:t,from:f,to:h,text:d,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,a,o){return Fy({editor:t,from:s,to:a,text:o,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Fy({editor:t,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:a}=i.state.selection;return a?Fy({editor:t,from:a.pos,to:a.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function AHe(e){return Object.prototype.toString.call(e).slice(8,-1)}function By(e){return AHe(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function ire(e,t){const n={...e};return By(e)&&By(t)&&Object.keys(t).forEach(r=>{By(t[r])&&By(e[r])?n[r]=ire(e[r],t[r]):n[r]=t[r]}),n}var HM=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...jt(Ke(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...jt(Ke(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>ire(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},cu=class sre extends HM{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new sre(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const a=i.marks();if(!!!a.find(u=>(u==null?void 0:u.type.name)===n.name))return!1;const c=a.find(u=>(u==null?void 0:u.type.name)===n.name);return c&&r.removeStoredMark(c),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function jHe(e){return typeof e=="number"}var OHe=class{constructor(e){this.find=e.find,this.handler=e.handler}},PHe=(e,t,n)=>{if($M(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=e,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function IHe(e){const{editor:t,state:n,from:r,to:i,rule:s,pasteEvent:a,dropEvent:o}=e,{commands:c,chain:u,can:d}=new XS({editor:t,state:n}),f=[];return n.doc.nodesBetween(r,i,(p,m)=>{var g,v,y,x,b;if((v=(g=p.type)==null?void 0:g.spec)!=null&&v.code||!(p.isText||p.isTextblock||p.isInline))return;const S=(b=(x=(y=p.content)==null?void 0:y.size)!=null?x:p.nodeSize)!=null?b:0,E=Math.max(r,m),N=Math.min(i,m+S);if(E>=N)return;const _=p.isText?p.text||"":p.textBetween(E-m,N-m,void 0,"");PHe(_,s.find,a).forEach(T=>{if(T.index===void 0)return;const A=E+T.index+1,j=A+T[0].length,D={from:n.tr.mapping.map(A),to:n.tr.mapping.map(j)},I=s.handler({state:n,range:D,match:T,commands:c,chain:u,can:d,pasteEvent:a,dropEvent:o});f.push(I)})}),f.every(p=>p!==null)}var $y=null,DHe=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function MHe(e){const{editor:t,rules:n}=e;let r=null,i=!1,s=!1,a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,o;try{o=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{o=null}const c=({state:d,from:f,to:h,rule:p,pasteEvt:m})=>{const g=d.tr,v=YS({state:d,transaction:g});if(!(!IHe({editor:t,state:v,from:Math.max(f-1,0),to:h.b-1,rule:p,pasteEvent:m,dropEvent:o})||!g.steps.length)){try{o=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{o=null}return a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(d=>new hn({view(f){const h=m=>{var g;r=(g=f.dom.parentElement)!=null&&g.contains(m.target)?f.dom.parentElement:null,r&&($y=t)},p=()=>{$y&&($y=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(f,h)=>{if(s=r===f.dom.parentElement,o=h,!s){const p=$y;p!=null&&p.isEditable&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(f,h)=>{var p;const m=(p=h.clipboardData)==null?void 0:p.getData("text/html");return a=h,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(f,h,p)=>{const m=f[0],g=m.getMeta("uiEvent")==="paste"&&!i,v=m.getMeta("uiEvent")==="drop"&&!s,y=m.getMeta("applyPasteRules"),x=!!y;if(!g&&!v&&!x)return;if(x){let{text:E}=y;typeof E=="string"?E=E:E=FM(ve.from(E),p.schema);const{from:N}=y,_=N+E.length,k=DHe(E);return c({rule:d,state:p,from:N,to:{b:_},pasteEvt:k})}const b=h.doc.content.findDiffStart(p.doc.content),S=h.doc.content.findDiffEnd(p.doc.content);if(!(!jHe(b)||!S||b===S.b))return c({rule:d,state:p,from:b,to:S,pasteEvt:a})}}))}var tN=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Gne(e),this.schema=mHe(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:Ok(t.name,this.schema)},r=Ke(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this;return BM([...this.extensions].reverse()).map(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:Ok(r.name,this.schema)},s=[],a=Ke(r,"addKeyboardShortcuts",i);let o={};if(r.type==="mark"&&Ke(r,"exitable",i)&&(o.ArrowRight=()=>cu.handleExit({editor:e,mark:r})),a){const h=Object.fromEntries(Object.entries(a()).map(([p,m])=>[p,()=>m({editor:e})]));o={...o,...h}}const c=zze(o);s.push(c);const u=Ke(r,"addInputRules",i);if(O$(r,e.options.enableInputRules)&&u){const h=u();if(h&&h.length){const p=THe({editor:e,rules:h}),m=Array.isArray(p)?p:[p];s.push(...m)}}const d=Ke(r,"addPasteRules",i);if(O$(r,e.options.enablePasteRules)&&d){const h=d();if(h&&h.length){const p=MHe({editor:e,rules:h});s.push(...p)}}const f=Ke(r,"addProseMirrorPlugins",i);if(f){const h=f();s.push(...h)}return s}).flat()}get attributes(){return Kne(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=m0(this.extensions);return Object.fromEntries(t.filter(n=>!!Ke(n,"addNodeView")).map(n=>{const r=this.attributes.filter(o=>o.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Zn(n.name,this.schema)},s=Ke(n,"addNodeView",i);if(!s)return[];const a=(o,c,u,d,f)=>{const h=U1(o,r);return s()({node:o,view:c,getPos:u,decorations:d,innerDecorations:f,editor:e,extension:n,HTMLAttributes:h})};return[n.name,a]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=m0(this.extensions);return Object.fromEntries(t.filter(n=>!!Ke(n,"addMarkView")).map(n=>{const r=this.attributes.filter(o=>o.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:El(n.name,this.schema)},s=Ke(n,"addMarkView",i);if(!s)return[];const a=(o,c,u)=>{const d=U1(o,r);return s()({mark:o,view:c,inline:u,editor:e,extension:n,HTMLAttributes:d,updateAttributes:f=>{XVe(o,e,f)}})};return[n.name,a]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:Ok(t.name,this.schema)};t.type==="mark"&&((n=jt(Ke(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const i=Ke(t,"onBeforeCreate",r),s=Ke(t,"onCreate",r),a=Ke(t,"onUpdate",r),o=Ke(t,"onSelectionUpdate",r),c=Ke(t,"onTransaction",r),u=Ke(t,"onFocus",r),d=Ke(t,"onBlur",r),f=Ke(t,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),a&&this.editor.on("update",a),o&&this.editor.on("selectionUpdate",o),c&&this.editor.on("transaction",c),u&&this.editor.on("focus",u),d&&this.editor.on("blur",d),f&&this.editor.on("destroy",f)})}};tN.resolve=Gne;tN.sort=BM;tN.flatten=LM;var RHe={};zne(RHe,{ClipboardTextSerializer:()=>ore,Commands:()=>ure,Delete:()=>dre,Drop:()=>fre,Editable:()=>hre,FocusEvents:()=>mre,Keymap:()=>gre,Paste:()=>vre,Tabindex:()=>yre,focusEventsPluginKey:()=>pre});var Bn=class are extends HM{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new are(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},ore=Bn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new hn({key:new Fn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:s}=i,a=Math.min(...s.map(d=>d.$from.pos)),o=Math.max(...s.map(d=>d.$to.pos)),c=Xne(n);return Yne(r,{from:a,to:o},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),lre={};zne(lre,{blur:()=>LHe,clearContent:()=>FHe,clearNodes:()=>BHe,command:()=>$He,createParagraphNear:()=>UHe,cut:()=>zHe,deleteCurrentNode:()=>HHe,deleteNode:()=>VHe,deleteRange:()=>WHe,deleteSelection:()=>qHe,enter:()=>KHe,exitCode:()=>GHe,extendMarkRange:()=>YHe,first:()=>XHe,focus:()=>JHe,forEach:()=>ZHe,insertContent:()=>eVe,insertContentAt:()=>nVe,joinBackward:()=>sVe,joinDown:()=>iVe,joinForward:()=>aVe,joinItemBackward:()=>oVe,joinItemForward:()=>lVe,joinTextblockBackward:()=>cVe,joinTextblockForward:()=>uVe,joinUp:()=>rVe,keyboardShortcut:()=>fVe,lift:()=>hVe,liftEmptyBlock:()=>pVe,liftListItem:()=>mVe,newlineInCode:()=>gVe,resetAttributes:()=>vVe,scrollIntoView:()=>yVe,selectAll:()=>xVe,selectNodeBackward:()=>bVe,selectNodeForward:()=>wVe,selectParentNode:()=>EVe,selectTextblockEnd:()=>SVe,selectTextblockStart:()=>NVe,setContent:()=>_Ve,setMark:()=>CVe,setMeta:()=>TVe,setNode:()=>AVe,setNodeSelection:()=>jVe,setTextSelection:()=>OVe,sinkListItem:()=>PVe,splitBlock:()=>IVe,splitListItem:()=>DVe,toggleList:()=>MVe,toggleMark:()=>RVe,toggleNode:()=>LVe,toggleWrap:()=>FVe,undoInputRule:()=>BVe,unsetAllMarks:()=>$Ve,unsetMark:()=>UVe,updateAttributes:()=>zVe,wrapIn:()=>HVe,wrapInList:()=>VVe});var LHe=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),FHe=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),BHe=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:a})=>{e.doc.nodesBetween(s.pos,a.pos,(o,c)=>{if(o.type.isText)return;const{doc:u,mapping:d}=t,f=u.resolve(d.map(c)),h=u.resolve(d.map(c+o.nodeSize)),p=f.blockRange(h);if(!p)return;const m=bp(p);if(o.type.isTextblock){const{defaultType:g}=f.parent.contentMatchAt(f.index());t.setNodeMarkup(p.start,g)}(m||m===0)&&t.lift(p,m)})}),!0},$He=e=>t=>e(t),UHe=()=>({state:e,dispatch:t})=>Fne(e,t),zHe=(e,t)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const a=r.mapping.map(t);return r.insert(a,s.content),r.setSelection(new Qe(r.doc.resolve(Math.max(a-1,0)))),!0},HHe=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(t){const o=i.before(s),c=i.after(s);e.delete(o,c).scrollIntoView()}return!0}return!1},VHe=e=>({tr:t,state:n,dispatch:r})=>{const i=Zn(e,n.schema),s=t.selection.$anchor;for(let a=s.depth;a>0;a-=1)if(s.node(a).type===i){if(r){const c=s.before(a),u=s.after(a);t.delete(c,u).scrollIntoView()}return!0}return!1},WHe=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},qHe=()=>({state:e,dispatch:t})=>PM(e,t),KHe=()=>({commands:e})=>e.keyboardShortcut("Enter"),GHe=()=>({state:e,dispatch:t})=>Gze(e,t),YHe=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const s=El(e,r.schema),{doc:a,selection:o}=n,{$from:c,from:u,to:d}=o;if(i){const f=UM(c,s,t);if(f&&f.from<=u&&f.to>=d){const h=Qe.create(a,f.from,f.to);n.setSelection(h)}}return!0},XHe=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function QHe(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function VM(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var JHe=(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:s})=>{t={scrollIntoView:!0,...t};const a=()=>{(VM()||QHe())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t!=null&&t.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(s&&e===null&&!nre(n.state.selection))return a(),!0;const o=rre(i.doc,e)||n.state.selection,c=n.state.selection.eq(o);return s&&(c||i.setSelection(o),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0},ZHe=(e,t)=>n=>e.every((r,i)=>t(r,{...n,index:i})),eVe=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),tVe=e=>!("type"in e),nVe=(e,t,n)=>({tr:r,dispatch:i,editor:s})=>{var a;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let o;const{selection:c}=s.state,u=y=>{s.emit("contentError",{editor:s,error:y,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{p0(t,s.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(y){u(y)}try{o=p0(t,s.schema,{parseOptions:d,errorOnInvalidContent:(a=n.errorOnInvalidContent)!=null?a:s.options.enableContentCheck})}catch(y){return u(y),!1}let{from:f,to:h}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},p=!0,m=!0;if((tVe(o)?o:[o]).forEach(y=>{y.check(),p=p?y.isText&&y.marks.length===0:!1,m=m?y.isBlock:!1}),f===h&&m){const{parent:y}=r.doc.resolve(f);y.isTextblock&&!y.type.spec.code&&!y.childCount&&(f-=1,h+=1)}let v;if(p){if(Array.isArray(t))v=t.map(y=>y.text||"").join("");else if(t instanceof ve){let y="";t.forEach(x=>{x.text&&(y+=x.text)}),v=y}else typeof t=="object"&&t&&t.text?v=t.text:v=t;r.insertText(v,f,h)}else{v=o;const y=c.$from.parentOffset===0,x=c.$from.node().isText||c.$from.node().isTextblock,b=c.$from.node().content.size>0;y&&x&&b&&(f=Math.max(0,f-1)),r.replaceWith(f,h,v)}n.updateSelection&&kHe(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:f,text:v}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:f,text:v})}return!0},rVe=()=>({state:e,dispatch:t})=>Wze(e,t),iVe=()=>({state:e,dispatch:t})=>qze(e,t),sVe=()=>({state:e,dispatch:t})=>One(e,t),aVe=()=>({state:e,dispatch:t})=>Mne(e,t),oVe=()=>({state:e,dispatch:t,tr:n})=>{try{const r=HS(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},lVe=()=>({state:e,dispatch:t,tr:n})=>{try{const r=HS(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},cVe=()=>({state:e,dispatch:t})=>Hze(e,t),uVe=()=>({state:e,dispatch:t})=>Vze(e,t);function cre(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function dVe(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,i,s,a;for(let o=0;o<t.length-1;o+=1){const c=t[o];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))VM()||cre()?a=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),a&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var fVe=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const s=dVe(e).split(/-(?!$)/),a=s.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),o=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=t.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,o))});return c==null||c.steps.forEach(u=>{const d=u.map(r.mapping);d&&i&&r.maybeStep(d)}),!0},hVe=(e,t={})=>({state:n,dispatch:r})=>{const i=Zn(e,n.schema);return Fc(n,i,t)?Kze(n,r):!1},pVe=()=>({state:e,dispatch:t})=>Bne(e,t),mVe=e=>({state:t,dispatch:n})=>{const r=Zn(e,t.schema);return sHe(r)(t,n)},gVe=()=>({state:e,dispatch:t})=>Lne(e,t);function I$(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,i)=>(n.includes(i)||(r[i]=e[i]),r),{})}var vVe=(e,t)=>({tr:n,state:r,dispatch:i})=>{let s=null,a=null;const o=JS(typeof e=="string"?e:e.name,r.schema);return o?(o==="node"&&(s=Zn(e,r.schema)),o==="mark"&&(a=El(e,r.schema)),i&&n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(u,d)=>{s&&s===u.type&&n.setNodeMarkup(d,void 0,I$(u.attrs,t)),a&&u.marks.length&&u.marks.forEach(f=>{a===f.type&&n.addMark(d,d+u.nodeSize,a.create(I$(f.attrs,t)))})})}),!0):!1},yVe=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),xVe=()=>({tr:e,dispatch:t})=>{if(t){const n=new ps(e.doc);e.setSelection(n)}return!0},bVe=()=>({state:e,dispatch:t})=>Ine(e,t),wVe=()=>({state:e,dispatch:t})=>Rne(e,t),EVe=()=>({state:e,dispatch:t})=>Qze(e,t),SVe=()=>({state:e,dispatch:t})=>eHe(e,t),NVe=()=>({state:e,dispatch:t})=>Zze(e,t),_Ve=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:a,commands:o})=>{const{doc:c}=s;if(r.preserveWhitespace!=="full"){const u=wA(e,i.schema,r,{errorOnInvalidContent:t??i.options.enableContentCheck});return a&&s.replaceWith(0,c.content.size,u).setMeta("preventUpdate",!n),!0}return a&&s.setMeta("preventUpdate",!n),o.insertContentAt({from:0,to:c.content.size},e,{parseOptions:r,errorOnInvalidContent:t??i.options.enableContentCheck})};function kVe(e,t,n){var r;const{selection:i}=t;let s=null;if(nre(i)&&(s=i.$cursor),s){const o=(r=e.storedMarks)!=null?r:s.marks();return!!n.isInSet(o)||!o.some(c=>c.type.excludes(n))}const{ranges:a}=i;return a.some(({$from:o,$to:c})=>{let u=o.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(o.pos,c.pos,(d,f,h)=>{if(u)return!1;if(d.isInline){const p=!h||h.type.allowsMarkType(n),m=!!n.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(n));u=p&&m}return!u}),u})}var CVe=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:a,ranges:o}=s,c=El(e,r.schema);if(i)if(a){const u=Qne(r,c);n.addStoredMark(c.create({...u,...t}))}else o.forEach(u=>{const d=u.$from.pos,f=u.$to.pos;r.doc.nodesBetween(d,f,(h,p)=>{const m=Math.max(p,d),g=Math.min(p+h.nodeSize,f);h.marks.find(y=>y.type===c)?h.marks.forEach(y=>{c===y.type&&n.addMark(m,g,c.create({...y.attrs,...t}))}):n.addMark(m,g,c.create(t))})});return kVe(r,n,c)},TVe=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),AVe=(e,t={})=>({state:n,dispatch:r,chain:i})=>{const s=Zn(e,n.schema);let a;return n.selection.$anchor.sameParent(n.selection.$head)&&(a=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:o})=>C$(s,{...a,...t})(n)?!0:o.clearNodes()).command(({state:o})=>C$(s,{...a,...t})(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},jVe=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,i=Wu(e,0,r.content.size),s=Ye.create(r,i);t.setSelection(s)}return!0},OVe=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:i,to:s}=typeof e=="number"?{from:e,to:e}:e,a=Qe.atStart(r).from,o=Qe.atEnd(r).to,c=Wu(i,a,o),u=Wu(s,a,o),d=Qe.create(r,c,u);t.setSelection(d)}return!0},PVe=e=>({state:t,dispatch:n})=>{const r=Zn(e,t.schema);return lHe(r)(t,n)};function D$(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(i=>t==null?void 0:t.includes(i.type.name));e.tr.ensureMarks(r)}}var IVe=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:a}=t,{$from:o,$to:c}=s,u=i.extensionManager.attributes,d=Px(u,o.node().type.name,o.node().attrs);if(s instanceof Ye&&s.node.isBlock)return!o.parentOffset||!Jo(a,o.pos)?!1:(r&&(e&&D$(n,i.extensionManager.splittableMarks),t.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;const f=c.parentOffset===c.parent.content.size,h=o.depth===0?void 0:dHe(o.node(-1).contentMatchAt(o.indexAfter(-1)));let p=f&&h?[{type:h,attrs:d}]:void 0,m=Jo(t.doc,t.mapping.map(o.pos),1,p);if(!p&&!m&&Jo(t.doc,t.mapping.map(o.pos),1,h?[{type:h}]:void 0)&&(m=!0,p=h?[{type:h,attrs:d}]:void 0),r){if(m&&(s instanceof Qe&&t.deleteSelection(),t.split(t.mapping.map(o.pos),1,p),h&&!f&&!o.parentOffset&&o.parent.type!==h)){const g=t.mapping.map(o.before()),v=t.doc.resolve(g);o.node(-1).canReplaceWith(v.index(),v.index()+1,h)&&t.setNodeMarkup(t.mapping.map(o.before()),h)}e&&D$(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return m},DVe=(e,t={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var a;const o=Zn(e,r.schema),{$from:c,$to:u}=r.selection,d=r.selection.node;if(d&&d.isBlock||c.depth<2||!c.sameParent(u))return!1;const f=c.node(-1);if(f.type!==o)return!1;const h=s.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==o||c.index(-2)!==c.node(-2).childCount-1)return!1;if(i){let y=ve.empty;const x=c.index(-1)?1:c.index(-2)?2:3;for(let k=c.depth-x;k>=c.depth-3;k-=1)y=ve.from(c.node(k).copy(y));const b=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,S={...Px(h,c.node().type.name,c.node().attrs),...t},E=((a=o.contentMatch.defaultType)==null?void 0:a.createAndFill(S))||void 0;y=y.append(ve.from(o.createAndFill(null,E)||void 0));const N=c.before(c.depth-(x-1));n.replace(N,c.after(-b),new Ie(y,4-x,0));let _=-1;n.doc.nodesBetween(N,n.doc.content.size,(k,T)=>{if(_>-1)return!1;k.isTextblock&&k.content.size===0&&(_=T+1)}),_>-1&&n.setSelection(Qe.near(n.doc.resolve(_))),n.scrollIntoView()}return!0}const p=u.pos===c.end()?f.contentMatchAt(0).defaultType:null,m={...Px(h,f.type.name,f.attrs),...t},g={...Px(h,c.node().type.name,c.node().attrs),...t};n.delete(c.pos,u.pos);const v=p?[{type:o,attrs:m},{type:p,attrs:g}]:[{type:o,attrs:m}];if(!Jo(n.doc,c.pos,2))return!1;if(i){const{selection:y,storedMarks:x}=r,{splittableMarks:b}=s.extensionManager,S=x||y.$to.parentOffset&&y.$from.marks();if(n.split(c.pos,2,v).scrollIntoView(),!S||!i)return!0;const E=S.filter(N=>b.includes(N.type.name));n.ensureMarks(E)}return!0},Pk=(e,t)=>{const n=QS(a=>a.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&ou(e.doc,n.pos)&&e.join(n.pos),!0},Ik=(e,t)=>{const n=QS(a=>a.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&ou(e.doc,r)&&e.join(r),!0},MVe=(e,t,n,r={})=>({editor:i,tr:s,state:a,dispatch:o,chain:c,commands:u,can:d})=>{const{extensions:f,splittableMarks:h}=i.extensionManager,p=Zn(e,a.schema),m=Zn(t,a.schema),{selection:g,storedMarks:v}=a,{$from:y,$to:x}=g,b=y.blockRange(x),S=v||g.$to.parentOffset&&g.$from.marks();if(!b)return!1;const E=QS(N=>P$(N.type.name,f))(g);if(b.depth>=1&&E&&b.depth-E.depth<=1){if(E.node.type===p)return u.liftListItem(m);if(P$(E.node.type.name,f)&&p.validContent(E.node.content)&&o)return c().command(()=>(s.setNodeMarkup(E.pos,p),!0)).command(()=>Pk(s,p)).command(()=>Ik(s,p)).run()}return!n||!S||!o?c().command(()=>d().wrapInList(p,r)?!0:u.clearNodes()).wrapInList(p,r).command(()=>Pk(s,p)).command(()=>Ik(s,p)).run():c().command(()=>{const N=d().wrapInList(p,r),_=S.filter(k=>h.includes(k.type.name));return s.ensureMarks(_),N?!0:u.clearNodes()}).wrapInList(p,r).command(()=>Pk(s,p)).command(()=>Ik(s,p)).run()},RVe=(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,a=El(e,r.schema);return SA(r,a,t)?i.unsetMark(a,{extendEmptyMarkRange:s}):i.setMark(a,t)},LVe=(e,t,n={})=>({state:r,commands:i})=>{const s=Zn(e,r.schema),a=Zn(t,r.schema),o=Fc(r,s,n);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),o?i.setNode(a,c):i.setNode(s,{...c,...n})},FVe=(e,t={})=>({state:n,commands:r})=>{const i=Zn(e,n.schema);return Fc(n,i,t)?r.lift(i):r.wrapIn(i,t)},BVe=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(e))){if(t){const a=e.tr,o=s.transform;for(let c=o.steps.length-1;c>=0;c-=1)a.step(o.steps[c].invert(o.docs[c]));if(s.text){const c=a.doc.resolve(s.from).marks();a.replaceWith(s.from,s.to,e.schema.text(s.text,c))}else a.delete(s.from,s.to)}return!0}}return!1},$Ve=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach(s=>{e.removeMark(s.$from.pos,s.$to.pos)}),!0},UVe=(e,t={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:a=!1}=t,{selection:o}=n,c=El(e,r.schema),{$from:u,empty:d,ranges:f}=o;if(!i)return!0;if(d&&a){let{from:h,to:p}=o;const m=(s=u.marks().find(v=>v.type===c))==null?void 0:s.attrs,g=UM(u,c,m);g&&(h=g.from,p=g.to),n.removeMark(h,p,c)}else f.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,c)});return n.removeStoredMark(c),!0},zVe=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let s=null,a=null;const o=JS(typeof e=="string"?e:e.name,r.schema);return o?(o==="node"&&(s=Zn(e,r.schema)),o==="mark"&&(a=El(e,r.schema)),i&&n.selection.ranges.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;let f,h,p,m;n.selection.empty?r.doc.nodesBetween(u,d,(g,v)=>{s&&s===g.type&&(p=Math.max(v,u),m=Math.min(v+g.nodeSize,d),f=v,h=g)}):r.doc.nodesBetween(u,d,(g,v)=>{v<u&&s&&s===g.type&&(p=Math.max(v,u),m=Math.min(v+g.nodeSize,d),f=v,h=g),v>=u&&v<=d&&(s&&s===g.type&&n.setNodeMarkup(v,void 0,{...g.attrs,...t}),a&&g.marks.length&&g.marks.forEach(y=>{if(a===y.type){const x=Math.max(v,u),b=Math.min(v+g.nodeSize,d);n.addMark(x,b,a.create({...y.attrs,...t}))}}))}),h&&(f!==void 0&&n.setNodeMarkup(f,void 0,{...h.attrs,...t}),a&&h.marks.length&&h.marks.forEach(g=>{a===g.type&&n.addMark(p,m,a.create({...g.attrs,...t}))}))}),!0):!1},HVe=(e,t={})=>({state:n,dispatch:r})=>{const i=Zn(e,n.schema);return tHe(i,t)(n,r)},VVe=(e,t={})=>({state:n,dispatch:r})=>{const i=Zn(e,n.schema);return nHe(i,t)(n,r)},ure=Bn.create({name:"commands",addCommands(){return{...lre}}}),dre=Bn.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,i;const s=()=>{var a,o,c,u;if((u=(c=(o=(a=this.editor.options.coreExtensionOptions)==null?void 0:a.delete)==null?void 0:o.filterTransaction)==null?void 0:c.call(o,e))!=null?u:e.getMeta("y-sync$"))return;const d=Hne(e.before,[e,...t]);Zne(d).forEach(p=>{d.mapping.mapResult(p.oldRange.from).deletedAfter&&d.mapping.mapResult(p.oldRange.to).deletedBefore&&d.before.nodesBetween(p.oldRange.from,p.oldRange.to,(m,g)=>{const v=g+m.nodeSize-2,y=p.oldRange.from<=g&&v<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:g,to:v,newFrom:d.mapping.map(g),newTo:d.mapping.map(v),deletedRange:p.oldRange,newRange:p.newRange,partial:!y,editor:this.editor,transaction:e,combinedTransform:d})})});const h=d.mapping;d.steps.forEach((p,m)=>{var g,v;if(p instanceof Ea){const y=h.slice(m).map(p.from,-1),x=h.slice(m).map(p.to),b=h.invert().map(y,-1),S=h.invert().map(x),E=(g=d.doc.nodeAt(y-1))==null?void 0:g.marks.some(_=>_.eq(p.mark)),N=(v=d.doc.nodeAt(x))==null?void 0:v.marks.some(_=>_.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:b,to:S},newRange:{from:y,to:x},partial:!!(N||E),editor:this.editor,transaction:e,combinedTransform:d})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),fre=Bn.create({name:"drop",addProseMirrorPlugins(){return[new hn({key:new Fn("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),hre=Bn.create({name:"editable",addProseMirrorPlugins(){return[new hn({key:new Fn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),pre=new Fn("focusEvents"),mre=Bn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new hn({key:pre,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),gre=Bn.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:o})=>{const{selection:c,doc:u}=o,{empty:d,$anchor:f}=c,{pos:h,parent:p}=f,m=f.parent.isTextblock&&h>0?o.doc.resolve(h-1):f,g=m.parent.type.spec.isolating,v=f.pos-f.parentOffset,y=g&&m.parent.childCount===1?v===f.pos:tt.atStart(u).from===h;return!d||!p.type.isTextblock||p.textContent.length||!y||y&&f.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return VM()||cre()?s:i},addProseMirrorPlugins(){return[new hn({key:new Fn("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(g=>g.getMeta("composition")))return;const r=e.some(g=>g.docChanged)&&!t.doc.eq(n.doc),i=e.some(g=>g.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:a,to:o}=t.selection,c=tt.atStart(t.doc).from,u=tt.atEnd(t.doc).to;if(s||!(a===c&&o===u)||!ZS(n.doc))return;const h=n.tr,p=YS({state:n,transaction:h}),{commands:m}=new XS({editor:this.editor,state:p});if(m.clearNodes(),!!h.steps.length)return h}})]}}),vre=Bn.create({name:"paste",addProseMirrorPlugins(){return[new hn({key:new Fn("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),yre=Bn.create({name:"tabindex",addProseMirrorPlugins(){return[new hn({key:new Fn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),WVe=class gf{constructor(t,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new gf(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new gf(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new gf(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,a=this.pos+r+(s?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const o=this.resolvedPos.doc.resolve(a);if(!i&&o.depth<=this.depth)return;const c=new gf(o,this.editor,i,i?n:null);i&&(c.actualDepth=this.depth+1),t.push(new gf(o,this.editor,i,i?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===t)if(Object.keys(n).length>0){const s=i.node.attrs,a=Object.keys(n);for(let o=0;o<a.length;o+=1){const c=a[o];if(s[c]!==n[c])break}}else r=i;i=i.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(a=>{r&&i.length>0||(a.node.type.name===t&&s.every(c=>n[c]===a.node.attrs[c])&&i.push(a),!(r&&i.length>0)&&(i=i.concat(a.querySelectorAll(t,n,r))))}),i}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},qVe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function KVe(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var GVe=class extends uHe{constructor(e={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=rre(t,this.options.autofocus);this.editorState=$f.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e!=null&&e.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=KVe(qVe,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.editorState=this.state.apply(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=qne(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(a=>!a.key.startsWith(s))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[hre,ore.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),ure,mre,gre,yre,fre,vre,dre].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new tN(r,this)}createCommandManager(){this.commandManager=new XS({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=wA(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=wA(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new Ane(e,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews(),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(u=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(u)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),i=n.includes(e),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const a=n.findLast(u=>u.getMeta("focus")||u.getMeta("blur")),o=a==null?void 0:a.getMeta("focus"),c=a==null?void 0:a.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:a}),c&&this.emit("blur",{editor:this,event:c.event,transaction:a}),!(e.getMeta("preventUpdate")||!n.some(u=>u.docChanged)||s.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return Jne(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return SHe(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return FM(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return vHe(this.state.doc,{blockSeparator:t,textSerializers:{...Xne(this.schema),...n}})}get isEmpty(){return ZS(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new WVe(t,this)}get $doc(){return this.$pos(0)}};function Pd(e){return new eN({find:e.find,handler:({state:t,range:n,match:r})=>{const i=jt(e.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=t,a=r[r.length-1],o=r[0];if(a){const c=o.search(/\S/),u=n.from+o.indexOf(a),d=u+a.length;if(zM(n.from,n.to,t.doc).filter(p=>p.mark.type.excluded.find(g=>g===e.type&&g!==p.mark.type)).filter(p=>p.to>u).length)return null;d<n.to&&s.delete(d,n.to),u>n.from&&s.delete(n.from+c,u);const h=n.from+c+a.length;s.addMark(n.from+c,h,e.type.create(i||{})),s.removeStoredMark(e.type)}}})}function xre(e){return new eN({find:e.find,handler:({state:t,range:n,match:r})=>{const i=jt(e.getAttributes,void 0,r)||{},{tr:s}=t,a=n.from;let o=n.to;const c=e.type.create(i);if(r[1]){const u=r[0].lastIndexOf(r[1]);let d=a+u;d>o?d=o:o=d+r[1].length;const f=r[0][r[0].length-1];s.insertText(f,a+r[0].length-1),s.replaceWith(d,o,c)}else if(r[0]){const u=e.type.isInline?a:a-1;s.insert(u,e.type.create(i)).delete(s.mapping.map(a),s.mapping.map(o))}s.scrollIntoView()}})}function NA(e){return new eN({find:e.find,handler:({state:t,range:n,match:r})=>{const i=t.doc.resolve(n.from),s=jt(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,s)}})}function Bh(e){return new eN({find:e.find,handler:({state:t,range:n,match:r,chain:i})=>{const s=jt(e.getAttributes,void 0,r)||{},a=t.tr.delete(n.from,n.to),c=a.doc.resolve(n.from).blockRange(),u=c&&xM(c,e.type,s);if(!u)return null;if(a.wrap(c,u),e.keepMarks&&e.editor){const{selection:f,storedMarks:h}=t,{splittableMarks:p}=e.editor.extensionManager,m=h||f.$to.parentOffset&&f.$from.marks();if(m){const g=m.filter(v=>p.includes(v.type.name));a.ensureMarks(g)}}if(e.keepAttributes){const f=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,s).run()}const d=a.doc.resolve(n.from-1).nodeBefore;d&&d.type===e.type&&ou(a.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,d))&&a.join(n.from-1)}})}function YVe(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof Ye){const s=r.index();return r.parent.canReplaceWith(s,s+1,t)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(t))return!0;i-=1}return!1}function XVe(e,t,n={}){const{state:r}=t,{doc:i,tr:s}=r,a=e;i.descendants((o,c)=>{const u=s.mapping.map(c),d=s.mapping.map(c)+o.nodeSize;let f=null;if(o.marks.forEach(p=>{if(p!==a)return!1;f=p}),!f)return;let h=!1;if(Object.keys(n).forEach(p=>{n[p]!==f.attrs[p]&&(h=!0)}),h){const p=e.type.create({...e.attrs,...n});s.removeMark(u,d,e.type),s.addMark(u,d,p)}}),s.docChanged&&t.view.dispatch(s)}var Ir=class bre extends HM{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new bre(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function Bc(e){return new OHe({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:i})=>{const s=jt(e.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:a}=t,o=r[r.length-1],c=r[0];let u=n.to;if(o){const d=c.search(/\S/),f=n.from+c.indexOf(o),h=f+o.length;if(zM(n.from,n.to,t.doc).filter(m=>m.mark.type.excluded.find(v=>v===e.type&&v!==m.mark.type)).filter(m=>m.to>f).length)return null;h<n.to&&a.delete(h,n.to),f>n.from&&a.delete(n.from+d,f),u=n.from+d+o.length,a.addMark(n.from+d,u,e.type.create(s||{})),a.removeStoredMark(e.type)}}})}var QVe=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;for(i of t.entries())if(!e(i[1],n.get(i[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(t[i]!==n[i])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var a=s[i];if(!(a==="_owner"&&t.$$typeof)&&!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n};const JVe=oi(QVe);var ZVe=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},eWe=({contentComponent:e})=>{const t=KE.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return l.jsx(l.Fragment,{children:Object.values(t)})};function tWe(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:nO.createPortal(r.reactElement,r.element,n)},e.forEach(i=>i())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(i=>i())}}}var nWe=class extends at.Component{constructor(e){var t;super(e),this.editorContentRef=at.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=tWe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(!t||(this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null,!((e=t.options.element)!=null&&e.firstChild)))return;const n=document.createElement("div");n.append(...t.options.element.childNodes),t.setOptions({element:n})}render(){const{editor:e,innerRef:t,...n}=this.props;return l.jsxs(l.Fragment,{children:[l.jsx("div",{ref:ZVe(t,this.editorContentRef),...n}),(e==null?void 0:e.contentComponent)&&l.jsx(eWe,{contentComponent:e.contentComponent})]})}},rWe=w.forwardRef((e,t)=>{const n=at.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return at.createElement(nWe,{key:n,innerRef:t,...e})}),iWe=at.memo(rWe),sWe=typeof window<"u"?w.useLayoutEffect:w.useEffect,aWe=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function oWe(e){var t;const[n]=w.useState(()=>new aWe(e.editor)),r=vG.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:JVe);return sWe(()=>n.watch(e.editor),[e.editor,n]),w.useDebugValue(r),r}var lWe=!1,_A=typeof window>"u",cWe=_A||!!(typeof window<"u"&&window.next),uWe=class wre{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?_A||cWe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new GVe(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((i,s)=>{var a;return i===((a=n.extensions)==null?void 0:a[s])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?wre.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,i)=>r===t[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function dWe(e={},t=[]){const n=w.useRef(e);n.current=e;const[r]=w.useState(()=>new uWe(n)),i=KE.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return w.useDebugValue(i),w.useEffect(r.onRender(t)),oWe({editor:i,selector:({transactionNumber:s})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&s===0?0:s+1}),i}var fWe=w.createContext({editor:null});fWe.Consumer;var hWe=w.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),pWe=()=>w.useContext(hWe);at.forwardRef((e,t)=>{const{onDragStart:n}=pWe(),r=e.as||"div";return l.jsx(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});at.createContext({markViewContentRef:()=>{}});var H1=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...r}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},mWe=/^\s*>\s$/,gWe=Ir.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return H1("blockquote",{...rn(this.options.HTMLAttributes,e),children:H1("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Bh({find:mWe,type:this.type})]}}),vWe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,yWe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,xWe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,bWe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,wWe=cu.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return H1("strong",{...rn(this.options.HTMLAttributes,e),children:H1("slot",{})})},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Pd({find:vWe,type:this.type}),Pd({find:xWe,type:this.type})]},addPasteRules(){return[Bc({find:yWe,type:this.type}),Bc({find:bWe,type:this.type})]}}),EWe=/(^|[^`])`([^`]+)`(?!`)/,SWe=/(^|[^`])`([^`]+)`(?!`)/g,NWe=cu.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",rn(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Pd({find:EWe,type:this.type})]},addPasteRules(){return[Bc({find:SWe,type:this.type})]}}),_We=/^```([a-z]+)?[\s\n]$/,kWe=/^~~~([a-z]+)?[\s\n]$/,Ere=Ir.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,s=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(a=>a.startsWith(n)).map(a=>a.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",rn(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith(`

`);return!s||!a?!1:e.chain().command(({tr:o})=>(o.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const o=i.after();return o===void 0?!1:r.nodeAt(o)?e.commands.command(({tr:u})=>(u.setSelection(tt.near(r.resolve(o))),!0)):e.commands.exitCode()}}},addInputRules(){return[NA({find:_We,type:this.type,getAttributes:e=>({language:e[1]})}),NA({find:kWe,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new hn({key:new Fn("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:a,schema:o}=e.state,c=o.text(n.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:s},c)),a.selection.$from.parent.type!==this.type&&a.setSelection(Qe.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),e.dispatch(a),!0}}})]}}),CWe=Ere,TWe=Ir.create({name:"doc",topNode:!0,content:"block+"}),AWe=Ir.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",rn(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:o}=r.extensionManager,c=s||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:u,dispatch:d})=>{if(d&&c&&a){const f=c.filter(h=>o.includes(h.type.name));u.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),jWe=Ir.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,rn(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>NA({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),OWe=Ir.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",rn(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!YVe(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,i=e();return tre(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:a})=>{var o;if(a){const{$to:c}=s.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?s.setSelection(Qe.create(s.doc,c.pos+1)):c.nodeAfter.isBlock?s.setSelection(Ye.create(s.doc,c.pos)):s.setSelection(Qe.create(s.doc,c.pos));else{const d=(o=c.parent.type.contentMatch.defaultType)==null?void 0:o.create();d&&(s.insert(u,d),s.setSelection(Qe.create(s.doc,u+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[xre({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),PWe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,IWe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,DWe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,MWe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,RWe=cu.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",rn(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Pd({find:PWe,type:this.type}),Pd({find:DWe,type:this.type})]},addPasteRules(){return[Bc({find:IWe,type:this.type}),Bc({find:MWe,type:this.type})]}});const LWe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",FWe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",kA="numeric",CA="ascii",TA="alpha",Xm="asciinumeric",bm="alphanumeric",AA="domain",Sre="emoji",BWe="scheme",$We="slashscheme",Dk="whitespace";function UWe(e,t){return e in t||(t[e]=[]),t[e]}function qu(e,t,n){t[kA]&&(t[Xm]=!0,t[bm]=!0),t[CA]&&(t[Xm]=!0,t[TA]=!0),t[Xm]&&(t[bm]=!0),t[TA]&&(t[bm]=!0),t[bm]&&(t[AA]=!0),t[Sre]&&(t[AA]=!0);for(const r in t){const i=UWe(r,n);i.indexOf(e)<0&&i.push(e)}}function zWe(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function Mi(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}Mi.groups={};Mi.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const i=t.jr[r][0],s=t.jr[r][1];if(s&&i.test(e))return s}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let i=0;i<e.length;i++)this.tt(e[i],t,n,r)},tr(e,t,n,r){r=r||Mi.groups;let i;return t&&t.j?i=t:(i=new Mi(t),n&&r&&qu(t,n,r)),this.jr.push([e,i]),i},ts(e,t,n,r){let i=this;const s=e.length;if(!s)return i;for(let a=0;a<s-1;a++)i=i.tt(e[a]);return i.tt(e[s-1],t,n,r)},tt(e,t,n,r){r=r||Mi.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const s=t;let a,o=i.go(e);if(o?(a=new Mi,Object.assign(a.j,o.j),a.jr.push.apply(a.jr,o.jr),a.jd=o.jd,a.t=o.t):a=new Mi,s){if(r)if(a.t&&typeof a.t=="string"){const c=Object.assign(zWe(a.t,r),n);qu(s,c,r)}else n&&qu(s,n,r);a.t=s}return i.j[e]=a,a}};const ot=(e,t,n,r,i)=>e.ta(t,n,r,i),jn=(e,t,n,r,i)=>e.tr(t,n,r,i),M$=(e,t,n,r,i)=>e.ts(t,n,r,i),Ne=(e,t,n,r,i)=>e.tt(t,n,r,i),jo="WORD",jA="UWORD",Nre="ASCIINUMERICAL",_re="ALPHANUMERICAL",g0="LOCALHOST",OA="TLD",PA="UTLD",Ix="SCHEME",vf="SLASH_SCHEME",WM="NUM",IA="WS",qM="NL",Qm="OPENBRACE",Jm="CLOSEBRACE",V1="OPENBRACKET",W1="CLOSEBRACKET",q1="OPENPAREN",K1="CLOSEPAREN",G1="OPENANGLEBRACKET",Y1="CLOSEANGLEBRACKET",X1="FULLWIDTHLEFTPAREN",Q1="FULLWIDTHRIGHTPAREN",J1="LEFTCORNERBRACKET",Z1="RIGHTCORNERBRACKET",ew="LEFTWHITECORNERBRACKET",tw="RIGHTWHITECORNERBRACKET",nw="FULLWIDTHLESSTHAN",rw="FULLWIDTHGREATERTHAN",iw="AMPERSAND",sw="APOSTROPHE",aw="ASTERISK",zl="AT",ow="BACKSLASH",lw="BACKTICK",cw="CARET",Yl="COLON",KM="COMMA",uw="DOLLAR",Ha="DOT",dw="EQUALS",GM="EXCLAMATION",Is="HYPHEN",Zm="PERCENT",fw="PIPE",hw="PLUS",pw="POUND",eg="QUERY",YM="QUOTE",kre="FULLWIDTHMIDDLEDOT",XM="SEMI",Va="SLASH",tg="TILDE",mw="UNDERSCORE",Cre="EMOJI",gw="SYM";var Tre=Object.freeze({__proto__:null,ALPHANUMERICAL:_re,AMPERSAND:iw,APOSTROPHE:sw,ASCIINUMERICAL:Nre,ASTERISK:aw,AT:zl,BACKSLASH:ow,BACKTICK:lw,CARET:cw,CLOSEANGLEBRACKET:Y1,CLOSEBRACE:Jm,CLOSEBRACKET:W1,CLOSEPAREN:K1,COLON:Yl,COMMA:KM,DOLLAR:uw,DOT:Ha,EMOJI:Cre,EQUALS:dw,EXCLAMATION:GM,FULLWIDTHGREATERTHAN:rw,FULLWIDTHLEFTPAREN:X1,FULLWIDTHLESSTHAN:nw,FULLWIDTHMIDDLEDOT:kre,FULLWIDTHRIGHTPAREN:Q1,HYPHEN:Is,LEFTCORNERBRACKET:J1,LEFTWHITECORNERBRACKET:ew,LOCALHOST:g0,NL:qM,NUM:WM,OPENANGLEBRACKET:G1,OPENBRACE:Qm,OPENBRACKET:V1,OPENPAREN:q1,PERCENT:Zm,PIPE:fw,PLUS:hw,POUND:pw,QUERY:eg,QUOTE:YM,RIGHTCORNERBRACKET:Z1,RIGHTWHITECORNERBRACKET:tw,SCHEME:Ix,SEMI:XM,SLASH:Va,SLASH_SCHEME:vf,SYM:gw,TILDE:tg,TLD:OA,UNDERSCORE:mw,UTLD:PA,UWORD:jA,WORD:jo,WS:IA});const Co=/[a-z]/,tm=new RegExp("\\p{L}","u"),Mk=new RegExp("\\p{Emoji}","u"),To=/\d/,Rk=/\s/,R$="\r",Lk=`
`,HWe="",VWe="",Fk="";let Uy=null,zy=null;function WWe(e=[]){const t={};Mi.groups=t;const n=new Mi;Uy==null&&(Uy=L$(LWe)),zy==null&&(zy=L$(FWe)),Ne(n,"'",sw),Ne(n,"{",Qm),Ne(n,"}",Jm),Ne(n,"[",V1),Ne(n,"]",W1),Ne(n,"(",q1),Ne(n,")",K1),Ne(n,"<",G1),Ne(n,">",Y1),Ne(n,"",X1),Ne(n,"",Q1),Ne(n,"",J1),Ne(n,"",Z1),Ne(n,"",ew),Ne(n,"",tw),Ne(n,"",nw),Ne(n,"",rw),Ne(n,"&",iw),Ne(n,"*",aw),Ne(n,"@",zl),Ne(n,"`",lw),Ne(n,"^",cw),Ne(n,":",Yl),Ne(n,",",KM),Ne(n,"$",uw),Ne(n,".",Ha),Ne(n,"=",dw),Ne(n,"!",GM),Ne(n,"-",Is),Ne(n,"%",Zm),Ne(n,"|",fw),Ne(n,"+",hw),Ne(n,"#",pw),Ne(n,"?",eg),Ne(n,'"',YM),Ne(n,"/",Va),Ne(n,";",XM),Ne(n,"~",tg),Ne(n,"_",mw),Ne(n,"\\",ow),Ne(n,"",kre);const r=jn(n,To,WM,{[kA]:!0});jn(r,To,r);const i=jn(r,Co,Nre,{[Xm]:!0}),s=jn(r,tm,_re,{[bm]:!0}),a=jn(n,Co,jo,{[CA]:!0});jn(a,To,i),jn(a,Co,a),jn(i,To,i),jn(i,Co,i);const o=jn(n,tm,jA,{[TA]:!0});jn(o,Co),jn(o,To,s),jn(o,tm,o),jn(s,To,s),jn(s,Co),jn(s,tm,s);const c=Ne(n,Lk,qM,{[Dk]:!0}),u=Ne(n,R$,IA,{[Dk]:!0}),d=jn(n,Rk,IA,{[Dk]:!0});Ne(n,Fk,d),Ne(u,Lk,c),Ne(u,Fk,d),jn(u,Rk,d),Ne(d,R$),Ne(d,Lk),jn(d,Rk,d),Ne(d,Fk,d);const f=jn(n,Mk,Cre,{[Sre]:!0});Ne(f,"#"),jn(f,Mk,f),Ne(f,HWe,f);const h=Ne(f,VWe);Ne(h,"#"),jn(h,Mk,f);const p=[[Co,a],[To,i]],m=[[Co,null],[tm,o],[To,s]];for(let g=0;g<Uy.length;g++)jl(n,Uy[g],OA,jo,p);for(let g=0;g<zy.length;g++)jl(n,zy[g],PA,jA,m);qu(OA,{tld:!0,ascii:!0},t),qu(PA,{utld:!0,alpha:!0},t),jl(n,"file",Ix,jo,p),jl(n,"mailto",Ix,jo,p),jl(n,"http",vf,jo,p),jl(n,"https",vf,jo,p),jl(n,"ftp",vf,jo,p),jl(n,"ftps",vf,jo,p),qu(Ix,{scheme:!0,ascii:!0},t),qu(vf,{slashscheme:!0,ascii:!0},t),e=e.sort((g,v)=>g[0]>v[0]?1:-1);for(let g=0;g<e.length;g++){const v=e[g][0],x=e[g][1]?{[BWe]:!0}:{[$We]:!0};v.indexOf("-")>=0?x[AA]=!0:Co.test(v)?To.test(v)?x[Xm]=!0:x[CA]=!0:x[kA]=!0,M$(n,v,v,x)}return M$(n,"localhost",g0,{ascii:!0}),n.jd=new Mi(gw),{start:n,tokens:Object.assign({groups:t},Tre)}}function Are(e,t){const n=qWe(t.replace(/[A-Z]/g,o=>o.toLowerCase())),r=n.length,i=[];let s=0,a=0;for(;a<r;){let o=e,c=null,u=0,d=null,f=-1,h=-1;for(;a<r&&(c=o.go(n[a]));)o=c,o.accepts()?(f=0,h=0,d=o):f>=0&&(f+=n[a].length,h++),u+=n[a].length,s+=n[a].length,a++;s-=f,a-=h,u-=f,i.push({t:d.t,v:t.slice(s-u,s),s:s-u,e:s})}return i}function qWe(e){const t=[],n=e.length;let r=0;for(;r<n;){let i=e.charCodeAt(r),s,a=i<55296||i>56319||r+1===n||(s=e.charCodeAt(r+1))<56320||s>57343?e[r]:e.slice(r,r+2);t.push(a),r+=a.length}return t}function jl(e,t,n,r,i){let s;const a=t.length;for(let o=0;o<a-1;o++){const c=t[o];e.j[c]?s=e.j[c]:(s=new Mi(r),s.jr=i.slice(),e.j[c]=s),e=s}return s=new Mi(n),s.jr=i.slice(),e.j[t[a-1]]=s,s}function L$(e){const t=[],n=[];let r=0,i="0123456789";for(;r<e.length;){let s=0;for(;i.indexOf(e[r+s])>=0;)s++;if(s>0){t.push(n.join(""));for(let a=parseInt(e.substring(r,r+s),10);a>0;a--)n.pop();r+=s}else n.push(e[r]),r++}return t}const v0={defaultProtocol:"http",events:null,format:F$,formatHref:F$,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function QM(e,t=null){let n=Object.assign({},v0);e&&(n=Object.assign(n,e instanceof QM?e.o:e));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=i}QM.prototype={o:v0,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:v0[e],typeof i=="function"&&r&&(i=i(t,n))):typeof i=="function"&&r&&(i=i(t,n.t,n)),i)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function F$(e){return e}function jre(e,t){this.t="token",this.v=e,this.tk=t}jre.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=v0.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),i=e.get("tagName",n,t),s=this.toFormattedString(e),a={},o=e.get("className",n,t),c=e.get("target",n,t),u=e.get("rel",n,t),d=e.getObj("attributes",n,t),f=e.getObj("events",n,t);return a.href=r,o&&(a.class=o),c&&(a.target=c),u&&(a.rel=u),d&&Object.assign(a,d),{tagName:i,attributes:a,content:s,eventListeners:f}}};function nN(e,t){class n extends jre{constructor(i,s){super(i,s),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const B$=nN("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),$$=nN("text"),KWe=nN("nl"),Hy=nN("url",{isLink:!0,toHref(e=v0.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==g0&&e[1].t===Yl}}),js=e=>new Mi(e);function GWe({groups:e}){const t=e.domain.concat([iw,aw,zl,ow,lw,cw,uw,dw,Is,WM,Zm,fw,hw,pw,Va,gw,tg,mw]),n=[sw,Yl,KM,Ha,GM,Zm,eg,YM,XM,G1,Y1,Qm,Jm,W1,V1,q1,K1,X1,Q1,J1,Z1,ew,tw,nw,rw],r=[iw,sw,aw,ow,lw,cw,uw,dw,Is,Qm,Jm,Zm,fw,hw,pw,eg,Va,gw,tg,mw],i=js(),s=Ne(i,tg);ot(s,r,s),ot(s,e.domain,s);const a=js(),o=js(),c=js();ot(i,e.domain,a),ot(i,e.scheme,o),ot(i,e.slashscheme,c),ot(a,r,s),ot(a,e.domain,a);const u=Ne(a,zl);Ne(s,zl,u),Ne(o,zl,u),Ne(c,zl,u);const d=Ne(s,Ha);ot(d,r,s),ot(d,e.domain,s);const f=js();ot(u,e.domain,f),ot(f,e.domain,f);const h=Ne(f,Ha);ot(h,e.domain,f);const p=js(B$);ot(h,e.tld,p),ot(h,e.utld,p),Ne(u,g0,p);const m=Ne(f,Is);Ne(m,Is,m),ot(m,e.domain,f),ot(p,e.domain,f),Ne(p,Ha,h),Ne(p,Is,m);const g=Ne(p,Yl);ot(g,e.numeric,B$);const v=Ne(a,Is),y=Ne(a,Ha);Ne(v,Is,v),ot(v,e.domain,a),ot(y,r,s),ot(y,e.domain,a);const x=js(Hy);ot(y,e.tld,x),ot(y,e.utld,x),ot(x,e.domain,a),ot(x,r,s),Ne(x,Ha,y),Ne(x,Is,v),Ne(x,zl,u);const b=Ne(x,Yl),S=js(Hy);ot(b,e.numeric,S);const E=js(Hy),N=js();ot(E,t,E),ot(E,n,N),ot(N,t,E),ot(N,n,N),Ne(x,Va,E),Ne(S,Va,E);const _=Ne(o,Yl),k=Ne(c,Yl),T=Ne(k,Va),A=Ne(T,Va);ot(o,e.domain,a),Ne(o,Ha,y),Ne(o,Is,v),ot(c,e.domain,a),Ne(c,Ha,y),Ne(c,Is,v),ot(_,e.domain,E),Ne(_,Va,E),Ne(_,eg,E),ot(A,e.domain,E),ot(A,t,E),Ne(A,Va,E);const j=[[Qm,Jm],[V1,W1],[q1,K1],[G1,Y1],[X1,Q1],[J1,Z1],[ew,tw],[nw,rw]];for(let D=0;D<j.length;D++){const[I,M]=j[D],L=Ne(E,I);Ne(N,I,L),Ne(L,M,E);const P=js(Hy);ot(L,t,P);const B=js();ot(L,n),ot(P,t,P),ot(P,n,B),ot(B,t,P),ot(B,n,B),Ne(P,M,E),Ne(B,M,E)}return Ne(i,g0,x),Ne(i,qM,KWe),{start:i,tokens:Tre}}function YWe(e,t,n){let r=n.length,i=0,s=[],a=[];for(;i<r;){let o=e,c=null,u=null,d=0,f=null,h=-1;for(;i<r&&!(c=o.go(n[i].t));)a.push(n[i++]);for(;i<r&&(u=c||o.go(n[i].t));)c=null,o=u,o.accepts()?(h=0,f=o):h>=0&&h++,i++,d++;if(h<0)i-=d,i<r&&(a.push(n[i]),i++);else{a.length>0&&(s.push(Bk($$,t,a)),a=[]),i-=h,d-=h;const p=f.t,m=n.slice(i-d,i);s.push(Bk(p,t,m))}}return a.length>0&&s.push(Bk($$,t,a)),s}function Bk(e,t,n){const r=n[0].s,i=n[n.length-1].e,s=t.slice(r,i);return new e(s,n)}const XWe=typeof console<"u"&&console&&console.warn||(()=>{}),QWe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",an={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function JWe(){return Mi.groups={},an.scanner=null,an.parser=null,an.tokenQueue=[],an.pluginQueue=[],an.customSchemes=[],an.initialized=!1,an}function U$(e,t=!1){if(an.initialized&&XWe(`linkifyjs: already initialized - will not register custom scheme "${e}" ${QWe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);an.customSchemes.push([e,t])}function ZWe(){an.scanner=WWe(an.customSchemes);for(let e=0;e<an.tokenQueue.length;e++)an.tokenQueue[e][1]({scanner:an.scanner});an.parser=GWe(an.scanner.tokens);for(let e=0;e<an.pluginQueue.length;e++)an.pluginQueue[e][1]({scanner:an.scanner,parser:an.parser});return an.initialized=!0,an}function JM(e){return an.initialized||ZWe(),YWe(an.parser.start,e,Are(an.scanner.start,e))}JM.scan=Are;function Ore(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new QM(n),i=JM(e),s=[];for(let a=0;a<i.length;a++){const o=i[a];o.isLink&&(!t||o.t===t)&&r.check(o)&&s.push(o.toFormattedObject(r))}return s}var ZM="[\0- -\u2029]",eqe=new RegExp(ZM),tqe=new RegExp(`${ZM}$`),nqe=new RegExp(ZM,"g");function rqe(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function iqe(e){return new hn({key:new Fn("autolink"),appendTransaction:(t,n,r)=>{const i=t.some(u=>u.docChanged)&&!n.doc.eq(r.doc),s=t.some(u=>u.getMeta("preventAutolink"));if(!i||s)return;const{tr:a}=r,o=Hne(n.doc,[...t]);if(Zne(o).forEach(({newRange:u})=>{const d=fHe(r.doc,u,p=>p.isTextblock);let f,h;if(d.length>1)f=d[0],h=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(d.length){const p=r.doc.textBetween(u.from,u.to," "," ");if(!tqe.test(p))return;f=d[0],h=r.doc.textBetween(f.pos,u.to,void 0," ")}if(f&&h){const p=h.split(eqe).filter(Boolean);if(p.length<=0)return!1;const m=p[p.length-1],g=f.pos+h.lastIndexOf(m);if(!m)return!1;const v=JM(m).map(y=>y.toObject(e.defaultProtocol));if(!rqe(v))return!1;v.filter(y=>y.isLink).map(y=>({...y,from:g+y.start+1,to:g+y.end+1})).filter(y=>r.schema.marks.code?!r.doc.rangeHasMark(y.from,y.to,r.schema.marks.code):!0).filter(y=>e.validate(y.value)).filter(y=>e.shouldAutoLink(y.value)).forEach(y=>{zM(y.from,y.to,r.doc).some(x=>x.mark.type===e.type)||a.addMark(y.from,y.to,e.type.create({href:y.href}))})}}),!!a.steps.length)return a}})}function sqe(e){return new hn({key:new Fn("handleClickLink"),props:{handleClick:(t,n,r)=>{var i,s;if(r.button!==0||!t.editable)return!1;let a=null;if(r.target instanceof HTMLAnchorElement)a=r.target;else{let d=r.target;const f=[];for(;d.nodeName!=="DIV";)f.push(d),d=d.parentNode;a=f.find(h=>h.nodeName==="A")}if(!a)return!1;const o=Jne(t.state,e.type.name),c=(i=a==null?void 0:a.href)!=null?i:o.href,u=(s=a==null?void 0:a.target)!=null?s:o.target;return e.enableClickSelection&&e.editor.commands.extendMarkRange(e.type.name),a&&c?(window.open(c,u),!0):!1}}})}function aqe(e){return new hn({key:new Fn("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:i}=t,{selection:s}=i,{empty:a}=s;if(a)return!1;let o="";r.content.forEach(u=>{o+=u.textContent});const c=Ore(o,{defaultProtocol:e.defaultProtocol}).find(u=>u.isLink&&u.value===o);return!o||!c?!1:e.editor.commands.setMark(e.type,{href:c.href})}}})}function vu(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!e||e.replace(nqe,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Pre=cu.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){U$(e);return}U$(e.scheme,e.optionalSlashes)})},onDestroy(){JWe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!vu(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!vu(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!vu(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",rn(this.options.HTMLAttributes,e),0]:["a",rn(this.options.HTMLAttributes,{...e,href:""}),0]},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!vu(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!vu(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Bc({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,i=Ore(e).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:a=>!!vu(a,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>t.push({text:s.value,data:{href:s.href},index:s.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(iqe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!vu(i,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&e.push(sqe({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(aqe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}}),oqe=Pre,lqe=Object.defineProperty,cqe=(e,t)=>{for(var n in t)lqe(e,n,{get:t[n],enumerable:!0})},uqe="listItem",z$="textStyle",H$=/^\s*([-+*])\s$/,Ire=Ir.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",rn(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(uqe,this.editor.getAttributes(z$)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=Bh({find:H$,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Bh({find:H$,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(z$),editor:this.editor})),[e]}}),Dre=Ir.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",rn(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),dqe={};cqe(dqe,{findListItemPos:()=>kv,getNextListDepth:()=>e3,handleBackspace:()=>DA,handleDelete:()=>MA,hasListBefore:()=>Mre,hasListItemAfter:()=>fqe,hasListItemBefore:()=>Rre,listItemHasSubList:()=>Lre,nextListIsDeeper:()=>Fre,nextListIsHigher:()=>Bre});var kv=(e,t)=>{const{$from:n}=t.selection,r=Zn(e,t.schema);let i=null,s=n.depth,a=n.pos,o=null;for(;s>0&&o===null;)i=n.node(s),i.type===r?o=s:(s-=1,a-=1);return o===null?null:{$pos:t.doc.resolve(a),depth:o}},e3=(e,t)=>{const n=kv(e,t);if(!n)return!1;const[,r]=wHe(t,e,n.$pos.pos+4);return r},Mre=(e,t,n)=>{const{$anchor:r}=e.selection,i=Math.max(0,r.pos-2),s=e.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},Rre=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==e)},Lre=(e,t,n)=>{if(!n)return!1;const r=Zn(e,t.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},DA=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!Fc(e.state,t)&&Mre(e.state,t,n)){const{$anchor:o}=e.state.selection,c=e.state.doc.resolve(o.before()-1),u=[];c.node().descendants((h,p)=>{h.type.name===t&&u.push({node:h,pos:p})});const d=u.at(-1);if(!d)return!1;const f=e.state.doc.resolve(c.start()+d.pos+1);return e.chain().cut({from:o.start()-1,to:o.end()+1},f.end()).joinForward().run()}if(!Fc(e.state,t)||!_He(e.state))return!1;const r=kv(t,e.state);if(!r)return!1;const s=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),a=Lre(t,e.state,s);return Rre(t,e.state)&&!a?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},Fre=(e,t)=>{const n=e3(e,t),r=kv(e,t);return!r||!n?!1:n>r.depth},Bre=(e,t)=>{const n=e3(e,t),r=kv(e,t);return!r||!n?!1:n<r.depth},MA=(e,t)=>{if(!Fc(e.state,t)||!NHe(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:Fre(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():Bre(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},fqe=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==e)},$re=Bn.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&MA(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&MA(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&DA(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&DA(e,n,r)&&(t=!0)}),t}}}}),hqe="listItem",V$="textStyle",W$=/^(\d+)\.\s$/,Ure=Ir.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",rn(this.options.HTMLAttributes,n),0]:["ol",rn(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(hqe,this.editor.getAttributes(V$)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=Bh({find:W$,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Bh({find:W$,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(V$)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),pqe=/^\s*(\[([( |x])?\])\s$/,zre=Ir.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",rn(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),a=document.createElement("span"),o=document.createElement("input"),c=document.createElement("div"),u=d=>{var f,h;o.ariaLabel=((h=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:h.call(f,d,o.checked))||`Task item checkbox for ${d.textContent||"empty task item"}`};return u(e),s.contentEditable="false",o.type="checkbox",o.addEventListener("mousedown",d=>d.preventDefault()),o.addEventListener("change",d=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){o.checked=!o.checked;return}const{checked:f}=d.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:h})=>{const p=n();if(typeof p!="number")return!1;const m=h.doc.nodeAt(p);return h.setNodeMarkup(p,void 0,{...m==null?void 0:m.attrs,checked:f}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,f)||(o.checked=!o.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,f])=>{i.setAttribute(d,f)}),i.dataset.checked=e.attrs.checked,o.checked=e.attrs.checked,s.append(o,a),i.append(s,c),Object.entries(t).forEach(([d,f])=>{i.setAttribute(d,f)}),{dom:i,contentDOM:c,update:d=>d.type!==this.type?!1:(i.dataset.checked=d.attrs.checked,o.checked=d.attrs.checked,u(d),!0)}}},addInputRules(){return[Bh({find:pqe,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),Hre=Ir.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",rn(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Bn.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(Ire.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(Dre.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push($re.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(Ure.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(zre.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(Hre.configure(this.options.taskList)),e}});var mqe=Ir.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",rn(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),gqe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,vqe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,yqe=cu.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",rn(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Pd({find:gqe,type:this.type})]},addPasteRules(){return[Bc({find:vqe,type:this.type})]}}),xqe=Ir.create({name:"text",group:"inline"}),bqe=cu.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",rn(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function wqe(e={}){return new hn({view(t){return new Eqe(t,e)}})}class Eqe{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=a=>{this[i](a)};return t.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),a=s.width/i.offsetWidth,o=s.height/i.offsetHeight;if(n){let f=t.nodeBefore,h=t.nodeAfter;if(f||h){let p=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(p){let m=p.getBoundingClientRect(),g=f?m.bottom:m.top;f&&h&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*o;r={left:m.left,right:m.right,top:g-v,bottom:g+v}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*a;r={left:f.left-h,right:f.left+h,top:f.top,bottom:f.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let u,d;if(!c||c==document.body&&getComputedStyle(c).position=="static")u=-pageXOffset,d=-pageYOffset;else{let f=c.getBoundingClientRect(),h=f.width/c.offsetWidth,p=f.height/c.offsetHeight;u=f.left-c.scrollLeft*h,d=f.top-c.scrollTop*p}this.element.style.left=(r.left-u)/a+"px",this.element.style.top=(r.top-d)/o+"px",this.element.style.width=(r.right-r.left)/a+"px",this.element.style.height=(r.bottom-r.top)/o+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,t):i;if(n&&!s){let a=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let o=zte(this.editorView.state.doc,a,this.editorView.dragging.slice);o!=null&&(a=o)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class Mn extends tt{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return Mn.valid(r)?new Mn(r):tt.near(r)}content(){return Ie.empty}eq(t){return t instanceof Mn&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Mn(t.resolve(n.pos))}getBookmark(){return new t3(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!Sqe(t)||!Nqe(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&Mn.valid(t))return t;let i=t.pos,s=null;for(let a=t.depth;;a--){let o=t.node(a);if(n>0?t.indexAfter(a)<o.childCount:t.index(a)>0){s=o.child(n>0?t.indexAfter(a):t.index(a)-1);break}else if(a==0)return null;i+=n;let c=t.doc.resolve(i);if(Mn.valid(c))return c}for(;;){let a=n>0?s.firstChild:s.lastChild;if(!a){if(s.isAtom&&!s.isText&&!Ye.isSelectable(s)){t=t.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=a,i+=n;let o=t.doc.resolve(i);if(Mn.valid(o))return o}return null}}}Mn.prototype.visible=!1;Mn.findFrom=Mn.findGapCursorFrom;tt.jsonID("gapcursor",Mn);class t3{constructor(t){this.pos=t}map(t){return new t3(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return Mn.valid(n)?new Mn(n):tt.near(n)}}function Sqe(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Nqe(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function _qe(){return new hn({props:{decorations:Aqe,createSelectionBetween(e,t,n){return t.pos==n.pos&&Mn.valid(n)?new Mn(n):null},handleClick:Cqe,handleKeyDown:kqe,handleDOMEvents:{beforeinput:Tqe}}})}const kqe=OM({ArrowLeft:Vy("horiz",-1),ArrowRight:Vy("horiz",1),ArrowUp:Vy("vert",-1),ArrowDown:Vy("vert",1)});function Vy(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,s){let a=r.selection,o=t>0?a.$to:a.$from,c=a.empty;if(a instanceof Qe){if(!s.endOfTextblock(n)||o.depth==0)return!1;c=!1,o=r.doc.resolve(t>0?o.after():o.before())}let u=Mn.findGapCursorFrom(o,t,c);return u?(i&&i(r.tr.setSelection(new Mn(u))),!0):!1}}function Cqe(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!Mn.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Ye.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new Mn(r))),!0)}function Tqe(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof Mn))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=ve.empty;for(let a=r.length-1;a>=0;a--)i=ve.from(r[a].createAndFill(null,i));let s=e.state.tr.replace(n.pos,n.pos,new Ie(i,0,0));return s.setSelection(Qe.near(s.doc.resolve(n.pos+1))),e.dispatch(s),!1}function Aqe(e){if(!(e.selection instanceof Mn))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Ut.create(e.doc,[or.widget(e.selection.head,t,{key:"gapcursor"})])}var vw=200,Cr=function(){};Cr.prototype.append=function(t){return t.length?(t=Cr.from(t),!this.length&&t||t.length<vw&&this.leafAppend(t)||this.length<vw&&t.leafPrepend(this)||this.appendInner(t)):this};Cr.prototype.prepend=function(t){return t.length?Cr.from(t).append(this):this};Cr.prototype.appendInner=function(t){return new jqe(this,t)};Cr.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?Cr.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};Cr.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Cr.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};Cr.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,a){return i.push(t(s,a))},n,r),i};Cr.from=function(t){return t instanceof Cr?t:t&&t.length?new Vre(t):Cr.empty};var Vre=function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new t(this.values.slice(i,s))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,s,a,o){for(var c=s;c<a;c++)if(i(this.values[c],o+c)===!1)return!1},t.prototype.forEachInvertedInner=function(i,s,a,o){for(var c=s-1;c>=a;c--)if(i(this.values[c],o+c)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=vw)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=vw)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(Cr);Cr.empty=new Vre([]);var jqe=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,s,a){var o=this.left.length;if(i<o&&this.left.forEachInner(r,i,Math.min(s,o),a)===!1||s>o&&this.right.forEachInner(r,Math.max(i-o,0),Math.min(this.length,s)-o,a+o)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,s,a){var o=this.left.length;if(i>o&&this.right.forEachInvertedInner(r,i-o,Math.max(s,o)-o,a+o)===!1||s<o&&this.left.forEachInvertedInner(r,Math.min(i,o),s,a)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(Cr);const Oqe=500;class xa{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let a=t.tr,o,c,u=[],d=[];return this.items.forEach((f,h)=>{if(!f.step){i||(i=this.remapping(r,h+1),s=i.maps.length),s--,d.push(f);return}if(i){d.push(new Wa(f.map));let p=f.step.map(i.slice(s)),m;p&&a.maybeStep(p).doc&&(m=a.mapping.maps[a.mapping.maps.length-1],u.push(new Wa(m,void 0,void 0,u.length+d.length))),s--,m&&i.appendMap(m,s)}else a.maybeStep(f.step);if(f.selection)return o=i?f.selection.map(i.slice(s)):f.selection,c=new xa(this.items.slice(0,r).append(d.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:a,selection:o}}addTransform(t,n,r,i){let s=[],a=this.eventCount,o=this.items,c=!i&&o.length?o.get(o.length-1):null;for(let d=0;d<t.steps.length;d++){let f=t.steps[d].invert(t.docs[d]),h=new Wa(t.mapping.maps[d],f,n),p;(p=c&&c.merge(h))&&(h=p,d?s.pop():o=o.slice(0,o.length-1)),s.push(h),n&&(a++,n=void 0),i||(c=h)}let u=a-r.depth;return u>Iqe&&(o=Pqe(o,u),a-=u),new xa(o.append(s),a)}remapping(t,n){let r=new c0;return this.items.forEach((i,s)=>{let a=i.mirrorOffset!=null&&s-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,a)},t,n),r}addMaps(t){return this.eventCount==0?this:new xa(this.items.append(t.map(n=>new Wa(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=t.mapping,a=t.steps.length,o=this.eventCount;this.items.forEach(h=>{h.selection&&o--},i);let c=n;this.items.forEach(h=>{let p=s.getMirror(--c);if(p==null)return;a=Math.min(a,p);let m=s.maps[p];if(h.step){let g=t.steps[p].invert(t.docs[p]),v=h.selection&&h.selection.map(s.slice(c+1,p));v&&o++,r.push(new Wa(m,g,v))}else r.push(new Wa(m))},i);let u=[];for(let h=n;h<a;h++)u.push(new Wa(s.maps[h]));let d=this.items.slice(0,i).append(u).append(r),f=new xa(d,o);return f.emptyItemCount()>Oqe&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,i=[],s=0;return this.items.forEach((a,o)=>{if(o>=t)i.push(a),a.selection&&s++;else if(a.step){let c=a.step.map(n.slice(r)),u=c&&c.getMap();if(r--,u&&n.appendMap(u,r),c){let d=a.selection&&a.selection.map(n.slice(r));d&&s++;let f=new Wa(u.invert(),c,d),h,p=i.length-1;(h=i.length&&i[p].merge(f))?i[p]=h:i.push(f)}}else a.map&&r--},this.items.length,0),new xa(Cr.from(i.reverse()),s)}}xa.empty=new xa(Cr.empty,0);function Pqe(e,t){let n;return e.forEach((r,i)=>{if(r.selection&&t--==0)return n=i,!1}),e.slice(n)}class Wa{constructor(t,n,r,i){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new Wa(n.getMap().invert(),n,this.selection)}}}class Hl{constructor(t,n,r,i,s){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const Iqe=20;function Dqe(e,t,n,r){let i=n.getMeta(od),s;if(i)return i.historyState;n.getMeta(Lqe)&&(e=new Hl(e.done,e.undone,null,0,-1));let a=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(a&&a.getMeta(od))return a.getMeta(od).redo?new Hl(e.done.addTransform(n,void 0,r,Dx(t)),e.undone,q$(n.mapping.maps),e.prevTime,e.prevComposition):new Hl(e.done,e.undone.addTransform(n,void 0,r,Dx(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let o=n.getMeta("composition"),c=e.prevTime==0||!a&&e.prevComposition!=o&&(e.prevTime<(n.time||0)-r.newGroupDelay||!Mqe(n,e.prevRanges)),u=a?$k(e.prevRanges,n.mapping):q$(n.mapping.maps);return new Hl(e.done.addTransform(n,c?t.selection.getBookmark():void 0,r,Dx(t)),xa.empty,u,n.time,o??e.prevComposition)}else return(s=n.getMeta("rebased"))?new Hl(e.done.rebased(n,s),e.undone.rebased(n,s),$k(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Hl(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),$k(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function Mqe(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<t.length;s+=2)r<=t[s+1]&&i>=t[s]&&(n=!0)}),n}function q$(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,i,s,a)=>t.push(s,a));return t}function $k(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),s=t.map(e[r+1],-1);i<=s&&n.push(i,s)}return n}function Rqe(e,t,n){let r=Dx(t),i=od.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,r);if(!s)return null;let a=s.selection.resolve(s.transform.doc),o=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,r),c=new Hl(n?o:s.remaining,n?s.remaining:o,null,0,-1);return s.transform.setSelection(a).setMeta(od,{redo:n,historyState:c})}let Uk=!1,K$=null;function Dx(e){let t=e.plugins;if(K$!=t){Uk=!1,K$=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){Uk=!0;break}}return Uk}const od=new Fn("history"),Lqe=new Fn("closeHistory");function Fqe(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new hn({key:od,state:{init(){return new Hl(xa.empty,xa.empty,null,0,-1)},apply(t,n,r){return Dqe(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,i=r=="historyUndo"?qre:r=="historyRedo"?Kre:null;return i?(n.preventDefault(),i(t.state,t.dispatch)):!1}}}})}function Wre(e,t){return(n,r)=>{let i=od.getState(n);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(r){let s=Rqe(i,n,e);s&&r(t?s.scrollIntoView():s)}return!0}}const qre=Wre(!1,!0),Kre=Wre(!0,!0);var Bqe=Bn.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc;if(((e==null?void 0:e.mode)||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new hn({key:new Fn("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const a=s-i,o=0,c=a;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const u=r.tr.deleteRange(o,c);return e=!0,u}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:t.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!t.getMeta("paste"))return!1;const o=t.selection.$head.pos,c=s-r,u=o-c,d=o;return t.deleteRange(u,d),!(this.storage.characters({node:t.doc})>r)}})]}}),$qe=Bn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[wqe(this.options)]}});Bn.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new hn({key:new Fn("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=t,s=[];if(!n||!r)return Ut.create(e,[]);let a=0;this.options.mode==="deepest"&&e.descendants((c,u)=>{if(c.isText)return;if(!(i>=u&&i<=u+c.nodeSize-1))return!1;a+=1});let o=0;return e.descendants((c,u)=>{if(c.isText||!(i>=u&&i<=u+c.nodeSize-1))return!1;if(o+=1,this.options.mode==="deepest"&&a-o>0||this.options.mode==="shallowest"&&o>1)return this.options.mode==="deepest";s.push(or.node(u,u+c.nodeSize,{class:this.options.className}))}),Ut.create(e,s)}}})]}});var Uqe=Bn.create({name:"gapCursor",addProseMirrorPlugins(){return[_qe()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=jt(Ke(e,"allowGapCursor",n)))!=null?t:null}}}),zqe=Bn.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new hn({key:new Fn("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,i=[];if(!n)return null;const s=this.editor.isEmpty;return e.descendants((a,o)=>{const c=r>=o&&r<=o+a.nodeSize,u=!a.isLeaf&&ZS(a);if((c||!this.options.showOnlyCurrent)&&u){const d=[this.options.emptyNodeClass];s&&d.push(this.options.emptyEditorClass);const f=or.node(o,o+a.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:o,hasAnchor:c}):this.options.placeholder});i.push(f)}return this.options.includeChildren}),Ut.create(e,i)}}})]}});Bn.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new hn({key:new Fn("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||tre(n.selection)||e.view.dragging?null:Ut.create(n.doc,[or.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function G$({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||(t==null?void 0:t.type)===e}var Hqe=Bn.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const e=new Fn(this.name),t=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>(this.options.notAfter||[]).concat(this.options.node).includes(n.name));return[new hn({key:e,appendTransaction:(n,r,i)=>{const{doc:s,tr:a,schema:o}=i,c=e.getState(i),u=s.content.size,d=o.nodes[this.options.node];if(c)return a.insert(u,d.create())},state:{init:(n,r)=>{const i=r.tr.doc.lastChild;return!G$({node:i,types:t})},apply:(n,r)=>{if(!n.docChanged)return r;const i=n.doc.lastChild;return!G$({node:i,types:t})}}})]}}),Vqe=Bn.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>qre(e,t),redo:()=>({state:e,dispatch:t})=>Kre(e,t)}},addProseMirrorPlugins(){return[Fqe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Wqe=Bn.create({name:"starterKit",addExtensions(){var e,t,n,r;const i=[];return this.options.bold!==!1&&i.push(wWe.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(gWe.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(Ire.configure(this.options.bulletList)),this.options.code!==!1&&i.push(NWe.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(Ere.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(TWe.configure(this.options.document)),this.options.dropcursor!==!1&&i.push($qe.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(Uqe.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(AWe.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(jWe.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(Vqe.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(OWe.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(RWe.configure(this.options.italic)),this.options.listItem!==!1&&i.push(Dre.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push($re.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&i.push(Pre.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&i.push(Ure.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(mqe.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(yqe.configure(this.options.strike)),this.options.text!==!1&&i.push(xqe.configure(this.options.text)),this.options.underline!==!1&&i.push(bqe.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(Hqe.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),qqe=Wqe,Kqe=zqe,Gqe=Bqe,Yqe=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Xqe=Ir.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",rn(this.options.HTMLAttributes,e)]},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[xre({find:Yqe,type:this.type,getAttributes:e=>{const[,,t,n,r]=e;return{src:n,alt:t,title:r}}})]}}),Qqe=Xqe;function Gre(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach(t=>{const n=e[t],r=typeof n;(r==="object"||r==="function")&&!Object.isFrozen(n)&&Gre(n)}),e}let Y$=class{constructor(t){t.data===void 0&&(t.data={}),this.data=t.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}};function Yre(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function ic(e,...t){const n=Object.create(null);for(const r in e)n[r]=e[r];return t.forEach(function(r){for(const i in r)n[i]=r[i]}),n}const Jqe="</span>",X$=e=>!!e.scope,Zqe=(e,{prefix:t})=>{if(e.startsWith("language:"))return e.replace("language:","language-");if(e.includes(".")){const n=e.split(".");return[`${t}${n.shift()}`,...n.map((r,i)=>`${r}${"_".repeat(i+1)}`)].join(" ")}return`${t}${e}`};class eKe{constructor(t,n){this.buffer="",this.classPrefix=n.classPrefix,t.walk(this)}addText(t){this.buffer+=Yre(t)}openNode(t){if(!X$(t))return;const n=Zqe(t.scope,{prefix:this.classPrefix});this.span(n)}closeNode(t){X$(t)&&(this.buffer+=Jqe)}value(){return this.buffer}span(t){this.buffer+=`<span class="${t}">`}}const Q$=(e={})=>{const t={children:[]};return Object.assign(t,e),t};class n3{constructor(){this.rootNode=Q$(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(t){this.top.children.push(t)}openNode(t){const n=Q$({scope:t});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(t){return this.constructor._walk(t,this.rootNode)}static _walk(t,n){return typeof n=="string"?t.addText(n):n.children&&(t.openNode(n),n.children.forEach(r=>this._walk(t,r)),t.closeNode(n)),t}static _collapse(t){typeof t!="string"&&t.children&&(t.children.every(n=>typeof n=="string")?t.children=[t.children.join("")]:t.children.forEach(n=>{n3._collapse(n)}))}}class tKe extends n3{constructor(t){super(),this.options=t}addText(t){t!==""&&this.add(t)}startScope(t){this.openNode(t)}endScope(){this.closeNode()}__addSublanguage(t,n){const r=t.root;n&&(r.scope=`language:${n}`),this.add(r)}toHTML(){return new eKe(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function y0(e){return e?typeof e=="string"?e:e.source:null}function Xre(e){return zd("(?=",e,")")}function nKe(e){return zd("(?:",e,")*")}function rKe(e){return zd("(?:",e,")?")}function zd(...e){return e.map(n=>y0(n)).join("")}function iKe(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function r3(...e){return"("+(iKe(e).capture?"":"?:")+e.map(r=>y0(r)).join("|")+")"}function Qre(e){return new RegExp(e.toString()+"|").exec("").length-1}function sKe(e,t){const n=e&&e.exec(t);return n&&n.index===0}const aKe=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function i3(e,{joinWith:t}){let n=0;return e.map(r=>{n+=1;const i=n;let s=y0(r),a="";for(;s.length>0;){const o=aKe.exec(s);if(!o){a+=s;break}a+=s.substring(0,o.index),s=s.substring(o.index+o[0].length),o[0][0]==="\\"&&o[1]?a+="\\"+String(Number(o[1])+i):(a+=o[0],o[0]==="("&&n++)}return a}).map(r=>`(${r})`).join(t)}const oKe=/\b\B/,Jre="[a-zA-Z]\\w*",s3="[a-zA-Z_]\\w*",Zre="\\b\\d+(\\.\\d+)?",eie="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",tie="\\b(0b[01]+)",lKe="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",cKe=(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=zd(t,/.*\b/,e.binary,/\b.*/)),ic({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(n,r)=>{n.index!==0&&r.ignoreMatch()}},e)},x0={begin:"\\\\[\\s\\S]",relevance:0},uKe={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[x0]},dKe={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[x0]},fKe={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},rN=function(e,t,n={}){const r=ic({scope:"comment",begin:e,end:t,contains:[]},n);r.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const i=r3("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return r.contains.push({begin:zd(/[ ]+/,"(",i,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),r},hKe=rN("//","$"),pKe=rN("/\\*","\\*/"),mKe=rN("#","$"),gKe={scope:"number",begin:Zre,relevance:0},vKe={scope:"number",begin:eie,relevance:0},yKe={scope:"number",begin:tie,relevance:0},xKe={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[x0,{begin:/\[/,end:/\]/,relevance:0,contains:[x0]}]},bKe={scope:"title",begin:Jre,relevance:0},wKe={scope:"title",begin:s3,relevance:0},EKe={begin:"\\.\\s*"+s3,relevance:0},SKe=function(e){return Object.assign(e,{"on:begin":(t,n)=>{n.data._beginMatch=t[1]},"on:end":(t,n)=>{n.data._beginMatch!==t[1]&&n.ignoreMatch()}})};var Wy=Object.freeze({__proto__:null,APOS_STRING_MODE:uKe,BACKSLASH_ESCAPE:x0,BINARY_NUMBER_MODE:yKe,BINARY_NUMBER_RE:tie,COMMENT:rN,C_BLOCK_COMMENT_MODE:pKe,C_LINE_COMMENT_MODE:hKe,C_NUMBER_MODE:vKe,C_NUMBER_RE:eie,END_SAME_AS_BEGIN:SKe,HASH_COMMENT_MODE:mKe,IDENT_RE:Jre,MATCH_NOTHING_RE:oKe,METHOD_GUARD:EKe,NUMBER_MODE:gKe,NUMBER_RE:Zre,PHRASAL_WORDS_MODE:fKe,QUOTE_STRING_MODE:dKe,REGEXP_MODE:xKe,RE_STARTERS_RE:lKe,SHEBANG:cKe,TITLE_MODE:bKe,UNDERSCORE_IDENT_RE:s3,UNDERSCORE_TITLE_MODE:wKe});function NKe(e,t){e.input[e.index-1]==="."&&t.ignoreMatch()}function _Ke(e,t){e.className!==void 0&&(e.scope=e.className,delete e.className)}function kKe(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=NKe,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,e.relevance===void 0&&(e.relevance=0))}function CKe(e,t){Array.isArray(e.illegal)&&(e.illegal=r3(...e.illegal))}function TKe(e,t){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function AKe(e,t){e.relevance===void 0&&(e.relevance=1)}const jKe=(e,t)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},e);Object.keys(e).forEach(r=>{delete e[r]}),e.keywords=n.keywords,e.begin=zd(n.beforeMatch,Xre(n.begin)),e.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},e.relevance=0,delete n.beforeMatch},OKe=["of","and","for","in","not","or","if","then","parent","list","value"],PKe="keyword";function nie(e,t,n=PKe){const r=Object.create(null);return typeof e=="string"?i(n,e.split(" ")):Array.isArray(e)?i(n,e):Object.keys(e).forEach(function(s){Object.assign(r,nie(e[s],t,s))}),r;function i(s,a){t&&(a=a.map(o=>o.toLowerCase())),a.forEach(function(o){const c=o.split("|");r[c[0]]=[s,IKe(c[0],c[1])]})}}function IKe(e,t){return t?Number(t):DKe(e)?0:1}function DKe(e){return OKe.includes(e.toLowerCase())}const J$={},ld=e=>{console.error(e)},Z$=(e,...t)=>{console.log(`WARN: ${e}`,...t)},cf=(e,t)=>{J$[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),J$[`${e}/${t}`]=!0)},yw=new Error;function rie(e,t,{key:n}){let r=0;const i=e[n],s={},a={};for(let o=1;o<=t.length;o++)a[o+r]=i[o],s[o+r]=!0,r+=Qre(t[o-1]);e[n]=a,e[n]._emit=s,e[n]._multi=!0}function MKe(e){if(Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw ld("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),yw;if(typeof e.beginScope!="object"||e.beginScope===null)throw ld("beginScope must be object"),yw;rie(e,e.begin,{key:"beginScope"}),e.begin=i3(e.begin,{joinWith:""})}}function RKe(e){if(Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw ld("skip, excludeEnd, returnEnd not compatible with endScope: {}"),yw;if(typeof e.endScope!="object"||e.endScope===null)throw ld("endScope must be object"),yw;rie(e,e.end,{key:"endScope"}),e.end=i3(e.end,{joinWith:""})}}function LKe(e){e.scope&&typeof e.scope=="object"&&e.scope!==null&&(e.beginScope=e.scope,delete e.scope)}function FKe(e){LKe(e),typeof e.beginScope=="string"&&(e.beginScope={_wrap:e.beginScope}),typeof e.endScope=="string"&&(e.endScope={_wrap:e.endScope}),MKe(e),RKe(e)}function BKe(e){function t(a,o){return new RegExp(y0(a),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(o?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(o,c){c.position=this.position++,this.matchIndexes[this.matchAt]=c,this.regexes.push([c,o]),this.matchAt+=Qre(o)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const o=this.regexes.map(c=>c[1]);this.matcherRe=t(i3(o,{joinWith:"|"}),!0),this.lastIndex=0}exec(o){this.matcherRe.lastIndex=this.lastIndex;const c=this.matcherRe.exec(o);if(!c)return null;const u=c.findIndex((f,h)=>h>0&&f!==void 0),d=this.matchIndexes[u];return c.splice(0,u),Object.assign(c,d)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(o){if(this.multiRegexes[o])return this.multiRegexes[o];const c=new n;return this.rules.slice(o).forEach(([u,d])=>c.addRule(u,d)),c.compile(),this.multiRegexes[o]=c,c}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(o,c){this.rules.push([o,c]),c.type==="begin"&&this.count++}exec(o){const c=this.getMatcher(this.regexIndex);c.lastIndex=this.lastIndex;let u=c.exec(o);if(this.resumingScanAtSamePosition()&&!(u&&u.index===this.lastIndex)){const d=this.getMatcher(0);d.lastIndex=this.lastIndex+1,u=d.exec(o)}return u&&(this.regexIndex+=u.position+1,this.regexIndex===this.count&&this.considerAll()),u}}function i(a){const o=new r;return a.contains.forEach(c=>o.addRule(c.begin,{rule:c,type:"begin"})),a.terminatorEnd&&o.addRule(a.terminatorEnd,{type:"end"}),a.illegal&&o.addRule(a.illegal,{type:"illegal"}),o}function s(a,o){const c=a;if(a.isCompiled)return c;[_Ke,TKe,FKe,jKe].forEach(d=>d(a,o)),e.compilerExtensions.forEach(d=>d(a,o)),a.__beforeBegin=null,[kKe,CKe,AKe].forEach(d=>d(a,o)),a.isCompiled=!0;let u=null;return typeof a.keywords=="object"&&a.keywords.$pattern&&(a.keywords=Object.assign({},a.keywords),u=a.keywords.$pattern,delete a.keywords.$pattern),u=u||/\w+/,a.keywords&&(a.keywords=nie(a.keywords,e.case_insensitive)),c.keywordPatternRe=t(u,!0),o&&(a.begin||(a.begin=/\B|\b/),c.beginRe=t(c.begin),!a.end&&!a.endsWithParent&&(a.end=/\B|\b/),a.end&&(c.endRe=t(c.end)),c.terminatorEnd=y0(c.end)||"",a.endsWithParent&&o.terminatorEnd&&(c.terminatorEnd+=(a.end?"|":"")+o.terminatorEnd)),a.illegal&&(c.illegalRe=t(a.illegal)),a.contains||(a.contains=[]),a.contains=[].concat(...a.contains.map(function(d){return $Ke(d==="self"?a:d)})),a.contains.forEach(function(d){s(d,c)}),a.starts&&s(a.starts,o),c.matcher=i(c),c}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=ic(e.classNameAliases||{}),s(e)}function iie(e){return e?e.endsWithParent||iie(e.starts):!1}function $Ke(e){return e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map(function(t){return ic(e,{variants:null},t)})),e.cachedVariants?e.cachedVariants:iie(e)?ic(e,{starts:e.starts?ic(e.starts):null}):Object.isFrozen(e)?ic(e):e}var UKe="11.11.1";class zKe extends Error{constructor(t,n){super(t),this.name="HTMLInjectionError",this.html=n}}const zk=Yre,e9=ic,t9=Symbol("nomatch"),HKe=7,sie=function(e){const t=Object.create(null),n=Object.create(null),r=[];let i=!0;const s="Could not find the language '{}', did you forget to load/include a language module?",a={disableAutodetect:!0,name:"Plain text",contains:[]};let o={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:tKe};function c(P){return o.noHighlightRe.test(P)}function u(P){let B=P.className+" ";B+=P.parentNode?P.parentNode.className:"";const R=o.languageDetectRe.exec(B);if(R){const F=k(R[1]);return F||(Z$(s.replace("{}",R[1])),Z$("Falling back to no-highlight mode for this block.",P)),F?R[1]:"no-highlight"}return B.split(/\s+/).find(F=>c(F)||k(F))}function d(P,B,R){let F="",O="";typeof B=="object"?(F=P,R=B.ignoreIllegals,O=B.language):(cf("10.7.0","highlight(lang, code, ...args) has been deprecated."),cf("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),O=P,F=B),R===void 0&&(R=!0);const Q={code:F,language:O};M("before:highlight",Q);const Y=Q.result?Q.result:f(Q.language,Q.code,R);return Y.code=Q.code,M("after:highlight",Y),Y}function f(P,B,R,F){const O=Object.create(null);function Q(G,te){return G.keywords[te]}function Y(){if(!q.keywords){Be.addText(He);return}let G=0;q.keywordPatternRe.lastIndex=0;let te=q.keywordPatternRe.exec(He),xe="";for(;te;){xe+=He.substring(G,te.index);const Pe=et.case_insensitive?te[0].toLowerCase():te[0],$e=Q(q,Pe);if($e){const[Ct,be]=$e;if(Be.addText(xe),xe="",O[Pe]=(O[Pe]||0)+1,O[Pe]<=HKe&&(ct+=be),Ct.startsWith("_"))xe+=te[0];else{const At=et.classNameAliases[Ct]||Ct;Te(te[0],At)}}else xe+=te[0];G=q.keywordPatternRe.lastIndex,te=q.keywordPatternRe.exec(He)}xe+=He.substring(G),Be.addText(xe)}function $(){if(He==="")return;let G=null;if(typeof q.subLanguage=="string"){if(!t[q.subLanguage]){Be.addText(He);return}G=f(q.subLanguage,He,!0,me[q.subLanguage]),me[q.subLanguage]=G._top}else G=p(He,q.subLanguage.length?q.subLanguage:null);q.relevance>0&&(ct+=G.relevance),Be.__addSublanguage(G._emitter,G.language)}function ye(){q.subLanguage!=null?$():Y(),He=""}function Te(G,te){G!==""&&(Be.startScope(te),Be.addText(G),Be.endScope())}function U(G,te){let xe=1;const Pe=te.length-1;for(;xe<=Pe;){if(!G._emit[xe]){xe++;continue}const $e=et.classNameAliases[G[xe]]||G[xe],Ct=te[xe];$e?Te(Ct,$e):(He=Ct,Y(),He=""),xe++}}function K(G,te){return G.scope&&typeof G.scope=="string"&&Be.openNode(et.classNameAliases[G.scope]||G.scope),G.beginScope&&(G.beginScope._wrap?(Te(He,et.classNameAliases[G.beginScope._wrap]||G.beginScope._wrap),He=""):G.beginScope._multi&&(U(G.beginScope,te),He="")),q=Object.create(G,{parent:{value:q}}),q}function fe(G,te,xe){let Pe=sKe(G.endRe,xe);if(Pe){if(G["on:end"]){const $e=new Y$(G);G["on:end"](te,$e),$e.isMatchIgnored&&(Pe=!1)}if(Pe){for(;G.endsParent&&G.parent;)G=G.parent;return G}}if(G.endsWithParent)return fe(G.parent,te,xe)}function oe(G){return q.matcher.regexIndex===0?(He+=G[0],1):(Me=!0,0)}function le(G){const te=G[0],xe=G.rule,Pe=new Y$(xe),$e=[xe.__beforeBegin,xe["on:begin"]];for(const Ct of $e)if(Ct&&(Ct(G,Pe),Pe.isMatchIgnored))return oe(te);return xe.skip?He+=te:(xe.excludeBegin&&(He+=te),ye(),!xe.returnBegin&&!xe.excludeBegin&&(He=te)),K(xe,G),xe.returnBegin?0:te.length}function Ee(G){const te=G[0],xe=B.substring(G.index),Pe=fe(q,G,xe);if(!Pe)return t9;const $e=q;q.endScope&&q.endScope._wrap?(ye(),Te(te,q.endScope._wrap)):q.endScope&&q.endScope._multi?(ye(),U(q.endScope,G)):$e.skip?He+=te:($e.returnEnd||$e.excludeEnd||(He+=te),ye(),$e.excludeEnd&&(He=te));do q.scope&&Be.closeNode(),!q.skip&&!q.subLanguage&&(ct+=q.relevance),q=q.parent;while(q!==Pe.parent);return Pe.starts&&K(Pe.starts,G),$e.returnEnd?0:te.length}function se(){const G=[];for(let te=q;te!==et;te=te.parent)te.scope&&G.unshift(te.scope);G.forEach(te=>Be.openNode(te))}let qe={};function Oe(G,te){const xe=te&&te[0];if(He+=G,xe==null)return ye(),0;if(qe.type==="begin"&&te.type==="end"&&qe.index===te.index&&xe===""){if(He+=B.slice(te.index,te.index+1),!i){const Pe=new Error(`0 width match regex (${P})`);throw Pe.languageName=P,Pe.badRule=qe.rule,Pe}return 1}if(qe=te,te.type==="begin")return le(te);if(te.type==="illegal"&&!R){const Pe=new Error('Illegal lexeme "'+xe+'" for mode "'+(q.scope||"<unnamed>")+'"');throw Pe.mode=q,Pe}else if(te.type==="end"){const Pe=Ee(te);if(Pe!==t9)return Pe}if(te.type==="illegal"&&xe==="")return He+=`
`,1;if(pn>1e5&&pn>te.index*3)throw new Error("potential infinite loop, way more iterations than matches");return He+=xe,xe.length}const et=k(P);if(!et)throw ld(s.replace("{}",P)),new Error('Unknown language: "'+P+'"');const J=BKe(et);let pe="",q=F||J;const me={},Be=new o.__emitter(o);se();let He="",ct=0,Pt=0,pn=0,Me=!1;try{if(et.__emitTokens)et.__emitTokens(B,Be);else{for(q.matcher.considerAll();;){pn++,Me?Me=!1:q.matcher.considerAll(),q.matcher.lastIndex=Pt;const G=q.matcher.exec(B);if(!G)break;const te=B.substring(Pt,G.index),xe=Oe(te,G);Pt=G.index+xe}Oe(B.substring(Pt))}return Be.finalize(),pe=Be.toHTML(),{language:P,value:pe,relevance:ct,illegal:!1,_emitter:Be,_top:q}}catch(G){if(G.message&&G.message.includes("Illegal"))return{language:P,value:zk(B),illegal:!0,relevance:0,_illegalBy:{message:G.message,index:Pt,context:B.slice(Pt-100,Pt+100),mode:G.mode,resultSoFar:pe},_emitter:Be};if(i)return{language:P,value:zk(B),illegal:!1,relevance:0,errorRaised:G,_emitter:Be,_top:q};throw G}}function h(P){const B={value:zk(P),illegal:!1,relevance:0,_top:a,_emitter:new o.__emitter(o)};return B._emitter.addText(P),B}function p(P,B){B=B||o.languages||Object.keys(t);const R=h(P),F=B.filter(k).filter(A).map(ye=>f(ye,P,!1));F.unshift(R);const O=F.sort((ye,Te)=>{if(ye.relevance!==Te.relevance)return Te.relevance-ye.relevance;if(ye.language&&Te.language){if(k(ye.language).supersetOf===Te.language)return 1;if(k(Te.language).supersetOf===ye.language)return-1}return 0}),[Q,Y]=O,$=Q;return $.secondBest=Y,$}function m(P,B,R){const F=B&&n[B]||R;P.classList.add("hljs"),P.classList.add(`language-${F}`)}function g(P){let B=null;const R=u(P);if(c(R))return;if(M("before:highlightElement",{el:P,language:R}),P.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",P);return}if(P.children.length>0&&(o.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(P)),o.throwUnescapedHTML))throw new zKe("One of your code blocks includes unescaped HTML.",P.innerHTML);B=P;const F=B.textContent,O=R?d(F,{language:R,ignoreIllegals:!0}):p(F);P.innerHTML=O.value,P.dataset.highlighted="yes",m(P,R,O.language),P.result={language:O.language,re:O.relevance,relevance:O.relevance},O.secondBest&&(P.secondBest={language:O.secondBest.language,relevance:O.secondBest.relevance}),M("after:highlightElement",{el:P,result:O,text:F})}function v(P){o=e9(o,P)}const y=()=>{S(),cf("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function x(){S(),cf("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let b=!1;function S(){function P(){S()}if(document.readyState==="loading"){b||window.addEventListener("DOMContentLoaded",P,!1),b=!0;return}document.querySelectorAll(o.cssSelector).forEach(g)}function E(P,B){let R=null;try{R=B(e)}catch(F){if(ld("Language definition for '{}' could not be registered.".replace("{}",P)),i)ld(F);else throw F;R=a}R.name||(R.name=P),t[P]=R,R.rawDefinition=B.bind(null,e),R.aliases&&T(R.aliases,{languageName:P})}function N(P){delete t[P];for(const B of Object.keys(n))n[B]===P&&delete n[B]}function _(){return Object.keys(t)}function k(P){return P=(P||"").toLowerCase(),t[P]||t[n[P]]}function T(P,{languageName:B}){typeof P=="string"&&(P=[P]),P.forEach(R=>{n[R.toLowerCase()]=B})}function A(P){const B=k(P);return B&&!B.disableAutodetect}function j(P){P["before:highlightBlock"]&&!P["before:highlightElement"]&&(P["before:highlightElement"]=B=>{P["before:highlightBlock"](Object.assign({block:B.el},B))}),P["after:highlightBlock"]&&!P["after:highlightElement"]&&(P["after:highlightElement"]=B=>{P["after:highlightBlock"](Object.assign({block:B.el},B))})}function D(P){j(P),r.push(P)}function I(P){const B=r.indexOf(P);B!==-1&&r.splice(B,1)}function M(P,B){const R=P;r.forEach(function(F){F[R]&&F[R](B)})}function L(P){return cf("10.7.0","highlightBlock will be removed entirely in v12.0"),cf("10.7.0","Please use highlightElement now."),g(P)}Object.assign(e,{highlight:d,highlightAuto:p,highlightAll:S,highlightElement:g,highlightBlock:L,configure:v,initHighlighting:y,initHighlightingOnLoad:x,registerLanguage:E,unregisterLanguage:N,listLanguages:_,getLanguage:k,registerAliases:T,autoDetection:A,inherit:e9,addPlugin:D,removePlugin:I}),e.debugMode=function(){i=!1},e.safeMode=function(){i=!0},e.versionString=UKe,e.regex={concat:zd,lookahead:Xre,either:r3,optional:rKe,anyNumberOfTimes:nKe};for(const P in Wy)typeof Wy[P]=="object"&&Gre(Wy[P]);return Object.assign(e,Wy),e},$h=sie({});$h.newInstance=()=>sie({});var VKe=$h;$h.HighlightJS=$h;$h.default=$h;const aie=oi(VKe);function oie(e,t=[]){return e.map(n=>{const r=[...t,...n.properties?n.properties.className:[]];return n.children?oie(n.children,r):{text:n.value,classes:r}}).flat()}function n9(e){return e.value||e.children||[]}function WKe(e){return!!aie.getLanguage(e)}function r9({doc:e,name:t,lowlight:n,defaultLanguage:r}){const i=[];return EA(e,s=>s.type.name===t).forEach(s=>{var a;let o=s.pos+1;const c=s.node.attrs.language||r,u=n.listLanguages(),d=c&&(u.includes(c)||WKe(c)||(a=n.registered)!=null&&a.call(n,c))?n9(n.highlight(c,s.node.textContent)):n9(n.highlightAuto(s.node.textContent));oie(d).forEach(f=>{const h=o+f.text.length;if(f.classes.length){const p=or.inline(o,h,{class:f.classes.join(" ")});i.push(p)}o=h})}),Ut.create(e,i)}function qKe(e){return typeof e=="function"}function KKe({name:e,lowlight:t,defaultLanguage:n}){if(!["highlight","highlightAuto","listLanguages"].every(i=>qKe(t[i])))throw Error("You should provide an instance of lowlight to use the code-block-lowlight extension");const r=new hn({key:new Fn("lowlight"),state:{init:(i,{doc:s})=>r9({doc:s,name:e,lowlight:t,defaultLanguage:n}),apply:(i,s,a,o)=>{const c=a.selection.$head.parent.type.name,u=o.selection.$head.parent.type.name,d=EA(a.doc,h=>h.type.name===e),f=EA(o.doc,h=>h.type.name===e);return i.docChanged&&([c,u].includes(e)||f.length!==d.length||i.steps.some(h=>h.from!==void 0&&h.to!==void 0&&d.some(p=>p.pos>=h.from&&p.pos+p.node.nodeSize<=h.to)))?r9({doc:i.doc,name:e,lowlight:t,defaultLanguage:n}):s.map(i.mapping,i.doc)}},props:{decorations(i){return r.getState(i)}}});return r}var GKe=CWe.extend({addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),lowlight:{},languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},addProseMirrorPlugins(){var e;return[...((e=this.parent)==null?void 0:e.call(this))||[],KKe({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}}),YKe=GKe,RA,LA;if(typeof WeakMap<"u"){let e=new WeakMap;RA=t=>e.get(t),LA=(t,n)=>(e.set(t,n),n)}else{const e=[];let n=0;RA=r=>{for(let i=0;i<e.length;i+=2)if(e[i]==r)return e[i+1]},LA=(r,i)=>(n==10&&(n=0),e[n++]=r,e[n++]=i)}var Rn=class{constructor(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const r=t%this.width,i=t/this.width|0;let s=r+1,a=i+1;for(let o=1;s<this.width&&this.map[t+o]==n;o++)s++;for(let o=1;a<this.height&&this.map[t+this.width*o]==n;o++)a++;return{left:r,top:i,right:s,bottom:a}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){const{left:r,right:i,top:s,bottom:a}=this.findCell(e);return t=="horiz"?(n<0?r==0:i==this.width)?null:this.map[s*this.width+(n<0?r-1:i)]:(n<0?s==0:a==this.height)?null:this.map[r+this.width*(n<0?s-1:a)]}rectBetween(e,t){const{left:n,right:r,top:i,bottom:s}=this.findCell(e),{left:a,right:o,top:c,bottom:u}=this.findCell(t);return{left:Math.min(n,a),top:Math.min(i,c),right:Math.max(r,o),bottom:Math.max(s,u)}}cellsInRect(e){const t=[],n={};for(let r=e.top;r<e.bottom;r++)for(let i=e.left;i<e.right;i++){const s=r*this.width+i,a=this.map[s];n[a]||(n[a]=!0,!(i==e.left&&i&&this.map[s-1]==a||r==e.top&&r&&this.map[s-this.width]==a)&&t.push(a))}return t}positionAt(e,t,n){for(let r=0,i=0;;r++){const s=i+n.child(r).nodeSize;if(r==e){let a=t+e*this.width;const o=(e+1)*this.width;for(;a<o&&this.map[a]<i;)a++;return a==o?s-1:this.map[a]}i=s}}static get(e){return RA(e)||LA(e,XKe(e))}};function XKe(e){if(e.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+e.type.name);const t=QKe(e),n=e.childCount,r=[];let i=0,s=null;const a=[];for(let u=0,d=t*n;u<d;u++)r[u]=0;for(let u=0,d=0;u<n;u++){const f=e.child(u);d++;for(let m=0;;m++){for(;i<r.length&&r[i]!=0;)i++;if(m==f.childCount)break;const g=f.child(m),{colspan:v,rowspan:y,colwidth:x}=g.attrs;for(let b=0;b<y;b++){if(b+u>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:d,n:y-b});break}const S=i+b*t;for(let E=0;E<v;E++){r[S+E]==0?r[S+E]=d:(s||(s=[])).push({type:"collision",row:u,pos:d,n:v-E});const N=x&&x[E];if(N){const _=(S+E)%t*2,k=a[_];k==null||k!=N&&a[_+1]==1?(a[_]=N,a[_+1]=1):k==N&&a[_+1]++}}}i+=v,d+=g.nodeSize}const h=(u+1)*t;let p=0;for(;i<h;)r[i++]==0&&p++;p&&(s||(s=[])).push({type:"missing",row:u,n:p}),d++}(t===0||n===0)&&(s||(s=[])).push({type:"zero_sized"});const o=new Rn(t,n,r,s);let c=!1;for(let u=0;!c&&u<a.length;u+=2)a[u]!=null&&a[u+1]<n&&(c=!0);return c&&JKe(o,a,e),o}function QKe(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){const i=e.child(r);let s=0;if(n)for(let a=0;a<r;a++){const o=e.child(a);for(let c=0;c<o.childCount;c++){const u=o.child(c);a+u.attrs.rowspan>r&&(s+=u.attrs.colspan)}}for(let a=0;a<i.childCount;a++){const o=i.child(a);s+=o.attrs.colspan,o.attrs.rowspan>1&&(n=!0)}t==-1?t=s:t!=s&&(t=Math.max(t,s))}return t}function JKe(e,t,n){e.problems||(e.problems=[]);const r={};for(let i=0;i<e.map.length;i++){const s=e.map[i];if(r[s])continue;r[s]=!0;const a=n.nodeAt(s);if(!a)throw new RangeError(`No cell with offset ${s} found`);let o=null;const c=a.attrs;for(let u=0;u<c.colspan;u++){const d=(i+u)%e.width,f=t[d*2];f!=null&&(!c.colwidth||c.colwidth[u]!=f)&&((o||(o=ZKe(c)))[u]=f)}o&&e.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:o})}}function ZKe(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function ai(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const r=e.nodes[n],i=r.spec.tableRole;i&&(t[i]=r)}}return t}var Xl=new Fn("selectingCells");function wp(e){for(let t=e.depth-1;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return e.node(0).resolve(e.before(t+1));return null}function eGe(e){for(let t=e.depth;t>0;t--){const n=e.node(t).type.spec.tableRole;if(n==="cell"||n==="header_cell")return e.node(t)}return null}function La(e){const t=e.selection.$head;for(let n=t.depth;n>0;n--)if(t.node(n).type.spec.tableRole=="row")return!0;return!1}function iN(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&t.node.type.spec.tableRole=="cell")return t.$anchor;const n=wp(t.$head)||tGe(t.$head);if(n)return n;throw new RangeError(`No cell found around position ${t.head}`)}function tGe(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n-t.nodeSize)}}function FA(e){return e.parent.type.spec.tableRole=="row"&&!!e.nodeAfter}function nGe(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function a3(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function lie(e,t,n){const r=e.node(-1),i=Rn.get(r),s=e.start(-1),a=i.nextCell(e.pos-s,t,n);return a==null?null:e.node(0).resolve(s+a)}function Id(e,t,n=1){const r={...e,colspan:e.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function cie(e,t,n=1){const r={...e,colspan:e.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<n;i++)r.colwidth.splice(t,0,0)}return r}function rGe(e,t,n){const r=ai(t.type.schema).header_cell;for(let i=0;i<e.height;i++)if(t.nodeAt(e.map[n+i*e.width]).type!=r)return!1;return!0}var nn=class Oo extends tt{constructor(t,n=t){const r=t.node(-1),i=Rn.get(r),s=t.start(-1),a=i.rectBetween(t.pos-s,n.pos-s),o=t.node(0),c=i.cellsInRect(a).filter(d=>d!=n.pos-s);c.unshift(n.pos-s);const u=c.map(d=>{const f=r.nodeAt(d);if(!f)throw RangeError(`No cell with offset ${d} found`);const h=s+d+1;return new Kte(o.resolve(h),o.resolve(h+f.content.size))});super(u[0].$from,u[0].$to,u),this.$anchorCell=t,this.$headCell=n}map(t,n){const r=t.resolve(n.map(this.$anchorCell.pos)),i=t.resolve(n.map(this.$headCell.pos));if(FA(r)&&FA(i)&&a3(r,i)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?Oo.rowSelection(r,i):s&&this.isColSelection()?Oo.colSelection(r,i):new Oo(r,i)}return Qe.between(r,i)}content(){const t=this.$anchorCell.node(-1),n=Rn.get(t),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},a=[];for(let c=i.top;c<i.bottom;c++){const u=[];for(let d=c*n.width+i.left,f=i.left;f<i.right;f++,d++){const h=n.map[d];if(s[h])continue;s[h]=!0;const p=n.findCell(h);let m=t.nodeAt(h);if(!m)throw RangeError(`No cell with offset ${h} found`);const g=i.left-p.left,v=p.right-i.right;if(g>0||v>0){let y=m.attrs;if(g>0&&(y=Id(y,0,g)),v>0&&(y=Id(y,y.colspan-v,v)),p.left<i.left){if(m=m.type.createAndFill(y),!m)throw RangeError(`Could not create cell with attrs ${JSON.stringify(y)}`)}else m=m.type.create(y,m.content)}if(p.top<i.top||p.bottom>i.bottom){const y={...m.attrs,rowspan:Math.min(p.bottom,i.bottom)-Math.max(p.top,i.top)};p.top<i.top?m=m.type.createAndFill(y):m=m.type.create(y,m.content)}u.push(m)}a.push(t.child(c).copy(ve.from(u)))}const o=this.isColSelection()&&this.isRowSelection()?t:a;return new Ie(ve.from(o),1,1)}replace(t,n=Ie.empty){const r=t.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){const{$from:o,$to:c}=i[a],u=t.mapping.slice(r);t.replace(u.map(o.pos),u.map(c.pos),a?Ie.empty:n)}const s=tt.findFrom(t.doc.resolve(t.mapping.slice(r).map(this.to)),-1);s&&t.setSelection(s)}replaceWith(t,n){this.replace(t,new Ie(ve.from(n),0,0))}forEachCell(t){const n=this.$anchorCell.node(-1),r=Rn.get(n),i=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let a=0;a<s.length;a++)t(n.nodeAt(s[a]),i+s[a])}isColSelection(){const t=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(t,n)>0)return!1;const r=t+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(t,n=t){const r=t.node(-1),i=Rn.get(r),s=t.start(-1),a=i.findCell(t.pos-s),o=i.findCell(n.pos-s),c=t.node(0);return a.top<=o.top?(a.top>0&&(t=c.resolve(s+i.map[a.left])),o.bottom<i.height&&(n=c.resolve(s+i.map[i.width*(i.height-1)+o.right-1]))):(o.top>0&&(n=c.resolve(s+i.map[o.left])),a.bottom<i.height&&(t=c.resolve(s+i.map[i.width*(i.height-1)+a.right-1]))),new Oo(t,n)}isRowSelection(){const t=this.$anchorCell.node(-1),n=Rn.get(t),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(i,s)>0)return!1;const a=i+this.$anchorCell.nodeAfter.attrs.colspan,o=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(a,o)==n.width}eq(t){return t instanceof Oo&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,n=t){const r=t.node(-1),i=Rn.get(r),s=t.start(-1),a=i.findCell(t.pos-s),o=i.findCell(n.pos-s),c=t.node(0);return a.left<=o.left?(a.left>0&&(t=c.resolve(s+i.map[a.top*i.width])),o.right<i.width&&(n=c.resolve(s+i.map[i.width*(o.top+1)-1]))):(o.left>0&&(n=c.resolve(s+i.map[o.top*i.width])),a.right<i.width&&(t=c.resolve(s+i.map[i.width*(a.top+1)-1]))),new Oo(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new Oo(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){return new Oo(t.resolve(n),t.resolve(r))}getBookmark(){return new iGe(this.$anchorCell.pos,this.$headCell.pos)}};nn.prototype.visible=!1;tt.jsonID("cell",nn);var iGe=class uie{constructor(t,n){this.anchor=t,this.head=n}map(t){return new uie(t.map(this.anchor),t.map(this.head))}resolve(t){const n=t.resolve(this.anchor),r=t.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&a3(n,r)?new nn(n,r):tt.near(r,1)}};function sGe(e){if(!(e.selection instanceof nn))return null;const t=[];return e.selection.forEachCell((n,r)=>{t.push(or.node(r,r+n.nodeSize,{class:"selectedCell"}))}),Ut.create(e.doc,t)}function aGe({$from:e,$to:t}){if(e.pos==t.pos||e.pos<t.pos-6)return!1;let n=e.pos,r=t.pos,i=e.depth;for(;i>=0&&!(e.after(i+1)<e.end(i));i--,n++);for(let s=t.depth;s>=0&&!(t.before(s+1)>t.start(s));s--,r--);return n==r&&/row|table/.test(e.node(i).type.spec.tableRole)}function oGe({$from:e,$to:t}){let n,r;for(let i=e.depth;i>0;i--){const s=e.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let i=t.depth;i>0;i--){const s=t.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return n!==r&&t.parentOffset===0}function lGe(e,t,n){const r=(t||e).selection,i=(t||e).doc;let s,a;if(r instanceof Ye&&(a=r.node.type.spec.tableRole)){if(a=="cell"||a=="header_cell")s=nn.create(i,r.from);else if(a=="row"){const o=i.resolve(r.from+1);s=nn.rowSelection(o,o)}else if(!n){const o=Rn.get(r.node),c=r.from+1,u=c+o.map[o.width*o.height-1];s=nn.create(i,c+1,u)}}else r instanceof Qe&&aGe(r)?s=Qe.create(i,r.from):r instanceof Qe&&oGe(r)&&(s=Qe.create(i,r.$from.start(),r.$from.end()));return s&&(t||(t=e.tr)).setSelection(s),t}var cGe=new Fn("fix-tables");function die(e,t,n,r){const i=e.childCount,s=t.childCount;e:for(let a=0,o=0;a<s;a++){const c=t.child(a);for(let u=o,d=Math.min(i,a+3);u<d;u++)if(e.child(u)==c){o=u+1,n+=c.nodeSize;continue e}r(c,n),o<i&&e.child(o).sameMarkup(c)?die(e.child(o),c,n+1,r):c.nodesBetween(0,c.content.size,r,n+1),n+=c.nodeSize}}function fie(e,t){let n;const r=(i,s)=>{i.type.spec.tableRole=="table"&&(n=uGe(e,i,s,n))};return t?t.doc!=e.doc&&die(t.doc,e.doc,0,r):e.doc.descendants(r),n}function uGe(e,t,n,r){const i=Rn.get(t);if(!i.problems)return r;r||(r=e.tr);const s=[];for(let c=0;c<i.height;c++)s.push(0);for(let c=0;c<i.problems.length;c++){const u=i.problems[c];if(u.type=="collision"){const d=t.nodeAt(u.pos);if(!d)continue;const f=d.attrs;for(let h=0;h<f.rowspan;h++)s[u.row+h]+=u.n;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,Id(f,f.colspan-u.n,u.n))}else if(u.type=="missing")s[u.row]+=u.n;else if(u.type=="overlong_rowspan"){const d=t.nodeAt(u.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,{...d.attrs,rowspan:d.attrs.rowspan-u.n})}else if(u.type=="colwidth mismatch"){const d=t.nodeAt(u.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,{...d.attrs,colwidth:u.colwidth})}else if(u.type=="zero_sized"){const d=r.mapping.map(n);r.delete(d,d+t.nodeSize)}}let a,o;for(let c=0;c<s.length;c++)s[c]&&(a==null&&(a=c),o=c);for(let c=0,u=n+1;c<i.height;c++){const d=t.child(c),f=u+d.nodeSize,h=s[c];if(h>0){let p="cell";d.firstChild&&(p=d.firstChild.type.spec.tableRole);const m=[];for(let v=0;v<h;v++){const y=ai(e.schema)[p].createAndFill();y&&m.push(y)}const g=(c==0||a==c-1)&&o==c?u+1:f-1;r.insert(r.mapping.map(g),m)}u=f}return r.setMeta(cGe,{fixTables:!0})}function Eo(e){const t=e.selection,n=iN(e),r=n.node(-1),i=n.start(-1),s=Rn.get(r);return{...t instanceof nn?s.rectBetween(t.$anchorCell.pos-i,t.$headCell.pos-i):s.findCell(n.pos-i),tableStart:i,map:s,table:r}}function hie(e,{map:t,tableStart:n,table:r},i){let s=i>0?-1:0;rGe(t,r,i+s)&&(s=i==0||i==t.width?null:0);for(let a=0;a<t.height;a++){const o=a*t.width+i;if(i>0&&i<t.width&&t.map[o-1]==t.map[o]){const c=t.map[o],u=r.nodeAt(c);e.setNodeMarkup(e.mapping.map(n+c),null,cie(u.attrs,i-t.colCount(c))),a+=u.attrs.rowspan-1}else{const c=s==null?ai(r.type.schema).cell:r.nodeAt(t.map[o+s]).type,u=t.positionAt(a,i,r);e.insert(e.mapping.map(n+u),c.createAndFill())}}return e}function dGe(e,t){if(!La(e))return!1;if(t){const n=Eo(e);t(hie(e.tr,n,n.left))}return!0}function fGe(e,t){if(!La(e))return!1;if(t){const n=Eo(e);t(hie(e.tr,n,n.right))}return!0}function hGe(e,{map:t,table:n,tableStart:r},i){const s=e.mapping.maps.length;for(let a=0;a<t.height;){const o=a*t.width+i,c=t.map[o],u=n.nodeAt(c),d=u.attrs;if(i>0&&t.map[o-1]==c||i<t.width-1&&t.map[o+1]==c)e.setNodeMarkup(e.mapping.slice(s).map(r+c),null,Id(d,i-t.colCount(c)));else{const f=e.mapping.slice(s).map(r+c);e.delete(f,f+u.nodeSize)}a+=d.rowspan}}function pGe(e,t){if(!La(e))return!1;if(t){const n=Eo(e),r=e.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let i=n.right-1;hGe(r,n,i),i!=n.left;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=Rn.get(s)}t(r)}return!0}function mGe(e,t,n){var r;const i=ai(t.type.schema).header_cell;for(let s=0;s<e.width;s++)if(((r=t.nodeAt(e.map[s+n*e.width]))==null?void 0:r.type)!=i)return!1;return!0}function pie(e,{map:t,tableStart:n,table:r},i){var s;let a=n;for(let u=0;u<i;u++)a+=r.child(u).nodeSize;const o=[];let c=i>0?-1:0;mGe(t,r,i+c)&&(c=i==0||i==t.height?null:0);for(let u=0,d=t.width*i;u<t.width;u++,d++)if(i>0&&i<t.height&&t.map[d]==t.map[d-t.width]){const f=t.map[d],h=r.nodeAt(f).attrs;e.setNodeMarkup(n+f,null,{...h,rowspan:h.rowspan+1}),u+=h.colspan-1}else{const f=c==null?ai(r.type.schema).cell:(s=r.nodeAt(t.map[d+c*t.width]))==null?void 0:s.type,h=f==null?void 0:f.createAndFill();h&&o.push(h)}return e.insert(a,ai(r.type.schema).row.create(null,o)),e}function gGe(e,t){if(!La(e))return!1;if(t){const n=Eo(e);t(pie(e.tr,n,n.top))}return!0}function vGe(e,t){if(!La(e))return!1;if(t){const n=Eo(e);t(pie(e.tr,n,n.bottom))}return!0}function yGe(e,{map:t,table:n,tableStart:r},i){let s=0;for(let u=0;u<i;u++)s+=n.child(u).nodeSize;const a=s+n.child(i).nodeSize,o=e.mapping.maps.length;e.delete(s+r,a+r);const c=new Set;for(let u=0,d=i*t.width;u<t.width;u++,d++){const f=t.map[d];if(!c.has(f)){if(c.add(f),i>0&&f==t.map[d-t.width]){const h=n.nodeAt(f).attrs;e.setNodeMarkup(e.mapping.slice(o).map(f+r),null,{...h,rowspan:h.rowspan-1}),u+=h.colspan-1}else if(i<t.height&&f==t.map[d+t.width]){const h=n.nodeAt(f),p=h.attrs,m=h.type.create({...p,rowspan:h.attrs.rowspan-1},h.content),g=t.positionAt(i+1,u,n);e.insert(e.mapping.slice(o).map(r+g),m),u+=p.colspan-1}}}}function xGe(e,t){if(!La(e))return!1;if(t){const n=Eo(e),r=e.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let i=n.bottom-1;yGe(r,n,i),i!=n.top;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=Rn.get(n.table)}t(r)}return!0}function i9(e){const t=e.content;return t.childCount==1&&t.child(0).isTextblock&&t.child(0).childCount==0}function bGe({width:e,height:t,map:n},r){let i=r.top*e+r.left,s=i,a=(r.bottom-1)*e+r.left,o=i+(r.right-r.left-1);for(let c=r.top;c<r.bottom;c++){if(r.left>0&&n[s]==n[s-1]||r.right<e&&n[o]==n[o+1])return!0;s+=e,o+=e}for(let c=r.left;c<r.right;c++){if(r.top>0&&n[i]==n[i-e]||r.bottom<t&&n[a]==n[a+e])return!0;i++,a++}return!1}function s9(e,t){const n=e.selection;if(!(n instanceof nn)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Eo(e),{map:i}=r;if(bGe(i,r))return!1;if(t){const s=e.tr,a={};let o=ve.empty,c,u;for(let d=r.top;d<r.bottom;d++)for(let f=r.left;f<r.right;f++){const h=i.map[d*i.width+f],p=r.table.nodeAt(h);if(!(a[h]||!p))if(a[h]=!0,c==null)c=h,u=p;else{i9(p)||(o=o.append(p.content));const m=s.mapping.map(h+r.tableStart);s.delete(m,m+p.nodeSize)}}if(c==null||u==null)return!0;if(s.setNodeMarkup(c+r.tableStart,null,{...cie(u.attrs,u.attrs.colspan,r.right-r.left-u.attrs.colspan),rowspan:r.bottom-r.top}),o.size){const d=c+1+u.content.size,f=i9(u)?c+1:d;s.replaceWith(f+r.tableStart,d+r.tableStart,o)}s.setSelection(new nn(s.doc.resolve(c+r.tableStart))),t(s)}return!0}function a9(e,t){const n=ai(e.schema);return wGe(({node:r})=>n[r.type.spec.tableRole])(e,t)}function wGe(e){return(t,n)=>{var r;const i=t.selection;let s,a;if(i instanceof nn){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;s=i.$anchorCell.nodeAfter,a=i.$anchorCell.pos}else{if(s=eGe(i.$from),!s)return!1;a=(r=wp(i.$from))==null?void 0:r.pos}if(s==null||a==null||s.attrs.colspan==1&&s.attrs.rowspan==1)return!1;if(n){let o=s.attrs;const c=[],u=o.colwidth;o.rowspan>1&&(o={...o,rowspan:1}),o.colspan>1&&(o={...o,colspan:1});const d=Eo(t),f=t.tr;for(let p=0;p<d.right-d.left;p++)c.push(u?{...o,colwidth:u&&u[p]?[u[p]]:null}:o);let h;for(let p=d.top;p<d.bottom;p++){let m=d.map.positionAt(p,d.left,d.table);p==d.top&&(m+=s.nodeSize);for(let g=d.left,v=0;g<d.right;g++,v++)g==d.left&&p==d.top||f.insert(h=f.mapping.map(m+d.tableStart,1),e({node:s,row:p,col:g}).createAndFill(c[v]))}f.setNodeMarkup(a,e({node:s,row:d.top,col:d.left}),c[0]),i instanceof nn&&f.setSelection(new nn(f.doc.resolve(i.$anchorCell.pos),h?f.doc.resolve(h):void 0)),n(f)}return!0}}function EGe(e,t){return function(n,r){if(!La(n))return!1;const i=iN(n);if(i.nodeAfter.attrs[e]===t)return!1;if(r){const s=n.tr;n.selection instanceof nn?n.selection.forEachCell((a,o)=>{a.attrs[e]!==t&&s.setNodeMarkup(o,null,{...a.attrs,[e]:t})}):s.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[e]:t}),r(s)}return!0}}function SGe(e){return function(t,n){if(!La(t))return!1;if(n){const r=ai(t.schema),i=Eo(t),s=t.tr,a=i.map.cellsInRect(e=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:e=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),o=a.map(c=>i.table.nodeAt(c));for(let c=0;c<a.length;c++)o[c].type==r.header_cell&&s.setNodeMarkup(i.tableStart+a[c],r.cell,o[c].attrs);if(s.steps.length==0)for(let c=0;c<a.length;c++)s.setNodeMarkup(i.tableStart+a[c],r.header_cell,o[c].attrs);n(s)}return!0}}function o9(e,t,n){const r=t.map.cellsInRect({left:0,top:0,right:e=="row"?t.map.width:1,bottom:e=="column"?t.map.height:1});for(let i=0;i<r.length;i++){const s=t.table.nodeAt(r[i]);if(s&&s.type!==n.header_cell)return!1}return!0}function b0(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?SGe(e):function(n,r){if(!La(n))return!1;if(r){const i=ai(n.schema),s=Eo(n),a=n.tr,o=o9("row",s,i),c=o9("column",s,i),d=(e==="column"?o:e==="row"?c:!1)?1:0,f=e=="column"?{left:0,top:d,right:1,bottom:s.map.height}:e=="row"?{left:d,top:0,right:s.map.width,bottom:1}:s,h=e=="column"?c?i.cell:i.header_cell:e=="row"?o?i.cell:i.header_cell:i.cell;s.map.cellsInRect(f).forEach(p=>{const m=p+s.tableStart,g=a.doc.nodeAt(m);g&&a.setNodeMarkup(m,h,g.attrs)}),r(a)}return!0}}b0("row",{useDeprecatedLogic:!0});b0("column",{useDeprecatedLogic:!0});var NGe=b0("cell",{useDeprecatedLogic:!0});function _Ge(e,t){if(t<0){const n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(let r=e.index(-1)-1,i=e.before();r>=0;r--){const s=e.node(-1).child(r),a=s.lastChild;if(a)return i-1-a.nodeSize;i-=s.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;const n=e.node(-1);for(let r=e.indexAfter(-1),i=e.after();r<n.childCount;r++){const s=n.child(r);if(s.childCount)return i+1;i+=s.nodeSize}}return null}function l9(e){return function(t,n){if(!La(t))return!1;const r=_Ge(iN(t),e);if(r==null)return!1;if(n){const i=t.doc.resolve(r);n(t.tr.setSelection(Qe.between(i,nGe(i))).scrollIntoView())}return!0}}function kGe(e,t){const n=e.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function qy(e,t){const n=e.selection;if(!(n instanceof nn))return!1;if(t){const r=e.tr,i=ai(e.schema).cell.createAndFill().content;n.forEachCell((s,a)=>{s.content.eq(i)||r.replace(r.mapping.map(a+1),r.mapping.map(a+s.nodeSize-1),new Ie(i,0,0))}),r.docChanged&&t(r)}return!0}function CGe(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:r}=e;for(;t.childCount==1&&(n>0&&r>0||t.child(0).type.spec.tableRole=="table");)n--,r--,t=t.child(0).content;const i=t.child(0),s=i.type.spec.tableRole,a=i.type.schema,o=[];if(s=="row")for(let c=0;c<t.childCount;c++){let u=t.child(c).content;const d=c?0:Math.max(0,n-1),f=c<t.childCount-1?0:Math.max(0,r-1);(d||f)&&(u=BA(ai(a).row,new Ie(u,d,f)).content),o.push(u)}else if(s=="cell"||s=="header_cell")o.push(n||r?BA(ai(a).row,new Ie(t,n,r)).content:t);else return null;return TGe(a,o)}function TGe(e,t){const n=[];for(let i=0;i<t.length;i++){const s=t[i];for(let a=s.childCount-1;a>=0;a--){const{rowspan:o,colspan:c}=s.child(a).attrs;for(let u=i;u<i+o;u++)n[u]=(n[u]||0)+c}}let r=0;for(let i=0;i<n.length;i++)r=Math.max(r,n[i]);for(let i=0;i<n.length;i++)if(i>=t.length&&t.push(ve.empty),n[i]<r){const s=ai(e).cell.createAndFill(),a=[];for(let o=n[i];o<r;o++)a.push(s);t[i]=t[i].append(ve.from(a))}return{height:t.length,width:r,rows:t}}function BA(e,t){const n=e.createAndFill();return new bM(n).replace(0,n.content.size,t).doc}function AGe({width:e,height:t,rows:n},r,i){if(e!=r){const s=[],a=[];for(let o=0;o<n.length;o++){const c=n[o],u=[];for(let d=s[o]||0,f=0;d<r;f++){let h=c.child(f%c.childCount);d+h.attrs.colspan>r&&(h=h.type.createChecked(Id(h.attrs,h.attrs.colspan,d+h.attrs.colspan-r),h.content)),u.push(h),d+=h.attrs.colspan;for(let p=1;p<h.attrs.rowspan;p++)s[o+p]=(s[o+p]||0)+h.attrs.colspan}a.push(ve.from(u))}n=a,e=r}if(t!=i){const s=[];for(let a=0,o=0;a<i;a++,o++){const c=[],u=n[o%t];for(let d=0;d<u.childCount;d++){let f=u.child(d);a+f.attrs.rowspan>i&&(f=f.type.create({...f.attrs,rowspan:Math.max(1,i-f.attrs.rowspan)},f.content)),c.push(f)}s.push(ve.from(c))}n=s,t=i}return{width:e,height:t,rows:n}}function jGe(e,t,n,r,i,s,a){const o=e.doc.type.schema,c=ai(o);let u,d;if(i>t.width)for(let f=0,h=0;f<t.height;f++){const p=n.child(f);h+=p.nodeSize;const m=[];let g;p.lastChild==null||p.lastChild.type==c.cell?g=u||(u=c.cell.createAndFill()):g=d||(d=c.header_cell.createAndFill());for(let v=t.width;v<i;v++)m.push(g);e.insert(e.mapping.slice(a).map(h-1+r),m)}if(s>t.height){const f=[];for(let m=0,g=(t.height-1)*t.width;m<Math.max(t.width,i);m++){const v=m>=t.width?!1:n.nodeAt(t.map[g+m]).type==c.header_cell;f.push(v?d||(d=c.header_cell.createAndFill()):u||(u=c.cell.createAndFill()))}const h=c.row.create(null,ve.from(f)),p=[];for(let m=t.height;m<s;m++)p.push(h);e.insert(e.mapping.slice(a).map(r+n.nodeSize-2),p)}return!!(u||d)}function c9(e,t,n,r,i,s,a,o){if(a==0||a==t.height)return!1;let c=!1;for(let u=i;u<s;u++){const d=a*t.width+u,f=t.map[d];if(t.map[d-t.width]==f){c=!0;const h=n.nodeAt(f),{top:p,left:m}=t.findCell(f);e.setNodeMarkup(e.mapping.slice(o).map(f+r),null,{...h.attrs,rowspan:a-p}),e.insert(e.mapping.slice(o).map(t.positionAt(a,m,n)),h.type.createAndFill({...h.attrs,rowspan:p+h.attrs.rowspan-a})),u+=h.attrs.colspan-1}}return c}function u9(e,t,n,r,i,s,a,o){if(a==0||a==t.width)return!1;let c=!1;for(let u=i;u<s;u++){const d=u*t.width+a,f=t.map[d];if(t.map[d-1]==f){c=!0;const h=n.nodeAt(f),p=t.colCount(f),m=e.mapping.slice(o).map(f+r);e.setNodeMarkup(m,null,Id(h.attrs,a-p,h.attrs.colspan-(a-p))),e.insert(m+h.nodeSize,h.type.createAndFill(Id(h.attrs,0,a-p))),u+=h.attrs.rowspan-1}}return c}function d9(e,t,n,r,i){let s=n?e.doc.nodeAt(n-1):e.doc;if(!s)throw new Error("No table found");let a=Rn.get(s);const{top:o,left:c}=r,u=c+i.width,d=o+i.height,f=e.tr;let h=0;function p(){if(s=n?f.doc.nodeAt(n-1):f.doc,!s)throw new Error("No table found");a=Rn.get(s),h=f.mapping.maps.length}jGe(f,a,s,n,u,d,h)&&p(),c9(f,a,s,n,c,u,o,h)&&p(),c9(f,a,s,n,c,u,d,h)&&p(),u9(f,a,s,n,o,d,c,h)&&p(),u9(f,a,s,n,o,d,u,h)&&p();for(let m=o;m<d;m++){const g=a.positionAt(m,c,s),v=a.positionAt(m,u,s);f.replace(f.mapping.slice(h).map(g+n),f.mapping.slice(h).map(v+n),new Ie(i.rows[m-o],0,0))}p(),f.setSelection(new nn(f.doc.resolve(n+a.positionAt(o,c,s)),f.doc.resolve(n+a.positionAt(d-1,u-1,s)))),t(f)}var OGe=OM({ArrowLeft:Ky("horiz",-1),ArrowRight:Ky("horiz",1),ArrowUp:Ky("vert",-1),ArrowDown:Ky("vert",1),"Shift-ArrowLeft":Gy("horiz",-1),"Shift-ArrowRight":Gy("horiz",1),"Shift-ArrowUp":Gy("vert",-1),"Shift-ArrowDown":Gy("vert",1),Backspace:qy,"Mod-Backspace":qy,Delete:qy,"Mod-Delete":qy});function Mx(e,t,n){return n.eq(e.selection)?!1:(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function Ky(e,t){return(n,r,i)=>{if(!i)return!1;const s=n.selection;if(s instanceof nn)return Mx(n,r,tt.near(s.$headCell,t));if(e!="horiz"&&!s.empty)return!1;const a=mie(i,e,t);if(a==null)return!1;if(e=="horiz")return Mx(n,r,tt.near(n.doc.resolve(s.head+t),t));{const o=n.doc.resolve(a),c=lie(o,e,t);let u;return c?u=tt.near(c,1):t<0?u=tt.near(n.doc.resolve(o.before(-1)),-1):u=tt.near(n.doc.resolve(o.after(-1)),1),Mx(n,r,u)}}}function Gy(e,t){return(n,r,i)=>{if(!i)return!1;const s=n.selection;let a;if(s instanceof nn)a=s;else{const c=mie(i,e,t);if(c==null)return!1;a=new nn(n.doc.resolve(c))}const o=lie(a.$headCell,e,t);return o?Mx(n,r,new nn(a.$anchorCell,o)):!1}}function PGe(e,t){const n=e.state.doc,r=wp(n.resolve(t));return r?(e.dispatch(e.state.tr.setSelection(new nn(r))),!0):!1}function IGe(e,t,n){if(!La(e.state))return!1;let r=CGe(n);const i=e.state.selection;if(i instanceof nn){r||(r={width:1,height:1,rows:[ve.from(BA(ai(e.state.schema).cell,n))]});const s=i.$anchorCell.node(-1),a=i.$anchorCell.start(-1),o=Rn.get(s).rectBetween(i.$anchorCell.pos-a,i.$headCell.pos-a);return r=AGe(r,o.right-o.left,o.bottom-o.top),d9(e.state,e.dispatch,a,o,r),!0}else if(r){const s=iN(e.state),a=s.start(-1);return d9(e.state,e.dispatch,a,Rn.get(s.node(-1)).findCell(s.pos-a),r),!0}else return!1}function DGe(e,t){var n;if(t.ctrlKey||t.metaKey)return;const r=f9(e,t.target);let i;if(t.shiftKey&&e.state.selection instanceof nn)s(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&(i=wp(e.state.selection.$anchor))!=null&&((n=Hk(e,t))==null?void 0:n.pos)!=i.pos)s(i,t),t.preventDefault();else if(!r)return;function s(c,u){let d=Hk(e,u);const f=Xl.getState(e.state)==null;if(!d||!a3(c,d))if(f)d=c;else return;const h=new nn(c,d);if(f||!e.state.selection.eq(h)){const p=e.state.tr.setSelection(h);f&&p.setMeta(Xl,c.pos),e.dispatch(p)}}function a(){e.root.removeEventListener("mouseup",a),e.root.removeEventListener("dragstart",a),e.root.removeEventListener("mousemove",o),Xl.getState(e.state)!=null&&e.dispatch(e.state.tr.setMeta(Xl,-1))}function o(c){const u=c,d=Xl.getState(e.state);let f;if(d!=null)f=e.state.doc.resolve(d);else if(f9(e,u.target)!=r&&(f=Hk(e,t),!f))return a();f&&s(f,u)}e.root.addEventListener("mouseup",a),e.root.addEventListener("dragstart",a),e.root.addEventListener("mousemove",o)}function mie(e,t,n){if(!(e.state.selection instanceof Qe))return null;const{$head:r}=e.state.selection;for(let i=r.depth-1;i>=0;i--){const s=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const o=r.before(i),c=t=="vert"?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(c)?o:null}}return null}function f9(e,t){for(;t&&t!=e.dom;t=t.parentNode)if(t.nodeName=="TD"||t.nodeName=="TH")return t;return null}function Hk(e,t){const n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?wp(e.state.doc.resolve(n.pos)):null}var MGe=class{constructor(t,n){this.node=t,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${n}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),$A(t,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,$A(t,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function $A(e,t,n,r,i,s){var a;let o=0,c=!0,u=t.firstChild;const d=e.firstChild;if(d){for(let f=0,h=0;f<d.childCount;f++){const{colspan:p,colwidth:m}=d.child(f).attrs;for(let g=0;g<p;g++,h++){const v=i==h?s:m&&m[g],y=v?v+"px":"";if(o+=v||r,v||(c=!1),u)u.style.width!=y&&(u.style.width=y),u=u.nextSibling;else{const x=document.createElement("col");x.style.width=y,t.appendChild(x)}}}for(;u;){const f=u.nextSibling;(a=u.parentNode)==null||a.removeChild(u),u=f}c?(n.style.width=o+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=o+"px")}}var ss=new Fn("tableColumnResizing");function RGe({handleWidth:e=5,cellMinWidth:t=25,defaultCellMinWidth:n=100,View:r=MGe,lastColumnResizable:i=!0}={}){const s=new hn({key:ss,state:{init(a,o){var c,u;const d=(u=(c=s.spec)==null?void 0:c.props)==null?void 0:u.nodeViews,f=ai(o.schema).table.name;return r&&d&&(d[f]=(h,p)=>new r(h,n,p)),new LGe(-1,!1)},apply(a,o){return o.apply(a)}},props:{attributes:a=>{const o=ss.getState(a);return o&&o.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(a,o)=>{FGe(a,o,e,i)},mouseleave:a=>{BGe(a)},mousedown:(a,o)=>{$Ge(a,o,t,n)}},decorations:a=>{const o=ss.getState(a);if(o&&o.activeHandle>-1)return WGe(a,o.activeHandle)},nodeViews:{}}});return s}var LGe=class Rx{constructor(t,n){this.activeHandle=t,this.dragging=n}apply(t){const n=this,r=t.getMeta(ss);if(r&&r.setHandle!=null)return new Rx(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new Rx(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&t.docChanged){let i=t.mapping.map(n.activeHandle,-1);return FA(t.doc.resolve(i))||(i=-1),new Rx(i,n.dragging)}return n}};function FGe(e,t,n,r){if(!e.editable)return;const i=ss.getState(e.state);if(i&&!i.dragging){const s=zGe(t.target);let a=-1;if(s){const{left:o,right:c}=s.getBoundingClientRect();t.clientX-o<=n?a=h9(e,t,"left",n):c-t.clientX<=n&&(a=h9(e,t,"right",n))}if(a!=i.activeHandle){if(!r&&a!==-1){const o=e.state.doc.resolve(a),c=o.node(-1),u=Rn.get(c),d=o.start(-1);if(u.colCount(o.pos-d)+o.nodeAfter.attrs.colspan-1==u.width-1)return}gie(e,a)}}}function BGe(e){if(!e.editable)return;const t=ss.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&gie(e,-1)}function $Ge(e,t,n,r){var i;if(!e.editable)return!1;const s=(i=e.dom.ownerDocument.defaultView)!=null?i:window,a=ss.getState(e.state);if(!a||a.activeHandle==-1||a.dragging)return!1;const o=e.state.doc.nodeAt(a.activeHandle),c=UGe(e,a.activeHandle,o.attrs);e.dispatch(e.state.tr.setMeta(ss,{setDragging:{startX:t.clientX,startWidth:c}}));function u(f){s.removeEventListener("mouseup",u),s.removeEventListener("mousemove",d);const h=ss.getState(e.state);h!=null&&h.dragging&&(HGe(e,h.activeHandle,p9(h.dragging,f,n)),e.dispatch(e.state.tr.setMeta(ss,{setDragging:null})))}function d(f){if(!f.which)return u(f);const h=ss.getState(e.state);if(h&&h.dragging){const p=p9(h.dragging,f,n);m9(e,h.activeHandle,p,r)}}return m9(e,a.activeHandle,c,r),s.addEventListener("mouseup",u),s.addEventListener("mousemove",d),t.preventDefault(),!0}function UGe(e,t,{colspan:n,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const s=e.domAtPos(t);let o=s.node.childNodes[s.offset].offsetWidth,c=n;if(r)for(let u=0;u<n;u++)r[u]&&(o-=r[u],c--);return o/c}function zGe(e){for(;e&&e.nodeName!="TD"&&e.nodeName!="TH";)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}function h9(e,t,n,r){const i=n=="right"?-r:r,s=e.posAtCoords({left:t.clientX+i,top:t.clientY});if(!s)return-1;const{pos:a}=s,o=wp(e.state.doc.resolve(a));if(!o)return-1;if(n=="right")return o.pos;const c=Rn.get(o.node(-1)),u=o.start(-1),d=c.map.indexOf(o.pos-u);return d%c.width==0?-1:u+c.map[d-1]}function p9(e,t,n){const r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function gie(e,t){e.dispatch(e.state.tr.setMeta(ss,{setHandle:t}))}function HGe(e,t,n){const r=e.state.doc.resolve(t),i=r.node(-1),s=Rn.get(i),a=r.start(-1),o=s.colCount(r.pos-a)+r.nodeAfter.attrs.colspan-1,c=e.state.tr;for(let u=0;u<s.height;u++){const d=u*s.width+o;if(u&&s.map[d]==s.map[d-s.width])continue;const f=s.map[d],h=i.nodeAt(f).attrs,p=h.colspan==1?0:o-s.colCount(f);if(h.colwidth&&h.colwidth[p]==n)continue;const m=h.colwidth?h.colwidth.slice():VGe(h.colspan);m[p]=n,c.setNodeMarkup(a+f,null,{...h,colwidth:m})}c.docChanged&&e.dispatch(c)}function m9(e,t,n,r){const i=e.state.doc.resolve(t),s=i.node(-1),a=i.start(-1),o=Rn.get(s).colCount(i.pos-a)+i.nodeAfter.attrs.colspan-1;let c=e.domAtPos(i.start(-1)).node;for(;c&&c.nodeName!="TABLE";)c=c.parentNode;c&&$A(s,c.firstChild,c,r,o,n)}function VGe(e){return Array(e).fill(0)}function WGe(e,t){var n;const r=[],i=e.doc.resolve(t),s=i.node(-1);if(!s)return Ut.empty;const a=Rn.get(s),o=i.start(-1),c=a.colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1;for(let u=0;u<a.height;u++){const d=c+u*a.width;if((c==a.width-1||a.map[d]!=a.map[d+1])&&(u==0||a.map[d]!=a.map[d-a.width])){const f=a.map[d],h=o+f+s.nodeAt(f).nodeSize-1,p=document.createElement("div");p.className="column-resize-handle",(n=ss.getState(e))!=null&&n.dragging&&r.push(or.node(o+f,o+f+s.nodeAt(f).nodeSize,{class:"column-resize-dragging"})),r.push(or.widget(h,p))}}return Ut.create(e.doc,r)}function qGe({allowTableNodeSelection:e=!1}={}){return new hn({key:Xl,state:{init(){return null},apply(t,n){const r=t.getMeta(Xl);if(r!=null)return r==-1?null:r;if(n==null||!t.docChanged)return n;const{deleted:i,pos:s}=t.mapping.mapResult(n);return i?null:s}},props:{decorations:sGe,handleDOMEvents:{mousedown:DGe},createSelectionBetween(t){return Xl.getState(t.state)!=null?t.state.selection:null},handleTripleClick:PGe,handleKeyDown:OGe,handlePaste:IGe},appendTransaction(t,n,r){return lGe(r,fie(r,n),e)}})}var vie=Ir.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?t.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:e}){return["td",rn(this.options.HTMLAttributes,e),0]}}),yie=Ir.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?t.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:e}){return["th",rn(this.options.HTMLAttributes,e),0]}}),xie=Ir.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:e}){return["tr",rn(this.options.HTMLAttributes,e),0]}});function UA(e,t){return t?["width",`${Math.max(t,e)}px`]:["min-width",`${e}px`]}function g9(e,t,n,r,i,s){var a;let o=0,c=!0,u=t.firstChild;const d=e.firstChild;if(d!==null)for(let f=0,h=0;f<d.childCount;f+=1){const{colspan:p,colwidth:m}=d.child(f).attrs;for(let g=0;g<p;g+=1,h+=1){const v=i===h?s:m&&m[g],y=v?`${v}px`:"";if(o+=v||r,v||(c=!1),u){if(u.style.width!==y){const[x,b]=UA(r,v);u.style.setProperty(x,b)}u=u.nextSibling}else{const x=document.createElement("col"),[b,S]=UA(r,v);x.style.setProperty(b,S),t.appendChild(x)}}}for(;u;){const f=u.nextSibling;(a=u.parentNode)==null||a.removeChild(u),u=f}c?(n.style.width=`${o}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${o}px`)}var KGe=class{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),g9(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!==this.node.type?!1:(this.node=e,g9(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type==="attributes"&&(e.target===this.table||this.colgroup.contains(e.target))}};function GGe(e,t,n,r){let i=0,s=!0;const a=[],o=e.firstChild;if(!o)return{};for(let f=0,h=0;f<o.childCount;f+=1){const{colspan:p,colwidth:m}=o.child(f).attrs;for(let g=0;g<p;g+=1,h+=1){const v=n===h?r:m&&m[g];i+=v||t,v||(s=!1);const[y,x]=UA(t,v);a.push(["col",{style:`${y}: ${x}`}])}}const c=s?`${i}px`:"",u=s?"":`${i}px`;return{colgroup:["colgroup",{},...a],tableWidth:c,tableMinWidth:u}}function v9(e,t){return e.createAndFill()}function YGe(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;const t={};return Object.keys(e.nodes).forEach(n=>{const r=e.nodes[n];r.spec.tableRole&&(t[r.spec.tableRole]=r)}),e.cached.tableNodeTypes=t,t}function XGe(e,t,n,r,i){const s=YGe(e),a=[],o=[];for(let u=0;u<n;u+=1){const d=v9(s.cell);if(d&&o.push(d),r){const f=v9(s.header_cell);f&&a.push(f)}}const c=[];for(let u=0;u<t;u+=1)c.push(s.row.createChecked(null,r&&u===0?a:o));return s.table.createChecked(null,c)}function QGe(e){return e instanceof nn}var Yy=({editor:e})=>{const{selection:t}=e.state;if(!QGe(t))return!1;let n=0;const r=Wne(t.ranges[0].$from,s=>s.type.name==="table");return r==null||r.node.descendants(s=>{if(s.type.name==="table")return!1;["tableCell","tableHeader"].includes(s.type.name)&&(n+=1)}),n===t.ranges.length?(e.commands.deleteTable(),!0):!1},bie=Ir.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:KGe,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:e,HTMLAttributes:t}){const{colgroup:n,tableWidth:r,tableMinWidth:i}=GGe(e,this.options.cellMinWidth);return["table",rn(this.options.HTMLAttributes,t,{style:r?`width: ${r}`:`min-width: ${i}`}),n,["tbody",0]]},addCommands(){return{insertTable:({rows:e=3,cols:t=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:i,editor:s})=>{const a=XGe(s.schema,e,t,n);if(i){const o=r.selection.from+1;r.replaceSelectionWith(a).scrollIntoView().setSelection(Qe.near(r.doc.resolve(o)))}return!0},addColumnBefore:()=>({state:e,dispatch:t})=>dGe(e,t),addColumnAfter:()=>({state:e,dispatch:t})=>fGe(e,t),deleteColumn:()=>({state:e,dispatch:t})=>pGe(e,t),addRowBefore:()=>({state:e,dispatch:t})=>gGe(e,t),addRowAfter:()=>({state:e,dispatch:t})=>vGe(e,t),deleteRow:()=>({state:e,dispatch:t})=>xGe(e,t),deleteTable:()=>({state:e,dispatch:t})=>kGe(e,t),mergeCells:()=>({state:e,dispatch:t})=>s9(e,t),splitCell:()=>({state:e,dispatch:t})=>a9(e,t),toggleHeaderColumn:()=>({state:e,dispatch:t})=>b0("column")(e,t),toggleHeaderRow:()=>({state:e,dispatch:t})=>b0("row")(e,t),toggleHeaderCell:()=>({state:e,dispatch:t})=>NGe(e,t),mergeOrSplit:()=>({state:e,dispatch:t})=>s9(e,t)?!0:a9(e,t),setCellAttribute:(e,t)=>({state:n,dispatch:r})=>EGe(e,t)(n,r),goToNextCell:()=>({state:e,dispatch:t})=>l9(1)(e,t),goToPreviousCell:()=>({state:e,dispatch:t})=>l9(-1)(e,t),fixTables:()=>({state:e,dispatch:t})=>(t&&fie(e),!0),setCellSelection:e=>({tr:t,dispatch:n})=>{if(n){const r=nn.create(t.doc,e.anchorCell,e.headCell);t.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:Yy,"Mod-Backspace":Yy,Delete:Yy,"Mod-Delete":Yy}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[RGe({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],qGe({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(e){const t={name:e.name,options:e.options,storage:e.storage};return{tableRole:jt(Ke(e,"tableRole",t))}}});Bn.create({name:"tableKit",addExtensions(){const e=[];return this.options.table!==!1&&e.push(bie.configure(this.options.table)),this.options.tableCell!==!1&&e.push(vie.configure(this.options.tableCell)),this.options.tableHeader!==!1&&e.push(yie.configure(this.options.tableHeader)),this.options.tableRow!==!1&&e.push(xie.configure(this.options.tableRow)),e}});var JGe=Bn.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(n=>t.updateAttributes(n,{textAlign:e})).every(n=>n):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).every(t=>t),toggleTextAlign:e=>({editor:t,commands:n})=>this.options.alignments.includes(e)?t.isActive({textAlign:e})?n.unsetTextAlign():n.setTextAlign(e):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),ZGe=JGe,eYe=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,tYe=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,nYe=cu.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:e=>e.getAttribute("data-color")||e.style.backgroundColor,renderHTML:e=>e.color?{"data-color":e.color,style:`background-color: ${e.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:e}){return["mark",rn(this.options.HTMLAttributes,e),0]},addCommands(){return{setHighlight:e=>({commands:t})=>t.setMark(this.name,e),toggleHighlight:e=>({commands:t})=>t.toggleMark(this.name,e),unsetHighlight:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Pd({find:eYe,type:this.type})]},addPasteRules(){return[Bc({find:tYe,type:this.type})]}}),rYe=nYe,iYe=Hre,sYe=zre;function aYe(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",a="(?!struct)("+r+"|"+t.optional(i)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",o={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},h={className:"title",begin:t.optional(i)+e.IDENT_RE,relevance:0},p=t.optional(i)+e.IDENT_RE+"\\s*\\(",m=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],g=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],v=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],y=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],S={type:g,keyword:m,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:v},E={className:"function.dispatch",relevance:0,keywords:{_hint:y},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},N=[E,f,o,n,e.C_BLOCK_COMMENT_MODE,d,u],_={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:S,contains:N.concat([{begin:/\(/,end:/\)/,keywords:S,contains:N.concat(["self"]),relevance:0}]),relevance:0},k={className:"function",begin:"("+a+"[\\*&\\s]+)+"+p,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:S,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:S,relevance:0},{begin:p,returnBegin:!0,contains:[h],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[u,d]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:S,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,u,d,o,{begin:/\(/,end:/\)/,keywords:S,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,u,d,o]}]},o,n,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:S,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(_,k,E,N,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:S,contains:["self",o]},{begin:e.IDENT_RE+"::",keywords:S},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function oYe(e){const t={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},n=aYe(e),r=n.keywords;return r.type=[...r.type,...t.type],r.literal=[...r.literal,...t.literal],r.built_in=[...r.built_in,...t.built_in],r._hints=t._hints,n.name="Arduino",n.aliases=["ino"],n.supersetOf="cpp",n}function lYe(e){const t=e.regex,n={},r={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:t.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},r]});const i={className:"subst",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]},s=e.inherit(e.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),a={begin:/<<-?\s*(?=\w+)/,starts:{contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},o={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,n,i]};i.contains.push(o);const c={match:/\\"/},u={className:"string",begin:/'/,end:/'/},d={match:/\\'/},f={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},e.NUMBER_MODE,n]},h=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],p=e.SHEBANG({binary:`(${h.join("|")})`,relevance:10}),m={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},g=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],v=["true","false"],y={match:/(\/[a-z._-]+)+/},x=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],b=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],S=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],E=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:g,literal:v,built_in:[...x,...b,"set","shopt",...S,...E]},contains:[p,e.SHEBANG(),m,f,s,a,y,o,c,u,d,n]}}function cYe(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",a="("+r+"|"+t.optional(i)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",o={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},h={className:"title",begin:t.optional(i)+e.IDENT_RE,relevance:0},p=t.optional(i)+e.IDENT_RE+"\\s*\\(",v={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},y=[f,o,n,e.C_BLOCK_COMMENT_MODE,d,u],x={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:v,contains:y.concat([{begin:/\(/,end:/\)/,keywords:v,contains:y.concat(["self"]),relevance:0}]),relevance:0},b={begin:"("+a+"[\\*&\\s]+)+"+p,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:v,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:v,relevance:0},{begin:p,returnBegin:!0,contains:[e.inherit(h,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,u,d,o,{begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,u,d,o]}]},o,n,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C",aliases:["h"],keywords:v,disableAutodetect:!0,illegal:"</",contains:[].concat(x,b,y,[f,{begin:e.IDENT_RE+"::",keywords:v},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},e.TITLE_MODE]}]),exports:{preprocessor:f,strings:u,keywords:v}}}function uYe(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",a="(?!struct)("+r+"|"+t.optional(i)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",o={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},h={className:"title",begin:t.optional(i)+e.IDENT_RE,relevance:0},p=t.optional(i)+e.IDENT_RE+"\\s*\\(",m=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],g=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],v=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],y=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],S={type:g,keyword:m,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:v},E={className:"function.dispatch",relevance:0,keywords:{_hint:y},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},N=[E,f,o,n,e.C_BLOCK_COMMENT_MODE,d,u],_={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:S,contains:N.concat([{begin:/\(/,end:/\)/,keywords:S,contains:N.concat(["self"]),relevance:0}]),relevance:0},k={className:"function",begin:"("+a+"[\\*&\\s]+)+"+p,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:S,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:S,relevance:0},{begin:p,returnBegin:!0,contains:[h],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[u,d]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:S,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,u,d,o,{begin:/\(/,end:/\)/,keywords:S,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,u,d,o]}]},o,n,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:S,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(_,k,E,N,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:S,contains:["self",o]},{begin:e.IDENT_RE+"::",keywords:S},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function dYe(e){const t=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],n=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],r=["default","false","null","true"],i=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],s=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],a={keyword:i.concat(s),built_in:t,literal:r},o=e.inherit(e.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),c={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},u={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},d={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},f=e.inherit(d,{illegal:/\n/}),h={className:"subst",begin:/\{/,end:/\}/,keywords:a},p=e.inherit(h,{illegal:/\n/}),m={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},e.BACKSLASH_ESCAPE,p]},g={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},h]},v=e.inherit(g,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},p]});h.contains=[g,m,d,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,c,e.C_BLOCK_COMMENT_MODE],p.contains=[v,m,f,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,c,e.inherit(e.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const y={variants:[u,g,m,d,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},x={begin:"<",end:">",contains:[{beginKeywords:"in out"},o]},b=e.IDENT_RE+"(<"+e.IDENT_RE+"(\\s*,\\s*"+e.IDENT_RE+")*>)?(\\[\\])?",S={begin:"@"+e.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:a,illegal:/::/,contains:[e.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},y,c,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},o,x,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[o,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[o,x,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+b+"\\s+)+"+e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:a,contains:[{beginKeywords:n.join(" "),relevance:0},{begin:e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[e.TITLE_MODE,x],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,relevance:0,contains:[y,c,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},S]}}const fYe=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),hYe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],pYe=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],mYe=[...hYe,...pYe],gYe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),vYe=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),yYe=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),xYe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function bYe(e){const t=e.regex,n=fYe(e),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},i="and or not only",s=/@-?\w[\w]*(-\w+)*/,a="[a-zA-Z-][a-zA-Z0-9_-]*",o=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,r,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+a,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+vYe.join("|")+")"},{begin:":(:)?("+yYe.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+xYe.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...o,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...o,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:s},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:i,attribute:gYe.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...o,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+mYe.join("|")+")\\b"}]}}function wYe(e){const t=e.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:t.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:t.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function EYe(e){const s={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:s,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:s,illegal:/["']/}]}]}}function SYe(e){const t=e.regex,n=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[e.HASH_COMMENT_MODE,e.QUOTE_STRING_MODE,e.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:t.concat(n,t.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function NYe(e){const t=e.regex,n={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:e.NUMBER_RE}]},r=e.COMMENT();r.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const i={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},s={className:"literal",begin:/\bon|off|true|false|yes|no\b/},a={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},o={begin:/\[/,end:/\]/,contains:[r,s,i,a,n,"self"],relevance:0},c=/[A-Za-z0-9_-]+/,u=/"(\\"|[^"])*"/,d=/'[^']*'/,f=t.either(c,u,d),h=t.concat(f,"(\\s*\\.\\s*",f,")*",t.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[r,{className:"section",begin:/\[+/,end:/\]+/},{begin:h,className:"attr",starts:{end:/$/,contains:[r,o,s,i,a,n]}}]}}var yf="[0-9](_*[0-9])*",Xy=`\\.(${yf})`,Qy="[0-9a-fA-F](_*[0-9a-fA-F])*",y9={className:"number",variants:[{begin:`(\\b(${yf})((${Xy})|\\.)?|(${Xy}))[eE][+-]?(${yf})[fFdD]?\\b`},{begin:`\\b(${yf})((${Xy})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${Xy})[fFdD]?\\b`},{begin:`\\b(${yf})[fFdD]\\b`},{begin:`\\b0[xX]((${Qy})\\.?|(${Qy})?\\.(${Qy}))[pP][+-]?(${yf})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${Qy})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function wie(e,t,n){return n===-1?"":e.replace(t,r=>wie(e,t,n-1))}function _Ye(e){const t=e.regex,n="[-a-zA-Z_$][-a-zA-Z_$0-9]*",r=n+wie("(?:<"+n+"~~~(?:\\s*,\\s*"+n+"~~~)*>)?",/~~~/g,2),c={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},u={className:"meta",begin:"@"+n,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},d={className:"params",begin:/\(/,end:/\)/,keywords:c,relevance:0,contains:[e.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:c,illegal:/<\/|#/,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[e.BACKSLASH_ESCAPE]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[t.concat(/(?!else)/,n),/\s+/,n,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,n],className:{1:"keyword",3:"title.class"},contains:[d,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+r+"\\s+)",e.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:c,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:c,relevance:0,contains:[u,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,y9,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},y9,u]}}const x9="[A-Za-z$_][0-9A-Za-z$_]*",kYe=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],CYe=["true","false","null","undefined","NaN","Infinity"],Eie=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],Sie=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],Nie=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],TYe=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],AYe=[].concat(Nie,Eie,Sie);function jYe(e){const t=e.regex,n=(R,{after:F})=>{const O="</"+R[0].slice(1);return R.input.indexOf(O,F)!==-1},r=x9,i={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,a={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(R,F)=>{const O=R[0].length+R.index,Q=R.input[O];if(Q==="<"||Q===","){F.ignoreMatch();return}Q===">"&&(n(R,{after:O})||F.ignoreMatch());let Y;const $=R.input.substring(O);if(Y=$.match(/^\s*=/)){F.ignoreMatch();return}if((Y=$.match(/^\s+extends\s+/))&&Y.index===0){F.ignoreMatch();return}}},o={$pattern:x9,keyword:kYe,literal:CYe,built_in:AYe,"variable.language":TYe},c="[0-9](_?[0-9])*",u=`\\.(${c})`,d="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${d})((${u})|\\.)?|(${u}))[eE][+-]?(${c})\\b`},{begin:`\\b(${d})\\b((${u})\\b|\\.)?|(${u})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},h={className:"subst",begin:"\\$\\{",end:"\\}",keywords:o,contains:[]},p={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,h],subLanguage:"xml"}},m={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,h],subLanguage:"css"}},g={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,h],subLanguage:"graphql"}},v={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,h]},x={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},b=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,p,m,g,v,{match:/\$\d+/},f];h.contains=b.concat({begin:/\{/,end:/\}/,keywords:o,contains:["self"].concat(b)});const S=[].concat(x,h.contains),E=S.concat([{begin:/(\s*)\(/,end:/\)/,keywords:o,contains:["self"].concat(S)}]),N={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:E},_={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,t.concat(r,"(",t.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},k={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...Eie,...Sie]}},T={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},A={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[N],illegal:/%/},j={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function D(R){return t.concat("(?!",R.join("|"),")")}const I={match:t.concat(/\b/,D([...Nie,"super","import"].map(R=>`${R}\\s*\\(`)),r,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},M={begin:t.concat(/\./,t.lookahead(t.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},L={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},N]},P="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",B={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(P)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[N]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:o,exports:{PARAMS_CONTAINS:E,CLASS_REFERENCE:k},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),T,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,p,m,g,v,x,{match:/\$\d+/},f,k,{scope:"attr",match:r+t.lookahead(":"),relevance:0},B,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[x,e.REGEXP_MODE,{className:"function",begin:P,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:E}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i.begin,end:i.end},{match:s},{begin:a.begin,"on:begin":a.isTrulyOpeningTag,end:a.end}],subLanguage:"xml",contains:[{begin:a.begin,end:a.end,skip:!0,contains:["self"]}]}]},A,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[N,e.inherit(e.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},M,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[N]},I,j,_,L,{match:/\$[(.]/}]}}function OYe(e){const t={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},n={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],i={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:r},contains:[t,n,e.QUOTE_STRING_MODE,i,e.C_NUMBER_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var xf="[0-9](_*[0-9])*",Jy=`\\.(${xf})`,Zy="[0-9a-fA-F](_*[0-9a-fA-F])*",PYe={className:"number",variants:[{begin:`(\\b(${xf})((${Jy})|\\.)?|(${Jy}))[eE][+-]?(${xf})[fFdD]?\\b`},{begin:`\\b(${xf})((${Jy})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${Jy})[fFdD]?\\b`},{begin:`\\b(${xf})[fFdD]\\b`},{begin:`\\b0[xX]((${Zy})\\.?|(${Zy})?\\.(${Zy}))[pP][+-]?(${xf})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${Zy})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function IYe(e){const t={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},n={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},r={className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"@"},i={className:"subst",begin:/\$\{/,end:/\}/,contains:[e.C_NUMBER_MODE]},s={className:"variable",begin:"\\$"+e.UNDERSCORE_IDENT_RE},a={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[s,i]},{begin:"'",end:"'",illegal:/\n/,contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[e.BACKSLASH_ESCAPE,s,i]}]};i.contains.push(a);const o={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+e.UNDERSCORE_IDENT_RE+")?"},c={className:"meta",begin:"@"+e.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[e.inherit(a,{className:"string"}),"self"]}]},u=PYe,d=e.COMMENT("/\\*","\\*/",{contains:[e.C_BLOCK_COMMENT_MODE]}),f={variants:[{className:"type",begin:e.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},h=f;return h.variants[1].contains=[f],f.variants[1].contains=[h],{name:"Kotlin",aliases:["kt","kts"],keywords:t,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),e.C_LINE_COMMENT_MODE,d,n,r,o,c,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:t,relevance:5,contains:[{begin:e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[e.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:t,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[f,e.C_LINE_COMMENT_MODE,d],relevance:0},e.C_LINE_COMMENT_MODE,d,o,c,a,e.C_NUMBER_MODE]},d]},{begin:[/class|interface|trait/,/\s+/,e.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},e.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},o,c]},a,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},u]}}const DYe=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),MYe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],RYe=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],LYe=[...MYe,...RYe],FYe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),_ie=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),kie=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),BYe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),$Ye=_ie.concat(kie).sort().reverse();function UYe(e){const t=DYe(e),n=$Ye,r="and or not only",i="[\\w-]+",s="("+i+"|@\\{"+i+"\\})",a=[],o=[],c=function(b){return{className:"string",begin:"~?"+b+".*?"+b}},u=function(b,S,E){return{className:b,begin:S,relevance:E}},d={$pattern:/[a-z-]+/,keyword:r,attribute:FYe.join(" ")},f={begin:"\\(",end:"\\)",contains:o,keywords:d,relevance:0};o.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,c("'"),c('"'),t.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},t.HEXCOLOR,f,u("variable","@@?"+i,10),u("variable","@\\{"+i+"\\}"),u("built_in","~?`[^`]*?`"),{className:"attribute",begin:i+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},t.IMPORTANT,{beginKeywords:"and not"},t.FUNCTION_DISPATCH);const h=o.concat({begin:/\{/,end:/\}/,contains:a}),p={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(o)},m={begin:s+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+BYe.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:o}}]},g={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:d,returnEnd:!0,contains:o,relevance:0}},v={className:"variable",variants:[{begin:"@"+i+"\\s*:",relevance:15},{begin:"@"+i}],starts:{end:"[;}]",returnEnd:!0,contains:h}},y={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:s,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,p,u("keyword","all\\b"),u("variable","@\\{"+i+"\\}"),{begin:"\\b("+LYe.join("|")+")\\b",className:"selector-tag"},t.CSS_NUMBER_MODE,u("selector-tag",s,0),u("selector-id","#"+s),u("selector-class","\\."+s,0),u("selector-tag","&",0),t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+_ie.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+kie.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:h},{begin:"!important"},t.FUNCTION_DISPATCH]},x={begin:i+`:(:)?(${n.join("|")})`,returnBegin:!0,contains:[y]};return a.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,g,v,x,m,y,p,t.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:a}}function zYe(e){const t="\\[=*\\[",n="\\]=*\\]",r={begin:t,end:n,contains:["self"]},i=[e.COMMENT("--(?!"+t+")","$"),e.COMMENT("--"+t,n,{contains:[r],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:e.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:i.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[e.inherit(e.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:i}].concat(i)},e.C_NUMBER_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"string",begin:t,end:n,contains:[r],relevance:5}])}}function HYe(e){const t={className:"variable",variants:[{begin:"\\$\\("+e.UNDERSCORE_IDENT_RE+"\\)",contains:[e.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},n={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,t]},r={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[t,n]},i={begin:"^"+e.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},s={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},a={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[t]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[e.HASH_COMMENT_MODE,t,n,r,i,s,a]}}function VYe(e){const t=e.regex,n={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},r={begin:"^[-\\*]{3,}",end:"$"},i={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},s={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},a={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},o=/[A-Za-z][A-Za-z0-9+.-]*/,c={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:t.concat(/\[.+?\]\(/,o,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},u={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},d={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},f=e.inherit(u,{contains:[]}),h=e.inherit(d,{contains:[]});u.contains.push(h),d.contains.push(f);let p=[n,c];return[u,d,f,h].forEach(y=>{y.contains=y.contains.concat(p)}),p=p.concat(u,d),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:p},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:p}]}]},n,s,u,d,{className:"quote",begin:"^>\\s+",contains:p,end:"$"},i,r,c,a,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function WYe(e){const t={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},n=/[a-zA-Z@][a-zA-Z0-9_]*/,o={"variable.language":["this","super"],$pattern:n,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},c={$pattern:n,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:o,illegal:"</",contains:[t,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.C_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+c.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:c,contains:[e.UNDERSCORE_TITLE_MODE]},{begin:"\\."+e.UNDERSCORE_IDENT_RE,relevance:0}]}}function qYe(e){const t=e.regex,n=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],r=/[dualxmsipngr]{0,12}/,i={$pattern:/[\w.]+/,keyword:n.join(" ")},s={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:i},a={begin:/->\{/,end:/\}/},o={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},c={scope:"variable",variants:[{begin:/\$\d/},{begin:t.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[o]},u={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},d=[e.BACKSLASH_ESCAPE,s,c],f=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],h=(g,v,y="\\1")=>{const x=y==="\\1"?y:t.concat(y,v);return t.concat(t.concat("(?:",g,")"),v,/(?:\\.|[^\\\/])*?/,x,/(?:\\.|[^\\\/])*?/,y,r)},p=(g,v,y)=>t.concat(t.concat("(?:",g,")"),v,/(?:\\.|[^\\\/])*?/,y,r),m=[c,e.HASH_COMMENT_MODE,e.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),a,{className:"string",contains:d,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},u,{begin:"(\\/\\/|"+e.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[e.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:h("s|tr|y",t.either(...f,{capture:!0}))},{begin:h("s|tr|y","\\(","\\)")},{begin:h("s|tr|y","\\[","\\]")},{begin:h("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:p("(?:m|qr)?",/\//,/\//)},{begin:p("m|qr",t.either(...f,{capture:!0}),/\1/)},{begin:p("m|qr",/\(/,/\)/)},{begin:p("m|qr",/\[/,/\]/)},{begin:p("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,o]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,o,u]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return s.contains=m,a.contains=m,{name:"Perl",aliases:["pl","pm"],keywords:i,contains:m}}function KYe(e){const t=e.regex,n=/(?![A-Za-z0-9])(?![$])/,r=t.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,n),i=t.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,n),s=t.concat(/[A-Z]+/,n),a={scope:"variable",match:"\\$+"+r},o={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},c={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},u=e.inherit(e.APOS_STRING_MODE,{illegal:null}),d=e.inherit(e.QUOTE_STRING_MODE,{illegal:null,contains:e.QUOTE_STRING_MODE.contains.concat(c)}),f={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:e.QUOTE_STRING_MODE.contains.concat(c),"on:begin":(M,L)=>{L.data._beginMatch=M[1]||M[2]},"on:end":(M,L)=>{L.data._beginMatch!==M[1]&&L.ignoreMatch()}},h=e.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),p=`[ 	
]`,m={scope:"string",variants:[d,u,f,h]},g={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},v=["false","null","true"],y=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],x=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],S={keyword:y,literal:(M=>{const L=[];return M.forEach(P=>{L.push(P),P.toLowerCase()===P?L.push(P.toUpperCase()):L.push(P.toLowerCase())}),L})(v),built_in:x},E=M=>M.map(L=>L.replace(/\|\d+$/,"")),N={variants:[{match:[/new/,t.concat(p,"+"),t.concat("(?!",E(x).join("\\b|"),"\\b)"),i],scope:{1:"keyword",4:"title.class"}}]},_=t.concat(r,"\\b(?!\\()"),k={variants:[{match:[t.concat(/::/,t.lookahead(/(?!class\b)/)),_],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[i,t.concat(/::/,t.lookahead(/(?!class\b)/)),_],scope:{1:"title.class",3:"variable.constant"}},{match:[i,t.concat("::",t.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[i,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},T={scope:"attr",match:t.concat(r,t.lookahead(":"),t.lookahead(/(?!::)/))},A={relevance:0,begin:/\(/,end:/\)/,keywords:S,contains:[T,a,k,e.C_BLOCK_COMMENT_MODE,m,g,N]},j={relevance:0,match:[/\b/,t.concat("(?!fn\\b|function\\b|",E(y).join("\\b|"),"|",E(x).join("\\b|"),"\\b)"),r,t.concat(p,"*"),t.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[A]};A.contains.push(j);const D=[T,k,e.C_BLOCK_COMMENT_MODE,m,g,N],I={begin:t.concat(/#\[\s*\\?/,t.either(i,s)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:v,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:v,keyword:["new","array"]},contains:["self",...D]},...D,{scope:"meta",variants:[{match:i},{match:s}]}]};return{case_insensitive:!1,keywords:S,contains:[I,e.HASH_COMMENT_MODE,e.COMMENT("//","$"),e.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:e.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},o,{scope:"variable.language",match:/\$this\b/},a,j,k,{match:[/const/,/\s/,r],scope:{1:"keyword",3:"variable.constant"}},N,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},e.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:S,contains:["self",I,a,k,e.C_BLOCK_COMMENT_MODE,m,g]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[e.inherit(e.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},e.UNDERSCORE_TITLE_MODE]},m,g]}}function GYe(e){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},e.inherit(e.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),e.inherit(e.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function YYe(e){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function XYe(e){const t=e.regex,n=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],o={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},c={className:"meta",begin:/^(>>>|\.\.\.) /},u={className:"subst",begin:/\{/,end:/\}/,keywords:o,illegal:/#/},d={begin:/\{\{/,relevance:0},f={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,c,d,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,c,d,u]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,d,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,d,u]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},h="[0-9](_?[0-9])*",p=`(\\b(${h}))?\\.(${h})|\\b(${h})\\.`,m=`\\b|${r.join("|")}`,g={className:"number",relevance:0,variants:[{begin:`(\\b(${h})|(${p}))[eE][+-]?(${h})[jJ]?(?=${m})`},{begin:`(${p})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${m})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${m})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${m})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${m})`},{begin:`\\b(${h})[jJ](?=${m})`}]},v={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:o,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},y={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:["self",c,g,f,e.HASH_COMMENT_MODE]}]};return u.contains=[f,g,c],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:o,illegal:/(<\/|\?)|=>/,contains:[c,g,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},f,v,e.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[y]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[g,y,f]}]}}function QYe(e){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function JYe(e){const t=e.regex,n=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,r=t.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),i=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,s=t.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:n,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[e.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:t.lookahead(t.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:n},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),e.HASH_COMMENT_MODE,{scope:"string",contains:[e.BACKSLASH_ESCAPE],variants:[e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[i,r]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,r]},{scope:{1:"punctuation",2:"number"},match:[s,r]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,r]}]},{scope:{3:"operator"},match:[n,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:i},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:s},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}function ZYe(e){const t=e.regex,n="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",r=t.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),i=t.concat(r,/(::\w+)*/),a={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},o={className:"doctag",begin:"@[A-Za-z]+"},c={begin:"#<",end:">"},u=[e.COMMENT("#","$",{contains:[o]}),e.COMMENT("^=begin","^=end",{contains:[o],relevance:10}),e.COMMENT("^__END__",e.MATCH_NOTHING_RE)],d={className:"subst",begin:/#\{/,end:/\}/,keywords:a},f={className:"string",contains:[e.BACKSLASH_ESCAPE,d],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:t.concat(/<<[-~]?'?/,t.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[e.BACKSLASH_ESCAPE,d]})]}]},h="[1-9](_?[0-9])*|0",p="[0-9](_?[0-9])*",m={className:"number",relevance:0,variants:[{begin:`\\b(${h})(\\.(${p}))?([eE][+-]?(${p})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},g={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:a}]},N=[f,{variants:[{match:[/class\s+/,i,/\s+<\s+/,i]},{match:[/\b(class|module)\s+/,i]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:a},{match:[/(include|extend)\s+/,i],scope:{2:"title.class"},keywords:a},{relevance:0,match:[i,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:r,scope:"title.class"},{match:[/def/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[g]},{begin:e.IDENT_RE+"::"},{className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[f,{begin:n}],relevance:0},m,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:a},{begin:"("+e.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[e.BACKSLASH_ESCAPE,d],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(c,u),relevance:0}].concat(c,u);d.contains=N,g.contains=N;const A=[{begin:/^\s*=>/,starts:{end:"$",contains:N}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:a,contains:N}}];return u.unshift(c),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:a,illegal:/\/\*/,contains:[e.SHEBANG({binary:"ruby"})].concat(A).concat(u).concat(N)}}function eXe(e){const t=e.regex,n=/(r#)?/,r=t.concat(n,e.UNDERSCORE_IDENT_RE),i=t.concat(n,e.IDENT_RE),s={className:"title.function.invoke",relevance:0,begin:t.concat(/\b/,/(?!let|for|while|if|else|match\b)/,i,t.lookahead(/\s*\(/))},a="([ui](8|16|32|64|128|size)|f(32|64))?",o=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],c=["true","false","Some","None","Ok","Err"],u=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],d=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:e.IDENT_RE+"!?",type:d,keyword:o,literal:c,built_in:u},illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.COMMENT("/\\*","\\*/",{contains:["self"]}),e.inherit(e.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+a},{begin:"\\b0o([0-7_]+)"+a},{begin:"\\b0x([A-Fa-f0-9_]+)"+a},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+a}],relevance:0},{begin:[/fn/,/\s+/,r],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,r],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,r,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:e.IDENT_RE+"::",keywords:{keyword:"Self",built_in:u,type:d}},{className:"punctuation",begin:"->"},s]}}const tXe=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),nXe=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],rXe=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],iXe=[...nXe,...rXe],sXe=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),aXe=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),oXe=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),lXe=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function cXe(e){const t=tXe(e),n=oXe,r=aXe,i="@[a-z-]+",s="and or not only",o={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+iXe.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},o,{begin:/\(/,end:/\)/,contains:[t.CSS_NUMBER_MODE]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+lXe.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[t.BLOCK_COMMENT,o,t.HEXCOLOR,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.IMPORTANT,t.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:i,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:sXe.join(" ")},contains:[{begin:i,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},o,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.HEXCOLOR,t.CSS_NUMBER_MODE]},t.FUNCTION_DISPATCH]}}function uXe(e){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function dXe(e){const t=e.regex,n=e.COMMENT("--","$"),r={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},i={begin:/"/,end:/"/,contains:[{match:/""/}]},s=["true","false","unknown"],a=["double precision","large object","with timezone","without timezone"],o=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],c=["add","asc","collation","desc","final","first","last","view"],u=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],d=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],f=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],h=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],p=d,m=[...u,...c].filter(E=>!d.includes(E)),g={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},v={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},y={match:t.concat(/\b/,t.either(...p),/\s*\(/),relevance:0,keywords:{built_in:p}};function x(E){return t.concat(/\b/,t.either(...E.map(N=>N.replace(/\s+/,"\\s+"))),/\b/)}const b={scope:"keyword",match:x(h),relevance:0};function S(E,{exceptions:N,when:_}={}){const k=_;return N=N||[],E.map(T=>T.match(/\|\d+$/)||N.includes(T)?T:k(T)?`${T}|0`:T)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:S(m,{when:E=>E.length<3}),literal:s,type:o,built_in:f},contains:[{scope:"type",match:x(a)},b,y,g,r,i,e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,n,v]}}function Cie(e){return e?typeof e=="string"?e:e.source:null}function nm(e){return Bt("(?=",e,")")}function Bt(...e){return e.map(n=>Cie(n)).join("")}function fXe(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function mi(...e){return"("+(fXe(e).capture?"":"?:")+e.map(r=>Cie(r)).join("|")+")"}const o3=e=>Bt(/\b/,e,/\w$/.test(e)?/\b/:/\B/),hXe=["Protocol","Type"].map(o3),b9=["init","self"].map(o3),pXe=["Any","Self"],Vk=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],w9=["false","nil","true"],mXe=["assignment","associativity","higherThan","left","lowerThan","none","right"],gXe=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],E9=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],Tie=mi(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),Aie=mi(Tie,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),Wk=Bt(Tie,Aie,"*"),jie=mi(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),xw=mi(jie,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),$a=Bt(jie,xw,"*"),ex=Bt(/[A-Z]/,xw,"*"),vXe=["attached","autoclosure",Bt(/convention\(/,mi("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",Bt(/objc\(/,$a,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],yXe=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function xXe(e){const t={match:/\s+/,relevance:0},n=e.COMMENT("/\\*","\\*/",{contains:["self"]}),r=[e.C_LINE_COMMENT_MODE,n],i={match:[/\./,mi(...hXe,...b9)],className:{2:"keyword"}},s={match:Bt(/\./,mi(...Vk)),relevance:0},a=Vk.filter(J=>typeof J=="string").concat(["_|0"]),o=Vk.filter(J=>typeof J!="string").concat(pXe).map(o3),c={variants:[{className:"keyword",match:mi(...o,...b9)}]},u={$pattern:mi(/\b\w+/,/#\w+/),keyword:a.concat(gXe),literal:w9},d=[i,s,c],f={match:Bt(/\./,mi(...E9)),relevance:0},h={className:"built_in",match:Bt(/\b/,mi(...E9),/(?=\()/)},p=[f,h],m={match:/->/,relevance:0},g={className:"operator",relevance:0,variants:[{match:Wk},{match:`\\.(\\.|${Aie})+`}]},v=[m,g],y="([0-9]_*)+",x="([0-9a-fA-F]_*)+",b={className:"number",relevance:0,variants:[{match:`\\b(${y})(\\.(${y}))?([eE][+-]?(${y}))?\\b`},{match:`\\b0x(${x})(\\.(${x}))?([pP][+-]?(${y}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},S=(J="")=>({className:"subst",variants:[{match:Bt(/\\/,J,/[0\\tnr"']/)},{match:Bt(/\\/,J,/u\{[0-9a-fA-F]{1,8}\}/)}]}),E=(J="")=>({className:"subst",match:Bt(/\\/,J,/[\t ]*(?:[\r\n]|\r\n)/)}),N=(J="")=>({className:"subst",label:"interpol",begin:Bt(/\\/,J,/\(/),end:/\)/}),_=(J="")=>({begin:Bt(J,/"""/),end:Bt(/"""/,J),contains:[S(J),E(J),N(J)]}),k=(J="")=>({begin:Bt(J,/"/),end:Bt(/"/,J),contains:[S(J),N(J)]}),T={className:"string",variants:[_(),_("#"),_("##"),_("###"),k(),k("#"),k("##"),k("###")]},A=[e.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[e.BACKSLASH_ESCAPE]}],j={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:A},D=J=>{const pe=Bt(J,/\//),q=Bt(/\//,J);return{begin:pe,end:q,contains:[...A,{scope:"comment",begin:`#(?!.*${q})`,end:/$/}]}},I={scope:"regexp",variants:[D("###"),D("##"),D("#"),j]},M={match:Bt(/`/,$a,/`/)},L={className:"variable",match:/\$\d+/},P={className:"variable",match:`\\$${xw}+`},B=[M,L,P],R={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:yXe,contains:[...v,b,T]}]}},F={scope:"keyword",match:Bt(/@/,mi(...vXe),nm(mi(/\(/,/\s+/)))},O={scope:"meta",match:Bt(/@/,$a)},Q=[R,F,O],Y={match:nm(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:Bt(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,xw,"+")},{className:"type",match:ex,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:Bt(/\s+&\s+/,nm(ex)),relevance:0}]},$={begin:/</,end:/>/,keywords:u,contains:[...r,...d,...Q,m,Y]};Y.contains.push($);const ye={match:Bt($a,/\s*:/),keywords:"_|0",relevance:0},Te={begin:/\(/,end:/\)/,relevance:0,keywords:u,contains:["self",ye,...r,I,...d,...p,...v,b,T,...B,...Q,Y]},U={begin:/</,end:/>/,keywords:"repeat each",contains:[...r,Y]},K={begin:mi(nm(Bt($a,/\s*:/)),nm(Bt($a,/\s+/,$a,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:$a}]},fe={begin:/\(/,end:/\)/,keywords:u,contains:[K,...r,...d,...v,b,T,...Q,Y,Te],endsParent:!0,illegal:/["']/},oe={match:[/(func|macro)/,/\s+/,mi(M.match,$a,Wk)],className:{1:"keyword",3:"title.function"},contains:[U,fe,t],illegal:[/\[/,/%/]},le={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[U,fe,t],illegal:/\[|%/},Ee={match:[/operator/,/\s+/,Wk],className:{1:"keyword",3:"title"}},se={begin:[/precedencegroup/,/\s+/,ex],className:{1:"keyword",3:"title"},contains:[Y],keywords:[...mXe,...w9],end:/}/},qe={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},Oe={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},et={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,$a,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:u,contains:[U,...d,{begin:/:/,end:/\{/,keywords:u,contains:[{scope:"title.class.inherited",match:ex},...d],relevance:0}]};for(const J of T.variants){const pe=J.contains.find(me=>me.label==="interpol");pe.keywords=u;const q=[...d,...p,...v,b,T,...B];pe.contains=[...q,{begin:/\(/,end:/\)/,contains:["self",...q]}]}return{name:"Swift",keywords:u,contains:[...r,oe,le,qe,Oe,et,Ee,se,{beginKeywords:"import",end:/$/,contains:[...r],relevance:0},I,...d,...p,...v,b,T,...B,...Q,Y,Te]}}const bw="[A-Za-z$_][0-9A-Za-z$_]*",Oie=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],Pie=["true","false","null","undefined","NaN","Infinity"],Iie=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],Die=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],Mie=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],Rie=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],Lie=[].concat(Mie,Iie,Die);function bXe(e){const t=e.regex,n=(R,{after:F})=>{const O="</"+R[0].slice(1);return R.input.indexOf(O,F)!==-1},r=bw,i={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,a={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(R,F)=>{const O=R[0].length+R.index,Q=R.input[O];if(Q==="<"||Q===","){F.ignoreMatch();return}Q===">"&&(n(R,{after:O})||F.ignoreMatch());let Y;const $=R.input.substring(O);if(Y=$.match(/^\s*=/)){F.ignoreMatch();return}if((Y=$.match(/^\s+extends\s+/))&&Y.index===0){F.ignoreMatch();return}}},o={$pattern:bw,keyword:Oie,literal:Pie,built_in:Lie,"variable.language":Rie},c="[0-9](_?[0-9])*",u=`\\.(${c})`,d="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${d})((${u})|\\.)?|(${u}))[eE][+-]?(${c})\\b`},{begin:`\\b(${d})\\b((${u})\\b|\\.)?|(${u})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},h={className:"subst",begin:"\\$\\{",end:"\\}",keywords:o,contains:[]},p={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,h],subLanguage:"xml"}},m={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,h],subLanguage:"css"}},g={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,h],subLanguage:"graphql"}},v={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,h]},x={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},b=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,p,m,g,v,{match:/\$\d+/},f];h.contains=b.concat({begin:/\{/,end:/\}/,keywords:o,contains:["self"].concat(b)});const S=[].concat(x,h.contains),E=S.concat([{begin:/(\s*)\(/,end:/\)/,keywords:o,contains:["self"].concat(S)}]),N={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:E},_={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,t.concat(r,"(",t.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},k={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...Iie,...Die]}},T={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},A={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[N],illegal:/%/},j={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function D(R){return t.concat("(?!",R.join("|"),")")}const I={match:t.concat(/\b/,D([...Mie,"super","import"].map(R=>`${R}\\s*\\(`)),r,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},M={begin:t.concat(/\./,t.lookahead(t.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},L={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},N]},P="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",B={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(P)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[N]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:o,exports:{PARAMS_CONTAINS:E,CLASS_REFERENCE:k},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),T,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,p,m,g,v,x,{match:/\$\d+/},f,k,{scope:"attr",match:r+t.lookahead(":"),relevance:0},B,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[x,e.REGEXP_MODE,{className:"function",begin:P,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:E}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i.begin,end:i.end},{match:s},{begin:a.begin,"on:begin":a.isTrulyOpeningTag,end:a.end}],subLanguage:"xml",contains:[{begin:a.begin,end:a.end,skip:!0,contains:["self"]}]}]},A,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[N,e.inherit(e.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},M,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[N]},I,j,_,L,{match:/\$[(.]/}]}}function wXe(e){const t=e.regex,n=bXe(e),r=bw,i=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],s={begin:[/namespace/,/\s+/,e.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},a={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:i},contains:[n.exports.CLASS_REFERENCE]},o={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},c=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],u={$pattern:bw,keyword:Oie.concat(c),literal:Pie,built_in:Lie.concat(i),"variable.language":Rie},d={className:"meta",begin:"@"+r},f=(g,v,y)=>{const x=g.contains.findIndex(b=>b.label===v);if(x===-1)throw new Error("can not find mode to replace");g.contains.splice(x,1,y)};Object.assign(n.keywords,u),n.exports.PARAMS_CONTAINS.push(d);const h=n.contains.find(g=>g.scope==="attr"),p=Object.assign({},h,{match:t.concat(r,t.lookahead(/\s*\?:/))});n.exports.PARAMS_CONTAINS.push([n.exports.CLASS_REFERENCE,h,p]),n.contains=n.contains.concat([d,s,a,p]),f(n,"shebang",e.SHEBANG()),f(n,"use_strict",o);const m=n.contains.find(g=>g.label==="func.def");return m.relevance=0,Object.assign(n,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),n}function EXe(e){const t=e.regex,n={className:"string",begin:/"(""|[^/n])"C\b/},r={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},i=/\d{1,2}\/\d{1,2}\/\d{4}/,s=/\d{4}-\d{1,2}-\d{1,2}/,a=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,o=/\d{1,2}(:\d{1,2}){1,2}/,c={className:"literal",variants:[{begin:t.concat(/# */,t.either(s,i),/ *#/)},{begin:t.concat(/# */,o,/ *#/)},{begin:t.concat(/# */,a,/ *#/)},{begin:t.concat(/# */,t.either(s,i),/ +/,t.either(a,o),/ *#/)}]},u={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},d={className:"label",begin:/^\w+:/},f=e.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),h=e.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[n,r,c,u,d,f,h,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[h]}]}}function SXe(e){e.regex;const t=e.COMMENT(/\(;/,/;\)/);t.contains.push("self");const n=e.COMMENT(/;;/,/$/),r=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],i={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},s={className:"variable",begin:/\$[\w_]+/},a={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},o={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},c={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},u={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:r},contains:[n,t,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},s,a,i,e.QUOTE_STRING_MODE,c,u,o]}}function NXe(e){const t=e.regex,n=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,i={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},s={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},a=e.inherit(s,{begin:/\(/,end:/\)/}),o=e.inherit(e.APOS_STRING_MODE,{className:"string"}),c=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),u={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[i]},{begin:/'/,end:/'/,contains:[i]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[s,c,o,a,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[s,a,c,o]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},i,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[c]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[u],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[u],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(n,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:u}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function _Xe(e){const t="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",r={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},i={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},s={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},a={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,i]},o=e.inherit(a,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),h={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},p={end:",",endsWithParent:!0,excludeEnd:!0,keywords:t,relevance:0},m={begin:/\{/,end:/\}/,contains:[p],illegal:"\\n",relevance:0},g={begin:"\\[",end:"\\]",contains:[p],illegal:"\\n",relevance:0},v=[r,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:t,keywords:{literal:t}},h,{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},m,g,s,a],y=[...v];return y.pop(),y.push(o),p.contains=y,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:v}}const Fie={arduino:oYe,bash:lYe,c:cYe,cpp:uYe,csharp:dYe,css:bYe,diff:wYe,go:EYe,graphql:SYe,ini:NYe,java:_Ye,javascript:jYe,json:OYe,kotlin:IYe,less:UYe,lua:zYe,makefile:HYe,markdown:VYe,objectivec:WYe,perl:qYe,php:KYe,"php-template":GYe,plaintext:YYe,python:XYe,"python-repl":QYe,r:JYe,ruby:ZYe,rust:eXe,scss:cXe,shell:uXe,sql:dXe,swift:xXe,typescript:wXe,vbnet:EXe,wasm:SXe,xml:NXe,yaml:_Xe};const S9={},kXe="hljs-";function Bie(e){const t=aie.newInstance();return e&&s(e),{highlight:n,highlightAuto:r,listLanguages:i,register:s,registerAlias:a,registered:o};function n(c,u,d){const f=d||S9,h=typeof f.prefix=="string"?f.prefix:kXe;if(!t.getLanguage(c))throw new Error("Unknown language: `"+c+"` is not registered");t.configure({__emitter:CXe,classPrefix:h});const p=t.highlight(u,{ignoreIllegals:!0,language:c});if(p.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:p.errorRaised});const m=p._emitter.root,g=m.data;return g.language=p.language,g.relevance=p.relevance,m}function r(c,u){const f=(u||S9).subset||i();let h=-1,p=0,m;for(;++h<f.length;){const g=f[h];if(!t.getLanguage(g))continue;const v=n(g,c,u);v.data&&v.data.relevance!==void 0&&v.data.relevance>p&&(p=v.data.relevance,m=v)}return m||{type:"root",children:[],data:{language:void 0,relevance:p}}}function i(){return t.listLanguages()}function s(c,u){if(typeof c=="string")t.registerLanguage(c,u);else{let d;for(d in c)Object.hasOwn(c,d)&&t.registerLanguage(d,c[d])}}function a(c,u){if(typeof c=="string")t.registerAliases(typeof u=="string"?u:[...u],{languageName:c});else{let d;for(d in c)if(Object.hasOwn(c,d)){const f=c[d];t.registerAliases(typeof f=="string"?f:[...f],{languageName:d})}}}function o(c){return!!t.getLanguage(c)}}class CXe{constructor(t){this.options=t,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(t){if(t==="")return;const n=this.stack[this.stack.length-1],r=n.children[n.children.length-1];r&&r.type==="text"?r.value+=t:n.children.push({type:"text",value:t})}startScope(t){this.openNode(String(t))}endScope(){this.closeNode()}__addSublanguage(t,n){const r=this.stack[this.stack.length-1],i=t.root.children;n?r.children.push({type:"element",tagName:"span",properties:{className:[n]},children:i}):r.children.push(...i)}openNode(t){const n=this,r=t.split(".").map(function(a,o){return o?a+"_".repeat(o):n.options.classPrefix+a}),i=this.stack[this.stack.length-1],s={type:"element",tagName:"span",properties:{className:r},children:[]};i.children.push(s),this.stack.push(s)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}const TXe=Bie(Fie);function N9({content:e,placeholder:t="Start writing your document...",onChange:n,onSave:r,onPreview:i,className:s,readOnly:a=!1,isSensitive:o=!1,onSensitivityToggle:c,showSaveButton:u=!0,showPreviewButton:d=!0,saveButtonText:f="Save",isLoading:h=!1,characterLimit:p=5e4}){const[m,g]=w.useState(!1),v=dWe({extensions:[qqe,Kqe.configure({placeholder:t}),Gqe,oqe.configure({openOnClick:!1}),Qqe,YKe.configure({lowlight:TXe}),bie.configure({resizable:!0}),xie,yie,vie,ZGe.configure({types:["heading","paragraph"]}),rYe.configure({multicolor:!0}),iYe,sYe.configure({nested:!0})],content:e||"",onUpdate:({editor:k})=>{const T=k.getJSON();JSON.stringify(T)!==JSON.stringify(e)&&n&&n(T,k.getHTML(),k.getText())},editorProps:{attributes:{class:"prose prose-sm sm:prose-base lg:prose-lg xl:prose-xl mx-auto focus:outline-none min-h-[500px] p-8 max-w-none"},handleKeyDown:(k,T)=>T.key==="F11"?(T.preventDefault(),g(!m),!0):!1},editable:!a}),y=()=>{if(!v)return;const k=window.prompt("Enter URL:");k&&v.chain().focus().setLink({href:k}).run()},x=()=>{if(!v)return;const k=window.prompt("Enter image URL:");k&&v.chain().focus().setImage({src:k}).run()},b=()=>{v&&v.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run()};if(!v)return l.jsx("div",{className:"border rounded-lg p-4 bg-gray-50",children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),l.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),l.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})});const S=v.storage.characterCount.characters(),E=v.storage.characterCount.words(),N=p&&S>p*.8,_=p&&S>p;return l.jsxs("div",{className:Re("border rounded-lg bg-white transition-all duration-300",m&&"fixed inset-0 z-50 rounded-none border-0 h-screen flex flex-col",s),children:[!a&&l.jsxs("div",{className:"border-b p-3 flex flex-wrap gap-1 bg-gray-50/50 flex-shrink-0",children:[l.jsxs("div",{className:"flex gap-1 mr-3",children:[l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleBold().run(),className:v.isActive("bold")?"bg-gray-200":"",children:l.jsx(Ehe,{className:"h-4 w-4"})}),l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleItalic().run(),className:v.isActive("italic")?"bg-gray-200":"",children:l.jsx(Mhe,{className:"h-4 w-4"})}),l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleStrike().run(),className:v.isActive("strike")?"bg-gray-200":"",children:l.jsx(Zhe,{className:"h-4 w-4"})}),l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleCode().run(),className:v.isActive("code")?"bg-gray-200":"",children:l.jsx(mc,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"flex gap-1 mr-3",children:[l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleHeading({level:1}).run(),className:v.isActive("heading",{level:1})?"bg-gray-200":"",children:l.jsx(jhe,{className:"h-4 w-4"})}),l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleHeading({level:2}).run(),className:v.isActive("heading",{level:2})?"bg-gray-200":"",children:l.jsx(Ohe,{className:"h-4 w-4"})}),l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleHeading({level:3}).run(),className:v.isActive("heading",{level:3})?"bg-gray-200":"",children:l.jsx(Phe,{className:"h-4 w-4"})}),l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().setParagraph().run(),className:v.isActive("paragraph")?"bg-gray-200":"",children:l.jsx(tpe,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"flex gap-1 mr-3",children:[l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleBulletList().run(),className:v.isActive("bulletList")?"bg-gray-200":"",children:l.jsx($he,{className:"h-4 w-4"})}),l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleOrderedList().run(),className:v.isActive("orderedList")?"bg-gray-200":"",children:l.jsx(Bhe,{className:"h-4 w-4"})}),l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleTaskList().run(),className:v.isActive("taskList")?"bg-gray-200":"",children:l.jsx(_he,{className:"h-4 w-4"})}),l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleBlockquote().run(),className:v.isActive("blockquote")?"bg-gray-200":"",children:l.jsx(Qhe,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"flex gap-1 mr-3",children:[l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().setTextAlign("left").run(),className:v.isActive({textAlign:"left"})?"bg-gray-200":"",children:l.jsx(yhe,{className:"h-4 w-4"})}),l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().setTextAlign("center").run(),className:v.isActive({textAlign:"center"})?"bg-gray-200":"",children:l.jsx(vhe,{className:"h-4 w-4"})}),l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().setTextAlign("right").run(),className:v.isActive({textAlign:"right"})?"bg-gray-200":"",children:l.jsx(xhe,{className:"h-4 w-4"})})]}),l.jsx("div",{className:"flex gap-1 mr-3",children:l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().toggleHighlight().run(),className:v.isActive("highlight")?"bg-yellow-200":"",children:l.jsx(lV,{className:"h-4 w-4"})})}),l.jsxs("div",{className:"flex gap-1 mr-3",children:[l.jsx(H,{variant:"ghost",size:"sm",onClick:y,children:l.jsx(Fhe,{className:"h-4 w-4"})}),l.jsx(H,{variant:"ghost",size:"sm",onClick:x,children:l.jsx(Dhe,{className:"h-4 w-4"})}),l.jsx(H,{variant:"ghost",size:"sm",onClick:b,children:l.jsx(SO,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"flex gap-1 mr-3",children:[l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().undo().run(),disabled:!v.can().undo(),children:l.jsx(npe,{className:"h-4 w-4"})}),l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>v.chain().focus().redo().run(),disabled:!v.can().redo(),children:l.jsx(Jhe,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"flex gap-2 ml-auto",children:[l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>g(!m),title:m?"Exit full screen (F11)":"Enter full screen (F11)",children:m?l.jsx(qhe,{className:"h-4 w-4"}):l.jsx(Vhe,{className:"h-4 w-4"})}),l.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),c&&l.jsx(H,{variant:"ghost",size:"sm",onClick:c,className:o?"text-red-600":"text-gray-600",children:o?l.jsx(ro,{className:"h-4 w-4"}):l.jsx(uV,{className:"h-4 w-4"})}),d&&i&&l.jsx(H,{variant:"ghost",size:"sm",onClick:i,children:l.jsx(Hi,{className:"h-4 w-4"})}),u&&r&&l.jsxs(H,{size:"sm",onClick:r,disabled:h||!!_,children:[l.jsx(Qh,{className:"h-4 w-4 mr-1"}),f]})]})]}),l.jsx("div",{className:Re("flex-1 overflow-auto",m?"p-8":"p-6"),children:l.jsx(iWe,{editor:v,className:Re("prose prose-sm max-w-none focus:outline-none","prose-headings:font-bold prose-h1:text-2xl prose-h2:text-xl prose-h3:text-lg","prose-p:leading-relaxed prose-li:leading-relaxed","prose-pre:bg-gray-100 prose-code:bg-gray-100 prose-code:px-1 prose-code:py-0.5 prose-code:rounded","prose-blockquote:border-l-4 prose-blockquote:border-blue-500 prose-blockquote:pl-4 prose-blockquote:italic","prose-table:table-auto prose-th:text-left prose-th:font-semibold",a&&"cursor-default")})}),l.jsxs("div",{className:"border-t p-3 flex items-center justify-between text-sm text-gray-500 bg-gray-50/50 flex-shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("span",{children:[E," words"]}),l.jsxs("span",{className:Re(_&&"text-red-600 font-semibold",N&&!_&&"text-yellow-600"),children:[S,p&&` / ${p}`," characters"]}),o&&l.jsxs(Ot,{variant:"destructive",className:"text-xs",children:[l.jsx(ro,{className:"h-3 w-3 mr-1"}),"Sensitive"]})]}),_&&l.jsx("span",{className:"text-red-600 text-xs font-medium",children:"Character limit exceeded"})]})]})}function _9(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const a=n.slice(i,r).trim();(a||!s)&&t.push(a),i=r+1,r=n.indexOf(",",i)}return t}function $ie(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const AXe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,jXe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,OXe={};function k9(e,t){return(OXe.jsx?jXe:AXe).test(e)}const PXe=/[ \t\n\f\r]/g;function IXe(e){return typeof e=="object"?e.type==="text"?C9(e.value):!1:C9(e)}function C9(e){return e.replace(PXe,"")===""}let Cv=class{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}};Cv.prototype.normal={};Cv.prototype.property={};Cv.prototype.space=void 0;function Uie(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new Cv(n,r,t)}function w0(e){return e.toLowerCase()}let Ki=class{constructor(t,n){this.attribute=n,this.property=t}};Ki.prototype.attribute="";Ki.prototype.booleanish=!1;Ki.prototype.boolean=!1;Ki.prototype.commaOrSpaceSeparated=!1;Ki.prototype.commaSeparated=!1;Ki.prototype.defined=!1;Ki.prototype.mustUseProperty=!1;Ki.prototype.number=!1;Ki.prototype.overloadedBoolean=!1;Ki.prototype.property="";Ki.prototype.spaceSeparated=!1;Ki.prototype.space=void 0;let DXe=0;const st=Hd(),Wn=Hd(),zA=Hd(),ke=Hd(),Yt=Hd(),sh=Hd(),Yi=Hd();function Hd(){return 2**++DXe}const HA=Object.freeze(Object.defineProperty({__proto__:null,boolean:st,booleanish:Wn,commaOrSpaceSeparated:Yi,commaSeparated:sh,number:ke,overloadedBoolean:zA,spaceSeparated:Yt},Symbol.toStringTag,{value:"Module"})),qk=Object.keys(HA);let l3=class extends Ki{constructor(t,n,r,i){let s=-1;if(super(t,n),T9(this,"space",i),typeof r=="number")for(;++s<qk.length;){const a=qk[s];T9(this,qk[s],(r&HA[a])===HA[a])}}};l3.prototype.defined=!0;function T9(e,t,n){n&&(e[t]=n)}function Ep(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const s=new l3(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[w0(r)]=r,n[w0(s.attribute)]=r}return new Cv(t,n,e.space)}const zie=Ep({properties:{ariaActiveDescendant:null,ariaAtomic:Wn,ariaAutoComplete:null,ariaBusy:Wn,ariaChecked:Wn,ariaColCount:ke,ariaColIndex:ke,ariaColSpan:ke,ariaControls:Yt,ariaCurrent:null,ariaDescribedBy:Yt,ariaDetails:null,ariaDisabled:Wn,ariaDropEffect:Yt,ariaErrorMessage:null,ariaExpanded:Wn,ariaFlowTo:Yt,ariaGrabbed:Wn,ariaHasPopup:null,ariaHidden:Wn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Yt,ariaLevel:ke,ariaLive:null,ariaModal:Wn,ariaMultiLine:Wn,ariaMultiSelectable:Wn,ariaOrientation:null,ariaOwns:Yt,ariaPlaceholder:null,ariaPosInSet:ke,ariaPressed:Wn,ariaReadOnly:Wn,ariaRelevant:null,ariaRequired:Wn,ariaRoleDescription:Yt,ariaRowCount:ke,ariaRowIndex:ke,ariaRowSpan:ke,ariaSelected:Wn,ariaSetSize:ke,ariaSort:null,ariaValueMax:ke,ariaValueMin:ke,ariaValueNow:ke,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Hie(e,t){return t in e?e[t]:t}function Vie(e,t){return Hie(e,t.toLowerCase())}const MXe=Ep({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:sh,acceptCharset:Yt,accessKey:Yt,action:null,allow:null,allowFullScreen:st,allowPaymentRequest:st,allowUserMedia:st,alt:null,as:null,async:st,autoCapitalize:null,autoComplete:Yt,autoFocus:st,autoPlay:st,blocking:Yt,capture:null,charSet:null,checked:st,cite:null,className:Yt,cols:ke,colSpan:null,content:null,contentEditable:Wn,controls:st,controlsList:Yt,coords:ke|sh,crossOrigin:null,data:null,dateTime:null,decoding:null,default:st,defer:st,dir:null,dirName:null,disabled:st,download:zA,draggable:Wn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:st,formTarget:null,headers:Yt,height:ke,hidden:zA,high:ke,href:null,hrefLang:null,htmlFor:Yt,httpEquiv:Yt,id:null,imageSizes:null,imageSrcSet:null,inert:st,inputMode:null,integrity:null,is:null,isMap:st,itemId:null,itemProp:Yt,itemRef:Yt,itemScope:st,itemType:Yt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:st,low:ke,manifest:null,max:null,maxLength:ke,media:null,method:null,min:null,minLength:ke,multiple:st,muted:st,name:null,nonce:null,noModule:st,noValidate:st,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:st,optimum:ke,pattern:null,ping:Yt,placeholder:null,playsInline:st,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:st,referrerPolicy:null,rel:Yt,required:st,reversed:st,rows:ke,rowSpan:ke,sandbox:Yt,scope:null,scoped:st,seamless:st,selected:st,shadowRootClonable:st,shadowRootDelegatesFocus:st,shadowRootMode:null,shape:null,size:ke,sizes:null,slot:null,span:ke,spellCheck:Wn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ke,step:null,style:null,tabIndex:ke,target:null,title:null,translate:null,type:null,typeMustMatch:st,useMap:null,value:Wn,width:ke,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Yt,axis:null,background:null,bgColor:null,border:ke,borderColor:null,bottomMargin:ke,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:st,declare:st,event:null,face:null,frame:null,frameBorder:null,hSpace:ke,leftMargin:ke,link:null,longDesc:null,lowSrc:null,marginHeight:ke,marginWidth:ke,noResize:st,noHref:st,noShade:st,noWrap:st,object:null,profile:null,prompt:null,rev:null,rightMargin:ke,rules:null,scheme:null,scrolling:Wn,standby:null,summary:null,text:null,topMargin:ke,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ke,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:st,disableRemotePlayback:st,prefix:null,property:null,results:ke,security:null,unselectable:null},space:"html",transform:Vie}),RXe=Ep({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Yi,accentHeight:ke,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ke,amplitude:ke,arabicForm:null,ascent:ke,attributeName:null,attributeType:null,azimuth:ke,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ke,by:null,calcMode:null,capHeight:ke,className:Yt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ke,diffuseConstant:ke,direction:null,display:null,dur:null,divisor:ke,dominantBaseline:null,download:st,dx:null,dy:null,edgeMode:null,editable:null,elevation:ke,enableBackground:null,end:null,event:null,exponent:ke,externalResourcesRequired:null,fill:null,fillOpacity:ke,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:sh,g2:sh,glyphName:sh,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ke,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ke,horizOriginX:ke,horizOriginY:ke,id:null,ideographic:ke,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ke,k:ke,k1:ke,k2:ke,k3:ke,k4:ke,kernelMatrix:Yi,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ke,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ke,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ke,overlineThickness:ke,paintOrder:null,panose1:null,path:null,pathLength:ke,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Yt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ke,pointsAtY:ke,pointsAtZ:ke,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Yi,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Yi,rev:Yi,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Yi,requiredFeatures:Yi,requiredFonts:Yi,requiredFormats:Yi,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ke,specularExponent:ke,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ke,strikethroughThickness:ke,string:null,stroke:null,strokeDashArray:Yi,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ke,strokeOpacity:ke,strokeWidth:null,style:null,surfaceScale:ke,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Yi,tabIndex:ke,tableValues:null,target:null,targetX:ke,targetY:ke,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Yi,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ke,underlineThickness:ke,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ke,values:null,vAlphabetic:ke,vMathematical:ke,vectorEffect:null,vHanging:ke,vIdeographic:ke,version:null,vertAdvY:ke,vertOriginX:ke,vertOriginY:ke,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ke,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Hie}),Wie=Ep({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),qie=Ep({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Vie}),Kie=Ep({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),LXe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},FXe=/[A-Z]/g,A9=/-[a-z]/g,BXe=/^data[-\w.:]+$/i;function c3(e,t){const n=w0(t);let r=t,i=Ki;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&BXe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(A9,UXe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!A9.test(s)){let a=s.replace(FXe,$Xe);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}i=l3}return new i(r,t)}function $Xe(e){return"-"+e.toLowerCase()}function UXe(e){return e.charAt(1).toUpperCase()}const sN=Uie([zie,MXe,Wie,qie,Kie],"html"),Sp=Uie([zie,RXe,Wie,qie,Kie],"svg");function j9(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function Gie(e){return e.join(" ").trim()}var u3={},O9=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,zXe=/\n/g,HXe=/^\s*/,VXe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,WXe=/^:\s*/,qXe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,KXe=/^[;\s]*/,GXe=/^\s+|\s+$/g,YXe=`
`,P9="/",I9="*",ju="",XXe="comment",QXe="declaration",JXe=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(m){var g=m.match(zXe);g&&(n+=g.length);var v=m.lastIndexOf(YXe);r=~v?m.length-v:r+m.length}function s(){var m={line:n,column:r};return function(g){return g.position=new a(m),u(),g}}function a(m){this.start=m,this.end={line:n,column:r},this.source=t.source}a.prototype.content=e;function o(m){var g=new Error(t.source+":"+n+":"+r+": "+m);if(g.reason=m,g.filename=t.source,g.line=n,g.column=r,g.source=e,!t.silent)throw g}function c(m){var g=m.exec(e);if(g){var v=g[0];return i(v),e=e.slice(v.length),g}}function u(){c(HXe)}function d(m){var g;for(m=m||[];g=f();)g!==!1&&m.push(g);return m}function f(){var m=s();if(!(P9!=e.charAt(0)||I9!=e.charAt(1))){for(var g=2;ju!=e.charAt(g)&&(I9!=e.charAt(g)||P9!=e.charAt(g+1));)++g;if(g+=2,ju===e.charAt(g-1))return o("End of comment missing");var v=e.slice(2,g-2);return r+=2,i(v),e=e.slice(g),r+=2,m({type:XXe,comment:v})}}function h(){var m=s(),g=c(VXe);if(g){if(f(),!c(WXe))return o("property missing ':'");var v=c(qXe),y=m({type:QXe,property:D9(g[0].replace(O9,ju)),value:v?D9(v[0].replace(O9,ju)):ju});return c(KXe),y}}function p(){var m=[];d(m);for(var g;g=h();)g!==!1&&(m.push(g),d(m));return m}return u(),p()};function D9(e){return e?e.replace(GXe,ju):ju}var ZXe=ii&&ii.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(u3,"__esModule",{value:!0});u3.default=tQe;var eQe=ZXe(JXe);function tQe(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,eQe.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var a=s.property,o=s.value;i?t(a,o,s):o&&(n=n||{},n[a]=o)}}),n}var aN={};Object.defineProperty(aN,"__esModule",{value:!0});aN.camelCase=void 0;var nQe=/^--[a-zA-Z0-9_-]+$/,rQe=/-([a-z])/g,iQe=/^[^-]+$/,sQe=/^-(webkit|moz|ms|o|khtml)-/,aQe=/^-(ms)-/,oQe=function(e){return!e||iQe.test(e)||nQe.test(e)},lQe=function(e,t){return t.toUpperCase()},M9=function(e,t){return"".concat(t,"-")},cQe=function(e,t){return t===void 0&&(t={}),oQe(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(aQe,M9):e=e.replace(sQe,M9),e.replace(rQe,lQe))};aN.camelCase=cQe;var uQe=ii&&ii.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},dQe=uQe(u3),fQe=aN;function VA(e,t){var n={};return!e||typeof e!="string"||(0,dQe.default)(e,function(r,i){r&&i&&(n[(0,fQe.camelCase)(r,t)]=i)}),n}VA.default=VA;var hQe=VA;const pQe=oi(hQe),oN=Yie("end"),So=Yie("start");function Yie(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function mQe(e){const t=So(e),n=oN(e);if(t&&n)return{start:t,end:n}}function ng(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?R9(e.position):"start"in e||"end"in e?R9(e):"line"in e||"column"in e?WA(e):""}function WA(e){return L9(e&&e.line)+":"+L9(e&&e.column)}function R9(e){return WA(e&&e.start)+"-"+WA(e&&e.end)}function L9(e){return e&&typeof e=="number"?e:1}class di extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},a=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(a=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?s.ruleId=r:(s.source=r.slice(0,c),s.ruleId=r.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const o=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=o?o.line:void 0,this.name=ng(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}di.prototype.file="";di.prototype.name="";di.prototype.reason="";di.prototype.message="";di.prototype.stack="";di.prototype.column=void 0;di.prototype.line=void 0;di.prototype.ancestors=void 0;di.prototype.cause=void 0;di.prototype.fatal=void 0;di.prototype.place=void 0;di.prototype.ruleId=void 0;di.prototype.source=void 0;const d3={}.hasOwnProperty,gQe=new Map,vQe=/[A-Z]/g,yQe=new Set(["table","tbody","thead","tfoot","tr"]),xQe=new Set(["td","th"]),Xie="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function bQe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=TQe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=CQe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Sp:sN,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=Qie(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function Qie(e,t,n){if(t.type==="element")return wQe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return EQe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return NQe(e,t,n);if(t.type==="mdxjsEsm")return SQe(e,t);if(t.type==="root")return _Qe(e,t,n);if(t.type==="text")return kQe(e,t)}function wQe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Sp,e.schema=i),e.ancestors.push(t);const s=Zie(e,t.tagName,!1),a=AQe(e,t);let o=h3(e,t);return yQe.has(t.tagName)&&(o=o.filter(function(c){return typeof c=="string"?!IXe(c):!0})),Jie(e,a,s,t),f3(a,o),e.ancestors.pop(),e.schema=r,e.create(t,s,a,n)}function EQe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}E0(e,t.position)}function SQe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);E0(e,t.position)}function NQe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Sp,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:Zie(e,t.name,!0),a=jQe(e,t),o=h3(e,t);return Jie(e,a,s,t),f3(a,o),e.ancestors.pop(),e.schema=r,e.create(t,s,a,n)}function _Qe(e,t,n){const r={};return f3(r,h3(e,t)),e.create(t,e.Fragment,r,n)}function kQe(e,t){return t.value}function Jie(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function f3(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function CQe(e,t,n){return r;function r(i,s,a,o){const u=Array.isArray(a.children)?n:t;return o?u(s,a,o):u(s,a)}}function TQe(e,t){return n;function n(r,i,s,a){const o=Array.isArray(s.children),c=So(r);return t(i,s,a,o,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function AQe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&d3.call(t.properties,i)){const s=OQe(e,i,t.properties[i]);if(s){const[a,o]=s;e.tableCellAlignToStyle&&a==="align"&&typeof o=="string"&&xQe.has(t.tagName)?r=o:n[a]=o}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function jQe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const a=s.expression;a.type;const o=a.properties[0];o.type,Object.assign(n,e.evaluater.evaluateExpression(o.argument))}else E0(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const o=r.value.data.estree.body[0];o.type,s=e.evaluater.evaluateExpression(o.expression)}else E0(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function h3(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:gQe;for(;++r<t.children.length;){const s=t.children[r];let a;if(e.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const u=i.get(c)||0;a=c+"-"+u,i.set(c,u+1)}}const o=Qie(e,s,a);o!==void 0&&n.push(o)}return n}function OQe(e,t,n){const r=c3(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?$ie(n):Gie(n)),r.property==="style"){let i=typeof n=="object"?n:PQe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=IQe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?LXe[r.property]||r.property:r.attribute,n]}}function PQe(e,t){try{return pQe(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new di("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=Xie+"#cannot-parse-style-attribute",i}}function Zie(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,a;for(;++s<i.length;){const o=k9(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};a=a?{type:"MemberExpression",object:a,property:o,computed:!!(s&&o.type==="Literal"),optional:!1}:o}r=a}else r=k9(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return d3.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);E0(e)}function E0(e,t){const n=new di("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Xie+"#cannot-handle-mdx-estrees-without-createevaluater",n}function IQe(e){const t={};let n;for(n in e)d3.call(e,n)&&(t[DQe(n)]=e[n]);return t}function DQe(e){let t=e.replace(vQe,MQe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function MQe(e){return"-"+e.toLowerCase()}const Kk={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},RQe={};function p3(e,t){const n=RQe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return ese(e,r,i)}function ese(e,t,n){if(LQe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return F9(e.children,t,n)}return Array.isArray(e)?F9(e,t,n):""}function F9(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=ese(e[i],t,n);return r.join("")}function LQe(e){return!!(e&&typeof e=="object")}const B9=document.createElement("i");function m3(e){const t="&"+e+";";B9.innerHTML=t;const n=B9.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function ms(e,t,n,r){const i=e.length;let s=0,a;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);s<r.length;)a=r.slice(s,s+1e4),a.unshift(t,0),e.splice(...a),s+=1e4,t+=1e4}function Fs(e,t){return e.length>0?(ms(e,e.length,0,t),e):t}const $9={}.hasOwnProperty;function tse(e){const t={};let n=-1;for(;++n<e.length;)FQe(t,e[n]);return t}function FQe(e,t){let n;for(n in t){const i=($9.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let a;if(s)for(a in s){$9.call(i,a)||(i[a]=[]);const o=s[a];BQe(i[a],Array.isArray(o)?o:o?[o]:[])}}}function BQe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);ms(e,0,0,r)}function nse(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function _a(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const vi=uu(/[A-Za-z]/),ri=uu(/[\dA-Za-z]/),$Qe=uu(/[#-'*+\--9=?A-Z^-~]/);function ww(e){return e!==null&&(e<32||e===127)}const qA=uu(/\d/),UQe=uu(/[\dA-Fa-f]/),zQe=uu(/[!-/:-@[-`{-~]/);function Je(e){return e!==null&&e<-2}function Vt(e){return e!==null&&(e<0||e===32)}function mt(e){return e===-2||e===-1||e===32}const lN=uu(new RegExp("\\p{P}|\\p{S}","u")),Dd=uu(/\s/);function uu(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Np(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let a="";if(s===37&&ri(e.charCodeAt(n+1))&&ri(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(a=String.fromCharCode(s));else if(s>55295&&s<57344){const o=e.charCodeAt(n+1);s<56320&&o>56319&&o<57344?(a=String.fromCharCode(s,o),i=1):a=""}else a=String.fromCharCode(s);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+i+1,a=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Et(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(c){return mt(c)?(e.enter(n),o(c)):t(c)}function o(c){return mt(c)&&s++<i?(e.consume(c),o):(e.exit(n),t(c))}}const HQe={tokenize:VQe};function VQe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Et(e,t,"linePrefix")}function i(o){return e.enter("paragraph"),s(o)}function s(o){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,a(o)}function a(o){if(o===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(o);return}return Je(o)?(e.consume(o),e.exit("chunkText"),s):(e.consume(o),a)}}const WQe={tokenize:qQe},U9={tokenize:KQe};function qQe(e){const t=this,n=[];let r=0,i,s,a;return o;function o(b){if(r<n.length){const S=n[r];return t.containerState=S[1],e.attempt(S[0].continuation,c,u)(b)}return u(b)}function c(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&x();const S=t.events.length;let E=S,N;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){N=t.events[E][1].end;break}y(r);let _=S;for(;_<t.events.length;)t.events[_][1].end={...N},_++;return ms(t.events,E+1,0,t.events.slice(S)),t.events.length=_,u(b)}return o(b)}function u(b){if(r===n.length){if(!i)return h(b);if(i.currentConstruct&&i.currentConstruct.concrete)return m(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(U9,d,f)(b)}function d(b){return i&&x(),y(r),h(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,a=t.now().offset,m(b)}function h(b){return t.containerState={},e.attempt(U9,p,m)(b)}function p(b){return r++,n.push([t.currentConstruct,t.containerState]),h(b)}function m(b){if(b===null){i&&x(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),g(b)}function g(b){if(b===null){v(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return Je(b)?(e.consume(b),v(e.exit("chunkFlow")),r=0,t.interrupt=void 0,o):(e.consume(b),g)}function v(b,S){const E=t.sliceStream(b);if(S&&E.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(E),t.parser.lazy[b.start.line]){let N=i.events.length;for(;N--;)if(i.events[N][1].start.offset<a&&(!i.events[N][1].end||i.events[N][1].end.offset>a))return;const _=t.events.length;let k=_,T,A;for(;k--;)if(t.events[k][0]==="exit"&&t.events[k][1].type==="chunkFlow"){if(T){A=t.events[k][1].end;break}T=!0}for(y(r),N=_;N<t.events.length;)t.events[N][1].end={...A},N++;ms(t.events,k+1,0,t.events.slice(_)),t.events.length=N}}function y(b){let S=n.length;for(;S-- >b;){const E=n[S];t.containerState=E[1],E[0].exit.call(t,e)}n.length=b}function x(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function KQe(e,t,n){return Et(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Uh(e){if(e===null||Vt(e)||Dd(e))return 1;if(lN(e))return 2}function cN(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const KA={name:"attention",resolveAll:GQe,tokenize:YQe};function GQe(e,t){let n=-1,r,i,s,a,o,c,u,d;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f={...e[r][1].end},h={...e[n][1].start};z9(f,-c),z9(h,c),a={type:c>1?"strongSequence":"emphasisSequence",start:f,end:{...e[r][1].end}},o={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:h},s={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...a.start},end:{...o.end}},e[r][1].end={...a.start},e[n][1].start={...o.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=Fs(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=Fs(u,[["enter",i,t],["enter",a,t],["exit",a,t],["enter",s,t]]),u=Fs(u,cN(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=Fs(u,[["exit",s,t],["enter",o,t],["exit",o,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(d=2,u=Fs(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):d=0,ms(e,r-1,n-r+3,u),n=r+u.length-d-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function YQe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Uh(r);let s;return a;function a(c){return s=c,e.enter("attentionSequence"),o(c)}function o(c){if(c===s)return e.consume(c),o;const u=e.exit("attentionSequence"),d=Uh(c),f=!d||d===2&&i||n.includes(c),h=!i||i===2&&d||n.includes(r);return u._open=!!(s===42?f:f&&(i||!h)),u._close=!!(s===42?h:h&&(d||!f)),t(c)}}function z9(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const XQe={name:"autolink",tokenize:QQe};function QQe(e,t,n){let r=0;return i;function i(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(p){return vi(p)?(e.consume(p),a):p===64?n(p):u(p)}function a(p){return p===43||p===45||p===46||ri(p)?(r=1,o(p)):u(p)}function o(p){return p===58?(e.consume(p),r=0,c):(p===43||p===45||p===46||ri(p))&&r++<32?(e.consume(p),o):(r=0,u(p))}function c(p){return p===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):p===null||p===32||p===60||ww(p)?n(p):(e.consume(p),c)}function u(p){return p===64?(e.consume(p),d):$Qe(p)?(e.consume(p),u):n(p)}function d(p){return ri(p)?f(p):n(p)}function f(p){return p===46?(e.consume(p),r=0,d):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):h(p)}function h(p){if((p===45||ri(p))&&r++<63){const m=p===45?h:f;return e.consume(p),m}return n(p)}}const Tv={partial:!0,tokenize:JQe};function JQe(e,t,n){return r;function r(s){return mt(s)?Et(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Je(s)?t(s):n(s)}}const rse={continuation:{tokenize:eJe},exit:tJe,name:"blockQuote",tokenize:ZQe};function ZQe(e,t,n){const r=this;return i;function i(a){if(a===62){const o=r.containerState;return o.open||(e.enter("blockQuote",{_container:!0}),o.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),s}return n(a)}function s(a){return mt(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function eJe(e,t,n){const r=this;return i;function i(a){return mt(a)?Et(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return e.attempt(rse,t,n)(a)}}function tJe(e){e.exit("blockQuote")}const ise={name:"characterEscape",tokenize:nJe};function nJe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return zQe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const sse={name:"characterReference",tokenize:rJe};function rJe(e,t,n){const r=this;let i=0,s,a;return o;function o(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),c}function c(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),s=31,a=ri,d(f))}function u(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,a=UQe,d):(e.enter("characterReferenceValue"),s=7,a=qA,d(f))}function d(f){if(f===59&&i){const h=e.exit("characterReferenceValue");return a===ri&&!m3(r.sliceSerialize(h))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(f)&&i++<s?(e.consume(f),d):n(f)}}const H9={partial:!0,tokenize:sJe},V9={concrete:!0,name:"codeFenced",tokenize:iJe};function iJe(e,t,n){const r=this,i={partial:!0,tokenize:E};let s=0,a=0,o;return c;function c(N){return u(N)}function u(N){const _=r.events[r.events.length-1];return s=_&&_[1].type==="linePrefix"?_[2].sliceSerialize(_[1],!0).length:0,o=N,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(N)}function d(N){return N===o?(a++,e.consume(N),d):a<3?n(N):(e.exit("codeFencedFenceSequence"),mt(N)?Et(e,f,"whitespace")(N):f(N))}function f(N){return N===null||Je(N)?(e.exit("codeFencedFence"),r.interrupt?t(N):e.check(H9,g,S)(N)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(N))}function h(N){return N===null||Je(N)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(N)):mt(N)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Et(e,p,"whitespace")(N)):N===96&&N===o?n(N):(e.consume(N),h)}function p(N){return N===null||Je(N)?f(N):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(N))}function m(N){return N===null||Je(N)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(N)):N===96&&N===o?n(N):(e.consume(N),m)}function g(N){return e.attempt(i,S,v)(N)}function v(N){return e.enter("lineEnding"),e.consume(N),e.exit("lineEnding"),y}function y(N){return s>0&&mt(N)?Et(e,x,"linePrefix",s+1)(N):x(N)}function x(N){return N===null||Je(N)?e.check(H9,g,S)(N):(e.enter("codeFlowValue"),b(N))}function b(N){return N===null||Je(N)?(e.exit("codeFlowValue"),x(N)):(e.consume(N),b)}function S(N){return e.exit("codeFenced"),t(N)}function E(N,_,k){let T=0;return A;function A(L){return N.enter("lineEnding"),N.consume(L),N.exit("lineEnding"),j}function j(L){return N.enter("codeFencedFence"),mt(L)?Et(N,D,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):D(L)}function D(L){return L===o?(N.enter("codeFencedFenceSequence"),I(L)):k(L)}function I(L){return L===o?(T++,N.consume(L),I):T>=a?(N.exit("codeFencedFenceSequence"),mt(L)?Et(N,M,"whitespace")(L):M(L)):k(L)}function M(L){return L===null||Je(L)?(N.exit("codeFencedFence"),_(L)):k(L)}}}function sJe(e,t,n){const r=this;return i;function i(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s)}function s(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}const Gk={name:"codeIndented",tokenize:oJe},aJe={partial:!0,tokenize:lJe};function oJe(e,t,n){const r=this;return i;function i(u){return e.enter("codeIndented"),Et(e,s,"linePrefix",5)(u)}function s(u){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?a(u):n(u)}function a(u){return u===null?c(u):Je(u)?e.attempt(aJe,a,c)(u):(e.enter("codeFlowValue"),o(u))}function o(u){return u===null||Je(u)?(e.exit("codeFlowValue"),a(u)):(e.consume(u),o)}function c(u){return e.exit("codeIndented"),t(u)}}function lJe(e,t,n){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?n(a):Je(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):Et(e,s,"linePrefix",5)(a)}function s(a){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):Je(a)?i(a):n(a)}}const cJe={name:"codeText",previous:dJe,resolve:uJe,tokenize:fJe};function uJe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function dJe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function fJe(e,t,n){let r=0,i,s;return a;function a(f){return e.enter("codeText"),e.enter("codeTextSequence"),o(f)}function o(f){return f===96?(e.consume(f),r++,o):(e.exit("codeTextSequence"),c(f))}function c(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),c):f===96?(s=e.enter("codeTextSequence"),i=0,d(f)):Je(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(f))}function u(f){return f===null||f===32||f===96||Je(f)?(e.exit("codeTextData"),c(f)):(e.consume(f),u)}function d(f){return f===96?(e.consume(f),i++,d):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",u(f))}}class hJe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&rm(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),rm(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),rm(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);rm(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);rm(this.left,n.reverse())}}}function rm(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function ase(e){const t={};let n=-1,r,i,s,a,o,c,u;const d=new hJe(e);for(;++n<d.length;){for(;n in t;)n=t[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,pJe(d,n)),n=t[n],u=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(a=d.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(d.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(r[1].end={...d.get(i)[1].start},o=d.slice(i,n),o.unshift(r),d.splice(i,n-i+1,o))}}return ms(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function pJe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const o=a.events,c=[],u={};let d,f,h=-1,p=n,m=0,g=0;const v=[g];for(;p;){for(;e.get(++i)[1]!==p;);s.push(i),p._tokenizer||(d=r.sliceStream(p),p.next||d.push(null),f&&a.defineSkip(p.start),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(d),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),f=p,p=p.next}for(p=n;++h<o.length;)o[h][0]==="exit"&&o[h-1][0]==="enter"&&o[h][1].type===o[h-1][1].type&&o[h][1].start.line!==o[h][1].end.line&&(g=h+1,v.push(g),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(a.events=[],p?(p._tokenizer=void 0,p.previous=void 0):v.pop(),h=v.length;h--;){const y=o.slice(v[h],v[h+1]),x=s.pop();c.push([x,x+y.length-1]),e.splice(x,2,y)}for(c.reverse(),h=-1;++h<c.length;)u[m+c[h][0]]=m+c[h][1],m+=c[h][1]-c[h][0]-1;return u}const mJe={resolve:vJe,tokenize:yJe},gJe={partial:!0,tokenize:xJe};function vJe(e){return ase(e),e}function yJe(e,t){let n;return r;function r(o){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(o)}function i(o){return o===null?s(o):Je(o)?e.check(gJe,a,s)(o):(e.consume(o),i)}function s(o){return e.exit("chunkContent"),e.exit("content"),t(o)}function a(o){return e.consume(o),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function xJe(e,t,n){const r=this;return i;function i(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Et(e,s,"linePrefix")}function s(a){if(a===null||Je(a))return n(a);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):e.interrupt(r.parser.constructs.flow,n,t)(a)}}function ose(e,t,n,r,i,s,a,o,c){const u=c||Number.POSITIVE_INFINITY;let d=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),h):y===null||y===32||y===41||ww(y)?n(y):(e.enter(r),e.enter(a),e.enter(o),e.enter("chunkString",{contentType:"string"}),g(y))}function h(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===62?(e.exit("chunkString"),e.exit(o),h(y)):y===null||y===60||Je(y)?n(y):(e.consume(y),y===92?m:p)}function m(y){return y===60||y===62||y===92?(e.consume(y),p):p(y)}function g(y){return!d&&(y===null||y===41||Vt(y))?(e.exit("chunkString"),e.exit(o),e.exit(a),e.exit(r),t(y)):d<u&&y===40?(e.consume(y),d++,g):y===41?(e.consume(y),d--,g):y===null||y===32||y===40||ww(y)?n(y):(e.consume(y),y===92?v:g)}function v(y){return y===40||y===41||y===92?(e.consume(y),g):g(y)}}function lse(e,t,n,r,i,s){const a=this;let o=0,c;return u;function u(p){return e.enter(r),e.enter(i),e.consume(p),e.exit(i),e.enter(s),d}function d(p){return o>999||p===null||p===91||p===93&&!c||p===94&&!o&&"_hiddenFootnoteSupport"in a.parser.constructs?n(p):p===93?(e.exit(s),e.enter(i),e.consume(p),e.exit(i),e.exit(r),t):Je(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),f(p))}function f(p){return p===null||p===91||p===93||Je(p)||o++>999?(e.exit("chunkString"),d(p)):(e.consume(p),c||(c=!mt(p)),p===92?h:f)}function h(p){return p===91||p===92||p===93?(e.consume(p),o++,f):f(p)}}function cse(e,t,n,r,i,s){let a;return o;function o(h){return h===34||h===39||h===40?(e.enter(r),e.enter(i),e.consume(h),e.exit(i),a=h===40?41:h,c):n(h)}function c(h){return h===a?(e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):(e.enter(s),u(h))}function u(h){return h===a?(e.exit(s),c(a)):h===null?n(h):Je(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),Et(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===a||h===null||Je(h)?(e.exit("chunkString"),u(h)):(e.consume(h),h===92?f:d)}function f(h){return h===a||h===92?(e.consume(h),d):d(h)}}function rg(e,t){let n;return r;function r(i){return Je(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):mt(i)?Et(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const bJe={name:"definition",tokenize:EJe},wJe={partial:!0,tokenize:SJe};function EJe(e,t,n){const r=this;let i;return s;function s(p){return e.enter("definition"),a(p)}function a(p){return lse.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function o(p){return i=_a(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),c):n(p)}function c(p){return Vt(p)?rg(e,u)(p):u(p)}function u(p){return ose(e,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function d(p){return e.attempt(wJe,f,f)(p)}function f(p){return mt(p)?Et(e,h,"whitespace")(p):h(p)}function h(p){return p===null||Je(p)?(e.exit("definition"),r.parser.defined.push(i),t(p)):n(p)}}function SJe(e,t,n){return r;function r(o){return Vt(o)?rg(e,i)(o):n(o)}function i(o){return cse(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function s(o){return mt(o)?Et(e,a,"whitespace")(o):a(o)}function a(o){return o===null||Je(o)?t(o):n(o)}}const NJe={name:"hardBreakEscape",tokenize:_Je};function _Je(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Je(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const kJe={name:"headingAtx",resolve:CJe,tokenize:TJe};function CJe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},ms(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function TJe(e,t,n){let r=0;return i;function i(d){return e.enter("atxHeading"),s(d)}function s(d){return e.enter("atxHeadingSequence"),a(d)}function a(d){return d===35&&r++<6?(e.consume(d),a):d===null||Vt(d)?(e.exit("atxHeadingSequence"),o(d)):n(d)}function o(d){return d===35?(e.enter("atxHeadingSequence"),c(d)):d===null||Je(d)?(e.exit("atxHeading"),t(d)):mt(d)?Et(e,o,"whitespace")(d):(e.enter("atxHeadingText"),u(d))}function c(d){return d===35?(e.consume(d),c):(e.exit("atxHeadingSequence"),o(d))}function u(d){return d===null||d===35||Vt(d)?(e.exit("atxHeadingText"),o(d)):(e.consume(d),u)}}const AJe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],W9=["pre","script","style","textarea"],jJe={concrete:!0,name:"htmlFlow",resolveTo:IJe,tokenize:DJe},OJe={partial:!0,tokenize:RJe},PJe={partial:!0,tokenize:MJe};function IJe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function DJe(e,t,n){const r=this;let i,s,a,o,c;return u;function u($){return d($)}function d($){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume($),f}function f($){return $===33?(e.consume($),h):$===47?(e.consume($),s=!0,g):$===63?(e.consume($),i=3,r.interrupt?t:O):vi($)?(e.consume($),a=String.fromCharCode($),v):n($)}function h($){return $===45?(e.consume($),i=2,p):$===91?(e.consume($),i=5,o=0,m):vi($)?(e.consume($),i=4,r.interrupt?t:O):n($)}function p($){return $===45?(e.consume($),r.interrupt?t:O):n($)}function m($){const ye="CDATA[";return $===ye.charCodeAt(o++)?(e.consume($),o===ye.length?r.interrupt?t:D:m):n($)}function g($){return vi($)?(e.consume($),a=String.fromCharCode($),v):n($)}function v($){if($===null||$===47||$===62||Vt($)){const ye=$===47,Te=a.toLowerCase();return!ye&&!s&&W9.includes(Te)?(i=1,r.interrupt?t($):D($)):AJe.includes(a.toLowerCase())?(i=6,ye?(e.consume($),y):r.interrupt?t($):D($)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n($):s?x($):b($))}return $===45||ri($)?(e.consume($),a+=String.fromCharCode($),v):n($)}function y($){return $===62?(e.consume($),r.interrupt?t:D):n($)}function x($){return mt($)?(e.consume($),x):A($)}function b($){return $===47?(e.consume($),A):$===58||$===95||vi($)?(e.consume($),S):mt($)?(e.consume($),b):A($)}function S($){return $===45||$===46||$===58||$===95||ri($)?(e.consume($),S):E($)}function E($){return $===61?(e.consume($),N):mt($)?(e.consume($),E):b($)}function N($){return $===null||$===60||$===61||$===62||$===96?n($):$===34||$===39?(e.consume($),c=$,_):mt($)?(e.consume($),N):k($)}function _($){return $===c?(e.consume($),c=null,T):$===null||Je($)?n($):(e.consume($),_)}function k($){return $===null||$===34||$===39||$===47||$===60||$===61||$===62||$===96||Vt($)?E($):(e.consume($),k)}function T($){return $===47||$===62||mt($)?b($):n($)}function A($){return $===62?(e.consume($),j):n($)}function j($){return $===null||Je($)?D($):mt($)?(e.consume($),j):n($)}function D($){return $===45&&i===2?(e.consume($),P):$===60&&i===1?(e.consume($),B):$===62&&i===4?(e.consume($),Q):$===63&&i===3?(e.consume($),O):$===93&&i===5?(e.consume($),F):Je($)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(OJe,Y,I)($)):$===null||Je($)?(e.exit("htmlFlowData"),I($)):(e.consume($),D)}function I($){return e.check(PJe,M,Y)($)}function M($){return e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),L}function L($){return $===null||Je($)?I($):(e.enter("htmlFlowData"),D($))}function P($){return $===45?(e.consume($),O):D($)}function B($){return $===47?(e.consume($),a="",R):D($)}function R($){if($===62){const ye=a.toLowerCase();return W9.includes(ye)?(e.consume($),Q):D($)}return vi($)&&a.length<8?(e.consume($),a+=String.fromCharCode($),R):D($)}function F($){return $===93?(e.consume($),O):D($)}function O($){return $===62?(e.consume($),Q):$===45&&i===2?(e.consume($),O):D($)}function Q($){return $===null||Je($)?(e.exit("htmlFlowData"),Y($)):(e.consume($),Q)}function Y($){return e.exit("htmlFlow"),t($)}}function MJe(e,t,n){const r=this;return i;function i(a){return Je(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s):n(a)}function s(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}function RJe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(Tv,t,n)}}const LJe={name:"htmlText",tokenize:FJe};function FJe(e,t,n){const r=this;let i,s,a;return o;function o(O){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(O),c}function c(O){return O===33?(e.consume(O),u):O===47?(e.consume(O),E):O===63?(e.consume(O),b):vi(O)?(e.consume(O),k):n(O)}function u(O){return O===45?(e.consume(O),d):O===91?(e.consume(O),s=0,m):vi(O)?(e.consume(O),x):n(O)}function d(O){return O===45?(e.consume(O),p):n(O)}function f(O){return O===null?n(O):O===45?(e.consume(O),h):Je(O)?(a=f,B(O)):(e.consume(O),f)}function h(O){return O===45?(e.consume(O),p):f(O)}function p(O){return O===62?P(O):O===45?h(O):f(O)}function m(O){const Q="CDATA[";return O===Q.charCodeAt(s++)?(e.consume(O),s===Q.length?g:m):n(O)}function g(O){return O===null?n(O):O===93?(e.consume(O),v):Je(O)?(a=g,B(O)):(e.consume(O),g)}function v(O){return O===93?(e.consume(O),y):g(O)}function y(O){return O===62?P(O):O===93?(e.consume(O),y):g(O)}function x(O){return O===null||O===62?P(O):Je(O)?(a=x,B(O)):(e.consume(O),x)}function b(O){return O===null?n(O):O===63?(e.consume(O),S):Je(O)?(a=b,B(O)):(e.consume(O),b)}function S(O){return O===62?P(O):b(O)}function E(O){return vi(O)?(e.consume(O),N):n(O)}function N(O){return O===45||ri(O)?(e.consume(O),N):_(O)}function _(O){return Je(O)?(a=_,B(O)):mt(O)?(e.consume(O),_):P(O)}function k(O){return O===45||ri(O)?(e.consume(O),k):O===47||O===62||Vt(O)?T(O):n(O)}function T(O){return O===47?(e.consume(O),P):O===58||O===95||vi(O)?(e.consume(O),A):Je(O)?(a=T,B(O)):mt(O)?(e.consume(O),T):P(O)}function A(O){return O===45||O===46||O===58||O===95||ri(O)?(e.consume(O),A):j(O)}function j(O){return O===61?(e.consume(O),D):Je(O)?(a=j,B(O)):mt(O)?(e.consume(O),j):T(O)}function D(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(e.consume(O),i=O,I):Je(O)?(a=D,B(O)):mt(O)?(e.consume(O),D):(e.consume(O),M)}function I(O){return O===i?(e.consume(O),i=void 0,L):O===null?n(O):Je(O)?(a=I,B(O)):(e.consume(O),I)}function M(O){return O===null||O===34||O===39||O===60||O===61||O===96?n(O):O===47||O===62||Vt(O)?T(O):(e.consume(O),M)}function L(O){return O===47||O===62||Vt(O)?T(O):n(O)}function P(O){return O===62?(e.consume(O),e.exit("htmlTextData"),e.exit("htmlText"),t):n(O)}function B(O){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(O),e.exit("lineEnding"),R}function R(O){return mt(O)?Et(e,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):F(O)}function F(O){return e.enter("htmlTextData"),a(O)}}const g3={name:"labelEnd",resolveAll:zJe,resolveTo:HJe,tokenize:VJe},BJe={tokenize:WJe},$Je={tokenize:qJe},UJe={tokenize:KJe};function zJe(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&ms(e,0,e.length,n),e}function HJe(e,t){let n=e.length,r=0,i,s,a,o;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=n);const c={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[s][1].start},end:{...e[a][1].end}},d={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[a-2][1].start}};return o=[["enter",c,t],["enter",u,t]],o=Fs(o,e.slice(s+1,s+r+3)),o=Fs(o,[["enter",d,t]]),o=Fs(o,cN(t.parser.constructs.insideSpan.null,e.slice(s+r+4,a-3),t)),o=Fs(o,[["exit",d,t],e[a-2],e[a-1],["exit",u,t]]),o=Fs(o,e.slice(a+1)),o=Fs(o,[["exit",c,t]]),ms(e,s,e.length,o),e}function VJe(e,t,n){const r=this;let i=r.events.length,s,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return o;function o(h){return s?s._inactive?f(h):(a=r.parser.defined.includes(_a(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelEnd"),c):n(h)}function c(h){return h===40?e.attempt(BJe,d,a?d:f)(h):h===91?e.attempt($Je,d,a?u:f)(h):a?d(h):f(h)}function u(h){return e.attempt(UJe,d,f)(h)}function d(h){return t(h)}function f(h){return s._balanced=!0,n(h)}}function WJe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Vt(f)?rg(e,s)(f):s(f)}function s(f){return f===41?d(f):ose(e,a,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function a(f){return Vt(f)?rg(e,c)(f):d(f)}function o(f){return n(f)}function c(f){return f===34||f===39||f===40?cse(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):d(f)}function u(f){return Vt(f)?rg(e,d)(f):d(f)}function d(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function qJe(e,t,n){const r=this;return i;function i(o){return lse.call(r,e,s,a,"reference","referenceMarker","referenceString")(o)}function s(o){return r.parser.defined.includes(_a(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(o):n(o)}function a(o){return n(o)}}function KJe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const GJe={name:"labelStartImage",resolveAll:g3.resolveAll,tokenize:YJe};function YJe(e,t,n){const r=this;return i;function i(o){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(o),e.exit("labelImageMarker"),s}function s(o){return o===91?(e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelImage"),a):n(o)}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const XJe={name:"labelStartLink",resolveAll:g3.resolveAll,tokenize:QJe};function QJe(e,t,n){const r=this;return i;function i(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Yk={name:"lineEnding",tokenize:JJe};function JJe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Et(e,t,"linePrefix")}}const Lx={name:"thematicBreak",tokenize:ZJe};function ZJe(e,t,n){let r=0,i;return s;function s(u){return e.enter("thematicBreak"),a(u)}function a(u){return i=u,o(u)}function o(u){return u===i?(e.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||Je(u))?(e.exit("thematicBreak"),t(u)):n(u)}function c(u){return u===i?(e.consume(u),r++,c):(e.exit("thematicBreakSequence"),mt(u)?Et(e,o,"whitespace")(u):o(u))}}const ji={continuation:{tokenize:rZe},exit:sZe,name:"list",tokenize:nZe},eZe={partial:!0,tokenize:aZe},tZe={partial:!0,tokenize:iZe};function nZe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return o;function o(p){const m=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:qA(p)){if(r.containerState.type||(r.containerState.type=m,e.enter(m,{_container:!0})),m==="listUnordered")return e.enter("listItemPrefix"),p===42||p===45?e.check(Lx,n,u)(p):u(p);if(!r.interrupt||p===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(p)}return n(p)}function c(p){return qA(p)&&++a<10?(e.consume(p),c):(!r.interrupt||a<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(e.exit("listItemValue"),u(p)):n(p)}function u(p){return e.enter("listItemMarker"),e.consume(p),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,e.check(Tv,r.interrupt?n:d,e.attempt(eZe,h,f))}function d(p){return r.containerState.initialBlankLine=!0,s++,h(p)}function f(p){return mt(p)?(e.enter("listItemPrefixWhitespace"),e.consume(p),e.exit("listItemPrefixWhitespace"),h):n(p)}function h(p){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(p)}}function rZe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Tv,i,s);function i(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Et(e,t,"listItemIndent",r.containerState.size+1)(o)}function s(o){return r.containerState.furtherBlankLines||!mt(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(tZe,t,a)(o))}function a(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,Et(e,e.attempt(ji,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function iZe(e,t,n){const r=this;return Et(e,i,"listItemIndent",r.containerState.size+1);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?t(s):n(s)}}function sZe(e){e.exit(this.containerState.type)}function aZe(e,t,n){const r=this;return Et(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const a=r.events[r.events.length-1];return!mt(s)&&a&&a[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const q9={name:"setextUnderline",resolveTo:oZe,tokenize:lZe};function oZe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const a={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",a,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=a,e.push(["exit",a,t]),e}function lZe(e,t,n){const r=this;let i;return s;function s(u){let d=r.events.length,f;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){f=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=u,a(u)):n(u)}function a(u){return e.enter("setextHeadingLineSequence"),o(u)}function o(u){return u===i?(e.consume(u),o):(e.exit("setextHeadingLineSequence"),mt(u)?Et(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||Je(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const cZe={tokenize:uZe};function uZe(e){const t=this,n=e.attempt(Tv,r,e.attempt(this.parser.constructs.flowInitial,i,Et(e,e.attempt(this.parser.constructs.flow,i,e.attempt(mJe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const dZe={resolveAll:dse()},fZe=use("string"),hZe=use("text");function use(e){return{resolveAll:dse(e==="text"?pZe:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,a,o);return a;function a(d){return u(d)?s(d):o(d)}function o(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),c}function c(d){return u(d)?(n.exit("data"),s(d)):(n.consume(d),c)}function u(d){if(d===null)return!0;const f=i[d];let h=-1;if(f)for(;++h<f.length;){const p=f[h];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function dse(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function pZe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,a=-1,o=0,c;for(;s--;){const u=i[s];if(typeof u=="string"){for(a=u.length;u.charCodeAt(a-1)===32;)o++,a--;if(a)break;a=-1}else if(u===-2)c=!0,o++;else if(u!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(o=0),o){const u={type:n===e.length||c||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:r.start._bufferIndex+a,_index:r.start._index+s,line:r.end.line,column:r.end.column-o,offset:r.end.offset-o},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const mZe={42:ji,43:ji,45:ji,48:ji,49:ji,50:ji,51:ji,52:ji,53:ji,54:ji,55:ji,56:ji,57:ji,62:rse},gZe={91:bJe},vZe={[-2]:Gk,[-1]:Gk,32:Gk},yZe={35:kJe,42:Lx,45:[q9,Lx],60:jJe,61:q9,95:Lx,96:V9,126:V9},xZe={38:sse,92:ise},bZe={[-5]:Yk,[-4]:Yk,[-3]:Yk,33:GJe,38:sse,42:KA,60:[XQe,LJe],91:XJe,92:[NJe,ise],93:g3,95:KA,96:cJe},wZe={null:[KA,dZe]},EZe={null:[42,95]},SZe={null:[]},NZe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:EZe,contentInitial:gZe,disable:SZe,document:mZe,flow:yZe,flowInitial:vZe,insideSpan:wZe,string:xZe,text:bZe},Symbol.toStringTag,{value:"Module"}));function _Ze(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let a=[],o=[];const c={attempt:_(E),check:_(N),consume:x,enter:b,exit:S,interrupt:_(N,{interrupt:!0})},u={code:null,containerState:{},defineSkip:g,events:[],now:m,parser:e,previous:null,sliceSerialize:h,sliceStream:p,write:f};let d=t.tokenize.call(u,c);return t.resolveAll&&s.push(t),u;function f(j){return a=Fs(a,j),v(),a[a.length-1]!==null?[]:(k(t,0),u.events=cN(s,u.events,u),u.events)}function h(j,D){return CZe(p(j),D)}function p(j){return kZe(a,j)}function m(){const{_bufferIndex:j,_index:D,line:I,column:M,offset:L}=r;return{_bufferIndex:j,_index:D,line:I,column:M,offset:L}}function g(j){i[j.line]=j.column,A()}function v(){let j;for(;r._index<a.length;){const D=a[r._index];if(typeof D=="string")for(j=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===j&&r._bufferIndex<D.length;)y(D.charCodeAt(r._bufferIndex));else y(D)}}function y(j){d=d(j)}function x(j){Je(j)?(r.line++,r.column=1,r.offset+=j===-3?2:1,A()):j!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=j}function b(j,D){const I=D||{};return I.type=j,I.start=m(),u.events.push(["enter",I,u]),o.push(I),I}function S(j){const D=o.pop();return D.end=m(),u.events.push(["exit",D,u]),D}function E(j,D){k(j,D.from)}function N(j,D){D.restore()}function _(j,D){return I;function I(M,L,P){let B,R,F,O;return Array.isArray(M)?Y(M):"tokenize"in M?Y([M]):Q(M);function Q(U){return K;function K(fe){const oe=fe!==null&&U[fe],le=fe!==null&&U.null,Ee=[...Array.isArray(oe)?oe:oe?[oe]:[],...Array.isArray(le)?le:le?[le]:[]];return Y(Ee)(fe)}}function Y(U){return B=U,R=0,U.length===0?P:$(U[R])}function $(U){return K;function K(fe){return O=T(),F=U,U.partial||(u.currentConstruct=U),U.name&&u.parser.constructs.disable.null.includes(U.name)?Te():U.tokenize.call(D?Object.assign(Object.create(u),D):u,c,ye,Te)(fe)}}function ye(U){return j(F,O),L}function Te(U){return O.restore(),++R<B.length?$(B[R]):P}}}function k(j,D){j.resolveAll&&!s.includes(j)&&s.push(j),j.resolve&&ms(u.events,D,u.events.length-D,j.resolve(u.events.slice(D),u)),j.resolveTo&&(u.events=j.resolveTo(u.events,u))}function T(){const j=m(),D=u.previous,I=u.currentConstruct,M=u.events.length,L=Array.from(o);return{from:M,restore:P};function P(){r=j,u.previous=D,u.currentConstruct=I,u.events.length=M,o=L,A()}}function A(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function kZe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let a;if(n===i)a=[e[n].slice(r,s)];else{if(a=e.slice(n,i),r>-1){const o=a[0];typeof o=="string"?a[0]=o.slice(r):a.shift()}s>0&&a.push(e[i].slice(0,s))}return a}function CZe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&i)continue;a=" ";break}default:a=String.fromCharCode(s)}i=s===-2,r.push(a)}return r.join("")}function TZe(e){const r={constructs:tse([NZe,...(e||{}).extensions||[]]),content:i(HQe),defined:[],document:i(WQe),flow:i(cZe),lazy:{},string:i(fZe),text:i(hZe)};return r;function i(s){return a;function a(o){return _Ze(r,s,o)}}}function AZe(e){for(;!ase(e););return e}const K9=/[\0\t\n\r]/g;function jZe(){let e=1,t="",n=!0,r;return i;function i(s,a,o){const c=[];let u,d,f,h,p;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(K9.lastIndex=f,u=K9.exec(s),h=u&&u.index!==void 0?u.index:s.length,p=s.charCodeAt(h),!u){t=s.slice(f);break}if(p===10&&f===h&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),f<h&&(c.push(s.slice(f,h)),e+=h-f),p){case 0:{c.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,c.push(-2);e++<d;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}f=h+1}return o&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const OZe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function PZe(e){return e.replace(OZe,IZe)}function IZe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return nse(n.slice(s?2:1),s?16:10)}return m3(n)||e}const fse={}.hasOwnProperty;function DZe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),MZe(n)(AZe(TZe(n).document().write(jZe()(e,t,!0))))}function MZe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(me),autolinkProtocol:T,autolinkEmail:T,atxHeading:s(et),blockQuote:s(le),characterEscape:T,characterReference:T,codeFenced:s(Ee),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(Ee,a),codeText:s(se,a),codeTextData:T,data:T,codeFlowValue:T,definition:s(qe),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(Oe),hardBreakEscape:s(J),hardBreakTrailing:s(J),htmlFlow:s(pe,a),htmlFlowData:T,htmlText:s(pe,a),htmlTextData:T,image:s(q),label:a,link:s(me),listItem:s(He),listItemValue:h,listOrdered:s(Be,f),listUnordered:s(Be),paragraph:s(ct),reference:$,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(et),strong:s(Pt),thematicBreak:s(Me)},exit:{atxHeading:c(),atxHeadingSequence:E,autolink:c(),autolinkEmail:oe,autolinkProtocol:fe,blockQuote:c(),characterEscapeValue:A,characterReferenceMarkerHexadecimal:Te,characterReferenceMarkerNumeric:Te,characterReferenceValue:U,characterReference:K,codeFenced:c(v),codeFencedFence:g,codeFencedFenceInfo:p,codeFencedFenceMeta:m,codeFlowValue:A,codeIndented:c(y),codeText:c(L),codeTextData:A,data:A,definition:c(),definitionDestinationString:S,definitionLabelString:x,definitionTitleString:b,emphasis:c(),hardBreakEscape:c(D),hardBreakTrailing:c(D),htmlFlow:c(I),htmlFlowData:A,htmlText:c(M),htmlTextData:A,image:c(B),label:F,labelText:R,lineEnding:j,link:c(P),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:ye,resourceDestinationString:O,resourceTitleString:Q,resource:Y,setextHeading:c(k),setextHeadingLineSequence:_,setextHeadingText:N,strong:c(),thematicBreak:c()}};hse(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(G){let te={type:"root",children:[]};const xe={stack:[te],tokenStack:[],config:t,enter:o,exit:u,buffer:a,resume:d,data:n},Pe=[];let $e=-1;for(;++$e<G.length;)if(G[$e][1].type==="listOrdered"||G[$e][1].type==="listUnordered")if(G[$e][0]==="enter")Pe.push($e);else{const Ct=Pe.pop();$e=i(G,Ct,$e)}for($e=-1;++$e<G.length;){const Ct=t[G[$e][0]];fse.call(Ct,G[$e][1].type)&&Ct[G[$e][1].type].call(Object.assign({sliceSerialize:G[$e][2].sliceSerialize},xe),G[$e][1])}if(xe.tokenStack.length>0){const Ct=xe.tokenStack[xe.tokenStack.length-1];(Ct[1]||G9).call(xe,void 0,Ct[0])}for(te.position={start:Ol(G.length>0?G[0][1].start:{line:1,column:1,offset:0}),end:Ol(G.length>0?G[G.length-2][1].end:{line:1,column:1,offset:0})},$e=-1;++$e<t.transforms.length;)te=t.transforms[$e](te)||te;return te}function i(G,te,xe){let Pe=te-1,$e=-1,Ct=!1,be,At,Kt,mr;for(;++Pe<=xe;){const An=G[Pe];switch(An[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{An[0]==="enter"?$e++:$e--,mr=void 0;break}case"lineEndingBlank":{An[0]==="enter"&&(be&&!mr&&!$e&&!Kt&&(Kt=Pe),mr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:mr=void 0}if(!$e&&An[0]==="enter"&&An[1].type==="listItemPrefix"||$e===-1&&An[0]==="exit"&&(An[1].type==="listUnordered"||An[1].type==="listOrdered")){if(be){let aa=Pe;for(At=void 0;aa--;){const oa=G[aa];if(oa[1].type==="lineEnding"||oa[1].type==="lineEndingBlank"){if(oa[0]==="exit")continue;At&&(G[At][1].type="lineEndingBlank",Ct=!0),oa[1].type="lineEnding",At=aa}else if(!(oa[1].type==="linePrefix"||oa[1].type==="blockQuotePrefix"||oa[1].type==="blockQuotePrefixWhitespace"||oa[1].type==="blockQuoteMarker"||oa[1].type==="listItemIndent"))break}Kt&&(!At||Kt<At)&&(be._spread=!0),be.end=Object.assign({},At?G[At][1].start:An[1].end),G.splice(At||Pe,0,["exit",be,An[2]]),Pe++,xe++}if(An[1].type==="listItemPrefix"){const aa={type:"listItem",_spread:!1,start:Object.assign({},An[1].start),end:void 0};be=aa,G.splice(Pe,0,["enter",aa,An[2]]),Pe++,xe++,Kt=void 0,mr=!0}}}return G[te][1]._spread=Ct,xe}function s(G,te){return xe;function xe(Pe){o.call(this,G(Pe),Pe),te&&te.call(this,Pe)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(G,te,xe){this.stack[this.stack.length-1].children.push(G),this.stack.push(G),this.tokenStack.push([te,xe||void 0]),G.position={start:Ol(te.start),end:void 0}}function c(G){return te;function te(xe){G&&G.call(this,xe),u.call(this,xe)}}function u(G,te){const xe=this.stack.pop(),Pe=this.tokenStack.pop();if(Pe)Pe[0].type!==G.type&&(te?te.call(this,G,Pe[0]):(Pe[1]||G9).call(this,G,Pe[0]));else throw new Error("Cannot close `"+G.type+"` ("+ng({start:G.start,end:G.end})+"): its not open");xe.position.end=Ol(G.end)}function d(){return p3(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function h(G){if(this.data.expectingFirstListItemValue){const te=this.stack[this.stack.length-2];te.start=Number.parseInt(this.sliceSerialize(G),10),this.data.expectingFirstListItemValue=void 0}}function p(){const G=this.resume(),te=this.stack[this.stack.length-1];te.lang=G}function m(){const G=this.resume(),te=this.stack[this.stack.length-1];te.meta=G}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function v(){const G=this.resume(),te=this.stack[this.stack.length-1];te.value=G.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const G=this.resume(),te=this.stack[this.stack.length-1];te.value=G.replace(/(\r?\n|\r)$/g,"")}function x(G){const te=this.resume(),xe=this.stack[this.stack.length-1];xe.label=te,xe.identifier=_a(this.sliceSerialize(G)).toLowerCase()}function b(){const G=this.resume(),te=this.stack[this.stack.length-1];te.title=G}function S(){const G=this.resume(),te=this.stack[this.stack.length-1];te.url=G}function E(G){const te=this.stack[this.stack.length-1];if(!te.depth){const xe=this.sliceSerialize(G).length;te.depth=xe}}function N(){this.data.setextHeadingSlurpLineEnding=!0}function _(G){const te=this.stack[this.stack.length-1];te.depth=this.sliceSerialize(G).codePointAt(0)===61?1:2}function k(){this.data.setextHeadingSlurpLineEnding=void 0}function T(G){const xe=this.stack[this.stack.length-1].children;let Pe=xe[xe.length-1];(!Pe||Pe.type!=="text")&&(Pe=pn(),Pe.position={start:Ol(G.start),end:void 0},xe.push(Pe)),this.stack.push(Pe)}function A(G){const te=this.stack.pop();te.value+=this.sliceSerialize(G),te.position.end=Ol(G.end)}function j(G){const te=this.stack[this.stack.length-1];if(this.data.atHardBreak){const xe=te.children[te.children.length-1];xe.position.end=Ol(G.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(te.type)&&(T.call(this,G),A.call(this,G))}function D(){this.data.atHardBreak=!0}function I(){const G=this.resume(),te=this.stack[this.stack.length-1];te.value=G}function M(){const G=this.resume(),te=this.stack[this.stack.length-1];te.value=G}function L(){const G=this.resume(),te=this.stack[this.stack.length-1];te.value=G}function P(){const G=this.stack[this.stack.length-1];if(this.data.inReference){const te=this.data.referenceType||"shortcut";G.type+="Reference",G.referenceType=te,delete G.url,delete G.title}else delete G.identifier,delete G.label;this.data.referenceType=void 0}function B(){const G=this.stack[this.stack.length-1];if(this.data.inReference){const te=this.data.referenceType||"shortcut";G.type+="Reference",G.referenceType=te,delete G.url,delete G.title}else delete G.identifier,delete G.label;this.data.referenceType=void 0}function R(G){const te=this.sliceSerialize(G),xe=this.stack[this.stack.length-2];xe.label=PZe(te),xe.identifier=_a(te).toLowerCase()}function F(){const G=this.stack[this.stack.length-1],te=this.resume(),xe=this.stack[this.stack.length-1];if(this.data.inReference=!0,xe.type==="link"){const Pe=G.children;xe.children=Pe}else xe.alt=te}function O(){const G=this.resume(),te=this.stack[this.stack.length-1];te.url=G}function Q(){const G=this.resume(),te=this.stack[this.stack.length-1];te.title=G}function Y(){this.data.inReference=void 0}function $(){this.data.referenceType="collapsed"}function ye(G){const te=this.resume(),xe=this.stack[this.stack.length-1];xe.label=te,xe.identifier=_a(this.sliceSerialize(G)).toLowerCase(),this.data.referenceType="full"}function Te(G){this.data.characterReferenceType=G.type}function U(G){const te=this.sliceSerialize(G),xe=this.data.characterReferenceType;let Pe;xe?(Pe=nse(te,xe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Pe=m3(te);const $e=this.stack[this.stack.length-1];$e.value+=Pe}function K(G){const te=this.stack.pop();te.position.end=Ol(G.end)}function fe(G){A.call(this,G);const te=this.stack[this.stack.length-1];te.url=this.sliceSerialize(G)}function oe(G){A.call(this,G);const te=this.stack[this.stack.length-1];te.url="mailto:"+this.sliceSerialize(G)}function le(){return{type:"blockquote",children:[]}}function Ee(){return{type:"code",lang:null,meta:null,value:""}}function se(){return{type:"inlineCode",value:""}}function qe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Oe(){return{type:"emphasis",children:[]}}function et(){return{type:"heading",depth:0,children:[]}}function J(){return{type:"break"}}function pe(){return{type:"html",value:""}}function q(){return{type:"image",title:null,url:"",alt:null}}function me(){return{type:"link",title:null,url:"",children:[]}}function Be(G){return{type:"list",ordered:G.type==="listOrdered",start:null,spread:G._spread,children:[]}}function He(G){return{type:"listItem",spread:G._spread,checked:null,children:[]}}function ct(){return{type:"paragraph",children:[]}}function Pt(){return{type:"strong",children:[]}}function pn(){return{type:"text",value:""}}function Me(){return{type:"thematicBreak"}}}function Ol(e){return{line:e.line,column:e.column,offset:e.offset}}function hse(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?hse(e,r):RZe(e,r)}}function RZe(e,t){let n;for(n in t)if(fse.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function G9(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+ng({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+ng({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+ng({start:t.start,end:t.end})+") is still open")}function LZe(e){const t=this;t.parser=n;function n(r){return DZe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function FZe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function BZe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function $Ze(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function UZe(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function zZe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function HZe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Np(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let a,o=e.footnoteCounts.get(r);o===void 0?(o=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=s+1,o+=1,e.footnoteCounts.set(r,o);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function VZe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function WZe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function pse(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&a.type==="text"?a.value+=r:i.push({type:"text",value:r}),i}function qZe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return pse(e,t);const i={src:Np(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function KZe(e,t){const n={src:Np(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function GZe(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function YZe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return pse(e,t);const i={href:Np(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function XZe(e,t){const n={href:Np(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function QZe(e,t,n){const r=e.all(t),i=n?JZe(n):mse(t),s={},a=[];if(typeof t.checked=="boolean"){const d=r[0];let f;d&&d.type==="element"&&d.tagName==="p"?f=d:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const d=r[o];(i||o!==0||d.type!=="element"||d.tagName!=="p")&&a.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!i?a.push(...d.children):a.push(d)}const c=r[r.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:a};return e.patch(t,u),e.applyData(t,u)}function JZe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=mse(n[r])}return t}function mse(e){const t=e.spread;return t??e.children.length>1}function ZZe(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const a=r[i];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function eet(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function tet(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function net(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ret(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],a),i.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},o=So(t.children[1]),c=oN(t.children[t.children.length-1]);o&&c&&(a.position={start:o,end:c}),i.push(a)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function iet(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,o=a?a.length:t.children.length;let c=-1;const u=[];for(;++c<o;){const f=t.children[c],h={},p=a?a[c]:void 0;p&&(h.align=p);let m={type:"element",tagName:s,properties:h,children:[]};f&&(m.children=e.all(f),e.patch(f,m),m=e.applyData(f,m)),u.push(m)}const d={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,d),e.applyData(t,d)}function set(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Y9=9,X9=32;function aet(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Q9(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Q9(t.slice(i),i>0,!1)),s.join("")}function Q9(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Y9||s===X9;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Y9||s===X9;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function oet(e,t){const n={type:"text",value:aet(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function cet(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const uet={blockquote:FZe,break:BZe,code:$Ze,delete:UZe,emphasis:zZe,footnoteReference:HZe,heading:VZe,html:WZe,imageReference:qZe,image:KZe,inlineCode:GZe,linkReference:YZe,link:XZe,listItem:QZe,list:ZZe,paragraph:eet,root:tet,strong:net,table:ret,tableCell:set,tableRow:iet,text:oet,thematicBreak:cet,toml:tx,yaml:tx,definition:tx,footnoteDefinition:tx};function tx(){}const gse=-1,uN=0,ig=1,Ew=2,v3=3,y3=4,x3=5,b3=6,vse=7,yse=8,J9=typeof self=="object"?self:globalThis,det=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,a]=t[i];switch(s){case uN:case gse:return n(a,i);case ig:{const o=n([],i);for(const c of a)o.push(r(c));return o}case Ew:{const o=n({},i);for(const[c,u]of a)o[r(c)]=r(u);return o}case v3:return n(new Date(a),i);case y3:{const{source:o,flags:c}=a;return n(new RegExp(o,c),i)}case x3:{const o=n(new Map,i);for(const[c,u]of a)o.set(r(c),r(u));return o}case b3:{const o=n(new Set,i);for(const c of a)o.add(r(c));return o}case vse:{const{name:o,message:c}=a;return n(new J9[o](c),i)}case yse:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:o}=new Uint8Array(a);return n(new DataView(o),a)}}return n(new J9[s](a),i)};return r},Z9=e=>det(new Map,e)(0),uf="",{toString:fet}={},{keys:het}=Object,im=e=>{const t=typeof e;if(t!=="object"||!e)return[uN,t];const n=fet.call(e).slice(8,-1);switch(n){case"Array":return[ig,uf];case"Object":return[Ew,uf];case"Date":return[v3,uf];case"RegExp":return[y3,uf];case"Map":return[x3,uf];case"Set":return[b3,uf];case"DataView":return[ig,n]}return n.includes("Array")?[ig,n]:n.includes("Error")?[vse,n]:[Ew,n]},nx=([e,t])=>e===uN&&(t==="function"||t==="symbol"),pet=(e,t,n,r)=>{const i=(a,o)=>{const c=r.push(a)-1;return n.set(o,c),c},s=a=>{if(n.has(a))return n.get(a);let[o,c]=im(a);switch(o){case uN:{let d=a;switch(c){case"bigint":o=yse,d=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);d=null;break;case"undefined":return i([gse],a)}return i([o,d],a)}case ig:{if(c){let h=a;return c==="DataView"?h=new Uint8Array(a.buffer):c==="ArrayBuffer"&&(h=new Uint8Array(a)),i([c,[...h]],a)}const d=[],f=i([o,d],a);for(const h of a)d.push(s(h));return f}case Ew:{if(c)switch(c){case"BigInt":return i([c,a.toString()],a);case"Boolean":case"Number":case"String":return i([c,a.valueOf()],a)}if(t&&"toJSON"in a)return s(a.toJSON());const d=[],f=i([o,d],a);for(const h of het(a))(e||!nx(im(a[h])))&&d.push([s(h),s(a[h])]);return f}case v3:return i([o,a.toISOString()],a);case y3:{const{source:d,flags:f}=a;return i([o,{source:d,flags:f}],a)}case x3:{const d=[],f=i([o,d],a);for(const[h,p]of a)(e||!(nx(im(h))||nx(im(p))))&&d.push([s(h),s(p)]);return f}case b3:{const d=[],f=i([o,d],a);for(const h of a)(e||!nx(im(h)))&&d.push(s(h));return f}}const{message:u}=a;return i([o,{name:c,message:u}],a)};return s},e7=(e,{json:t,lossy:n}={})=>{const r=[];return pet(!(t||n),!!t,new Map,r)(e),r},zh=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Z9(e7(e,t)):structuredClone(e):(e,t)=>Z9(e7(e,t));function met(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function get(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function vet(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||met,r=e.options.footnoteBackLabel||get,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const d=e.all(u),f=String(u.identifier).toUpperCase(),h=Np(f.toLowerCase());let p=0;const m=[],g=e.footnoteCounts.get(f);for(;g!==void 0&&++p<=g;){m.length>0&&m.push({type:"text",value:" "});let x=typeof n=="string"?n:n(c,p);typeof x=="string"&&(x={type:"text",value:x}),m.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+h+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,p),className:["data-footnote-backref"]},children:Array.isArray(x)?x:[x]})}const v=d[d.length-1];if(v&&v.type==="element"&&v.tagName==="p"){const x=v.children[v.children.length-1];x&&x.type==="text"?x.value+=" ":v.children.push({type:"text",value:" "}),v.children.push(...m)}else d.push(...m);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+h},children:e.wrap(d,!0)};e.patch(u,y),o.push(y)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...zh(a),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(o,!0)},{type:"text",value:`
`}]}}const Av=function(e){if(e==null)return wet;if(typeof e=="function")return dN(e);if(typeof e=="object")return Array.isArray(e)?yet(e):xet(e);if(typeof e=="string")return bet(e);throw new Error("Expected function, string, or object as test")};function yet(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Av(e[n]);return dN(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function xet(e){const t=e;return dN(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function bet(e){return dN(t);function t(n){return n&&n.type===e}}function dN(e){return t;function t(n,r,i){return!!(Eet(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function wet(){return!0}function Eet(e){return e!==null&&typeof e=="object"&&"type"in e}const xse=[],Net=!0,GA=!1,_et="skip";function bse(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=Av(i),a=r?-1:1;o(e,void 0,[])();function o(c,u,d){const f=c&&typeof c=="object"?c:{};if(typeof f.type=="string"){const p=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(c.type+(p?"<"+p+">":""))+")"})}return h;function h(){let p=xse,m,g,v;if((!t||s(c,u,d[d.length-1]||void 0))&&(p=ket(n(c,d)),p[0]===GA))return p;if("children"in c&&c.children){const y=c;if(y.children&&p[0]!==_et)for(g=(r?y.children.length:-1)+a,v=d.concat(y);g>-1&&g<y.children.length;){const x=y.children[g];if(m=o(x,g,v)(),m[0]===GA)return m;g=typeof m[1]=="number"?m[1]:g+a}}return p}}}function ket(e){return Array.isArray(e)?e:typeof e=="number"?[Net,e]:e==null?xse:[e]}function jv(e,t,n,r){let i,s,a;typeof t=="function"&&typeof n!="function"?(s=void 0,a=t,i=n):(s=t,a=n,i=r),bse(e,s,o,i);function o(c,u){const d=u[u.length-1],f=d?d.children.indexOf(c):void 0;return a(c,f,d)}}const YA={}.hasOwnProperty,Cet={};function Tet(e,t){const n=t||Cet,r=new Map,i=new Map,s=new Map,a={...uet,...n.handlers},o={all:u,applyData:jet,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:a,one:c,options:n,patch:Aet,wrap:Pet};return jv(e,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const f=d.type==="definition"?r:i,h=String(d.identifier).toUpperCase();f.has(h)||f.set(h,d)}}),o;function c(d,f){const h=d.type,p=o.handlers[h];if(YA.call(o.handlers,h)&&p)return p(o,d,f);if(o.options.passThrough&&o.options.passThrough.includes(h)){if("children"in d){const{children:g,...v}=d,y=zh(v);return y.children=o.all(d),y}return zh(d)}return(o.options.unknownHandler||Oet)(o,d,f)}function u(d){const f=[];if("children"in d){const h=d.children;let p=-1;for(;++p<h.length;){const m=o.one(h[p],d);if(m){if(p&&h[p-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=t7(m.value)),!Array.isArray(m)&&m.type==="element")){const g=m.children[0];g&&g.type==="text"&&(g.value=t7(g.value))}Array.isArray(m)?f.push(...m):f.push(m)}}}return f}}function Aet(e,t){e.position&&(t.position=mQe(e))}function jet(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&s&&Object.assign(n.properties,zh(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Oet(e,t){const n=t.data||{},r="value"in t&&!(YA.call(n,"hProperties")||YA.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Pet(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function t7(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function n7(e,t){const n=Tet(e,t),r=n.one(e,void 0),i=vet(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Iet(e,t){return e&&"run"in e?async function(n,r){const i=n7(n,{file:r,...t});await e.run(i,r)}:function(n,r){return n7(n,{file:r,...e||t})}}function r7(e){if(e)throw e}var Fx=Object.prototype.hasOwnProperty,wse=Object.prototype.toString,i7=Object.defineProperty,s7=Object.getOwnPropertyDescriptor,a7=function(t){return typeof Array.isArray=="function"?Array.isArray(t):wse.call(t)==="[object Array]"},o7=function(t){if(!t||wse.call(t)!=="[object Object]")return!1;var n=Fx.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&Fx.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||Fx.call(t,i)},l7=function(t,n){i7&&n.name==="__proto__"?i7(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},c7=function(t,n){if(n==="__proto__")if(Fx.call(t,n)){if(s7)return s7(t,n).value}else return;return t[n]},Det=function e(){var t,n,r,i,s,a,o=arguments[0],c=1,u=arguments.length,d=!1;for(typeof o=="boolean"&&(d=o,o=arguments[1]||{},c=2),(o==null||typeof o!="object"&&typeof o!="function")&&(o={});c<u;++c)if(t=arguments[c],t!=null)for(n in t)r=c7(o,n),i=c7(t,n),o!==i&&(d&&i&&(o7(i)||(s=a7(i)))?(s?(s=!1,a=r&&a7(r)?r:[]):a=r&&o7(r)?r:{},l7(o,{name:n,newValue:e(d,a,i)})):typeof i<"u"&&l7(o,{name:n,newValue:i}));return o};const Xk=oi(Det);function XA(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Met(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);o(null,...i);function o(c,...u){const d=e[++s];let f=-1;if(c){a(c);return}for(;++f<i.length;)(u[f]===null||u[f]===void 0)&&(u[f]=i[f]);i=u,d?Ret(d,o)(...u):a(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Ret(e,t){let n;return r;function r(...a){const o=e.length>a.length;let c;o&&a.push(i);try{c=e.apply(this,a)}catch(u){const d=u;if(o&&n)throw d;return i(d)}o||(c&&c.then&&typeof c.then=="function"?c.then(s,i):c instanceof Error?i(c):s(c))}function i(a,...o){n||(n=!0,t(a,...o))}function s(a){i(null,a)}}const qa={basename:Let,dirname:Fet,extname:Bet,join:$et,sep:"/"};function Let(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Ov(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let a=-1,o=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else a<0&&(s=!0,a=i+1),o>-1&&(e.codePointAt(i)===t.codePointAt(o--)?o<0&&(r=i):(o=-1,r=a));return n===r?r=a:r<0&&(r=e.length),e.slice(n,r)}function Fet(e){if(Ov(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Bet(e){Ov(e);let t=e.length,n=-1,r=0,i=-1,s=0,a;for(;t--;){const o=e.codePointAt(t);if(o===47){if(a){r=t+1;break}continue}n<0&&(a=!0,n=t+1),o===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function $et(...e){let t=-1,n;for(;++t<e.length;)Ov(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Uet(n)}function Uet(e){Ov(e);const t=e.codePointAt(0)===47;let n=zet(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function zet(e,t){let n="",r=0,i=-1,s=0,a=-1,o,c;for(;++a<=e.length;){if(a<e.length)o=e.codePointAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(n.length>0){n="",r=0,i=a,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,a):n=e.slice(i+1,a),r=a-i-1;i=a,s=0}else o===46&&s>-1?s++:s=-1}return n}function Ov(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Het={cwd:Vet};function Vet(){return"/"}function QA(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Wet(e){if(typeof e=="string")e=new URL(e);else if(!QA(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return qet(e)}function qet(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Qk=["history","path","basename","stem","extname","dirname"];class Ese{constructor(t){let n;t?QA(t)?n={path:t}:typeof t=="string"||Ket(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":Het.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Qk.length;){const s=Qk[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Qk.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?qa.basename(this.path):void 0}set basename(t){Zk(t,"basename"),Jk(t,"basename"),this.path=qa.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?qa.dirname(this.path):void 0}set dirname(t){u7(this.basename,"dirname"),this.path=qa.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?qa.extname(this.path):void 0}set extname(t){if(Jk(t,"extname"),u7(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=qa.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){QA(t)&&(t=Wet(t)),Zk(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?qa.basename(this.path,this.extname):void 0}set stem(t){Zk(t,"stem"),Jk(t,"stem"),this.path=qa.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new di(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Jk(e,t){if(e&&e.includes(qa.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+qa.sep+"`")}function Zk(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function u7(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Ket(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Get=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},Yet={}.hasOwnProperty;class w3 extends Get{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Met()}copy(){const t=new w3;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Xk(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(n2("data",this.frozen),this.namespace[t]=n,this):Yet.call(this.namespace,t)&&this.namespace[t]||void 0:t?(n2("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=rx(t),r=this.parser||this.Parser;return e2("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),e2("process",this.parser||this.Parser),t2("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,a){const o=rx(t),c=r.parse(o);r.run(c,o,function(d,f,h){if(d||!f||!h)return u(d);const p=f,m=r.stringify(p,h);Jet(m)?h.value=m:h.result=m,u(d,h)});function u(d,f){d||!f?a(d):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),e2("processSync",this.parser||this.Parser),t2("processSync",this.compiler||this.Compiler),this.process(t,i),f7("processSync","process",n),r;function i(s,a){n=!0,r7(s),r=a}}run(t,n,r){d7(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(a,o){const c=rx(n);i.run(t,c,u);function u(d,f,h){const p=f||t;d?o(d):a?a(p):r(void 0,p,h)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),f7("runSync","run",r),i;function s(a,o){r7(a),i=o,r=!0}}stringify(t,n){this.freeze();const r=rx(n),i=this.compiler||this.Compiler;return t2("stringify",i),d7(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(n2("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?o(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[d,...f]=u;c(d,f)}else a(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function a(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(u.plugins),u.settings&&(i.settings=Xk(!0,i.settings,u.settings))}function o(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){const f=u[d];s(f)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,d){let f=-1,h=-1;for(;++f<r.length;)if(r[f][0]===u){h=f;break}if(h===-1)r.push([u,...d]);else if(d.length>0){let[p,...m]=d;const g=r[h][1];XA(g)&&XA(p)&&(p=Xk(!0,g,p)),r[h]=[u,p,...m]}}}}const Xet=new w3().freeze();function e2(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function t2(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function n2(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function d7(e){if(!XA(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function f7(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function rx(e){return Qet(e)?e:new Ese(e)}function Qet(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Jet(e){return typeof e=="string"||Zet(e)}function Zet(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const ett="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",h7=[],p7={allowDangerousHtml:!0},ttt=/^(https?|ircs?|mailto|xmpp)$/i,ntt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function rtt(e){const t=itt(e),n=stt(e);return att(t.runSync(t.parse(n),n),e)}function itt(e){const t=e.rehypePlugins||h7,n=e.remarkPlugins||h7,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...p7}:p7;return Xet().use(LZe).use(n).use(Iet,r).use(t)}function stt(e){const t=e.children||"",n=new Ese;return typeof t=="string"&&(n.value=t),n}function att(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,s=t.disallowedElements,a=t.skipHtml,o=t.unwrapDisallowed,c=t.urlTransform||ott;for(const d of ntt)Object.hasOwn(t,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+ett+d.id,void 0);return jv(e,u),bQe(e,{Fragment:l.Fragment,components:i,ignoreInvalidStyle:!0,jsx:l.jsx,jsxs:l.jsxs,passKeys:!0,passNode:!0});function u(d,f,h){if(d.type==="raw"&&h&&typeof f=="number")return a?h.children.splice(f,1):h.children[f]={type:"text",value:d.value},f;if(d.type==="element"){let p;for(p in Kk)if(Object.hasOwn(Kk,p)&&Object.hasOwn(d.properties,p)){const m=d.properties[p],g=Kk[p];(g===null||g.includes(d.tagName))&&(d.properties[p]=c(String(m||""),p,d))}}if(d.type==="element"){let p=n?!n.includes(d.tagName):s?s.includes(d.tagName):!1;if(!p&&r&&typeof f=="number"&&(p=!r(d,f,h)),p&&h&&typeof f=="number")return o&&d.children?h.children.splice(f,1,...d.children):h.children.splice(f,1),f}}}function ott(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||ttt.test(e.slice(0,t))?e:""}function m7(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function ltt(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function ctt(e,t,n){const i=Av((n||{}).ignore||[]),s=utt(t);let a=-1;for(;++a<s.length;)bse(e,"text",o);function o(u,d){let f=-1,h;for(;++f<d.length;){const p=d[f],m=h?h.children:void 0;if(i(p,m?m.indexOf(p):void 0,h))return;h=p}if(h)return c(u,d)}function c(u,d){const f=d[d.length-1],h=s[a][0],p=s[a][1];let m=0;const v=f.children.indexOf(u);let y=!1,x=[];h.lastIndex=0;let b=h.exec(u.value);for(;b;){const S=b.index,E={index:b.index,input:b.input,stack:[...d,u]};let N=p(...b,E);if(typeof N=="string"&&(N=N.length>0?{type:"text",value:N}:void 0),N===!1?h.lastIndex=S+1:(m!==S&&x.push({type:"text",value:u.value.slice(m,S)}),Array.isArray(N)?x.push(...N):N&&x.push(N),m=S+b[0].length,y=!0),!h.global)break;b=h.exec(u.value)}return y?(m<u.value.length&&x.push({type:"text",value:u.value.slice(m)}),f.children.splice(v,1,...x)):x=[u],v+x.length}}function utt(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([dtt(i[0]),ftt(i[1])])}return t}function dtt(e){return typeof e=="string"?new RegExp(ltt(e),"g"):e}function ftt(e){return typeof e=="function"?e:function(){return e}}const r2="phrasing",i2=["autolink","link","image","label"];function htt(){return{transforms:[btt],enter:{literalAutolink:mtt,literalAutolinkEmail:s2,literalAutolinkHttp:s2,literalAutolinkWww:s2},exit:{literalAutolink:xtt,literalAutolinkEmail:ytt,literalAutolinkHttp:gtt,literalAutolinkWww:vtt}}}function ptt(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:r2,notInConstruct:i2},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:r2,notInConstruct:i2},{character:":",before:"[ps]",after:"\\/",inConstruct:r2,notInConstruct:i2}]}}function mtt(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function s2(e){this.config.enter.autolinkProtocol.call(this,e)}function gtt(e){this.config.exit.autolinkProtocol.call(this,e)}function vtt(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function ytt(e){this.config.exit.autolinkEmail.call(this,e)}function xtt(e){this.exit(e)}function btt(e){ctt(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,wtt],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Ett]],{ignore:["link","linkReference"]})}function wtt(e,t,n,r,i){let s="";if(!Sse(i)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!Stt(n)))return!1;const a=Ntt(n+r);if(!a[0])return!1;const o={type:"link",title:null,url:s+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[o,{type:"text",value:a[1]}]:o}function Ett(e,t,n,r){return!Sse(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function Stt(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function Ntt(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=m7(e,"(");let s=m7(e,")");for(;r!==-1&&i>s;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[e,n]}function Sse(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Dd(n)||lN(n))&&(!t||n!==47)}Nse.peek=Itt;function _tt(){this.buffer()}function ktt(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function Ctt(){this.buffer()}function Ttt(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function Att(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=_a(this.sliceSerialize(e)).toLowerCase(),n.label=t}function jtt(e){this.exit(e)}function Ott(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=_a(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Ptt(e){this.exit(e)}function Itt(){return"["}function Nse(e,t,n,r){const i=n.createTracker(r);let s=i.move("[^");const a=n.enter("footnoteReference"),o=n.enter("reference");return s+=i.move(n.safe(n.associationId(e),{after:"]",before:s})),o(),a(),s+=i.move("]"),s}function Dtt(){return{enter:{gfmFootnoteCallString:_tt,gfmFootnoteCall:ktt,gfmFootnoteDefinitionLabelString:Ctt,gfmFootnoteDefinition:Ttt},exit:{gfmFootnoteCallString:Att,gfmFootnoteCall:jtt,gfmFootnoteDefinitionLabelString:Ott,gfmFootnoteDefinition:Ptt}}}function Mtt(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:Nse},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,a){const o=s.createTracker(a);let c=o.move("[^");const u=s.enter("footnoteDefinition"),d=s.enter("label");return c+=o.move(s.safe(s.associationId(r),{before:c,after:"]"})),d(),c+=o.move("]:"),r.children&&r.children.length>0&&(o.shift(4),c+=o.move((t?`
`:" ")+s.indentLines(s.containerFlow(r,o.current()),t?_se:Rtt))),u(),c}}function Rtt(e,t,n){return t===0?e:_se(e,t,n)}function _se(e,t,n){return(n?"":"    ")+e}const Ltt=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];kse.peek=ztt;function Ftt(){return{canContainEols:["delete"],enter:{strikethrough:$tt},exit:{strikethrough:Utt}}}function Btt(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Ltt}],handlers:{delete:kse}}}function $tt(e){this.enter({type:"delete",children:[]},e)}function Utt(e){this.exit(e)}function kse(e,t,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let a=i.move("~~");return a+=n.containerPhrasing(e,{...i.current(),before:a,after:"~"}),a+=i.move("~~"),s(),a}function ztt(){return"~"}function Htt(e){return e.length}function Vtt(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||Htt,s=[],a=[],o=[],c=[];let u=0,d=-1;for(;++d<e.length;){const g=[],v=[];let y=-1;for(e[d].length>u&&(u=e[d].length);++y<e[d].length;){const x=Wtt(e[d][y]);if(n.alignDelimiters!==!1){const b=i(x);v[y]=b,(c[y]===void 0||b>c[y])&&(c[y]=b)}g.push(x)}a[d]=g,o[d]=v}let f=-1;if(typeof r=="object"&&"length"in r)for(;++f<u;)s[f]=g7(r[f]);else{const g=g7(r);for(;++f<u;)s[f]=g}f=-1;const h=[],p=[];for(;++f<u;){const g=s[f];let v="",y="";g===99?(v=":",y=":"):g===108?v=":":g===114&&(y=":");let x=n.alignDelimiters===!1?1:Math.max(1,c[f]-v.length-y.length);const b=v+"-".repeat(x)+y;n.alignDelimiters!==!1&&(x=v.length+x+y.length,x>c[f]&&(c[f]=x),p[f]=x),h[f]=b}a.splice(1,0,h),o.splice(1,0,p),d=-1;const m=[];for(;++d<a.length;){const g=a[d],v=o[d];f=-1;const y=[];for(;++f<u;){const x=g[f]||"";let b="",S="";if(n.alignDelimiters!==!1){const E=c[f]-(v[f]||0),N=s[f];N===114?b=" ".repeat(E):N===99?E%2?(b=" ".repeat(E/2+.5),S=" ".repeat(E/2-.5)):(b=" ".repeat(E/2),S=b):S=" ".repeat(E)}n.delimiterStart!==!1&&!f&&y.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&x==="")&&(n.delimiterStart!==!1||f)&&y.push(" "),n.alignDelimiters!==!1&&y.push(b),y.push(x),n.alignDelimiters!==!1&&y.push(S),n.padding!==!1&&y.push(" "),(n.delimiterEnd!==!1||f!==u-1)&&y.push("|")}m.push(n.delimiterEnd===!1?y.join("").replace(/ +$/,""):y.join(""))}return m.join(`
`)}function Wtt(e){return e==null?"":String(e)}function g7(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}const v7={}.hasOwnProperty;function Cse(e,t){const n=t||{};function r(i,...s){let a=r.invalid;const o=r.handlers;if(i&&v7.call(i,e)){const c=String(i[e]);a=v7.call(o,c)?o[c]:r.unknown}if(a)return a.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}function qtt(e,t,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const a=n.indentLines(n.containerFlow(e,s.current()),Ktt);return i(),a}function Ktt(e,t,n){return">"+(n?"":" ")+e}function Gtt(e,t){return y7(e,t.inConstruct,!0)&&!y7(e,t.notInConstruct,!1)}function y7(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function x7(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&Gtt(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Ytt(e,t){const n=String(e);let r=n.indexOf(t),i=r,s=0,a=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>a&&(a=s):s=1,i=r+t.length,r=n.indexOf(t,i);return a}function Xtt(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function Qtt(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function Jtt(e,t,n,r){const i=Qtt(n),s=e.value||"",a=i==="`"?"GraveAccent":"Tilde";if(Xtt(e,n)){const f=n.enter("codeIndented"),h=n.indentLines(s,Ztt);return f(),h}const o=n.createTracker(r),c=i.repeat(Math.max(Ytt(s,i)+1,3)),u=n.enter("codeFenced");let d=o.move(c);if(e.lang){const f=n.enter(`codeFencedLang${a}`);d+=o.move(n.safe(e.lang,{before:d,after:" ",encode:["`"],...o.current()})),f()}if(e.lang&&e.meta){const f=n.enter(`codeFencedMeta${a}`);d+=o.move(" "),d+=o.move(n.safe(e.meta,{before:d,after:`
`,encode:["`"],...o.current()})),f()}return d+=o.move(`
`),s&&(d+=o.move(s+`
`)),d+=o.move(c),u(),d}function Ztt(e,t,n){return(n?"":"    ")+e}function E3(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function ent(e,t,n,r){const i=E3(n),s=i==='"'?"Quote":"Apostrophe",a=n.enter("definition");let o=n.enter("label");const c=n.createTracker(r);let u=c.move("[");return u+=c.move(n.safe(n.associationId(e),{before:u,after:"]",...c.current()})),u+=c.move("]: "),o(),!e.url||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(o=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":`
`,...c.current()}))),o(),e.title&&(o=n.enter(`title${s}`),u+=c.move(" "+i),u+=c.move(n.safe(e.title,{before:u,after:i,...c.current()})),u+=c.move(i),o()),a(),u}function tnt(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function S0(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Sw(e,t,n){const r=Uh(e),i=Uh(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Tse.peek=nnt;function Tse(e,t,n,r){const i=tnt(n),s=n.enter("emphasis"),a=n.createTracker(r),o=a.move(i);let c=a.move(n.containerPhrasing(e,{after:i,before:o,...a.current()}));const u=c.charCodeAt(0),d=Sw(r.before.charCodeAt(r.before.length-1),u,i);d.inside&&(c=S0(u)+c.slice(1));const f=c.charCodeAt(c.length-1),h=Sw(r.after.charCodeAt(0),f,i);h.inside&&(c=c.slice(0,-1)+S0(f));const p=a.move(i);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:d.outside},o+c+p}function nnt(e,t,n){return n.options.emphasis||"*"}function rnt(e,t){let n=!1;return jv(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,GA}),!!((!e.depth||e.depth<3)&&p3(e)&&(t.options.setext||n))}function int(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(r);if(rnt(e,n)){const d=n.enter("headingSetext"),f=n.enter("phrasing"),h=n.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return f(),d(),h+`
`+(i===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const a="#".repeat(i),o=n.enter("headingAtx"),c=n.enter("phrasing");s.move(a+" ");let u=n.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=S0(u.charCodeAt(0))+u.slice(1)),u=u?a+" "+u:a,n.options.closeAtx&&(u+=" "+a),c(),o(),u}Ase.peek=snt;function Ase(e){return e.value||""}function snt(){return"<"}jse.peek=ant;function jse(e,t,n,r){const i=E3(n),s=i==='"'?"Quote":"Apostrophe",a=n.enter("image");let o=n.enter("label");const c=n.createTracker(r);let u=c.move("![");return u+=c.move(n.safe(e.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),o(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(o=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(o=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":")",...c.current()}))),o(),e.title&&(o=n.enter(`title${s}`),u+=c.move(" "+i),u+=c.move(n.safe(e.title,{before:u,after:i,...c.current()})),u+=c.move(i),o()),u+=c.move(")"),a(),u}function ant(){return"!"}Ose.peek=ont;function Ose(e,t,n,r){const i=e.referenceType,s=n.enter("imageReference");let a=n.enter("label");const o=n.createTracker(r);let c=o.move("![");const u=n.safe(e.alt,{before:c,after:"]",...o.current()});c+=o.move(u+"]["),a();const d=n.stack;n.stack=[],a=n.enter("reference");const f=n.safe(n.associationId(e),{before:c,after:"]",...o.current()});return a(),n.stack=d,s(),i==="full"||!u||u!==f?c+=o.move(f+"]"):i==="shortcut"?c=c.slice(0,-1):c+=o.move("]"),c}function ont(){return"!"}Pse.peek=lnt;function Pse(e,t,n){let r=e.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const a=n.unsafe[s],o=n.compilePattern(a);let c;if(a.atBreak)for(;c=o.exec(r);){let u=c.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(c.index+1)}}return i+r+i}function lnt(){return"`"}function Ise(e,t){const n=p3(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}Dse.peek=cnt;function Dse(e,t,n,r){const i=E3(n),s=i==='"'?"Quote":"Apostrophe",a=n.createTracker(r);let o,c;if(Ise(e,n)){const d=n.stack;n.stack=[],o=n.enter("autolink");let f=a.move("<");return f+=a.move(n.containerPhrasing(e,{before:f,after:">",...a.current()})),f+=a.move(">"),o(),n.stack=d,f}o=n.enter("link"),c=n.enter("label");let u=a.move("[");return u+=a.move(n.containerPhrasing(e,{before:u,after:"](",...a.current()})),u+=a.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),u+=a.move("<"),u+=a.move(n.safe(e.url,{before:u,after:">",...a.current()})),u+=a.move(">")):(c=n.enter("destinationRaw"),u+=a.move(n.safe(e.url,{before:u,after:e.title?" ":")",...a.current()}))),c(),e.title&&(c=n.enter(`title${s}`),u+=a.move(" "+i),u+=a.move(n.safe(e.title,{before:u,after:i,...a.current()})),u+=a.move(i),c()),u+=a.move(")"),o(),u}function cnt(e,t,n){return Ise(e,n)?"<":"["}Mse.peek=unt;function Mse(e,t,n,r){const i=e.referenceType,s=n.enter("linkReference");let a=n.enter("label");const o=n.createTracker(r);let c=o.move("[");const u=n.containerPhrasing(e,{before:c,after:"]",...o.current()});c+=o.move(u+"]["),a();const d=n.stack;n.stack=[],a=n.enter("reference");const f=n.safe(n.associationId(e),{before:c,after:"]",...o.current()});return a(),n.stack=d,s(),i==="full"||!u||u!==f?c+=o.move(f+"]"):i==="shortcut"?c=c.slice(0,-1):c+=o.move("]"),c}function unt(){return"["}function S3(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function dnt(e){const t=S3(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function fnt(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function Rse(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function hnt(e,t,n,r){const i=n.enter("list"),s=n.bulletCurrent;let a=e.ordered?fnt(n):S3(n);const o=e.ordered?a==="."?")":".":dnt(n);let c=t&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!e.ordered){const d=e.children?e.children[0]:void 0;if((a==="*"||a==="-")&&d&&(!d.children||!d.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),Rse(n)===a&&d){let f=-1;for(;++f<e.children.length;){const h=e.children[f];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(a=o),n.bulletCurrent=a;const u=n.containerFlow(e,r);return n.bulletLastUsed=a,n.bulletCurrent=s,i(),u}function pnt(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function mnt(e,t,n,r){const i=pnt(n);let s=n.bulletCurrent||S3(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let a=s.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(a=Math.ceil(a/4)*4);const o=n.createTracker(r);o.move(s+" ".repeat(a-s.length)),o.shift(a);const c=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,o.current()),d);return c(),u;function d(f,h,p){return h?(p?"":" ".repeat(a))+f:(p?s:s+" ".repeat(a-s.length))+f}}function gnt(e,t,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),a=n.containerPhrasing(e,r);return s(),i(),a}const vnt=Av(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function ynt(e,t,n,r){return(e.children.some(function(a){return vnt(a)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function xnt(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}Lse.peek=bnt;function Lse(e,t,n,r){const i=xnt(n),s=n.enter("strong"),a=n.createTracker(r),o=a.move(i+i);let c=a.move(n.containerPhrasing(e,{after:i,before:o,...a.current()}));const u=c.charCodeAt(0),d=Sw(r.before.charCodeAt(r.before.length-1),u,i);d.inside&&(c=S0(u)+c.slice(1));const f=c.charCodeAt(c.length-1),h=Sw(r.after.charCodeAt(0),f,i);h.inside&&(c=c.slice(0,-1)+S0(f));const p=a.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:d.outside},o+c+p}function bnt(e,t,n){return n.options.strong||"*"}function wnt(e,t,n,r){return n.safe(e.value,r)}function Ent(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function Snt(e,t,n){const r=(Rse(n)+(n.options.ruleSpaces?" ":"")).repeat(Ent(n));return n.options.ruleSpaces?r.slice(0,-1):r}const Fse={blockquote:qtt,break:x7,code:Jtt,definition:ent,emphasis:Tse,hardBreak:x7,heading:int,html:Ase,image:jse,imageReference:Ose,inlineCode:Pse,link:Dse,linkReference:Mse,list:hnt,listItem:mnt,paragraph:gnt,root:ynt,strong:Lse,text:wnt,thematicBreak:Snt};function Nnt(){return{enter:{table:_nt,tableData:b7,tableHeader:b7,tableRow:Cnt},exit:{codeText:Tnt,table:knt,tableData:a2,tableHeader:a2,tableRow:a2}}}function _nt(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function knt(e){this.exit(e),this.data.inTable=void 0}function Cnt(e){this.enter({type:"tableRow",children:[]},e)}function a2(e){this.exit(e)}function b7(e){this.enter({type:"tableCell",children:[]},e)}function Tnt(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,Ant));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function Ant(e,t){return t==="|"?t:e}function jnt(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:a,tableCell:c,tableRow:o}};function a(p,m,g,v){return u(d(p,g,v),p.align)}function o(p,m,g,v){const y=f(p,g,v),x=u([y]);return x.slice(0,x.indexOf(`
`))}function c(p,m,g,v){const y=g.enter("tableCell"),x=g.enter("phrasing"),b=g.containerPhrasing(p,{...v,before:s,after:s});return x(),y(),b}function u(p,m){return Vtt(p,{align:m,alignDelimiters:r,padding:n,stringLength:i})}function d(p,m,g){const v=p.children;let y=-1;const x=[],b=m.enter("table");for(;++y<v.length;)x[y]=f(v[y],m,g);return b(),x}function f(p,m,g){const v=p.children;let y=-1;const x=[],b=m.enter("tableRow");for(;++y<v.length;)x[y]=c(v[y],p,m,g);return b(),x}function h(p,m,g){let v=Fse.inlineCode(p,m,g);return g.stack.includes("tableCell")&&(v=v.replace(/\|/g,"\\$&")),v}}function Ont(){return{exit:{taskListCheckValueChecked:w7,taskListCheckValueUnchecked:w7,paragraph:Int}}}function Pnt(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Dnt}}}function w7(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function Int(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let s=-1,a;for(;++s<i.length;){const o=i[s];if(o.type==="paragraph"){a=o;break}}a===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function Dnt(e,t,n,r){const i=e.children[0],s=typeof e.checked=="boolean"&&i&&i.type==="paragraph",a="["+(e.checked?"x":" ")+"] ",o=n.createTracker(r);s&&o.move(a);let c=Fse.listItem(e,t,n,{...r,...o.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(d){return d+a}}function Mnt(){return[htt(),Dtt(),Ftt(),Nnt(),Ont()]}function Rnt(e){return{extensions:[ptt(),Mtt(e),Btt(),jnt(e),Pnt()]}}const Lnt={tokenize:Hnt,partial:!0},Bse={tokenize:Vnt,partial:!0},$se={tokenize:Wnt,partial:!0},Use={tokenize:qnt,partial:!0},Fnt={tokenize:Knt,partial:!0},zse={name:"wwwAutolink",tokenize:Unt,previous:Vse},Hse={name:"protocolAutolink",tokenize:znt,previous:Wse},Sl={name:"emailAutolink",tokenize:$nt,previous:qse},No={};function Bnt(){return{text:No}}let yu=48;for(;yu<123;)No[yu]=Sl,yu++,yu===58?yu=65:yu===91&&(yu=97);No[43]=Sl;No[45]=Sl;No[46]=Sl;No[95]=Sl;No[72]=[Sl,Hse];No[104]=[Sl,Hse];No[87]=[Sl,zse];No[119]=[Sl,zse];function $nt(e,t,n){const r=this;let i,s;return a;function a(f){return!JA(f)||!qse.call(r,r.previous)||N3(r.events)?n(f):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),o(f))}function o(f){return JA(f)?(e.consume(f),o):f===64?(e.consume(f),c):n(f)}function c(f){return f===46?e.check(Fnt,d,u)(f):f===45||f===95||ri(f)?(s=!0,e.consume(f),c):d(f)}function u(f){return e.consume(f),i=!0,c}function d(f){return s&&i&&vi(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(f)):n(f)}}function Unt(e,t,n){const r=this;return i;function i(a){return a!==87&&a!==119||!Vse.call(r,r.previous)||N3(r.events)?n(a):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Lnt,e.attempt(Bse,e.attempt($se,s),n),n)(a))}function s(a){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(a)}}function znt(e,t,n){const r=this;let i="",s=!1;return a;function a(f){return(f===72||f===104)&&Wse.call(r,r.previous)&&!N3(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(f),e.consume(f),o):n(f)}function o(f){if(vi(f)&&i.length<5)return i+=String.fromCodePoint(f),e.consume(f),o;if(f===58){const h=i.toLowerCase();if(h==="http"||h==="https")return e.consume(f),c}return n(f)}function c(f){return f===47?(e.consume(f),s?u:(s=!0,c)):n(f)}function u(f){return f===null||ww(f)||Vt(f)||Dd(f)||lN(f)?n(f):e.attempt(Bse,e.attempt($se,d),n)(f)}function d(f){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(f)}}function Hnt(e,t,n){let r=0;return i;function i(a){return(a===87||a===119)&&r<3?(r++,e.consume(a),i):a===46&&r===3?(e.consume(a),s):n(a)}function s(a){return a===null?n(a):t(a)}}function Vnt(e,t,n){let r,i,s;return a;function a(u){return u===46||u===95?e.check(Use,c,o)(u):u===null||Vt(u)||Dd(u)||u!==45&&lN(u)?c(u):(s=!0,e.consume(u),a)}function o(u){return u===95?r=!0:(i=r,r=void 0),e.consume(u),a}function c(u){return i||r||!s?n(u):t(u)}}function Wnt(e,t){let n=0,r=0;return i;function i(a){return a===40?(n++,e.consume(a),i):a===41&&r<n?s(a):a===33||a===34||a===38||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===60||a===63||a===93||a===95||a===126?e.check(Use,t,s)(a):a===null||Vt(a)||Dd(a)?t(a):(e.consume(a),i)}function s(a){return a===41&&r++,e.consume(a),i}}function qnt(e,t,n){return r;function r(o){return o===33||o===34||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===63||o===95||o===126?(e.consume(o),r):o===38?(e.consume(o),s):o===93?(e.consume(o),i):o===60||o===null||Vt(o)||Dd(o)?t(o):n(o)}function i(o){return o===null||o===40||o===91||Vt(o)||Dd(o)?t(o):r(o)}function s(o){return vi(o)?a(o):n(o)}function a(o){return o===59?(e.consume(o),r):vi(o)?(e.consume(o),a):n(o)}}function Knt(e,t,n){return r;function r(s){return e.consume(s),i}function i(s){return ri(s)?n(s):t(s)}}function Vse(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Vt(e)}function Wse(e){return!vi(e)}function qse(e){return!(e===47||JA(e))}function JA(e){return e===43||e===45||e===46||e===95||ri(e)}function N3(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Gnt={tokenize:nrt,partial:!0};function Ynt(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Znt,continuation:{tokenize:ert},exit:trt}},text:{91:{name:"gfmFootnoteCall",tokenize:Jnt},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Xnt,resolveTo:Qnt}}}}function Xnt(e,t,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;i--;){const c=r.events[i][1];if(c.type==="labelImage"){a=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return o;function o(c){if(!a||!a._balanced)return n(c);const u=_a(r.sliceSerialize({start:a.end,end:r.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function Qnt(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},o=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",s,t],["enter",a,t],["exit",a,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...o),e}function Jnt(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,a;return o;function o(f){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),c}function c(f){return f!==94?n(f):(e.enter("gfmFootnoteCallMarker"),e.consume(f),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(f){if(s>999||f===93&&!a||f===null||f===91||Vt(f))return n(f);if(f===93){e.exit("chunkString");const h=e.exit("gfmFootnoteCallString");return i.includes(_a(r.sliceSerialize(h)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(f)}return Vt(f)||(a=!0),s++,e.consume(f),f===92?d:u}function d(f){return f===91||f===92||f===93?(e.consume(f),s++,u):u(f)}}function Znt(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,a=0,o;return c;function c(m){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(m){return m===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",d):n(m)}function d(m){if(a>999||m===93&&!o||m===null||m===91||Vt(m))return n(m);if(m===93){e.exit("chunkString");const g=e.exit("gfmFootnoteDefinitionLabelString");return s=_a(r.sliceSerialize(g)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(m),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),h}return Vt(m)||(o=!0),a++,e.consume(m),m===92?f:d}function f(m){return m===91||m===92||m===93?(e.consume(m),a++,d):d(m)}function h(m){return m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),i.includes(s)||i.push(s),Et(e,p,"gfmFootnoteDefinitionWhitespace")):n(m)}function p(m){return t(m)}}function ert(e,t,n){return e.check(Tv,t,e.attempt(Gnt,t,n))}function trt(e){e.exit("gfmFootnoteDefinition")}function nrt(e,t,n){const r=this;return Et(e,i,"gfmFootnoteDefinitionIndent",5);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="gfmFootnoteDefinitionIndent"&&a[2].sliceSerialize(a[1],!0).length===4?t(s):n(s)}}function rrt(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(a,o){let c=-1;for(;++c<a.length;)if(a[c][0]==="enter"&&a[c][1].type==="strikethroughSequenceTemporary"&&a[c][1]._close){let u=c;for(;u--;)if(a[u][0]==="exit"&&a[u][1].type==="strikethroughSequenceTemporary"&&a[u][1]._open&&a[c][1].end.offset-a[c][1].start.offset===a[u][1].end.offset-a[u][1].start.offset){a[c][1].type="strikethroughSequence",a[u][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},a[u][1].start),end:Object.assign({},a[c][1].end)},f={type:"strikethroughText",start:Object.assign({},a[u][1].end),end:Object.assign({},a[c][1].start)},h=[["enter",d,o],["enter",a[u][1],o],["exit",a[u][1],o],["enter",f,o]],p=o.parser.constructs.insideSpan.null;p&&ms(h,h.length,0,cN(p,a.slice(u+1,c),o)),ms(h,h.length,0,[["exit",f,o],["enter",a[c][1],o],["exit",a[c][1],o],["exit",d,o]]),ms(a,u-1,c-u+3,h),c=u+h.length-2;break}}for(c=-1;++c<a.length;)a[c][1].type==="strikethroughSequenceTemporary"&&(a[c][1].type="data");return a}function s(a,o,c){const u=this.previous,d=this.events;let f=0;return h;function h(m){return u===126&&d[d.length-1][1].type!=="characterEscape"?c(m):(a.enter("strikethroughSequenceTemporary"),p(m))}function p(m){const g=Uh(u);if(m===126)return f>1?c(m):(a.consume(m),f++,p);if(f<2&&!n)return c(m);const v=a.exit("strikethroughSequenceTemporary"),y=Uh(m);return v._open=!y||y===2&&!!g,v._close=!g||g===2&&!!y,o(m)}}}class irt{constructor(){this.map=[]}add(t,n,r){srt(this,t,n,r)}consume(t){if(this.map.sort(function(s,a){return s[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const s of i)t.push(s);i=r.pop()}this.map.length=0}}function srt(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function art(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function ort(){return{flow:{null:{name:"table",tokenize:lrt,resolveAll:crt}}}}function lrt(e,t,n){const r=this;let i=0,s=0,a;return o;function o(A){let j=r.events.length-1;for(;j>-1;){const M=r.events[j][1].type;if(M==="lineEnding"||M==="linePrefix")j--;else break}const D=j>-1?r.events[j][1].type:null,I=D==="tableHead"||D==="tableRow"?N:c;return I===N&&r.parser.lazy[r.now().line]?n(A):I(A)}function c(A){return e.enter("tableHead"),e.enter("tableRow"),u(A)}function u(A){return A===124||(a=!0,s+=1),d(A)}function d(A){return A===null?n(A):Je(A)?s>1?(s=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),p):n(A):mt(A)?Et(e,d,"whitespace")(A):(s+=1,a&&(a=!1,i+=1),A===124?(e.enter("tableCellDivider"),e.consume(A),e.exit("tableCellDivider"),a=!0,d):(e.enter("data"),f(A)))}function f(A){return A===null||A===124||Vt(A)?(e.exit("data"),d(A)):(e.consume(A),A===92?h:f)}function h(A){return A===92||A===124?(e.consume(A),f):f(A)}function p(A){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(A):(e.enter("tableDelimiterRow"),a=!1,mt(A)?Et(e,m,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A):m(A))}function m(A){return A===45||A===58?v(A):A===124?(a=!0,e.enter("tableCellDivider"),e.consume(A),e.exit("tableCellDivider"),g):E(A)}function g(A){return mt(A)?Et(e,v,"whitespace")(A):v(A)}function v(A){return A===58?(s+=1,a=!0,e.enter("tableDelimiterMarker"),e.consume(A),e.exit("tableDelimiterMarker"),y):A===45?(s+=1,y(A)):A===null||Je(A)?S(A):E(A)}function y(A){return A===45?(e.enter("tableDelimiterFiller"),x(A)):E(A)}function x(A){return A===45?(e.consume(A),x):A===58?(a=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(A),e.exit("tableDelimiterMarker"),b):(e.exit("tableDelimiterFiller"),b(A))}function b(A){return mt(A)?Et(e,S,"whitespace")(A):S(A)}function S(A){return A===124?m(A):A===null||Je(A)?!a||i!==s?E(A):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(A)):E(A)}function E(A){return n(A)}function N(A){return e.enter("tableRow"),_(A)}function _(A){return A===124?(e.enter("tableCellDivider"),e.consume(A),e.exit("tableCellDivider"),_):A===null||Je(A)?(e.exit("tableRow"),t(A)):mt(A)?Et(e,_,"whitespace")(A):(e.enter("data"),k(A))}function k(A){return A===null||A===124||Vt(A)?(e.exit("data"),_(A)):(e.consume(A),A===92?T:k)}function T(A){return A===92||A===124?(e.consume(A),k):k(A)}}function crt(e,t){let n=-1,r=!0,i=0,s=[0,0,0,0],a=[0,0,0,0],o=!1,c=0,u,d,f;const h=new irt;for(;++n<e.length;){const p=e[n],m=p[1];p[0]==="enter"?m.type==="tableHead"?(o=!1,c!==0&&(E7(h,t,c,u,d),d=void 0,c=0),u={type:"table",start:Object.assign({},m.start),end:Object.assign({},m.end)},h.add(n,0,[["enter",u,t]])):m.type==="tableRow"||m.type==="tableDelimiterRow"?(r=!0,f=void 0,s=[0,0,0,0],a=[0,n+1,0,0],o&&(o=!1,d={type:"tableBody",start:Object.assign({},m.start),end:Object.assign({},m.end)},h.add(n,0,[["enter",d,t]])),i=m.type==="tableDelimiterRow"?2:d?3:1):i&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")?(r=!1,a[2]===0&&(s[1]!==0&&(a[0]=a[1],f=ix(h,t,s,i,void 0,f),s=[0,0,0,0]),a[2]=n)):m.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(a[0]=a[1],f=ix(h,t,s,i,void 0,f)),s=a,a=[s[1],n,0,0])):m.type==="tableHead"?(o=!0,c=n):m.type==="tableRow"||m.type==="tableDelimiterRow"?(c=n,s[1]!==0?(a[0]=a[1],f=ix(h,t,s,i,n,f)):a[1]!==0&&(f=ix(h,t,a,i,n,f)),i=0):i&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")&&(a[3]=n)}for(c!==0&&E7(h,t,c,u,d),h.consume(t.events),n=-1;++n<t.events.length;){const p=t.events[n];p[0]==="enter"&&p[1].type==="table"&&(p[1]._align=art(t.events,n))}return e}function ix(e,t,n,r,i,s){const a=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",o="tableContent";n[0]!==0&&(s.end=Object.assign({},bf(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const c=bf(t.events,n[1]);if(s={type:a,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const u=bf(t.events,n[2]),d=bf(t.events,n[3]),f={type:o,start:Object.assign({},u),end:Object.assign({},d)};if(e.add(n[2],0,[["enter",f,t]]),r!==2){const h=t.events[n[2]],p=t.events[n[3]];if(h[1].end=Object.assign({},p[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const m=n[2]+1,g=n[3]-n[2]-1;e.add(m,g,[])}}e.add(n[3]+1,0,[["exit",f,t]])}return i!==void 0&&(s.end=Object.assign({},bf(t.events,i)),e.add(i,0,[["exit",s,t]]),s=void 0),s}function E7(e,t,n,r,i){const s=[],a=bf(t.events,n);i&&(i.end=Object.assign({},a),s.push(["exit",i,t])),r.end=Object.assign({},a),s.push(["exit",r,t]),e.add(n+1,0,s)}function bf(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const urt={name:"tasklistCheck",tokenize:frt};function drt(){return{text:{91:urt}}}function frt(e,t,n){const r=this;return i;function i(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),s)}function s(c){return Vt(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),a):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),a):n(c)}function a(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),o):n(c)}function o(c){return Je(c)?t(c):mt(c)?e.check({tokenize:hrt},t,n)(c):n(c)}}function hrt(e,t,n){return Et(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function prt(e){return tse([Bnt(),Ynt(),rrt(e),ort(),drt()])}const mrt={};function grt(e){const t=this,n=e||mrt,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(prt(n)),s.push(Mnt()),a.push(Rnt(n))}const S7=function(e,t,n){const r=Av(n);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if(typeof t=="number"){if(t<0||t===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(t=e.children.indexOf(t),t<0)throw new Error("Expected child node or index");for(;++t<e.children.length;)if(r(e.children[t],t,e))return e.children[t]},Vd=function(e){if(e==null)return xrt;if(typeof e=="string")return yrt(e);if(typeof e=="object")return vrt(e);if(typeof e=="function")return _3(e);throw new Error("Expected function, string, or array as `test`")};function vrt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Vd(e[n]);return _3(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function yrt(e){return _3(t);function t(n){return n.tagName===e}}function _3(e){return t;function t(n,r,i){return!!(brt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function xrt(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="element"&&"tagName"in e&&typeof e.tagName=="string")}function brt(e){return e!==null&&typeof e=="object"&&"type"in e&&"tagName"in e}const N7=/\n/g,_7=/[\t ]+/g,ZA=Vd("br"),k7=Vd(Trt),wrt=Vd("p"),C7=Vd("tr"),Ert=Vd(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",Crt,Art]),Kse=Vd(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function Srt(e,t){const n=t||{},r="children"in e?e.children:[],i=Kse(e),s=Xse(e,{whitespace:n.whitespace||"normal"}),a=[];(e.type==="text"||e.type==="comment")&&a.push(...Yse(e,{breakBefore:!0,breakAfter:!0}));let o=-1;for(;++o<r.length;)a.push(...Gse(r[o],e,{whitespace:s,breakBefore:o?void 0:i,breakAfter:o<r.length-1?ZA(r[o+1]):i}));const c=[];let u;for(o=-1;++o<a.length;){const d=a[o];typeof d=="number"?u!==void 0&&d>u&&(u=d):d&&(u!==void 0&&u>-1&&c.push(`
`.repeat(u)||" "),u=-1,c.push(d))}return c.join("")}function Gse(e,t,n){return e.type==="element"?Nrt(e,t,n):e.type==="text"?n.whitespace==="normal"?Yse(e,n):_rt(e):[]}function Nrt(e,t,n){const r=Xse(e,n),i=e.children||[];let s=-1,a=[];if(Ert(e))return a;let o,c;for(ZA(e)||C7(e)&&S7(t,e,C7)?c=`
`:wrt(e)?(o=2,c=2):Kse(e)&&(o=1,c=1);++s<i.length;)a=a.concat(Gse(i[s],e,{whitespace:r,breakBefore:s?void 0:o,breakAfter:s<i.length-1?ZA(i[s+1]):c}));return k7(e)&&S7(t,e,k7)&&a.push("	"),o&&a.unshift(o),c&&a.push(c),a}function Yse(e,t){const n=String(e.value),r=[],i=[];let s=0;for(;s<=n.length;){N7.lastIndex=s;const c=N7.exec(n),u=c&&"index"in c?c.index:n.length;r.push(krt(n.slice(s,u).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),s===0?t.breakBefore:!0,u===n.length?t.breakAfter:!0)),s=u+1}let a=-1,o;for(;++a<r.length;)r[a].charCodeAt(r[a].length-1)===8203||a<r.length-1&&r[a+1].charCodeAt(0)===8203?(i.push(r[a]),o=void 0):r[a]?(typeof o=="number"&&i.push(o),i.push(r[a]),o=0):(a===0||a===r.length-1)&&i.push(0);return i}function _rt(e){return[String(e.value)]}function krt(e,t,n){const r=[];let i=0,s;for(;i<e.length;){_7.lastIndex=i;const a=_7.exec(e);s=a?a.index:e.length,!i&&!s&&a&&!t&&r.push(""),i!==s&&r.push(e.slice(i,s)),i=a?s+a[0].length:s}return i!==s&&!n&&r.push(""),r.join(" ")}function Xse(e,t){if(e.type==="element"){const n=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return n.wrap?"pre-wrap":"pre";case"td":case"th":return n.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}}return t.whitespace}function Crt(e){return!!(e.properties||{}).hidden}function Trt(e){return e.tagName==="td"||e.tagName==="th"}function Art(e){return e.tagName==="dialog"&&!(e.properties||{}).open}const jrt={};function Ort(e){const t=e||jrt,n=t.aliases,r=t.detect||!1,i=t.languages||Fie,s=t.plainText,a=t.prefix,o=t.subset;let c="hljs";const u=Bie(i);if(n&&u.registerAlias(n),a){const d=a.indexOf("-");c=d===-1?a:a.slice(0,d)}return function(d,f){jv(d,"element",function(h,p,m){if(h.tagName!=="code"||!m||m.type!=="element"||m.tagName!=="pre")return;const g=Prt(h);if(g===!1||!g&&!r||g&&s&&s.includes(g))return;Array.isArray(h.properties.className)||(h.properties.className=[]),h.properties.className.includes(c)||h.properties.className.unshift(c);const v=Srt(h,{whitespace:"pre"});let y;try{y=g?u.highlight(g,v,{prefix:a}):u.highlightAuto(v,{prefix:a,subset:o})}catch(x){const b=x;if(g&&/Unknown language/.test(b.message)){f.message("Cannot highlight as `"+g+"`, its not registered",{ancestors:[m,h],cause:b,place:h.position,ruleId:"missing-language",source:"rehype-highlight"});return}throw b}!g&&y.data&&y.data.language&&h.properties.className.push("language-"+y.data.language),y.children.length>0&&(h.children=y.children)})}}function Prt(e){const t=e.properties.className;let n=-1;if(!Array.isArray(t))return;let r;for(;++n<t.length;){const i=String(t[n]);if(i==="no-highlight"||i==="nohighlight")return!1;!r&&i.slice(0,5)==="lang-"&&(r=i.slice(5)),!r&&i.slice(0,9)==="language-"&&(r=i.slice(9))}return r}const T7=/[#.]/g;function Irt(e,t){const n=e||"",r={};let i=0,s,a;for(;i<n.length;){T7.lastIndex=i;const o=T7.exec(n),c=n.slice(i,o?o.index:n.length);c&&(s?s==="#"?r.id=c:Array.isArray(r.className)?r.className.push(c):r.className=[c]:a=c,i+=c.length),o&&(s=o[0],i++)}return{type:"element",tagName:a||t||"div",properties:r,children:[]}}function Qse(e,t,n){const r=n?Lrt(n):void 0;function i(s,a,...o){let c;if(s==null){c={type:"root",children:[]};const u=a;o.unshift(u)}else{c=Irt(s,t);const u=c.tagName.toLowerCase(),d=r?r.get(u):void 0;if(c.tagName=d||u,Drt(a))o.unshift(a);else for(const[f,h]of Object.entries(a))Mrt(e,c.properties,f,h)}for(const u of o)ej(c.children,u);return c.type==="element"&&c.tagName==="template"&&(c.content={type:"root",children:c.children},c.children=[]),c}return i}function Drt(e){if(e===null||typeof e!="object"||Array.isArray(e))return!0;if(typeof e.type!="string")return!1;const t=e,n=Object.keys(e);for(const r of n){const i=t[r];if(i&&typeof i=="object"){if(!Array.isArray(i))return!0;const s=i;for(const a of s)if(typeof a!="number"&&typeof a!="string")return!0}}return!!("children"in e&&Array.isArray(e.children))}function Mrt(e,t,n,r){const i=c3(e,n);let s;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;s=r}else typeof r=="boolean"?s=r:typeof r=="string"?i.spaceSeparated?s=j9(r):i.commaSeparated?s=_9(r):i.commaOrSpaceSeparated?s=j9(_9(r).join(" ")):s=A7(i,i.property,r):Array.isArray(r)?s=[...r]:s=i.property==="style"?Rrt(r):String(r);if(Array.isArray(s)){const a=[];for(const o of s)a.push(A7(i,i.property,o));s=a}i.property==="className"&&Array.isArray(t.className)&&(s=t.className.concat(s)),t[i.property]=s}}function ej(e,t){if(t!=null)if(typeof t=="number"||typeof t=="string")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(const n of t)ej(e,n);else if(typeof t=="object"&&"type"in t)t.type==="root"?ej(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function A7(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||w0(n)===w0(t)))return!0}return n}function Rrt(e){const t=[];for(const[n,r]of Object.entries(e))t.push([n,r].join(": "));return t.join("; ")}function Lrt(e){const t=new Map;for(const n of e)t.set(n.toLowerCase(),n);return t}const Frt=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Brt=Qse(sN,"div"),$rt=Qse(Sp,"g",Frt);function Urt(e){const t=String(e),n=[];return{toOffset:i,toPoint:r};function r(s){if(typeof s=="number"&&s>-1&&s<=t.length){let a=0;for(;;){let o=n[a];if(o===void 0){const c=j7(t,n[a-1]);o=c===-1?t.length+1:c+1,n[a]=o}if(o>s)return{line:a+1,column:s-(a>0?n[a-1]:0)+1,offset:s};a++}}}function i(s){if(s&&typeof s.line=="number"&&typeof s.column=="number"&&!Number.isNaN(s.line)&&!Number.isNaN(s.column)){for(;n.length<s.line;){const o=n[n.length-1],c=j7(t,o),u=c===-1?t.length+1:c+1;if(o===u)break;n.push(u)}const a=(s.line>1?n[s.line-2]:0)+s.column-1;if(a<n[s.line-1])return a}}}function j7(e,t){const n=e.indexOf("\r",t),r=e.indexOf(`
`,t);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const Ku={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Jse={}.hasOwnProperty,zrt=Object.prototype;function Hrt(e,t){const n=t||{};return k3({file:n.file||void 0,location:!1,schema:n.space==="svg"?Sp:sN,verbose:n.verbose||!1},e)}function k3(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},Bx(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:Zse(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),a=Urt(s),o=a.toPoint(0),c=a.toPoint(s.length);n.position={start:o,end:c}}return n}case"#documentType":{const r=t;return n={type:"doctype"},Bx(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},Bx(e,r,n),n}default:return n=Vrt(e,t),n}}function Zse(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=k3(e,t[n]);r.push(i)}return r}function Vrt(e,t){const n=e.schema;e.schema=t.namespaceURI===Ku.svg?Sp:sN;let r=-1;const i={};for(;++r<t.attrs.length;){const o=t.attrs[r],c=(o.prefix?o.prefix+":":"")+o.name;Jse.call(zrt,c)||(i[c]=o.value)}const a=(e.schema.space==="svg"?$rt:Brt)(t.tagName,i,Zse(e,t.childNodes));if(Bx(e,t,a),a.tagName==="template"){const o=t,c=o.sourceCodeLocation,u=c&&c.startTag&&Uf(c.startTag),d=c&&c.endTag&&Uf(c.endTag),f=k3(e,o.content);u&&d&&e.file&&(f.position={start:u.end,end:d.start}),a.content=f}return e.schema=n,a}function Bx(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=Wrt(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function Wrt(e,t,n){const r=Uf(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let a;if(n.attrs)for(a in n.attrs)Jse.call(n.attrs,a)&&(s[c3(e.schema,a).property]=Uf(n.attrs[a]));n.startTag;const o=Uf(n.startTag),c=n.endTag?Uf(n.endTag):void 0,u={opening:o};c&&(u.closing=c),u.properties=s,t.data={position:u}}}return r}function Uf(e){const t=O7({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=O7({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function O7(e){return e.line&&e.column?e:void 0}class Pv{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}Pv.prototype.property={};Pv.prototype.normal={};Pv.prototype.space=null;function eae(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new Pv(n,r,t)}function tj(e){return e.toLowerCase()}class sa{constructor(t,n){this.property=t,this.attribute=n}}sa.prototype.space=null;sa.prototype.boolean=!1;sa.prototype.booleanish=!1;sa.prototype.overloadedBoolean=!1;sa.prototype.number=!1;sa.prototype.commaSeparated=!1;sa.prototype.spaceSeparated=!1;sa.prototype.commaOrSpaceSeparated=!1;sa.prototype.mustUseProperty=!1;sa.prototype.defined=!1;let qrt=0;const rt=Wd(),qn=Wd(),tae=Wd(),Ce=Wd(),Xt=Wd(),ah=Wd(),Xi=Wd();function Wd(){return 2**++qrt}const nj=Object.freeze(Object.defineProperty({__proto__:null,boolean:rt,booleanish:qn,commaOrSpaceSeparated:Xi,commaSeparated:ah,number:Ce,overloadedBoolean:tae,spaceSeparated:Xt},Symbol.toStringTag,{value:"Module"})),o2=Object.keys(nj);class C3 extends sa{constructor(t,n,r,i){let s=-1;if(super(t,n),P7(this,"space",i),typeof r=="number")for(;++s<o2.length;){const a=o2[s];P7(this,o2[s],(r&nj[a])===nj[a])}}}C3.prototype.defined=!0;function P7(e,t,n){n&&(e[t]=n)}const Krt={}.hasOwnProperty;function _p(e){const t={},n={};let r;for(r in e.properties)if(Krt.call(e.properties,r)){const i=e.properties[r],s=new C3(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[tj(r)]=r,n[tj(s.attribute)]=r}return new Pv(t,n,e.space)}const nae=_p({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),rae=_p({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function iae(e,t){return t in e?e[t]:t}function sae(e,t){return iae(e,t.toLowerCase())}const aae=_p({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:sae,properties:{xmlns:null,xmlnsXLink:null}}),oae=_p({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:qn,ariaAutoComplete:null,ariaBusy:qn,ariaChecked:qn,ariaColCount:Ce,ariaColIndex:Ce,ariaColSpan:Ce,ariaControls:Xt,ariaCurrent:null,ariaDescribedBy:Xt,ariaDetails:null,ariaDisabled:qn,ariaDropEffect:Xt,ariaErrorMessage:null,ariaExpanded:qn,ariaFlowTo:Xt,ariaGrabbed:qn,ariaHasPopup:null,ariaHidden:qn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Xt,ariaLevel:Ce,ariaLive:null,ariaModal:qn,ariaMultiLine:qn,ariaMultiSelectable:qn,ariaOrientation:null,ariaOwns:Xt,ariaPlaceholder:null,ariaPosInSet:Ce,ariaPressed:qn,ariaReadOnly:qn,ariaRelevant:null,ariaRequired:qn,ariaRoleDescription:Xt,ariaRowCount:Ce,ariaRowIndex:Ce,ariaRowSpan:Ce,ariaSelected:qn,ariaSetSize:Ce,ariaSort:null,ariaValueMax:Ce,ariaValueMin:Ce,ariaValueNow:Ce,ariaValueText:null,role:null}}),Grt=_p({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:sae,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ah,acceptCharset:Xt,accessKey:Xt,action:null,allow:null,allowFullScreen:rt,allowPaymentRequest:rt,allowUserMedia:rt,alt:null,as:null,async:rt,autoCapitalize:null,autoComplete:Xt,autoFocus:rt,autoPlay:rt,blocking:Xt,capture:null,charSet:null,checked:rt,cite:null,className:Xt,cols:Ce,colSpan:null,content:null,contentEditable:qn,controls:rt,controlsList:Xt,coords:Ce|ah,crossOrigin:null,data:null,dateTime:null,decoding:null,default:rt,defer:rt,dir:null,dirName:null,disabled:rt,download:tae,draggable:qn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:rt,formTarget:null,headers:Xt,height:Ce,hidden:rt,high:Ce,href:null,hrefLang:null,htmlFor:Xt,httpEquiv:Xt,id:null,imageSizes:null,imageSrcSet:null,inert:rt,inputMode:null,integrity:null,is:null,isMap:rt,itemId:null,itemProp:Xt,itemRef:Xt,itemScope:rt,itemType:Xt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:rt,low:Ce,manifest:null,max:null,maxLength:Ce,media:null,method:null,min:null,minLength:Ce,multiple:rt,muted:rt,name:null,nonce:null,noModule:rt,noValidate:rt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:rt,optimum:Ce,pattern:null,ping:Xt,placeholder:null,playsInline:rt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:rt,referrerPolicy:null,rel:Xt,required:rt,reversed:rt,rows:Ce,rowSpan:Ce,sandbox:Xt,scope:null,scoped:rt,seamless:rt,selected:rt,shadowRootClonable:rt,shadowRootDelegatesFocus:rt,shadowRootMode:null,shape:null,size:Ce,sizes:null,slot:null,span:Ce,spellCheck:qn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ce,step:null,style:null,tabIndex:Ce,target:null,title:null,translate:null,type:null,typeMustMatch:rt,useMap:null,value:qn,width:Ce,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Xt,axis:null,background:null,bgColor:null,border:Ce,borderColor:null,bottomMargin:Ce,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:rt,declare:rt,event:null,face:null,frame:null,frameBorder:null,hSpace:Ce,leftMargin:Ce,link:null,longDesc:null,lowSrc:null,marginHeight:Ce,marginWidth:Ce,noResize:rt,noHref:rt,noShade:rt,noWrap:rt,object:null,profile:null,prompt:null,rev:null,rightMargin:Ce,rules:null,scheme:null,scrolling:qn,standby:null,summary:null,text:null,topMargin:Ce,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ce,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:rt,disableRemotePlayback:rt,prefix:null,property:null,results:Ce,security:null,unselectable:null}}),Yrt=_p({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:iae,properties:{about:Xi,accentHeight:Ce,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ce,amplitude:Ce,arabicForm:null,ascent:Ce,attributeName:null,attributeType:null,azimuth:Ce,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ce,by:null,calcMode:null,capHeight:Ce,className:Xt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ce,diffuseConstant:Ce,direction:null,display:null,dur:null,divisor:Ce,dominantBaseline:null,download:rt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ce,enableBackground:null,end:null,event:null,exponent:Ce,externalResourcesRequired:null,fill:null,fillOpacity:Ce,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ah,g2:ah,glyphName:ah,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ce,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ce,horizOriginX:Ce,horizOriginY:Ce,id:null,ideographic:Ce,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ce,k:Ce,k1:Ce,k2:Ce,k3:Ce,k4:Ce,kernelMatrix:Xi,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ce,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ce,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ce,overlineThickness:Ce,paintOrder:null,panose1:null,path:null,pathLength:Ce,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Xt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ce,pointsAtY:Ce,pointsAtZ:Ce,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Xi,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Xi,rev:Xi,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Xi,requiredFeatures:Xi,requiredFonts:Xi,requiredFormats:Xi,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ce,specularExponent:Ce,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ce,strikethroughThickness:Ce,string:null,stroke:null,strokeDashArray:Xi,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ce,strokeOpacity:Ce,strokeWidth:null,style:null,surfaceScale:Ce,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Xi,tabIndex:Ce,tableValues:null,target:null,targetX:Ce,targetY:Ce,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Xi,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ce,underlineThickness:Ce,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ce,values:null,vAlphabetic:Ce,vMathematical:Ce,vectorEffect:null,vHanging:Ce,vIdeographic:Ce,version:null,vertAdvY:Ce,vertOriginX:Ce,vertOriginY:Ce,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ce,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Xrt=/^data[-\w.:]+$/i,I7=/-[a-z]/g,Qrt=/[A-Z]/g;function Jrt(e,t){const n=tj(t);let r=t,i=sa;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Xrt.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(I7,eit);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!I7.test(s)){let a=s.replace(Qrt,Zrt);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}i=C3}return new i(r,t)}function Zrt(e){return"-"+e.toLowerCase()}function eit(e){return e.charAt(1).toUpperCase()}const tit=eae([rae,nae,aae,oae,Grt],"html"),lae=eae([rae,nae,aae,oae,Yrt],"svg"),nit={},rit={}.hasOwnProperty,cae=Cse("type",{handlers:{root:sit,element:uit,text:lit,comment:cit,doctype:oit}});function iit(e,t){const r=(t||nit).space;return cae(e,r==="svg"?lae:tit)}function sit(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=T3(e.children,n,t),kp(e,n),n}function ait(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=T3(e.children,n,t),kp(e,n),n}function oit(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return kp(e,t),t}function lit(e){const t={nodeName:"#text",value:e.value,parentNode:null};return kp(e,t),t}function cit(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return kp(e,t),t}function uit(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=lae);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&rit.call(e.properties,s)){const c=dit(r,s,e.properties[s]);c&&i.push(c)}}const a=r.space,o={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:Ku[a],childNodes:[],parentNode:null};return o.childNodes=T3(e.children,o,r),kp(e,o),e.tagName==="template"&&e.content&&(o.content=ait(e.content,r)),o}function dit(e,t,n){const r=Jrt(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?$ie(n):Gie(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=Ku[r.space]}return i}function T3(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=cae(e[r],n);s.parentNode=t,i.push(s)}return i}function kp(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const fit=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],hit=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),mn="";var z;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(z||(z={}));const Ai={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function uae(e){return e>=55296&&e<=57343}function pit(e){return e>=56320&&e<=57343}function mit(e,t){return(e-55296)*1024+9216+t}function dae(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function fae(e){return e>=64976&&e<=65007||hit.has(e)}var ce;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(ce||(ce={}));const git=65536;class vit{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=git,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t,n){const{line:r,col:i,offset:s}=this,a=i+n,o=s+n;return{code:t,startLine:r,endLine:r,startCol:a,endCol:a,startOffset:o,endOffset:o}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(pit(n))return this.pos++,this._addGap(),mit(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,z.EOF;return this._err(ce.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,z.EOF;const r=this.html.charCodeAt(n);return r===z.CARRIAGE_RETURN?z.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,z.EOF;let t=this.html.charCodeAt(this.pos);return t===z.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,z.LINE_FEED):t===z.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,uae(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===z.LINE_FEED||t===z.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){dae(t)?this._err(ce.controlCharacterInInputStream):fae(t)&&this._err(ce.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var ut;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(ut||(ut={}));function hae(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const yit=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),xit=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function bit(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=xit.get(e))!==null&&t!==void 0?t:e}var wr;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(wr||(wr={}));const wit=32;var sc;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(sc||(sc={}));function rj(e){return e>=wr.ZERO&&e<=wr.NINE}function Eit(e){return e>=wr.UPPER_A&&e<=wr.UPPER_F||e>=wr.LOWER_A&&e<=wr.LOWER_F}function Sit(e){return e>=wr.UPPER_A&&e<=wr.UPPER_Z||e>=wr.LOWER_A&&e<=wr.LOWER_Z||rj(e)}function Nit(e){return e===wr.EQUALS||Sit(e)}var gr;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(gr||(gr={}));var Fo;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Fo||(Fo={}));class _it{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=gr.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Fo.Strict}startEntity(t){this.decodeMode=t,this.state=gr.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case gr.EntityStart:return t.charCodeAt(n)===wr.NUM?(this.state=gr.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=gr.NamedEntity,this.stateNamedEntity(t,n));case gr.NumericStart:return this.stateNumericStart(t,n);case gr.NumericDecimal:return this.stateNumericDecimal(t,n);case gr.NumericHex:return this.stateNumericHex(t,n);case gr.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|wit)===wr.LOWER_X?(this.state=gr.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=gr.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+Number.parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(rj(i)||Eit(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(rj(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===wr.SEMI)this.consumed+=1;else if(this.decodeMode===Fo.Strict)return 0;return this.emitCodePoint(bit(this.result),this.consumed),this.errors&&(t!==wr.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&sc.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const a=t.charCodeAt(n);if(this.treeIndex=kit(r,i,this.treeIndex+Math.max(1,s),a),this.treeIndex<0)return this.result===0||this.decodeMode===Fo.Attribute&&(s===0||Nit(a))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&sc.VALUE_LENGTH)>>14,s!==0){if(a===wr.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Fo.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&sc.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~sc.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case gr.NamedEntity:return this.result!==0&&(this.decodeMode!==Fo.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case gr.NumericDecimal:return this.emitNumericEntity(0,2);case gr.NumericHex:return this.emitNumericEntity(0,3);case gr.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case gr.EntityStart:return 0}}}function kit(e,t,n,r){const i=(t&sc.BRANCH_LENGTH)>>7,s=t&sc.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const c=r-s;return c<0||c>=i?-1:e[n+c]-1}let a=n,o=a+i-1;for(;a<=o;){const c=a+o>>>1,u=e[c];if(u<r)a=c+1;else if(u>r)o=c-1;else return e[c+i]}return-1}var we;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(we||(we={}));var cd;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(cd||(cd={}));var Bs;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Bs||(Bs={}));var ne;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(ne||(ne={}));var C;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"})(C||(C={}));const Cit=new Map([[ne.A,C.A],[ne.ADDRESS,C.ADDRESS],[ne.ANNOTATION_XML,C.ANNOTATION_XML],[ne.APPLET,C.APPLET],[ne.AREA,C.AREA],[ne.ARTICLE,C.ARTICLE],[ne.ASIDE,C.ASIDE],[ne.B,C.B],[ne.BASE,C.BASE],[ne.BASEFONT,C.BASEFONT],[ne.BGSOUND,C.BGSOUND],[ne.BIG,C.BIG],[ne.BLOCKQUOTE,C.BLOCKQUOTE],[ne.BODY,C.BODY],[ne.BR,C.BR],[ne.BUTTON,C.BUTTON],[ne.CAPTION,C.CAPTION],[ne.CENTER,C.CENTER],[ne.CODE,C.CODE],[ne.COL,C.COL],[ne.COLGROUP,C.COLGROUP],[ne.DD,C.DD],[ne.DESC,C.DESC],[ne.DETAILS,C.DETAILS],[ne.DIALOG,C.DIALOG],[ne.DIR,C.DIR],[ne.DIV,C.DIV],[ne.DL,C.DL],[ne.DT,C.DT],[ne.EM,C.EM],[ne.EMBED,C.EMBED],[ne.FIELDSET,C.FIELDSET],[ne.FIGCAPTION,C.FIGCAPTION],[ne.FIGURE,C.FIGURE],[ne.FONT,C.FONT],[ne.FOOTER,C.FOOTER],[ne.FOREIGN_OBJECT,C.FOREIGN_OBJECT],[ne.FORM,C.FORM],[ne.FRAME,C.FRAME],[ne.FRAMESET,C.FRAMESET],[ne.H1,C.H1],[ne.H2,C.H2],[ne.H3,C.H3],[ne.H4,C.H4],[ne.H5,C.H5],[ne.H6,C.H6],[ne.HEAD,C.HEAD],[ne.HEADER,C.HEADER],[ne.HGROUP,C.HGROUP],[ne.HR,C.HR],[ne.HTML,C.HTML],[ne.I,C.I],[ne.IMG,C.IMG],[ne.IMAGE,C.IMAGE],[ne.INPUT,C.INPUT],[ne.IFRAME,C.IFRAME],[ne.KEYGEN,C.KEYGEN],[ne.LABEL,C.LABEL],[ne.LI,C.LI],[ne.LINK,C.LINK],[ne.LISTING,C.LISTING],[ne.MAIN,C.MAIN],[ne.MALIGNMARK,C.MALIGNMARK],[ne.MARQUEE,C.MARQUEE],[ne.MATH,C.MATH],[ne.MENU,C.MENU],[ne.META,C.META],[ne.MGLYPH,C.MGLYPH],[ne.MI,C.MI],[ne.MO,C.MO],[ne.MN,C.MN],[ne.MS,C.MS],[ne.MTEXT,C.MTEXT],[ne.NAV,C.NAV],[ne.NOBR,C.NOBR],[ne.NOFRAMES,C.NOFRAMES],[ne.NOEMBED,C.NOEMBED],[ne.NOSCRIPT,C.NOSCRIPT],[ne.OBJECT,C.OBJECT],[ne.OL,C.OL],[ne.OPTGROUP,C.OPTGROUP],[ne.OPTION,C.OPTION],[ne.P,C.P],[ne.PARAM,C.PARAM],[ne.PLAINTEXT,C.PLAINTEXT],[ne.PRE,C.PRE],[ne.RB,C.RB],[ne.RP,C.RP],[ne.RT,C.RT],[ne.RTC,C.RTC],[ne.RUBY,C.RUBY],[ne.S,C.S],[ne.SCRIPT,C.SCRIPT],[ne.SEARCH,C.SEARCH],[ne.SECTION,C.SECTION],[ne.SELECT,C.SELECT],[ne.SOURCE,C.SOURCE],[ne.SMALL,C.SMALL],[ne.SPAN,C.SPAN],[ne.STRIKE,C.STRIKE],[ne.STRONG,C.STRONG],[ne.STYLE,C.STYLE],[ne.SUB,C.SUB],[ne.SUMMARY,C.SUMMARY],[ne.SUP,C.SUP],[ne.TABLE,C.TABLE],[ne.TBODY,C.TBODY],[ne.TEMPLATE,C.TEMPLATE],[ne.TEXTAREA,C.TEXTAREA],[ne.TFOOT,C.TFOOT],[ne.TD,C.TD],[ne.TH,C.TH],[ne.THEAD,C.THEAD],[ne.TITLE,C.TITLE],[ne.TR,C.TR],[ne.TRACK,C.TRACK],[ne.TT,C.TT],[ne.U,C.U],[ne.UL,C.UL],[ne.SVG,C.SVG],[ne.VAR,C.VAR],[ne.WBR,C.WBR],[ne.XMP,C.XMP]]);function Cp(e){var t;return(t=Cit.get(e))!==null&&t!==void 0?t:C.UNKNOWN}const Se=C,Tit={[we.HTML]:new Set([Se.ADDRESS,Se.APPLET,Se.AREA,Se.ARTICLE,Se.ASIDE,Se.BASE,Se.BASEFONT,Se.BGSOUND,Se.BLOCKQUOTE,Se.BODY,Se.BR,Se.BUTTON,Se.CAPTION,Se.CENTER,Se.COL,Se.COLGROUP,Se.DD,Se.DETAILS,Se.DIR,Se.DIV,Se.DL,Se.DT,Se.EMBED,Se.FIELDSET,Se.FIGCAPTION,Se.FIGURE,Se.FOOTER,Se.FORM,Se.FRAME,Se.FRAMESET,Se.H1,Se.H2,Se.H3,Se.H4,Se.H5,Se.H6,Se.HEAD,Se.HEADER,Se.HGROUP,Se.HR,Se.HTML,Se.IFRAME,Se.IMG,Se.INPUT,Se.LI,Se.LINK,Se.LISTING,Se.MAIN,Se.MARQUEE,Se.MENU,Se.META,Se.NAV,Se.NOEMBED,Se.NOFRAMES,Se.NOSCRIPT,Se.OBJECT,Se.OL,Se.P,Se.PARAM,Se.PLAINTEXT,Se.PRE,Se.SCRIPT,Se.SECTION,Se.SELECT,Se.SOURCE,Se.STYLE,Se.SUMMARY,Se.TABLE,Se.TBODY,Se.TD,Se.TEMPLATE,Se.TEXTAREA,Se.TFOOT,Se.TH,Se.THEAD,Se.TITLE,Se.TR,Se.TRACK,Se.UL,Se.WBR,Se.XMP]),[we.MATHML]:new Set([Se.MI,Se.MO,Se.MN,Se.MS,Se.MTEXT,Se.ANNOTATION_XML]),[we.SVG]:new Set([Se.TITLE,Se.FOREIGN_OBJECT,Se.DESC]),[we.XLINK]:new Set,[we.XML]:new Set,[we.XMLNS]:new Set},ij=new Set([Se.H1,Se.H2,Se.H3,Se.H4,Se.H5,Se.H6]);ne.STYLE,ne.SCRIPT,ne.XMP,ne.IFRAME,ne.NOEMBED,ne.NOFRAMES,ne.PLAINTEXT;var V;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(V||(V={}));const zn={DATA:V.DATA,RCDATA:V.RCDATA,RAWTEXT:V.RAWTEXT,SCRIPT_DATA:V.SCRIPT_DATA,PLAINTEXT:V.PLAINTEXT,CDATA_SECTION:V.CDATA_SECTION};function Ait(e){return e>=z.DIGIT_0&&e<=z.DIGIT_9}function wm(e){return e>=z.LATIN_CAPITAL_A&&e<=z.LATIN_CAPITAL_Z}function jit(e){return e>=z.LATIN_SMALL_A&&e<=z.LATIN_SMALL_Z}function Rl(e){return jit(e)||wm(e)}function D7(e){return Rl(e)||Ait(e)}function sx(e){return e+32}function pae(e){return e===z.SPACE||e===z.LINE_FEED||e===z.TABULATION||e===z.FORM_FEED}function M7(e){return pae(e)||e===z.SOLIDUS||e===z.GREATER_THAN_SIGN}function Oit(e){return e===z.NULL?ce.nullCharacterReference:e>1114111?ce.characterReferenceOutsideUnicodeRange:uae(e)?ce.surrogateCharacterReference:fae(e)?ce.noncharacterCharacterReference:dae(e)||e===z.CARRIAGE_RETURN?ce.controlCharacterReference:null}class Pit{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=V.DATA,this.returnState=V.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new vit(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new _it(yit,(r,i)=>{this.preprocessor.pos=this.entityStartPos+i-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(ce.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(ce.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const i=Oit(r);i&&this._err(i,1)}}:void 0)}_err(t,n=0){var r,i;(i=(r=this.handler).onParseError)===null||i===void 0||i.call(r,this.preprocessor.getError(t,n))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:ut.START_TAG,tagName:"",tagID:C.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:ut.END_TAG,tagName:"",tagID:C.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:ut.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:ut.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(hae(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(ce.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=Cp(t.tagName),t.type===ut.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(ce.endTagWithAttributes),t.selfClosing&&this._err(ce.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case ut.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case ut.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case ut.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:ut.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===t){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(t,n)}_emitCodePoint(t){const n=pae(t)?ut.WHITESPACE_CHARACTER:t===z.NULL?ut.NULL_CHARACTER:ut.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(ut.CHARACTER,t)}_startCharacterReference(){this.returnState=this.state,this.state=V.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Fo.Attribute:Fo.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===V.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===V.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===V.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case V.DATA:{this._stateData(t);break}case V.RCDATA:{this._stateRcdata(t);break}case V.RAWTEXT:{this._stateRawtext(t);break}case V.SCRIPT_DATA:{this._stateScriptData(t);break}case V.PLAINTEXT:{this._statePlaintext(t);break}case V.TAG_OPEN:{this._stateTagOpen(t);break}case V.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case V.TAG_NAME:{this._stateTagName(t);break}case V.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case V.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case V.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case V.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case V.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case V.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case V.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case V.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case V.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case V.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case V.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case V.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case V.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case V.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case V.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case V.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case V.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case V.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case V.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case V.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case V.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case V.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case V.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case V.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case V.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case V.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case V.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case V.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case V.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case V.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case V.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case V.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case V.BOGUS_COMMENT:{this._stateBogusComment(t);break}case V.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case V.COMMENT_START:{this._stateCommentStart(t);break}case V.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case V.COMMENT:{this._stateComment(t);break}case V.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case V.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case V.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case V.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case V.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case V.COMMENT_END:{this._stateCommentEnd(t);break}case V.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case V.DOCTYPE:{this._stateDoctype(t);break}case V.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case V.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case V.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case V.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case V.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case V.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case V.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case V.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case V.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case V.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case V.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case V.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case V.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case V.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case V.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case V.CDATA_SECTION:{this._stateCdataSection(t);break}case V.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case V.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case V.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case V.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case z.LESS_THAN_SIGN:{this.state=V.TAG_OPEN;break}case z.AMPERSAND:{this._startCharacterReference();break}case z.NULL:{this._err(ce.unexpectedNullCharacter),this._emitCodePoint(t);break}case z.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case z.AMPERSAND:{this._startCharacterReference();break}case z.LESS_THAN_SIGN:{this.state=V.RCDATA_LESS_THAN_SIGN;break}case z.NULL:{this._err(ce.unexpectedNullCharacter),this._emitChars(mn);break}case z.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case z.LESS_THAN_SIGN:{this.state=V.RAWTEXT_LESS_THAN_SIGN;break}case z.NULL:{this._err(ce.unexpectedNullCharacter),this._emitChars(mn);break}case z.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case z.LESS_THAN_SIGN:{this.state=V.SCRIPT_DATA_LESS_THAN_SIGN;break}case z.NULL:{this._err(ce.unexpectedNullCharacter),this._emitChars(mn);break}case z.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case z.NULL:{this._err(ce.unexpectedNullCharacter),this._emitChars(mn);break}case z.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Rl(t))this._createStartTagToken(),this.state=V.TAG_NAME,this._stateTagName(t);else switch(t){case z.EXCLAMATION_MARK:{this.state=V.MARKUP_DECLARATION_OPEN;break}case z.SOLIDUS:{this.state=V.END_TAG_OPEN;break}case z.QUESTION_MARK:{this._err(ce.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=V.BOGUS_COMMENT,this._stateBogusComment(t);break}case z.EOF:{this._err(ce.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(ce.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=V.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Rl(t))this._createEndTagToken(),this.state=V.TAG_NAME,this._stateTagName(t);else switch(t){case z.GREATER_THAN_SIGN:{this._err(ce.missingEndTagName),this.state=V.DATA;break}case z.EOF:{this._err(ce.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(ce.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=V.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:{this.state=V.BEFORE_ATTRIBUTE_NAME;break}case z.SOLIDUS:{this.state=V.SELF_CLOSING_START_TAG;break}case z.GREATER_THAN_SIGN:{this.state=V.DATA,this.emitCurrentTagToken();break}case z.NULL:{this._err(ce.unexpectedNullCharacter),n.tagName+=mn;break}case z.EOF:{this._err(ce.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(wm(t)?sx(t):t)}}_stateRcdataLessThanSign(t){t===z.SOLIDUS?this.state=V.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=V.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Rl(t)?(this.state=V.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=V.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=V.BEFORE_ATTRIBUTE_NAME,!1;case z.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=V.SELF_CLOSING_START_TAG,!1;case z.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=V.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=V.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===z.SOLIDUS?this.state=V.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=V.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Rl(t)?(this.state=V.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=V.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=V.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case z.SOLIDUS:{this.state=V.SCRIPT_DATA_END_TAG_OPEN;break}case z.EXCLAMATION_MARK:{this.state=V.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=V.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Rl(t)?(this.state=V.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=V.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=V.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===z.HYPHEN_MINUS?(this.state=V.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=V.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===z.HYPHEN_MINUS?(this.state=V.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=V.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case z.HYPHEN_MINUS:{this.state=V.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case z.LESS_THAN_SIGN:{this.state=V.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case z.NULL:{this._err(ce.unexpectedNullCharacter),this._emitChars(mn);break}case z.EOF:{this._err(ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case z.HYPHEN_MINUS:{this.state=V.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case z.LESS_THAN_SIGN:{this.state=V.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case z.NULL:{this._err(ce.unexpectedNullCharacter),this.state=V.SCRIPT_DATA_ESCAPED,this._emitChars(mn);break}case z.EOF:{this._err(ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=V.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case z.HYPHEN_MINUS:{this._emitChars("-");break}case z.LESS_THAN_SIGN:{this.state=V.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case z.GREATER_THAN_SIGN:{this.state=V.SCRIPT_DATA,this._emitChars(">");break}case z.NULL:{this._err(ce.unexpectedNullCharacter),this.state=V.SCRIPT_DATA_ESCAPED,this._emitChars(mn);break}case z.EOF:{this._err(ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=V.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===z.SOLIDUS?this.state=V.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Rl(t)?(this._emitChars("<"),this.state=V.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=V.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Rl(t)?(this.state=V.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=V.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=V.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Ai.SCRIPT,!1)&&M7(this.preprocessor.peek(Ai.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Ai.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=V.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=V.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case z.HYPHEN_MINUS:{this.state=V.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case z.LESS_THAN_SIGN:{this.state=V.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case z.NULL:{this._err(ce.unexpectedNullCharacter),this._emitChars(mn);break}case z.EOF:{this._err(ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case z.HYPHEN_MINUS:{this.state=V.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case z.LESS_THAN_SIGN:{this.state=V.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case z.NULL:{this._err(ce.unexpectedNullCharacter),this.state=V.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(mn);break}case z.EOF:{this._err(ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=V.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case z.HYPHEN_MINUS:{this._emitChars("-");break}case z.LESS_THAN_SIGN:{this.state=V.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case z.GREATER_THAN_SIGN:{this.state=V.SCRIPT_DATA,this._emitChars(">");break}case z.NULL:{this._err(ce.unexpectedNullCharacter),this.state=V.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(mn);break}case z.EOF:{this._err(ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=V.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===z.SOLIDUS?(this.state=V.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=V.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Ai.SCRIPT,!1)&&M7(this.preprocessor.peek(Ai.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Ai.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=V.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=V.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:break;case z.SOLIDUS:case z.GREATER_THAN_SIGN:case z.EOF:{this.state=V.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case z.EQUALS_SIGN:{this._err(ce.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=V.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=V.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:case z.SOLIDUS:case z.GREATER_THAN_SIGN:case z.EOF:{this._leaveAttrName(),this.state=V.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case z.EQUALS_SIGN:{this._leaveAttrName(),this.state=V.BEFORE_ATTRIBUTE_VALUE;break}case z.QUOTATION_MARK:case z.APOSTROPHE:case z.LESS_THAN_SIGN:{this._err(ce.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case z.NULL:{this._err(ce.unexpectedNullCharacter),this.currentAttr.name+=mn;break}default:this.currentAttr.name+=String.fromCodePoint(wm(t)?sx(t):t)}}_stateAfterAttributeName(t){switch(t){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:break;case z.SOLIDUS:{this.state=V.SELF_CLOSING_START_TAG;break}case z.EQUALS_SIGN:{this.state=V.BEFORE_ATTRIBUTE_VALUE;break}case z.GREATER_THAN_SIGN:{this.state=V.DATA,this.emitCurrentTagToken();break}case z.EOF:{this._err(ce.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=V.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:break;case z.QUOTATION_MARK:{this.state=V.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case z.APOSTROPHE:{this.state=V.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case z.GREATER_THAN_SIGN:{this._err(ce.missingAttributeValue),this.state=V.DATA,this.emitCurrentTagToken();break}default:this.state=V.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case z.QUOTATION_MARK:{this.state=V.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case z.AMPERSAND:{this._startCharacterReference();break}case z.NULL:{this._err(ce.unexpectedNullCharacter),this.currentAttr.value+=mn;break}case z.EOF:{this._err(ce.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case z.APOSTROPHE:{this.state=V.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case z.AMPERSAND:{this._startCharacterReference();break}case z.NULL:{this._err(ce.unexpectedNullCharacter),this.currentAttr.value+=mn;break}case z.EOF:{this._err(ce.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:{this._leaveAttrValue(),this.state=V.BEFORE_ATTRIBUTE_NAME;break}case z.AMPERSAND:{this._startCharacterReference();break}case z.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=V.DATA,this.emitCurrentTagToken();break}case z.NULL:{this._err(ce.unexpectedNullCharacter),this.currentAttr.value+=mn;break}case z.QUOTATION_MARK:case z.APOSTROPHE:case z.LESS_THAN_SIGN:case z.EQUALS_SIGN:case z.GRAVE_ACCENT:{this._err(ce.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case z.EOF:{this._err(ce.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:{this._leaveAttrValue(),this.state=V.BEFORE_ATTRIBUTE_NAME;break}case z.SOLIDUS:{this._leaveAttrValue(),this.state=V.SELF_CLOSING_START_TAG;break}case z.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=V.DATA,this.emitCurrentTagToken();break}case z.EOF:{this._err(ce.eofInTag),this._emitEOFToken();break}default:this._err(ce.missingWhitespaceBetweenAttributes),this.state=V.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case z.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=V.DATA,this.emitCurrentTagToken();break}case z.EOF:{this._err(ce.eofInTag),this._emitEOFToken();break}default:this._err(ce.unexpectedSolidusInTag),this.state=V.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case z.GREATER_THAN_SIGN:{this.state=V.DATA,this.emitCurrentComment(n);break}case z.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case z.NULL:{this._err(ce.unexpectedNullCharacter),n.data+=mn;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Ai.DASH_DASH,!0)?(this._createCommentToken(Ai.DASH_DASH.length+1),this.state=V.COMMENT_START):this._consumeSequenceIfMatch(Ai.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Ai.DOCTYPE.length+1),this.state=V.DOCTYPE):this._consumeSequenceIfMatch(Ai.CDATA_START,!0)?this.inForeignNode?this.state=V.CDATA_SECTION:(this._err(ce.cdataInHtmlContent),this._createCommentToken(Ai.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=V.BOGUS_COMMENT):this._ensureHibernation()||(this._err(ce.incorrectlyOpenedComment),this._createCommentToken(2),this.state=V.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case z.HYPHEN_MINUS:{this.state=V.COMMENT_START_DASH;break}case z.GREATER_THAN_SIGN:{this._err(ce.abruptClosingOfEmptyComment),this.state=V.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=V.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case z.HYPHEN_MINUS:{this.state=V.COMMENT_END;break}case z.GREATER_THAN_SIGN:{this._err(ce.abruptClosingOfEmptyComment),this.state=V.DATA,this.emitCurrentComment(n);break}case z.EOF:{this._err(ce.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=V.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case z.HYPHEN_MINUS:{this.state=V.COMMENT_END_DASH;break}case z.LESS_THAN_SIGN:{n.data+="<",this.state=V.COMMENT_LESS_THAN_SIGN;break}case z.NULL:{this._err(ce.unexpectedNullCharacter),n.data+=mn;break}case z.EOF:{this._err(ce.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case z.EXCLAMATION_MARK:{n.data+="!",this.state=V.COMMENT_LESS_THAN_SIGN_BANG;break}case z.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=V.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===z.HYPHEN_MINUS?this.state=V.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=V.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===z.HYPHEN_MINUS?this.state=V.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=V.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==z.GREATER_THAN_SIGN&&t!==z.EOF&&this._err(ce.nestedComment),this.state=V.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case z.HYPHEN_MINUS:{this.state=V.COMMENT_END;break}case z.EOF:{this._err(ce.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=V.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case z.GREATER_THAN_SIGN:{this.state=V.DATA,this.emitCurrentComment(n);break}case z.EXCLAMATION_MARK:{this.state=V.COMMENT_END_BANG;break}case z.HYPHEN_MINUS:{n.data+="-";break}case z.EOF:{this._err(ce.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=V.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case z.HYPHEN_MINUS:{n.data+="--!",this.state=V.COMMENT_END_DASH;break}case z.GREATER_THAN_SIGN:{this._err(ce.incorrectlyClosedComment),this.state=V.DATA,this.emitCurrentComment(n);break}case z.EOF:{this._err(ce.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=V.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:{this.state=V.BEFORE_DOCTYPE_NAME;break}case z.GREATER_THAN_SIGN:{this.state=V.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case z.EOF:{this._err(ce.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ce.missingWhitespaceBeforeDoctypeName),this.state=V.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(wm(t))this._createDoctypeToken(String.fromCharCode(sx(t))),this.state=V.DOCTYPE_NAME;else switch(t){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:break;case z.NULL:{this._err(ce.unexpectedNullCharacter),this._createDoctypeToken(mn),this.state=V.DOCTYPE_NAME;break}case z.GREATER_THAN_SIGN:{this._err(ce.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=V.DATA;break}case z.EOF:{this._err(ce.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=V.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:{this.state=V.AFTER_DOCTYPE_NAME;break}case z.GREATER_THAN_SIGN:{this.state=V.DATA,this.emitCurrentDoctype(n);break}case z.NULL:{this._err(ce.unexpectedNullCharacter),n.name+=mn;break}case z.EOF:{this._err(ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(wm(t)?sx(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:break;case z.GREATER_THAN_SIGN:{this.state=V.DATA,this.emitCurrentDoctype(n);break}case z.EOF:{this._err(ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Ai.PUBLIC,!1)?this.state=V.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Ai.SYSTEM,!1)?this.state=V.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(ce.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=V.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:{this.state=V.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case z.QUOTATION_MARK:{this._err(ce.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=V.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case z.APOSTROPHE:{this._err(ce.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=V.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case z.GREATER_THAN_SIGN:{this._err(ce.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=V.DATA,this.emitCurrentDoctype(n);break}case z.EOF:{this._err(ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ce.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=V.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:break;case z.QUOTATION_MARK:{n.publicId="",this.state=V.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case z.APOSTROPHE:{n.publicId="",this.state=V.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case z.GREATER_THAN_SIGN:{this._err(ce.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=V.DATA,this.emitCurrentDoctype(n);break}case z.EOF:{this._err(ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ce.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=V.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case z.QUOTATION_MARK:{this.state=V.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case z.NULL:{this._err(ce.unexpectedNullCharacter),n.publicId+=mn;break}case z.GREATER_THAN_SIGN:{this._err(ce.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=V.DATA;break}case z.EOF:{this._err(ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case z.APOSTROPHE:{this.state=V.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case z.NULL:{this._err(ce.unexpectedNullCharacter),n.publicId+=mn;break}case z.GREATER_THAN_SIGN:{this._err(ce.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=V.DATA;break}case z.EOF:{this._err(ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:{this.state=V.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case z.GREATER_THAN_SIGN:{this.state=V.DATA,this.emitCurrentDoctype(n);break}case z.QUOTATION_MARK:{this._err(ce.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=V.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case z.APOSTROPHE:{this._err(ce.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=V.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case z.EOF:{this._err(ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ce.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=V.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:break;case z.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=V.DATA;break}case z.QUOTATION_MARK:{n.systemId="",this.state=V.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case z.APOSTROPHE:{n.systemId="",this.state=V.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case z.EOF:{this._err(ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ce.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=V.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:{this.state=V.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case z.QUOTATION_MARK:{this._err(ce.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=V.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case z.APOSTROPHE:{this._err(ce.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=V.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case z.GREATER_THAN_SIGN:{this._err(ce.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=V.DATA,this.emitCurrentDoctype(n);break}case z.EOF:{this._err(ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ce.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=V.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:break;case z.QUOTATION_MARK:{n.systemId="",this.state=V.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case z.APOSTROPHE:{n.systemId="",this.state=V.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case z.GREATER_THAN_SIGN:{this._err(ce.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=V.DATA,this.emitCurrentDoctype(n);break}case z.EOF:{this._err(ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ce.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=V.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case z.QUOTATION_MARK:{this.state=V.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case z.NULL:{this._err(ce.unexpectedNullCharacter),n.systemId+=mn;break}case z.GREATER_THAN_SIGN:{this._err(ce.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=V.DATA;break}case z.EOF:{this._err(ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case z.APOSTROPHE:{this.state=V.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case z.NULL:{this._err(ce.unexpectedNullCharacter),n.systemId+=mn;break}case z.GREATER_THAN_SIGN:{this._err(ce.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=V.DATA;break}case z.EOF:{this._err(ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case z.SPACE:case z.LINE_FEED:case z.TABULATION:case z.FORM_FEED:break;case z.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=V.DATA;break}case z.EOF:{this._err(ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ce.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=V.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case z.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=V.DATA;break}case z.NULL:{this._err(ce.unexpectedNullCharacter);break}case z.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case z.RIGHT_SQUARE_BRACKET:{this.state=V.CDATA_SECTION_BRACKET;break}case z.EOF:{this._err(ce.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===z.RIGHT_SQUARE_BRACKET?this.state=V.CDATA_SECTION_END:(this._emitChars("]"),this.state=V.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case z.GREATER_THAN_SIGN:{this.state=V.DATA;break}case z.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=V.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(){let t=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(t<0)if(this.preprocessor.lastChunkWritten)t=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}t===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(z.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&D7(this.preprocessor.peek(1))?V.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(t){D7(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===z.SEMICOLON&&this._err(ce.unknownNamedCharacterReference),this.state=this.returnState,this._callState(t))}}const mae=new Set([C.DD,C.DT,C.LI,C.OPTGROUP,C.OPTION,C.P,C.RB,C.RP,C.RT,C.RTC]),R7=new Set([...mae,C.CAPTION,C.COLGROUP,C.TBODY,C.TD,C.TFOOT,C.TH,C.THEAD,C.TR]),Nw=new Set([C.APPLET,C.CAPTION,C.HTML,C.MARQUEE,C.OBJECT,C.TABLE,C.TD,C.TEMPLATE,C.TH]),Iit=new Set([...Nw,C.OL,C.UL]),Dit=new Set([...Nw,C.BUTTON]),L7=new Set([C.ANNOTATION_XML,C.MI,C.MN,C.MO,C.MS,C.MTEXT]),F7=new Set([C.DESC,C.FOREIGN_OBJECT,C.TITLE]),Mit=new Set([C.TR,C.TEMPLATE,C.HTML]),Rit=new Set([C.TBODY,C.TFOOT,C.THEAD,C.TEMPLATE,C.HTML]),Lit=new Set([C.TABLE,C.TEMPLATE,C.HTML]),Fit=new Set([C.TD,C.TH]);class Bit{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=C.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===C.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===we.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==we.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(Math.max(n,0))}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(ij,we.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Fit,we.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(Lit,we.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Rit,we.HTML)}clearBackToTableRowContext(){this.clearBackTo(Mit,we.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===C.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===C.HTML}hasInDynamicScope(t,n){for(let r=this.stackTop;r>=0;r--){const i=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case we.HTML:{if(i===t)return!0;if(n.has(i))return!1;break}case we.SVG:{if(F7.has(i))return!1;break}case we.MATHML:{if(L7.has(i))return!1;break}}}return!0}hasInScope(t){return this.hasInDynamicScope(t,Nw)}hasInListItemScope(t){return this.hasInDynamicScope(t,Iit)}hasInButtonScope(t){return this.hasInDynamicScope(t,Dit)}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];switch(this.treeAdapter.getNamespaceURI(this.items[t])){case we.HTML:{if(ij.has(n))return!0;if(Nw.has(n))return!1;break}case we.SVG:{if(F7.has(n))return!1;break}case we.MATHML:{if(L7.has(n))return!1;break}}}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===we.HTML)switch(this.tagIDs[n]){case t:return!0;case C.TABLE:case C.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===we.HTML)switch(this.tagIDs[t]){case C.TBODY:case C.THEAD:case C.TFOOT:return!0;case C.TABLE:case C.HTML:return!1}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===we.HTML)switch(this.tagIDs[n]){case t:return!0;case C.OPTION:case C.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&mae.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&R7.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==void 0&&this.currentTagId!==t&&R7.has(this.currentTagId);)this.pop()}}const l2=3;var Ka;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Ka||(Ka={}));const B7={type:Ka.Marker};class $it{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),a=this.treeAdapter.getNamespaceURI(t);for(let o=0;o<this.entries.length;o++){const c=this.entries[o];if(c.type===Ka.Marker)break;const{element:u}=c;if(this.treeAdapter.getTagName(u)===s&&this.treeAdapter.getNamespaceURI(u)===a){const d=this.treeAdapter.getAttrList(u);d.length===i&&r.push({idx:o,attrs:d})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<l2)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<l2)return;const i=new Map(n.map(a=>[a.name,a.value]));let s=0;for(let a=0;a<r.length;a++){const o=r[a];o.attrs.every(c=>i.get(c.name)===c.value)&&(s+=1,s>=l2&&this.entries.splice(o.idx,1))}}insertMarker(){this.entries.unshift(B7)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Ka.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Ka.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(B7);t===-1?this.entries.length=0:this.entries.splice(0,t+1)}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Ka.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Ka.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Ka.Element&&n.element===t)}}const Ll={createDocument(){return{nodeName:"#document",mode:Bs.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},createTextNode(e){return{nodeName:"#text",value:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};Ll.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(Ll.isTextNode(n)){n.value+=t;return}}Ll.appendChild(e,Ll.createTextNode(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&Ll.isTextNode(r)?r.value+=t:Ll.insertBefore(e,Ll.createTextNode(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},gae="html",Uit="about:legacy-compat",zit="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",vae=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Hit=[...vae,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Vit=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),yae=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Wit=[...yae,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function $7(e,t){return t.some(n=>e.startsWith(n))}function qit(e){return e.name===gae&&e.publicId===null&&(e.systemId===null||e.systemId===Uit)}function Kit(e){if(e.name!==gae)return Bs.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===zit)return Bs.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),Vit.has(n))return Bs.QUIRKS;let r=t===null?Hit:vae;if($7(n,r))return Bs.QUIRKS;if(r=t===null?yae:Wit,$7(n,r))return Bs.LIMITED_QUIRKS}return Bs.NO_QUIRKS}const U7={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Git="definitionurl",Yit="definitionURL",Xit=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),Qit=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:we.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:we.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:we.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:we.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:we.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:we.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:we.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:we.XML}],["xml:space",{prefix:"xml",name:"space",namespace:we.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:we.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:we.XMLNS}]]),Jit=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),Zit=new Set([C.B,C.BIG,C.BLOCKQUOTE,C.BODY,C.BR,C.CENTER,C.CODE,C.DD,C.DIV,C.DL,C.DT,C.EM,C.EMBED,C.H1,C.H2,C.H3,C.H4,C.H5,C.H6,C.HEAD,C.HR,C.I,C.IMG,C.LI,C.LISTING,C.MENU,C.META,C.NOBR,C.OL,C.P,C.PRE,C.RUBY,C.S,C.SMALL,C.SPAN,C.STRONG,C.STRIKE,C.SUB,C.SUP,C.TABLE,C.TT,C.U,C.UL,C.VAR]);function est(e){const t=e.tagID;return t===C.FONT&&e.attrs.some(({name:r})=>r===cd.COLOR||r===cd.SIZE||r===cd.FACE)||Zit.has(t)}function xae(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===Git){e.attrs[t].name=Yit;break}}function bae(e){for(let t=0;t<e.attrs.length;t++){const n=Xit.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function A3(e){for(let t=0;t<e.attrs.length;t++){const n=Qit.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function tst(e){const t=Jit.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=Cp(e.tagName))}function nst(e,t){return t===we.MATHML&&(e===C.MI||e===C.MO||e===C.MN||e===C.MS||e===C.MTEXT)}function rst(e,t,n){if(t===we.MATHML&&e===C.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===cd.ENCODING){const i=n[r].value.toLowerCase();return i===U7.TEXT_HTML||i===U7.APPLICATION_XML}}return t===we.SVG&&(e===C.FOREIGN_OBJECT||e===C.DESC||e===C.TITLE)}function ist(e,t,n,r){return(!r||r===we.HTML)&&rst(e,t,n)||(!r||r===we.MATHML)&&nst(e,t)}const sst="hidden",ast=8,ost=3;var W;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(W||(W={}));const lst={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},wae=new Set([C.TABLE,C.TBODY,C.TFOOT,C.THEAD,C.TR]),z7={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Ll,onParseError:null};class H7{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=W.INITIAL,this.originalInsertionMode=W.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...z7,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Pit(this.options,this),this.activeFormattingElements=new $it(this.treeAdapter),this.fragmentContextID=r?Cp(this.treeAdapter.getTagName(r)):C.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Bit(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...z7,...n};t??(t=r.treeAdapter.createElement(ne.TEMPLATE,we.HTML,[]));const i=r.treeAdapter.createElement("documentmock",we.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===C.TEMPLATE&&s.tmplInsertionModeStack.unshift(W.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:lst,a={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(a)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,a;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,a=this.fragmentContextID):{current:s,currentTagId:a}=this.openElements,this._setContextModes(s,a)}}_setContextModes(t,n){const r=t===this.document||t&&this.treeAdapter.getNamespaceURI(t)===we.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&t!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,we.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=W.TEXT}switchToPlaintextParsing(){this.insertionMode=W.TEXT,this.originalInsertionMode=W.IN_BODY,this.tokenizer.state=zn.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===ne.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==we.HTML))switch(this.fragmentContextID){case C.TITLE:case C.TEXTAREA:{this.tokenizer.state=zn.RCDATA;break}case C.STYLE:case C.XMP:case C.IFRAME:case C.NOEMBED:case C.NOFRAMES:case C.NOSCRIPT:{this.tokenizer.state=zn.RAWTEXT;break}case C.SCRIPT:{this.tokenizer.state=zn.SCRIPT_DATA;break}case C.PLAINTEXT:{this.tokenizer.state=zn.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const a=this.treeAdapter.getChildNodes(this.document).find(o=>this.treeAdapter.isDocumentTypeNode(o));a&&this.treeAdapter.setNodeSourceCodeLocation(a,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r??this.document,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,we.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,we.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(ne.HTML,we.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,C.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,a=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(a)){const{endLine:c,endCol:u,endOffset:d}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(a,{endLine:c,endCol:u,endOffset:d})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(a,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===ut.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===C.SVG&&this.treeAdapter.getTagName(n)===ne.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===we.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===C.MGLYPH||t.tagID===C.MALIGNMARK)&&r!==void 0&&!this._isIntegrationPoint(r,n,we.HTML)}_processToken(t){switch(t.type){case ut.CHARACTER:{this.onCharacter(t);break}case ut.NULL_CHARACTER:{this.onNullCharacter(t);break}case ut.COMMENT:{this.onComment(t);break}case ut.DOCTYPE:{this.onDoctype(t);break}case ut.START_TAG:{this._processStartTag(t);break}case ut.END_TAG:{this.onEndTag(t);break}case ut.EOF:{this.onEof(t);break}case ut.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return ist(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Ka.Marker||this.openElements.contains(i.element)),r=n===-1?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=W.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(C.P),this.openElements.popUntilTagNamePopped(C.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case C.TR:{this.insertionMode=W.IN_ROW;return}case C.TBODY:case C.THEAD:case C.TFOOT:{this.insertionMode=W.IN_TABLE_BODY;return}case C.CAPTION:{this.insertionMode=W.IN_CAPTION;return}case C.COLGROUP:{this.insertionMode=W.IN_COLUMN_GROUP;return}case C.TABLE:{this.insertionMode=W.IN_TABLE;return}case C.BODY:{this.insertionMode=W.IN_BODY;return}case C.FRAMESET:{this.insertionMode=W.IN_FRAMESET;return}case C.SELECT:{this._resetInsertionModeForSelect(t);return}case C.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case C.HTML:{this.insertionMode=this.headElement?W.AFTER_HEAD:W.BEFORE_HEAD;return}case C.TD:case C.TH:{if(t>0){this.insertionMode=W.IN_CELL;return}break}case C.HEAD:{if(t>0){this.insertionMode=W.IN_HEAD;return}break}}this.insertionMode=W.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===C.TEMPLATE)break;if(r===C.TABLE){this.insertionMode=W.IN_SELECT_IN_TABLE;return}}this.insertionMode=W.IN_SELECT}_isElementCausesFosterParenting(t){return wae.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case C.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===we.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case C.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return Tit[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Fat(this,t);return}switch(this.insertionMode){case W.INITIAL:{sm(this,t);break}case W.BEFORE_HTML:{sg(this,t);break}case W.BEFORE_HEAD:{ag(this,t);break}case W.IN_HEAD:{og(this,t);break}case W.IN_HEAD_NO_SCRIPT:{lg(this,t);break}case W.AFTER_HEAD:{cg(this,t);break}case W.IN_BODY:case W.IN_CAPTION:case W.IN_CELL:case W.IN_TEMPLATE:{Sae(this,t);break}case W.TEXT:case W.IN_SELECT:case W.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case W.IN_TABLE:case W.IN_TABLE_BODY:case W.IN_ROW:{c2(this,t);break}case W.IN_TABLE_TEXT:{Aae(this,t);break}case W.IN_COLUMN_GROUP:{_w(this,t);break}case W.AFTER_BODY:{kw(this,t);break}case W.AFTER_AFTER_BODY:{$x(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Lat(this,t);return}switch(this.insertionMode){case W.INITIAL:{sm(this,t);break}case W.BEFORE_HTML:{sg(this,t);break}case W.BEFORE_HEAD:{ag(this,t);break}case W.IN_HEAD:{og(this,t);break}case W.IN_HEAD_NO_SCRIPT:{lg(this,t);break}case W.AFTER_HEAD:{cg(this,t);break}case W.TEXT:{this._insertCharacters(t);break}case W.IN_TABLE:case W.IN_TABLE_BODY:case W.IN_ROW:{c2(this,t);break}case W.IN_COLUMN_GROUP:{_w(this,t);break}case W.AFTER_BODY:{kw(this,t);break}case W.AFTER_AFTER_BODY:{$x(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){sj(this,t);return}switch(this.insertionMode){case W.INITIAL:case W.BEFORE_HTML:case W.BEFORE_HEAD:case W.IN_HEAD:case W.IN_HEAD_NO_SCRIPT:case W.AFTER_HEAD:case W.IN_BODY:case W.IN_TABLE:case W.IN_CAPTION:case W.IN_COLUMN_GROUP:case W.IN_TABLE_BODY:case W.IN_ROW:case W.IN_CELL:case W.IN_SELECT:case W.IN_SELECT_IN_TABLE:case W.IN_TEMPLATE:case W.IN_FRAMESET:case W.AFTER_FRAMESET:{sj(this,t);break}case W.IN_TABLE_TEXT:{am(this,t);break}case W.AFTER_BODY:{mst(this,t);break}case W.AFTER_AFTER_BODY:case W.AFTER_AFTER_FRAMESET:{gst(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case W.INITIAL:{vst(this,t);break}case W.BEFORE_HEAD:case W.IN_HEAD:case W.IN_HEAD_NO_SCRIPT:case W.AFTER_HEAD:{this._err(t,ce.misplacedDoctype);break}case W.IN_TABLE_TEXT:{am(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,ce.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?Bat(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case W.INITIAL:{sm(this,t);break}case W.BEFORE_HTML:{yst(this,t);break}case W.BEFORE_HEAD:{bst(this,t);break}case W.IN_HEAD:{Fa(this,t);break}case W.IN_HEAD_NO_SCRIPT:{Sst(this,t);break}case W.AFTER_HEAD:{_st(this,t);break}case W.IN_BODY:{fi(this,t);break}case W.IN_TABLE:{Hh(this,t);break}case W.IN_TABLE_TEXT:{am(this,t);break}case W.IN_CAPTION:{wat(this,t);break}case W.IN_COLUMN_GROUP:{P3(this,t);break}case W.IN_TABLE_BODY:{pN(this,t);break}case W.IN_ROW:{mN(this,t);break}case W.IN_CELL:{Nat(this,t);break}case W.IN_SELECT:{Pae(this,t);break}case W.IN_SELECT_IN_TABLE:{kat(this,t);break}case W.IN_TEMPLATE:{Tat(this,t);break}case W.AFTER_BODY:{jat(this,t);break}case W.IN_FRAMESET:{Oat(this,t);break}case W.AFTER_FRAMESET:{Iat(this,t);break}case W.AFTER_AFTER_BODY:{Mat(this,t);break}case W.AFTER_AFTER_FRAMESET:{Rat(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?$at(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case W.INITIAL:{sm(this,t);break}case W.BEFORE_HTML:{xst(this,t);break}case W.BEFORE_HEAD:{wst(this,t);break}case W.IN_HEAD:{Est(this,t);break}case W.IN_HEAD_NO_SCRIPT:{Nst(this,t);break}case W.AFTER_HEAD:{kst(this,t);break}case W.IN_BODY:{hN(this,t);break}case W.TEXT:{dat(this,t);break}case W.IN_TABLE:{N0(this,t);break}case W.IN_TABLE_TEXT:{am(this,t);break}case W.IN_CAPTION:{Eat(this,t);break}case W.IN_COLUMN_GROUP:{Sat(this,t);break}case W.IN_TABLE_BODY:{aj(this,t);break}case W.IN_ROW:{Oae(this,t);break}case W.IN_CELL:{_at(this,t);break}case W.IN_SELECT:{Iae(this,t);break}case W.IN_SELECT_IN_TABLE:{Cat(this,t);break}case W.IN_TEMPLATE:{Aat(this,t);break}case W.AFTER_BODY:{Mae(this,t);break}case W.IN_FRAMESET:{Pat(this,t);break}case W.AFTER_FRAMESET:{Dat(this,t);break}case W.AFTER_AFTER_BODY:{$x(this,t);break}}}onEof(t){switch(this.insertionMode){case W.INITIAL:{sm(this,t);break}case W.BEFORE_HTML:{sg(this,t);break}case W.BEFORE_HEAD:{ag(this,t);break}case W.IN_HEAD:{og(this,t);break}case W.IN_HEAD_NO_SCRIPT:{lg(this,t);break}case W.AFTER_HEAD:{cg(this,t);break}case W.IN_BODY:case W.IN_TABLE:case W.IN_CAPTION:case W.IN_COLUMN_GROUP:case W.IN_TABLE_BODY:case W.IN_ROW:case W.IN_CELL:case W.IN_SELECT:case W.IN_SELECT_IN_TABLE:{Cae(this,t);break}case W.TEXT:{fat(this,t);break}case W.IN_TABLE_TEXT:{am(this,t);break}case W.IN_TEMPLATE:{Dae(this,t);break}case W.AFTER_BODY:case W.IN_FRAMESET:case W.AFTER_FRAMESET:case W.AFTER_AFTER_BODY:case W.AFTER_AFTER_FRAMESET:{O3(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===z.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case W.IN_HEAD:case W.IN_HEAD_NO_SCRIPT:case W.AFTER_HEAD:case W.TEXT:case W.IN_COLUMN_GROUP:case W.IN_SELECT:case W.IN_SELECT_IN_TABLE:case W.IN_FRAMESET:case W.AFTER_FRAMESET:{this._insertCharacters(t);break}case W.IN_BODY:case W.IN_CAPTION:case W.IN_CELL:case W.IN_TEMPLATE:case W.AFTER_BODY:case W.AFTER_AFTER_BODY:case W.AFTER_AFTER_FRAMESET:{Eae(this,t);break}case W.IN_TABLE:case W.IN_TABLE_BODY:case W.IN_ROW:{c2(this,t);break}case W.IN_TABLE_TEXT:{Tae(this,t);break}}}}function cst(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):kae(e,t),n}function ust(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(Math.max(r,0)),e.activeFormattingElements.removeEntry(t)),n}function dst(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,a=i;a!==n;s++,a=i){i=e.openElements.getCommonAncestor(a);const o=e.activeFormattingElements.getElementEntry(a),c=o&&s>=ost;!o||c?(c&&e.activeFormattingElements.removeEntry(o),e.openElements.remove(a)):(a=fst(e,o),r===t&&(e.activeFormattingElements.bookmark=o),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(a,r),r=a)}return r}function fst(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function hst(e,t,n){const r=e.treeAdapter.getTagName(t),i=Cp(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===C.TEMPLATE&&s===we.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function pst(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function j3(e,t){for(let n=0;n<ast;n++){const r=cst(e,t);if(!r)break;const i=ust(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=dst(e,i,r.element),a=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),a&&hst(e,a,s),pst(e,i,r)}}function sj(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function mst(e,t){e._appendCommentNode(t,e.openElements.items[0])}function gst(e,t){e._appendCommentNode(t,e.document)}function O3(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],a=e.treeAdapter.getNodeSourceCodeLocation(s);a&&!a.endTag&&e._setEndLocation(s,t)}}}}function vst(e,t){e._setDocumentType(t);const n=t.forceQuirks?Bs.QUIRKS:Kit(t);qit(t)||e._err(t,ce.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=W.BEFORE_HTML}function sm(e,t){e._err(t,ce.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Bs.QUIRKS),e.insertionMode=W.BEFORE_HTML,e._processToken(t)}function yst(e,t){t.tagID===C.HTML?(e._insertElement(t,we.HTML),e.insertionMode=W.BEFORE_HEAD):sg(e,t)}function xst(e,t){const n=t.tagID;(n===C.HTML||n===C.HEAD||n===C.BODY||n===C.BR)&&sg(e,t)}function sg(e,t){e._insertFakeRootElement(),e.insertionMode=W.BEFORE_HEAD,e._processToken(t)}function bst(e,t){switch(t.tagID){case C.HTML:{fi(e,t);break}case C.HEAD:{e._insertElement(t,we.HTML),e.headElement=e.openElements.current,e.insertionMode=W.IN_HEAD;break}default:ag(e,t)}}function wst(e,t){const n=t.tagID;n===C.HEAD||n===C.BODY||n===C.HTML||n===C.BR?ag(e,t):e._err(t,ce.endTagWithoutMatchingOpenElement)}function ag(e,t){e._insertFakeElement(ne.HEAD,C.HEAD),e.headElement=e.openElements.current,e.insertionMode=W.IN_HEAD,e._processToken(t)}function Fa(e,t){switch(t.tagID){case C.HTML:{fi(e,t);break}case C.BASE:case C.BASEFONT:case C.BGSOUND:case C.LINK:case C.META:{e._appendElement(t,we.HTML),t.ackSelfClosing=!0;break}case C.TITLE:{e._switchToTextParsing(t,zn.RCDATA);break}case C.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,zn.RAWTEXT):(e._insertElement(t,we.HTML),e.insertionMode=W.IN_HEAD_NO_SCRIPT);break}case C.NOFRAMES:case C.STYLE:{e._switchToTextParsing(t,zn.RAWTEXT);break}case C.SCRIPT:{e._switchToTextParsing(t,zn.SCRIPT_DATA);break}case C.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=W.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(W.IN_TEMPLATE);break}case C.HEAD:{e._err(t,ce.misplacedStartTagForHeadElement);break}default:og(e,t)}}function Est(e,t){switch(t.tagID){case C.HEAD:{e.openElements.pop(),e.insertionMode=W.AFTER_HEAD;break}case C.BODY:case C.BR:case C.HTML:{og(e,t);break}case C.TEMPLATE:{qd(e,t);break}default:e._err(t,ce.endTagWithoutMatchingOpenElement)}}function qd(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==C.TEMPLATE&&e._err(t,ce.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(C.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,ce.endTagWithoutMatchingOpenElement)}function og(e,t){e.openElements.pop(),e.insertionMode=W.AFTER_HEAD,e._processToken(t)}function Sst(e,t){switch(t.tagID){case C.HTML:{fi(e,t);break}case C.BASEFONT:case C.BGSOUND:case C.HEAD:case C.LINK:case C.META:case C.NOFRAMES:case C.STYLE:{Fa(e,t);break}case C.NOSCRIPT:{e._err(t,ce.nestedNoscriptInHead);break}default:lg(e,t)}}function Nst(e,t){switch(t.tagID){case C.NOSCRIPT:{e.openElements.pop(),e.insertionMode=W.IN_HEAD;break}case C.BR:{lg(e,t);break}default:e._err(t,ce.endTagWithoutMatchingOpenElement)}}function lg(e,t){const n=t.type===ut.EOF?ce.openElementsLeftAfterEof:ce.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=W.IN_HEAD,e._processToken(t)}function _st(e,t){switch(t.tagID){case C.HTML:{fi(e,t);break}case C.BODY:{e._insertElement(t,we.HTML),e.framesetOk=!1,e.insertionMode=W.IN_BODY;break}case C.FRAMESET:{e._insertElement(t,we.HTML),e.insertionMode=W.IN_FRAMESET;break}case C.BASE:case C.BASEFONT:case C.BGSOUND:case C.LINK:case C.META:case C.NOFRAMES:case C.SCRIPT:case C.STYLE:case C.TEMPLATE:case C.TITLE:{e._err(t,ce.abandonedHeadElementChild),e.openElements.push(e.headElement,C.HEAD),Fa(e,t),e.openElements.remove(e.headElement);break}case C.HEAD:{e._err(t,ce.misplacedStartTagForHeadElement);break}default:cg(e,t)}}function kst(e,t){switch(t.tagID){case C.BODY:case C.HTML:case C.BR:{cg(e,t);break}case C.TEMPLATE:{qd(e,t);break}default:e._err(t,ce.endTagWithoutMatchingOpenElement)}}function cg(e,t){e._insertFakeElement(ne.BODY,C.BODY),e.insertionMode=W.IN_BODY,fN(e,t)}function fN(e,t){switch(t.type){case ut.CHARACTER:{Sae(e,t);break}case ut.WHITESPACE_CHARACTER:{Eae(e,t);break}case ut.COMMENT:{sj(e,t);break}case ut.START_TAG:{fi(e,t);break}case ut.END_TAG:{hN(e,t);break}case ut.EOF:{Cae(e,t);break}}}function Eae(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Sae(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Cst(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Tst(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Ast(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,we.HTML),e.insertionMode=W.IN_FRAMESET)}function jst(e,t){e.openElements.hasInButtonScope(C.P)&&e._closePElement(),e._insertElement(t,we.HTML)}function Ost(e,t){e.openElements.hasInButtonScope(C.P)&&e._closePElement(),e.openElements.currentTagId!==void 0&&ij.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,we.HTML)}function Pst(e,t){e.openElements.hasInButtonScope(C.P)&&e._closePElement(),e._insertElement(t,we.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Ist(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(C.P)&&e._closePElement(),e._insertElement(t,we.HTML),n||(e.formElement=e.openElements.current))}function Dst(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===C.LI&&i===C.LI||(n===C.DD||n===C.DT)&&(i===C.DD||i===C.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==C.ADDRESS&&i!==C.DIV&&i!==C.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(C.P)&&e._closePElement(),e._insertElement(t,we.HTML)}function Mst(e,t){e.openElements.hasInButtonScope(C.P)&&e._closePElement(),e._insertElement(t,we.HTML),e.tokenizer.state=zn.PLAINTEXT}function Rst(e,t){e.openElements.hasInScope(C.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(C.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,we.HTML),e.framesetOk=!1}function Lst(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(ne.A);n&&(j3(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,we.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Fst(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,we.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Bst(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(C.NOBR)&&(j3(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,we.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function $st(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,we.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Ust(e,t){e.treeAdapter.getDocumentMode(e.document)!==Bs.QUIRKS&&e.openElements.hasInButtonScope(C.P)&&e._closePElement(),e._insertElement(t,we.HTML),e.framesetOk=!1,e.insertionMode=W.IN_TABLE}function Nae(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,we.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function _ae(e){const t=hae(e,cd.TYPE);return t!=null&&t.toLowerCase()===sst}function zst(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,we.HTML),_ae(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Hst(e,t){e._appendElement(t,we.HTML),t.ackSelfClosing=!0}function Vst(e,t){e.openElements.hasInButtonScope(C.P)&&e._closePElement(),e._appendElement(t,we.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Wst(e,t){t.tagName=ne.IMG,t.tagID=C.IMG,Nae(e,t)}function qst(e,t){e._insertElement(t,we.HTML),e.skipNextNewLine=!0,e.tokenizer.state=zn.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=W.TEXT}function Kst(e,t){e.openElements.hasInButtonScope(C.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,zn.RAWTEXT)}function Gst(e,t){e.framesetOk=!1,e._switchToTextParsing(t,zn.RAWTEXT)}function V7(e,t){e._switchToTextParsing(t,zn.RAWTEXT)}function Yst(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,we.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===W.IN_TABLE||e.insertionMode===W.IN_CAPTION||e.insertionMode===W.IN_TABLE_BODY||e.insertionMode===W.IN_ROW||e.insertionMode===W.IN_CELL?W.IN_SELECT_IN_TABLE:W.IN_SELECT}function Xst(e,t){e.openElements.currentTagId===C.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,we.HTML)}function Qst(e,t){e.openElements.hasInScope(C.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,we.HTML)}function Jst(e,t){e.openElements.hasInScope(C.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(C.RTC),e._insertElement(t,we.HTML)}function Zst(e,t){e._reconstructActiveFormattingElements(),xae(t),A3(t),t.selfClosing?e._appendElement(t,we.MATHML):e._insertElement(t,we.MATHML),t.ackSelfClosing=!0}function eat(e,t){e._reconstructActiveFormattingElements(),bae(t),A3(t),t.selfClosing?e._appendElement(t,we.SVG):e._insertElement(t,we.SVG),t.ackSelfClosing=!0}function W7(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,we.HTML)}function fi(e,t){switch(t.tagID){case C.I:case C.S:case C.B:case C.U:case C.EM:case C.TT:case C.BIG:case C.CODE:case C.FONT:case C.SMALL:case C.STRIKE:case C.STRONG:{Fst(e,t);break}case C.A:{Lst(e,t);break}case C.H1:case C.H2:case C.H3:case C.H4:case C.H5:case C.H6:{Ost(e,t);break}case C.P:case C.DL:case C.OL:case C.UL:case C.DIV:case C.DIR:case C.NAV:case C.MAIN:case C.MENU:case C.ASIDE:case C.CENTER:case C.FIGURE:case C.FOOTER:case C.HEADER:case C.HGROUP:case C.DIALOG:case C.DETAILS:case C.ADDRESS:case C.ARTICLE:case C.SEARCH:case C.SECTION:case C.SUMMARY:case C.FIELDSET:case C.BLOCKQUOTE:case C.FIGCAPTION:{jst(e,t);break}case C.LI:case C.DD:case C.DT:{Dst(e,t);break}case C.BR:case C.IMG:case C.WBR:case C.AREA:case C.EMBED:case C.KEYGEN:{Nae(e,t);break}case C.HR:{Vst(e,t);break}case C.RB:case C.RTC:{Qst(e,t);break}case C.RT:case C.RP:{Jst(e,t);break}case C.PRE:case C.LISTING:{Pst(e,t);break}case C.XMP:{Kst(e,t);break}case C.SVG:{eat(e,t);break}case C.HTML:{Cst(e,t);break}case C.BASE:case C.LINK:case C.META:case C.STYLE:case C.TITLE:case C.SCRIPT:case C.BGSOUND:case C.BASEFONT:case C.TEMPLATE:{Fa(e,t);break}case C.BODY:{Tst(e,t);break}case C.FORM:{Ist(e,t);break}case C.NOBR:{Bst(e,t);break}case C.MATH:{Zst(e,t);break}case C.TABLE:{Ust(e,t);break}case C.INPUT:{zst(e,t);break}case C.PARAM:case C.TRACK:case C.SOURCE:{Hst(e,t);break}case C.IMAGE:{Wst(e,t);break}case C.BUTTON:{Rst(e,t);break}case C.APPLET:case C.OBJECT:case C.MARQUEE:{$st(e,t);break}case C.IFRAME:{Gst(e,t);break}case C.SELECT:{Yst(e,t);break}case C.OPTION:case C.OPTGROUP:{Xst(e,t);break}case C.NOEMBED:case C.NOFRAMES:{V7(e,t);break}case C.FRAMESET:{Ast(e,t);break}case C.TEXTAREA:{qst(e,t);break}case C.NOSCRIPT:{e.options.scriptingEnabled?V7(e,t):W7(e,t);break}case C.PLAINTEXT:{Mst(e,t);break}case C.COL:case C.TH:case C.TD:case C.TR:case C.HEAD:case C.FRAME:case C.TBODY:case C.TFOOT:case C.THEAD:case C.CAPTION:case C.COLGROUP:break;default:W7(e,t)}}function tat(e,t){if(e.openElements.hasInScope(C.BODY)&&(e.insertionMode=W.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function nat(e,t){e.openElements.hasInScope(C.BODY)&&(e.insertionMode=W.AFTER_BODY,Mae(e,t))}function rat(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function iat(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(C.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(C.FORM):n&&e.openElements.remove(n))}function sat(e){e.openElements.hasInButtonScope(C.P)||e._insertFakeElement(ne.P,C.P),e._closePElement()}function aat(e){e.openElements.hasInListItemScope(C.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(C.LI),e.openElements.popUntilTagNamePopped(C.LI))}function oat(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function lat(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function cat(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function uat(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(ne.BR,C.BR),e.openElements.pop(),e.framesetOk=!1}function kae(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],a=e.openElements.tagIDs[i];if(r===a&&(r!==C.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,a))break}}function hN(e,t){switch(t.tagID){case C.A:case C.B:case C.I:case C.S:case C.U:case C.EM:case C.TT:case C.BIG:case C.CODE:case C.FONT:case C.NOBR:case C.SMALL:case C.STRIKE:case C.STRONG:{j3(e,t);break}case C.P:{sat(e);break}case C.DL:case C.UL:case C.OL:case C.DIR:case C.DIV:case C.NAV:case C.PRE:case C.MAIN:case C.MENU:case C.ASIDE:case C.BUTTON:case C.CENTER:case C.FIGURE:case C.FOOTER:case C.HEADER:case C.HGROUP:case C.DIALOG:case C.ADDRESS:case C.ARTICLE:case C.DETAILS:case C.SEARCH:case C.SECTION:case C.SUMMARY:case C.LISTING:case C.FIELDSET:case C.BLOCKQUOTE:case C.FIGCAPTION:{rat(e,t);break}case C.LI:{aat(e);break}case C.DD:case C.DT:{oat(e,t);break}case C.H1:case C.H2:case C.H3:case C.H4:case C.H5:case C.H6:{lat(e);break}case C.BR:{uat(e);break}case C.BODY:{tat(e,t);break}case C.HTML:{nat(e,t);break}case C.FORM:{iat(e);break}case C.APPLET:case C.OBJECT:case C.MARQUEE:{cat(e,t);break}case C.TEMPLATE:{qd(e,t);break}default:kae(e,t)}}function Cae(e,t){e.tmplInsertionModeStack.length>0?Dae(e,t):O3(e,t)}function dat(e,t){var n;t.tagID===C.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function fat(e,t){e._err(t,ce.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function c2(e,t){if(e.openElements.currentTagId!==void 0&&wae.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=W.IN_TABLE_TEXT,t.type){case ut.CHARACTER:{Aae(e,t);break}case ut.WHITESPACE_CHARACTER:{Tae(e,t);break}}else Iv(e,t)}function hat(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,we.HTML),e.insertionMode=W.IN_CAPTION}function pat(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,we.HTML),e.insertionMode=W.IN_COLUMN_GROUP}function mat(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(ne.COLGROUP,C.COLGROUP),e.insertionMode=W.IN_COLUMN_GROUP,P3(e,t)}function gat(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,we.HTML),e.insertionMode=W.IN_TABLE_BODY}function vat(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(ne.TBODY,C.TBODY),e.insertionMode=W.IN_TABLE_BODY,pN(e,t)}function yat(e,t){e.openElements.hasInTableScope(C.TABLE)&&(e.openElements.popUntilTagNamePopped(C.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function xat(e,t){_ae(t)?e._appendElement(t,we.HTML):Iv(e,t),t.ackSelfClosing=!0}function bat(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,we.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function Hh(e,t){switch(t.tagID){case C.TD:case C.TH:case C.TR:{vat(e,t);break}case C.STYLE:case C.SCRIPT:case C.TEMPLATE:{Fa(e,t);break}case C.COL:{mat(e,t);break}case C.FORM:{bat(e,t);break}case C.TABLE:{yat(e,t);break}case C.TBODY:case C.TFOOT:case C.THEAD:{gat(e,t);break}case C.INPUT:{xat(e,t);break}case C.CAPTION:{hat(e,t);break}case C.COLGROUP:{pat(e,t);break}default:Iv(e,t)}}function N0(e,t){switch(t.tagID){case C.TABLE:{e.openElements.hasInTableScope(C.TABLE)&&(e.openElements.popUntilTagNamePopped(C.TABLE),e._resetInsertionMode());break}case C.TEMPLATE:{qd(e,t);break}case C.BODY:case C.CAPTION:case C.COL:case C.COLGROUP:case C.HTML:case C.TBODY:case C.TD:case C.TFOOT:case C.TH:case C.THEAD:case C.TR:break;default:Iv(e,t)}}function Iv(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,fN(e,t),e.fosterParentingEnabled=n}function Tae(e,t){e.pendingCharacterTokens.push(t)}function Aae(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function am(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)Iv(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const jae=new Set([C.CAPTION,C.COL,C.COLGROUP,C.TBODY,C.TD,C.TFOOT,C.TH,C.THEAD,C.TR]);function wat(e,t){const n=t.tagID;jae.has(n)?e.openElements.hasInTableScope(C.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(C.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=W.IN_TABLE,Hh(e,t)):fi(e,t)}function Eat(e,t){const n=t.tagID;switch(n){case C.CAPTION:case C.TABLE:{e.openElements.hasInTableScope(C.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(C.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=W.IN_TABLE,n===C.TABLE&&N0(e,t));break}case C.BODY:case C.COL:case C.COLGROUP:case C.HTML:case C.TBODY:case C.TD:case C.TFOOT:case C.TH:case C.THEAD:case C.TR:break;default:hN(e,t)}}function P3(e,t){switch(t.tagID){case C.HTML:{fi(e,t);break}case C.COL:{e._appendElement(t,we.HTML),t.ackSelfClosing=!0;break}case C.TEMPLATE:{Fa(e,t);break}default:_w(e,t)}}function Sat(e,t){switch(t.tagID){case C.COLGROUP:{e.openElements.currentTagId===C.COLGROUP&&(e.openElements.pop(),e.insertionMode=W.IN_TABLE);break}case C.TEMPLATE:{qd(e,t);break}case C.COL:break;default:_w(e,t)}}function _w(e,t){e.openElements.currentTagId===C.COLGROUP&&(e.openElements.pop(),e.insertionMode=W.IN_TABLE,e._processToken(t))}function pN(e,t){switch(t.tagID){case C.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,we.HTML),e.insertionMode=W.IN_ROW;break}case C.TH:case C.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(ne.TR,C.TR),e.insertionMode=W.IN_ROW,mN(e,t);break}case C.CAPTION:case C.COL:case C.COLGROUP:case C.TBODY:case C.TFOOT:case C.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=W.IN_TABLE,Hh(e,t));break}default:Hh(e,t)}}function aj(e,t){const n=t.tagID;switch(t.tagID){case C.TBODY:case C.TFOOT:case C.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=W.IN_TABLE);break}case C.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=W.IN_TABLE,N0(e,t));break}case C.BODY:case C.CAPTION:case C.COL:case C.COLGROUP:case C.HTML:case C.TD:case C.TH:case C.TR:break;default:N0(e,t)}}function mN(e,t){switch(t.tagID){case C.TH:case C.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,we.HTML),e.insertionMode=W.IN_CELL,e.activeFormattingElements.insertMarker();break}case C.CAPTION:case C.COL:case C.COLGROUP:case C.TBODY:case C.TFOOT:case C.THEAD:case C.TR:{e.openElements.hasInTableScope(C.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=W.IN_TABLE_BODY,pN(e,t));break}default:Hh(e,t)}}function Oae(e,t){switch(t.tagID){case C.TR:{e.openElements.hasInTableScope(C.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=W.IN_TABLE_BODY);break}case C.TABLE:{e.openElements.hasInTableScope(C.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=W.IN_TABLE_BODY,aj(e,t));break}case C.TBODY:case C.TFOOT:case C.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(C.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=W.IN_TABLE_BODY,aj(e,t));break}case C.BODY:case C.CAPTION:case C.COL:case C.COLGROUP:case C.HTML:case C.TD:case C.TH:break;default:N0(e,t)}}function Nat(e,t){const n=t.tagID;jae.has(n)?(e.openElements.hasInTableScope(C.TD)||e.openElements.hasInTableScope(C.TH))&&(e._closeTableCell(),mN(e,t)):fi(e,t)}function _at(e,t){const n=t.tagID;switch(n){case C.TD:case C.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=W.IN_ROW);break}case C.TABLE:case C.TBODY:case C.TFOOT:case C.THEAD:case C.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),Oae(e,t));break}case C.BODY:case C.CAPTION:case C.COL:case C.COLGROUP:case C.HTML:break;default:hN(e,t)}}function Pae(e,t){switch(t.tagID){case C.HTML:{fi(e,t);break}case C.OPTION:{e.openElements.currentTagId===C.OPTION&&e.openElements.pop(),e._insertElement(t,we.HTML);break}case C.OPTGROUP:{e.openElements.currentTagId===C.OPTION&&e.openElements.pop(),e.openElements.currentTagId===C.OPTGROUP&&e.openElements.pop(),e._insertElement(t,we.HTML);break}case C.HR:{e.openElements.currentTagId===C.OPTION&&e.openElements.pop(),e.openElements.currentTagId===C.OPTGROUP&&e.openElements.pop(),e._appendElement(t,we.HTML),t.ackSelfClosing=!0;break}case C.INPUT:case C.KEYGEN:case C.TEXTAREA:case C.SELECT:{e.openElements.hasInSelectScope(C.SELECT)&&(e.openElements.popUntilTagNamePopped(C.SELECT),e._resetInsertionMode(),t.tagID!==C.SELECT&&e._processStartTag(t));break}case C.SCRIPT:case C.TEMPLATE:{Fa(e,t);break}}}function Iae(e,t){switch(t.tagID){case C.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===C.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===C.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===C.OPTGROUP&&e.openElements.pop();break}case C.OPTION:{e.openElements.currentTagId===C.OPTION&&e.openElements.pop();break}case C.SELECT:{e.openElements.hasInSelectScope(C.SELECT)&&(e.openElements.popUntilTagNamePopped(C.SELECT),e._resetInsertionMode());break}case C.TEMPLATE:{qd(e,t);break}}}function kat(e,t){const n=t.tagID;n===C.CAPTION||n===C.TABLE||n===C.TBODY||n===C.TFOOT||n===C.THEAD||n===C.TR||n===C.TD||n===C.TH?(e.openElements.popUntilTagNamePopped(C.SELECT),e._resetInsertionMode(),e._processStartTag(t)):Pae(e,t)}function Cat(e,t){const n=t.tagID;n===C.CAPTION||n===C.TABLE||n===C.TBODY||n===C.TFOOT||n===C.THEAD||n===C.TR||n===C.TD||n===C.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(C.SELECT),e._resetInsertionMode(),e.onEndTag(t)):Iae(e,t)}function Tat(e,t){switch(t.tagID){case C.BASE:case C.BASEFONT:case C.BGSOUND:case C.LINK:case C.META:case C.NOFRAMES:case C.SCRIPT:case C.STYLE:case C.TEMPLATE:case C.TITLE:{Fa(e,t);break}case C.CAPTION:case C.COLGROUP:case C.TBODY:case C.TFOOT:case C.THEAD:{e.tmplInsertionModeStack[0]=W.IN_TABLE,e.insertionMode=W.IN_TABLE,Hh(e,t);break}case C.COL:{e.tmplInsertionModeStack[0]=W.IN_COLUMN_GROUP,e.insertionMode=W.IN_COLUMN_GROUP,P3(e,t);break}case C.TR:{e.tmplInsertionModeStack[0]=W.IN_TABLE_BODY,e.insertionMode=W.IN_TABLE_BODY,pN(e,t);break}case C.TD:case C.TH:{e.tmplInsertionModeStack[0]=W.IN_ROW,e.insertionMode=W.IN_ROW,mN(e,t);break}default:e.tmplInsertionModeStack[0]=W.IN_BODY,e.insertionMode=W.IN_BODY,fi(e,t)}}function Aat(e,t){t.tagID===C.TEMPLATE&&qd(e,t)}function Dae(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(C.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):O3(e,t)}function jat(e,t){t.tagID===C.HTML?fi(e,t):kw(e,t)}function Mae(e,t){var n;if(t.tagID===C.HTML){if(e.fragmentContext||(e.insertionMode=W.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===C.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else kw(e,t)}function kw(e,t){e.insertionMode=W.IN_BODY,fN(e,t)}function Oat(e,t){switch(t.tagID){case C.HTML:{fi(e,t);break}case C.FRAMESET:{e._insertElement(t,we.HTML);break}case C.FRAME:{e._appendElement(t,we.HTML),t.ackSelfClosing=!0;break}case C.NOFRAMES:{Fa(e,t);break}}}function Pat(e,t){t.tagID===C.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==C.FRAMESET&&(e.insertionMode=W.AFTER_FRAMESET))}function Iat(e,t){switch(t.tagID){case C.HTML:{fi(e,t);break}case C.NOFRAMES:{Fa(e,t);break}}}function Dat(e,t){t.tagID===C.HTML&&(e.insertionMode=W.AFTER_AFTER_FRAMESET)}function Mat(e,t){t.tagID===C.HTML?fi(e,t):$x(e,t)}function $x(e,t){e.insertionMode=W.IN_BODY,fN(e,t)}function Rat(e,t){switch(t.tagID){case C.HTML:{fi(e,t);break}case C.NOFRAMES:{Fa(e,t);break}}}function Lat(e,t){t.chars=mn,e._insertCharacters(t)}function Fat(e,t){e._insertCharacters(t),e.framesetOk=!1}function Rae(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==we.HTML&&e.openElements.currentTagId!==void 0&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Bat(e,t){if(est(t))Rae(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===we.MATHML?xae(t):r===we.SVG&&(tst(t),bae(t)),A3(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function $at(e,t){if(t.tagID===C.P||t.tagID===C.BR){Rae(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===we.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}ne.AREA,ne.BASE,ne.BASEFONT,ne.BGSOUND,ne.BR,ne.COL,ne.EMBED,ne.FRAME,ne.HR,ne.IMG,ne.INPUT,ne.KEYGEN,ne.LINK,ne.META,ne.PARAM,ne.SOURCE,ne.TRACK,ne.WBR;const Uat=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,zat=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),q7={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function Lae(e,t){const n=Jat(e),r=Cse("type",{handlers:{root:Hat,element:Vat,text:Wat,comment:Bae,doctype:qat,raw:Gat},unknown:Yat}),i={parser:n?new H7(q7):H7.getFragmentParser(void 0,q7),handle(o){r(o,i)},stitches:!1,options:t||{}};r(e,i),Tp(i,So());const s=n?i.parser.document:i.parser.getFragment(),a=Hrt(s,{file:i.options.file});return i.stitches&&jv(a,"comment",function(o,c,u){const d=o;if(d.value.stitch&&u&&c!==void 0){const f=u.children;return f[c]=d.value.stitch,c}}),a.type==="root"&&a.children.length===1&&a.children[0].type===e.type?a.children[0]:a}function Fae(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function Hat(e,t){Fae(e.children,t)}function Vat(e,t){Xat(e,t),Fae(e.children,t),Qat(e,t)}function Wat(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const n={type:ut.CHARACTER,chars:e.value,location:Dv(e)};Tp(t,So(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function qat(e,t){const n={type:ut.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:Dv(e)};Tp(t,So(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Kat(e,t){t.stitches=!0;const n=Zat(e);if("children"in e&&"children"in n){const r=Lae({type:"root",children:e.children},t.options);n.children=r.children}Bae({type:"comment",value:{stitch:n}},t)}function Bae(e,t){const n=e.value,r={type:ut.COMMENT,data:n,location:Dv(e)};Tp(t,So(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function Gat(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,$ae(t,So(e)),t.parser.tokenizer.write(t.options.tagfilter?e.value.replace(Uat,"&lt;$1$2"):e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function Yat(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))Kat(n,t);else{let r="";throw zat.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function Tp(e,t){$ae(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=zn.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function $ae(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function Xat(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===zn.PLAINTEXT)return;Tp(t,So(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:Ku.html;i===Ku.html&&n==="svg"&&(i=Ku.svg);const s=iit({...e,children:[]},{space:i===Ku.svg?"svg":"html"}),a={type:ut.START_TAG,tagName:n,tagID:Cp(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:Dv(e)};t.parser.currentToken=a,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function Qat(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&fit.includes(n)||t.parser.tokenizer.state===zn.PLAINTEXT)return;Tp(t,oN(e));const r={type:ut.END_TAG,tagName:n,tagID:Cp(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:Dv(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===zn.RCDATA||t.parser.tokenizer.state===zn.RAWTEXT||t.parser.tokenizer.state===zn.SCRIPT_DATA)&&(t.parser.tokenizer.state=zn.DATA)}function Jat(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function Dv(e){const t=So(e)||{line:void 0,column:void 0,offset:void 0},n=oN(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function Zat(e){return"children"in e?zh({...e,children:[]}):zh(e)}function eot(e){return function(t,n){return Lae(t,{...e,file:n})}}function K7({content:e,className:t,variant:n="default"}){return l.jsx("div",{className:Re("markdown-content prose prose-lg max-w-none","prose-headings:font-bold prose-headings:tracking-tight","prose-p:text-gray-700 dark:prose-p:text-gray-300","prose-strong:text-gray-900 dark:prose-strong:text-gray-100",n==="compact"&&"prose-compact",t),children:l.jsx(rtt,{remarkPlugins:[grt],rehypePlugins:[Ort,eot],components:{h1:({children:r,...i})=>l.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-4 mt-12 first:mt-0 pb-2 border-b-2 border-gray-200 dark:border-gray-700",...i,children:r}),h2:({children:r,...i})=>l.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-3 mt-10 pb-1 border-b border-gray-200 dark:border-gray-700",...i,children:r}),h3:({children:r,...i})=>l.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-3 mt-8",...i,children:r}),h4:({children:r,...i})=>l.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2 mt-6",...i,children:r}),h5:({children:r,...i})=>l.jsx("h5",{className:"text-base font-semibold text-gray-900 dark:text-gray-100 mb-2 mt-5",...i,children:r}),h6:({children:r,...i})=>l.jsx("h6",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2 mt-4 uppercase tracking-wider",...i,children:r}),p:({children:r,...i})=>l.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-5 mt-1 leading-normal text-base",...i,children:r}),ul:({children:r,...i})=>l.jsx("ul",{className:"mb-5 space-y-1 pl-0 list-none",...i,children:r}),ol:({children:r,...i})=>l.jsx("ol",{className:"mb-5 space-y-1 pl-0 list-none markdown-ordered-list",...i,children:r}),li:({children:r,...i})=>l.jsxs("li",{className:"text-gray-700 dark:text-gray-300 leading-snug pl-8 relative markdown-list-item",...i,children:[l.jsx("span",{className:"absolute left-2 top-1 w-3 h-3 bg-blue-500 rounded-full flex-shrink-0 markdown-bullet"}),l.jsx("div",{className:"min-h-[1.2rem]",children:r})]}),blockquote:({children:r,...i})=>l.jsx("blockquote",{className:"border-l-4 border-blue-500 pl-6 py-4 my-8 bg-gradient-to-r from-blue-50 to-transparent dark:from-blue-900/20 dark:to-transparent italic rounded-r-lg",...i,children:l.jsx("div",{className:"text-gray-700 dark:text-gray-300",children:r})}),code:({children:r,className:i,...s})=>i!=null&&i.includes("language-")?l.jsx("code",{className:"block bg-gray-50 dark:bg-gray-900 p-4 rounded-lg text-sm font-mono overflow-x-auto border",...s,children:r}):l.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded-md text-sm font-mono text-pink-600 dark:text-pink-400 border",...s,children:r}),pre:({children:r,...i})=>l.jsx("pre",{className:"bg-gray-50 dark:bg-gray-900 p-6 rounded-lg overflow-x-auto mb-8 border shadow-sm",...i,children:r}),a:({children:r,href:i,...s})=>l.jsx("a",{href:i,className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline decoration-2 underline-offset-2 hover:decoration-blue-800 dark:hover:decoration-blue-300 transition-colors",target:"_blank",rel:"noopener noreferrer",...s,children:r}),img:({src:r,alt:i,...s})=>l.jsxs("div",{className:"my-8",children:[l.jsx("img",{src:r,alt:i,className:"max-w-full h-auto rounded-lg shadow-lg border",...s}),i&&l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 text-center italic",children:i})]}),table:({children:r,...i})=>l.jsx("div",{className:"overflow-x-auto my-8 rounded-lg border shadow-sm",children:l.jsx("table",{className:"min-w-full border-collapse bg-white dark:bg-gray-800",...i,children:r})}),thead:({children:r,...i})=>l.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",...i,children:r}),th:({children:r,...i})=>l.jsx("th",{className:"border-b border-gray-300 dark:border-gray-600 px-6 py-3 text-left font-semibold text-gray-900 dark:text-gray-100 text-sm uppercase tracking-wider",...i,children:r}),td:({children:r,...i})=>l.jsx("td",{className:"border-b border-gray-200 dark:border-gray-700 px-6 py-4 text-gray-700 dark:text-gray-300",...i,children:r}),hr:({...r})=>l.jsxs("div",{className:"my-12 flex items-center justify-center",children:[l.jsx("hr",{className:"flex-1 border-gray-300 dark:border-gray-600",...r}),l.jsx("div",{className:"mx-4 w-2 h-2 bg-gray-300 dark:bg-gray-600 rounded-full"}),l.jsx("hr",{className:"flex-1 border-gray-300 dark:border-gray-600"})]}),strong:({children:r,...i})=>l.jsx("strong",{className:"font-bold text-gray-900 dark:text-gray-100",...i,children:r}),em:({children:r,...i})=>l.jsx("em",{className:"italic text-gray-800 dark:text-gray-200",...i,children:r})},children:e})})}function tot({documents:e,loading:t=!1,onDocumentClick:n,onEditDocument:r,onDeleteDocument:i,onDuplicateDocument:s,onCreateNew:a,showClientFilter:o=!0,selectedClientId:c,onClientFilterChange:u,className:d}){const[f,h]=w.useState(""),[p,m]=w.useState("all"),[g,v]=w.useState("all"),[y,x]=w.useState("updated_at"),[b,S]=w.useState("desc"),[E,N]=w.useState(!1),[_,k]=w.useState(!1),[T,A]=w.useState(null),j=F=>{A(F),k(!0)},D=async()=>{if(!(!T||!i))try{await i(T.id),k(!1),A(null),console.log("Document deleted successfully")}catch(F){console.error("Failed to delete document:",F),alert(`Failed to delete document: ${F instanceof Error?F.message:"Unknown error"}`)}},I=()=>{k(!1),A(null)},M=Array.from(new Map(e.filter(F=>F.client_name).map(F=>[F.client_id,{id:F.client_id,name:F.client_name,company:F.client_company}])).values()),L=e.filter(F=>{const O=!f||F.title.toLowerCase().includes(f.toLowerCase())||F.tags.some(ye=>ye.toLowerCase().includes(f.toLowerCase())),Q=p==="all"||F.document_type===p,Y=g==="all"||F.status===g,$=!c||F.client_id===c;return O&&Q&&Y&&$}).sort((F,O)=>{let Q=F[y],Y=O[y];(y==="updated_at"||y==="created_at")&&(Q=new Date(Q).getTime(),Y=new Date(Y).getTime()),typeof Q=="string"&&typeof Y=="string"&&(Q=Q.toLowerCase(),Y=Y.toLowerCase());const $=Q<Y?-1:Q>Y?1:0;return b==="asc"?$:-$}),P=F=>{y===F?S(b==="asc"?"desc":"asc"):(x(F),S("desc"))},B=F=>{switch(F){case"contract":return"";case"specification":return"";case"note":return"";default:return""}},R=F=>{switch(F){case"published":return"bg-green-100 text-green-700 border-green-200";case"draft":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"archived":return"bg-gray-100 text-gray-700 border-gray-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}};return t?l.jsxs(Z,{className:d,children:[l.jsx(de,{children:l.jsx(he,{children:"Loading documents..."})}),l.jsx(ee,{children:l.jsx("div",{className:"space-y-4",children:[1,2,3].map(F=>l.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),l.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"})]}),l.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4 mb-2"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-12"}),l.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"})]})]},F))})})]}):l.jsxs(Z,{className:d,children:[l.jsxs(de,{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(he,{className:"flex items-center gap-2",children:[l.jsx(en,{className:"h-5 w-5"}),"Documents (",L.length,")"]}),a&&l.jsxs(H,{onClick:a,size:"sm",children:[l.jsx(Xe,{className:"h-4 w-4 mr-1"}),"New Document"]})]}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(Jh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),l.jsx(re,{placeholder:"Search documents and tags...",value:f,onChange:F=>h(F.target.value),className:"pl-10"})]}),l.jsx(H,{variant:"outline",size:"sm",onClick:()=>N(!E),className:E?"bg-gray-100":"",children:l.jsx(gO,{className:"h-4 w-4"})})]}),E&&l.jsxs("div",{className:"flex flex-wrap gap-2",children:[o&&M.length>1&&l.jsxs("select",{value:c||"all",onChange:F=>u==null?void 0:u(F.target.value==="all"?"":F.target.value),className:"px-3 py-1 border rounded text-sm","aria-label":"Filter by client",children:[l.jsx("option",{value:"all",children:"All Clients"}),M.map(F=>l.jsxs("option",{value:F.id,children:[F.name," ",F.company&&`(${F.company})`]},F.id))]}),l.jsxs("select",{value:p,onChange:F=>m(F.target.value),className:"px-3 py-1 border rounded text-sm","aria-label":"Filter by document type",children:[l.jsx("option",{value:"all",children:"All Types"}),l.jsx("option",{value:"page",children:"Pages"}),l.jsx("option",{value:"note",children:"Notes"}),l.jsx("option",{value:"contract",children:"Contracts"}),l.jsx("option",{value:"specification",children:"Specifications"})]}),l.jsxs("select",{value:g,onChange:F=>v(F.target.value),className:"px-3 py-1 border rounded text-sm","aria-label":"Filter by document status",children:[l.jsx("option",{value:"all",children:"All Status"}),l.jsx("option",{value:"draft",children:"Draft"}),l.jsx("option",{value:"published",children:"Published"}),l.jsx("option",{value:"archived",children:"Archived"})]}),l.jsxs(H,{variant:"outline",size:"sm",onClick:()=>P("updated_at"),className:"text-xs",children:[l.jsx(Lt,{className:"h-3 w-3 mr-1"}),"Updated",y==="updated_at"&&(b==="asc"?l.jsx(N4,{className:"h-3 w-3 ml-1"}):l.jsx(E4,{className:"h-3 w-3 ml-1"}))]}),l.jsxs(H,{variant:"outline",size:"sm",onClick:()=>P("title"),className:"text-xs",children:["Title",y==="title"&&(b==="asc"?l.jsx(N4,{className:"h-3 w-3 ml-1"}):l.jsx(E4,{className:"h-3 w-3 ml-1"}))]})]})]})]}),l.jsx(ee,{children:L.length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(en,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),l.jsx("h3",{className:"text-lg font-medium mb-2",children:"No documents found"}),l.jsx("p",{className:"text-sm mb-4",children:f||p!=="all"||g!=="all"||c?"Try adjusting your search or filter criteria.":"Get started by creating your first document."}),a&&!f&&l.jsxs(H,{onClick:a,variant:"outline",children:[l.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Create First Document"]})]}):l.jsx("div",{className:"space-y-3",children:L.map(F=>l.jsxs("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>n==null?void 0:n(F),children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("h3",{className:"font-medium text-gray-900 truncate flex items-center gap-2",children:[l.jsx("span",{className:"text-lg",children:B(F.document_type)}),F.title,F.is_sensitive&&l.jsx(ro,{className:"h-4 w-4 text-red-500"})]}),l.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500 mt-1",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Ei,{className:"h-3 w-3"}),F.client_name,F.client_company&&` (${F.client_company})`]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(gt,{className:"h-3 w-3"}),A1(new Date(F.updated_at))," ago"]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Hi,{className:"h-3 w-3"}),F.view_count," views"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx(Ot,{className:Re("text-xs",R(F.status)),children:F.status}),l.jsxs("div",{className:"flex gap-1",children:[r&&l.jsx(H,{variant:"ghost",size:"sm",onClick:O=>{O.stopPropagation(),r(F)},children:l.jsx(uo,{className:"h-3 w-3"})}),s&&l.jsx(H,{variant:"ghost",size:"sm",onClick:O=>{O.stopPropagation(),s(F)},children:l.jsx(tE,{className:"h-3 w-3"})}),i&&l.jsx(H,{variant:"ghost",size:"sm",onClick:O=>{O.stopPropagation(),j(F)},className:"text-red-600 hover:text-red-700",children:l.jsx(lr,{className:"h-3 w-3"})})]})]})]}),F.tags.length>0&&l.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[l.jsx(bC,{className:"h-3 w-3 text-gray-400"}),l.jsxs("div",{className:"flex flex-wrap gap-1",children:[F.tags.slice(0,3).map(O=>l.jsx(Ot,{variant:"secondary",className:"text-xs",children:O},O)),F.tags.length>3&&l.jsxs(Ot,{variant:"secondary",className:"text-xs",children:["+",F.tags.length-3," more"]})]})]}),l.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("span",{children:[F.word_count," words"]}),l.jsxs("span",{children:[F.reading_time_minutes," min read"]}),l.jsxs("span",{children:["Created by ",F.created_by_name||"Unknown"]})]}),l.jsx("span",{className:"capitalize",children:F.document_type})]})]},F.id))})}),l.jsx(pte,{open:_,onOpenChange:k,children:l.jsxs(uM,{children:[l.jsxs(dM,{children:[l.jsx(hM,{children:"Delete Document"}),l.jsxs(pM,{children:['Are you sure you want to delete "',T==null?void 0:T.title,'"? This action cannot be undone.']})]}),l.jsxs(fM,{children:[l.jsx(gM,{onClick:I,children:"Cancel"}),l.jsx(mM,{onClick:D,className:"bg-red-600 hover:bg-red-700 focus:ring-red-600",children:"Delete"})]})]})})]})}const not=_O("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),$c=w.forwardRef(({className:e,variant:t,...n},r)=>l.jsx("div",{ref:r,role:"alert",className:Re(not({variant:t}),e),...n}));$c.displayName="Alert";const Uc=w.forwardRef(({className:e,...t},n)=>l.jsx("div",{ref:n,className:Re("text-sm [&_p]:leading-relaxed",e),...t}));Uc.displayName="AlertDescription";async function rot(e,t){try{const n=crypto.getRandomValues(new Uint8Array(16)),r=crypto.getRandomValues(new Uint8Array(12)),i=new TextEncoder,s=i.encode(t),a=await crypto.subtle.importKey("raw",s,"PBKDF2",!1,["deriveKey"]),o=await crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:1e5,hash:"SHA-256"},a,{name:"AES-GCM",length:256},!1,["encrypt"]),c=i.encode(e),u=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},o,c),d={data:btoa(String.fromCharCode(...new Uint8Array(u))),salt:btoa(String.fromCharCode(...n)),iv:btoa(String.fromCharCode(...r))};return JSON.stringify(d)}catch(n){throw console.error("Encryption failed:",n),new Error("Failed to encrypt sensitive content")}}async function iot(e,t){try{const n=JSON.parse(e),r=Uint8Array.from(atob(n.data),h=>h.charCodeAt(0)),i=Uint8Array.from(atob(n.salt),h=>h.charCodeAt(0)),s=Uint8Array.from(atob(n.iv),h=>h.charCodeAt(0)),o=new TextEncoder().encode(t),c=await crypto.subtle.importKey("raw",o,"PBKDF2",!1,["deriveKey"]),u=await crypto.subtle.deriveKey({name:"PBKDF2",salt:i,iterations:1e5,hash:"SHA-256"},c,{name:"AES-GCM",length:256},!1,["decrypt"]),d=await crypto.subtle.decrypt({name:"AES-GCM",iv:s},u,r);return new TextDecoder().decode(d)}catch(n){throw console.error("Decryption failed:",n),new Error("Failed to decrypt content. Invalid password or corrupted data.")}}function sot(e){const t=[];return e.length<8&&t.push("Password must be at least 8 characters long"),/[A-Z]/.test(e)||t.push("Password must contain at least one uppercase letter"),/[a-z]/.test(e)||t.push("Password must contain at least one lowercase letter"),/[0-9]/.test(e)||t.push("Password must contain at least one number"),{valid:t.length===0,errors:t}}function aot(e=16){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*",n=new Uint8Array(e);return crypto.getRandomValues(n),Array.from(n,r=>t[r%t.length]).join("")}class oot{constructor(){Ns(this,"password",null);Ns(this,"expiryTime",0);Ns(this,"SESSION_DURATION",30*60*1e3)}setPassword(t){this.password=t,this.expiryTime=Date.now()+this.SESSION_DURATION}getPassword(){return this.password&&Date.now()<this.expiryTime?this.password:(this.clearSession(),null)}clearSession(){this.password=null,this.expiryTime=0}extendSession(){this.password&&(this.expiryTime=Date.now()+this.SESSION_DURATION)}isActive(){return this.password!==null&&Date.now()<this.expiryTime}}const om=new oot;function lot({open:e,onOpenChange:t,onPasswordSet:n,mode:r,title:i,description:s}){const[a,o]=w.useState(""),[c,u]=w.useState(""),[d,f]=w.useState(!1),[h,p]=w.useState(null),[m,g]=w.useState(!1),v=r==="setup",y=sot(a),x=async E=>{E.preventDefault(),p(null),g(!0);try{if(v){if(!y.valid){p(y.errors[0]);return}if(a!==c){p("Passwords do not match");return}}if(!a){p("Password is required");return}n(a),o(""),u(""),p(null),t(!1)}catch(N){p(N instanceof Error?N.message:"An error occurred")}finally{g(!1)}},b=()=>{const E=aot(16);o(E),u(E),f(!0)},S=()=>{o(""),u(""),p(null),f(!1)};return l.jsx(xt,{open:e,onOpenChange:E=>{t(E),E||S()},children:l.jsxs(ft,{className:"sm:max-w-md",children:[l.jsxs(ht,{children:[l.jsx(pt,{className:"flex items-center gap-2",children:v?l.jsxs(l.Fragment,{children:[l.jsx(R0,{className:"h-5 w-5 text-blue-600"}),i||"Set Up Document Encryption"]}):l.jsxs(l.Fragment,{children:[l.jsx(ro,{className:"h-5 w-5 text-yellow-600"}),i||"Unlock Sensitive Documents"]})}),l.jsx(iu,{children:s||(v?"Create a master password to encrypt sensitive documents. This password will be required to view or edit sensitive content.":"Enter your master password to access sensitive documents.")})]}),l.jsxs("form",{onSubmit:x,className:"space-y-4",children:[v&&l.jsxs($c,{className:"border-blue-200 bg-blue-50",children:[l.jsx(to,{className:"h-4 w-4 text-blue-600"}),l.jsxs(Uc,{className:"text-blue-700",children:[l.jsx("strong",{children:"Important:"})," Store this password safely. If you lose it, your encrypted documents cannot be recovered."]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:v?"Master Password":"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(re,{type:d?"text":"password",value:a,onChange:E=>o(E.target.value),placeholder:"Enter your encryption password",className:"pr-10",required:!0}),l.jsx("button",{type:"button",onClick:()=>f(!d),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:d?l.jsx(The,{className:"h-4 w-4"}):l.jsx(Hi,{className:"h-4 w-4"})})]}),v&&a&&l.jsxs("div",{className:"mt-2 space-y-1",children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Password strength:"}),l.jsxs("div",{className:"space-y-1",children:[y.errors.map((E,N)=>l.jsxs("div",{className:"text-xs text-red-600 flex items-center gap-1",children:[l.jsx("div",{className:"w-1 h-1 bg-red-600 rounded-full"}),E]},N)),y.valid&&l.jsxs("div",{className:"text-xs text-green-600 flex items-center gap-1",children:[l.jsx("div",{className:"w-1 h-1 bg-green-600 rounded-full"}),"Strong password"]})]})]})]}),v&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Confirm Password"}),l.jsx(re,{type:d?"text":"password",value:c,onChange:E=>u(E.target.value),placeholder:"Confirm your encryption password",required:!0})]}),l.jsxs(H,{type:"button",variant:"outline",onClick:b,className:"w-full",children:[l.jsx(Rhe,{className:"h-4 w-4 mr-2"}),"Generate Secure Password"]})]})]}),h&&l.jsxs($c,{className:"border-red-200 bg-red-50",children:[l.jsx(to,{className:"h-4 w-4 text-red-600"}),l.jsx(Uc,{className:"text-red-700",children:h})]}),l.jsxs("div",{className:"flex gap-2 pt-2",children:[l.jsx(H,{type:"button",variant:"outline",onClick:()=>t(!1),className:"flex-1",children:"Cancel"}),l.jsx(H,{type:"submit",disabled:m||v&&(!y.valid||a!==c),className:"flex-1",children:m?l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):v?"Set Up Encryption":"Unlock"})]})]})]})})}function cot(){const[e,t]=w.useState([]),[n,r]=w.useState(!0),[i,s]=w.useState(null),a=w.useCallback(async()=>{try{r(!0),s(null);const{data:y,error:x}=await ie.from("client_documents").select(`
          *,
          clients(
            name,
            company
          )
        `).order("updated_at",{ascending:!1});if(x)throw x;const b=(y||[]).map(S=>{var E,N;return{...S,client_name:((E=S.clients)==null?void 0:E.name)||"Unknown Client",client_company:(N=S.clients)==null?void 0:N.company,created_by_name:"User"}});t(b)}catch(y){console.error("Error fetching documents:",y),s(y instanceof Error?y.message:"Failed to fetch documents")}finally{r(!1)}},[]);w.useEffect(()=>{a()},[a]);const o=w.useCallback(async y=>{try{const{data:x,error:b}=await ie.from("client_documents").select(`
          *,
          clients(
            name,
            company
          )
        `).eq("client_id",y).order("updated_at",{ascending:!1});if(b)throw b;return(x==null?void 0:x.map(S=>{var E,N;return{...S,client_name:((E=S.clients)==null?void 0:E.name)||"Unknown Client",client_company:(N=S.clients)==null?void 0:N.company,created_by_name:"User"}}))||[]}catch(x){throw console.error("Error fetching client documents:",x),x}},[]),c=async y=>{var x,b;try{const{data:S,error:E}=await ie.from("client_documents").select(`
          *,
          clients(
            name,
            company
          )
        `).eq("id",y).single();if(E)throw E;await ie.from("client_documents").update({view_count:(S.view_count||0)+1,last_viewed_at:new Date().toISOString()}).eq("id",y);const N={...S,client_name:((x=S.clients)==null?void 0:x.name)||"Unknown Client",client_company:(b=S.clients)==null?void 0:b.company,created_by_name:"User"};if(N.is_sensitive&&N.encrypted_content){const _=om.getPassword();if(_)try{const k=await iot(N.encrypted_content,_);return{...N,content:JSON.parse(k),content_html:"[Decrypted Content - Render from JSON]"}}catch(k){console.error("Failed to decrypt document content:",k)}}return N}catch(S){throw console.error("Error fetching document:",S),S}},u=async y=>{try{let x=ie.from("client_documents").select(`
          *,
          clients!inner(
            name,
            company
          )
        `);y.client_id&&(x=x.eq("client_id",y.client_id)),y.document_type&&(x=x.eq("document_type",y.document_type)),y.status&&(x=x.eq("status",y.status)),y.is_sensitive!==void 0&&(x=x.eq("is_sensitive",y.is_sensitive)),y.tags&&y.tags.length>0&&(x=x.overlaps("tags",y.tags)),y.query&&(x=x.or(`title.ilike.%${y.query}%,content_html.ilike.%${y.query}%`)),x=x.order("updated_at",{ascending:!1});const{data:b,error:S}=await x;if(S)throw S;return(b==null?void 0:b.map(E=>{var N,_;return{...E,client_name:(N=E.clients)==null?void 0:N.name,client_company:(_=E.clients)==null?void 0:_.company,created_by_name:"User"}}))||[]}catch(x){throw console.error("Error searching documents:",x),x}},d=async y=>{try{const{data:x}=await ie.auth.getUser();if(!x.user)throw new Error("User not authenticated");const b=y.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");let S={...y,slug:b,created_by:x.user.id,updated_by:x.user.id};if(y.is_sensitive){const _=om.getPassword();if(!_)throw new Error("Encryption password required for sensitive documents");const k=await rot(JSON.stringify(y.content),_);S={...S,encrypted_content:k,content:{},content_html:"[Encrypted Content]",content_markdown:"[Encrypted Content]"}}const{data:E,error:N}=await ie.from("client_documents").insert(S).select().single();if(N)throw N;return await a(),E}catch(x){throw console.error("Error adding document:",x),x}};return{documents:e,loading:n,error:i,fetchDocuments:a,getDocumentsByClient:o,getDocument:c,searchDocuments:u,addDocument:d,updateDocument:async y=>{try{const{data:x}=await ie.auth.getUser();if(!x.user)throw new Error("User not authenticated");const b={...y,updated_by:x.user.id,updated_at:new Date().toISOString()};y.title&&(b.slug=y.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""));const{data:S,error:E}=await ie.from("client_documents").update(b).eq("id",y.id).select().single();if(E)throw E;return await a(),S}catch(x){throw console.error("Error updating document:",x),x}},deleteDocument:async y=>{try{console.log("Starting document deletion:",y);const{data:{user:x}}=await ie.auth.getUser();if(!x)throw new Error("User not authenticated");console.log("User authenticated:",x.id);const{data:b,error:S}=await ie.from("client_documents").select("id, title, created_by").eq("id",y).single();if(S)throw console.error("Error fetching document before delete:",S),new Error(`Cannot find document: ${S.message}`);if(!b)throw new Error("Document not found");console.log("Document found for deletion:",{id:b.id,title:b.title,created_by:b.created_by,current_user:x.id,can_delete:b.created_by===x.id});const{error:E}=await ie.from("client_documents").delete().eq("id",y);if(E)throw console.error("Delete error details:",{message:E.message,details:E.details,hint:E.hint,code:E.code}),new Error(`Delete failed: ${E.message}`);console.log("Document deleted successfully"),await a()}catch(x){throw console.error("Error deleting document:",x),x}},duplicateDocument:async(y,x)=>{try{const b=await c(y);if(!b)throw new Error("Document not found");const{data:S}=await ie.auth.getUser();if(!S.user)throw new Error("User not authenticated");const E={client_id:b.client_id,title:x,content:b.content,content_html:b.content_html,content_markdown:b.content_markdown,is_sensitive:b.is_sensitive,document_type:b.document_type,status:"draft",tags:[...b.tags||[]]};return await d(E)}catch(b){throw console.error("Error duplicating document:",b),b}},isEncryptionActive:()=>om.isActive(),setEncryptionPassword:y=>{om.setPassword(y)},clearEncryptionSession:()=>{om.clearSession()}}}function uot(e){const[t,n]=w.useState([]),[r,i]=w.useState(!1),[s,a]=w.useState(null),o=w.useCallback(async()=>{if(e)try{i(!0),a(null);const{data:u,error:d}=await ie.from("document_versions").select("*").eq("document_id",e).order("version_number",{ascending:!1});if(d)throw d;const f=(u==null?void 0:u.map(h=>({...h,created_by_name:"User"})))||[];n(f)}catch(u){console.error("Error fetching versions:",u),a(u instanceof Error?u.message:"Failed to fetch versions")}finally{i(!1)}},[e]);return w.useEffect(()=>{e&&o()},[e,o]),{versions:t,loading:r,error:s,fetchVersions:o,getVersion:async u=>{try{const{data:d,error:f}=await ie.from("document_versions").select("*").eq("id",u).single();if(f)throw f;return{...d,created_by_name:"User"}}catch(d){throw console.error("Error fetching version:",d),d}}}}function dot(e){const[t,n]=w.useState([]),[r,i]=w.useState(!1),[s,a]=w.useState(null),o=w.useCallback(async()=>{if(e)try{i(!0),a(null);const{data:d,error:f}=await ie.from("document_permissions").select("*").eq("document_id",e).eq("is_active",!0).order("granted_at",{ascending:!1});if(f)throw f;n(d||[])}catch(d){console.error("Error fetching permissions:",d),a(d instanceof Error?d.message:"Failed to fetch permissions")}finally{i(!1)}},[e]);return w.useEffect(()=>{e&&o()},[e,o]),{permissions:t,loading:r,error:s,fetchPermissions:o,grantPermission:async(d,f,h,p)=>{if(!e)throw new Error("Document ID is required");try{const{data:m}=await ie.auth.getUser();if(!m.user)throw new Error("User not authenticated");const{error:g}=await ie.from("document_permissions").insert({document_id:e,user_id:d,permission_level:f,role_type:h,granted_by:m.user.id,expires_at:p});if(g)throw g;await o()}catch(m){throw console.error("Error granting permission:",m),m}},revokePermission:async d=>{try{const{error:f}=await ie.from("document_permissions").update({is_active:!1}).eq("id",d);if(f)throw f;await o()}catch(f){throw console.error("Error revoking permission:",f),f}}}}function fot({clientId:e,onBack:t,className:n}){const[r,i]=w.useState(null),[s,a]=w.useState(!1),[o,c]=w.useState("view"),[u,d]=w.useState(!1),[f,h]=w.useState("setup"),[p,m]=w.useState(null),[g,v]=w.useState({client_id:e||"",title:"",content:{type:"doc",content:[]},content_html:"",content_markdown:"",is_sensitive:!1,document_type:"page",status:"draft",tags:[]}),[y,x]=w.useState(""),[b,S]=w.useState(""),{documents:E,loading:N,error:_,fetchDocuments:k,getDocumentsByClient:T,getDocument:A,addDocument:j,updateDocument:D,deleteDocument:I,duplicateDocument:M,isEncryptionActive:L,setEncryptionPassword:P}=cot(),{versions:B,loading:R}=uot(r==null?void 0:r.id),{permissions:F,loading:O}=dot(r==null?void 0:r.id);w.useEffect(()=>{(async()=>{try{e?await T(e):await k()}catch(pe){console.error("Error loading documents:",pe)}})()},[e,T,k]);const Q=async()=>{try{e?await T(e):await k()}catch(J){console.error("Error reloading documents:",J)}},Y=()=>{v({client_id:e||"",title:"",content:{type:"doc",content:[]},content_html:"",content_markdown:"",is_sensitive:!1,document_type:"page",status:"draft",tags:[]}),S(""),a(!0)},$=J=>{P(J),d(!1),p&&(p(),m(null))},ye=(J,pe=!1)=>{pe||!L()?(h(pe?"setup":"unlock"),m(()=>J),d(!0)):J()},Te=async J=>{if(J.is_sensitive&&!L())ye(async()=>{const pe=await A(J.id);i(pe)});else{const pe=await A(J.id);i(pe)}},U=J=>{i(J),v({client_id:J.client_id,title:J.title,content:J.content,content_html:J.content_html||"",content_markdown:J.content_markdown||"",is_sensitive:J.is_sensitive,document_type:J.document_type,status:J.status,tags:J.tags}),S(J.content_html||""),c("edit")},K=async()=>{try{const J={...g,content_html:b,tags:y?y.split(",").map(pe=>pe.trim()).filter(Boolean):g.tags};if(r&&o==="edit"){await D({...J,id:r.id});const pe=await A(r.id);pe&&i(pe)}else{const pe=await j(J);i(pe),a(!1)}c("view"),await Q()}catch(J){console.error("Error saving document:",J)}},fe=async J=>{try{console.log("Starting delete process for document:",J),await I(J),console.log("Delete successful, updating UI"),(r==null?void 0:r.id)===J&&(i(null),c("view")),await Q(),console.log("Document deleted successfully")}catch(pe){console.error("Error deleting document:",pe);const q=pe instanceof Error?pe.message:"Failed to delete document";alert(`Error deleting document: ${q}`)}},oe=async J=>{try{const pe=`${J.title} (Copy)`;await M(J.id,pe),await Q()}catch(pe){console.error("Error duplicating document:",pe)}},le=(J,pe)=>{v(q=>({...q,content:J})),S(pe)},Ee=()=>{if(y.trim()){const J=y.split(",").map(pe=>pe.trim()).filter(Boolean);v(pe=>({...pe,tags:[...new Set([...pe.tags||[],...J])]})),x("")}},se=J=>{v(pe=>({...pe,tags:(pe.tags||[]).filter(q=>q!==J)}))},qe=e?E.filter(J=>J.client_id===e):E,Oe=e?null:E.reduce((J,pe)=>{const q=`${pe.client_id}-${pe.client_name||"Unknown"}`;return J[q]||(J[q]={clientId:pe.client_id,clientName:pe.client_name||"Unknown Client",clientCompany:pe.client_company,documents:[]}),J[q].documents.push(pe),J},{}),et=()=>e?l.jsx(tot,{documents:qe,loading:N,onDocumentClick:Te,onEditDocument:U,onDeleteDocument:fe,onDuplicateDocument:oe,onCreateNew:Y,showClientFilter:!1,selectedClientId:e}):N?l.jsxs(Z,{children:[l.jsx(de,{children:l.jsx(he,{children:"Loading documents..."})}),l.jsx(ee,{children:l.jsx("div",{className:"space-y-6",children:[1,2,3].map(J=>l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 animate-pulse"}),l.jsx("div",{className:"space-y-2",children:[1,2].map(pe=>l.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3 mb-2"}),l.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},pe))})]},J))})})]}):!Oe||Object.keys(Oe).length===0?l.jsxs(Z,{children:[l.jsx(de,{children:l.jsxs(he,{className:"flex items-center gap-2",children:[l.jsx(en,{className:"h-5 w-5"}),"All Documents"]})}),l.jsx(ee,{children:l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(en,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),l.jsx("h3",{className:"text-lg font-medium mb-2",children:"No documents found"}),l.jsx("p",{className:"text-sm mb-4",children:"Start by creating documentation for your clients."})]})})]}):l.jsx("div",{className:"space-y-6",children:Object.values(Oe).sort((J,pe)=>J.clientName.localeCompare(pe.clientName)).map(J=>l.jsxs(Z,{children:[l.jsx(de,{children:l.jsxs(he,{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ei,{className:"h-5 w-5"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold",children:J.clientName}),J.clientCompany&&l.jsx("p",{className:"text-sm text-gray-500 font-normal",children:J.clientCompany})]})]}),l.jsxs(Ot,{variant:"outline",children:[J.documents.length," document",J.documents.length!==1?"s":""]})]})}),l.jsx(ee,{children:l.jsx("div",{className:"space-y-3",children:J.documents.sort((pe,q)=>new Date(q.updated_at).getTime()-new Date(pe.updated_at).getTime()).map(pe=>l.jsxs("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>Te(pe),children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("h4",{className:"font-medium text-gray-900 truncate flex items-center gap-2",children:[l.jsx("span",{className:"text-lg",children:pe.document_type==="contract"?"":pe.document_type==="specification"?"":pe.document_type==="note"?"":""}),pe.title,pe.is_sensitive&&l.jsx(ro,{className:"h-4 w-4 text-red-500"})]}),l.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500 mt-1",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(gt,{className:"h-3 w-3"}),A1(new Date(pe.updated_at))," ago"]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Hi,{className:"h-3 w-3"}),pe.view_count," views"]}),l.jsxs("span",{children:[pe.word_count," words"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx(Ot,{className:Re("text-xs",pe.status==="published"?"bg-green-100 text-green-700 border-green-200":pe.status==="draft"?"bg-yellow-100 text-yellow-700 border-yellow-200":"bg-gray-100 text-gray-700 border-gray-200"),children:pe.status}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(H,{variant:"ghost",size:"sm",onClick:q=>{q.stopPropagation(),U(pe)},children:l.jsx(uo,{className:"h-3 w-3"})}),l.jsx(H,{variant:"ghost",size:"sm",onClick:q=>{q.stopPropagation(),oe(pe)},children:l.jsx(tE,{className:"h-3 w-3"})}),l.jsx(H,{variant:"ghost",size:"sm",onClick:q=>{q.stopPropagation(),window.confirm("Are you sure you want to delete this document?")&&fe(pe.id)},className:"text-red-600 hover:text-red-700",children:l.jsx(lr,{className:"h-3 w-3"})})]})]})]}),pe.tags.length>0&&l.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[l.jsx(bC,{className:"h-3 w-3 text-gray-400"}),l.jsxs("div",{className:"flex flex-wrap gap-1",children:[pe.tags.slice(0,3).map(q=>l.jsx(Ot,{variant:"secondary",className:"text-xs",children:q},q)),pe.tags.length>3&&l.jsxs(Ot,{variant:"secondary",className:"text-xs",children:["+",pe.tags.length-3," more"]})]})]})]},pe.id))})})]},J.clientId))});return l.jsxs("div",{className:Re("space-y-6",n),children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-3",children:[t&&l.jsx(H,{variant:"ghost",size:"sm",onClick:t,children:l.jsx(S4,{className:"h-4 w-4"})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[l.jsx(en,{className:"h-6 w-6"}),"Client Documentation"]}),l.jsx("p",{className:"text-gray-600",children:e?"Manage documentation for this client":"Manage all client documentation"})]})]})}),_&&l.jsx(Z,{className:"border-red-200 bg-red-50",children:l.jsx(ee,{className:"pt-6",children:l.jsx("p",{className:"text-red-600",children:_})})}),r?l.jsxs(Z,{children:[l.jsx(de,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>i(null),children:l.jsx(S4,{className:"h-4 w-4"})}),l.jsxs("div",{children:[l.jsxs(he,{className:"flex items-center gap-2",children:[r.title,r.is_sensitive&&l.jsxs(Ot,{variant:"destructive",className:"text-xs",children:[l.jsx(ro,{className:"h-3 w-3 mr-1"}),"Sensitive"]})]}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mt-1",children:[l.jsxs("span",{children:["Type: ",r.document_type]}),l.jsxs("span",{children:["Status: ",r.status]}),l.jsxs("span",{children:["Words: ",r.word_count]}),l.jsxs("span",{children:["Views: ",r.view_count]})]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[o==="view"&&l.jsxs(l.Fragment,{children:[l.jsxs(H,{variant:"outline",size:"sm",onClick:()=>U(r),children:[l.jsx(uo,{className:"h-4 w-4 mr-1"}),"Edit"]}),l.jsxs(H,{variant:"outline",size:"sm",onClick:()=>c("preview"),children:[l.jsx(Hi,{className:"h-4 w-4 mr-1"}),"Preview"]})]}),(o==="edit"||o==="preview")&&l.jsxs(l.Fragment,{children:[l.jsxs(H,{variant:"outline",size:"sm",onClick:()=>c("view"),children:[l.jsx(Hi,{className:"h-4 w-4 mr-1"}),"View"]}),o==="edit"&&l.jsxs(H,{size:"sm",onClick:K,children:[l.jsx(Qh,{className:"h-4 w-4 mr-1"}),"Save"]})]})]})]})}),l.jsx(ee,{children:l.jsxs(Qo,{defaultValue:"content",children:[l.jsxs(co,{children:[l.jsx(St,{value:"content",children:"Content"}),l.jsxs(St,{value:"versions",children:[l.jsx(Ihe,{className:"h-4 w-4 mr-1"}),"Versions (",B.length,")"]}),l.jsxs(St,{value:"permissions",children:[l.jsx(Tr,{className:"h-4 w-4 mr-1"}),"Permissions (",F.length,")"]})]}),l.jsx(wt,{value:"content",className:"mt-6",children:o==="edit"?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"lg:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title"}),l.jsx(re,{value:g.title,onChange:J=>v(pe=>({...pe,title:J.target.value})),placeholder:"Document title"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Type"}),l.jsxs("select",{value:g.document_type,onChange:J=>v(pe=>({...pe,document_type:J.target.value})),className:"w-full px-3 py-2 border rounded-lg","aria-label":"Document type",children:[l.jsx("option",{value:"page",children:"Page"}),l.jsx("option",{value:"note",children:"Note"}),l.jsx("option",{value:"contract",children:"Contract"}),l.jsx("option",{value:"specification",children:"Specification"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),l.jsxs("select",{value:g.status,onChange:J=>v(pe=>({...pe,status:J.target.value})),className:"w-full px-3 py-2 border rounded-lg","aria-label":"Document status",children:[l.jsx("option",{value:"draft",children:"Draft"}),l.jsx("option",{value:"published",children:"Published"}),l.jsx("option",{value:"archived",children:"Archived"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Security"}),l.jsx(H,{type:"button",variant:g.is_sensitive?"destructive":"outline",onClick:()=>v(J=>({...J,is_sensitive:!J.is_sensitive})),className:"w-full justify-start",children:g.is_sensitive?l.jsxs(l.Fragment,{children:[l.jsx(ro,{className:"h-4 w-4 mr-2"}),"Sensitive Document"]}):l.jsxs(l.Fragment,{children:[l.jsx(uV,{className:"h-4 w-4 mr-2"}),"Public Document"]})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tags"}),l.jsxs("div",{className:"flex gap-2 mb-2",children:[l.jsx(re,{value:y,onChange:J=>x(J.target.value),placeholder:"Add tags (comma separated)",onKeyPress:J=>J.key==="Enter"&&Ee()}),l.jsx(H,{type:"button",variant:"outline",onClick:Ee,children:l.jsx(bC,{className:"h-4 w-4"})})]}),l.jsx("div",{className:"flex flex-wrap gap-1",children:(g.tags||[]).map(J=>l.jsxs(Ot,{variant:"secondary",className:"text-xs",children:[J,l.jsx("button",{type:"button",onClick:()=>se(J),className:"ml-1 hover:text-red-600","aria-label":`Remove tag ${J}`,children:l.jsx(Qn,{className:"h-3 w-3"})})]},J))})]}),l.jsx(N9,{content:g.content,onChange:le,onSave:K,isSensitive:g.is_sensitive,onSensitivityToggle:()=>v(J=>({...J,is_sensitive:!J.is_sensitive})),placeholder:"Start writing your document..."})]}):o==="preview"?l.jsx(K7,{content:b}):l.jsx(K7,{content:r.content_html||""})}),l.jsx(wt,{value:"versions",className:"mt-6",children:l.jsx("div",{className:"space-y-4",children:R?l.jsx("p",{children:"Loading versions..."}):B.length===0?l.jsx("p",{className:"text-gray-500",children:"No versions available"}):B.map(J=>l.jsx(Z,{children:l.jsx(ee,{className:"pt-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h4",{className:"font-medium",children:["Version ",J.version_number]}),l.jsxs("p",{className:"text-sm text-gray-500",children:[J.change_summary,"  ",J.created_by_name,"  ",new Date(J.created_at).toLocaleDateString()]})]}),l.jsx(H,{variant:"outline",size:"sm",children:"View"})]})})},J.id))})}),l.jsx(wt,{value:"permissions",className:"mt-6",children:l.jsx("div",{className:"space-y-4",children:O?l.jsx("p",{children:"Loading permissions..."}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(R0,{className:"h-5 w-5"}),l.jsx("h3",{className:"font-medium",children:"Document Access Control"})]}),F.length===0?l.jsx("p",{className:"text-gray-500",children:"No special permissions set. Using default access rules."}):l.jsx("div",{className:"space-y-2",children:F.map(J=>l.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:J.permission_level}),l.jsx("span",{className:"text-sm text-gray-500 ml-2",children:J.role_type&&`(${J.role_type})`})]}),l.jsx(Ot,{variant:"outline",children:J.permission_level})]},J.id))})]})})})]})})]}):et(),l.jsx(pte,{open:s,onOpenChange:a,children:l.jsxs(uM,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[l.jsxs(dM,{children:[l.jsx(hM,{children:"Create New Document"}),l.jsx(pM,{children:"Create a new document for client documentation."})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title"}),l.jsx(re,{value:g.title,onChange:J=>v(pe=>({...pe,title:J.target.value})),placeholder:"Document title"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Type"}),l.jsxs("select",{value:g.document_type,onChange:J=>v(pe=>({...pe,document_type:J.target.value})),className:"w-full px-3 py-2 border rounded-lg","aria-label":"Document type",children:[l.jsx("option",{value:"page",children:"Page"}),l.jsx("option",{value:"note",children:"Note"}),l.jsx("option",{value:"contract",children:"Contract"}),l.jsx("option",{value:"specification",children:"Specification"})]})]})]}),l.jsx(N9,{content:g.content,onChange:le,isSensitive:g.is_sensitive,onSensitivityToggle:()=>v(J=>({...J,is_sensitive:!J.is_sensitive})),placeholder:"Start writing your document...",showSaveButton:!1,showPreviewButton:!1})]}),l.jsxs(fM,{children:[l.jsx(gM,{children:"Cancel"}),l.jsx(mM,{onClick:K,children:"Create Document"})]})]})}),l.jsx(lot,{open:u,onOpenChange:J=>{d(J),J||m(null)},mode:f,onPasswordSet:$})]})}function hot(){const{clients:e,loading:t,error:n,addClient:r,updateClient:i,deleteClient:s,archiveClient:a,activateClient:o}=Tn(),c=Xh(),[u,d]=w.useState(""),[f,h]=w.useState(!1),[p,m]=w.useState(null),[g,v]=w.useState("all"),[y,x]=w.useState(null),[b,S]=w.useState("clients");w.useEffect(()=>{c.clientModalOpen&&(h(!0),c.setClientModalOpen(!1))},[c.clientModalOpen,c]);const[E,N]=w.useState({name:"",email:"",phone:"",company:"",address:"",hourly_rate:void 0,currency:"SEK",status:"active",notes:""}),_=e.filter(M=>{var B,R;const L=M.name.toLowerCase().includes(u.toLowerCase())||((B=M.company)==null?void 0:B.toLowerCase().includes(u.toLowerCase()))||((R=M.email)==null?void 0:R.toLowerCase().includes(u.toLowerCase())),P=g==="all"||M.status===g;return L&&P}),k=async M=>{M.preventDefault();try{p?(await i({...E,id:p.id}),m(null)):await r(E),N({name:"",email:"",phone:"",company:"",address:"",hourly_rate:void 0,currency:"SEK",status:"active",notes:""}),h(!1)}catch(L){console.error("Error saving client:",L)}},T=M=>{m(M),N({name:M.name,email:M.email||"",phone:M.phone||"",company:M.company||"",address:M.address||"",hourly_rate:M.hourly_rate||void 0,currency:M.currency||"SEK",status:M.status,notes:M.notes||""}),h(!0)},A=async M=>{if(window.confirm("Are you sure you want to delete this client? This action cannot be undone."))try{await s(M)}catch(L){console.error("Error deleting client:",L)}},j=async M=>{try{await a(M)}catch(L){console.error("Error archiving client:",L)}},D=async M=>{try{await o(M)}catch(L){console.error("Error activating client:",L)}},I=M=>{switch(M){case"active":return{icon:Er,color:"text-green-600",bg:"bg-green-50 dark:bg-green-900/20"};case"inactive":return{icon:gt,color:"text-yellow-600",bg:"bg-yellow-50 dark:bg-yellow-900/20"};case"archived":return{icon:L0,color:"text-gray-600",bg:"bg-gray-50 dark:bg-gray-900/20"};default:return{icon:Er,color:"text-green-600",bg:"bg-green-50 dark:bg-green-900/20"}}};return t?l.jsx("div",{className:"space-y-6",children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Clients"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading clients..."})]})})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Clients"}),l.jsx("p",{className:"text-muted-foreground",children:"Manage your clients and track relationships"})]}),l.jsxs(H,{onClick:()=>h(!0),className:"flex items-center gap-2","data-testid":"new-client-btn",children:[l.jsx(Xe,{className:"h-4 w-4"}),"Add Client"]})]}),n&&l.jsx(Z,{className:"border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-900/20",children:l.jsx(ee,{className:"pt-6",children:l.jsx("p",{className:"text-red-600 dark:text-red-400",children:n})})}),l.jsxs(Qo,{value:b,onValueChange:S,className:"w-full",children:[l.jsxs(co,{className:"grid w-full grid-cols-2",children:[l.jsxs(St,{value:"clients",className:"flex items-center gap-2",children:[l.jsx(Tr,{className:"h-4 w-4"}),"Clients"]}),l.jsxs(St,{value:"documentation",className:"flex items-center gap-2",children:[l.jsx(Dm,{className:"h-4 w-4"}),"Documentation"]})]}),l.jsxs(wt,{value:"clients",className:"space-y-6",children:[l.jsx(Z,{children:l.jsx(ee,{className:"pt-6",children:l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx(Jh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(re,{placeholder:"Search clients...",value:u,onChange:M=>d(M.target.value),className:"pl-10"})]}),l.jsxs("select",{value:g,onChange:M=>v(M.target.value),className:"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Filter clients by status",children:[l.jsx("option",{value:"all",children:"All Statuses"}),l.jsx("option",{value:"active",children:"Active"}),l.jsx("option",{value:"inactive",children:"Inactive"}),l.jsx("option",{value:"archived",children:"Archived"})]})]})})}),f&&l.jsxs(Z,{children:[l.jsx(de,{children:l.jsx(he,{children:p?"Edit Client":"Add New Client"})}),l.jsx(ee,{children:l.jsxs("form",{onSubmit:k,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Name *"}),l.jsx(re,{value:E.name,onChange:M=>N({...E,name:M.target.value}),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Company"}),l.jsx(re,{value:E.company,onChange:M=>N({...E,company:M.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),l.jsx(re,{type:"email",value:E.email,onChange:M=>N({...E,email:M.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone"}),l.jsx(re,{value:E.phone,onChange:M=>N({...E,phone:M.target.value})})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Address"}),l.jsx(re,{value:E.address,onChange:M=>N({...E,address:M.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Hourly Rate (SEK)"}),l.jsx(re,{type:"number",step:"0.01",value:E.hourly_rate||"",onChange:M=>N({...E,hourly_rate:M.target.value?parseFloat(M.target.value):void 0})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),l.jsxs("select",{value:E.status,onChange:M=>N({...E,status:M.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Client status",children:[l.jsx("option",{value:"active",children:"Active"}),l.jsx("option",{value:"inactive",children:"Inactive"}),l.jsx("option",{value:"archived",children:"Archived"})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes"}),l.jsx("textarea",{value:E.notes,onChange:M=>N({...E,notes:M.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[80px]",placeholder:"Additional notes about this client..."})]})]}),l.jsxs("div",{className:"flex gap-2 pt-4",children:[l.jsx(H,{type:"submit",children:p?"Update Client":"Add Client"}),l.jsx(H,{type:"button",variant:"outline",onClick:()=>{h(!1),m(null),N({name:"",email:"",phone:"",company:"",address:"",hourly_rate:void 0,currency:"SEK",status:"active",notes:""})},children:"Cancel"})]})]})})]}),_.length===0?l.jsx(Z,{children:l.jsx(ee,{className:"pt-6",children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx(Tr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),l.jsx("h3",{className:"text-lg font-medium mb-2",children:"No clients found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:u||g!=="all"?"Try adjusting your search or filter criteria.":"Get started by adding your first client."}),!u&&g==="all"&&l.jsxs(H,{onClick:()=>h(!0),children:[l.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Add Your First Client"]})]})})}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(M=>{const L=I(M.status),P=L.icon;return l.jsxs(Z,{className:"hover:shadow-lg transition-shadow",children:[l.jsx(de,{className:"pb-3",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx(he,{className:"text-lg",children:M.name}),M.company&&l.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1 mt-1",children:[l.jsx(cO,{className:"h-3 w-3"}),M.company]})]}),l.jsxs("div",{className:`px-2 py-1 rounded-full flex items-center gap-1 ${L.bg}`,children:[l.jsx(P,{className:`h-3 w-3 ${L.color}`}),l.jsx("span",{className:`text-xs font-medium capitalize ${L.color}`,children:M.status})]})]})}),l.jsxs(ee,{className:"space-y-3",children:[M.email&&l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx(Hhe,{className:"h-4 w-4 text-muted-foreground"}),l.jsx("span",{className:"truncate",children:M.email})]}),M.phone&&l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx(Xhe,{className:"h-4 w-4 text-muted-foreground"}),l.jsx("span",{children:M.phone})]}),M.hourly_rate&&l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx(gt,{className:"h-4 w-4 text-muted-foreground"}),l.jsxs("span",{children:[ue(M.hourly_rate),"/hour"]})]}),M.notes&&l.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:M.notes}),l.jsxs("div",{className:"flex gap-2 pt-2",children:[l.jsxs(H,{size:"sm",variant:"outline",onClick:()=>T(M),className:"flex-1",children:[l.jsx(uo,{className:"h-3 w-3 mr-1"}),"Edit"]}),l.jsxs(H,{size:"sm",variant:"outline",onClick:()=>{x(M),S("documentation")},className:"flex-1",children:[l.jsx(en,{className:"h-3 w-3 mr-1"}),"Docs"]}),M.status==="active"?l.jsx(H,{size:"sm",variant:"outline",onClick:()=>j(M.id),children:l.jsx(iV,{className:"h-3 w-3"})}):l.jsx(H,{size:"sm",variant:"outline",onClick:()=>D(M.id),children:l.jsx(Er,{className:"h-3 w-3"})}),l.jsx(H,{size:"sm",variant:"outline",onClick:()=>A(M.id),className:"text-red-600 hover:text-red-700",children:l.jsx(lr,{className:"h-3 w-3"})})]})]})]},M.id)})}),l.jsx(Z,{children:l.jsx(ee,{className:"pt-6",children:l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.filter(M=>M.status==="active").length}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Clients"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:e.filter(M=>M.status==="inactive").length}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Inactive Clients"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-gray-600",children:e.filter(M=>M.status==="archived").length}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Archived Clients"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold",children:e.length}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Clients"})]})]})})})]}),l.jsx(wt,{value:"documentation",className:"space-y-6",children:l.jsxs(Z,{children:[l.jsxs(de,{children:[l.jsxs(he,{className:"flex items-center gap-2",children:[l.jsx(Dm,{className:"h-5 w-5"}),"Client Documentation",y&&l.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:[" ",y.name]})]}),l.jsx("p",{className:"text-muted-foreground",children:y?`Managing documentation for ${y.name}${y.company?` (${y.company})`:""}`:"Manage all client documentation"})]}),l.jsx(ee,{children:l.jsx(fot,{clientId:y==null?void 0:y.id,onBack:y?()=>x(null):void 0})})]})})]})]})}function pot({dateRange:e}){const{invoiceItems:t,loading:n}=Ss(),{entries:r,loading:i}=li(),{clients:s}=Tn(),{projects:a}=er(),[o,c]=w.useState({totalRevenue:0,totalHours:0,activeClients:0,growthRate:0,averageHourlyRate:0,productivityScore:0});w.useEffect(()=>{if(!t||!r||n||i)return;const h=t.filter(D=>{const I=Ws(D.invoice_date);return bc(I,{start:e.from,end:e.to})}),p=r.filter(D=>{const I=Ws(D.date);return bc(I,{start:e.from,end:e.to})}),m=h.reduce((D,I)=>D+I.total_amount,0),g=p.reduce((D,I)=>D+I.hours,0),y=new Set([...h.map(D=>{const I=a.find(M=>M.id===D.project_id);return I==null?void 0:I.client_id}).filter(Boolean),...p.map(D=>{const I=a.find(M=>M.id===D.project_id);return I==null?void 0:I.client_id}).filter(Boolean)]).size,x=e.to.getTime()-e.from.getTime(),b=new Date(e.from.getTime()-x),S=new Date(e.to.getTime()-x),N=t.filter(D=>{const I=Ws(D.invoice_date);return bc(I,{start:b,end:S})}).reduce((D,I)=>D+I.total_amount,0),_=N>0?(m-N)/N*100:0,k=g>0?m/g:0,A=Math.ceil((e.to.getTime()-e.from.getTime())/(1e3*60*60*24))*8,j=A>0?Math.min(g/A*100,100):0;c({totalRevenue:m,totalHours:g,activeClients:y,growthRate:_,averageHourlyRate:k,productivityScore:j})},[t,r,n,i,e,s,a]);const u=h=>{const p=Math.floor(h),m=Math.round((h-p)*60);return`${p}h ${m}m`};if(n||i)return l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((h,p)=>l.jsxs(Z,{className:"animate-pulse",children:[l.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"}),l.jsx("div",{className:"h-4 w-4 bg-gray-200 rounded"})]}),l.jsxs(ee,{children:[l.jsx("div",{className:"h-8 bg-gray-200 rounded w-24 mb-1"}),l.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]},p))});const f=[{title:"Total Revenue",value:ue(o.totalRevenue),description:`${o.growthRate>=0?"+":""}${o.growthRate.toFixed(1)}% vs previous period`,icon:wn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Total Hours",value:u(o.totalHours),description:"Time tracked this period",icon:gt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Active Clients",value:o.activeClients.toString(),description:"Clients with activity",icon:Tr,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Avg Hourly Rate",value:ue(o.averageHourlyRate),description:"Revenue per hour",icon:Wi,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Productivity",value:`${o.productivityScore.toFixed(1)}%`,description:"Of expected work hours",icon:Tc,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Growth Trend",value:`${o.growthRate>=0?"+":""}${o.growthRate.toFixed(1)}%`,description:"Revenue growth rate",icon:cr,color:o.growthRate>=0?"text-green-600":"text-red-600",bgColor:o.growthRate>=0?"bg-green-100":"bg-red-100"}];return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:f.map(h=>{const p=h.icon;return l.jsxs(Z,{className:"hover:shadow-md transition-shadow",children:[l.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(he,{className:"text-sm font-medium text-gray-600",children:h.title}),l.jsx("div",{className:`p-2 rounded-full ${h.bgColor}`,children:l.jsx(p,{className:`h-4 w-4 ${h.color}`})})]}),l.jsxs(ee,{children:[l.jsx("div",{className:"text-2xl font-bold",children:h.value}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.description})]})]},h.title)})}),l.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[l.jsxs(Z,{children:[l.jsx(de,{children:l.jsxs(he,{className:"flex items-center gap-2",children:[l.jsx(Js,{className:"h-5 w-5"}),"Revenue Summary"]})}),l.jsxs(ee,{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Total Revenue"}),l.jsx("span",{className:"font-semibold",children:ue(o.totalRevenue)})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Average Hourly Rate"}),l.jsx("span",{className:"font-semibold",children:ue(o.averageHourlyRate)})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Growth Rate"}),l.jsxs("span",{className:`font-semibold ${o.growthRate>=0?"text-green-600":"text-red-600"}`,children:[o.growthRate>=0?"+":"",o.growthRate.toFixed(1),"%"]})]})]})]}),l.jsxs(Z,{children:[l.jsx(de,{children:l.jsxs(he,{className:"flex items-center gap-2",children:[l.jsx(Tc,{className:"h-5 w-5"}),"Activity Summary"]})}),l.jsxs(ee,{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Total Hours"}),l.jsx("span",{className:"font-semibold",children:u(o.totalHours)})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Active Clients"}),l.jsx("span",{className:"font-semibold",children:o.activeClients})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Productivity Score"}),l.jsxs("span",{className:"font-semibold",children:[o.productivityScore.toFixed(1),"%"]})]})]})]})]})]})}function mot({dateRange:e}){const{invoiceItems:t,loading:n}=Ss(),{clients:r}=Tn(),{projects:i}=er(),[s,a]=w.useState({totalRevenue:0,paidRevenue:0,pendingRevenue:0,overdueRevenue:0,averageInvoiceValue:0,invoiceCount:0,growthRate:0,collectionRate:0}),[o,c]=w.useState([]);if(w.useEffect(()=>{if(!t||n)return;const d=t.filter(T=>{const A=Ws(T.invoice_date);return bc(A,{start:e.from,end:e.to})}),f=d.reduce((T,A)=>T+A.total_amount,0),h=d.filter(T=>T.status==="paid").reduce((T,A)=>T+A.total_amount,0),p=d.filter(T=>T.status==="sent").reduce((T,A)=>T+A.total_amount,0),m=d.filter(T=>{if(!T.due_date)return!1;const A=Ws(T.due_date);return T.status==="sent"&&A<new Date}).reduce((T,A)=>T+A.total_amount,0),g=d.length>0?f/d.length:0,v=f>0?h/f*100:0,y=e.to.getTime()-e.from.getTime(),x=new Date(e.from.getTime()-y),b=new Date(e.to.getTime()-y),E=t.filter(T=>{const A=Ws(T.invoice_date);return bc(A,{start:x,end:b})}).reduce((T,A)=>T+A.total_amount,0),N=E>0?(f-E)/E*100:0;a({totalRevenue:f,paidRevenue:h,pendingRevenue:p,overdueRevenue:m,averageInvoiceValue:g,invoiceCount:d.length,growthRate:N,collectionRate:v});const _=new Map;d.forEach(T=>{const A=i.find(L=>L.id===T.project_id),j=r.find(L=>L.id===(A==null?void 0:A.client_id)),D=(j==null?void 0:j.id)||"unknown",I=(j==null?void 0:j.name)||"Unknown Client",M=_.get(D)||{revenue:0,invoiceCount:0};_.set(D,{revenue:M.revenue+T.total_amount,invoiceCount:M.invoiceCount+1,name:I})});const k=Array.from(_.entries()).map(([T,A])=>({clientId:T,clientName:A.name,revenue:A.revenue,invoiceCount:A.invoiceCount,percentage:f>0?A.revenue/f*100:0}));k.sort((T,A)=>A.revenue-T.revenue),c(k)},[t,n,e,r,i]),n)return l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((d,f)=>l.jsxs(Z,{className:"animate-pulse",children:[l.jsx(de,{className:"space-y-0 pb-2",children:l.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})}),l.jsxs(ee,{children:[l.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-2"}),l.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"})]})]},f))});const u=[{title:"Total Revenue",value:ue(s.totalRevenue),description:`${s.growthRate>=0?"+":""}${s.growthRate.toFixed(1)}% vs previous period`,icon:wn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Collected Revenue",value:ue(s.paidRevenue),description:`${s.collectionRate.toFixed(1)}% collection rate`,icon:Wi,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Pending Revenue",value:ue(s.pendingRevenue),description:"Awaiting payment",icon:Lt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Average Invoice",value:ue(s.averageInvoiceValue),description:`${s.invoiceCount} invoices`,icon:wn,color:"text-purple-600",bgColor:"bg-purple-100"}];return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:u.map(d=>{const f=d.icon;return l.jsxs(Z,{className:"hover:shadow-md transition-shadow",children:[l.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(he,{className:"text-sm font-medium text-gray-600",children:d.title}),l.jsx("div",{className:`p-2 rounded-full ${d.bgColor}`,children:l.jsx(f,{className:`h-4 w-4 ${d.color}`})})]}),l.jsxs(ee,{children:[l.jsx("div",{className:"text-2xl font-bold",children:d.value}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:d.description})]})]},d.title)})}),s.growthRate!==0&&l.jsx(Z,{children:l.jsxs(de,{children:[l.jsxs(he,{className:"flex items-center gap-2",children:[s.growthRate>=0?l.jsx(cr,{className:"h-5 w-5 text-green-600"}):l.jsx(yb,{className:"h-5 w-5 text-red-600"}),"Revenue Trend"]}),l.jsxs(br,{children:[s.growthRate>=0?"Revenue is growing":"Revenue has decreased"," by"," ",Math.abs(s.growthRate).toFixed(1),"% compared to the previous period"]})]})}),s.overdueRevenue>0&&l.jsx(Z,{className:"border-red-200 bg-red-50",children:l.jsxs(de,{children:[l.jsx(he,{className:"text-red-700",children:"Overdue Revenue"}),l.jsxs(br,{className:"text-red-600",children:["You have ",ue(s.overdueRevenue)," in overdue invoices that need attention"]})]})}),l.jsxs(Z,{children:[l.jsxs(de,{children:[l.jsx(he,{children:"Revenue by Client"}),l.jsx(br,{children:"Revenue distribution across your clients for the selected period"})]}),l.jsx(ee,{children:o.length>0?l.jsxs("div",{className:"space-y-4",children:[o.slice(0,10).map(d=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium truncate",children:d.clientName}),l.jsxs("p",{className:"text-sm text-gray-500",children:[d.invoiceCount," invoice",d.invoiceCount!==1?"s":""]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[d.percentage.toFixed(1),"%"]}),l.jsx("span",{className:"font-medium",children:ue(d.revenue)})]})]},d.clientId)),o.length>10&&l.jsxs("p",{className:"text-sm text-gray-500 text-center pt-2 border-t",children:["And ",o.length-10," more clients..."]})]}):l.jsx("div",{className:"text-center py-8 text-gray-500",children:"No revenue data found for the selected period"})})]}),l.jsxs(Z,{children:[l.jsxs(de,{children:[l.jsx(he,{children:"Period Summary"}),l.jsxs(br,{children:["Revenue summary from ",Cd(e.from,"MMM d, yyyy")," to ",Cd(e.to,"MMM d, yyyy")]})]}),l.jsx(ee,{children:l.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:ue(s.paidRevenue)}),l.jsx("p",{className:"text-sm text-gray-500",children:"Collected"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:ue(s.pendingRevenue)}),l.jsx("p",{className:"text-sm text-gray-500",children:"Pending"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-red-600",children:ue(s.overdueRevenue)}),l.jsx("p",{className:"text-sm text-gray-500",children:"Overdue"})]})]})})]})]})}function got({dateRange:e}){const{entries:t,loading:n}=li(),{projects:r}=er(),{clients:i}=Tn(),[s,a]=w.useState({totalHours:0,billableHours:0,billableRate:0,averageHoursPerDay:0,totalSessions:0,averageSessionLength:0,estimatedRevenue:0,productivity:0}),[o,c]=w.useState([]),[u,d]=w.useState([]);w.useEffect(()=>{if(!t||n)return;const p=t.filter(M=>{const L=Ws(M.date);return bc(L,{start:e.from,end:e.to})}),m=p.reduce((M,L)=>M+L.hours,0),g=m,v=g>0?100:0,y=Math.max(1,Math.ceil((e.to.getTime()-e.from.getTime())/(1e3*60*60*24))),x=m/y,b=p.length,S=b>0?m/b:0,E=1e3,N=g*E,k=y*8,T=k>0?m/k*100:0;a({totalHours:m,billableHours:g,billableRate:v,averageHoursPerDay:x,totalSessions:b,averageSessionLength:S,estimatedRevenue:N,productivity:Math.min(T,100)});const A=new Map;p.forEach(M=>{const L=r.find(Y=>Y.id===M.project_id),P=i.find(Y=>Y.id===(L==null?void 0:L.client_id)),B=(L==null?void 0:L.id)||"unknown",R=(L==null?void 0:L.name)||"Unknown Project",F=(P==null?void 0:P.name)||"Unknown Client",O=(L==null?void 0:L.hourly_rate)||E,Q=A.get(B)||{hours:0,name:R,clientName:F,rate:O};A.set(B,{...Q,hours:Q.hours+M.hours})});const j=Array.from(A.entries()).map(([M,L])=>({projectId:M,projectName:L.name,clientName:L.clientName,hours:L.hours,percentage:m>0?L.hours/m*100:0,estimatedValue:L.hours*L.rate}));j.sort((M,L)=>L.hours-M.hours),c(j);const D=new Map;p.forEach(M=>{const L=M.date,P=D.get(L)||{hours:0,sessions:0};D.set(L,{hours:P.hours+M.hours,sessions:P.sessions+1})});const I=Array.from(D.entries()).map(([M,L])=>({date:M,hours:L.hours,sessions:L.sessions}));I.sort((M,L)=>M.date.localeCompare(L.date)),d(I)},[t,n,e,r,i]);const f=p=>{const m=Math.floor(p),g=Math.round((p-m)*60);return`${m}h ${g}m`};if(n)return l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((p,m)=>l.jsxs(Z,{className:"animate-pulse",children:[l.jsx(de,{className:"space-y-0 pb-2",children:l.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})}),l.jsxs(ee,{children:[l.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-2"}),l.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"})]})]},m))});const h=[{title:"Total Hours",value:f(s.totalHours),description:`${s.totalSessions} work sessions`,icon:gt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Daily Average",value:f(s.averageHoursPerDay),description:"Per work day",icon:Lt,color:"text-green-600",bgColor:"bg-green-100"},{title:"Estimated Revenue",value:ue(s.estimatedRevenue),description:"Based on tracked time",icon:cr,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Productivity",value:`${s.productivity.toFixed(1)}%`,description:"Of expected work hours",icon:Tc,color:"text-orange-600",bgColor:"bg-orange-100"}];return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:h.map(p=>{const m=p.icon;return l.jsxs(Z,{className:"hover:shadow-md transition-shadow",children:[l.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(he,{className:"text-sm font-medium text-gray-600",children:p.title}),l.jsx("div",{className:`p-2 rounded-full ${p.bgColor}`,children:l.jsx(m,{className:`h-4 w-4 ${p.color}`})})]}),l.jsxs(ee,{children:[l.jsx("div",{className:"text-2xl font-bold",children:p.value}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:p.description})]})]},p.title)})}),l.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[l.jsxs(Z,{children:[l.jsxs(de,{children:[l.jsxs(he,{className:"flex items-center gap-2",children:[l.jsx(Tc,{className:"h-5 w-5"}),"Productivity Overview"]}),l.jsx(br,{children:"Your work patterns and efficiency metrics"})]}),l.jsx(ee,{className:"space-y-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-semibold",children:f(s.averageSessionLength)}),l.jsx("p",{className:"text-xs text-gray-500",children:"Avg Session"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-semibold",children:[s.productivity.toFixed(1),"%"]}),l.jsx("p",{className:"text-xs text-gray-500",children:"Productivity"})]})]})})]}),l.jsxs(Z,{children:[l.jsxs(de,{children:[l.jsx(he,{children:"Recent Trends"}),l.jsx(br,{children:"Daily time tracking patterns"})]}),l.jsx(ee,{children:u.length>0?l.jsx("div",{className:"space-y-2",children:u.slice(-7).map(p=>l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-gray-500",children:Cd(Ws(p.date),"MMM d")}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{children:f(p.hours)}),l.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[p.sessions," sessions"]})]})]},p.date))}):l.jsx("div",{className:"text-center py-4 text-gray-500",children:"No time data for selected period"})})]})]}),l.jsxs(Z,{children:[l.jsxs(de,{children:[l.jsx(he,{children:"Time by Project"}),l.jsx(br,{children:"How you've allocated your time across different projects"})]}),l.jsx(ee,{children:o.length>0?l.jsxs("div",{className:"space-y-4",children:[o.slice(0,10).map(p=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium truncate",children:p.projectName}),l.jsx("p",{className:"text-sm text-gray-500",children:p.clientName})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"font-medium",children:f(p.hours)}),l.jsx("div",{className:"text-xs text-gray-500",children:ue(p.estimatedValue)})]}),l.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[p.percentage.toFixed(1),"%"]})]})]},p.projectId)),o.length>10&&l.jsxs("p",{className:"text-sm text-gray-500 text-center pt-2 border-t",children:["And ",o.length-10," more projects..."]})]}):l.jsx("div",{className:"text-center py-8 text-gray-500",children:"No time entries found for the selected period"})})]})]})}function vot({dateRange:e}){const{clients:t}=Tn(),{projects:n}=er(),{invoiceItems:r,loading:i}=Ss(),{entries:s,loading:a}=li(),[o,c]=w.useState({totalClients:0,activeClients:0,newClients:0,retentionRate:0,averageProjectValue:0}),[u,d]=w.useState([]);w.useEffect(()=>{if(!t||!n||!r||!s||i||a)return;const g=r.filter(j=>{const D=Ws(j.invoice_date);return bc(D,{start:e.from,end:e.to})}),v=s.filter(j=>{const D=Ws(j.date);return bc(D,{start:e.from,end:e.to})}),y=t.length,b=new Set([...g.map(j=>{const D=n.find(I=>I.id===j.project_id);return D==null?void 0:D.client_id}).filter(Boolean),...v.map(j=>{const D=n.find(I=>I.id===j.project_id);return D==null?void 0:D.client_id}).filter(Boolean)]).size,S=0,E=y>0?b/y*100:0,N=g.reduce((j,D)=>j+D.total_amount,0),_=new Set(g.map(j=>j.project_id)).size,k=_>0?N/_:0;c({totalClients:y,activeClients:b,newClients:S,retentionRate:E,averageProjectValue:k});const T=new Map;t.forEach(j=>{T.set(j.id,{name:j.name,revenue:0,hours:0,projects:new Set,invoices:0,lastActivity:new Date(0)})}),g.forEach(j=>{const D=n.find(I=>I.id===j.project_id);if(D!=null&&D.client_id&&j.project_id&&T.has(D.client_id)){const I=T.get(D.client_id);I.revenue+=j.total_amount,I.projects.add(j.project_id),I.invoices+=1;const M=Ws(j.invoice_date);M>I.lastActivity&&(I.lastActivity=M)}}),v.forEach(j=>{const D=n.find(I=>I.id===j.project_id);if(D!=null&&D.client_id&&T.has(D.client_id)){const I=T.get(D.client_id);I.hours+=j.hours,I.projects.add(j.project_id);const M=Ws(j.date);M>I.lastActivity&&(I.lastActivity=M)}});const A=Array.from(T.entries()).map(([j,D])=>{const I=D.projects.size,M=I>0?D.revenue/I:0,L=r$e(new Date,D.lastActivity);let P="inactive",B=0;return(D.revenue>0||D.hours>0)&&(L<=30?(P="active",B=90-Math.min(L*2,40)):L<=90?(P="at-risk",B=50-Math.min((L-30)*.5,25)):(P="inactive",B=Math.max(25-(L-90)*.1,0))),{clientId:j,clientName:D.name,revenue:D.revenue,hours:D.hours,projects:I,invoices:D.invoices,avgProjectValue:M,lastActivity:D.lastActivity.toISOString(),status:P,healthScore:Math.round(B)}});A.sort((j,D)=>j.revenue!==D.revenue?D.revenue-j.revenue:D.healthScore-j.healthScore),d(A)},[t,n,r,s,i,a,e]);const f=g=>{const v=Math.floor(g),y=Math.round((g-v)*60);return`${v}h ${y}m`},h=g=>{switch(g){case"active":return"bg-green-500";case"at-risk":return"bg-yellow-500";case"inactive":return"bg-red-500";default:return"bg-gray-500"}},p=g=>g>=90?"w-full":g>=80?"w-5/6":g>=70?"w-4/6":g>=60?"w-3/6":g>=50?"w-2/6":g>=25?"w-1/6":"w-1/12";if(i||a)return l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((g,v)=>l.jsxs(Z,{className:"animate-pulse",children:[l.jsx(de,{className:"space-y-0 pb-2",children:l.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})}),l.jsxs(ee,{children:[l.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-2"}),l.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"})]})]},v))});const m=[{title:"Total Clients",value:o.totalClients.toString(),description:`${o.activeClients} active this period`,icon:Tr,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Client Retention",value:`${o.retentionRate.toFixed(1)}%`,description:"Activity retention rate",icon:cr,color:"text-green-600",bgColor:"bg-green-100"},{title:"New Clients",value:o.newClients.toString(),description:"Acquired this period",icon:xC,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Avg Project Value",value:ue(o.averageProjectValue),description:"Per project average",icon:wn,color:"text-orange-600",bgColor:"bg-orange-100"}];return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:m.map(g=>{const v=g.icon;return l.jsxs(Z,{className:"hover:shadow-md transition-shadow",children:[l.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(he,{className:"text-sm font-medium text-gray-600",children:g.title}),l.jsx("div",{className:`p-2 rounded-full ${g.bgColor}`,children:l.jsx(v,{className:`h-4 w-4 ${g.color}`})})]}),l.jsxs(ee,{children:[l.jsx("div",{className:"text-2xl font-bold",children:g.value}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:g.description})]})]},g.title)})}),l.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[l.jsxs(Z,{className:"bg-green-50 border-green-200",children:[l.jsx(de,{children:l.jsx(he,{className:"text-green-700",children:"Active Clients"})}),l.jsxs(ee,{children:[l.jsx("div",{className:"text-3xl font-bold text-green-600",children:u.filter(g=>g.status==="active").length}),l.jsx("p",{className:"text-sm text-green-600",children:"Recent activity within 30 days"})]})]}),l.jsxs(Z,{className:"bg-yellow-50 border-yellow-200",children:[l.jsx(de,{children:l.jsxs(he,{className:"text-yellow-700 flex items-center gap-2",children:[l.jsx(to,{className:"h-4 w-4"}),"At-Risk Clients"]})}),l.jsxs(ee,{children:[l.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:u.filter(g=>g.status==="at-risk").length}),l.jsx("p",{className:"text-sm text-yellow-600",children:"No activity in 30-90 days"})]})]}),l.jsxs(Z,{className:"bg-red-50 border-red-200",children:[l.jsx(de,{children:l.jsx(he,{className:"text-red-700",children:"Inactive Clients"})}),l.jsxs(ee,{children:[l.jsx("div",{className:"text-3xl font-bold text-red-600",children:u.filter(g=>g.status==="inactive").length}),l.jsx("p",{className:"text-sm text-red-600",children:"No activity in 90+ days"})]})]})]}),l.jsxs(Z,{children:[l.jsxs(de,{children:[l.jsx(he,{children:"Client Performance"}),l.jsx(br,{children:"Detailed performance metrics for each client"})]}),l.jsx(ee,{children:u.length>0?l.jsxs("div",{className:"space-y-4",children:[u.slice(0,15).map(g=>l.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[l.jsx("div",{className:`w-3 h-3 rounded-full ${h(g.status)}`}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium truncate",children:g.clientName}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[l.jsxs("span",{children:[g.projects," projects"]}),l.jsxs("span",{children:[g.invoices," invoices"]}),l.jsx("span",{children:f(g.hours)})]})]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"font-medium",children:ue(g.revenue)}),l.jsxs("div",{className:"text-xs text-gray-500",children:["Avg: ",ue(g.avgProjectValue)]})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-sm font-medium",children:[g.healthScore,"%"]}),l.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full bg-blue-500 transition-all ${p(g.healthScore)}`})})]}),l.jsx("span",{className:`text-xs px-2 py-1 rounded capitalize ${g.status==="active"?"bg-green-100 text-green-700":g.status==="at-risk"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:g.status})]})]},g.clientId)),u.length>15&&l.jsx("div",{className:"text-center pt-4 border-t",children:l.jsxs(H,{variant:"outline",size:"sm",children:["View All ",u.length," Clients"]})})]}):l.jsx("div",{className:"text-center py-8 text-gray-500",children:"No client data found for the selected period"})})]})]})}function yot(){const[e,t]=w.useState({from:fk(new Date),to:Ax(new Date)}),[n,r]=w.useState("overview"),i=[{label:"This Month",range:{from:fk(new Date),to:Ax(new Date)}},{label:"Last Month",range:{from:fk(Py(new Date,30)),to:Ax(Py(new Date,30))}},{label:"Last 30 Days",range:{from:Py(new Date,30),to:new Date}},{label:"Last 90 Days",range:{from:Py(new Date,90),to:new Date}},{label:"This Year",range:{from:new Date(new Date().getFullYear(),0,1),to:new Date(new Date().getFullYear(),11,31)}}],s=[{id:"overview",label:"Overview",icon:no},{id:"revenue",label:"Revenue",icon:wn},{id:"time",label:"Time & Productivity",icon:gt},{id:"clients",label:"Client Analytics",icon:Tr}];return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Business Analytics"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive insights and reports for your consulting business"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[l.jsx(She,{className:"h-4 w-4"}),l.jsxs("span",{children:[Cd(e.from,"MMM d")," - ",Cd(e.to,"MMM d, yyyy")]})]})]}),l.jsxs(Z,{children:[l.jsxs(de,{children:[l.jsxs(he,{className:"flex items-center gap-2",children:[l.jsx(Lt,{className:"h-5 w-5"}),"Date Range"]}),l.jsx(br,{children:"Select a date range to analyze your business performance"})]}),l.jsx(ee,{children:l.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(a=>l.jsx(H,{variant:e.from.getTime()===a.range.from.getTime()&&e.to.getTime()===a.range.to.getTime()?"default":"outline",size:"sm",onClick:()=>t(a.range),className:"text-xs",children:a.label},a.label))})})]}),l.jsx("div",{className:"flex space-x-1 rounded-lg bg-gray-100 p-1",children:s.map(a=>{const o=a.icon;return l.jsxs(H,{variant:n===a.id?"default":"ghost",className:"flex-1",onClick:()=>r(a.id),children:[l.jsx(o,{className:"h-4 w-4 mr-2"}),a.label]},a.id)})}),l.jsxs("div",{className:"space-y-6",children:[n==="overview"&&l.jsx(pot,{dateRange:e}),n==="revenue"&&l.jsx(mot,{dateRange:e}),n==="time"&&l.jsx(got,{dateRange:e}),n==="clients"&&l.jsx(vot,{dateRange:e})]})]})}function xot({summary:e,loading:t}){const n=({className:i})=>l.jsx("span",{className:`font-bold ${i}`,children:"SEK"});if(t)return l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(i=>l.jsxs(Z,{className:"animate-pulse",children:[l.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(he,{className:"text-sm font-medium",children:l.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"})}),l.jsx("div",{className:"h-4 w-4 bg-gray-200 rounded"})]}),l.jsxs(ee,{children:[l.jsx("div",{className:"h-8 bg-gray-200 rounded w-24 mb-1"}),l.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]},i))});const r=[{title:"Unbilled Work",value:ue(e.totalUnbilled),description:`${e.itemCount} items pending`,icon:gt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Invoiced",value:ue(e.totalSent),description:"Awaiting payment",icon:Js,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Paid",value:ue(e.totalPaid),description:"Completed revenue",icon:n,color:"text-green-600",bgColor:"bg-green-100"},{title:"Active Clients",value:e.clientCount.toString(),description:"With unbilled work",icon:Tr,color:"text-purple-600",bgColor:"bg-purple-100"}];return l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:r.map(i=>{const s=i.icon;return l.jsxs(Z,{className:"hover:shadow-md transition-shadow",children:[l.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(he,{className:"text-sm font-medium text-gray-600",children:i.title}),l.jsx("div",{className:`p-2 rounded-full ${i.bgColor}`,children:l.jsx(s,{className:`h-4 w-4 ${i.color}`})})]}),l.jsxs(ee,{children:[l.jsx("div",{className:"text-2xl font-bold",children:i.value}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i.description})]})]},i.title)})})}function bot({clients:e,loading:t,onClientClick:n}){if(t)return l.jsxs(Z,{className:"h-full flex flex-col",children:[l.jsx(de,{children:l.jsx(he,{className:"text-lg",children:"Client Overview"})}),l.jsx(ee,{className:"flex-1",children:l.jsx("div",{className:"space-y-4 h-full",children:[1,2,3,4,5].map(i=>l.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg animate-pulse",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-32 mb-2"}),l.jsx("div",{className:"h-3 bg-gray-200 rounded w-20"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-16 mb-1"}),l.jsx("div",{className:"h-3 bg-gray-200 rounded w-12"})]})]},i))})})]});const r=e.slice(0,8);return l.jsxs(Z,{className:"h-full flex flex-col",children:[l.jsxs(de,{className:"flex flex-row items-center justify-between flex-shrink-0",children:[l.jsx(he,{className:"text-lg",children:"Client Overview"}),l.jsx(H,{variant:"ghost",size:"sm",children:l.jsx(xO,{className:"h-4 w-4"})})]}),l.jsxs(ee,{className:"flex-1 flex flex-col",children:[l.jsx("div",{className:"space-y-3 flex-1 overflow-y-auto",children:r.length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500 flex-1 flex flex-col justify-center",children:[l.jsx(eE,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{children:"No client data available"}),l.jsx("p",{className:"text-sm",children:"Add some invoice items to see client overview"})]}):r.map(i=>l.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>n==null?void 0:n(i.client_id),children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("h4",{className:"font-medium truncate",children:i.client_name}),i.company&&l.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:i.company})]}),l.jsxs("div",{className:"flex gap-3 text-sm text-gray-600",children:[l.jsxs("span",{children:[i.itemCount," items"]}),l.jsxs("span",{children:[i.projectCount," projects"]})]})]}),l.jsxs("div",{className:"text-right",children:[i.totalUnbilled>0&&l.jsxs("div",{className:"flex items-center gap-1 text-orange-600 font-medium mb-1",children:[l.jsx("span",{className:"text-xs text-muted-foreground",children:"SEK"}),l.jsx("span",{className:"text-sm",children:ue(i.totalUnbilled)})]}),l.jsxs("div",{className:"text-xs text-gray-500",children:["Total: ",ue(i.totalPaid+i.totalSent+i.totalUnbilled)]})]})]},i.client_id))}),e.length>8&&l.jsx("div",{className:"mt-3 flex-shrink-0",children:l.jsxs(H,{variant:"outline",className:"w-full",size:"sm",children:["View All Clients (",e.length,")"]})})]})]})}function wot({items:e,loading:t,onItemClick:n,clients:r,projects:i}){if(t)return l.jsxs(Z,{className:"h-full flex flex-col",children:[l.jsx(de,{children:l.jsx(he,{className:"text-lg",children:"Recent Items"})}),l.jsx(ee,{className:"flex-1",children:l.jsx("div",{className:"space-y-4 h-full",children:[1,2,3,4,5,6].map(u=>l.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg animate-pulse",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-48 mb-2"}),l.jsx("div",{className:"h-3 bg-gray-200 rounded w-32"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-16 mb-1"}),l.jsx("div",{className:"h-3 bg-gray-200 rounded w-12"})]})]},u))})})]});const s=e.slice(0,10),a=u=>{switch(u){case"draft":return"text-orange-600 bg-orange-100";case"sent":return"text-blue-600 bg-blue-100";case"paid":return"text-green-600 bg-green-100";case"overdue":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},o=u=>{const d=r.find(f=>f.id===u);return(d==null?void 0:d.name)||"Unknown Client"},c=u=>i.find(f=>f.id===u)||{name:"Unknown Project",color:"#9CA3AF"};return l.jsxs(Z,{className:"h-full flex flex-col",children:[l.jsxs(de,{className:"flex flex-row items-center justify-between flex-shrink-0",children:[l.jsx(he,{className:"text-lg",children:"Recent Items"}),l.jsx(H,{variant:"ghost",size:"sm",children:l.jsx(xO,{className:"h-4 w-4"})})]}),l.jsxs(ee,{className:"flex-1 flex flex-col",children:[l.jsx("div",{className:"space-y-3 flex-1 overflow-y-auto",children:s.length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500 flex-1 flex flex-col justify-center",children:[l.jsx(gt,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{children:"No invoice items yet"}),l.jsx("p",{className:"text-sm",children:"Create your first invoice item to track unbilled work"})]}):s.map(u=>{const d=o(u.client_id||""),f=c(u.project_id||"");return l.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>n==null?void 0:n(u.id),children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0 bg-gray-300",style:{backgroundColor:f.color||"#9CA3AF"}}),l.jsx("h4",{className:"font-medium truncate",children:u.description})]}),l.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[l.jsx("span",{children:d}),l.jsx("span",{children:""}),l.jsx("span",{children:f.name}),l.jsx("span",{children:""}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Lt,{className:"h-3 w-3"}),new Date(u.invoice_date).toLocaleDateString()]})]})]}),l.jsxs("div",{className:"text-right flex flex-col items-end gap-1",children:[l.jsxs("div",{className:"flex items-center gap-1 font-medium",children:[l.jsx("span",{className:"text-xs text-muted-foreground",children:"SEK"}),l.jsx("span",{children:ue(u.total_amount)})]}),l.jsx("span",{className:`px-2 py-1 rounded text-xs ${a(u.status)}`,children:u.status})]})]},u.id)})}),e.length>10&&l.jsx("div",{className:"mt-3 flex-shrink-0",children:l.jsxs(H,{variant:"outline",className:"w-full",size:"sm",children:["View All Items (",e.length,")"]})})]})]})}function Eot({onCreateInvoiceItem:e,onCreateFromTime:t,onMarkAsInvoiced:n,onMarkAsPaid:r,onExportToFortnox:i,onExportPlainText:s}){const a=[{title:"New Invoice Item",description:"Create manual invoice item",icon:Xe,onClick:e,color:"text-blue-600 bg-blue-100",disabled:!1},{title:"From Time Entries",description:"Convert time to invoice items",icon:gt,onClick:t,color:"text-green-600 bg-green-100",disabled:!1},{title:"Mark as Invoiced",description:"Update status to invoiced",icon:Js,onClick:n,color:"text-orange-600 bg-orange-100",disabled:!1},{title:"Mark as Paid",description:"Update status to paid",icon:wn,onClick:r,color:"text-green-600 bg-green-100",disabled:!1},{title:"Export to Fortnox",description:"Export to Fortnox API",icon:en,onClick:i,color:"text-purple-600 bg-purple-100",disabled:!1},{title:"Export as Text",description:"Download readable text files",icon:Wo,onClick:s,color:"text-teal-600 bg-teal-100",disabled:!1}];return l.jsxs(Z,{className:"h-full",children:[l.jsx(de,{className:"pb-4",children:l.jsx(he,{className:"text-lg",children:"Quick Actions"})}),l.jsx(ee,{children:l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:a.map(o=>{const c=o.icon;return l.jsxs(H,{variant:"outline",className:`h-auto p-4 flex-col gap-2 min-h-[100px] ${o.disabled?"opacity-50 cursor-not-allowed":"hover:bg-gray-50"}`,onClick:o.disabled?void 0:o.onClick,disabled:o.disabled,"data-testid":o.title==="New Invoice Item"?"new-invoice-btn":void 0,children:[l.jsx("div",{className:`p-3 rounded-full ${o.color} flex-shrink-0`,children:l.jsx(c,{className:"h-5 w-5"})}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"font-medium text-sm leading-tight",children:o.title}),l.jsx("div",{className:"text-xs text-gray-500 mt-1 leading-tight",children:o.description})]})]},o.title)})})})]})}function Sot({items:e,loading:t}){if(t)return l.jsxs(Z,{className:"h-full flex flex-col",children:[l.jsx(de,{children:l.jsx(he,{className:"text-lg",children:"Monthly Revenue"})}),l.jsx(ee,{className:"flex-1",children:l.jsx("div",{className:"w-full h-full bg-gray-100 rounded animate-pulse min-h-[300px]"})})]});const r=(()=>{const a=[],o=new Date;for(let c=5;c>=0;c--){const u=new Date(o.getFullYear(),o.getMonth()-c,1),d=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}`,f=u.toLocaleDateString("en-US",{month:"short"});a.push({month:f,monthKey:d,invoiced:0,paid:0,pending:0})}return e.forEach(c=>{const u=new Date(c.date),d=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}`,f=a.find(h=>h.monthKey===d);if(f)switch(c.status){case"invoiced":f.invoiced+=c.amount;break;case"paid":f.paid+=c.amount;break;case"pending":f.pending+=c.amount;break}}),a})(),i=r.some(a=>a.invoiced>0||a.paid>0||a.pending>0),s=({active:a,payload:o,label:c})=>a&&o&&o.length?l.jsxs("div",{className:"bg-white p-3 border rounded-lg shadow-lg",children:[l.jsx("p",{className:"font-medium",children:c}),o.map((u,d)=>l.jsxs("p",{className:"text-sm",children:[u.name,": ",ue(u.value)]},d))]}):null;return l.jsxs(Z,{className:"h-full flex flex-col",children:[l.jsxs(de,{className:"flex flex-row items-center justify-between flex-shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(cr,{className:"h-5 w-5 text-green-600"}),l.jsx(he,{className:"text-lg",children:"Monthly Revenue"})]}),l.jsx(H,{variant:"ghost",size:"sm",children:l.jsx(xO,{className:"h-4 w-4"})})]}),l.jsx(ee,{className:"flex-1 flex flex-col",children:i?l.jsx("div",{className:"flex-1 min-h-[300px]",children:l.jsx(Bi,{width:"100%",height:"100%",children:l.jsxs(x1,{data:r,margin:{top:20,right:30,left:20,bottom:5},children:[l.jsx(dJ,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),l.jsx(Ca,{dataKey:"month",axisLine:!1,tickLine:!1,fontSize:12}),l.jsx(Ta,{axisLine:!1,tickLine:!1,fontSize:12,tickFormatter:a=>`${a/1e3}k`}),l.jsx(Vs,{content:l.jsx(s,{})}),l.jsx(Qa,{dataKey:"paid",stackId:"a",fill:"#10B981",name:"Paid",radius:[0,0,0,0]}),l.jsx(Qa,{dataKey:"invoiced",stackId:"a",fill:"#3B82F6",name:"Invoiced",radius:[0,0,0,0]}),l.jsx(Qa,{dataKey:"pending",stackId:"a",fill:"#F59E0B",name:"Pending",radius:[4,4,0,0]})]})})}):l.jsx("div",{className:"flex items-center justify-center flex-1 text-gray-500 min-h-[300px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx(cr,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{children:"No revenue data yet"}),l.jsx("p",{className:"text-sm",children:"Data will appear as you add invoice items"})]})})})]})}function Not({open:e,onOpenChange:t}){const{addInvoiceItem:n}=Ss(),{clients:r}=Tn(),{projects:i}=er(),{toast:s}=xo();console.log("Dialog opened, clients:",r,"projects:",i);const[a,o]=w.useState({client_id:"",project_id:"",description:"",quantity:1,rate:0,type:"hourly",invoice_date:new Date().toISOString().split("T")[0],due_date:new Date(Date.now()+20*24*60*60*1e3).toISOString().split("T")[0],status:"draft"}),[c,u]=w.useState("20"),d=(b,S)=>{const E=new Date(b);return E.setDate(E.getDate()+S),E.toISOString().split("T")[0]},f=b=>{if(u(b),b!=="custom"&&a.invoice_date){const S=parseInt(b),E=d(a.invoice_date,S);o(N=>({...N,due_date:E}))}},[h,p]=w.useState(!1),m=r.find(b=>b.id===a.client_id),g=i.filter(b=>b.client_id===a.client_id),v=async b=>{if(b.preventDefault(),!a.client_id||!a.project_id||!a.description){s({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}if(a.invoice_date&&a.due_date){const S=new Date(a.invoice_date),E=new Date(a.due_date);if(S>E){s({title:"Error",description:"Invoice date cannot be after due date",variant:"destructive"});return}}p(!0);try{await n(a),s({title:"Success",description:"Invoice item created successfully"}),t(!1),o({client_id:"",project_id:"",description:"",quantity:1,rate:0,type:"hourly",invoice_date:new Date().toISOString().split("T")[0],due_date:new Date(Date.now()+20*24*60*60*1e3).toISOString().split("T")[0],status:"draft"}),u("20")}catch{s({title:"Error",description:"Failed to create invoice item",variant:"destructive"})}finally{p(!1)}},y=b=>{o(S=>{var E;return{...S,client_id:b,project_id:"",rate:((E=r.find(N=>N.id===b))==null?void 0:E.hourly_rate)||0}})},x=b=>{const S=i.find(E=>E.id===b);o(E=>({...E,project_id:b,rate:(S==null?void 0:S.hourly_rate)||(m==null?void 0:m.hourly_rate)||E.rate||0}))};return l.jsx(xt,{open:e,onOpenChange:t,children:l.jsxs(ft,{className:"sm:max-w-[500px]",children:[l.jsx(ht,{children:l.jsx(pt,{children:"Create Invoice Item"})}),l.jsxs("form",{onSubmit:v,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"client",children:"Client *"}),l.jsxs("select",{id:"client",title:"Select client",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:a.client_id,onChange:b=>y(b.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Select client"}),r.map(b=>l.jsx("option",{value:b.id,children:b.name},b.id))]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"project",children:"Project *"}),l.jsxs("select",{id:"project",title:"Select project",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:a.project_id,onChange:b=>x(b.target.value),disabled:!a.client_id,required:!0,children:[l.jsx("option",{value:"",children:"Select project"}),g.map(b=>l.jsx("option",{value:b.id,children:b.name},b.id))]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"description",children:"Description *"}),l.jsx(ti,{id:"description",value:a.description,onChange:b=>o(S=>({...S,description:b.target.value})),placeholder:"Describe the work performed...",required:!0})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"type",children:"Type"}),l.jsxs("select",{id:"type",title:"Select type",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:a.type,onChange:b=>o(S=>({...S,type:b.target.value})),children:[l.jsx("option",{value:"hourly",children:"Hourly"}),l.jsx("option",{value:"fixed",children:"Fixed Price"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"quantity",children:a.type==="hourly"?"Hours":"Quantity"}),l.jsx(re,{id:"quantity",type:"number",step:"0.25",min:"0",value:a.quantity,onChange:b=>o(S=>({...S,quantity:parseFloat(b.target.value)||0})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"rate",children:a.type==="hourly"?"Rate/Hour":"Total Price"}),l.jsx(re,{id:"rate",type:"number",min:"0",value:a.rate,onChange:b=>o(S=>({...S,rate:parseFloat(b.target.value)||0})),required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"invoice_date",children:"Invoice Date"}),l.jsx(re,{id:"invoice_date",type:"date",value:a.invoice_date,onChange:b=>{const S=b.target.value;if(o(E=>({...E,invoice_date:S})),c!=="custom"){const E=parseInt(c),N=d(S,E);o(_=>({..._,due_date:N}))}},required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"due_date",children:"Due Date"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("select",{title:"Select due date option",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:c,onChange:b=>f(b.target.value),children:[l.jsx("option",{value:"20",children:"20 days"}),l.jsx("option",{value:"30",children:"30 days"}),l.jsx("option",{value:"90",children:"90 days"}),l.jsx("option",{value:"custom",children:"Custom date"})]}),c==="custom"&&l.jsx(re,{id:"due_date",type:"date",value:a.due_date,onChange:b=>o(S=>({...S,due_date:b.target.value})),required:!0}),c!=="custom"&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Due: ",a.due_date&&new Date(a.due_date).toLocaleDateString("sv-SE")]})]})]})]}),a.quantity&&a.rate&&l.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[l.jsx("div",{className:"text-sm text-gray-600",children:"Total Amount:"}),l.jsx("div",{className:"text-lg font-semibold",children:new Intl.NumberFormat("sv-SE",{style:"currency",currency:"SEK"}).format((a.quantity||0)*(a.rate||0))})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx(H,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),l.jsx(H,{type:"submit",disabled:h,children:h?"Creating...":"Create Invoice Item"})]})]})]})})}function _ot({open:e,onOpenChange:t}){const{createInvoiceFromTimeEntries:n}=Ss(),{clients:r}=Tn(),{projects:i}=er(),{entries:s}=li(),{toast:a}=xo(),[o,c]=w.useState([]),[u,d]=w.useState(""),[f,h]=w.useState(""),[p,m]=w.useState(!1),g=s,v=g.reduce((_,k)=>{const T=i.find(D=>D.id===k.project_id),A=r.find(D=>D.id===(T==null?void 0:T.client_id));if(!T||!A)return _;const j=`${A.id}-${T.id}`;return _[j]||(_[j]={client:A,project:T,entries:[]}),_[j].entries.push(k),_},{}),y=g.filter(_=>o.includes(_.id)),x=y.reduce((_,k)=>_+k.hours,0),b=y.reduce((_,k)=>{const T=i.find(D=>D.id===k.project_id),A=r.find(D=>D.id===(T==null?void 0:T.client_id)),j=(T==null?void 0:T.hourly_rate)||(A==null?void 0:A.hourly_rate)||0;return _+k.hours*j},0),S=async _=>{if(_.preventDefault(),o.length===0||!u){a({title:"Error",description:"Please select time entries and a client",variant:"destructive"});return}m(!0);try{await n(o,u,f||`Time entries - ${x} hours`),a({title:"Success",description:"Invoice item created from time entries"}),t(!1),c([]),d(""),h("")}catch{a({title:"Error",description:"Failed to create invoice item",variant:"destructive"})}finally{m(!1)}},E=_=>{c(k=>k.includes(_)?k.filter(T=>T!==_):[...k,_])},N=_=>{const k=_.map(A=>A.id),T=k.every(A=>o.includes(A));c(T?A=>A.filter(j=>!k.includes(j)):A=>[...new Set([...A,...k])])};return w.useEffect(()=>{if(y.length>0){const _=y[0],k=i.find(T=>T.id===_.project_id);k!=null&&k.client_id&&!u&&d(k.client_id)}},[y,i,u]),l.jsx(xt,{open:e,onOpenChange:t,children:l.jsxs(ft,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[l.jsx(ht,{children:l.jsx(pt,{children:"Convert Time Entries to Invoice Item"})}),l.jsxs("form",{onSubmit:S,className:"space-y-4",children:[Object.keys(v).length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx("p",{children:"No unbilled time entries found"}),l.jsx("p",{className:"text-sm",children:"All your time entries have been converted to invoice items"})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx(X,{children:"Select Time Entries to Convert:"}),Object.values(v).map(({client:_,project:k,entries:T})=>{const A=T.reduce((M,L)=>M+L.hours,0),j=T.map(M=>M.id),D=j.every(M=>o.includes(M)),I=j.some(M=>o.includes(M));return l.jsxs("div",{className:"border rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsxs("h4",{className:"font-medium",children:[_.name," - ",k.name]}),l.jsxs("p",{className:"text-sm text-gray-600",children:[A," hours total"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",title:"Select all entries for this project",checked:D,ref:M=>{M&&(M.indeterminate=I&&!D)},onChange:()=>N(T),className:"h-4 w-4"}),l.jsx(H,{type:"button",variant:"outline",size:"sm",onClick:()=>N(T),children:D?"Deselect All":"Select All"})]})]}),l.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:T.map(M=>l.jsx("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded text-sm",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",title:`Select time entry for ${new Date(M.date).toLocaleDateString()}`,checked:o.includes(M.id),onChange:()=>E(M.id),className:"h-4 w-4"}),l.jsx("span",{children:new Date(M.date).toLocaleDateString()}),l.jsxs("span",{children:[M.hours,"h"]}),M.comment&&l.jsxs("span",{className:"text-gray-600 truncate max-w-32",children:["- ",M.comment]})]})},M.id))})]},`${_.id}-${k.id}`)})]}),o.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"client",children:"Client"}),l.jsxs("select",{id:"client",title:"Select client",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:u,onChange:_=>d(_.target.value),required:!0,children:[l.jsx("option",{value:"",children:"Select client"}),r.map(_=>l.jsx("option",{value:_.id,children:_.name},_.id))]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"description",children:"Description (Optional)"}),l.jsx(ti,{id:"description",value:f,onChange:_=>h(_.target.value),placeholder:`Time entries - ${x} hours`})]}),l.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[l.jsx("div",{className:"text-sm text-blue-700",children:l.jsx("strong",{children:"Summary:"})}),l.jsxs("div",{className:"text-sm text-blue-600",children:[o.length," entries  ",x," hours  ",ue(b)]})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx(H,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),o.length>0&&l.jsx(H,{type:"submit",disabled:p,children:p?"Creating...":"Create Invoice Item"})]})]})]})})}const na=w.forwardRef(({className:e,checked:t,onCheckedChange:n,disabled:r,id:i,...s},a)=>l.jsxs("div",{className:"relative inline-flex items-center",children:[l.jsx("input",{ref:a,type:"checkbox",id:i,checked:t,onChange:o=>n==null?void 0:n(o.target.checked),disabled:r,className:"sr-only",...s}),l.jsx("div",{className:Re("h-4 w-4 shrink-0 rounded-sm border border-gray-300 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer",t&&"bg-blue-600 text-white border-blue-600",r&&"cursor-not-allowed opacity-50",e),onClick:()=>!r&&(n==null?void 0:n(!t)),children:t&&l.jsx(mb,{className:"h-3 w-3 text-white"})})]}));na.displayName="Checkbox";class kot{constructor(){Ns(this,"config",null)}configure(t){this.config={...t,baseUrl:t.baseUrl||"https://api.fortnox.se/3"}}async makeRequest(t,n="GET",r){if(!this.config)throw new Error("Fortnox service not configured. Please set API credentials.");const i=`${this.config.baseUrl}${t}`,s={"Access-Token":this.config.accessToken,"Client-Secret":this.config.clientSecret,"Content-Type":"application/json",Accept:"application/json"};try{const a=await fetch(i,{method:n,headers:s,body:r?JSON.stringify(r):void 0});if(!a.ok){const o=await a.text();throw new Error(`Fortnox API error (${a.status}): ${o}`)}return await a.json()}catch(a){throw console.error("Fortnox API request failed:",a),a}}async testConnection(){try{return await this.makeRequest("/companyinformation"),!0}catch(t){return console.error("Fortnox connection test failed:",t),!1}}async getCustomers(){try{return(await this.makeRequest("/customers")).Customers||[]}catch(t){return console.error("Failed to fetch Fortnox customers:",t),[]}}async createCustomer(t){try{return(await this.makeRequest("/customers","POST",{Customer:t})).Customer||null}catch(n){return console.error("Failed to create Fortnox customer:",n),null}}async findOrCreateCustomer(t,n,r){try{const s=(await this.getCustomers()).find(c=>c.Name===t||c.Name===r);if(s&&s.CustomerNumber)return s.CustomerNumber;const a={Name:r||t,Email:n},o=await this.createCustomer(a);return(o==null?void 0:o.CustomerNumber)||null}catch(i){return console.error("Failed to find or create customer:",i),null}}async createInvoice(t){try{const n=await this.makeRequest("/invoices","POST",{Invoice:t});return n.Invoice?{success:!0,invoiceNumber:n.Invoice.InvoiceNumber,documentNumber:n.Invoice.DocumentNumber}:{success:!1,error:"No invoice data returned from Fortnox"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}convertInvoiceItemsToFortnox(t,n,r){const i=t.map(o=>({Description:o.description,Price:o.hourly_rate||o.fixed_amount||0,Quantity:o.hours||1,Unit:o.hours?"h":"st",VAT:25})),s=new Date().toISOString().split("T")[0],a=new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0];return{CustomerNumber:n,InvoiceDate:s,DueDate:a,Currency:"SEK",Language:"SV",InvoiceRows:i,Remarks:`Exported from consultant time tracker - ${t.length} items for ${r}`}}async exportInvoiceItems(t,n,r,i){try{if(!this.config)return{success:!1,error:"Fortnox service not configured"};if(t.length===0)return{success:!1,error:"No invoice items to export"};const s=await this.findOrCreateCustomer(n,r,i);if(!s)return{success:!1,error:"Failed to find or create customer in Fortnox"};const a=this.convertInvoiceItemsToFortnox(t,s,n);return await this.createInvoice(a)}catch(s){return{success:!1,error:s instanceof Error?s.message:"Export failed"}}}generatePlainTextInvoice(t,n,r,i,s){if(t.length===0)return"No items to export";const a=new Date().toLocaleDateString("sv-SE"),o=new Date(Date.now()+30*24*60*60*1e3).toLocaleDateString("sv-SE"),c=t.reduce((m,g)=>m+g.total_amount,0),d=c*.25,f=c+d,h=m=>new Intl.NumberFormat("sv-SE",{style:"currency",currency:"SEK",minimumFractionDigits:2}).format(m);let p="";return p+="=".repeat(60)+`
`,p+=`                         FAKTURA
`,p+="=".repeat(60)+`

`,p+=`Fakturanummer: ${s||"XXXX"}
`,p+=`Fakturadatum: ${a}
`,p+=`Frfallodatum: ${o}
`,p+=`Valuta: SEK

`,p+=`KUND:
`,p+="-".repeat(20)+`
`,i&&(p+=`Fretag: ${i}
`),p+=`Namn: ${n}
`,r&&(p+=`E-post: ${r}
`),p+=`
`,p+=`FAKTURARADER:
`,p+="-".repeat(60)+`
`,p+=`${"Beskrivning".padEnd(30)} ${"Tim/Ant".padStart(8)} ${"Pris".padStart(10)} ${"Summa".padStart(10)}
`,p+="-".repeat(60)+`
`,t.forEach(m=>{const g=m.description.length>28?m.description.substring(0,25)+"...":m.description;let v,y;m.hours&&m.hourly_rate?(v=m.hours.toFixed(2),y=h(m.hourly_rate)):(v="1.00",y=h(m.fixed_amount||0));const x=h(m.total_amount);p+=`${g.padEnd(30)} ${v.padStart(8)} ${y.padStart(10)} ${x.padStart(10)}
`}),p+="-".repeat(60)+`
`,p+=`
SUMMERING:
`,p+="-".repeat(30)+`
`,p+=`Summa exkl. moms: ${h(c).padStart(15)}
`,p+=`Moms (25%): ${h(d).padStart(21)}
`,p+=`TOTALT: ${h(f).padStart(23)}

`,p+=`BETALNINGSINFORMATION:
`,p+="-".repeat(30)+`
`,p+=`Betalningsvillkor: 30 dagar
`,p+=`Drjsmlsrnta: 2% per mnad

`,t.some(m=>m.description.length>28||m.notes)&&(p+=`DETALJERADE BESKRIVNINGAR:
`,p+="-".repeat(40)+`
`,t.forEach((m,g)=>{p+=`${g+1}. ${m.description}
`,m.notes&&(p+=`   Anteckningar: ${m.notes}
`),m.hours&&m.hourly_rate&&(p+=`   ${m.hours} timmar  ${h(m.hourly_rate)}
`),p+=`
`})),p+="Exporterad frn Konsult Tid System - "+new Date().toLocaleString("sv-SE")+`
`,p+="=".repeat(60),p}downloadPlainTextInvoice(t,n,r,i,s){const a=this.generatePlainTextInvoice(t,n,r,i,s),o=new Blob([a],{type:"text/plain;charset=utf-8"}),c=URL.createObjectURL(o),u=document.createElement("a");u.href=c,u.download=`faktura_${n.replace(/[^a-zA-Z0-9]/g,"_")}_${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(c)}}const ud=new kot;function oj(e){return!!(e.accessToken&&e.clientSecret)}function Uae(){try{const e=localStorage.getItem("fortnox_config");if(!e)return null;const t=JSON.parse(e);return oj(t)?t:null}catch{return null}}function G7(e){localStorage.setItem("fortnox_config",JSON.stringify(e))}function Cot(){localStorage.removeItem("fortnox_config")}function zae({open:e,onOpenChange:t,onConfigured:n}){const[r,i]=w.useState({accessToken:"",clientSecret:""}),[s,a]=w.useState(!1),[o,c]=w.useState("idle"),[u,d]=w.useState(""),[f,h]=w.useState(!1);w.useEffect(()=>{if(e){const b=Uae();b?(i(b),h(!0),c("success")):(i({accessToken:"",clientSecret:""}),h(!1),c("idle"))}},[e]);const p=(b,S)=>{i(E=>({...E,[b]:S})),c("idle"),d("")},m=async()=>{if(!oj(r)){d("Please provide both Access Token and Client Secret"),c("error");return}a(!0),d("");try{ud.configure(r),await ud.testConnection()?(c("success"),G7(r),h(!0)):(c("error"),d("Failed to connect to Fortnox. Please check your credentials."))}catch(b){c("error"),d(b instanceof Error?b.message:"Connection test failed")}finally{a(!1)}},g=()=>{o==="success"&&oj(r)&&(G7(r),n==null||n(),t(!1))},v=()=>{Cot(),i({accessToken:"",clientSecret:""}),h(!1),c("idle"),d("")},y=()=>{switch(o){case"success":return l.jsx(Er,{className:"h-4 w-4 text-green-600"});case"error":return l.jsx(L0,{className:"h-4 w-4 text-red-600"});default:return l.jsx(Zs,{className:"h-4 w-4 text-gray-400"})}},x=()=>{switch(o){case"success":return"Connected successfully";case"error":return"Connection failed";default:return"Not configured"}};return l.jsx(xt,{open:e,onOpenChange:t,children:l.jsxs(ft,{className:"sm:max-w-md",children:[l.jsxs(ht,{children:[l.jsx(pt,{children:"Fortnox Integration"}),l.jsx(iu,{children:"Configure your Fortnox API credentials to export invoice items directly to Fortnox."})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs(Z,{children:[l.jsx(de,{className:"pb-3",children:l.jsxs(he,{className:"text-sm flex items-center gap-2",children:[y(),"Connection Status: ",x()]})}),o==="success"&&l.jsx(ee,{className:"pt-0",children:l.jsx("p",{className:"text-sm text-green-600",children:"Your Fortnox integration is ready to use."})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"accessToken",children:"Access Token"}),l.jsx(re,{id:"accessToken",type:"password",placeholder:"Enter your Fortnox Access Token",value:r.accessToken||"",onChange:b=>p("accessToken",b.target.value)})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"clientSecret",children:"Client Secret"}),l.jsx(re,{id:"clientSecret",type:"password",placeholder:"Enter your Fortnox Client Secret",value:r.clientSecret||"",onChange:b=>p("clientSecret",b.target.value)})]}),l.jsx($c,{children:l.jsx(Uc,{className:"text-sm",children:l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{children:"To get your Fortnox API credentials:"}),l.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-xs",children:[l.jsx("li",{children:"Log in to your Fortnox account"}),l.jsx("li",{children:"Go to Settings  Integrations  API"}),l.jsx("li",{children:"Create a new integration or use existing one"}),l.jsx("li",{children:"Copy the Access Token and Client Secret"})]}),l.jsxs("a",{href:"https://developer.fortnox.se/general/authentication/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 text-xs",children:["Learn more ",l.jsx(Che,{className:"h-3 w-3"})]})]})})}),u&&l.jsx($c,{variant:"destructive",children:l.jsx(Uc,{children:u})}),l.jsx(H,{onClick:m,disabled:s||!r.accessToken||!r.clientSecret,className:"w-full",variant:"outline",children:s?l.jsxs(l.Fragment,{children:[l.jsx(qo,{className:"h-4 w-4 mr-2 animate-spin"}),"Testing Connection..."]}):"Test Connection"})]})]}),l.jsxs(gp,{className:"flex gap-2",children:[f&&l.jsx(H,{variant:"outline",onClick:v,className:"mr-auto",children:"Clear Config"}),l.jsx(H,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),l.jsx(H,{onClick:g,disabled:o!=="success",children:"Save Configuration"})]})]})})}function Tot({open:e,onOpenChange:t}){const{invoiceItems:n,markAsInvoiced:r}=Ss(),{clients:i}=Tn(),{projects:s}=er(),[a,o]=w.useState(!1),[c,u]=w.useState(new Set),[d,f]=w.useState(!0),[h,p]=w.useState(!1),[m,g]=w.useState([]),[v,y]=w.useState(!1),x=n.filter(D=>D.status==="draft");w.useEffect(()=>{if(e){const D=Uae();y(!!D),D&&ud.configure(D),u(new Set),g([])}},[e]);const b=D=>{u(I=>{const M=new Set(I);return M.has(D)?M.delete(D):M.add(D),M})},S=()=>{c.size===x.length?u(new Set):u(new Set(x.map(D=>D.id)))},E=D=>{const I=i.find(M=>M.id===D);return(I==null?void 0:I.name)||"Unknown Client"},N=D=>i.find(I=>I.id===D),_=D=>{const I=s.find(M=>M.id===D);return(I==null?void 0:I.name)||"Unknown Project"},k=D=>{const I=new Map;return D.forEach(M=>{const L=M.client_id||"no-client";I.has(L)||I.set(L,[]),I.get(L).push(M)}),I},T=async()=>{var D;if(!v){o(!0);return}if(c.size!==0){p(!0),g([]);try{const I=x.filter(B=>c.has(B.id)),M=[];if(d){const B=k(I);for(const[R,F]of B){const O=N(R),Q=(O==null?void 0:O.name)||"Unknown Client",Y=await ud.exportInvoiceItems(F,Q,(O==null?void 0:O.email)||void 0,(O==null?void 0:O.company)||void 0);M.push({...Y,clientName:Q,itemCount:F.length,items:F.map($=>$.id)})}}else{const B=N(((D=I[0])==null?void 0:D.client_id)||""),R=(B==null?void 0:B.name)||"Mixed Clients",F=await ud.exportInvoiceItems(I,R,(B==null?void 0:B.email)||void 0,(B==null?void 0:B.company)||void 0);M.push({...F,clientName:R,itemCount:I.length,items:I.map(O=>O.id)})}g(M);const P=M.filter(B=>B.success).flatMap(B=>B.items||[]);P.length>0&&await r(P)}catch(I){console.error("Export failed:",I),g([{success:!1,error:I instanceof Error?I.message:"Export failed"}])}finally{p(!1)}}},A=x.filter(D=>c.has(D.id)).reduce((D,I)=>D+I.total_amount,0),j=k(x.filter(D=>c.has(D.id)));return l.jsxs(l.Fragment,{children:[l.jsx(xt,{open:e,onOpenChange:t,children:l.jsxs(ft,{className:"sm:max-w-2xl max-h-[80vh] overflow-y-auto",children:[l.jsxs(ht,{children:[l.jsxs(pt,{className:"flex items-center gap-2",children:[l.jsx(en,{className:"h-5 w-5"}),"Export to Fortnox"]}),l.jsx(iu,{children:"Export invoice items to Fortnox as invoices. Only draft items can be exported."})]}),l.jsxs("div",{className:"space-y-4",children:[!v&&l.jsx($c,{variant:"destructive",children:l.jsx(Uc,{children:"Fortnox integration is not configured. Please configure your API credentials first."})}),l.jsxs(Z,{children:[l.jsx(de,{className:"pb-3",children:l.jsx(he,{className:"text-sm",children:"Export Options"})}),l.jsx(ee,{className:"space-y-3",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(na,{id:"groupByClient",checked:d,onCheckedChange:f}),l.jsx("label",{htmlFor:"groupByClient",className:"text-sm",children:"Create separate invoices for each client"})]})})]}),l.jsxs(Z,{children:[l.jsx(de,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(he,{className:"text-sm",children:["Select Items (",x.length," available)"]}),l.jsx(H,{variant:"outline",size:"sm",onClick:S,children:c.size===x.length?"Deselect All":"Select All"})]})}),l.jsx(ee,{children:l.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:x.length===0?l.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No draft items available for export"}):x.map(D=>l.jsxs("div",{className:"flex items-center space-x-3 p-2 border rounded",children:[l.jsx(na,{checked:c.has(D.id),onCheckedChange:()=>b(D.id)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-medium truncate",children:D.description}),l.jsxs("div",{className:"text-xs text-gray-500",children:[E(D.client_id||""),"  ",_(D.project_id||"")]})]}),l.jsx("div",{className:"text-sm font-medium",children:ue(D.total_amount)})]},D.id))})})]}),c.size>0&&l.jsxs(Z,{children:[l.jsx(de,{className:"pb-3",children:l.jsx(he,{className:"text-sm",children:"Export Summary"})}),l.jsx(ee,{children:l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:"Selected items:"}),l.jsx("span",{children:c.size})]}),l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:"Total amount:"}),l.jsx("span",{className:"font-medium",children:ue(A)})]}),d&&l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:"Invoices to create:"}),l.jsx("span",{children:j.size})]})]})})]}),m.length>0&&l.jsxs(Z,{children:[l.jsx(de,{className:"pb-3",children:l.jsx(he,{className:"text-sm",children:"Export Results"})}),l.jsx(ee,{children:l.jsx("div",{className:"space-y-2",children:m.map((D,I)=>l.jsxs("div",{className:`flex items-center gap-2 p-2 rounded text-sm ${D.success?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[D.success?l.jsx(Er,{className:"h-4 w-4"}):l.jsx(L0,{className:"h-4 w-4"}),l.jsx("div",{className:"flex-1",children:D.success?l.jsxs(l.Fragment,{children:[l.jsx("div",{children:"Invoice created successfully"}),D.invoiceNumber&&l.jsxs("div",{className:"text-xs",children:["Invoice #: ",D.invoiceNumber]})]}):l.jsxs("div",{children:["Failed: ",D.error]})})]},I))})})]})]}),l.jsxs(gp,{className:"flex gap-2",children:[!v&&l.jsxs(H,{variant:"outline",onClick:()=>o(!0),className:"mr-auto",children:[l.jsx(Zs,{className:"h-4 w-4 mr-2"}),"Configure Fortnox"]}),l.jsx(H,{variant:"outline",onClick:()=>t(!1),children:"Close"}),l.jsx(H,{onClick:T,disabled:!v||c.size===0||h,children:h?l.jsxs(l.Fragment,{children:[l.jsx(qo,{className:"h-4 w-4 mr-2 animate-spin"}),"Exporting..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Wo,{className:"h-4 w-4 mr-2"}),"Export to Fortnox"]})})]})]})}),l.jsx(zae,{open:a,onOpenChange:o,onConfigured:()=>{y(!0),o(!1)}})]})}function Aot({open:e,onOpenChange:t}){const{invoiceItems:n,markAsInvoiced:r}=Ss(),{clients:i}=Tn(),{projects:s}=er(),[a,o]=w.useState(new Set),[c,u]=w.useState(!0),[d,f]=w.useState(""),[h,p]=w.useState(!1),m=n.filter(k=>k.status==="draft");w.useEffect(()=>{e&&(o(new Set),f(""),p(!1))},[e]);const g=k=>{o(T=>{const A=new Set(T);return A.has(k)?A.delete(k):A.add(k),A})},v=()=>{a.size===m.length?o(new Set):o(new Set(m.map(k=>k.id)))},y=k=>{const T=i.find(A=>A.id===k);return(T==null?void 0:T.name)||"Unknown Client"},x=k=>i.find(T=>T.id===k),b=k=>{const T=s.find(A=>A.id===k);return(T==null?void 0:T.name)||"Unknown Project"},S=k=>{const T=new Map;return k.forEach(A=>{const j=A.client_id||"no-client";T.has(j)||T.set(j,[]),T.get(j).push(A)}),T},E=async()=>{var T;if(a.size===0)return;const k=m.filter(A=>a.has(A.id));if(c)S(k).forEach((j,D)=>{const I=x(D),M=(I==null?void 0:I.name)||"Unknown Client";ud.downloadPlainTextInvoice(j,M,(I==null?void 0:I.email)||void 0,(I==null?void 0:I.company)||void 0,d||void 0)});else{const A=x(((T=k[0])==null?void 0:T.client_id)||""),j=(A==null?void 0:A.name)||"Mixed Clients";ud.downloadPlainTextInvoice(k,j,(A==null?void 0:A.email)||void 0,(A==null?void 0:A.company)||void 0,d||void 0)}await r(k.map(A=>A.id)),p(!0)},N=m.filter(k=>a.has(k.id)).reduce((k,T)=>k+T.total_amount,0),_=S(m.filter(k=>a.has(k.id)));return l.jsx(xt,{open:e,onOpenChange:t,children:l.jsxs(ft,{className:"sm:max-w-2xl max-h-[80vh] overflow-y-auto",children:[l.jsxs(ht,{children:[l.jsxs(pt,{className:"flex items-center gap-2",children:[l.jsx(en,{className:"h-5 w-5"}),"Export as Plain Text"]}),l.jsx(iu,{children:"Export invoice items as readable text files for manual invoice creation. Only draft items can be exported."})]}),h?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(Er,{className:"h-12 w-12 mx-auto text-green-600 mb-4"}),l.jsx("h3",{className:"text-lg font-semibold text-green-700 mb-2",children:"Export Successful!"}),l.jsxs("p",{className:"text-gray-600",children:["Your invoice",_.size>1?"s have":" has"," been downloaded as text file",_.size>1?"s":"","."]})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs(Z,{children:[l.jsx(de,{className:"pb-3",children:l.jsx(he,{className:"text-sm",children:"Export Options"})}),l.jsxs(ee,{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(na,{id:"groupByClient",checked:c,onCheckedChange:u}),l.jsx("label",{htmlFor:"groupByClient",className:"text-sm",children:"Create separate files for each client"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"invoiceNumber",className:"text-sm",children:"Invoice Number (optional)"}),l.jsx(re,{id:"invoiceNumber",placeholder:"e.g., INV-2025-001",value:d,onChange:k=>f(k.target.value)}),l.jsx("p",{className:"text-xs text-gray-500",children:"Leave empty to use placeholder (XXXX) in the exported file"})]})]})]}),l.jsxs(Z,{children:[l.jsx(de,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(he,{className:"text-sm",children:["Select Items (",m.length," available)"]}),l.jsx(H,{variant:"outline",size:"sm",onClick:v,children:a.size===m.length?"Deselect All":"Select All"})]})}),l.jsx(ee,{children:l.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:m.length===0?l.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No draft items available for export"}):m.map(k=>l.jsxs("div",{className:"flex items-center space-x-3 p-2 border rounded",children:[l.jsx(na,{checked:a.has(k.id),onCheckedChange:()=>g(k.id)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-medium truncate",children:k.description}),l.jsxs("div",{className:"text-xs text-gray-500",children:[y(k.client_id||""),"  ",b(k.project_id||"")]})]}),l.jsx("div",{className:"text-sm font-medium",children:ue(k.total_amount)})]},k.id))})})]}),a.size>0&&l.jsxs(Z,{children:[l.jsx(de,{className:"pb-3",children:l.jsx(he,{className:"text-sm",children:"Export Summary"})}),l.jsx(ee,{children:l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:"Selected items:"}),l.jsx("span",{children:a.size})]}),l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:"Total amount:"}),l.jsx("span",{className:"font-medium",children:ue(N)})]}),c&&l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:"Files to create:"}),l.jsx("span",{children:_.size})]})]})})]})]}),l.jsxs(gp,{className:"flex gap-2",children:[l.jsx(H,{variant:"outline",onClick:()=>t(!1),children:h?"Close":"Cancel"}),!h&&l.jsxs(H,{onClick:E,disabled:a.size===0,children:[l.jsx(Wo,{className:"h-4 w-4 mr-2"}),"Export Text Files"]})]})]})})}function jot({open:e,onOpenChange:t,clientId:n}){const{invoiceItems:r,updateInvoiceItem:i,deleteInvoiceItem:s}=Ss(),{clients:a}=Tn(),{projects:o}=er(),{toast:c}=xo(),[u,d]=w.useState(null),[f,h]=w.useState({}),[p,m]=w.useState("20"),[g,v]=w.useState("invoice_date"),y=(P,B)=>{const R=new Date(P);return R.setDate(R.getDate()+B),R.toISOString().split("T")[0]},x=(P,B)=>{const R=new Date(P),O=new Date(B).getTime()-R.getTime(),Q=Math.ceil(O/(1e3*60*60*24));return Q===20?"20":Q===30?"30":Q===90?"90":"custom"},b=P=>{if(m(P),P!=="custom"&&f.invoice_date){const B=parseInt(P),R=y(f.invoice_date,B);h(F=>({...F,due_date:R}))}},S=P=>[...P].sort((B,R)=>{switch(g){case"invoice_date":{const F=new Date(B.invoice_date).getTime(),O=new Date(R.invoice_date).getTime();return F-O}case"created_at":{const F=new Date(B.created_at).getTime();return new Date(R.created_at).getTime()-F}case"total_amount":return R.total_amount-B.total_amount;case"status":{const F={draft:1,sent:2,overdue:3,paid:4},O=F[B.status]||5,Q=F[R.status]||5;return O-Q}case"description":return B.description.toLowerCase().localeCompare(R.description.toLowerCase());default:{const F=new Date(B.invoice_date).getTime(),O=new Date(R.invoice_date).getTime();return F-O}}}),E=a.find(P=>P.id===n),N=r.filter(P=>P.client_id===n),_=o.filter(P=>P.client_id===n);w.useEffect(()=>{e||(d(null),h({}))},[e]);const k=P=>{d(P.id);const B={id:P.id,description:P.description,client_id:P.client_id||void 0,project_id:P.project_id||void 0,quantity:M4(P),rate:$pe(P),type:Upe(P),invoice_date:P.invoice_date,due_date:P.due_date||void 0,status:P.status,notes:P.notes||void 0};if(h(B),P.invoice_date&&P.due_date){const R=x(P.invoice_date,P.due_date);m(R)}else m("20")},T=()=>{d(null),h({})},A=async()=>{if(!(!u||!f.id)){if(f.invoice_date&&f.due_date){const P=new Date(f.invoice_date),B=new Date(f.due_date);if(P>B){c({title:"Error",description:"Invoice date cannot be after due date",variant:"destructive"});return}}try{await i(f),c({title:"Success",description:"Invoice item updated successfully"}),d(null),h({})}catch{c({title:"Error",description:"Failed to update invoice item",variant:"destructive"})}}},j=async P=>{if(confirm("Are you sure you want to delete this invoice item?"))try{await s(P),c({title:"Success",description:"Invoice item deleted successfully"})}catch{c({title:"Error",description:"Failed to delete invoice item",variant:"destructive"})}},D=P=>{switch(P){case"draft":return"secondary";case"sent":return"outline";case"paid":return"default";case"overdue":return"destructive";default:return"secondary"}},I=P=>{switch(P){case"draft":return"text-gray-600";case"sent":return"text-blue-600";case"paid":return"text-green-600";case"overdue":return"text-red-600";default:return"text-gray-600"}},L=N.reduce((P,B)=>{switch(P.totalItems++,P.totalAmount+=B.total_amount,B.status){case"draft":P.draftAmount+=B.total_amount,P.draftCount++;break;case"sent":P.sentAmount+=B.total_amount,P.sentCount++;break;case"paid":P.paidAmount+=B.total_amount,P.paidCount++;break;case"overdue":P.overdueAmount+=B.total_amount,P.overdueCount++;break}return P},{totalItems:0,totalAmount:0,draftAmount:0,draftCount:0,sentAmount:0,sentCount:0,paidAmount:0,paidCount:0,overdueAmount:0,overdueCount:0});return E?l.jsx(xt,{open:e,onOpenChange:t,children:l.jsxs(ft,{className:"max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[l.jsx(ht,{className:"flex-shrink-0",children:l.jsxs(pt,{className:"flex items-center gap-3",children:[l.jsx(eE,{className:"h-5 w-5"}),E.name,E.company&&l.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",E.company,")"]})]})}),l.jsxs("div",{className:"flex-1 overflow-y-auto space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsx(Z,{children:l.jsxs(ee,{className:"p-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(en,{className:"h-4 w-4 text-muted-foreground"}),l.jsx("span",{className:"text-sm font-medium",children:"Total Items"})]}),l.jsx("div",{className:"text-2xl font-bold",children:L.totalItems}),l.jsx("div",{className:"text-sm text-muted-foreground",children:ue(L.totalAmount)})]})}),l.jsx(Z,{children:l.jsxs(ee,{className:"p-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Pg,{className:"h-4 w-4 text-gray-600"}),l.jsx("span",{className:"text-sm font-medium",children:"Draft"})]}),l.jsx("div",{className:"text-2xl font-bold text-gray-600",children:L.draftCount}),l.jsx("div",{className:"text-sm text-muted-foreground",children:ue(L.draftAmount)})]})}),l.jsx(Z,{children:l.jsxs(ee,{className:"p-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(gt,{className:"h-4 w-4 text-blue-600"}),l.jsx("span",{className:"text-sm font-medium",children:"Sent"})]}),l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:L.sentCount}),l.jsx("div",{className:"text-sm text-muted-foreground",children:ue(L.sentAmount)})]})}),l.jsx(Z,{children:l.jsxs(ee,{className:"p-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(wn,{className:"h-4 w-4 text-green-600"}),l.jsx("span",{className:"text-sm font-medium",children:"Paid"})]}),l.jsx("div",{className:"text-2xl font-bold text-green-600",children:L.paidCount}),l.jsx("div",{className:"text-sm text-muted-foreground",children:ue(L.paidAmount)})]})})]}),l.jsxs(Z,{children:[l.jsx(de,{children:l.jsxs(he,{className:"flex items-center justify-between",children:[l.jsx("span",{children:"Invoice Items"}),l.jsxs(Ot,{variant:"outline",children:[N.length," items"]})]})}),l.jsx(ee,{children:N.length===0?l.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[l.jsx(en,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{children:"No invoice items found for this client"}),l.jsx("p",{className:"text-sm",children:"Create some invoice items to see them here"})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex items-center gap-4 mb-4 pb-4 border-b",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(X,{htmlFor:"sort-by",className:"text-sm font-medium",children:"Sort by:"}),l.jsxs("select",{id:"sort-by",title:"Sort items by",className:"flex h-9 w-auto rounded-md border border-input bg-background px-3 py-1 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:g,onChange:P=>v(P.target.value),children:[l.jsx("option",{value:"invoice_date",children:"Invoice Date"}),l.jsx("option",{value:"created_at",children:"Created Date"}),l.jsx("option",{value:"total_amount",children:"Amount"}),l.jsx("option",{value:"status",children:"Status"}),l.jsx("option",{value:"description",children:"Description"})]})]})}),l.jsx("div",{className:"space-y-4",children:S(N).map(P=>{var B;return l.jsx("div",{className:"border rounded-lg p-4 space-y-3",children:u===P.id?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(X,{htmlFor:`desc-${P.id}`,children:"Description"}),l.jsx(ti,{id:`desc-${P.id}`,value:f.description||"",onChange:R=>h(F=>({...F,description:R.target.value})),rows:2})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:`project-${P.id}`,children:"Project"}),l.jsxs(gn,{value:f.project_id||"",onValueChange:R=>h(F=>({...F,project_id:R})),children:[l.jsx(ln,{children:l.jsx(vn,{placeholder:"Select project"})}),l.jsx(cn,{children:_.map(R=>l.jsx(Ve,{value:R.id,children:R.name},R.id))})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{children:[l.jsx(X,{htmlFor:`type-${P.id}`,children:"Type"}),l.jsxs(gn,{value:f.type||"hourly",onValueChange:R=>h(F=>({...F,type:R})),children:[l.jsx(ln,{children:l.jsx(vn,{})}),l.jsxs(cn,{children:[l.jsx(Ve,{value:"hourly",children:"Hourly"}),l.jsx(Ve,{value:"fixed",children:"Fixed"})]})]})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:`quantity-${P.id}`,children:f.type==="hourly"?"Hours":"Quantity"}),l.jsx(re,{id:`quantity-${P.id}`,type:"number",step:"0.25",min:"0",value:f.quantity||0,onChange:R=>h(F=>({...F,quantity:parseFloat(R.target.value)||0}))})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:`rate-${P.id}`,children:"Rate"}),l.jsx(re,{id:`rate-${P.id}`,type:"number",min:"0",value:f.rate||0,onChange:R=>h(F=>({...F,rate:parseFloat(R.target.value)||0}))})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:`status-${P.id}`,children:"Status"}),l.jsxs(gn,{value:f.status||"draft",onValueChange:R=>h(F=>({...F,status:R})),children:[l.jsx(ln,{children:l.jsx(vn,{})}),l.jsxs(cn,{children:[l.jsx(Ve,{value:"draft",children:"Draft"}),l.jsx(Ve,{value:"sent",children:"Sent"}),l.jsx(Ve,{value:"paid",children:"Paid"}),l.jsx(Ve,{value:"overdue",children:"Overdue"})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(X,{htmlFor:`invoice_date-${P.id}`,children:"Invoice Date"}),l.jsx(re,{id:`invoice_date-${P.id}`,type:"date",value:f.invoice_date||"",onChange:R=>{const F=R.target.value;if(h(O=>({...O,invoice_date:F})),p!=="custom"){const O=parseInt(p),Q=y(F,O);h(Y=>({...Y,due_date:Q}))}}})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:`due_date-${P.id}`,children:"Due Date"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("select",{title:"Select due date option",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:p,onChange:R=>b(R.target.value),children:[l.jsx("option",{value:"20",children:"20 days"}),l.jsx("option",{value:"30",children:"30 days"}),l.jsx("option",{value:"90",children:"90 days"}),l.jsx("option",{value:"custom",children:"Custom date"})]}),p==="custom"&&l.jsx(re,{id:`due_date-${P.id}`,type:"date",value:f.due_date||"",onChange:R=>h(F=>({...F,due_date:R.target.value}))}),p!=="custom"&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Due: ",f.due_date&&new Date(f.due_date).toLocaleDateString("sv-SE")]})]})]})]}),l.jsx("div",{className:"grid grid-cols-1 gap-4",children:l.jsxs("div",{children:[l.jsx(X,{children:"Total Amount"}),l.jsx("div",{className:"text-lg font-semibold mt-2",children:ue((f.quantity||0)*(f.rate||0))})]})}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsxs(H,{variant:"outline",size:"sm",onClick:T,children:[l.jsx(Qn,{className:"h-4 w-4 mr-1"}),"Cancel"]}),l.jsxs(H,{size:"sm",onClick:A,children:[l.jsx(Qh,{className:"h-4 w-4 mr-1"}),"Save"]})]})]}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-start justify-between mb-3",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("h4",{className:"font-medium",children:P.description}),l.jsx(Ot,{variant:D(P.status),children:P.status})]}),l.jsx("div",{className:"text-sm text-muted-foreground",children:P.project_id&&l.jsxs("span",{children:["Project: ",(B=o.find(R=>R.id===P.project_id))==null?void 0:B.name]})})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>k(P),children:l.jsx(Pg,{className:"h-4 w-4"})}),l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>j(P.id),className:"text-red-600 hover:text-red-700",children:l.jsx(lr,{className:"h-4 w-4"})})]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:"Type:"}),l.jsx("div",{className:"font-medium",children:P.hours?"Hourly":"Fixed"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:P.hours?"Hours:":"Quantity:"}),l.jsx("div",{className:"font-medium",children:M4(P)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:"Rate:"}),l.jsx("div",{className:"font-medium",children:ue(P.hourly_rate||P.fixed_amount||0)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:"Total:"}),l.jsx("div",{className:`font-semibold ${I(P.status)}`,children:ue(P.total_amount)})]})]}),l.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mt-3 pt-3 border-t",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Lt,{className:"h-3 w-3"}),"Invoice: ",new Date(P.invoice_date).toLocaleDateString("sv-SE")]}),P.due_date&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Lt,{className:"h-3 w-3"}),"Due: ",new Date(P.due_date).toLocaleDateString("sv-SE")]}),l.jsxs("div",{children:["Created: ",new Date(P.created_at).toLocaleDateString("sv-SE")]}),P.updated_at!==P.created_at&&l.jsxs("div",{children:["Updated: ",new Date(P.updated_at).toLocaleDateString("sv-SE")]})]})]})},P.id)})})]})})]})]}),l.jsx("div",{className:"flex justify-end pt-4 border-t flex-shrink-0",children:l.jsx(H,{variant:"outline",onClick:()=>t(!1),children:"Close"})})]})}):null}function Oot({open:e,onOpenChange:t}){const{invoiceItems:n,markAsInvoiced:r}=Ss(),{clients:i}=Tn(),{projects:s}=er(),{toast:a}=xo(),[o,c]=w.useState([]),[u,d]=w.useState(!1),f=n.filter(x=>x.status==="draft"),h=x=>{c(b=>b.includes(x)?b.filter(S=>S!==x):[...b,x])},p=()=>{o.length===f.length?c([]):c(f.map(x=>x.id))},m=async()=>{if(o.length===0){a({title:"No items selected",description:"Please select at least one item to mark as invoiced",variant:"destructive"});return}d(!0);try{await r(o),a({title:"Success",description:`${o.length} item(s) marked as invoiced`}),c([]),t(!1)}catch{a({title:"Error",description:"Failed to update invoice items",variant:"destructive"})}finally{d(!1)}},g=x=>i.find(b=>b.id===x),v=x=>s.find(b=>b.id===x),y=o.reduce((x,b)=>{const S=f.find(E=>E.id===b);return x+((S==null?void 0:S.total_amount)||0)},0);return l.jsx(xt,{open:e,onOpenChange:t,children:l.jsxs(ft,{className:"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[l.jsx(ht,{className:"flex-shrink-0",children:l.jsxs(pt,{className:"flex items-center gap-2",children:[l.jsx(Js,{className:"h-5 w-5"}),"Mark as Invoiced"]})}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-4",children:f.length===0?l.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[l.jsx(Js,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{children:"No draft items available"}),l.jsx("p",{className:"text-sm",children:"All items have already been invoiced or paid"})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(na,{checked:o.length===f.length&&f.length>0,onCheckedChange:p}),l.jsxs("span",{className:"font-medium",children:["Select All (",f.length," draft items)"]})]}),l.jsx("div",{className:"text-sm text-muted-foreground",children:o.length>0&&l.jsxs("span",{children:[o.length," selected  ",ue(y)]})})]}),l.jsx("div",{className:"space-y-3",children:f.sort((x,b)=>new Date(b.created_at).getTime()-new Date(x.created_at).getTime()).map(x=>{const b=g(x.client_id),S=v(x.project_id),E=o.includes(x.id);return l.jsx(Z,{className:`cursor-pointer transition-colors ${E?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"}`,onClick:()=>h(x.id),children:l.jsx(ee,{className:"p-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(na,{checked:E,onCheckedChange:()=>h(x.id)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h4",{className:"font-medium truncate",children:x.description}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ot,{variant:"secondary",children:"Draft"}),l.jsx("span",{className:"font-semibold text-green-600",children:ue(x.total_amount)})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(eE,{className:"h-3 w-3"}),l.jsx("span",{children:(b==null?void 0:b.name)||"Unknown Client"})]}),l.jsxs("div",{children:["Project: ",(S==null?void 0:S.name)||"No Project"]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Lt,{className:"h-3 w-3"}),l.jsx("span",{children:new Date(x.invoice_date).toLocaleDateString("sv-SE")})]})]}),l.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[l.jsx("span",{children:x.hours?`${x.hours} hours @ ${ue(x.hourly_rate||0)}/h`:"Fixed price"}),l.jsxs("span",{children:["Created: ",new Date(x.created_at).toLocaleDateString("sv-SE")]})]})]})]})})},x.id)})})]})}),l.jsxs("div",{className:"flex justify-between items-center pt-4 border-t flex-shrink-0",children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:o.length>0&&l.jsxs("span",{children:[o.length," item(s) selected  Total: ",ue(y)]})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(H,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),l.jsx(H,{onClick:m,disabled:o.length===0||u,children:u?"Updating...":`Mark ${o.length} as Invoiced`})]})]})]})})}function Pot({open:e,onOpenChange:t}){const{invoiceItems:n,markAsPaid:r}=Ss(),{clients:i}=Tn(),{projects:s}=er(),{toast:a}=xo(),[o,c]=w.useState([]),[u,d]=w.useState(!1),f=n.filter(x=>x.status==="sent"),h=x=>{c(b=>b.includes(x)?b.filter(S=>S!==x):[...b,x])},p=()=>{o.length===f.length?c([]):c(f.map(x=>x.id))},m=async()=>{if(o.length===0){a({title:"No items selected",description:"Please select at least one item to mark as paid",variant:"destructive"});return}d(!0);try{await r(o),a({title:"Success",description:`${o.length} item(s) marked as paid`}),c([]),t(!1)}catch{a({title:"Error",description:"Failed to update invoice items",variant:"destructive"})}finally{d(!1)}},g=x=>i.find(b=>b.id===x),v=x=>s.find(b=>b.id===x),y=o.reduce((x,b)=>{const S=f.find(E=>E.id===b);return x+((S==null?void 0:S.total_amount)||0)},0);return l.jsx(xt,{open:e,onOpenChange:t,children:l.jsxs(ft,{className:"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[l.jsx(ht,{className:"flex-shrink-0",children:l.jsxs(pt,{className:"flex items-center gap-2",children:[l.jsx(wn,{className:"h-5 w-5"}),"Mark as Paid"]})}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-4",children:f.length===0?l.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[l.jsx(wn,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{children:"No invoiced items available"}),l.jsx("p",{className:"text-sm",children:"Mark some draft items as invoiced first"})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(na,{checked:o.length===f.length&&f.length>0,onCheckedChange:p}),l.jsxs("span",{className:"font-medium",children:["Select All (",f.length," invoiced items)"]})]}),l.jsx("div",{className:"text-sm text-muted-foreground",children:o.length>0&&l.jsxs("span",{children:[o.length," selected  ",ue(y)]})})]}),l.jsx("div",{className:"space-y-3",children:f.sort((x,b)=>new Date(b.created_at).getTime()-new Date(x.created_at).getTime()).map(x=>{const b=g(x.client_id),S=v(x.project_id),E=o.includes(x.id);return l.jsx(Z,{className:`cursor-pointer transition-colors ${E?"ring-2 ring-green-500 bg-green-50":"hover:bg-gray-50"}`,onClick:()=>h(x.id),children:l.jsx(ee,{className:"p-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(na,{checked:E,onCheckedChange:()=>h(x.id)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h4",{className:"font-medium truncate",children:x.description}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ot,{variant:"outline",className:"text-blue-600 border-blue-600",children:"Sent"}),l.jsx("span",{className:"font-semibold text-green-600",children:ue(x.total_amount)})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(eE,{className:"h-3 w-3"}),l.jsx("span",{children:(b==null?void 0:b.name)||"Unknown Client"})]}),l.jsxs("div",{children:["Project: ",(S==null?void 0:S.name)||"No Project"]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Lt,{className:"h-3 w-3"}),l.jsx("span",{children:new Date(x.invoice_date).toLocaleDateString("sv-SE")})]})]}),l.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[l.jsx("span",{children:x.hours?`${x.hours} hours @ ${ue(x.hourly_rate||0)}/h`:"Fixed price"}),l.jsxs("span",{children:["Invoiced: ",new Date(x.updated_at).toLocaleDateString("sv-SE")]})]})]})]})})},x.id)})})]})}),l.jsxs("div",{className:"flex justify-between items-center pt-4 border-t flex-shrink-0",children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:o.length>0&&l.jsxs("span",{children:[o.length," item(s) selected  Total: ",ue(y)]})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(H,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),l.jsx(H,{onClick:m,disabled:o.length===0||u,className:"bg-green-600 hover:bg-green-700",children:u?"Updating...":`Mark ${o.length} as Paid`})]})]})]})})}function Iot(){const[e,t]=w.useState(!1),[n,r]=w.useState(!1),[i,s]=w.useState(!1),[a,o]=w.useState(!1),[c,u]=w.useState(!1),[d,f]=w.useState(""),[h,p]=w.useState(!1),[m,g]=w.useState(!1),v=Xh(),{invoiceItems:y,loading:x,getInvoiceSummary:b,getClientSummaries:S}=Ss(),{clients:E,loading:N}=Tn(),{projects:_,loading:k}=er();w.useEffect(()=>{v.invoiceModalOpen&&(t(!0),v.setInvoiceModalOpen(!1))},[v.invoiceModalOpen,v]);const T=x||N||k,A=b(),j=S(),D=()=>{t(!0)},I=()=>{r(!0)},M=()=>{p(!0)},L=()=>{g(!0)},P=()=>{s(!0)},B=()=>{o(!0)},R=O=>{f(O),u(!0)},F=O=>{console.log("Item clicked:",O)};return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Invoicing"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Track unbilled work and manage invoice items for clients and projects"})]}),l.jsxs(H,{onClick:D,className:"sm:w-auto w-full",children:[l.jsx(Xe,{className:"h-4 w-4 mr-2"}),"New Invoice Item"]})]}),l.jsx(xot,{summary:A,loading:T}),l.jsx("div",{className:"w-full",children:l.jsx(Eot,{onCreateInvoiceItem:D,onCreateFromTime:I,onMarkAsInvoiced:M,onMarkAsPaid:L,onExportToFortnox:P,onExportPlainText:B})}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-[600px]",children:[l.jsx("div",{className:"lg:col-span-1",children:l.jsx(bot,{clients:j,loading:T,onClientClick:R})}),l.jsx("div",{className:"lg:col-span-1",children:l.jsx(wot,{items:y,loading:T,onItemClick:F,clients:E,projects:_})})]}),l.jsx("div",{className:"grid grid-cols-1 min-h-[400px]",children:l.jsx(Sot,{items:y,loading:T})}),!T&&y.length===0&&l.jsx(Z,{className:"text-center py-12",children:l.jsxs(ee,{children:[l.jsx(Js,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No invoice items yet"}),l.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Start tracking your unbilled work by creating invoice items for your clients and projects. You can create items manually or convert time entries into billable items."}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[l.jsxs(H,{onClick:D,children:[l.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Create First Invoice Item"]}),l.jsxs(H,{variant:"outline",onClick:I,children:[l.jsx(gt,{className:"h-4 w-4 mr-2"}),"Import from Time Tracking"]})]})]})}),l.jsx(Not,{open:e,onOpenChange:t}),l.jsx(_ot,{open:n,onOpenChange:r}),l.jsx(Tot,{open:i,onOpenChange:s}),l.jsx(Aot,{open:a,onOpenChange:o}),l.jsx(jot,{open:c,onOpenChange:u,clientId:d}),l.jsx(Oot,{open:h,onOpenChange:p}),l.jsx(Pot,{open:m,onOpenChange:g})]})}function Dot(){return KE.useSyncExternalStore(Mot,()=>!0,()=>!1)}function Mot(){return()=>{}}var I3="Avatar",[Rot,Rct]=ru(I3),[Lot,Hae]=Rot(I3),Vae=w.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[i,s]=w.useState("idle");return l.jsx(Lot,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:l.jsx(kt.span,{...r,ref:t})})});Vae.displayName=I3;var Wae="AvatarImage",qae=w.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...s}=e,a=Hae(Wae,n),o=Fot(r,s),c=Dc(u=>{i(u),a.onImageLoadingStatusChange(u)});return ur(()=>{o!=="idle"&&c(o)},[o,c]),o==="loaded"?l.jsx(kt.img,{...s,ref:t,src:r}):null});qae.displayName=Wae;var Kae="AvatarFallback",Gae=w.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...i}=e,s=Hae(Kae,n),[a,o]=w.useState(r===void 0);return w.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(c)}},[r]),a&&s.imageLoadingStatus!=="loaded"?l.jsx(kt.span,{...i,ref:t}):null});Gae.displayName=Kae;function Y7(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Fot(e,{referrerPolicy:t,crossOrigin:n}){const r=Dot(),i=w.useRef(null),s=r?(i.current||(i.current=new window.Image),i.current):null,[a,o]=w.useState(()=>Y7(s,e));return ur(()=>{o(Y7(s,e))},[s,e]),ur(()=>{const c=f=>()=>{o(f)};if(!s)return;const u=c("loaded"),d=c("error");return s.addEventListener("load",u),s.addEventListener("error",d),t&&(s.referrerPolicy=t),typeof n=="string"&&(s.crossOrigin=n),()=>{s.removeEventListener("load",u),s.removeEventListener("error",d)}},[s,n,t]),a}var Yae=Vae,Xae=qae,Qae=Gae;const D3=w.forwardRef(({className:e,...t},n)=>l.jsx(Yae,{ref:n,className:Re("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));D3.displayName=Yae.displayName;const M3=w.forwardRef(({className:e,...t},n)=>l.jsx(Xae,{ref:n,className:Re("aspect-square h-full w-full",e),...t}));M3.displayName=Xae.displayName;const R3=w.forwardRef(({className:e,...t},n)=>l.jsx(Qae,{ref:n,className:Re("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));R3.displayName=Qae.displayName;function Bot({value:e,onChange:t,className:n,label:r="Profile Photo",description:i="Upload a professional profile photo (JPG, PNG, WebP)",maxSize:s=5,acceptedFormats:a=["image/jpeg","image/png","image/webp"]}){const[o,c]=w.useState(!1),[u,d]=w.useState(!1),f=w.useRef(null),h=async b=>{if(!a.includes(b.type)){alert(`Please select a valid image format: ${a.join(", ")}`);return}if(b.size>s*1024*1024){alert(`File size must be less than ${s}MB`);return}c(!0);try{const S=new FileReader;S.onload=E=>{var _;const N=(_=E.target)==null?void 0:_.result;t(N),c(!1)},S.onerror=()=>{alert("Error reading file"),c(!1)},S.readAsDataURL(b)}catch(S){console.error("Error uploading file:",S),alert("Error uploading file"),c(!1)}},p=b=>{b.preventDefault(),d(!1);const S=Array.from(b.dataTransfer.files);S.length>0&&h(S[0])},m=b=>{b.preventDefault(),d(!0)},g=b=>{b.preventDefault(),d(!1)},v=()=>{var b;(b=f.current)==null||b.click()},y=b=>{const S=b.target.files;S&&S.length>0&&h(S[0])},x=()=>{t(void 0)};return l.jsxs("div",{className:Re("space-y-2",n),children:[r&&l.jsx(X,{children:r}),l.jsx(Z,{className:Re("border-2 border-dashed transition-colors cursor-pointer",u&&"border-primary bg-primary/5",!e&&"hover:border-primary/50"),onDrop:p,onDragOver:m,onDragLeave:g,onClick:e?void 0:v,children:l.jsx(ee,{className:"p-6",children:e?l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(D3,{className:"h-20 w-20",children:[l.jsx(M3,{src:e,alt:"Profile photo",className:"object-cover"}),l.jsx(R3,{children:l.jsx(Ei,{className:"h-8 w-8"})})]}),l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsx("p",{className:"text-sm font-medium",children:"Profile photo uploaded"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Click to change or drag a new image here"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(H,{type:"button",variant:"outline",size:"sm",onClick:b=>{b.stopPropagation(),v()},disabled:o,children:[l.jsx(Nhe,{className:"h-4 w-4 mr-2"}),"Change Photo"]}),l.jsxs(H,{type:"button",variant:"outline",size:"sm",onClick:b=>{b.stopPropagation(),x()},disabled:o,children:[l.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Remove"]})]})]})]}):l.jsxs("div",{className:"text-center space-y-4",children:[l.jsx("div",{className:"mx-auto w-16 h-16 bg-muted rounded-full flex items-center justify-center",children:l.jsx(j4,{className:"h-8 w-8 text-muted-foreground"})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-sm font-medium",children:o?"Uploading...":"Upload profile photo"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:i}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:["Max ",s,"MB  ",a.map(b=>b.split("/")[1].toUpperCase()).join(", ")]})]}),l.jsxs(H,{type:"button",variant:"outline",onClick:v,disabled:o,className:"mx-auto",children:[l.jsx(j4,{className:"h-4 w-4 mr-2"}),o?"Uploading...":"Choose File"]})]})})}),l.jsx("input",{ref:f,type:"file",accept:a.join(","),onChange:y,className:"hidden","aria-label":"Upload profile photo",title:"Upload profile photo"}),i&&!e&&l.jsx("p",{className:"text-xs text-muted-foreground",children:i})]})}function $ot({data:e,onChange:t}){const n=(r,i)=>{t({...e,[r]:i})};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx(Ei,{className:"h-6 w-6 text-primary"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Personal Information"}),l.jsx("p",{className:"text-muted-foreground",children:"Basic contact information and professional profile photo"})]})]}),l.jsxs(Z,{children:[l.jsx(de,{children:l.jsx(he,{children:"Profile Photo"})}),l.jsx(ee,{children:l.jsx(Bot,{value:e.profilePhoto,onChange:r=>n("profilePhoto",r),label:"Professional Profile Photo",description:"Upload a high-quality professional headshot (recommended: 400x400px)",maxSize:5})})]}),l.jsxs(Z,{children:[l.jsx(de,{children:l.jsx(he,{children:"Contact Information"})}),l.jsxs(ee,{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"name",children:"Full Name *"}),l.jsx(re,{id:"name",value:e.name,onChange:r=>n("name",r.target.value),placeholder:"Your full name"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"title",children:"Professional Title *"}),l.jsx(re,{id:"title",value:e.title,onChange:r=>n("title",r.target.value),placeholder:"e.g., Senior Software Engineer"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"email",children:"Email *"}),l.jsx(re,{id:"email",type:"email",value:e.email,onChange:r=>n("email",r.target.value),placeholder:"your.email@example.com"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"phone",children:"Phone *"}),l.jsx(re,{id:"phone",value:e.phone,onChange:r=>n("phone",r.target.value),placeholder:"+46 70 123 45 67"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"location",children:"Location *"}),l.jsx(re,{id:"location",value:e.location,onChange:r=>n("location",r.target.value),placeholder:"Stockholm, Sweden"})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"linkedin",children:"LinkedIn"}),l.jsx(re,{id:"linkedin",value:e.linkedIn||"",onChange:r=>n("linkedIn",r.target.value),placeholder:"https://linkedin.com/in/yourprofile"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"github",children:"GitHub"}),l.jsx(re,{id:"github",value:e.github||"",onChange:r=>n("github",r.target.value),placeholder:"https://github.com/yourusername"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"website",children:"Website"}),l.jsx(re,{id:"website",value:e.website||"",onChange:r=>n("website",r.target.value),placeholder:"https://yourwebsite.com"})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"twitter",children:"Twitter"}),l.jsx(re,{id:"twitter",value:e.twitter||"",onChange:r=>n("twitter",r.target.value),placeholder:"https://twitter.com/yourusername"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"instagram",children:"Instagram"}),l.jsx(re,{id:"instagram",value:e.instagram||"",onChange:r=>n("instagram",r.target.value),placeholder:"https://instagram.com/yourusername"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"facebook",children:"Facebook"}),l.jsx(re,{id:"facebook",value:e.facebook||"",onChange:r=>n("facebook",r.target.value),placeholder:"https://facebook.com/yourprofile"})]})]})]})]})]})}function Uot({data:e,onChange:t}){const[n,r]=w.useState(""),[i,s]=w.useState(""),a=(f,h)=>{t({...e,[f]:h})},o=()=>{n.trim()&&(a("keyStrengths",[...e.keyStrengths,n.trim()]),r(""))},c=f=>{const h=e.keyStrengths.filter((p,m)=>m!==f);a("keyStrengths",h)},u=()=>{if(i.trim()){const f=e.specialties||[];a("specialties",[...f,i.trim()]),s("")}},d=f=>{const p=(e.specialties||[]).filter((m,g)=>g!==f);a("specialties",p)};return l.jsxs(Z,{children:[l.jsx(de,{children:l.jsx(he,{children:"Professional Summary"})}),l.jsxs(ee,{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"introduction",children:"Professional Introduction"}),l.jsx(ti,{id:"introduction",value:e.introduction,onChange:f=>a("introduction",f.target.value),placeholder:"Write a compelling professional introduction that highlights your experience and expertise...",rows:4})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"objective",children:"Career Objective"}),l.jsx(ti,{id:"objective",value:e.careerObjective||"",onChange:f=>a("careerObjective",f.target.value),placeholder:"Describe your career goals and what you're looking for in your next role...",rows:3})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx(X,{children:"Key Strengths"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:e.keyStrengths.map((f,h)=>l.jsxs(Ot,{variant:"secondary",className:"flex items-center gap-1",children:[f,l.jsx(H,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>c(h),children:l.jsx(Qn,{className:"h-3 w-3"})})]},h))}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(re,{value:n,onChange:f=>r(f.target.value),placeholder:"Add a key strength...",onKeyPress:f=>f.key==="Enter"&&o()}),l.jsx(H,{onClick:o,disabled:!n.trim(),children:l.jsx(Xe,{className:"h-4 w-4"})})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(X,{children:"Specialties"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Key competencies for header display (Andervang Consulting template)"})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:(e.specialties||[]).map((f,h)=>l.jsxs(Ot,{variant:"outline",className:"flex items-center gap-1",children:[f,l.jsx(H,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>d(h),children:l.jsx(Qn,{className:"h-3 w-3"})})]},h))}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(re,{value:i,onChange:f=>s(f.target.value),placeholder:"Add a specialty (e.g., React, TypeScript)...",onKeyPress:f=>f.key==="Enter"&&u()}),l.jsx(H,{onClick:u,disabled:!i.trim(),children:l.jsx(Xe,{className:"h-4 w-4"})})]})]})]})]})}function zot({experienceData:e,projectsData:t,onExperienceChange:n,onProjectsChange:r}){const[i,s]=w.useState("experience"),a=()=>{const g={company:"",position:"",period:"",description:"",technologies:[],achievements:[]};n([...e,g])},o=g=>{const v=e.filter((y,x)=>x!==g);n(v)},c=(g,v,y)=>{const x=e.map((b,S)=>S===g?{...b,[v]:y}:b);n(x)},u=()=>{const g={name:"",description:"",technologies:[],url:"",type:"",period:"",achievements:[]};r([...t,g])},d=g=>{const v=t.filter((y,x)=>x!==g);r(v)},f=(g,v,y)=>{const x=t.map((b,S)=>S===g?{...b,[v]:y}:b);r(x)},h=(g,v,y=!0)=>{const x=v.split(",").map(b=>b.trim()).filter(b=>b);y?c(g,"technologies",x):f(g,"technologies",x)},p=(g,v)=>{const y=v.split(`
`).map(x=>x.trim()).filter(x=>x);c(g,"achievements",y)},m=(g,v)=>{const y=v.split(`
`).map(x=>x.trim()).filter(x=>x);f(g,"achievements",y)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Experience"}),l.jsx("p",{className:"text-muted-foreground",children:"Add your work experience and notable projects"})]}),l.jsxs(Qo,{value:i,onValueChange:s,className:"w-full",children:[l.jsxs(co,{className:"grid w-full grid-cols-2",children:[l.jsxs(St,{value:"experience",className:"gap-2",children:[l.jsx(Mm,{className:"h-4 w-4"}),"Work Experience"]}),l.jsxs(St,{value:"projects",className:"gap-2",children:[l.jsx(mc,{className:"h-4 w-4"}),"Projects"]})]}),l.jsxs(wt,{value:"experience",className:"space-y-4 mt-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Work Experience"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Your professional work history"})]}),l.jsxs(H,{onClick:a,className:"gap-2",children:[l.jsx(Xe,{className:"h-4 w-4"}),"Add Experience"]})]}),e.length===0?l.jsx(Z,{className:"border-dashed",children:l.jsxs(ee,{className:"flex flex-col items-center justify-center py-12",children:[l.jsx(Mm,{className:"h-12 w-12 text-muted-foreground mb-4"}),l.jsx("h3",{className:"font-semibold mb-2",children:"No experience added"}),l.jsx("p",{className:"text-sm text-muted-foreground text-center mb-4",children:"Start by adding your work experience"}),l.jsxs(H,{onClick:a,variant:"outline",className:"gap-2",children:[l.jsx(Xe,{className:"h-4 w-4"}),"Add Experience"]})]})}):l.jsx("div",{className:"space-y-4",children:e.map((g,v)=>l.jsxs(Z,{children:[l.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[l.jsxs(he,{className:"text-lg flex items-center gap-2",children:[l.jsx(Mm,{className:"h-5 w-5"}),"Experience ",v+1]}),l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>o(v),className:"text-red-600 hover:text-red-700",children:l.jsx(Qn,{className:"h-4 w-4"})})]}),l.jsxs(ee,{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`company-${v}`,children:"Company *"}),l.jsx(re,{id:`company-${v}`,placeholder:"Company name",value:g.company,onChange:y=>c(v,"company",y.target.value)})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`position-${v}`,children:"Position *"}),l.jsx(re,{id:`position-${v}`,placeholder:"Job title",value:g.position,onChange:y=>c(v,"position",y.target.value)})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`period-${v}`,children:"Period"}),l.jsx(re,{id:`period-${v}`,placeholder:"e.g., Jan 2020 - Present",value:g.period,onChange:y=>c(v,"period",y.target.value)})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`description-${v}`,children:"Description"}),l.jsx(ti,{id:`description-${v}`,placeholder:"Describe your role and responsibilities...",value:g.description,onChange:y=>c(v,"description",y.target.value),rows:4})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`technologies-${v}`,children:"Technologies"}),l.jsx(re,{id:`technologies-${v}`,placeholder:"React, TypeScript, Node.js (comma-separated)",value:g.technologies.join(", "),onChange:y=>h(v,y.target.value,!0)})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`achievements-${v}`,children:"Key Achievements"}),l.jsx(ti,{id:`achievements-${v}`,placeholder:` Increased performance by 40%
 Led a team of 5 developers
 Implemented new architecture`,value:g.achievements.join(`
`),onChange:y=>p(v,y.target.value),rows:4}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter each achievement on a new line"})]})]})]},v))})]}),l.jsxs(wt,{value:"projects",className:"space-y-4 mt-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Projects"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Notable projects you've worked on"})]}),l.jsxs(H,{onClick:u,className:"gap-2",children:[l.jsx(Xe,{className:"h-4 w-4"}),"Add Project"]})]}),t.length===0?l.jsx(Z,{className:"border-dashed",children:l.jsxs(ee,{className:"flex flex-col items-center justify-center py-12",children:[l.jsx(mc,{className:"h-12 w-12 text-muted-foreground mb-4"}),l.jsx("h3",{className:"font-semibold mb-2",children:"No projects added"}),l.jsx("p",{className:"text-sm text-muted-foreground text-center mb-4",children:"Start by adding your notable projects"}),l.jsxs(H,{onClick:u,variant:"outline",className:"gap-2",children:[l.jsx(Xe,{className:"h-4 w-4"}),"Add Project"]})]})}):l.jsx("div",{className:"space-y-4",children:t.map((g,v)=>l.jsxs(Z,{children:[l.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[l.jsxs(he,{className:"text-lg flex items-center gap-2",children:[l.jsx(mc,{className:"h-5 w-5"}),"Project ",v+1]}),l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>d(v),className:"text-red-600 hover:text-red-700",children:l.jsx(Qn,{className:"h-4 w-4"})})]}),l.jsxs(ee,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`project-name-${v}`,children:"Project Name *"}),l.jsx(re,{id:`project-name-${v}`,placeholder:"Project name",value:g.name,onChange:y=>f(v,"name",y.target.value)})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`project-type-${v}`,children:"Project Type *"}),l.jsx(re,{id:`project-type-${v}`,placeholder:"e.g., Fullstack Development, Frontend, Mobile App",value:g.type||"",onChange:y=>f(v,"type",y.target.value)}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Required for Andervang Consulting template"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`project-period-${v}`,children:"Period"}),l.jsx(re,{id:`project-period-${v}`,placeholder:"e.g., 2023-2024, Q1 2024",value:g.period||"",onChange:y=>f(v,"period",y.target.value)})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`project-description-${v}`,children:"Description"}),l.jsx(ti,{id:`project-description-${v}`,placeholder:"Describe what the project does and your role in it...",value:g.description,onChange:y=>f(v,"description",y.target.value),rows:4})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`project-technologies-${v}`,children:"Technologies"}),l.jsx(re,{id:`project-technologies-${v}`,placeholder:"React, TypeScript, PostgreSQL (comma-separated)",value:g.technologies.join(", "),onChange:y=>h(v,y.target.value,!1)})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`project-url-${v}`,children:"Project URL"}),l.jsx(re,{id:`project-url-${v}`,type:"url",placeholder:"https://github.com/username/project",value:g.url||"",onChange:y=>f(v,"url",y.target.value)})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`project-achievements-${v}`,children:"Key Achievements"}),l.jsx(ti,{id:`project-achievements-${v}`,placeholder:` Improved performance by 50%
 Implemented accessibility features
 Used by 10,000+ users`,value:(g.achievements||[]).join(`
`),onChange:y=>m(v,y.target.value),rows:3}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter each achievement on a new line"})]})]})]},v))})]})]})]})}function Hot({educationData:e,certificationsData:t,coursesData:n,onEducationChange:r,onCertificationsChange:i,onCoursesChange:s}){const[a,o]=w.useState("education"),c=e||[],u=t||[],d=n||[],f=()=>{const S={institution:"",degree:"",field:"",period:"",gpa:""};r([...c,S])},h=S=>{const E=c.filter((N,_)=>_!==S);r(E)},p=(S,E,N)=>{const _=c.map((k,T)=>T===S?{...k,[E]:N}:k);r(_)},m=()=>{const S={name:"",issuer:"",date:"",credentialId:""};i([...u,S])},g=S=>{const E=u.filter((N,_)=>_!==S);i(E)},v=(S,E,N)=>{const _=u.map((k,T)=>T===S?{...k,[E]:N}:k);i(_)},y=()=>{const S={name:"",provider:"",completionDate:"",duration:"",credentialId:"",url:""};s([...d,S])},x=S=>{const E=d.filter((N,_)=>_!==S);s(E)},b=(S,E,N)=>{const _=d.map((k,T)=>T===S?{...k,[E]:N}:k);s(_)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Education"}),l.jsx("p",{className:"text-muted-foreground",children:"Add your educational background, professional certifications, and courses"})]}),l.jsxs(Qo,{value:a,onValueChange:o,className:"w-full",children:[l.jsxs(co,{className:"grid w-full grid-cols-3",children:[l.jsxs(St,{value:"education",className:"gap-2",children:[l.jsx(QN,{className:"h-4 w-4"}),"Education"]}),l.jsxs(St,{value:"courses",className:"gap-2",children:[l.jsx(Dm,{className:"h-4 w-4"}),"Courses"]}),l.jsxs(St,{value:"certifications",className:"gap-2",children:[l.jsx(XN,{className:"h-4 w-4"}),"Certifications"]})]}),l.jsxs(wt,{value:"education",className:"space-y-4 mt-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Education"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Your academic qualifications"})]}),l.jsxs(H,{onClick:f,className:"gap-2",children:[l.jsx(Xe,{className:"h-4 w-4"}),"Add Education"]})]}),c.length===0?l.jsx(Z,{className:"border-dashed",children:l.jsxs(ee,{className:"flex flex-col items-center justify-center py-12",children:[l.jsx(QN,{className:"h-12 w-12 text-muted-foreground mb-4"}),l.jsx("h3",{className:"font-semibold mb-2",children:"No education added"}),l.jsx("p",{className:"text-sm text-muted-foreground text-center mb-4",children:"Start by adding your educational background"}),l.jsxs(H,{onClick:f,variant:"outline",className:"gap-2",children:[l.jsx(Xe,{className:"h-4 w-4"}),"Add Education"]})]})}):l.jsx("div",{className:"space-y-4",children:c.map((S,E)=>l.jsxs(Z,{children:[l.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[l.jsxs(he,{className:"text-lg flex items-center gap-2",children:[l.jsx(QN,{className:"h-5 w-5"}),"Education ",E+1]}),l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>h(E),className:"text-red-600 hover:text-red-700",children:l.jsx(Qn,{className:"h-4 w-4"})})]}),l.jsxs(ee,{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`institution-${E}`,children:"Institution *"}),l.jsx(re,{id:`institution-${E}`,placeholder:"University name",value:S.institution,onChange:N=>p(E,"institution",N.target.value)})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`degree-${E}`,children:"Degree *"}),l.jsx(re,{id:`degree-${E}`,placeholder:"e.g., Bachelor of Science",value:S.degree,onChange:N=>p(E,"degree",N.target.value)})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`field-${E}`,children:"Field of Study"}),l.jsx(re,{id:`field-${E}`,placeholder:"e.g., Computer Science",value:S.field,onChange:N=>p(E,"field",N.target.value)})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`period-${E}`,children:"Period"}),l.jsx(re,{id:`period-${E}`,placeholder:"e.g., 2018-2022",value:S.period,onChange:N=>p(E,"period",N.target.value)})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`gpa-${E}`,children:"GPA (Optional)"}),l.jsx(re,{id:`gpa-${E}`,placeholder:"e.g., 3.8/4.0",value:S.gpa||"",onChange:N=>p(E,"gpa",N.target.value)})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`location-${E}`,children:"Location"}),l.jsx(re,{id:`location-${E}`,placeholder:"e.g., Stockholm, Sweden",value:S.location||"",onChange:N=>p(E,"location",N.target.value)})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`honors-${E}`,children:"Academic Honors"}),l.jsx(re,{id:`honors-${E}`,placeholder:"e.g., Magna Cum Laude, Dean's List (comma-separated)",value:(S.honors||[]).join(", "),onChange:N=>p(E,"honors",N.target.value.split(", ").filter(_=>_.trim()))})]})]})]})]},E))})]}),l.jsxs(wt,{value:"courses",className:"space-y-4 mt-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Courses"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Online courses and training programs"})]}),l.jsxs(H,{onClick:y,className:"gap-2",children:[l.jsx(Xe,{className:"h-4 w-4"}),"Add Course"]})]}),d.length===0?l.jsx(Z,{className:"border-dashed",children:l.jsxs(ee,{className:"flex flex-col items-center justify-center py-12",children:[l.jsx(Dm,{className:"h-12 w-12 text-muted-foreground mb-4"}),l.jsx("h3",{className:"font-semibold mb-2",children:"No courses added"}),l.jsx("p",{className:"text-sm text-muted-foreground text-center mb-4",children:"Start by adding your first course or training program"}),l.jsxs(H,{onClick:y,variant:"outline",className:"gap-2",children:[l.jsx(Xe,{className:"h-4 w-4"}),"Add Course"]})]})}):l.jsx("div",{className:"space-y-4",children:d.map((S,E)=>l.jsxs(Z,{children:[l.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[l.jsxs(he,{className:"text-lg flex items-center gap-2",children:[l.jsx(Dm,{className:"h-5 w-5"}),"Course ",E+1]}),l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>x(E),className:"text-red-600 hover:text-red-700",children:l.jsx(Qn,{className:"h-4 w-4"})})]}),l.jsxs(ee,{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`course-name-${E}`,children:"Course Name *"}),l.jsx(re,{id:`course-name-${E}`,placeholder:"e.g., Advanced React Development",value:S.name,onChange:N=>b(E,"name",N.target.value)})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`course-provider-${E}`,children:"Provider *"}),l.jsx(re,{id:`course-provider-${E}`,placeholder:"e.g., Udemy, Coursera, LinkedIn Learning",value:S.provider,onChange:N=>b(E,"provider",N.target.value)})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`course-completion-${E}`,children:"Completion Date"}),l.jsx(re,{id:`course-completion-${E}`,type:"month",value:S.completionDate,onChange:N=>b(E,"completionDate",N.target.value)})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`course-duration-${E}`,children:"Duration"}),l.jsx(re,{id:`course-duration-${E}`,placeholder:"e.g., 40 hours, 6 weeks",value:S.duration||"",onChange:N=>b(E,"duration",N.target.value)})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`course-status-${E}`,children:"Status"}),l.jsxs("select",{id:`course-status-${E}`,title:"Course Status",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:S.status||"completed",onChange:N=>b(E,"status",N.target.value),children:[l.jsx("option",{value:"completed",children:"Completed"}),l.jsx("option",{value:"in-progress",children:"In Progress"}),l.jsx("option",{value:"audit",children:"Audit"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`course-credential-${E}`,children:"Credential ID"}),l.jsx(re,{id:`course-credential-${E}`,placeholder:"Certificate ID (optional)",value:S.credentialId||"",onChange:N=>b(E,"credentialId",N.target.value)})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`course-grade-${E}`,children:"Grade/Score"}),l.jsx(re,{id:`course-grade-${E}`,placeholder:"e.g., A+, 95%, Pass",value:S.grade||"",onChange:N=>b(E,"grade",N.target.value)})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`course-url-${E}`,children:"Certificate URL"}),l.jsx(re,{id:`course-url-${E}`,type:"url",placeholder:"https://...",value:S.url||"",onChange:N=>b(E,"url",N.target.value)})]})]})]})]},E))})]}),l.jsxs(wt,{value:"certifications",className:"space-y-4 mt-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Certifications"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Professional certifications and licenses"})]}),l.jsxs(H,{onClick:m,className:"gap-2",children:[l.jsx(Xe,{className:"h-4 w-4"}),"Add Certification"]})]}),u.length===0?l.jsx(Z,{className:"border-dashed",children:l.jsxs(ee,{className:"flex flex-col items-center justify-center py-12",children:[l.jsx(XN,{className:"h-12 w-12 text-muted-foreground mb-4"}),l.jsx("h3",{className:"font-semibold mb-2",children:"No certifications added"}),l.jsx("p",{className:"text-sm text-muted-foreground text-center mb-4",children:"Start by adding your first professional certification"}),l.jsxs(H,{onClick:m,variant:"outline",className:"gap-2",children:[l.jsx(Xe,{className:"h-4 w-4"}),"Add Certification"]})]})}):l.jsx("div",{className:"space-y-4",children:u.map((S,E)=>l.jsxs(Z,{children:[l.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[l.jsxs(he,{className:"text-lg flex items-center gap-2",children:[l.jsx(XN,{className:"h-5 w-5"}),"Certification ",E+1]}),l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>g(E),className:"text-red-600 hover:text-red-700",children:l.jsx(Qn,{className:"h-4 w-4"})})]}),l.jsxs(ee,{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`cert-name-${E}`,children:"Certification Name *"}),l.jsx(re,{id:`cert-name-${E}`,placeholder:"e.g., AWS Certified Solutions Architect",value:S.name,onChange:N=>v(E,"name",N.target.value)})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`cert-issuer-${E}`,children:"Issuing Organization *"}),l.jsx(re,{id:`cert-issuer-${E}`,placeholder:"e.g., Amazon Web Services",value:S.issuer,onChange:N=>v(E,"issuer",N.target.value)})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`cert-date-${E}`,children:"Issue Date"}),l.jsx(re,{id:`cert-date-${E}`,type:"month",value:S.date,onChange:N=>v(E,"date",N.target.value)})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`cert-expiration-${E}`,children:"Expiration Date"}),l.jsx(re,{id:`cert-expiration-${E}`,type:"month",placeholder:"Leave empty if no expiration",value:S.expirationDate||"",onChange:N=>v(E,"expirationDate",N.target.value)})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`cert-credential-${E}`,children:"Credential ID"}),l.jsx(re,{id:`cert-credential-${E}`,placeholder:"Certification ID (optional)",value:S.credentialId||"",onChange:N=>v(E,"credentialId",N.target.value)})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`cert-url-${E}`,children:"Credential URL"}),l.jsx(re,{id:`cert-url-${E}`,placeholder:"https://...",value:S.url||"",onChange:N=>v(E,"url",N.target.value)})]})]})]})]},E))})]})]})]})}const Vot=e=>e.map(t=>({category:t.category,skills:t.items.map(n=>typeof n=="string"?{name:n,level:3,category:t.category}:{name:n.name,level:n.level||3,category:t.category})})),Wot=e=>e.map(t=>({category:t.category,items:t.skills.map(n=>({name:n.name,level:n.level}))}));function X7({data:e,onChange:t}){const[n,r]=w.useState(()=>Vot(e)),[i,s]=w.useState(""),[a,o]=w.useState(""),[c,u]=w.useState(3),d=b=>{r(b),t(Wot(b))},f=()=>{if(i.trim()){const b=[...n,{category:i.trim(),skills:[]}];d(b),s("")}},h=b=>{const S=n.filter((E,N)=>N!==b);d(S)},p=b=>{if(a.trim()){const S=n.map((E,N)=>N===b?{...E,skills:[...E.skills,{name:a.trim(),level:c,category:E.category}]}:E);d(S),o(""),u(3)}},m=(b,S)=>{const E=n.map((N,_)=>_===b?{...N,skills:N.skills.filter((k,T)=>T!==S)}:N);d(E)},g=(b,S,E)=>{const N=n.map((_,k)=>k===b?{..._,skills:_.skills.map((T,A)=>A===S?{...T,level:E}:T)}:_);d(N)},v=b=>{switch(b){case 1:return"text-red-500";case 2:return"text-orange-500";case 3:return"text-yellow-500";case 4:return"text-blue-500";case 5:return"text-green-500";default:return"text-gray-400"}},y=b=>{switch(b){case 1:return"Grundlggande";case 2:return"Ngon erfarenhet";case 3:return"God erfarenhet";case 4:return"Mycket god erfarenhet";case 5:return"Expert";default:return"Ej bedmd"}},x=({level:b,onRatingChange:S,readonly:E=!1})=>l.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(N=>l.jsx("button",{type:"button",disabled:E,onClick:()=>S==null?void 0:S(N),title:`Set rating to ${N} stars - ${y(N)}`,className:`transition-colors ${E?"cursor-default":"cursor-pointer hover:scale-110"}`,children:l.jsx(xC,{className:`h-4 w-4 ${N<=b?v(b):"text-gray-300"} ${N<=b?"fill-current":""}`})},N)),l.jsx("span",{className:"ml-2 text-sm font-medium text-muted-foreground",children:y(b)})]});return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx(jg,{className:"h-6 w-6 text-primary"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Skills & Competencies"}),l.jsx("p",{className:"text-muted-foreground",children:"Add your technical and professional skills with Kammarkollegiet-style competency ratings"})]})]}),l.jsxs(Z,{className:"border-dashed",children:[l.jsx(de,{children:l.jsxs(he,{className:"text-lg flex items-center gap-2",children:[l.jsx(xC,{className:"h-5 w-5"}),"Kompetensgradering (Kammarkollegiet-skala)"]})}),l.jsx(ee,{children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[1,2,3,4,5].map(b=>l.jsx("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/50",children:l.jsx(x,{level:b,readonly:!0})},b))})})]}),l.jsxs(Z,{children:[l.jsx(de,{children:l.jsx(he,{className:"text-lg",children:"Add New Skill Category"})}),l.jsx(ee,{children:l.jsxs("div",{className:"flex gap-3",children:[l.jsx(re,{placeholder:"Category name (e.g., Programming Languages, Frameworks)",value:i,onChange:b=>s(b.target.value),onKeyPress:b=>b.key==="Enter"&&f(),className:"flex-1"}),l.jsxs(H,{onClick:f,disabled:!i.trim(),children:[l.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Add Category"]})]})})]}),l.jsx("div",{className:"space-y-6",children:n.map((b,S)=>l.jsxs(Z,{className:"overflow-hidden",children:[l.jsx(de,{className:"bg-muted/50",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(he,{className:"text-xl",children:b.category}),l.jsx(H,{variant:"outline",size:"sm",onClick:()=>h(S),className:"text-destructive hover:text-destructive",children:l.jsx(Qn,{className:"h-4 w-4"})})]})}),l.jsxs(ee,{className:"p-6",children:[l.jsxs("div",{className:"mb-6 p-4 rounded-lg border-2 border-dashed border-muted",children:[l.jsx(X,{className:"text-sm font-medium mb-3 block",children:"Add New Skill"}),l.jsxs("div",{className:"flex gap-3 items-end",children:[l.jsx("div",{className:"flex-1",children:l.jsx(re,{placeholder:"Skill name",value:a,onChange:E=>o(E.target.value),onKeyPress:E=>E.key==="Enter"&&p(S)})}),l.jsxs("div",{className:"flex-shrink-0",children:[l.jsx(X,{className:"text-xs text-muted-foreground mb-2 block",children:"Competency Level"}),l.jsx(x,{level:c,onRatingChange:u})]}),l.jsxs(H,{onClick:()=>p(S),disabled:!a.trim(),size:"lg",children:[l.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Add Skill"]})]})]}),l.jsxs("div",{className:"space-y-3",children:[b.skills.map((E,N)=>l.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-background hover:bg-muted/30 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[l.jsx("span",{className:"font-medium text-lg",children:E.name}),l.jsx(x,{level:E.level,onRatingChange:_=>g(S,N,_)})]}),l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>m(S,N),className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:l.jsx(Qn,{className:"h-4 w-4"})})]},N)),b.skills.length===0&&l.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No skills added to this category yet."})]})]})]},S))}),n.length===0&&l.jsx(Z,{className:"border-dashed",children:l.jsxs(ee,{className:"text-center py-12",children:[l.jsx(jg,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No skill categories yet"}),l.jsx("p",{className:"text-muted-foreground mb-6",children:"Start by adding a skill category above, then add individual skills with competency ratings."})]})})]})}const qot=[{value:"A1 - Beginner",label:"A1 - Beginner"},{value:"A2 - Elementary",label:"A2 - Elementary"},{value:"B1 - Intermediate",label:"B1 - Intermediate"},{value:"B2 - Upper Intermediate",label:"B2 - Upper Intermediate"},{value:"C1 - Advanced",label:"C1 - Advanced"},{value:"C2 - Proficient",label:"C2 - Proficient"},{value:"Native",label:"Native Speaker"}];function Kot({data:e,onChange:t}){const n=()=>{const s={language:"",proficiency:""};t([...e,s])},r=s=>{const a=e.filter((o,c)=>c!==s);t(a)},i=(s,a,o)=>{const c=e.map((u,d)=>d===s?{...u,[a]:o}:u);t(c)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx(k4,{className:"h-6 w-6 text-primary"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Languages"}),l.jsx("p",{className:"text-muted-foreground",children:"List your language skills with proficiency levels according to the Common European Framework"})]})]}),l.jsx(Z,{className:"border-dashed border-2",children:l.jsx(ee,{className:"flex items-center justify-center py-8",children:l.jsxs(H,{onClick:n,variant:"outline",className:"gap-2",children:[l.jsx(Xe,{className:"h-4 w-4"}),"Add Language"]})})}),l.jsx("div",{className:"space-y-4",children:e.map((s,a)=>l.jsxs(Z,{className:"overflow-hidden",children:[l.jsx(de,{className:"bg-muted/50",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(he,{className:"text-lg",children:s.language||`Language ${a+1}`}),l.jsx(H,{variant:"outline",size:"sm",onClick:()=>r(a),className:"text-destructive hover:text-destructive",children:l.jsx(Qn,{className:"h-4 w-4"})})]})}),l.jsx(ee,{className:"p-6",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`language-${a}`,children:"Language *"}),l.jsx(re,{id:`language-${a}`,value:s.language,onChange:o=>i(a,"language",o.target.value),placeholder:"e.g., English, Swedish, German, Spanish"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:`proficiency-${a}`,children:"Proficiency Level *"}),l.jsxs(gn,{value:s.proficiency,onValueChange:o=>i(a,"proficiency",o),children:[l.jsx(ln,{children:l.jsx(vn,{placeholder:"Select proficiency level"})}),l.jsx(cn,{children:qot.map(o=>l.jsx(Ve,{value:o.value,children:o.label},o.value))})]})]})]})})]},a))}),e.length===0&&l.jsx(Z,{className:"border-dashed",children:l.jsxs(ee,{className:"text-center py-12",children:[l.jsx(k4,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No languages added yet"}),l.jsx("p",{className:"text-muted-foreground mb-6",children:"Add your language skills to showcase your international capabilities."})]})}),l.jsx(Z,{className:"bg-blue-50 border-blue-200",children:l.jsxs(ee,{className:"p-4",children:[l.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Common European Framework Reference Levels:"}),l.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[l.jsxs("div",{children:[l.jsx("strong",{children:"A1-A2:"})," Basic user (beginner to elementary)"]}),l.jsxs("div",{children:[l.jsx("strong",{children:"B1-B2:"})," Independent user (intermediate to upper intermediate)"]}),l.jsxs("div",{children:[l.jsx("strong",{children:"C1-C2:"})," Proficient user (advanced to mastery)"]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Native:"})," Native speaker level"]})]})]})})]})}const Cw=w.forwardRef(({className:e,orientation:t="horizontal",...n},r)=>l.jsx("div",{ref:r,className:Re("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));Cw.displayName="Separator";const Got=[{value:"frank-digital",label:"Frank Digital Professional"},{value:"modern",label:"Modern Clean"},{value:"classic",label:"Classic Traditional"},{value:"creative",label:"Creative Design"}],Yot=[{value:"blue",label:"Professional Blue"},{value:"gray",label:"Modern Gray"},{value:"green",label:"Fresh Green"},{value:"purple",label:"Creative Purple"}],Xot=[{value:"small",label:"Small (10pt)"},{value:"medium",label:"Medium (11pt)"},{value:"large",label:"Large (12pt)"}],Qot=[{value:"narrow",label:'Narrow (0.5")'},{value:"normal",label:'Normal (1")'},{value:"wide",label:'Wide (1.5")'}];function Jot({data:e,onChange:t,profilePhoto:n}){const r=(i,s)=>{t({...e,[i]:s})};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx(Zs,{className:"h-6 w-6 text-primary"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Template Settings"}),l.jsx("p",{className:"text-muted-foreground",children:"Customize the appearance and formatting of your CV"})]})]}),l.jsxs(Z,{children:[l.jsx(de,{children:l.jsxs(he,{className:"flex items-center gap-2",children:[l.jsx(en,{className:"h-5 w-5"}),"Template & Layout"]})}),l.jsx(ee,{className:"space-y-4",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"template",children:"CV Template"}),l.jsxs(gn,{value:e.template,onValueChange:i=>r("template",i),children:[l.jsx(ln,{children:l.jsx(vn,{placeholder:"Select template"})}),l.jsx(cn,{children:Got.map(i=>l.jsx(Ve,{value:i.value,children:i.label},i.value))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"language",children:"Language"}),l.jsxs(gn,{value:e.language,onValueChange:i=>r("language",i),children:[l.jsx(ln,{children:l.jsx(vn,{placeholder:"Select language"})}),l.jsxs(cn,{children:[l.jsx(Ve,{value:"sv",children:"Swedish"}),l.jsx(Ve,{value:"en",children:"English"}),l.jsx(Ve,{value:"no",children:"Norwegian"}),l.jsx(Ve,{value:"da",children:"Danish"})]})]})]})]})})]}),l.jsxs(Z,{children:[l.jsx(de,{children:l.jsxs(he,{className:"flex items-center gap-2",children:[l.jsx(lV,{className:"h-5 w-5"}),"Appearance"]})}),l.jsx(ee,{className:"space-y-4",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"theme",children:"Color Theme"}),l.jsxs(gn,{value:e.theme,onValueChange:i=>r("theme",i),children:[l.jsx(ln,{children:l.jsx(vn,{placeholder:"Select theme"})}),l.jsx(cn,{children:Yot.map(i=>l.jsx(Ve,{value:i.value,children:i.label},i.value))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"colorScheme",children:"Custom Color"}),l.jsx(re,{id:"colorScheme",type:"color",value:e.colorScheme,onChange:i=>r("colorScheme",i.target.value),className:"h-10 w-20"})]})]})})]}),l.jsxs(Z,{children:[l.jsx(de,{children:l.jsxs(he,{className:"flex items-center gap-2",children:[l.jsx(Hi,{className:"h-5 w-5"}),"Formatting"]})}),l.jsx(ee,{className:"space-y-4",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"fontSize",children:"Font Size"}),l.jsxs(gn,{value:e.fontSize,onValueChange:i=>r("fontSize",i),children:[l.jsx(ln,{children:l.jsx(vn,{placeholder:"Select font size"})}),l.jsx(cn,{children:Xot.map(i=>l.jsx(Ve,{value:i.value,children:i.label},i.value))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"margins",children:"Page Margins"}),l.jsxs(gn,{value:e.margins,onValueChange:i=>r("margins",i),children:[l.jsx(ln,{children:l.jsx(vn,{placeholder:"Select margins"})}),l.jsx(cn,{children:Qot.map(i=>l.jsx(Ve,{value:i.value,children:i.label},i.value))})]})]})]})})]}),l.jsxs(Z,{children:[l.jsx(de,{children:l.jsx(he,{children:"Display Options"})}),l.jsxs(ee,{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx(X,{htmlFor:"showPhoto",children:"Include Profile Photo"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Show your profile photo on the CV"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[e.showPhoto&&n&&l.jsxs(D3,{className:"h-8 w-8",children:[l.jsx(M3,{src:n,alt:"Profile preview"}),l.jsx(R3,{children:l.jsx(Ei,{className:"h-4 w-4"})})]}),l.jsx(zu,{id:"showPhoto",checked:e.showPhoto,onCheckedChange:i=>r("showPhoto",i)})]})]}),e.showPhoto&&!n&&l.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:l.jsx("p",{className:"text-sm text-yellow-800",children:" No profile photo uploaded. Go to the Personal Info tab to add a photo."})}),l.jsx(Cw,{}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx(X,{htmlFor:"showReferences",children:"Include References Section"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Add a references section to your CV"})]}),l.jsx(zu,{id:"showReferences",checked:e.showReferences,onCheckedChange:i=>r("showReferences",i)})]})]})]}),l.jsx(Z,{className:"bg-blue-50 border-blue-200",children:l.jsx(ee,{className:"p-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Hi,{className:"h-5 w-5 text-blue-600 mt-0.5"}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Preview Changes"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Your changes will be reflected when you generate the CV. Use the preview function to see how your CV will look with these settings."})]})]})})})]})}var L3="Progress",F3=100,[Zot,Lct]=ru(L3),[elt,tlt]=Zot(L3),Jae=w.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:s=nlt,...a}=e;(i||i===0)&&!Q7(i)&&console.error(rlt(`${i}`,"Progress"));const o=Q7(i)?i:F3;r!==null&&!J7(r,o)&&console.error(ilt(`${r}`,"Progress"));const c=J7(r,o)?r:null,u=Tw(c)?s(c,o):void 0;return l.jsx(elt,{scope:n,value:c,max:o,children:l.jsx(kt.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":Tw(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":toe(c,o),"data-value":c??void 0,"data-max":o,...a,ref:t})})});Jae.displayName=L3;var Zae="ProgressIndicator",eoe=w.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,i=tlt(Zae,n);return l.jsx(kt.div,{"data-state":toe(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:t})});eoe.displayName=Zae;function nlt(e,t){return`${Math.round(e/t*100)}%`}function toe(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Tw(e){return typeof e=="number"}function Q7(e){return Tw(e)&&!isNaN(e)&&e>0}function J7(e,t){return Tw(e)&&!isNaN(e)&&e<=t&&e>=0}function rlt(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${F3}\`.`}function ilt(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${F3} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var noe=Jae,slt=eoe;const B3=w.forwardRef(({className:e,value:t,...n},r)=>l.jsx(noe,{ref:r,className:Re("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...n,children:l.jsx(slt,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));B3.displayName=noe.displayName;const alt=!1,olt=!0,llt=()=>"http://localhost:8888/.netlify/functions",Ql={baseUrl:llt(),apiKey:"dev-api-key-12345",timeout:45e3,isDev:alt,useLocalAPI:olt,headers:{"Content-Type":"application/json","X-API-Key":"dev-api-key-12345"}};let clt=class{constructor(){Ns(this,"baseUrl");Ns(this,"apiKey");Ns(this,"timeout");this.baseUrl=Ql.baseUrl,this.apiKey=Ql.apiKey,this.timeout=Ql.timeout}async makeRequest(t,n={}){var s;const r=`${this.baseUrl}${t}`,i={method:"GET",headers:{"Content-Type":"application/json","X-API-Key":this.apiKey,...n.headers},...n};try{const a=new AbortController,o=setTimeout(()=>a.abort(),this.timeout),c=await fetch(r,{...i,signal:a.signal});if(clearTimeout(o),!c.ok){if(c.status===401)throw new Error("Invalid API key. Please check your CV_API_KEY configuration.");if(c.status===404)throw new Error(`API endpoint not found: ${t}`);if(c.status===403)throw new Error("Access forbidden. Please check your API permissions.");let d=`API request failed: ${c.status}`;try{const f=await c.json();d=((s=f.error)==null?void 0:s.message)||f.message||d}catch{d=c.statusText||d}throw new Error(d)}return await c.json()}catch(a){throw a instanceof Error?a.name==="AbortError"?new Error("Request timeout"):(console.error("CV API Error:",a.message),a):(console.error("CV API Error:",a),new Error("Unknown API error occurred"))}}async checkHealth(){try{return{status:"healthy",message:"API is accessible",...await this.makeRequest("/health")}}catch(t){return console.error("Health check failed:",t),{status:"error",message:t instanceof Error?t.message:"API not accessible"}}}async getTemplates(){return this.makeRequest("/api/templates")}transformToAPIPayload(t){var r,i,s,a,o,c,u,d,f,h,p,m,g,v,y;const n={personalInfo:{name:t.personalInfo.name||"",title:t.personalInfo.title||"",email:t.personalInfo.email||"",phone:t.personalInfo.phone||"",location:t.personalInfo.location||"",profileImage:t.personalInfo.profilePhoto,linkedIn:t.personalInfo.linkedIn,github:t.personalInfo.github,website:t.personalInfo.website,twitter:t.personalInfo.twitter,instagram:t.personalInfo.instagram,facebook:t.personalInfo.facebook},company:"Frank Digital AB",summary:{introduction:((r=t.summary)==null?void 0:r.introduction)||"",highlights:((i=t.summary)==null?void 0:i.keyStrengths)||[],specialties:((s=t.summary)==null?void 0:s.specialties)||[]},careerObjective:((a=t.summary)==null?void 0:a.careerObjective)||"",employment:((o=t.experience)==null?void 0:o.map(x=>({period:x.period||"",position:x.position||"",company:x.company||"",description:x.description||"",technologies:x.technologies||[],achievements:x.achievements||[]})))||[],roles:((c=t.roles)==null?void 0:c.map(x=>({name:x.title||"",description:"",responsibilities:x.skills||[]})))||[],projects:((u=t.projects)==null?void 0:u.map(x=>({period:x.period||"Projektperiod",type:x.type||"Utvecklare",title:x.name||"",description:x.description||"",technologies:x.technologies||[],achievements:x.achievements||[],url:x.url})))||[],education:((d=t.education)==null?void 0:d.map(x=>({period:x.period||"",degree:x.degree||"",institution:x.institution||"",specialization:x.field,honors:x.honors,location:x.location})))||[],certifications:((f=t.certifications)==null?void 0:f.map(x=>({year:x.date||"",title:x.name||"",issuer:x.issuer||"",description:x.credentialId?`Credential ID: ${x.credentialId}`:void 0,url:x.url,expiration:x.expirationDate})))||[],courses:((h=t.courses)==null?void 0:h.map(x=>({name:x.name||"",institution:x.provider||"",year:x.completionDate||"",description:x.duration,status:x.status,grade:x.grade})))||[],competencies:((p=t.skills)==null?void 0:p.map(x=>({category:x.category,items:x.items})))||[],languages:((m=t.languages)==null?void 0:m.map(x=>({language:x.language||"",proficiency:x.proficiency||""})))||[],closing:t.closing?{statement:t.closing.text||"",signature:"",date:"",location:((g=t.closing.contact)==null?void 0:g.location)||""}:void 0,template:t.template||((v=t.templateSettings)==null?void 0:v.template)||"andervang-consulting",format:t.format||"pdf",styling:{primaryColor:(((y=t.templateSettings)==null?void 0:y.colorScheme)==="blue","#003D82"),accentColor:"#FF6B35"},templateSettings:t.templateSettings?{template:t.templateSettings.template,colorScheme:t.templateSettings.colorScheme,fontSize:t.templateSettings.fontSize,spacing:t.templateSettings.margins,showPhoto:!0,showSocial:!0,headerStyle:"default",sectionOrder:[]}:void 0};return JSON.parse(JSON.stringify(n))}async generateCV(t){const n=this.transformToAPIPayload(t),r=`${this.baseUrl}/api`,i=Ql.useLocalAPI;return console.log(` Generating CV with ${i?"LOCAL":"REMOTE"} Netlify Functions`),console.log(` Endpoint: ${r}`),this.makeRequest("/api",{method:"POST",body:JSON.stringify(n)})}async generateAllFormats(t){const n=this.transformToAPIPayload(t),{format:r,...i}=n,s=`${this.baseUrl}/api/batch/formats`,a=Ql.useLocalAPI;return console.log(` Generating all formats with ${a?"LOCAL":"REMOTE"} Netlify Functions`),console.log(` Endpoint: ${s}`),this.makeRequest("/api/batch/formats",{method:"POST",body:JSON.stringify(i)})}async previewTemplate(t,n){return this.makeRequest("/api/customization/preview",{method:"POST",body:JSON.stringify({templateId:t,customization:n})})}};const ult=new clt;function dlt(){const[e,t]=w.useState([]),[n,r]=w.useState(!0),[i,s]=w.useState(null),a=w.useCallback(async()=>{try{return(await ult.getTemplates()).data||[]}catch(d){return console.error("Error fetching templates from API:",d),[]}},[]),o=w.useCallback(async()=>{try{const{data:d,error:f}=await ie.from("cv_templates").select("*").eq("is_active",!0).order("name");if(f)throw f;return d||[]}catch(d){return console.error("Error fetching templates from DB:",d),[]}},[]),c=w.useCallback(async()=>{try{r(!0);const d=await a();if(d.length>0){for(const f of d)await ie.from("cv_templates").upsert({id:f.id,name:f.name,description:f.description,template_type:f.template_type,industry_focus:f.industry_focus,layout_structure:f.layout_structure,styling_config:f.styling_config,sections_config:f.sections_config,is_premium:f.is_premium,is_active:f.is_active,preview_image_url:f.preview_image_url,updated_at:new Date().toISOString()},{onConflict:"id"});t(d)}else{const f=await o();t(f)}}catch(d){console.error("Error syncing templates:",d),s(d instanceof Error?d.message:"Failed to load templates");const f=await o();t(f)}finally{r(!1)}},[a,o]),u=()=>[{id:"frank-digital",name:"Frank Digital Professional",description:"Clean, modern template perfect for tech professionals",template_type:"professional",industry_focus:"technology",layout_structure:{},styling_config:{},sections_config:{},is_premium:!1,is_active:!0,preview_image_url:void 0,created_at:new Date().toISOString()},{id:"minimal-modern",name:"Minimal Modern",description:"Minimalist design with clean typography",template_type:"modern",industry_focus:"general",layout_structure:{},styling_config:{},sections_config:{},is_premium:!1,is_active:!0,preview_image_url:void 0,created_at:new Date().toISOString()}];return w.useEffect(()=>{e.length===0&&!n&&t(u())},[e.length,n]),w.useEffect(()=>{c()},[c]),{templates:e,loading:n,error:i,refetch:c,getDefaultTemplates:u}}class flt{constructor(t){Ns(this,"baseUrl");Ns(this,"apiKey");this.baseUrl=t.baseUrl,this.apiKey=t.apiKey}async generateCV(t){try{const n=`${this.baseUrl}/api`,r=Ql.useLocalAPI;console.log(` Generating CV with ${r?"LOCAL":"REMOTE"} Netlify Functions`),console.log(` Endpoint: ${n}`);const i=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":this.apiKey},body:JSON.stringify(t),signal:AbortSignal.timeout(45e3)});if(!i.ok){const s=await i.text();throw new Error(`HTTP ${i.status}: ${i.statusText} - ${s}`)}return await i.json()}catch(n){throw console.error("CV Generation API Error:",n),n.name==="TimeoutError"?new Error("CV generation timed out. Serverless functions may take longer on first request (cold start). Please try again."):n.message.includes("Function invocation timeout")?new Error("Generation timed out. This can happen with complex CVs or during cold starts. Please try again in a moment."):n.message.includes("Failed to fetch")?new Error("Network error: Unable to reach CV generation service. Check if the Netlify function is deployed and accessible."):n}}async getTemplates(){return[{id:"andervang-consulting",name:"Andervang Consulting",description:"Professional consultant CV template with modern design"},{id:"modern",name:"Modern",description:"Clean and contemporary design"},{id:"classic",name:"Classic",description:"Traditional professional format"}]}async generateAllFormats(t){return await(await fetch(`${this.baseUrl}/api/batch/formats`,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":this.apiKey},body:JSON.stringify(t),signal:AbortSignal.timeout(9e4)})).json()}async healthCheck(){try{return(await fetch(`${this.baseUrl}/health`,{headers:{"X-API-Key":this.apiKey},signal:AbortSignal.timeout(5e3)})).ok}catch{return!1}}validatePayload(t){var i,s,a;const n=[];(i=t.personalInfo)!=null&&i.name||n.push("Personal info: Name is required"),(s=t.personalInfo)!=null&&s.title||n.push("Personal info: Title is required"),(a=t.personalInfo)!=null&&a.email||n.push("Personal info: Email is required"),t.template||n.push("Template is required"),t.format||n.push("Format is required"),t.format&&!["pdf","docx","html"].includes(t.format)&&n.push("Format must be one of: pdf, docx, html");const r=["andervang-consulting","modern","classic"];return t.template&&!r.includes(t.template)&&n.push(`Template must be one of: ${r.join(", ")}`),{valid:n.length===0,errors:n}}async downloadCV(t,n){try{const r=await fetch(t);if(!r.ok)throw new Error(`Failed to download CV: ${r.statusText}`);const i=await r.blob(),s=window.URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download=n,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(s),document.body.removeChild(a)}catch(r){throw console.error("Download failed:",r),new Error("Failed to download CV file")}}async checkHealth(){if(!await this.healthCheck())throw new Error("CV Generation API is not available")}}const $3=new flt(Ql),oh=$3;async function hlt(e){return $3.generateCV(e)}async function plt(e,t){const n={};for(const r of t){const i={...e,format:r};n[r]=await $3.generateCV(i)}return n}function Z7(e){var n,r;return{personalInfo:{name:e.personalInfo.name,title:e.personalInfo.title,email:e.personalInfo.email,phone:e.personalInfo.phone||"",location:e.personalInfo.location||"",profileImage:e.personalInfo.profileImage},company:e.company,summary:{introduction:e.summary.introduction,highlights:e.summary.highlights,specialties:e.summary.specialties||[]},employment:(e.employment||[]).map(i=>({period:i.period,position:i.position,company:i.company,description:i.description,technologies:i.technologies||[],achievements:i.achievements||[]})),projects:(e.projects||[]).map(i=>({period:i.period,type:i.type,title:i.title,description:i.description,technologies:i.technologies||[]})),education:(e.education||[]).map(i=>({period:i.period,degree:i.degree,institution:i.institution,specialization:i.specialization})),certifications:(e.certifications||[]).map(i=>({year:i.year,title:i.title,issuer:i.issuer,description:i.description})),competencies:(e.competencies||[]).map(i=>{var s;return{category:i.category,items:((s=i.skills)==null?void 0:s.map(a=>a.name))||[]}}),languages:(e.languages||[]).map(i=>({language:i.language,proficiency:i.proficiency})),template:e.template||"andervang-consulting",format:e.format||"pdf",styling:{primaryColor:((n=e.styling)==null?void 0:n.primaryColor)||"#003D82",accentColor:((r=e.styling)==null?void 0:r.accentColor)||"#FF6B35"}}}function _0(e,t={}){var s,a,o,c,u,d,f,h,p,m,g,v,y,x,b,S,E,N,_,k,T,A,j,D,I,M,L,P,B,R,F,O,Q,Y,$,ye,Te;const{format:n="pdf",template:r="andervang-consulting",company:i="Frank Digital AB"}=t;return{personalInfo:{name:((s=e.personalInfo)==null?void 0:s.name)||"",title:((a=e.personalInfo)==null?void 0:a.title)||"",email:((o=e.personalInfo)==null?void 0:o.email)||"",phone:((c=e.personalInfo)==null?void 0:c.phone)||"",location:((u=e.personalInfo)==null?void 0:u.location)||"",profileImage:(d=e.personalInfo)==null?void 0:d.profilePhoto,linkedIn:(f=e.personalInfo)==null?void 0:f.linkedIn,github:(h=e.personalInfo)==null?void 0:h.github,website:(p=e.personalInfo)==null?void 0:p.website,twitter:(m=e.personalInfo)==null?void 0:m.twitter,instagram:(g=e.personalInfo)==null?void 0:g.instagram,facebook:(v=e.personalInfo)==null?void 0:v.facebook},company:i,summary:{introduction:((y=e.summary)==null?void 0:y.introduction)||"",highlights:((x=e.summary)==null?void 0:x.keyStrengths)||[],specialties:((b=e.summary)==null?void 0:b.specialties)||[],careerObjective:(S=e.summary)==null?void 0:S.careerObjective},employment:(E=e.experience)==null?void 0:E.map(U=>({period:U.period||"",position:U.position||"",company:U.company||"",description:U.description||"",technologies:U.technologies||[],achievements:U.achievements||[],url:U.url,location:U.location})),projects:(N=e.projects)==null?void 0:N.map(U=>({period:U.period||"Projektperiod",type:U.type||"Utvecklare",title:U.name||"",description:U.description||"",technologies:U.technologies||[],achievements:U.achievements||[],url:U.url})),education:(_=e.education)==null?void 0:_.map(U=>({period:U.period||"",degree:U.degree||"",institution:U.institution||"",specialization:U.field,gpa:U.gpa,location:U.location,honors:U.honors})),certifications:(k=e.certifications)==null?void 0:k.map(U=>({year:U.date||"",title:U.name||"",issuer:U.issuer||"",description:U.credentialId?`Credential ID: ${U.credentialId}`:void 0,credentialId:U.credentialId,url:U.url,expirationDate:U.expirationDate})),courses:(T=e.courses)==null?void 0:T.map(U=>({name:U.name||"",provider:U.provider||"",completionDate:U.completionDate||"",duration:U.duration,credentialId:U.credentialId,url:U.url,status:U.status,grade:U.grade})),competencies:mlt(e.skills||[]),languages:(A=e.languages)==null?void 0:A.map(U=>({language:U.language||"",proficiency:U.proficiency||""})),roles:(j=e.roles)==null?void 0:j.map(U=>({title:U.title||"",skills:U.skills||[]})),competencyCategories:(D=e.competencies)==null?void 0:D.map(U=>{var K;return{category:U.category||"",skills:((K=U.skills)==null?void 0:K.map(fe=>({name:fe.name||"",level:fe.level||"Intermediate",yearsOfExperience:fe.yearsOfExperience})))||[]}}),closing:e.closing?{text:e.closing.text||"",contact:{email:((I=e.closing.contact)==null?void 0:I.email)||((M=e.personalInfo)==null?void 0:M.email)||"",phone:((L=e.closing.contact)==null?void 0:L.phone)||((P=e.personalInfo)==null?void 0:P.phone)||"",location:((B=e.closing.contact)==null?void 0:B.location)||((R=e.personalInfo)==null?void 0:R.location)||"",company:((F=e.closing.contact)==null?void 0:F.company)||i}}:void 0,templateSettings:e.templateSettings?{template:e.templateSettings.template||r,theme:e.templateSettings.theme||"blue",showPhoto:e.templateSettings.showPhoto??!0,showReferences:e.templateSettings.showReferences??!1,language:e.templateSettings.language||"en",fontSize:e.templateSettings.fontSize||"medium",margins:e.templateSettings.margins||"normal",colorScheme:e.templateSettings.colorScheme||"blue"}:void 0,template:r,format:n,styling:{primaryColor:((O=e.templateSettings)==null?void 0:O.colorScheme)==="blue"?"#003D82":void 0,accentColor:"#FF6B35",fontSize:((Q=e.templateSettings)==null?void 0:Q.fontSize)==="small"||((Y=e.templateSettings)==null?void 0:Y.fontSize)==="large"||(($=e.templateSettings)==null?void 0:$.fontSize)==="medium"?e.templateSettings.fontSize:"medium",spacing:((ye=e.templateSettings)==null?void 0:ye.margins)==="compact"?"compact":((Te=e.templateSettings)==null?void 0:Te.margins)==="relaxed"?"relaxed":"normal"}}}function mlt(e){if(!e||e.length===0)return[];const t={1:"beginner",2:"intermediate",3:"intermediate",4:"advanced",5:"expert"},n=[];return e.forEach(r=>{r.items.forEach(i=>{let s,a;typeof i=="string"?(s=i,a="intermediate"):(s=i.name,a=t[i.level||3]||"intermediate");const o=glt(a),c=n.find(d=>d.category===o),u={name:s,level:a};c?c.skills.push(u):n.push({category:o,skills:[u]})})}),n}function glt(e){return{expert:"Expert inom omrdet",advanced:"Mycket hg kompetens",intermediate:"Hg kompetens",beginner:"Grundlggande kompetens"}[e]||"Hg kompetens"}function vlt(){const[e,t]=w.useState(!1),[n,r]=w.useState(0),[i,s]=w.useState(null),[a,o]=w.useState(null),c=async(p,m,g,v=["pdf"])=>{try{const{data:y,error:x}=await ie.from("cv_generation_jobs").insert([{cv_profile_id:p,version_id:m,template_id:g,formats:v,status:"pending",progress:0}]).select().single();if(x)throw x;return y}catch(y){return console.error("Error creating generation job:",y),null}},u=async(p,m)=>{try{const{error:g}=await ie.from("cv_generation_jobs").update(m).eq("id",p);if(g)throw g;return!0}catch(g){return console.error("Error updating generation job:",g),!1}},d=w.useCallback(async(p,m,g="pdf",v,y)=>{t(!0),r(0),o(null);let x=null;try{v&&y&&(x=await c(v,y,m,[g]),s(x));const b=_0(p,{template:"andervang-consulting",company:"Frank Digital AB"});r(25),x&&await u(x.id,{status:"processing",progress:25});const S={...b,format:g},E=Z7(S),N=await oh.generateCV(E);return r(75),x&&await u(x.id,{progress:75}),r(100),x&&await u(x.id,{status:"completed",progress:100,results:{[g]:N},completed_at:new Date().toISOString()}),t(!1),N}catch(b){const S=b instanceof Error?b.message:"Generation failed";throw o(S),t(!1),x&&await u(x.id,{status:"failed",error_message:S}),b}},[]),f=w.useCallback(async(p,m,g,v)=>{var b,S,E,N,_;t(!0),r(0),o(null);const y=["pdf","html","docx"];let x=null;try{g&&v&&(x=await c(g,v,m,y),s(x));const k=_0(p,{template:"andervang-consulting",company:"Frank Digital AB"});r(25),x&&await u(x.id,{status:"processing",progress:25});const T=Z7(k),A=await oh.generateAllFormats(T);if(r(75),x&&await u(x.id,{progress:75}),r(100),x){const j={data:{results:{},summary:{successful:A.success&&((S=(b=A.data)==null?void 0:b.formats)==null?void 0:S.length)||0,total:((N=(E=A.data)==null?void 0:E.formats)==null?void 0:N.length)||0}}};(_=A.data)!=null&&_.formats&&A.data.formats.forEach(D=>{j.data.results[D.format]={success:!0,fileUrl:D.url}}),await u(x.id,{status:"completed",progress:100,results:{[y.join("-")]:j},completed_at:new Date().toISOString()})}return t(!1),A}catch(k){const T=k instanceof Error?k.message:"Generation failed";throw o(T),t(!1),x&&await u(x.id,{status:"failed",error_message:T}),k}},[]),h=w.useCallback(async()=>{try{return await oh.checkHealth(),!0}catch(p){return console.error("CV API health check failed:",p),!1}},[]);return{isGenerating:e,generationProgress:n,generationJob:i,error:a,generateCV:d,generateAllFormats:f,checkAPIHealth:h,setError:o}}function eU(e){return e.startsWith("data:")}function ylt(e){const t=e.indexOf("base64,");if(t===-1)throw new Error("Invalid base64 data URL");return e.substring(t+7)}function xlt(e,t){const n=atob(e),r=new Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);const i=new Uint8Array(r);return new Blob([i],{type:t})}function blt(e){if(console.log("Downloading file:",{filename:e.filename,mimeType:e.mimeType,isBase64:eU(e.content),contentPreview:e.content.substring(0,50)+"..."}),eU(e.content)){console.log("Processing base64 data URL...");const t=ylt(e.content),n=xlt(t,e.mimeType);console.log("Created blob:",{size:n.size,type:n.type}),wlt(n,e.filename)}else{console.log("Processing regular URL...");const t=document.createElement("a");t.href=e.content,t.download=e.filename,t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}function wlt(e,t){console.log("Creating download link for blob:",{size:e.size,type:e.type,filename:t});const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,console.log("Download link created:",{href:n.substring(0,50)+"...",download:t}),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n),console.log("Download initiated and cleanup completed")}function Elt(e={},t="pdf",n){const i=(e.fullName||`${e.firstName||""} ${e.lastName||""}`.trim()||"CV").replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"_"),s=n?`_${n.replace(/[^a-zA-Z0-9]/g,"_")}`:"",a=new Date().toISOString().split("T")[0];return`${i}${s}_${a}.${t}`}function Slt(e){return{pdf:"application/pdf",html:"text/html",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",txt:"text/plain",json:"application/json",xml:"application/xml"}[e.toLowerCase()]||"application/octet-stream"}function Nlt({cvData:e,profile:t,currentVersion:n,className:r=""}){var k,T,A,j,D;const[i,s]=w.useState("frank-digital"),[a,o]=w.useState("pdf"),[c,u]=w.useState(null),{templates:d,loading:f}=dlt(),{isGenerating:h,generationProgress:p,error:m,generateCV:g,generateAllFormats:v,checkAPIHealth:y}=vlt(),[x,b]=w.useState(!0);w.useEffect(()=>{const M=setTimeout(async()=>{try{const L=await y();b(L)}catch(L){console.warn("API health check skipped:",L),b(!0)}},1e3);return()=>clearTimeout(M)},[y]);const S=(I,M,L)=>{const P=d.find(R=>R.id===L),B=Elt({fullName:e.personalInfo.name},M,P==null?void 0:P.name);blt({content:I,filename:B,mimeType:Slt(M)})},E=async()=>{try{const I=await g(e,i,a,t.id,n==null?void 0:n.id);u(I)}catch(I){console.error("Generation failed:",I)}},N=async()=>{try{const I=await v(e,i,t.id,n==null?void 0:n.id);u(I)}catch(I){console.error("Generation failed:",I)}},_=[{value:"pdf",label:"PDF",description:"Best for printing and sharing"},{value:"html",label:"HTML",description:"Web-friendly format"},{value:"docx",label:"Word",description:"Editable document format"}];return l.jsx("div",{className:`space-y-4 ${r}`,children:l.jsxs(Z,{children:[l.jsx(de,{children:l.jsxs(he,{className:"flex items-center gap-2",children:[l.jsx(en,{className:"h-5 w-5"}),"Generate CV"]})}),l.jsxs(ee,{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx("span",{className:"text-muted-foreground",children:"API Status:"}),x===null?l.jsx(Ot,{variant:"outline",children:"Checking..."}):x?l.jsxs(Ot,{variant:"default",className:"bg-green-100 text-green-700",children:[l.jsx(Er,{className:"h-3 w-3 mr-1"}),"Online"]}):l.jsxs(Ot,{variant:"destructive",children:[l.jsx(gd,{className:"h-3 w-3 mr-1"}),"Offline"]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Template"}),l.jsxs(gn,{value:i,onValueChange:s,children:[l.jsx(ln,{children:l.jsx(vn,{placeholder:"Select a template"})}),l.jsx(cn,{children:f?l.jsx(Ve,{value:"loading",disabled:!0,children:"Loading templates..."}):d.map(I=>l.jsx(Ve,{value:I.id,children:l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:I.name}),l.jsx("div",{className:"text-xs text-muted-foreground",children:I.description})]})},I.id))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Format"}),l.jsxs(gn,{value:a,onValueChange:o,children:[l.jsx(ln,{children:l.jsx(vn,{placeholder:"Select a format"})}),l.jsx(cn,{children:_.map(I=>l.jsx(Ve,{value:I.value,children:l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:I.label}),l.jsx("div",{className:"text-xs text-muted-foreground",children:I.description})]})},I.value))})]})]}),h&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(qo,{className:"h-4 w-4 animate-spin"}),l.jsx("span",{className:"text-sm",children:"Generating CV..."})]}),l.jsx(B3,{value:p,className:"w-full"})]}),m&&l.jsxs($c,{variant:"destructive",children:[l.jsx(gd,{className:"h-4 w-4"}),l.jsx(Uc,{children:m})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(H,{onClick:E,disabled:h||!x||!i,className:"w-full",children:[h?l.jsx(qo,{className:"h-4 w-4 mr-2 animate-spin"}):l.jsx(Wo,{className:"h-4 w-4 mr-2"}),"Generate ",a.toUpperCase()]}),l.jsx(H,{variant:"outline",onClick:N,disabled:h||!x||!i,className:"w-full",children:"Generate All Formats"})]}),c&&l.jsxs("div",{className:"space-y-3 p-3 border rounded-lg bg-green-50",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Er,{className:"h-4 w-4 text-green-600"}),l.jsx("span",{className:"font-medium text-green-800",children:"Generation Complete!"})]}),(k=c.data)!=null&&k.fileUrl?l.jsxs("div",{className:"space-y-2",children:[l.jsxs("p",{className:"text-sm text-green-700",children:["Format: ",((T=c.data.format)==null?void 0:T.toUpperCase())||a.toUpperCase()]}),l.jsxs(H,{size:"sm",className:"w-full",onClick:()=>{var I;return((I=c.data)==null?void 0:I.fileUrl)&&S(c.data.fileUrl,c.data.format||a,i)},children:[l.jsx(Wo,{className:"h-3 w-3 mr-2"}),"Download CV"]})]}):(A=c.data)!=null&&A.results?l.jsxs("div",{className:"space-y-2",children:[l.jsxs("p",{className:"text-sm text-green-700",children:["Generated ",((j=c.data.summary)==null?void 0:j.successful)||0," of"," ",((D=c.data.summary)==null?void 0:D.total)||0," formats"]}),l.jsx("div",{className:"space-y-1",children:Object.entries(c.data.results).map(([I,M])=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm font-medium",children:I.toUpperCase()}),M.success?l.jsxs(H,{size:"sm",variant:"outline",onClick:()=>M.fileUrl&&S(M.fileUrl,I,i),children:[l.jsx(Wo,{className:"h-3 w-3 mr-1"}),"Download"]}):l.jsx(Ot,{variant:"destructive",children:"Failed"})]},I))})]}):null]})]})]})})}function _lt({isOpen:e,onClose:t,cvData:n}){const[r,i]=w.useState(new Set(["pdf"])),[s,a]=w.useState("idle"),[o,c]=w.useState(0),[u,d]=w.useState([]),[f,h]=w.useState(""),p=[{value:"pdf",label:"PDF",icon:""},{value:"docx",label:"Word (DOCX)",icon:""},{value:"html",label:"HTML",icon:""}],m=x=>{const b=new Set(r);b.has(x)?b.delete(x):b.add(x),i(b)},g=async()=>{if(r.size===0){h("Please select at least one format");return}a("generating"),c(0),h(""),d([]);try{const x=_0(n,{template:"andervang-consulting",company:"Frank Digital AB"}),{format:b,...S}=x,E=Array.from(r),N=E.map(_=>({format:_,status:"pending"}));if(d(N),E.length===1){c(30);const _={...x,format:E[0]},k=await oh.generateCV(_);if(c(80),k.success)d([{format:E[0],status:"success",fileUrl:k.data.fileUrl}]),a("success"),c(100);else throw new Error("Generation failed")}else{c(30);const _=await oh.generateMultiFormatCV(S,E);c(80);const k=E.map(A=>{const j=_[A];return j?j.success?{format:A,status:"success",fileUrl:j.data.fileUrl}:{format:A,status:"error",error:j.error.message||"Generation failed"}:{format:A,status:"error",error:"No response received"}});d(k);const T=k.every(A=>A.status==="success");if(a(T?"success":"error"),c(100),!T){const A=k.filter(j=>j.status==="error").map(j=>`${j.format.toUpperCase()}: ${j.error}`).join(", ");h(`Some formats failed: ${A}`)}}}catch(x){console.error("Generation error:",x),a("error"),h(x instanceof Error?x.message:"An unexpected error occurred"),c(0),d(Array.from(r).map(b=>({format:b,status:"error",error:x instanceof Error?x.message:"Generation failed"})))}},v=async x=>{if(x.fileUrl)try{const b=`${n.personalInfo.name.replace(/\s+/g,"_")}_CV.${x.format}`;await oh.downloadCV(x.fileUrl,b)}catch(b){console.error("Download error:",b),h(`Failed to download ${x.format.toUpperCase()} file`)}},y=()=>{s!=="generating"&&(a("idle"),c(0),d([]),h(""),t())};return l.jsx(xt,{open:e,onOpenChange:y,children:l.jsxs(ft,{className:"sm:max-w-[500px]",children:[l.jsxs(ht,{children:[l.jsxs(pt,{className:"flex items-center gap-2",children:[l.jsx(en,{className:"w-5 h-5"}),"Generate CV"]}),l.jsx(iu,{children:"Select the formats you want to generate and download your CV."})]}),l.jsxs("div",{className:"space-y-6 py-4",children:[s==="idle"&&l.jsxs("div",{className:"space-y-3",children:[l.jsx(X,{className:"text-sm font-medium",children:"Select Formats:"}),l.jsx("div",{className:"space-y-2",children:p.map(x=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(na,{id:x.value,checked:r.has(x.value),onCheckedChange:()=>m(x.value)}),l.jsxs(X,{htmlFor:x.value,className:"text-sm font-normal cursor-pointer flex items-center gap-2",children:[l.jsx("span",{children:x.icon}),l.jsx("span",{children:x.label})]})]},x.value))})]}),s==="generating"&&l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[l.jsx(qo,{className:"w-4 h-4 animate-spin"}),l.jsx("span",{children:"Generating your CV..."})]}),l.jsx(B3,{value:o,className:"w-full"})]}),(s==="success"||s==="error")&&u.length>0&&l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{className:"text-sm font-medium",children:"Results:"}),l.jsx("div",{className:"space-y-2",children:u.map(x=>l.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[x.status==="success"&&l.jsx(sV,{className:"w-4 h-4 text-green-600"}),x.status==="error"&&l.jsx(gd,{className:"w-4 h-4 text-red-600"}),x.status==="generating"&&l.jsx(qo,{className:"w-4 h-4 animate-spin"}),l.jsx("span",{className:"text-sm font-medium",children:x.format.toUpperCase()}),x.error&&l.jsxs("span",{className:"text-xs text-red-600",children:["(",x.error,")"]})]}),x.status==="success"&&x.fileUrl&&l.jsxs(H,{size:"sm",variant:"outline",onClick:()=>v(x),children:[l.jsx(Wo,{className:"w-4 h-4 mr-1"}),"Download"]})]},x.format))})]}),f&&l.jsxs($c,{variant:"destructive",children:[l.jsx(gd,{className:"h-4 w-4"}),l.jsx(Uc,{children:f})]})]}),l.jsxs(gp,{children:[s==="idle"&&l.jsxs(l.Fragment,{children:[l.jsx(H,{variant:"outline",onClick:y,children:"Cancel"}),l.jsx(H,{onClick:g,disabled:r.size===0,children:"Generate CV"})]}),s==="generating"&&l.jsxs(H,{disabled:!0,children:[l.jsx(qo,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}),(s==="success"||s==="error")&&l.jsx(H,{onClick:y,children:"Close"})]})]})})}function klt({data:e,onChange:t}){const[n,r]=w.useState(""),[i,s]=w.useState(null),a=()=>{const f={title:"New Role",skills:[]};t([...e,f]),s(e.length)},o=(f,h,p)=>{const m=e.map((g,v)=>v===f?{...g,[h]:p}:g);t(m)},c=f=>{const h=e.filter((p,m)=>m!==f);t(h),i===f&&s(null)},u=f=>{if(!n.trim())return;const h=e.map((p,m)=>m===f?{...p,skills:[...p.skills,n.trim()]}:p);t(h),r("")},d=(f,h)=>{const p=e.map((m,g)=>g===f?{...m,skills:m.skills.filter((v,y)=>y!==h)}:m);t(p)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Professional Roles"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Define role-based competencies for the Andervang Consulting template"})]}),l.jsxs(H,{onClick:a,className:"gap-2",children:[l.jsx(Xe,{className:"h-4 w-4"}),"Add Role"]})]}),l.jsxs("div",{className:"grid gap-4",children:[e.map((f,h)=>l.jsxs(Z,{className:"relative",children:[l.jsx(de,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(he,{className:"text-base",children:i===h?l.jsx(re,{value:f.title,onChange:p=>o(h,"title",p.target.value),onBlur:()=>s(null),onKeyDown:p=>{p.key==="Enter"&&s(null)},autoFocus:!0,className:"text-base font-semibold"}):l.jsx("span",{onClick:()=>s(h),className:"cursor-pointer hover:text-blue-600",children:f.title})}),l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>c(h),className:"text-red-600 hover:text-red-700",children:l.jsx(lr,{className:"h-4 w-4"})})]})}),l.jsx(ee,{className:"space-y-3",children:l.jsxs("div",{children:[l.jsx(X,{className:"text-sm font-medium text-gray-700",children:"Skills"}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1 mb-2 min-h-[2rem]",children:f.skills.map((p,m)=>l.jsxs(Ot,{variant:"secondary",className:"gap-1",children:[p,l.jsx(Qn,{className:"h-3 w-3 cursor-pointer hover:text-red-600",onClick:()=>d(h,m)})]},m))}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(re,{placeholder:"Add skill...",value:n,onChange:p=>r(p.target.value),onKeyDown:p=>{p.key==="Enter"&&(p.preventDefault(),u(h))},className:"flex-1"}),l.jsx(H,{onClick:()=>u(h),size:"sm",disabled:!n.trim(),children:"Add"})]})]})})]},h)),e.length===0&&l.jsx(Z,{className:"border-dashed",children:l.jsxs(ee,{className:"flex flex-col items-center justify-center py-12 text-center",children:[l.jsx("p",{className:"text-gray-500 mb-4",children:"No professional roles defined yet."}),l.jsxs(H,{onClick:a,className:"gap-2",children:[l.jsx(Xe,{className:"h-4 w-4"}),"Add Your First Role"]})]})})]})]})}const tU=["Beginner","Intermediate","Advanced","Expert"];function nU({data:e,onChange:t}){const[n,r]=w.useState({name:"",level:"Intermediate",yearsOfExperience:void 0}),[i,s]=w.useState(null),a=i?e[i.categoryIndex].skills[i.skillIndex]:null,[o,c]=w.useState(""),[u,d]=w.useState("Intermediate"),[f,h]=w.useState("");w.useState(()=>{var E;a&&(c(a.name),d(a.level),h(((E=a.yearsOfExperience)==null?void 0:E.toString())||""))});const p=()=>{const E={category:"New Category",skills:[]};t([...e,E])},m=(E,N)=>{const _=e.map((k,T)=>T===E?{...k,category:N}:k);t(_)},g=E=>{const N=e.filter((_,k)=>k!==E);t(N)},v=E=>{var k;if(!((k=n.name)!=null&&k.trim()))return;const N={name:n.name.trim(),level:n.level||"Intermediate",yearsOfExperience:n.yearsOfExperience},_=e.map((T,A)=>A===E?{...T,skills:[...T.skills,N]}:T);t(_),r({name:"",level:"Intermediate",yearsOfExperience:void 0})},y=(E,N,_)=>{const k=e.map((T,A)=>A===E?{...T,skills:T.skills.map((j,D)=>D===N?_:j)}:T);t(k),s(null)},x=(E,N)=>{const _=e.map((k,T)=>T===E?{...k,skills:k.skills.filter((A,j)=>j!==N)}:k);t(_)},b=(E,N)=>{var k;const _=e[E].skills[N];c(_.name),d(_.level),h(((k=_.yearsOfExperience)==null?void 0:k.toString())||""),s({categoryIndex:E,skillIndex:N})},S=()=>{i&&y(i.categoryIndex,i.skillIndex,{name:o,level:u,yearsOfExperience:f?parseInt(f):void 0})};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Competencies"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Define structured competencies with skill levels for detailed assessment"})]}),l.jsxs(H,{onClick:p,className:"gap-2",children:[l.jsx(Xe,{className:"h-4 w-4"}),"Add Category"]})]}),l.jsxs("div",{className:"grid gap-6",children:[e.map((E,N)=>{var _;return l.jsxs(Z,{children:[l.jsx(de,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(re,{value:E.category,onChange:k=>m(N,k.target.value),className:"text-base font-semibold bg-transparent border-none p-0 h-auto"}),l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>g(N),className:"text-red-600 hover:text-red-700",children:l.jsx(lr,{className:"h-4 w-4"})})]})}),l.jsxs(ee,{className:"space-y-4",children:[l.jsx("div",{className:"space-y-2",children:E.skills.map((k,T)=>l.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-medium",children:k.name}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Level: ",k.level,k.yearsOfExperience&&`  ${k.yearsOfExperience} years`]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>b(N,T),children:l.jsx(Pg,{className:"h-4 w-4"})}),l.jsx(H,{variant:"ghost",size:"sm",onClick:()=>x(N,T),className:"text-red-600 hover:text-red-700",children:l.jsx(lr,{className:"h-4 w-4"})})]})]},T))}),l.jsxs("div",{className:"grid grid-cols-12 gap-3 p-3 border border-dashed border-gray-300 rounded-lg",children:[l.jsxs("div",{className:"col-span-5",children:[l.jsx(X,{className:"text-xs",children:"Skill Name"}),l.jsx(re,{placeholder:"e.g., React",value:n.name,onChange:k=>r({...n,name:k.target.value}),className:"mt-1"})]}),l.jsxs("div",{className:"col-span-3",children:[l.jsx(X,{className:"text-xs",children:"Level"}),l.jsxs(gn,{value:n.level,onValueChange:k=>r({...n,level:k}),children:[l.jsx(ln,{className:"mt-1",children:l.jsx(vn,{})}),l.jsx(cn,{children:tU.map(k=>l.jsx(Ve,{value:k,children:k},k))})]})]}),l.jsxs("div",{className:"col-span-2",children:[l.jsx(X,{className:"text-xs",children:"Years"}),l.jsx(re,{type:"number",placeholder:"Years",value:n.yearsOfExperience||"",onChange:k=>r({...n,yearsOfExperience:k.target.value?parseInt(k.target.value):void 0}),className:"mt-1"})]}),l.jsx("div",{className:"col-span-2 flex items-end",children:l.jsx(H,{onClick:()=>v(N),size:"sm",disabled:!((_=n.name)!=null&&_.trim()),className:"w-full",children:"Add"})})]})]})]},N)}),e.length===0&&l.jsx(Z,{className:"border-dashed",children:l.jsxs(ee,{className:"flex flex-col items-center justify-center py-12 text-center",children:[l.jsx("p",{className:"text-gray-500 mb-4",children:"No competency categories defined yet."}),l.jsxs(H,{onClick:p,className:"gap-2",children:[l.jsx(Xe,{className:"h-4 w-4"}),"Add Your First Category"]})]})})]}),i&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs(Z,{className:"w-96",children:[l.jsx(de,{children:l.jsx(he,{children:"Edit Skill"})}),l.jsxs(ee,{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(X,{children:"Skill Name"}),l.jsx(re,{value:o,onChange:E=>c(E.target.value)})]}),l.jsxs("div",{children:[l.jsx(X,{children:"Level"}),l.jsxs(gn,{value:u,onValueChange:E=>d(E),children:[l.jsx(ln,{children:l.jsx(vn,{})}),l.jsx(cn,{children:tU.map(E=>l.jsx(Ve,{value:E,children:E},E))})]})]}),l.jsxs("div",{children:[l.jsx(X,{children:"Years of Experience"}),l.jsx(re,{type:"number",value:f,onChange:E=>h(E.target.value)})]}),l.jsxs("div",{className:"flex gap-2 justify-end",children:[l.jsx(H,{variant:"outline",onClick:()=>s(null),children:"Cancel"}),l.jsx(H,{onClick:S,children:"Save"})]})]})]})})]})}function Clt({data:e,onChange:t}){const n=(i,s)=>{t({...e,[i]:s})},r=(i,s)=>{t({...e,contact:{...e.contact,[i]:s}})};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Closing Section"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Add a closing message and contact information for the Andervang Consulting template"})]}),l.jsxs(Z,{children:[l.jsx(de,{children:l.jsx(he,{children:"Closing Message"})}),l.jsx(ee,{className:"space-y-4",children:l.jsxs("div",{children:[l.jsx(X,{htmlFor:"closing-text",children:"Message Text"}),l.jsx(ti,{id:"closing-text",value:e.text,onChange:i=>n("text",i.target.value),placeholder:"Thank you message and call to action...",rows:4,className:"mt-1"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This message will appear at the end of your CV as a professional closing."})]})})]}),l.jsxs(Z,{children:[l.jsx(de,{children:l.jsx(he,{children:"Contact Information"})}),l.jsxs(ee,{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(X,{htmlFor:"contact-email",children:"Email"}),l.jsx(re,{id:"contact-email",type:"email",value:e.contact.email,onChange:i=>r("email",i.target.value),placeholder:"contact@example.com",className:"mt-1"})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"contact-phone",children:"Phone"}),l.jsx(re,{id:"contact-phone",type:"tel",value:e.contact.phone,onChange:i=>r("phone",i.target.value),placeholder:"+46 70 123 45 67",className:"mt-1"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(X,{htmlFor:"contact-location",children:"Location"}),l.jsx(re,{id:"contact-location",value:e.contact.location,onChange:i=>r("location",i.target.value),placeholder:"City, Country",className:"mt-1"})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"contact-company",children:"Company"}),l.jsx(re,{id:"contact-company",value:e.contact.company,onChange:i=>r("company",i.target.value),placeholder:"Company Name",className:"mt-1"})]})]})]})]})]})}function roe(e){const[t,n]=w.useState([]),[r,i]=w.useState(null),[s,a]=w.useState(!0),[o,c]=w.useState(null),u=w.useCallback(async()=>{if(!e){n([]),i(null),a(!1);return}try{a(!0);const{data:g,error:v}=await ie.from("cv_versions").select("*").eq("cv_profile_id",e).order("version_number",{ascending:!1});if(v)throw v;const y=(g||[]).map(x=>({...x,data:x.snapshot_data}));n(y),i(y.find(x=>x.is_current)||y[0]||null)}catch(g){console.error("Error fetching CV versions:",g),c(g instanceof Error?g.message:"Unknown error")}finally{a(!1)}},[e]),d=async(g,v,y,x="en")=>{if(!e)return console.error("No cvProfileId provided to createVersion"),null;console.log("Creating version with data:",{cvProfileId:e,versionName:g,roleFocus:y,language:x,dataKeys:Object.keys(v)});try{const S=Math.max(0,...t.map(T=>T.version_number))+1;if(console.log("New version number will be:",S),t.length>=3){const T=t.filter(A=>!A.is_current).sort((A,j)=>A.version_number-j.version_number)[0];T&&(console.log("Removing oldest version:",T.id),await ie.from("cv_versions").delete().eq("id",T.id))}console.log("Setting all versions to non-current for profile:",e);const{error:E}=await ie.from("cv_versions").update({is_current:!1}).eq("cv_profile_id",e);E&&console.error("Error setting versions to non-current:",E);const N={cv_profile_id:e,version_name:g,version_number:S,snapshot_data:v,role_focus:y,language:x,is_current:!0};console.log("Inserting new version with data:",N);const{data:_,error:k}=await ie.from("cv_versions").insert([N]).select().single();if(k)throw console.error("Database error creating version:",k),k;return console.log("New version created successfully:",_),await u(),_}catch(b){return console.error("Error creating CV version:",b),c(b instanceof Error?b.message:"Failed to create version"),null}},f=async(g,v)=>{console.log("Updating version:",{versionId:g,updates:v});try{const y={updated_at:new Date().toISOString()};v.data&&(y.snapshot_data=v.data),v.version_name&&(y.version_name=v.version_name),v.role_focus!==void 0&&(y.role_focus=v.role_focus),v.language&&(y.language=v.language),console.log("Update data to be sent:",y);const{error:x}=await ie.from("cv_versions").update(y).eq("id",g);if(x)throw console.error("Database error updating version:",x),x;return console.log("Version updated successfully"),await u(),!0}catch(y){return console.error("Error updating CV version:",y),c(y instanceof Error?y.message:"Failed to update version"),!1}},h=async g=>{try{await ie.from("cv_versions").update({is_current:!1}).eq("cv_profile_id",e);const{error:v}=await ie.from("cv_versions").update({is_current:!0}).eq("id",g);if(v)throw v;return await u(),!0}catch(v){return console.error("Error setting current version:",v),c(v instanceof Error?v.message:"Failed to set current version"),!1}},p=async g=>{try{const{error:v}=await ie.from("cv_versions").delete().eq("id",g);if(v)throw v;return await u(),!0}catch(v){return console.error("Error deleting CV version:",v),c(v instanceof Error?v.message:"Failed to delete version"),!1}},m=async(g,v)=>{try{const y=t.find(x=>x.id===g);if(!y)throw new Error("Version not found");return await d(v,y.data,y.role_focus,y.language)}catch(y){return console.error("Error duplicating CV version:",y),c(y instanceof Error?y.message:"Failed to duplicate version"),null}};return w.useEffect(()=>{u()},[u]),{versions:t,currentVersion:r,loading:s,error:o,createVersion:d,updateVersion:f,setCurrentVersionById:h,deleteVersion:p,duplicateVersion:m,refetch:u}}const Tlt={personalInfo:{name:"Niklas Andervang",title:"Senior front-end/fullstack utvecklare & tillgnglighetsexpert",email:"niklas.andervang@frankdigital.se",phone:"+46702441323",location:"Stockholm, Sverige",linkedIn:"https://linkedin.com/in/niklasandervang",github:"https://github.com/nandervang",website:"https://andervang.com",twitter:"https://twitter.com/niklasandervang",instagram:"https://instagram.com/niklasandervang",facebook:"https://facebook.com/niklas.andervang",profilePhoto:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAX/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCdABmX/9k="},summary:{introduction:"Niklas r en senior frontend/fullstack utvecklare som r bred med sin kompetens och kan rra sig i flera roller. Niklas har stor erfarenhet frn flertalet frontend-ramverk, dev-ops teknik och moderna arkitekturlsningar under de ca 15 r som Niklas arbetat som utvecklare. Niklas jobbar ofta UI nra och med sin lnga erfarenhet r Niklas ofta ett bollplank fr UX och design kring frbttring av flden och interaktion men ven utformning av komponenter.",keyStrengths:["Senior frontend/fullstack utvecklare med 15+ rs erfarenhet","Bred kompetens inom flera frontend-ramverk och arkitekturlsningar","Tillgnglighetsexpert med IAAP CPACC certifiering","Erfaren inom UX och design fr frbttring av flden och interaktion","Stark bakgrund inom analys, SEO och vrdeskapande","Mentorskap, Scrum Master och teamledarskap"],careerObjective:"Niklas har ocks ett stort intresse fr analys och SEO och brinner fr att skapa vrde och frbttring. Som person r Niklas noggrann och trivs med att ha ett brett perspektiv till saker och ting.",specialties:["React","TypeScript","Tillgnglighet","DevOps","Scrum Master","Next.js"]},roles:[{title:"Frontend Specialist",skills:["React","TypeScript","CSS","HTML","Next.js","Gatsby.js","Vue.js","Angular"]},{title:"Accessibility Expert",skills:["WCAG","AXE","Screen Readers","Keyboard Navigation","ARIA","Color Contrast","Focus Management"]},{title:"DevOps Engineer",skills:["CI/CD","Docker","Kubernetes","Azure","AWS","GitHub Actions","Netlify","Terraform"]},{title:"Full-Stack Developer",skills:["Node.js","Express","MongoDB","PostgreSQL","REST APIs","GraphQL","Microservices"]},{title:"Team Lead & Mentor",skills:["Scrum Master","Team Leadership","Code Review","Mentoring","Agile","Project Management"]},{title:"UX/UI Specialist",skills:["User Research","Prototyping","Figma","Design Systems","Usability Testing","Interaction Design"]}],experience:[{company:"Cisco",position:"Front-end / Fullstack utvecklare / Tillgnglighetsexpert",period:"juni 2024 - pgende",description:"Niklas jobbade i teamet fr deras externa webbplats cisco.com/se. Stora delar av arbetet handlade om migrering och uppgradering av befintliga komponenter, sidor och mallar till en nyare teknisk plattform. Samtidigt som teamet byggde nya funktioner och frbttringar. I projektet jobbade han som fullstack utvecklare men ocks som tillgngligheetsexpert fr att skerstlla att alla komponenter hller hg tillgnglighetsniv.",technologies:["DevOps","Tillgnglighet","TypeScript","WCAG","Test och validering","React","Contentful","Next.js","MongoDB","Event hantering"],achievements:["Migrering och uppgradering av komponenter till nyare teknisk plattform","Utveckling av nya funktioner och frbttringar","Skerstllande av hg tillgnglighetsniv fr alla komponenter"],url:"https://cisco.com/se",location:"Stockholm, Sverige (Remote)"},{company:"Digitalidag / PTS",position:"Front-end / Fullstack utvecklare / Tillgnglighetsexpert",period:"mars 2024 - maj 2024",description:"I projektet fr Digitalidag skapades en hemsida i syfte att informera och dela med sig kring digitaliseringen p lokal niv. Niklas jobbade som full-stack utvecklare med extra fokus p tillgnglighet och anvndarupplevelse. Webbplatsen skapades frn scratch med modern teknik.",technologies:["DevOps","Tillgnglighet","TypeScript","WCAG","Test och validering","React","Contentful","Next.js","MongoDB","Event hantering"],achievements:["Byggde helt ny webbplats frn grunden med fokus p tillgnglighet","Utvecklade custom grnssnitt fr event hantering","Skerstllde hg tillgnglighet fr bde anvndare och redaktrer","Ansvarade fr DevOps, integrationer och frvaltning"]},{company:"DePalma Workwear",position:"Front-end / Fullstack utvecklare",period:"nov. 2023 - juni 2024",description:"DePalma Workwear / Goods r en webbplats med headless data arkitektur frn Sanity CMS med flera integrationer som Shopify och Drip Marketing Automation. Niklas roll i projektet var att underhlla webbplatsen, se ver infra strukturen och miljer, utveckla nya funktioner och frbttringar samt ta fram strategi kring konvertering, tillgnglighet och SEO.",technologies:["SEO","CI/CD","DevOps","HTML & CSS","Tillgnglighet","WCAG","Analytics","Shopify","React","Gatsby.js","Headless","Netlify","Sanity"],achievements:["Underhll webbplats med headless arkitektur","Utvecklade nya funktioner och frbttringar","Tog fram strategi fr konvertering, tillgnglighet och SEO"]},{company:"Postnord",position:"Front-end / Fullstack utvecklare / Tillgnglighetsexpert",period:"dec. 2023 - apr. 2024",description:"Postnord satsar och jobbar globalt och i detta projekt jobbade Niklas med den internationella .com webbplatsen. I projektet skapas nya agnostiska komponenter och block som sedan anvnds i Optimizely CMS. En stor tyngt lades p att validera tillgnglighet fr nya och befintliga komponenterna. Komponenterna skapades med modern teknisk, webkomponents som sedan kan anvndas oavsett teknikval/ramverk.",technologies:["C#","Kvalitetsskring","Tillgnglighet","TypeScript","WCAG","Optimizely","Test och validering","Komponentbibliotek","Stencil.js",".NET","Webcomponents","Dotnet core"],achievements:["Skapade agnostiska komponenter fr Optimizely CMS","Validerade tillgnglighet fr komponenter med modern teknologi","Utvecklade webkomponenter som kan anvndas oavsett ramverk"]},{company:"Skandia",position:"Front-end utvecklare / Tillgnglighetsexpert",period:"mars 2023 - dec. 2023",description:"Niklas hade en specialistroll som tillgnglighetsexpert i det centrala designsystem teamet p Skandia. I projektet skedde en frflyttning av ramverk och ombyggnad av samtliga komponenter fr webb, app och interna system. I arbetet jobbade Niklas med kvalitetsskring, dokumentation och granskning men ocks direkt std fr bde utvecklare och design/ux. Niklas jobbade bde operativt med process och utveckling men samtidigt strategiarbete fr organsiationen.",technologies:["Kvalitetsskring","Strategy","Tillgnglighet","BrowserStack","AXE","TypeScript","WCAG","Komponentbibliotek","Tillgnglighetstester","Figma","Designsystem","React","Storybook","Test och kvalitetsskring","Webdriver IO","End2End-testning"],achievements:["Ledde tillgnglighetsarbetet fr centralt designsystem","Ombyggnad av komponenter fr webb, app och interna system","Dokumentation och granskning samt std fr utvecklare och design","Strategiarbete fr organisationen"]},{company:"Kungliga Tekniska Hgskolan (KTH)",position:"Front-end / Fullstack utvecklare",period:"mars 2023 - okt. 2023",description:"Avdelningen fr energisystem vid KTH r involverad i initiativet fr klimatkompatibel tillvxt (CCG). CCG r ett forskningsprogram finansierat av utvecklingsbistnd som hjlper utvecklingslnder att minska sina koldioxidutslpp samtidigt som mjligheterna till lnsamma investeringar i grn infrastruktur kar. Fr KTH och CCG byggs en lsning fr att bttre dela kunskap mellan olika lnder runt om i vrlden. Tjnsten fljer ocks principer och krav frn https://sustainablewebdesign.org/ och har hga tillgnglighetsstandarder.",technologies:["Testing","DevOps","Tillgnglighet","TypeScript","React","WCAG-analys","Strapi"],achievements:["Utvecklade lsning fr kunskapsdelning mellan lnder","Implementerade hllbara webbdesign-principer","Skerstllde hga tillgnglighetsstandarder","Migrerade frn AWS till Azure"]},{company:"Funmed",position:"Front-end / Fullstack utvecklare",period:"feb. 2023 - okt. 2023",description:"Mentor och std till vrt utvecklingsteam fr vr kund Funmed inom med. tech. Migrationsarbete, buggfix, ny funktionalitet, skmotoroptimering (SEO) och webbanalys.",technologies:["SEO","CI/CD","GitHub","TypeScript","Analytics","React","Contentful","Netlify","GatsbyJS","TagManager","Google TagManager"],achievements:["Mentorskap fr utvecklingsteam inom med. tech","Migrationsarbete och buggfixar","Implementerade ny funktionalitet och SEO-optimering"]},{company:"ForSea",position:"Front-end / Fullstack utvecklare",period:"okt. 2022 - mars 2023",description:"Forsea r en betydande aktr inom frjetransport till Danmark. Projektet handlar om taxfree-varor. En ny e-handelswebbplats har utvecklats med den senaste versionen av Optimizely-plattformen. Frontend-ramverket som anvnds r React, Redux och Typescript. Projektet omfattar en stor produktkatalog med bakomliggande integrationer mot PIM och marknadsfringsverktyg, en skrddarsydd shoppingkorg och orderflde. Niklas hade en ledande roll inom frontendutvecklingen men arbetade ocks mycket med C#, analys och optimering samt tillgnglighet.",technologies:["React","Redux","CSS/HTML",".NET Core","C#","Tillgnglighet","Optimizely","Commerce"],achievements:["Ledande roll inom frontendutveckling fr e-handelsplattform","Utvecklade komplex produktkatalog med PIM-integrationer","Skapade skrddarsydd shoppingkorg och orderflde"]},{company:"Mycronic",position:"Front-end / Fullstack utvecklare / Tillgnglighetsexpert",period:"apr. 2022 - okt. 2022",description:"Mycronic r en global leverantr av hgprecision produktionsutrustning som stndigt utvecklar och frbttrar sina digitala plattformar. Nyligen lanserades en ny webbplats med den senaste Optimizely-plattformen och ett nytt frontendramverk med React och Typescript. Projektet omfattade ocks en migrering av ldre innehll till den nya webbplatsen samt utveckling av nya sidtyper, block och funktioner. Niklas hade en ledande roll som Front-end utvecklare men var ven involverad i Backend-utveckling med C# och dotnet core.",technologies:["C#",".NET Core","CSS/HTML","SCSS","Tailwind","JavaScript","React","Tillgnglighet","Optimizely"],achievements:["Lanserade ny webbplats med senaste Optimizely-plattformen","Migrerade ldre innehll till ny webbplats","Utvecklade nya sidtyper, block och funktioner"]},{company:"M&Ms",position:"Front-end utvecklare / Tillgnglighetsexpert",period:"jan. 2022 - okt. 2022",description:"Mars, Incorporated r en ledande amerikansk multinationell tillverkare av konfektyr, djurfoder och andra livsmedelsprodukter, samt en leverantr av djurvrdstjnster. Bland dess bermda varumrken finns M&M's-godis, som har en framtrdande plats p fretagets webbplats med e-handelsalternativ och mjlighet att skapa skrddarsytt godis. Nyligen genomfrde Mars en omfattande uppgradering av sin webbplattform genom att verg till en modernare teknisk plattform baserad p Commercetools och Amplience. Projektet omfattade ocks en total omarbetning av befintliga moduler och komponenter, inklusive deras konfigurator som lter anvndare skapa eget godis. Niklas spelade en viktig roll som en utvecklare med specialistkunskaper inom tillgnglighet och var en stdjande kraft fr fem utvecklingsteam.",technologies:["React","TypeScript","GraphQL","HTML/CSS","Tillgnglighet","WCAG","Amplience","Commercetools"],achievements:["Omfattande uppgradering till modernare teknisk plattform","Omarbetning av konfigurator fr skrddarsytt godis","Std fr fem utvecklingsteam som tillgnglighetsexpert"]},{company:"Valtech Global",position:"Tillgnglighetsexpert",period:"aug. 2017 - sep. 2022",description:"Under flera r jobbade Niklas som ansvarig fr den interna kompetenssatsningen inom tillgnglighet fr Valtech globalt. Det innefattade att utbilda och arbeta strategiskt med tillgnglighet. Att ta fram arbetsstt och verktyg samt bygga ett ntverk av experter frn olika hll i vrlden. Niklas arbetade omfattande med interna utbildningar, workshops fr bde medarbetare och kunder, dokumentation, frsljning, partnerskap och mycket mer.",technologies:["Team-lead","Way of working","Kvalitetsskring","Strategi","Dokumentation","Ntverk","Kompetensutveckling","Utbildning","Tillgnglighet"],achievements:["Ansvarig fr global kompetenssatsning inom tillgnglighet","Byggde ntverk av experter frn olika hll i vrlden","Genomfrde utbildningar och workshops fr medarbetare och kunder"]},{company:"SJ",position:"Front-end / Fullstack utvecklare / Scrummaster / Tillgnglighetsexpert",period:"juni 2020 - apr. 2022",description:"Ny webbplats fr sj.se. Migrera och bygg om frn angular.js till React-ramverk. Fokus p mikrofrontendarkitektur och komponentbibliotek. Huvudrollen i projektet var som frontend-utvecklare men i projektet var Niklas ocks en del av SJs leveransgrupp som projektledare/Scrum Master. Rollen inkluderade samordning, planering och arkitektur tillsammans med hg niv produktgare och arkitektforum. Dessutom stttade han organisationen i olika tillgnglighetsforum. Niklas jobbade ven ttt med SJs analys team och jobbade med A/B tester, analys och optimering. Verktygen som anvndes var Adobe analytics, Target och Launch. I projektet anvndes react som ramverk och Niklas var med och satte en micro FE arkitektur med olika appar fr diverse flden som interagerar med varandra p avancerad niv.",technologies:["React","Redux","Angular","TypeScript","HTML/CSS","Komponentbibliotek","Design-system","Storybook","Micro FE","Headless","Scrum Agile Safe","Adobe AEM","End2End test","Cypress","Percy","Dev-ops","NodeJS","Express","Azure","Jira","Tooling CI/CD","Adobe Analytics","SEO","Adobe Target","Adobe Launch","A/B test"],achievements:["Migrerade frn Angular.js till React med mikrofrontend-arkitektur","Projektledare/Scrum Master fr SJs leveransgrupp","Implementerade A/B-tester och analys med Adobe-verktyg","Utvecklade avancerad micro FE-arkitektur"]},{company:"Procter & Gamble",position:"Front-end utvecklare / Tillgnglighetsexpert",period:"jan. 2021 - juni 2021",description:"Procter & Gamble (P&G) r en multinationell koncern som ger en stor portflj av varumrken. Frn och med 2021 har P&G ver 65 varumrken under sitt paraply, inklusive vlknda namn som Tide, Gillette, Pampers, Crest och Pantene, bland mnga andra. Niklas utfrde granskning av flera webbplatser kring tillgnglighet, anvndbarhet och kodning enligt bsta praxis som en del av projektet. Han bidrog till att utveckla strategier, rapporter och en backlog av arbete fr bde utveckling och design.",technologies:["HTML/CSS","JavaScript","Kodstandard","Tillgnglighet","WCAG","Webbstrategi","Tillgnglighet granskning"],achievements:["Granskade flera webbplatser fr 65+ varumrken","Utvecklade strategier och rapporter fr tillgnglighet","Skapade backlog fr utveckling och design"]},{company:"Sveriges Riksbank",position:"Front-end / Fullstack utvecklare / Tillgnglighetsexpert",period:"mars 2014 - maj 2021",description:"Riksbankens webbplats r en viktig klla till korrekt information om Sveriges och andra lnders ekonomiska tillstnd. Mlgruppen r mycket bred och informationen br passa bde experter och vanligt folk. Vrt arbete gr ut p att frenkla fr mnniskor att hitta den information de behver, och detta gller bde design och kod. Valtech har arbetat med Riksbanken sedan 2010. r 2018 byggde vi om den offentliga webbplatsen med ny funktionalitet och design p en EpiServer CMS. Efter lanseringen har vi gjort flera frndringar och frbttringar, vi har lagt till interaktiva grafer, digitaliserat rapporter och hllit webbplatsen p en hg niv vad gller tillgnglighet.",technologies:["JavaScript","HTML","CSS","C#",".NET Core","Episerver"],achievements:["Ombyggnad av offentlig webbplats 2018 med ny funktionalitet","Implementerade interaktiva grafer och digitaliserade rapporter","Upprtthll hg tillgnglighetsniv under flera r"]},{company:"Axfood",position:"Front-end / Fullstack utvecklare / Tillgnglighetsexpert",period:"mars 2018 - aug. 2020",description:"Axfoodkoncernens styrka ligger i att utveckla och driva framgngsrika koncept p den svenska matmarknaden. Med flera varumrken och webbplatser under koncernen har Niklas varit involverad i att bygga deras externa webbplats samt flera andra dotterbolags webbplatser. Niklas har haft rollen som ledande front-end utvecklare men har ven arbetat med backend. Plattformen som anvnds r Episerver. Under ren har Niklas hjlpt till med lpande underhll och har ocks fungerat som tillgnglighetsexpert.",technologies:["HTML/CSS","C#",".dotnet","JavaScript","Tillgnglighet","Analys och optimering","Episerver","Google Analytics"],achievements:["Byggde externa webbplatser fr flera varumrken","Ledande front-end utvecklare med backend-ansvar","Lpande underhll och tillgnglighetsexpertis"]},{company:"Tby kommun",position:"Front-end / Fullstack utvecklare / Tillgnglighetsexpert",period:"jan. 2019 - juni 2020",description:"I projektet med Tby kommuns externa webbplats lg fokus p att frbttra anvndarupplevelsen genom att frbttra befintliga block och moduler samt att utveckla nya funktioner. Niklas arbetade som front-end utvecklare och var ocks involverad i en hel del backend. Han bidrog ven som tillgnglighetsexpert fr att skerstlla att webbplatsen var tillgnglig fr alla anvndare. Efter projektets avslut fortsatte Niklas att arbeta med lpande underhll och utveckling av webbplatsen, samt stdja och supporta Tbys IOS- och Android-app.",technologies:["C#",".dotnet","CSS/HTML","JavaScript","Tillgnglighet","Tillgnglighet strategi","Tillgnglighet granskning","Episerver"],achievements:["Frbttrade anvndarupplevelse genom nya funktioner","Skerstllde tillgnglighet fr alla anvndare","Std fr iOS- och Android-app"]},{company:"Astra Zeneca",position:"Front-end / Fullstack utvecklare / Tillgnglighetsexpert",period:"jan. 2020 - maj 2020",description:"Niklas var en viktig del av teamet som utvecklade en extern webbplats fr cancer.nu p uppdrag av Astra Zeneca. Som senior Front-end utvecklare och tillgnglighetsspecialist bidrog Niklas med sin erfarenhet och expertis fr att skerstlla att webbplatsen var bde anvndarvnlig och tillgnglig fr alla. Han stttade ocks det befintliga webbteamet genom att erbjuda support och teknisk expertis nr det behvdes. Resultatet av projektet var en modern och anvndarvnlig webbplats som mtte kraven frn bde Astra Zeneca och dess anvndare.",technologies:["C#",".NET Core","CSS/HTML","JavaScript","Tillgnglighet","Optimizely"],achievements:["Utvecklade extern webbplats fr cancer.nu","Skerstllde anvndarvnlighet och tillgnglighet","Stttade befintligt webbteam med teknisk expertis"]},{company:"Multiple Clients",position:"Tillgnglighetsexpert",period:"jan. 2017 - mars 2020",description:"Tillgnglighetsstd fr Danderyds sjukhus, Tby kommun, Ecster bank, Recorded Future, Lantmnnen, Axfood, Skl, Gih, SSM",technologies:["Tillgnglighet","Tillgnglighetsgranskning"],achievements:["Tillgnglighetsstd fr flera stora organisationer","Granskningar och frbttringsarbete","Kompetensverfring inom tillgnglighet"]},{company:"Ecster",position:"Front-end / Fullstack utvecklare / Tillgnglighetsexpert",period:"jan. 2019 - jan. 2020",description:"Ecster Bank och finansiella tjnster har nrvaro bde i Sverige och Finland. I projektet ingick en granskning av deras befintliga webbplats och en rekommendation av hur man kan mta framtida krav. Under processen utfrdes faktiskt utvecklings- och designarbete fr att frbttra webbplatsen och tillgngligheten. Niklas hade en roll som tillgnglighetsexpert men ven som senior utvecklare och var delaktig i att implementera frbttringar och nya funktioner.",technologies:["C#",".NET","CSS/HTML","JavaScript","Tillgnglighet","Tillgnglighet strategi","Tillgnglighet granskning","Episerver"],achievements:["Granskning och rekommendationer fr framtida krav","Implementerade frbttringar och nya funktioner","Frbttrade tillgnglighet fr svensk och finsk marknad"]},{company:"Forexbank",position:"Front-end / Fullstack utvecklare / Tillgnglighetsexpert",period:"juni 2018 - dec. 2019",description:"Forex AB, av fretaget skrivet FOREX, tidigare Forex Bank, r ett fretag som erbjuder resevaluta, resefrskringar och kreditkort I projektet togs en ny extern webbplats fram med e-handel fr bde valuta, ln och frskring. Stort fokus lg p att bygga oberoende flden med backend micro tjnster. Som ramverk anvndes react med mnga externa integrationer ssom betallsningar och hmtande av personuppgifter. I projektet jobbade Niklas som lead front-end utvecklare med extra fokus kring konvertering och optimering och person privacy/policy. Frutom sin roll som utvecklare inom ren FE jobbade ven Niklas med analys och optimering, A/B testning i verktyget Google Optise. Plattformen var Episerver men med egen front fr olika kpflden.",technologies:["C#",".dotnet","React","Redux","TypeScript","Micro services","Tillgnglighet","Analys","Strategi","Konvertering","A/B test","SEO","Episerver","Google Analytics","Google Tagmanager","Dev-ops","Azure","Azure-devops"],achievements:["Ny e-handelswebbplats med micro services-arkitektur","Lead front-end utvecklare med fokus p konvertering","A/B-testning och optimering med Google Optimize"]},{company:"Flera kunder och uppdrag",position:"Front-end / Fullstack utvecklare / UX",period:"sep. 2014 - okt. 2018",description:"Brf webbplatser, bokningssystem, nyhetsbrev, freningshemsidor, Ronneby Handboll, Ronneby Golfklubb, Marinmuseum Karlskrona, mindre byggbolag, webb till tandlkare, webbplatser t pingstrrelsen, it-telekom bolag",technologies:["MySQL","JavaScript","PHP","WordPress","jQuery","HTML & CSS","Mailchimp","Typeform","Innehllsarbete/strategi"],achievements:["Diverse webbplatser fr freningar och lokala fretag","Bokningssystem och nyhetsbrevslsningar","Omfattande WordPress-utveckling"]},{company:"Finansinspektionen",position:"Utvecklare / UI",period:"jan. 2017 - aug. 2017",description:"Skrddarsytt nyhetsbrev",technologies:["HTML","CSS","JavaScript"],achievements:["Utvecklade skrddarsytt nyhetsbrev fr Finansinspektionen"]},{company:"IAR",position:"Front-end / Fullstack utvecklare / Tillgnglighetsexpert",period:"jan. 2016 - dec. 2016",description:"IAR, Ecster, SWECO - Vidareutveckling och frvaltning",technologies:["HTML","CSS","JavaScript","C#",".NET"],achievements:["Vidareutveckling och frvaltning fr flera stora kunder"]},{company:"Adlibris",position:"Front-end utvecklare",period:"dec. 2014 - maj 2016",description:"Lead front-end-utvecklare med nra samarbete med UX-teamet. Komplex lsning dr vi drev ett initiativ att f in ett nytt PIM system samt personifierade produktlistor. I projektet var mitt fokus ocks p analys och konvertering. Jag var ocks delaktig i skapandet av en stileguide / komponentbiliotek.",technologies:["Analytics","E-sales","Aptus","PIM","C#",".NET"],achievements:["Lead front-end utvecklare med UX-samarbete","Implementerade nytt PIM-system och personifierade produktlistor","Skapade stileguide och komponentbibliotek"]},{company:"Securitas",position:"Front-end utvecklare",period:"sep. 2014 - okt. 2015",description:"Byggde en ny global webbtjnst fr Securitas samtliga marknader i vrlden p med plattformen Episerver. Niklas hade rollen som frontend lead.",technologies:["C#",".NET Core","Episerver"],achievements:["Ny global webbtjnst fr alla Securitas marknader","Frontend lead fr internationell plattform"]},{company:"Cajam Karlskrona",position:"Front-end utvecklare",period:"jan. 2012 - sep. 2015",description:"Cajam - Flera webbplatser Utvecklare. WordPress sida med multisite och eget tema",technologies:["WordPress","PHP","HTML","CSS","JavaScript"],achievements:["Flera webbplatser med WordPress multisite","Utvecklade egna teman och funktionalitet"]},{company:"Oslobuss",position:"Front-end utvecklare",period:"jan. 2011 - jan. 2015",description:"WordPress webbplats fr Norges strsta bussbolag",technologies:["WordPress","PHP","HTML","CSS","JavaScript"],achievements:["Webbplats fr Norges strsta bussbolag"]},{company:"Vrldsarvskonferensen",position:"Front-end / Fullstack utvecklare",period:"jan. 2013 - sep. 2014",description:"Vrldsarvskonferensen - Registrerings app Utvecklare, analytics. Recurring support for the client. Sign-up system, newsletters, surveys.",technologies:["PHP","HTML","CSS","JavaScript","MySQL","Analytics"],achievements:["Registreringssystem fr internationell konferens","Utvecklade app fr deltagarregistrering och analys"]},{company:"Konferens Mt",position:"Front-end / Fullstack utvecklare",period:"jan. 2012 - sep. 2014",description:"Webbplats och registrering av deltagare Utvecklare och UX. Webb, design and ux, sign-up process, newsletter",technologies:["PHP","HTML","CSS","JavaScript","MySQL","UX"],achievements:["Webbplats med deltagarregistrering","UX-design och utveckling av registreringsprocesser"]},{company:"Metalcolour, Crossbreed, Kia Ung",position:"Front-end utvecklare",period:"jan. 2012 - sep. 2014",description:"Webbsites fr Metalcolour, IOT-fretaget Crossbreed samt portal och webbplats fr Kia Ung",technologies:["HTML","CSS","JavaScript","PHP","MySQL"],achievements:["Webbplatser fr industrifretag och IoT-fretag","Portal och webbplats fr bilhandlare"]},{company:"Gamerguides",position:"Front-end / Fullstack utvecklare",period:"jan. 2013 - apr. 2014",description:"Webbshopp spelguider. E-handel och plattform fr spelguider",technologies:["PHP","HTML","CSS","JavaScript","MySQL","E-commerce"],achievements:["E-handelsplattform fr spelguider","Utvecklade specialiserad e-commerce-lsning"]},{company:"STF",position:"Front-end utvecklare",period:"jan. 2012 - jan. 2014",description:"STF Franchise. Nyhetsbrev",technologies:["HTML","CSS","JavaScript","Email marketing"],achievements:["Nyhetsbrevslsning fr STF Franchise"]},{company:"Nofatel",position:"Front-end utvecklare",period:"jan. 2012 - jan. 2013",description:"Webbplats fr telekom bolaget Nofatel",technologies:["HTML","CSS","JavaScript","PHP"],achievements:["Webbplats fr telekomfretag"]},{company:"Ankdammen.eu",position:"Front-end / Fullstack utvecklare / UX",period:"jan. 2012 - jan. 2013",description:"Utvecklade en app fr inventering och loggning fr gravvrd",technologies:["PHP","HTML","CSS","JavaScript","MySQL","Mobile app"],achievements:["Specialiserad app fr gravvrdsregistrering","Mobil lsning fr inventering och loggning"]},{company:"Intershape / Designkonsulatet",position:"Front-end / Fullstack utvecklare / UX",period:"jan. 2008 - jan. 2013",description:"Utvecklare, strateg, entreprenr fr eget bolag Intershape samt designkollektivet Designkonsulatet. Allt inom webb, grafisk produktion, industridesign och kommunikation.",technologies:["Projektledare","Webbutvecklare","Interaktionsdesign","UX/UI","HTML","CSS","JavaScript","PHP","MySQL"],achievements:["Grundade och drev eget utvecklingsbolag","Bred verksamhet inom webb, grafisk produktion och design","Projektledning och strategiarbete"]}],projects:[{name:"Digitalidag.se - Tillgnglig Webbplats",type:"Tillgnglig Webbplats",period:"mars 2024 - maj 2024",description:"Ny webbplats byggd frn grunden med fokus p tillgnglighet och anvndarupplevelse fr Post och telestyrelsen PTS. Inkluderar custom event hantering och hg tillgnglighetsniv.",technologies:["React","TypeScript","Next.js","Contentful","MongoDB","WCAG"],url:"https://digitalidag.se",achievements:["Byggde helt ny webbplats frn grunden med fokus p tillgnglighet","Utvecklade custom grnssnitt fr event hantering","Skerstllde hg tillgnglighet fr bde anvndare och redaktrer"]},{name:"Skandia Designsystem",type:"Designsystem & Komponentbibliotek",period:"mars 2023 - dec 2023",description:"Centralt designsystem fr Skandia med fokus p tillgnglighet. Ombyggnad av komponenter fr webb, app och interna system med modern teknologi och kvalitetsskring.",technologies:["React","TypeScript","Storybook","Figma","AXE","Webdriver IO"],url:"",achievements:["Ledde tillgnglighetsarbetet fr centralt designsystem","Ombyggnad av komponenter fr webb, app och interna system","Dokumentation och granskning samt std fr utvecklare och design"]},{name:"SJ.se Mikrofrontend Arkitektur",type:"Mikrofrontend Arkitektur",period:"juni 2020 - apr 2022",description:"Migrering frn Angular.js till React med fokus p mikrofrontend arkitektur och komponentbibliotek. Inkluderar A/B testning och optimering med Adobe verktyg.",technologies:["React","Redux","TypeScript","Micro Frontend","Adobe Analytics","Cypress"],url:"https://sj.se",achievements:["Migrerade frn Angular.js till React med mikrofrontend-arkitektur","Projektledare/Scrum Master fr SJs leveransgrupp","Implementerade A/B-tester och analys med Adobe-verktyg"]},{name:"E-commerce Platform - ForSea TaxFree",type:"E-handelslsning",period:"okt 2022 - mars 2023",description:"Omfattande e-handelsplattform fr taxfree-varor med komplex produktkatalog, PIM-integrationer och skrddarsydd shoppingkorg. Byggd med senaste Optimizely-plattformen.",technologies:["React","Redux","TypeScript","Optimizely","C#",".NET Core"],url:"",achievements:["Ledande roll inom frontendutveckling fr e-handelsplattform","Utvecklade komplex produktkatalog med PIM-integrationer","Skapade skrddarsydd shoppingkorg och orderflde"]},{name:"M&Ms Konfigurator & E-handel",type:"Interaktiv Konfigurator",period:"jan 2022 - okt 2022",description:"Modernisering av Mars M&Ms webbplattform med vergng till Commercetools och Amplience. Inkluderade total omarbetning av konfiguratorn fr skrddarsytt godis.",technologies:["React","TypeScript","GraphQL","Commercetools","Amplience"],url:"",achievements:["Omfattande uppgradering till modernare teknisk plattform","Omarbetning av konfigurator fr skrddarsytt godis","Std fr fem utvecklingsteam som tillgnglighetsexpert"]},{name:"KTH Climate Compatible Growth Portal",type:"Forskningsportal & Kunskapsdelning",period:"mars 2023 - okt 2023",description:"Hllbar webbplattform fr kunskapsdelning mellan lnder inom klimatkompatibel tillvxt. Fljer sustainable web design-principer och har hga tillgnglighetsstandarder.",technologies:["React","TypeScript","Strapi","Azure","Sustainable Web Design"],url:"",achievements:["Utvecklade lsning fr kunskapsdelning mellan lnder","Implementerade hllbara webbdesign-principer","Skerstllde hga tillgnglighetsstandarder"]}],education:[{institution:"Blekinge Tekniska Hgskola",degree:"Kandidatexamen",field:"Interaktionsdesign (MDA)",period:"2008-2011",gpa:"3.5/4.0",location:"Karlskrona, Sverige",honors:["Dean's List","Magna Cum Laude"]},{institution:"Blekinge Tekniska Hgskola",degree:"Civilingenjr",field:"Mekanik och teknik",period:"2007-2008",gpa:"3.2/4.0",location:"Karlskrona, Sverige",honors:[]}],certifications:[{name:"Certified Professional in Accessibility Core Competencies (CPACC)",issuer:"IAAP",date:"2022",credentialId:"CPACC-2022-NA-001",url:"https://iaap.org/verification/123456",expirationDate:"2025-12-31"},{name:"AWS Solutions Architect Professional",issuer:"Amazon Web Services",date:"2023",credentialId:"AWS-SAP-2023-567890",url:"https://aws.amazon.com/verification/567890",expirationDate:"2026-03-15"},{name:"Certified Kubernetes Administrator (CKA)",issuer:"Cloud Native Computing Foundation",date:"2023",credentialId:"CKA-2023-123456",url:"https://cncf.io/verification/123456",expirationDate:"2026-06-30"},{name:"Agile core competence and fundamentals course",issuer:"Valtech",date:"2021",credentialId:"VALTECH-AGILE-2021-789"},{name:"Web Accessibility by Google",issuer:"Google",date:"2019",credentialId:"GOOGLE-A11Y-2019-456"},{name:"Microsoft Azure DevOps Engineer Expert",issuer:"Microsoft",date:"2022",credentialId:"AZ-400-2022-890123"},{name:"Agile Scrum Master Professional",issuer:"Scrum Alliance",date:"2015",credentialId:"CSM-2015-345678"}],courses:[{name:"Advanced React Performance Optimization",provider:"Frontend Masters",completionDate:"2023-08-15",duration:"8 hours",credentialId:"FM-2023-ARPO-001",url:"https://frontendmasters.com/courses/react-performance/",status:"completed",grade:"A+"},{name:"Web Accessibility: Advanced Techniques",provider:"Deque University",completionDate:"2023-06-20",duration:"12 hours",credentialId:"DU-WAT-2023-456",url:"https://dequeuniversity.com/curriculum/packages/web-accessibility",status:"completed",grade:"A"},{name:"TypeScript Deep Dive",provider:"Pluralsight",completionDate:"2023-03-10",duration:"6 hours",credentialId:"PS-TS-DD-789",url:"https://pluralsight.com/courses/typescript-deep-dive"},{name:"Tillgnglighet konferens och workshops",provider:"FUNKA",completionDate:"2018-11-15",duration:"16 hours",credentialId:"FUNKA-AC-2018",url:"https://funka.com/utbildning"},{name:"UX kurser, Lean UX & UX strategi",provider:"Hyper Island",completionDate:"2015-09-30",duration:"40 hours",credentialId:"HI-UX-2015-123",url:"https://hyperisland.com/programs-and-courses"},{name:"Kubernetes for Developers",provider:"Cloud Native Computing Foundation",completionDate:"2023-01-25",duration:"20 hours",credentialId:"CNCF-K8S-DEV-2023",url:"https://training.linuxfoundation.org/training/kubernetes-for-developers/"}],skills:[{category:"Frontend Utveckling",items:[{name:"React",level:5},{name:"TypeScript",level:5},{name:"JavaScript",level:5},{name:"HTML & CSS",level:5},{name:"Next.js",level:4},{name:"Gatsby.js",level:4},{name:"Redux",level:4},{name:"Vue.js",level:4},{name:"Angular",level:3},{name:"Svelte",level:3}]},{category:"Backend Utveckling",items:[{name:"C#",level:4},{name:".NET Core",level:4},{name:"Node.js",level:4},{name:"Express",level:4},{name:"PHP",level:3},{name:"MySQL",level:3},{name:"MongoDB",level:3},{name:"PostgreSQL",level:3},{name:"GraphQL",level:3},{name:"REST APIs",level:4}]},{category:"Tillgnglighet & Kvalitet",items:[{name:"WCAG",level:5},{name:"AXE",level:5},{name:"Tillgnglighetstester",level:5},{name:"BrowserStack",level:4},{name:"Webdriver IO",level:3},{name:"Cypress",level:4},{name:"Jest",level:4},{name:"Playwright",level:3},{name:"Screen Readers",level:5}]},{category:"DevOps & Verktyg",items:[{name:"CI/CD",level:4},{name:"Docker",level:4},{name:"Kubernetes",level:3},{name:"Azure",level:4},{name:"AWS",level:3},{name:"Git",level:5},{name:"GitHub",level:5},{name:"Terraform",level:3},{name:"Jenkins",level:3},{name:"GitLab CI",level:3}]},{category:"CMS & E-handel",items:[{name:"Optimizely",level:5},{name:"Episerver",level:5},{name:"Contentful",level:4},{name:"Sanity",level:4},{name:"Shopify",level:3},{name:"Strapi",level:3},{name:"WordPress",level:3},{name:"Drupal",level:2},{name:"Commercetools",level:3}]},{category:"Analys & SEO",items:[{name:"Google Analytics",level:4},{name:"Adobe Analytics",level:4},{name:"SEO",level:4},{name:"A/B Testing",level:4},{name:"Google Tag Manager",level:4},{name:"Adobe Target",level:3},{name:"Hotjar",level:3},{name:"Mixpanel",level:3}]},{category:"Design & UX",items:[{name:"Figma",level:4},{name:"Design Systems",level:4},{name:"Storybook",level:4},{name:"Prototyping",level:3},{name:"User Research",level:3},{name:"Usability Testing",level:4},{name:"Wireframing",level:3},{name:"Adobe Creative Suite",level:3}]},{category:"Ledarskap & Process",items:[{name:"Scrum Master",level:4},{name:"Team Lead",level:4},{name:"Mentor",level:4},{name:"Agile",level:4},{name:"Projektledning",level:4},{name:"Strategi",level:3},{name:"SAFE",level:3},{name:"Kanban",level:4},{name:"OKRs",level:3}]},{category:"Mobile & Cross-Platform",items:[{name:"React Native",level:3},{name:"Ionic",level:2},{name:"Cordova",level:2},{name:"Progressive Web Apps",level:4},{name:"Mobile-First Design",level:4},{name:"Responsive Design",level:5}]}],languages:[{language:"Svenska",proficiency:"Modersml"},{language:"Engelska",proficiency:"Flytande (C2)"},{language:"Norska",proficiency:"God frstelse (B2)"},{language:"Danska",proficiency:"Grundlggande (A2)"}],competencies:[{category:"Frontend Utveckling",skills:[{name:"React",level:"Expert",yearsOfExperience:8},{name:"TypeScript",level:"Expert",yearsOfExperience:6},{name:"Next.js",level:"Advanced",yearsOfExperience:4},{name:"CSS",level:"Expert",yearsOfExperience:15},{name:"HTML",level:"Expert",yearsOfExperience:15},{name:"Vue.js",level:"Advanced",yearsOfExperience:3},{name:"Angular",level:"Intermediate",yearsOfExperience:2}]},{category:"Backend Utveckling",skills:[{name:"Node.js",level:"Advanced",yearsOfExperience:6},{name:"C#",level:"Advanced",yearsOfExperience:8},{name:".NET Core",level:"Advanced",yearsOfExperience:7},{name:"PHP",level:"Intermediate",yearsOfExperience:5},{name:"Python",level:"Intermediate",yearsOfExperience:3},{name:"Express.js",level:"Advanced",yearsOfExperience:5}]},{category:"Tillgnglighet",skills:[{name:"WCAG",level:"Expert",yearsOfExperience:7},{name:"AXE Testing",level:"Expert",yearsOfExperience:5},{name:"Screen Reader Testing",level:"Advanced",yearsOfExperience:6},{name:"ARIA Implementation",level:"Expert",yearsOfExperience:6},{name:"Keyboard Navigation",level:"Expert",yearsOfExperience:7}]},{category:"DevOps & Cloud",skills:[{name:"CI/CD",level:"Advanced",yearsOfExperience:5},{name:"Docker",level:"Advanced",yearsOfExperience:4},{name:"Kubernetes",level:"Intermediate",yearsOfExperience:2},{name:"Azure",level:"Advanced",yearsOfExperience:6},{name:"AWS",level:"Intermediate",yearsOfExperience:3},{name:"GitHub Actions",level:"Advanced",yearsOfExperience:4}]},{category:"Databaser & CMS",skills:[{name:"MongoDB",level:"Advanced",yearsOfExperience:4},{name:"PostgreSQL",level:"Intermediate",yearsOfExperience:3},{name:"MySQL",level:"Advanced",yearsOfExperience:8},{name:"Optimizely",level:"Expert",yearsOfExperience:6},{name:"Contentful",level:"Advanced",yearsOfExperience:3},{name:"Sanity",level:"Advanced",yearsOfExperience:2}]},{category:"Analys & SEO",skills:[{name:"Google Analytics",level:"Advanced",yearsOfExperience:8},{name:"Adobe Analytics",level:"Advanced",yearsOfExperience:4},{name:"SEO",level:"Advanced",yearsOfExperience:10},{name:"A/B Testing",level:"Advanced",yearsOfExperience:5},{name:"Google Tag Manager",level:"Advanced",yearsOfExperience:6}]},{category:"Ledarskap & Process",skills:[{name:"Scrum Master",level:"Expert",yearsOfExperience:8},{name:"Team Leadership",level:"Expert",yearsOfExperience:10},{name:"Mentoring",level:"Expert",yearsOfExperience:12},{name:"Agile Coaching",level:"Advanced",yearsOfExperience:8},{name:"Project Management",level:"Advanced",yearsOfExperience:15}]}],closing:{text:"Tack fr att du tog dig tid att lsa mitt CV. Jag ser fram emot mjligheten att diskutera hur jag kan bidra till ert team och hjlpa er att n era ml med modern webbutveckling och tillgnglighet.",contact:{email:"niklas@andervang.com",phone:"+46 70 244 13 23",location:"Stockholm, Sverige",company:"Andervang Consulting"}},templateSettings:{template:"andervang-consulting",theme:"blue",fontSize:"medium",showPhoto:!0,showReferences:!1,language:"sv",margins:"normal",colorScheme:"blue"},template:"andervang-consulting",format:"pdf"},Alt={personalInfo:{name:"",title:"",email:"",phone:"",location:"",website:"",linkedIn:"",github:"",profilePhoto:""},summary:{introduction:"",keyStrengths:[],careerObjective:"",specialties:[]},experience:[],projects:[],education:[],certifications:[],courses:[],languages:[],skills:[],roles:[],competencies:[],closing:{text:"Tack fr att du tog dig tid att lsa mitt CV. Jag ser fram emot mjligheten att diskutera hur jag kan bidra till ert team.",contact:{email:"",phone:"",location:"",company:"Andervang Consulting"}},templateSettings:{template:"andervang-consulting",theme:"blue",fontSize:"medium",showPhoto:!0,showReferences:!1,language:"en",margins:"normal",colorScheme:"blue"}};function jlt({isOpen:e,onClose:t,userId:n}){const[r,i]=w.useState("personal"),[s,a]=w.useState(Alt),[o,c]=w.useState(!1),[u,d]=w.useState(!1),[f,h]=w.useState(!1),[p,m]=w.useState(!1),[g,v]=w.useState(null);console.log("CVEditorModal rendered with userId:",n,"isOpen:",e);const{versions:y,currentVersion:x,loading:b,error:S,createVersion:E,updateVersion:N,deleteVersion:_,duplicateVersion:k,setCurrentVersionById:T}=roe(n);console.log("useCVVersions state:",{versions:y.length,currentVersion:x==null?void 0:x.version_name,loading:b,error:S}),w.useEffect(()=>{x!=null&&x.data&&(a(x.data),c(!1))},[x]),w.useEffect(()=>{x&&JSON.stringify(s)!==JSON.stringify(x.data)&&c(!0)},[s,x]);const A=(O,Q)=>{a(Y=>({...Y,[O]:Q}))},j=async()=>{x?await N(x.id,{data:s})&&(console.log("Version updated successfully"),c(!1)):await E(`CV Version ${y.length+1}`,s)&&(console.log("New version created successfully"),c(!1))},D=async()=>{const O=prompt("Enter version name:");if(O&&O.trim()){const Q=await E(O.trim(),s);Q&&console.log("New version created:",Q.version_name)}},I=async()=>{if(!x)return;const O=prompt("Enter name for duplicated version:",`${x.version_name} (Copy)`);O&&O.trim()&&await k(x.id,O.trim())},M=async()=>{!x||y.length<=1||d(!0)},L=async()=>{x&&(await _(x.id),d(!1))},P=async O=>{o?(v(O),h(!0)):await T(O)},B=async()=>{g&&(await j(),await T(g),h(!1),v(null))},R=async()=>{g&&(await T(g),h(!1),v(null))},F=()=>{const O={...Tlt,template:"andervang-consulting",format:"pdf"};a(O),c(!0)};return l.jsxs(xt,{open:e,onOpenChange:t,modal:!0,children:[l.jsxs(ft,{className:"max-w-none w-screen h-screen p-0 overflow-hidden m-0 rounded-none border-0",children:[l.jsx(ht,{className:"px-6 py-4 border-b bg-white",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(pt,{className:"text-xl font-semibold",children:"CV Editor"}),l.jsxs("div",{className:"flex items-center gap-3",children:[o&&l.jsx(Ot,{variant:"outline",className:"text-orange-600 border-orange-200 px-3 py-1",children:"Unsaved changes"}),y.length>0&&l.jsxs(gn,{value:(x==null?void 0:x.id)||"",onValueChange:P,children:[l.jsx(ln,{className:"w-48",children:l.jsx(vn,{placeholder:"Select version..."})}),l.jsx(cn,{children:y.map(O=>l.jsx(Ve,{value:O.id,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(en,{className:"h-4 w-4"}),O.version_name]})},O.id))})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsxs(H,{variant:"outline",size:"sm",onClick:D,className:"gap-1",children:[l.jsx(Xe,{className:"h-4 w-4"}),"New"]}),l.jsxs(H,{variant:"outline",size:"sm",onClick:F,className:"gap-1 text-green-600 hover:text-green-700",children:[l.jsx(en,{className:"h-4 w-4"}),"Load Sample Data"]}),l.jsxs(H,{variant:"default",size:"sm",onClick:()=>m(!0),className:"gap-1 bg-blue-600 hover:bg-blue-700",children:[l.jsx(Wo,{className:"h-4 w-4"}),"Generate CV"]}),x&&l.jsxs(l.Fragment,{children:[l.jsxs(H,{variant:"outline",size:"sm",onClick:I,className:"gap-1",children:[l.jsx(tE,{className:"h-4 w-4"}),"Copy"]}),y.length>1&&l.jsxs(H,{variant:"outline",size:"sm",onClick:M,className:"gap-1 text-red-600 hover:text-red-700",children:[l.jsx(lr,{className:"h-4 w-4"}),"Delete"]})]})]}),l.jsxs(H,{onClick:j,disabled:!o&&!!x,className:"gap-2",children:[l.jsx(Qh,{className:"h-4 w-4"}),x?"Save Changes":"Create Version"]}),l.jsxs(H,{variant:"ghost",size:"sm",onClick:t,className:"gap-1 ml-2",children:[l.jsx(Qn,{className:"h-4 w-4"}),"Close"]})]})]})}),l.jsxs("div",{className:"flex flex-1 min-h-0",children:[l.jsx("div",{className:"flex-1 overflow-hidden",children:l.jsxs(Qo,{value:r,onValueChange:i,className:"h-full flex flex-col",children:[l.jsxs(co,{className:"grid w-full grid-cols-10 bg-gray-50 mx-6 mt-4",children:[l.jsx(St,{value:"personal",children:"Personal"}),l.jsx(St,{value:"summary",children:"Summary"}),l.jsx(St,{value:"experience",children:"Experience"}),l.jsx(St,{value:"roles",children:"Roles"}),l.jsx(St,{value:"skills",children:"Skills"}),l.jsx(St,{value:"competencies",children:"Competencies"}),l.jsx(St,{value:"education",children:"Education"}),l.jsx(St,{value:"languages",children:"Languages"}),l.jsx(St,{value:"closing",children:"Closing"}),l.jsx(St,{value:"template",children:"Template"})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto",children:[l.jsx(wt,{value:"personal",className:"h-full p-6",children:l.jsx($ot,{data:s.personalInfo,onChange:O=>A("personalInfo",O)})}),l.jsx(wt,{value:"summary",className:"h-full p-6",children:l.jsx(Uot,{data:s.summary,onChange:O=>A("summary",O)})}),l.jsx(wt,{value:"experience",className:"h-full p-6",children:l.jsx(zot,{experienceData:s.experience,projectsData:s.projects,onExperienceChange:O=>A("experience",O),onProjectsChange:O=>A("projects",O)})}),l.jsx(wt,{value:"roles",className:"h-full p-6",children:l.jsx(klt,{data:s.roles||[],onChange:O=>A("roles",O)})}),l.jsx(wt,{value:"skills",className:"h-full p-6",children:l.jsx(X7,{data:s.skills,onChange:O=>A("skills",O)})}),l.jsx(wt,{value:"competencies",className:"h-full p-6",children:l.jsx(nU,{data:s.competencies||[],onChange:O=>A("competencies",O)})}),l.jsx(wt,{value:"skills",className:"h-full p-6",children:l.jsx(X7,{data:s.skills,onChange:O=>A("skills",O)})}),l.jsx(wt,{value:"competencies",className:"h-full p-6",children:l.jsx(nU,{data:s.competencies||[],onChange:O=>A("competencies",O)})}),l.jsx(wt,{value:"education",className:"h-full p-6",children:l.jsx(Hot,{educationData:s.education,certificationsData:s.certifications,coursesData:s.courses,onEducationChange:O=>A("education",O),onCertificationsChange:O=>A("certifications",O),onCoursesChange:O=>A("courses",O)})}),l.jsx(wt,{value:"languages",className:"h-full p-6",children:l.jsx(Kot,{data:s.languages,onChange:O=>A("languages",O)})}),l.jsx(wt,{value:"closing",className:"h-full p-6",children:l.jsx(Clt,{data:s.closing||{text:"",contact:{email:"",phone:"",location:"",company:""}},onChange:O=>A("closing",O)})}),l.jsx(wt,{value:"template",className:"h-full p-6",children:l.jsx(Jot,{data:s.templateSettings,onChange:O=>A("templateSettings",O),profilePhoto:s.personalInfo.profilePhoto})})]})]})}),l.jsx("div",{className:"w-96 border-l bg-gray-50/50",children:l.jsx(Nlt,{cvData:s,profile:{id:n,user_id:n,title:s.personalInfo.title||"CV Profile",is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},currentVersion:x})})]}),!1]}),l.jsx(xt,{open:u,onOpenChange:d,children:l.jsxs(ft,{className:"max-w-md",children:[l.jsx(ht,{children:l.jsx(pt,{children:"Delete CV Version"})}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("p",{children:['Are you sure you want to delete the version "',x==null?void 0:x.version_name,'"?']}),l.jsx("div",{className:"bg-red-50 border border-red-200 p-3 rounded-lg",children:l.jsxs("p",{className:"text-sm text-red-800",children:[l.jsx("strong",{children:"Warning:"})," This action cannot be undone. The version and all its data will be permanently deleted."]})})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(H,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),l.jsx(H,{variant:"destructive",onClick:L,children:"Delete Version"})]})]})}),l.jsx(xt,{open:f,onOpenChange:h,children:l.jsxs(ft,{className:"max-w-md",children:[l.jsx(ht,{children:l.jsx(pt,{children:"Unsaved Changes"})}),l.jsx("div",{className:"space-y-3",children:l.jsx("p",{children:"You have unsaved changes. What would you like to do?"})}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(H,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),l.jsx(H,{variant:"outline",onClick:R,children:"Discard Changes"}),l.jsx(H,{onClick:B,children:"Save & Switch"})]})]})}),l.jsx(_lt,{isOpen:p,onClose:()=>m(!1),cvData:s})]})}const u2=[{id:"developer",icon:mc,color:"blue",name:"Developer"},{id:"senior-dev",icon:vb,color:"indigo",name:"Senior Developer"},{id:"architect",icon:Xu,color:"purple",name:"Architect"},{id:"scrum-master",icon:Tr,color:"green",name:"Scrum Master"},{id:"ai-specialist",icon:jg,color:"violet",name:"AI Specialist"},{id:"accessibility-expert",icon:Hi,color:"orange",name:"Accessibility Expert"},{id:"devops",icon:wO,color:"red",name:"DevOps Engineer"},{id:"cloud-engineer",icon:fO,color:"sky",name:"Cloud Engineer"},{id:"security-expert",icon:R0,color:"emerald",name:"Security Expert"},{id:"database-admin",icon:mO,color:"slate",name:"Database Admin"},{id:"network-engineer",icon:bO,color:"cyan",name:"Network Engineer"},{id:"mobile-dev",icon:EO,color:"pink",name:"Mobile Developer"},{id:"frontend-dev",icon:yO,color:"amber",name:"Frontend Developer"},{id:"backend-dev",icon:hO,color:"zinc",name:"Backend Developer"},{id:"fullstack-dev",icon:Xu,color:"teal",name:"Fullstack Developer"},{id:"qa-engineer",icon:lO,color:"rose",name:"QA Engineer"},{id:"tech-lead",icon:Wi,color:"lime",name:"Tech Lead"},{id:"product-owner",icon:cr,color:"fuchsia",name:"Product Owner"},{id:"solution-architect",icon:Og,color:"stone",name:"Solution Architect"},{id:"innovation-lead",icon:gb,color:"yellow",name:"Innovation Lead"},{id:"automation-expert",icon:iE,color:"orange",name:"Automation Expert"},{id:"systems-admin",icon:Zs,color:"gray",name:"Systems Admin"},{id:"cybersecurity",icon:ro,color:"red",name:"Cybersecurity"},{id:"git-specialist",icon:vO,color:"green",name:"Git Specialist"}],rU=(e,t)=>{const n={blue:{bg:"bg-blue-100",border:"border-blue-500",icon:"text-blue-600"},indigo:{bg:"bg-indigo-100",border:"border-indigo-500",icon:"text-indigo-600"},green:{bg:"bg-green-100",border:"border-green-500",icon:"text-green-600"},purple:{bg:"bg-purple-100",border:"border-purple-500",icon:"text-purple-600"},pink:{bg:"bg-pink-100",border:"border-pink-500",icon:"text-pink-600"},yellow:{bg:"bg-yellow-100",border:"border-yellow-500",icon:"text-yellow-600"},orange:{bg:"bg-orange-100",border:"border-orange-500",icon:"text-orange-600"},red:{bg:"bg-red-100",border:"border-red-500",icon:"text-red-600"},cyan:{bg:"bg-cyan-100",border:"border-cyan-500",icon:"text-cyan-600"},emerald:{bg:"bg-emerald-100",border:"border-emerald-500",icon:"text-emerald-600"},slate:{bg:"bg-slate-100",border:"border-slate-500",icon:"text-slate-600"},teal:{bg:"bg-teal-100",border:"border-teal-500",icon:"text-teal-600"},rose:{bg:"bg-rose-100",border:"border-rose-500",icon:"text-rose-600"},violet:{bg:"bg-violet-100",border:"border-violet-500",icon:"text-violet-600"},amber:{bg:"bg-amber-100",border:"border-amber-500",icon:"text-amber-600"},stone:{bg:"bg-stone-100",border:"border-stone-500",icon:"text-stone-600"},zinc:{bg:"bg-zinc-100",border:"border-zinc-500",icon:"text-zinc-600"},lime:{bg:"bg-lime-100",border:"border-lime-500",icon:"text-lime-600"},fuchsia:{bg:"bg-fuchsia-100",border:"border-fuchsia-500",icon:"text-fuchsia-600"},sky:{bg:"bg-sky-100",border:"border-sky-500",icon:"text-sky-600"},gray:{bg:"bg-gray-100",border:"border-gray-500",icon:"text-gray-600"}},r=n[e]||n.blue;return{bg:t?r.bg:`${r.bg.replace("100","50")}`,border:r.border,icon:r.icon}};function Olt({isOpen:e,onClose:t,onSubmit:n,profilesCount:r}){const[i,s]=w.useState(!1),[a,o]=w.useState({title:"",description:"",target_role:"",location:"",selectedIcon:u2[0]}),c=d=>{o(f=>({...f,selectedIcon:d}))},u=async d=>{if(d.preventDefault(),!a.title.trim())return;s(!0);const f={title:a.title,description:a.description||void 0,target_role:a.target_role||void 0,location:a.location||void 0,profile_image_url:JSON.stringify({iconId:a.selectedIcon.id,color:a.selectedIcon.color,name:a.selectedIcon.name}),is_active:r===0};try{await n(f),t(),o({title:"",description:"",target_role:"",location:"",selectedIcon:u2[0]})}catch(h){console.error("Failed to create profile:",h)}finally{s(!1)}};return l.jsx(xt,{open:e,onOpenChange:t,children:l.jsxs(ft,{className:"sm:max-w-[500px] max-h-[80vh] overflow-y-auto",children:[l.jsx(ht,{children:l.jsx(pt,{className:"flex items-center gap-2 text-xl",children:"Create New CV Profile"})}),l.jsxs("form",{onSubmit:u,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsx(X,{children:"Profile Icon"}),l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[(()=>{const d=rU(a.selectedIcon.color,!0);return l.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center border-2 ${d.bg} ${d.border}`,children:l.jsx(a.selectedIcon.icon,{className:`h-6 w-6 ${d.icon}`})})})(),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:a.selectedIcon.name}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Selected icon"})]})]}),l.jsx("div",{className:"grid grid-cols-8 gap-2 max-h-32 overflow-y-auto p-2 border rounded-lg",children:u2.map((d,f)=>{const h=d.icon,p=a.selectedIcon.name===d.name,m=rU(d.color,p);return l.jsx("button",{type:"button",onClick:()=>c(d),className:`w-10 h-10 rounded-lg flex items-center justify-center transition-all hover:scale-110 border-2 ${m.bg} ${m.border} ${p?"ring-2 ring-primary shadow-md":"hover:bg-gray-100 opacity-70 hover:opacity-100"}`,title:d.name,children:l.jsx(h,{className:`h-5 w-5 ${m.icon}`})},f)})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"title",children:"Profile Title *"}),l.jsx(re,{id:"title",required:!0,value:a.title,onChange:d=>o(f=>({...f,title:d.target.value})),placeholder:"e.g., Senior Full Stack Developer, Marketing Manager"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"description",children:"Description"}),l.jsx(ti,{id:"description",value:a.description,onChange:d=>o(f=>({...f,description:d.target.value})),placeholder:"Brief description of this CV profile...",rows:3})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"target_role",children:"Target Role"}),l.jsx(re,{id:"target_role",value:a.target_role,onChange:d=>o(f=>({...f,target_role:d.target.value})),placeholder:"e.g., Senior Developer, Consultant"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"location",children:"Location"}),l.jsx(re,{id:"location",value:a.location,onChange:d=>o(f=>({...f,location:d.target.value})),placeholder:"e.g., Stockholm, Remote"})]})]}),r===0&&l.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-lg",children:l.jsxs("p",{className:"text-sm text-blue-800",children:[l.jsx("strong",{children:"Note:"})," This will be your first CV profile and will be set as active by default."]})}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[l.jsx(H,{type:"button",variant:"outline",onClick:t,disabled:i,children:"Cancel"}),l.jsx(H,{type:"submit",disabled:i||!a.title.trim(),children:i?"Creating...":"Create Profile"})]})]})]})})}const ax=[{id:"developer",icon:mc,color:"blue",name:"Developer"},{id:"senior-dev",icon:vb,color:"indigo",name:"Senior Developer"},{id:"architect",icon:Xu,color:"purple",name:"Architect"},{id:"scrum-master",icon:Tr,color:"green",name:"Scrum Master"},{id:"ai-specialist",icon:jg,color:"violet",name:"AI Specialist"},{id:"accessibility-expert",icon:Hi,color:"orange",name:"Accessibility Expert"},{id:"devops",icon:wO,color:"red",name:"DevOps Engineer"},{id:"cloud-engineer",icon:fO,color:"sky",name:"Cloud Engineer"},{id:"security-expert",icon:R0,color:"emerald",name:"Security Expert"},{id:"database-admin",icon:mO,color:"slate",name:"Database Admin"},{id:"network-engineer",icon:bO,color:"cyan",name:"Network Engineer"},{id:"mobile-dev",icon:EO,color:"pink",name:"Mobile Developer"},{id:"frontend-dev",icon:yO,color:"amber",name:"Frontend Developer"},{id:"backend-dev",icon:hO,color:"zinc",name:"Backend Developer"},{id:"fullstack-dev",icon:Xu,color:"teal",name:"Fullstack Developer"},{id:"qa-engineer",icon:lO,color:"rose",name:"QA Engineer"},{id:"tech-lead",icon:Wi,color:"lime",name:"Tech Lead"},{id:"product-owner",icon:cr,color:"fuchsia",name:"Product Owner"},{id:"solution-architect",icon:Og,color:"stone",name:"Solution Architect"},{id:"innovation-lead",icon:gb,color:"yellow",name:"Innovation Lead"},{id:"automation-expert",icon:iE,color:"orange",name:"Automation Expert"},{id:"systems-admin",icon:Zs,color:"gray",name:"Systems Admin"},{id:"cybersecurity",icon:ro,color:"red",name:"Cybersecurity"},{id:"git-specialist",icon:vO,color:"green",name:"Git Specialist"}],iU=(e,t)=>{const n={blue:{bg:"bg-blue-100",border:"border-blue-500",icon:"text-blue-600"},indigo:{bg:"bg-indigo-100",border:"border-indigo-500",icon:"text-indigo-600"},green:{bg:"bg-green-100",border:"border-green-500",icon:"text-green-600"},purple:{bg:"bg-purple-100",border:"border-purple-500",icon:"text-purple-600"},pink:{bg:"bg-pink-100",border:"border-pink-500",icon:"text-pink-600"},yellow:{bg:"bg-yellow-100",border:"border-yellow-500",icon:"text-yellow-600"},orange:{bg:"bg-orange-100",border:"border-orange-500",icon:"text-orange-600"},red:{bg:"bg-red-100",border:"border-red-500",icon:"text-red-600"},cyan:{bg:"bg-cyan-100",border:"border-cyan-500",icon:"text-cyan-600"},emerald:{bg:"bg-emerald-100",border:"border-emerald-500",icon:"text-emerald-600"},slate:{bg:"bg-slate-100",border:"border-slate-500",icon:"text-slate-600"},teal:{bg:"bg-teal-100",border:"border-teal-500",icon:"text-teal-600"},rose:{bg:"bg-rose-100",border:"border-rose-500",icon:"text-rose-600"},violet:{bg:"bg-violet-100",border:"border-violet-500",icon:"text-violet-600"},amber:{bg:"bg-amber-100",border:"border-amber-500",icon:"text-amber-600"},stone:{bg:"bg-stone-100",border:"border-stone-500",icon:"text-stone-600"},zinc:{bg:"bg-zinc-100",border:"border-zinc-500",icon:"text-zinc-600"},lime:{bg:"bg-lime-100",border:"border-lime-500",icon:"text-lime-600"},fuchsia:{bg:"bg-fuchsia-100",border:"border-fuchsia-500",icon:"text-fuchsia-600"},sky:{bg:"bg-sky-100",border:"border-sky-500",icon:"text-sky-600"},gray:{bg:"bg-gray-100",border:"border-gray-500",icon:"text-gray-600"}},r=n[e]||n.blue;return{bg:t?r.bg:`${r.bg.replace("100","50")}`,border:r.border,icon:r.icon}};function Plt({isOpen:e,onClose:t,onSubmit:n,profile:r}){const[i,s]=w.useState(!1),[a,o]=w.useState({title:"",description:"",target_role:"",location:"",selectedIcon:ax[0]});w.useEffect(()=>{if(r){let d=ax[0];if(r.profile_image_url)try{const f=JSON.parse(r.profile_image_url),h=ax.find(p=>p.id===f.iconId);h&&(d=h)}catch(f){console.warn("Failed to parse profile icon data:",f)}o({title:r.title||"",description:r.description||"",target_role:r.target_role||"",location:r.location||"",selectedIcon:d})}},[r]);const c=d=>{o(f=>({...f,selectedIcon:d}))},u=async d=>{if(d.preventDefault(),!a.title.trim()||!r)return;s(!0);const f={title:a.title,description:a.description||void 0,target_role:a.target_role||void 0,location:a.location||void 0,profile_image_url:JSON.stringify({iconId:a.selectedIcon.id,color:a.selectedIcon.color,name:a.selectedIcon.name})};try{await n(r.id,f),t()}catch(h){console.error("Failed to update profile:",h)}finally{s(!1)}};return r?l.jsx(xt,{open:e,onOpenChange:t,children:l.jsxs(ft,{className:"sm:max-w-[500px] max-h-[80vh] overflow-y-auto",children:[l.jsx(ht,{children:l.jsx(pt,{className:"flex items-center gap-2 text-xl",children:"Edit CV Profile"})}),l.jsxs("form",{onSubmit:u,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsx(X,{children:"Profile Icon"}),l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[(()=>{const d=iU(a.selectedIcon.color,!0);return l.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center border-2 ${d.bg} ${d.border}`,children:l.jsx(a.selectedIcon.icon,{className:`h-6 w-6 ${d.icon}`})})})(),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:a.selectedIcon.name}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Selected icon"})]})]}),l.jsx("div",{className:"grid grid-cols-8 gap-2 max-h-32 overflow-y-auto p-2 border rounded-lg",children:ax.map((d,f)=>{const h=d.icon,p=a.selectedIcon.name===d.name,m=iU(d.color,p);return l.jsx("button",{type:"button",onClick:()=>c(d),className:`w-10 h-10 rounded-lg flex items-center justify-center transition-all hover:scale-110 border-2 ${m.bg} ${m.border} ${p?"ring-2 ring-primary shadow-md":"hover:bg-gray-100 opacity-70 hover:opacity-100"}`,title:d.name,children:l.jsx(h,{className:`h-5 w-5 ${m.icon}`})},f)})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"title",children:"Profile Title *"}),l.jsx(re,{id:"title",required:!0,value:a.title,onChange:d=>o(f=>({...f,title:d.target.value})),placeholder:"e.g., Senior Full Stack Developer, Marketing Manager"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"description",children:"Description"}),l.jsx(ti,{id:"description",value:a.description,onChange:d=>o(f=>({...f,description:d.target.value})),placeholder:"Brief description of this CV profile...",rows:3})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"target_role",children:"Target Role"}),l.jsx(re,{id:"target_role",value:a.target_role,onChange:d=>o(f=>({...f,target_role:d.target.value})),placeholder:"e.g., Senior Developer, Consultant"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"location",children:"Location"}),l.jsx(re,{id:"location",value:a.location,onChange:d=>o(f=>({...f,location:d.target.value})),placeholder:"e.g., Stockholm, Remote"})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[l.jsx(H,{type:"button",variant:"outline",onClick:t,disabled:i,children:"Cancel"}),l.jsx(H,{type:"submit",disabled:i||!a.title.trim(),children:i?"Updating...":"Update Profile"})]})]})]})}):null}function Ilt({profileId:e,onCreateVersion:t,onEditVersions:n}){const{versions:r,loading:i}=roe(e);return i?l.jsx("div",{className:"text-xs text-muted-foreground",children:"Loading versions..."}):l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(en,{className:"h-3 w-3 text-muted-foreground"}),l.jsx("span",{className:"text-xs font-medium",children:"CV Variants"}),l.jsx(Ot,{variant:"secondary",className:"text-xs px-1 py-0",children:r.length})]}),t&&l.jsx(H,{size:"sm",variant:"ghost",onClick:t,className:"h-6 w-6 p-0",children:l.jsx(Xe,{className:"h-3 w-3"})})]}),r.length>0?l.jsxs("div",{className:"space-y-1",children:[r.slice(0,2).map(s=>l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("div",{className:"truncate font-medium",children:s.version_name}),s.is_current&&l.jsx(Ot,{variant:"default",className:"text-xs px-1 py-0",children:"Current"})]}),s.role_focus&&l.jsx("div",{className:"text-muted-foreground truncate",children:s.role_focus})]},s.id)),r.length>2&&l.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",r.length-2," more variants"]}),n&&r.length>0&&l.jsxs(H,{size:"sm",variant:"outline",onClick:n,className:"w-full h-6 text-xs gap-1",children:[l.jsx(tE,{className:"h-3 w-3"}),"Manage Variants"]})]}):l.jsx("div",{className:"text-xs text-muted-foreground",children:"No CV variants yet"})]})}function Dlt(){const{baseUrl:e,useLocalAPI:t}=Ql;return l.jsxs("div",{className:"flex items-center gap-2 text-xs px-2 py-1 rounded-md bg-gray-100 border",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${t?"bg-green-500":"bg-blue-500"}`}),l.jsxs("span",{className:"font-medium",children:["CV API: ",t?"LOCAL":"REMOTE"]}),l.jsx("span",{className:"text-gray-600 font-mono text-[10px]",children:e.replace("/.netlify/functions","")})]})}function Mlt(){const[e,t]=w.useState([]),[n,r]=w.useState(!0),[i,s]=w.useState(null),{user:a}=jr(),o=w.useCallback(async()=>{if(!a){t([]),r(!1);return}try{r(!0);const{data:p,error:m}=await ie.from("cv_profiles").select("*").eq("user_id",a.id).order("updated_at",{ascending:!1});if(m)throw m;t(p||[])}catch(p){s(p instanceof Error?p.message:"An error occurred")}finally{r(!1)}},[a]),c=async p=>{if(!a)throw new Error("User not authenticated");try{const{data:m,error:g}=await ie.from("cv_profiles").insert([{...p,user_id:a.id}]).select().single();if(g)throw g;return t(v=>[m,...v]),m}catch(m){throw new Error(m instanceof Error?m.message:"Failed to create profile")}},u=async(p,m)=>{try{const{data:g,error:v}=await ie.from("cv_profiles").update(m).eq("id",p).select().single();if(v)throw v;return t(y=>y.map(x=>x.id===p?g:x)),g}catch(g){throw new Error(g instanceof Error?g.message:"Failed to update profile")}},d=async p=>{try{const{error:m}=await ie.from("cv_profiles").delete().eq("id",p);if(m)throw m;t(g=>g.filter(v=>v.id!==p))}catch(m){throw new Error(m instanceof Error?m.message:"Failed to delete profile")}},f=async(p,m)=>{const g=e.find(E=>E.id===p);if(!g)throw new Error("Profile not found");const{id:v,user_id:y,created_at:x,updated_at:b,...S}=g;return c({...S,title:m,is_active:!1})},h=async p=>{if(!a)throw new Error("User not authenticated");try{const{error:m}=await ie.from("cv_profiles").update({is_active:!1}).eq("user_id",a.id);if(m)throw m;const{data:g,error:v}=await ie.from("cv_profiles").update({is_active:!0}).eq("id",p).eq("user_id",a.id).select().single();if(v)throw v;return t(y=>y.map(x=>({...x,is_active:x.id===p}))),g}catch(m){throw new Error(m instanceof Error?m.message:"Failed to set active profile")}};return w.useEffect(()=>{o()},[o]),{profiles:e,loading:n,error:i,createProfile:c,updateProfile:u,deleteProfile:d,duplicateProfile:f,setActiveProfile:h,refetch:o}}function sU(e){var t,n;return{personalInfo:{name:e.personalInfo.name,title:e.personalInfo.title,email:e.personalInfo.email,phone:e.personalInfo.phone||"",location:e.personalInfo.location||"",profileImage:e.personalInfo.profileImage},company:e.company,summary:{introduction:e.summary.introduction,highlights:e.summary.highlights,specialties:e.summary.specialties||[]},employment:(e.employment||[]).map(r=>({period:r.period,position:r.position,company:r.company,description:r.description,technologies:r.technologies||[],achievements:r.achievements||[]})),projects:(e.projects||[]).map(r=>({period:r.period,type:r.type,title:r.title,description:r.description,technologies:r.technologies||[]})),education:e.education||[],certifications:e.certifications||[],competencies:(e.competencies||[]).map(r=>({category:r.category,items:r.skills.map(i=>i.name)})),languages:e.languages||[],template:e.template,format:e.format,styling:{primaryColor:((t=e.styling)==null?void 0:t.primaryColor)||"#003D82",accentColor:((n=e.styling)==null?void 0:n.accentColor)||"#FF6B35"}}}const Rlt={developer:mc,"senior-dev":vb,architect:Xu,"scrum-master":Tr,"ai-specialist":jg,"accessibility-expert":Hi,devops:wO,"cloud-engineer":fO,"security-expert":R0,"database-admin":mO,"network-engineer":bO,"mobile-dev":EO,"frontend-dev":yO,"backend-dev":hO,"fullstack-dev":Xu,"qa-engineer":lO,"tech-lead":Wi,"product-owner":cr,"solution-architect":Og,"innovation-lead":gb,"automation-expert":iE,"systems-admin":Zs,cybersecurity:ro,"git-specialist":vO,code:mc,terminal:vb,users:Tr,target:Wi,globe:Og,lightbulb:gb,layers:Xu},Llt=e=>{const t={blue:{bg:"bg-blue-100",border:"border-blue-500",icon:"text-blue-600"},indigo:{bg:"bg-indigo-100",border:"border-indigo-500",icon:"text-indigo-600"},green:{bg:"bg-green-100",border:"border-green-500",icon:"text-green-600"},purple:{bg:"bg-purple-100",border:"border-purple-500",icon:"text-purple-600"},pink:{bg:"bg-pink-100",border:"border-pink-500",icon:"text-pink-600"},yellow:{bg:"bg-yellow-100",border:"border-yellow-500",icon:"text-yellow-600"},orange:{bg:"bg-orange-100",border:"border-orange-500",icon:"text-orange-600"},red:{bg:"bg-red-100",border:"border-red-500",icon:"text-red-600"},cyan:{bg:"bg-cyan-100",border:"border-cyan-500",icon:"text-cyan-600"},emerald:{bg:"bg-emerald-100",border:"border-emerald-500",icon:"text-emerald-600"},slate:{bg:"bg-slate-100",border:"border-slate-500",icon:"text-slate-600"},teal:{bg:"bg-teal-100",border:"border-teal-500",icon:"text-teal-600"},rose:{bg:"bg-rose-100",border:"border-rose-500",icon:"text-rose-600"},violet:{bg:"bg-violet-100",border:"border-violet-500",icon:"text-violet-600"},amber:{bg:"bg-amber-100",border:"border-amber-500",icon:"text-amber-600"},stone:{bg:"bg-stone-100",border:"border-stone-500",icon:"text-stone-600"},zinc:{bg:"bg-zinc-100",border:"border-zinc-500",icon:"text-zinc-600"},lime:{bg:"bg-lime-100",border:"border-lime-500",icon:"text-lime-600"},fuchsia:{bg:"bg-fuchsia-100",border:"border-fuchsia-500",icon:"text-fuchsia-600"},sky:{bg:"bg-sky-100",border:"border-sky-500",icon:"text-sky-600"}};return t[e]||t.blue},Flt=({profile:e,size:t="md"})=>{const n={sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12"},r={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"};try{if(e.profile_image_url){const i=JSON.parse(e.profile_image_url),s=Rlt[i.iconId],a=Llt(i.color||"blue");if(s)return l.jsx("div",{className:`${n[t]} rounded-lg flex items-center justify-center border-2 ${a.bg} ${a.border}`,children:l.jsx(s,{className:`${r[t]} ${a.icon}`})})}}catch{}return l.jsx("div",{className:`${n[t]} rounded-lg flex items-center justify-center border-2 bg-gray-100 border-gray-300`,children:l.jsx(Ei,{className:`${r[t]} text-gray-600`})})};function Blt(){var B,R,F,O,Q,Y,$,ye,Te;const[e,t]=w.useState(!1),[n,r]=w.useState(null),[i,s]=w.useState(!1),[a,o]=w.useState(null),[c,u]=w.useState(!1),[d,f]=w.useState(!1),[h,p]=w.useState(null),[m,g]=w.useState({}),{profiles:v,loading:y,createProfile:x,deleteProfile:b,updateProfile:S,setActiveProfile:E}=Mlt(),N=()=>{u(!0)},_=async U=>{const K=await x(U);K&&(r(K),t(!0))},k=U=>{r(U),t(!0)},T=U=>{p(U),f(!0)},A=async(U,K)=>{try{await S(U,K),f(!1),p(null)}catch(fe){throw console.error("Failed to update profile:",fe),fe}},j=async U=>{try{await E(U)}catch(K){console.error("Failed to set active profile:",K)}},D=async U=>{try{const{data:K,error:fe}=await ie.from("cv_versions").select("*").eq("cv_profile_id",U).eq("is_current",!0).single();return fe||!(K!=null&&K.snapshot_data)?(console.warn("No CV data found for profile",U),null):K.snapshot_data}catch(K){return console.error("Error fetching CV data:",K),null}},I=async U=>{var oe;const K=v.find(le=>le.is_active);if(!K)return;const fe=`${K.id}-${U}`;g(le=>({...le,[fe]:!0}));try{const le=await D(K.id);if(!le){r(K),t(!0);return}const Ee=_0(le,{format:U,template:"andervang-consulting",company:"Frank Digital AB"}),se=sU(Ee),qe=await hlt(se);if(qe.success&&((oe=qe.data)!=null&&oe.url)){const Oe=document.createElement("a");Oe.href=qe.data.url,Oe.download=`${K.title}_CV.${U}`,document.body.appendChild(Oe),Oe.click(),document.body.removeChild(Oe)}else throw new Error(qe.error||"Generation failed")}catch(le){console.error("Failed to generate CV:",le),r(K),t(!0)}finally{g(le=>({...le,[fe]:!1}))}},M=async()=>{const U=v.find(fe=>fe.is_active);if(!U)return;const K=`${U.id}-all`;g(fe=>({...fe,[K]:!0}));try{const fe=await D(U.id);if(!fe){r(U),t(!0);return}const oe=_0(fe,{format:"pdf",template:"andervang-consulting",company:"Frank Digital AB"}),le=sU(oe),{format:Ee,...se}=le,qe=await plt(se,["pdf","docx","html"]);Object.entries(qe).forEach(([Oe,et])=>{var J;et.success&&((J=et.data)!=null&&J.url)&&setTimeout(()=>{const pe=document.createElement("a");pe.href=et.data.url,pe.download=`${U.title}_CV.${Oe}`,document.body.appendChild(pe),pe.click(),document.body.removeChild(pe)},100)})}catch(fe){console.error("Failed to generate CVs:",fe),r(U),t(!0)}finally{g(fe=>({...fe,[K]:!1}))}},L=U=>{o(U),s(!0)},P=async()=>{if(a)try{await b(a.id),s(!1),o(null)}catch(U){console.error("Failed to delete profile:",U)}};return y?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),l.jsx("p",{children:"Loading CV data..."})]})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"CV Manager"}),l.jsx("p",{className:"text-muted-foreground",children:"Create and manage your professional CV profiles"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Dlt,{}),l.jsxs(H,{onClick:N,className:"gap-2",children:[l.jsx(Xe,{className:"h-4 w-4"}),"New CV Profile"]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(Z,{children:[l.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(he,{className:"text-sm font-medium",children:"Total Profiles"}),l.jsx(Ei,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsxs(ee,{children:[l.jsx("div",{className:"text-2xl font-bold",children:v.length}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"CV profiles created"})]})]}),l.jsxs(Z,{children:[l.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(he,{className:"text-sm font-medium",children:"Active Profile"}),l.jsx(Hi,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsxs(ee,{children:[l.jsx("div",{className:"text-2xl font-bold",children:((B=v.find(U=>U.is_active))==null?void 0:B.title)||"None"}),l.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Currently active"}),v.find(U=>U.is_active)&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-sm font-medium",children:"Quick CV Generation"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(H,{size:"sm",variant:"outline",className:"flex-1 gap-2",onClick:()=>I("pdf"),disabled:m[`${(R=v.find(U=>U.is_active))==null?void 0:R.id}-pdf`],children:m[`${(F=v.find(U=>U.is_active))==null?void 0:F.id}-pdf`]?l.jsx(l.Fragment,{children:" Generating..."}):l.jsx(l.Fragment,{children:" PDF"})}),l.jsx(H,{size:"sm",variant:"outline",className:"flex-1 gap-2",onClick:()=>I("docx"),disabled:m[`${(O=v.find(U=>U.is_active))==null?void 0:O.id}-docx`],children:m[`${(Q=v.find(U=>U.is_active))==null?void 0:Q.id}-docx`]?l.jsx(l.Fragment,{children:" Generating..."}):l.jsx(l.Fragment,{children:" DOCX"})}),l.jsx(H,{size:"sm",variant:"outline",className:"flex-1 gap-2",onClick:()=>I("html"),disabled:m[`${(Y=v.find(U=>U.is_active))==null?void 0:Y.id}-html`],children:m[`${($=v.find(U=>U.is_active))==null?void 0:$.id}-html`]?l.jsx(l.Fragment,{children:" Generating..."}):l.jsx(l.Fragment,{children:" HTML"})})]}),l.jsxs(H,{size:"sm",className:"w-full gap-2",onClick:()=>M(),disabled:m[`${(ye=v.find(U=>U.is_active))==null?void 0:ye.id}-all`],children:[l.jsx(en,{className:"h-3 w-3"}),m[`${(Te=v.find(U=>U.is_active))==null?void 0:Te.id}-all`]?"Generating All...":"Generate All Formats"]})]})]})]}),l.jsxs(Z,{children:[l.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(he,{className:"text-sm font-medium",children:"Last Updated"}),l.jsx(en,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsxs(ee,{children:[l.jsx("div",{className:"text-2xl font-bold",children:v.length>0?A1(new Date(Math.max(...v.map(U=>new Date(U.updated_at).getTime()))),{addSuffix:!0}):"Never"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Most recent edit"})]})]})]}),l.jsxs(Z,{children:[l.jsxs(de,{children:[l.jsx(he,{children:"Your CV Profiles"}),l.jsx(br,{children:"Create and manage different CV profiles for various roles and industries"})]}),l.jsx(ee,{children:v.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx(Ei,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No CV profiles yet"}),l.jsx("p",{className:"text-muted-foreground mb-6",children:"Create your first CV profile to get started"}),l.jsxs(H,{onClick:N,className:"gap-2",children:[l.jsx(Xe,{className:"h-4 w-4"}),"Create First Profile"]})]}):l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[v.map(U=>l.jsxs(Z,{className:`cursor-pointer transition-all hover:shadow-md ${U.is_active?"ring-2 ring-primary":""}`,children:[l.jsxs(de,{className:"pb-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Flt,{profile:U,size:"sm"}),l.jsx(he,{className:"text-lg",children:U.title})]}),U.is_active&&l.jsx(Ot,{variant:"default",className:"text-xs",children:"Active"})]}),l.jsxs(br,{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium",children:"Role:"}),l.jsx("span",{children:U.target_role||"Not specified"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium",children:"Location:"}),l.jsx("span",{children:U.location||"Not specified"})]}),U.description&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium",children:"Description:"}),l.jsx("span",{className:"truncate",children:U.description})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium",children:"Updated:"}),l.jsx("span",{children:A1(new Date(U.updated_at),{addSuffix:!0})})]}),l.jsx("div",{className:"pt-2 border-t",children:l.jsx(Ilt,{profileId:U.id,onCreateVersion:()=>{r(U),t(!0)},onEditVersions:()=>{r(U),t(!0)}})})]})]}),l.jsx(ee,{className:"pt-0",children:l.jsxs("div",{className:"flex gap-2 flex-wrap",children:[l.jsxs(H,{variant:"outline",size:"sm",onClick:()=>k(U),className:"flex-1 gap-2",children:[l.jsx(uo,{className:"h-3 w-3"}),"Edit CV"]}),l.jsxs(H,{variant:"outline",size:"sm",onClick:()=>T(U),className:"gap-2",children:[l.jsx(Zs,{className:"h-3 w-3"}),"Profile"]}),!U.is_active&&l.jsxs(H,{variant:"outline",size:"sm",onClick:()=>j(U.id),className:"gap-2 text-green-600 hover:text-green-700 hover:border-green-300",children:[l.jsx(Wi,{className:"h-3 w-3"}),"Set Active"]}),l.jsxs(H,{variant:"outline",size:"sm",onClick:()=>L(U),className:"gap-2 text-red-600 hover:text-red-700 hover:border-red-300",children:[l.jsx(lr,{className:"h-3 w-3"}),"Delete"]})]})})]},U.id)),l.jsx(Z,{className:"cursor-pointer transition-all hover:shadow-md border-dashed",children:l.jsxs(ee,{className:"flex flex-col items-center justify-center h-full py-12",children:[l.jsx(Xe,{className:"h-8 w-8 text-muted-foreground mb-4"}),l.jsx("h3",{className:"font-semibold mb-2",children:"Add New Profile"}),l.jsx("p",{className:"text-sm text-muted-foreground text-center mb-4",children:"Create a CV profile for a different role or industry"}),l.jsx(H,{onClick:N,variant:"outline",size:"sm",children:"Create Profile"})]})})]})})]}),e&&n&&l.jsx(jlt,{isOpen:e,onClose:()=>{t(!1),r(null)},userId:n.id}),l.jsx(xt,{open:i,onOpenChange:s,children:l.jsxs(ft,{className:"max-w-md",children:[l.jsx(ht,{children:l.jsx(pt,{children:"Delete CV Profile"})}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("p",{children:['Are you sure you want to delete the CV profile "',a==null?void 0:a.title,'"?']}),l.jsx("div",{className:"bg-red-50 border border-red-200 p-3 rounded-lg",children:l.jsxs("p",{className:"text-sm text-red-800",children:[l.jsx("strong",{children:"Warning:"})," This action cannot be undone. All CV versions and data associated with this profile will be permanently deleted."]})})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(H,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),l.jsx(H,{variant:"destructive",onClick:P,children:"Delete Profile"})]})]})}),l.jsx(Olt,{isOpen:c,onClose:()=>u(!1),onSubmit:_,profilesCount:v.length}),l.jsx(Plt,{isOpen:d,onClose:()=>{f(!1),p(null)},onSubmit:A,profile:h})]})}function $lt(e){const{user:t}=jr(),n=t==null?void 0:t.id,[r,i]=w.useState([]),[s,a]=w.useState(!0),[o,c]=w.useState(null),u=async()=>{if(!n){a(!1);return}try{a(!0),c(null);const{data:g,error:v}=await ie.from("salary_employees").select("*").eq("user_id",n).order("created_at",{ascending:!1});if(v)throw v;i(g||[])}catch(g){console.error("Error fetching employees:",g),c(g instanceof Error?g.message:"Failed to fetch employees")}finally{a(!1)}},d=async g=>{if(!n)throw new Error("User not authenticated");try{const v={...g,user_id:n,currency:g.currency||"SEK",employment_start_date:g.employment_start_date||new Date().toISOString().split("T")[0],is_active:!0},{data:y,error:x}=await ie.from("salary_employees").insert([v]).select().single();if(x)throw x;return i(b=>[y,...b]),console.log(" Employee added:",y.name),y}catch(v){throw console.error("Error adding employee:",v),c(v instanceof Error?v.message:"Failed to add employee"),v}},f=async g=>{if(!n)throw new Error("User not authenticated");try{const{id:v,...y}=g,{data:x,error:b}=await ie.from("salary_employees").update(y).eq("id",v).eq("user_id",n).select().single();if(b)throw b;return i(S=>S.map(E=>E.id===v?x:E)),console.log(" Employee updated:",x.name),x}catch(v){throw console.error("Error updating employee:",v),c(v instanceof Error?v.message:"Failed to update employee"),v}},h=async g=>{if(!n)throw new Error("User not authenticated");try{const{data:v,error:y}=await ie.from("salary_payments").select("id").eq("employee_id",g).limit(1);if(y)throw y;if(v&&v.length>0)return await f({id:g,is_active:!1}),console.log(" Employee deactivated (has salary payments)"),!0;const{error:x}=await ie.from("salary_employees").delete().eq("id",g).eq("user_id",n);if(x)throw x;return i(b=>b.filter(S=>S.id!==g)),console.log(" Employee deleted"),!0}catch(v){return console.error("Error deleting employee:",v),c(v instanceof Error?v.message:"Failed to delete employee"),!1}},p=()=>r.filter(g=>g.is_active),m=g=>r.find(v=>v.id===g);return w.useEffect(()=>{u()},[n]),{employees:r,loading:s,error:o,addEmployee:d,updateEmployee:f,deleteEmployee:h,getActiveEmployees:p,getEmployeeById:m,refetch:u}}function Ult(e){const{user:t}=jr(),n=t==null?void 0:t.id,[r,i]=w.useState([]),[s,a]=w.useState(!0),[o,c]=w.useState(null),{processYearlyVat:u,vatSettings:d}=AS(n||null),f=async()=>{if(!(!n||!(d!=null&&d.auto_generate_yearly_vat)))try{const N=new Date().getFullYear()-1;console.log(` Processing automatic VAT for ${N}...`);const _=await u(N);console.log(_?` VAT entry created for ${N}: ${_}`:` No VAT entry needed for ${N}`)}catch(E){console.error("Error processing automatic VAT:",E)}};w.useEffect(()=>{d&&d.auto_generate_yearly_vat&&f()},[d]);const h=async()=>{if(!n){a(!1);return}try{a(!0),c(null);const{data:E,error:N}=await ie.from("salary_payments").select(`
          *,
          employee:salary_employees(id, name, position, base_salary, currency)
        `).eq("user_id",n).order("year",{ascending:!1}).order("month",{ascending:!1});if(N)throw N;i(E||[])}catch(E){console.error("Error fetching salary payments:",E),c(E instanceof Error?E.message:"Failed to fetch salary payments")}finally{a(!1)}},p=async E=>{if(!n)throw new Error("User not authenticated");try{const N={...E,user_id:n,status:E.status||"scheduled"},{data:_,error:k}=await ie.from("salary_payments").insert([N]).select().single();if(k)throw k;return await v(_),await h(),console.log(" Salary payment added:",`${_.year}-${_.month.toString().padStart(2,"0")}`),_}catch(N){throw console.error("Error adding salary payment:",N),c(N instanceof Error?N.message:"Failed to add salary payment"),N}},m=async E=>{if(!n)throw new Error("User not authenticated");try{const{id:N,..._}=E,{data:k,error:T}=await ie.from("salary_payments").update(_).eq("id",N).eq("user_id",n).select().single();if(T)throw T;return await y(k),await h(),console.log(" Salary payment updated:",`${k.year}-${k.month.toString().padStart(2,"0")}`),k}catch(N){throw console.error("Error updating salary payment:",N),c(N instanceof Error?N.message:"Failed to update salary payment"),N}},g=async E=>{if(!n)throw new Error("User not authenticated");try{const N=r.find(k=>k.id===E),{error:_}=await ie.from("salary_payments").delete().eq("id",E).eq("user_id",n);if(_)throw _;return N!=null&&N.cash_flow_entry_id&&await ie.from("cash_flow_entries").delete().eq("id",N.cash_flow_entry_id),N!=null&&N.employer_tax_entry_id&&await ie.from("cash_flow_entries").delete().eq("id",N.employer_tax_entry_id),i(k=>k.filter(T=>T.id!==E)),console.log(" Salary payment deleted"),!0}catch(N){return console.error("Error deleting salary payment:",N),c(N instanceof Error?N.message:"Failed to delete salary payment"),!1}},v=async E=>{try{if(E.status!=="scheduled"||E.total_amount<=0){console.log(" Skipping cash flow entry creation: status is not scheduled or amount is 0");return}const{data:N}=await ie.from("user_profiles").select("auto_generate_employer_tax, employer_tax_payment_date").eq("id",E.user_id).single(),{data:_}=await ie.from("salary_employees").select("name, position").eq("id",E.employee_id).single(),k=_?`Salary - ${_.name}${_.position?` (${_.position})`:""}`:"Salary Payment",T={user_id:E.user_id,type:"expense",amount:E.total_amount,description:k,category:"Salary",date:E.payment_date||`${E.year}-${E.month.toString().padStart(2,"0")}-01`,is_recurring:!1,is_budget_entry:!1,is_recurring_instance:!1},{data:A,error:j}=await ie.from("cash_flow_entries").insert([T]).select().single();if(j)throw j;if(await ie.from("salary_payments").update({cash_flow_entry_id:A.id}).eq("id",E.id),console.log(" Cash flow entry created for salary payment"),N!=null&&N.auto_generate_employer_tax){const D=Math.round(E.total_amount*.3142),I=N.employer_tax_payment_date||25;let M=E.year,L=E.month+1;L>12&&(L=1,M++);const B=new Date(M,L-1,Math.min(I,new Date(M,L,0).getDate())).toISOString().split("T")[0],R=_?`Employer Tax - ${_.name}${_.position?` (${_.position})`:""}`:"Employer Tax Payment",F={user_id:E.user_id,type:"expense",amount:D,description:R,category:"Employer Tax",date:B,is_recurring:!1,is_budget_entry:!1,is_recurring_instance:!1},{data:O,error:Q}=await ie.from("cash_flow_entries").insert([F]).select().single();if(Q)throw Q;await ie.from("salary_payments").update({employer_tax_entry_id:O.id}).eq("id",E.id),console.log(" Employer tax cash flow entry created")}}catch(N){console.error("Error creating cash flow entry:",N)}},y=async E=>{const N=E.status==="scheduled"&&E.total_amount>0,{data:_}=await ie.from("user_profiles").select("auto_generate_employer_tax, employer_tax_payment_date").eq("id",E.user_id).single(),k=N&&(_==null?void 0:_.auto_generate_employer_tax);if(!E.cash_flow_entry_id&&N){await v(E);return}if(E.cash_flow_entry_id&&!N)try{await ie.from("cash_flow_entries").delete().eq("id",E.cash_flow_entry_id),await ie.from("salary_payments").update({cash_flow_entry_id:null}).eq("id",E.id),console.log(" Cash flow entry deleted (status not scheduled or amount is 0)")}catch(T){console.error("Error deleting cash flow entry:",T)}if(E.employer_tax_entry_id&&!k)try{await ie.from("cash_flow_entries").delete().eq("id",E.employer_tax_entry_id),await ie.from("salary_payments").update({employer_tax_entry_id:null}).eq("id",E.id),console.log(" Employer tax cash flow entry deleted")}catch(T){console.error("Error deleting employer tax cash flow entry:",T)}if(!(!E.cash_flow_entry_id||!N))try{const{data:T}=await ie.from("salary_employees").select("name, position").eq("id",E.employee_id).single(),A=T?`Salary - ${T.name}${T.position?` (${T.position})`:""}`:"Salary Payment";if(await ie.from("cash_flow_entries").update({amount:E.total_amount,description:A,date:E.payment_date||`${E.year}-${E.month.toString().padStart(2,"0")}-01`}).eq("id",E.cash_flow_entry_id),console.log(" Cash flow entry updated for salary payment"),E.employer_tax_entry_id&&k){const j=Math.round(E.total_amount*.3142),D=(_==null?void 0:_.employer_tax_payment_date)||25;let I=E.year,M=E.month+1;M>12&&(M=1,I++);const P=new Date(I,M-1,Math.min(D,new Date(I,M,0).getDate())).toISOString().split("T")[0],B=T?`Employer Tax - ${T.name}${T.position?` (${T.position})`:""}`:"Employer Tax Payment";await ie.from("cash_flow_entries").update({amount:j,description:B,date:P}).eq("id",E.employer_tax_entry_id),console.log(" Employer tax cash flow entry updated")}else if(!E.employer_tax_entry_id&&k){const j=Math.round(E.total_amount*.3142),D=(_==null?void 0:_.employer_tax_payment_date)||25;let I=E.year,M=E.month+1;M>12&&(M=1,I++);const P=new Date(I,M-1,Math.min(D,new Date(I,M,0).getDate())).toISOString().split("T")[0],B=T?`Employer Tax - ${T.name}${T.position?` (${T.position})`:""}`:"Employer Tax Payment",R={user_id:E.user_id,type:"expense",amount:j,description:B,category:"Employer Tax",date:P,is_recurring:!1,is_budget_entry:!1,is_recurring_instance:!1},{data:F,error:O}=await ie.from("cash_flow_entries").insert([R]).select().single();if(O)throw O;await ie.from("salary_payments").update({employer_tax_entry_id:F.id}).eq("id",E.id),console.log(" New employer tax cash flow entry created")}}catch(T){console.error("Error updating cash flow entry:",T)}},x=E=>r.filter(N=>N.year===E),b=(E,N,_)=>r.find(k=>k.employee_id===E&&k.year===N&&k.month===_),S=async E=>{if(!n)throw new Error("User not authenticated");try{const{data:N,error:_}=await ie.from("salary_employees").select("*").eq("user_id",n).eq("is_active",!0);if(_)throw _;const k=new Date().getMonth()+1,T=new Date().getFullYear(),A=E===T?k:1,j=12,D=[];for(const I of N||[])for(let M=A;M<=j;M++)r.find(P=>P.employee_id===I.id&&P.year===E&&P.month===M)||D.push({user_id:n,employee_id:I.id,year:E,month:M,salary_amount:I.base_salary,status:"scheduled"});if(D.length>0){const{error:I}=await ie.from("salary_payments").insert(D);if(I)throw I;console.log(` Generated ${D.length} salary payments for ${E}`),await h()}}catch(N){throw console.error("Error generating yearly payments:",N),c(N instanceof Error?N.message:"Failed to generate yearly payments"),N}};return w.useEffect(()=>{h()},[n]),{payments:r,loading:s,error:o,addSalaryPayment:p,updateSalaryPayment:m,deleteSalaryPayment:g,getPaymentsByYear:x,getPaymentByEmployeeMonth:b,generateYearlyPayments:S,refetch:h}}function zlt({employee:e,onSubmit:t,onCancel:n}){const[r,i]=w.useState({name:"",email:"",phone:"",employee_number:"",position:"",base_salary:0,currency:"SEK",employment_start_date:new Date().toISOString().split("T")[0],employment_end_date:""}),[s,a]=w.useState(!1),[o,c]=w.useState(null);w.useEffect(()=>{e&&i({name:e.name,email:e.email||"",phone:e.phone||"",employee_number:e.employee_number||"",position:e.position||"",base_salary:e.base_salary,currency:e.currency,employment_start_date:e.employment_start_date,employment_end_date:e.employment_end_date||""})},[e]);const u=async d=>{var f,h,p,m;if(d.preventDefault(),!r.name.trim()){c("Name is required");return}if(r.base_salary<=0){c("Base salary must be greater than 0");return}try{a(!0),c(null);const g={...r,email:((f=r.email)==null?void 0:f.trim())||void 0,phone:((h=r.phone)==null?void 0:h.trim())||void 0,employee_number:((p=r.employee_number)==null?void 0:p.trim())||void 0,position:((m=r.position)==null?void 0:m.trim())||void 0,employment_end_date:r.employment_end_date||void 0};await t(g)}catch(g){console.error("Error saving employee:",g),c(g instanceof Error?g.message:"Failed to save employee")}finally{a(!1)}};return l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs(Z,{className:"w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[l.jsx(de,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(he,{children:e?"Edit Employee":"Add New Employee"}),l.jsx(H,{variant:"ghost",size:"sm",onClick:n,children:l.jsx(Qn,{className:"h-4 w-4"})})]})}),l.jsx(ee,{children:l.jsxs("form",{onSubmit:u,className:"space-y-4",children:[o&&l.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 rounded-lg border border-red-200",children:o}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Name *"}),l.jsx(re,{value:r.name,onChange:d=>i({...r,name:d.target.value}),placeholder:"Full name",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Employee Number"}),l.jsx(re,{value:r.employee_number,onChange:d=>i({...r,employee_number:d.target.value}),placeholder:"Employee ID/Number"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),l.jsx(re,{type:"email",value:r.email,onChange:d=>i({...r,email:d.target.value}),placeholder:"email@company.com"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone"}),l.jsx(re,{type:"tel",value:r.phone,onChange:d=>i({...r,phone:d.target.value}),placeholder:"+46 70 123 45 67"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Position/Role"}),l.jsx(re,{value:r.position,onChange:d=>i({...r,position:d.target.value}),placeholder:"Job title or position"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Base Salary (Monthly) *"}),l.jsx(re,{type:"number",min:"0",step:"0.01",value:r.base_salary,onChange:d=>i({...r,base_salary:parseFloat(d.target.value)||0}),placeholder:"0.00",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Currency"}),l.jsxs("select",{value:r.currency,onChange:d=>i({...r,currency:d.target.value}),className:"w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring",title:"Select currency",children:[l.jsx("option",{value:"SEK",children:"SEK (Swedish Krona)"}),l.jsx("option",{value:"EUR",children:"EUR (Euro)"}),l.jsx("option",{value:"USD",children:"USD (US Dollar)"}),l.jsx("option",{value:"NOK",children:"NOK (Norwegian Krone)"}),l.jsx("option",{value:"DKK",children:"DKK (Danish Krone)"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Employment Start Date *"}),l.jsx(re,{type:"date",value:r.employment_start_date,onChange:d=>i({...r,employment_start_date:d.target.value}),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Employment End Date"}),l.jsx(re,{type:"date",value:r.employment_end_date,onChange:d=>i({...r,employment_end_date:d.target.value}),placeholder:"Leave empty if currently employed"})]})]}),l.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[l.jsx(H,{type:"submit",disabled:s,className:"flex-1",children:s?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):e?"Update Employee":"Add Employee"}),l.jsx(H,{type:"button",variant:"outline",onClick:n,disabled:s,children:"Cancel"})]})]})})]})})}const Hlt=["January","February","March","April","May","June","July","August","September","October","November","December"];function Vlt({isOpen:e,onClose:t,employee:n,payment:r,year:i,month:s,onSave:a,onDelete:o}){const[c,u]=w.useState(""),[d,f]=w.useState(""),[h,p]=w.useState(""),[m,g]=w.useState(""),[v,y]=w.useState("scheduled"),[x,b]=w.useState(""),[S,E]=w.useState(!1);w.useEffect(()=>{var T,A;e&&n&&(r?(u(r.salary_amount.toString()),f(((T=r.bonus_amount)==null?void 0:T.toString())||""),p(((A=r.deductions)==null?void 0:A.toString())||""),g(r.payment_date||`${i}-${s.toString().padStart(2,"0")}-01`),y(r.status==="cancelled"?"scheduled":r.status),b(r.notes||"")):(u(n.base_salary.toString()),f(""),p(""),g(`${i}-${s.toString().padStart(2,"0")}-01`),y("scheduled"),b("")))},[e,n,r,i,s]);const N=async()=>{if(!n)return;const T=parseFloat(c)||0,A=parseFloat(d)||0,j=parseFloat(h)||0;if(T<0||A<0||j<0){alert("Amounts cannot be negative");return}try{E(!0);const D={employee_id:n.id,year:i,month:s,salary_amount:T,bonus_amount:A||void 0,deductions:j||void 0,payment_date:m,status:v,notes:x.trim()||void 0};r&&(D.id=r.id),await a(D),t()}catch(D){console.error("Error saving salary payment:",D),alert("Failed to save salary payment")}finally{E(!1)}},_=async()=>{if(!(!r||!o)&&confirm("Are you sure you want to delete this salary payment?"))try{E(!0),await o(r.id),t()}catch(T){console.error("Error deleting salary payment:",T),alert("Failed to delete salary payment")}finally{E(!1)}},k=(parseFloat(c)||0)+(parseFloat(d)||0)-(parseFloat(h)||0);return l.jsx(xt,{open:e,onOpenChange:t,children:l.jsxs(ft,{className:"max-w-md",children:[l.jsxs(ht,{children:[l.jsxs(pt,{className:"flex items-center gap-2",children:[l.jsx(wn,{className:"h-5 w-5"}),r?"Edit":"Add"," Salary Payment"]}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:[n==null?void 0:n.name,"  ",Hlt[s-1]," ",i]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs(X,{htmlFor:"salaryAmount",children:["Salary Amount (",(n==null?void 0:n.currency)||"SEK",")"]}),l.jsx(re,{id:"salaryAmount",type:"number",min:"0",step:"0.01",value:c,onChange:T=>u(T.target.value),placeholder:"0"}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Base salary: ",ue((n==null?void 0:n.base_salary)||0)]})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"bonusAmount",children:"Bonus Amount (optional)"}),l.jsx(re,{id:"bonusAmount",type:"number",min:"0",step:"0.01",value:d,onChange:T=>f(T.target.value),placeholder:"0"})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"deductions",children:"Deductions (optional)"}),l.jsx(re,{id:"deductions",type:"number",min:"0",step:"0.01",value:h,onChange:T=>p(T.target.value),placeholder:"0"})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"paymentDate",children:"Payment Date"}),l.jsx(re,{id:"paymentDate",type:"date",value:m,onChange:T=>g(T.target.value)})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"status",children:"Status"}),l.jsxs(gn,{value:v,onValueChange:T=>y(T),children:[l.jsx(ln,{children:l.jsx(vn,{placeholder:"Select status"})}),l.jsxs(cn,{children:[l.jsx(Ve,{value:"scheduled",children:"Scheduled"}),l.jsx(Ve,{value:"paid",children:"Paid"})]})]})]}),l.jsxs("div",{children:[l.jsx(X,{htmlFor:"notes",children:"Notes (optional)"}),l.jsx(ti,{id:"notes",value:x,onChange:T=>b(T.target.value),placeholder:"Any additional notes...",rows:2})]}),l.jsx("div",{className:"p-3 bg-muted rounded-lg",children:l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsx("span",{className:"font-medium",children:"Total Amount:"}),l.jsx("span",{className:`font-bold ${k<0?"text-red-600":"text-green-600"}`,children:ue(k)})]})}),l.jsxs("div",{className:"flex justify-between pt-4",children:[l.jsx("div",{children:r&&o&&l.jsxs(H,{variant:"outline",size:"sm",onClick:_,disabled:S,className:"text-red-600 hover:text-red-700",children:[l.jsx(lr,{className:"h-3 w-3 mr-1"}),"Delete"]})}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(H,{variant:"outline",onClick:t,disabled:S,children:"Cancel"}),l.jsx(H,{onClick:N,disabled:S,children:S?"Saving...":r?"Update":"Create"})]})]})]})]})})}function Wlt({employees:e,payments:t,year:n,onUpdatePayment:r,onAddPayment:i,onDeletePayment:s}){const[a,o]=w.useState({isOpen:!1,employee:null,payment:null,year:0,month:0}),[c,u]=w.useState(!1),d=w.useMemo(()=>{const x=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],b=new Date,S=b.getFullYear(),E=[];if(n===S)for(let N=-2;N<=11-b.getMonth();N++){const _=b.getMonth()+N;_>=0&&_<=11&&E.push({name:x[_],number:_+1,isPast:N<0,isCurrent:N===0,isFuture:N>0})}else return n>S?x.map((N,_)=>({name:N,number:_+1,isPast:!1,isCurrent:!1,isFuture:!0})):x.map((N,_)=>({name:N,number:_+1,isPast:!0,isCurrent:!1,isFuture:!1}));return E},[n]),f=w.useMemo(()=>{const x={};return t.forEach(b=>{if(b.year===n){const S=`${b.employee_id}_${b.month}`;x[S]=b}}),x},[t,n]),h=(x,b)=>f[`${x}_${b}`],p=(x,b)=>{const S=h(x.id,b);o({isOpen:!0,employee:x,payment:S||null,year:n,month:b})},m=()=>{o({isOpen:!1,employee:null,payment:null,year:0,month:0})},g=async x=>{try{u(!0),x.id?await r({id:x.id,salary_amount:x.salary_amount,bonus_amount:x.bonus_amount,deductions:x.deductions,payment_date:x.payment_date,status:x.status,notes:x.notes}):await i({employee_id:x.employee_id,year:x.year,month:x.month,salary_amount:x.salary_amount,bonus_amount:x.bonus_amount,deductions:x.deductions,payment_date:x.payment_date,status:x.status,notes:x.notes})}catch(b){throw console.error("Error saving salary payment:",b),b}finally{u(!1)}},v=async x=>{try{u(!0),await s(x)}catch(b){throw console.error("Error deleting salary payment:",b),b}finally{u(!1)}},y=x=>{if(!x)return{icon:null,color:"text-gray-400",bgColor:"bg-gray-50"};if(x.salary_amount===0)return{icon:null,color:"text-gray-400",bgColor:"bg-gray-50"};switch(x.status){case"paid":return{icon:l.jsx(Er,{className:"h-3 w-3"}),color:"text-green-600",bgColor:"bg-green-50"};case"scheduled":return{icon:l.jsx(Lt,{className:"h-3 w-3"}),color:"text-blue-600",bgColor:"bg-blue-50"};default:return{icon:null,color:"text-gray-400",bgColor:"bg-gray-50"}}};return e.length===0?l.jsx("div",{className:"text-center py-8 text-muted-foreground",children:l.jsx("p",{children:"No active employees found"})}):l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"w-full border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b",children:[l.jsx("th",{className:"text-left p-3 font-medium min-w-[200px] sticky left-0 bg-background z-10",children:"Employee"}),d.map(x=>l.jsx("th",{className:`text-center p-3 font-medium min-w-[120px] ${x.isPast?"bg-muted/30 text-muted-foreground":x.isCurrent?"bg-blue-50 border-2 border-blue-200":"bg-background"}`,children:l.jsxs("div",{children:[l.jsx("div",{className:"text-sm",children:x.name}),l.jsx("div",{className:"text-xs text-muted-foreground",children:n}),x.isCurrent&&l.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Current"})]})},x.number)),l.jsx("th",{className:"text-center p-3 font-medium min-w-[120px]",children:"Total"})]})}),l.jsx("tbody",{children:e.map(x=>{const b=d.reduce((S,E)=>{const N=h(x.id,E.number);return S+((N==null?void 0:N.total_amount)||x.base_salary)},0);return l.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[l.jsx("td",{className:"p-3 sticky left-0 bg-background z-10 border-r",children:l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:x.name}),x.position&&l.jsx("div",{className:"text-xs text-muted-foreground",children:x.position}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Base: ",ue(x.base_salary),"/month"]})]})}),d.map(S=>{const E=S.number,N=h(x.id,E),_=N?N.salary_amount:x.base_salary,k=y(N);return l.jsx("td",{className:"p-1 text-center",children:l.jsx("div",{className:`relative p-2 rounded group ${k.bgColor}`,children:l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsxs("div",{className:"flex items-center justify-center gap-1",children:[k.icon&&l.jsx("span",{className:k.color,children:k.icon}),l.jsx("span",{className:`text-xs font-medium ${k.color}`,children:ue(_).replace(" kr","").trim()})]}),(N==null?void 0:N.bonus_amount)&&N.bonus_amount>0&&l.jsxs("div",{className:"text-xs text-green-600",children:["+",ue(N.bonus_amount).replace(" kr","").trim()]}),(N==null?void 0:N.deductions)&&N.deductions>0&&l.jsxs("div",{className:"text-xs text-red-600",children:["-",ue(N.deductions).replace(" kr","").trim()]}),l.jsxs(H,{size:"sm",variant:"ghost",className:"h-6 w-16 text-xs opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>p(x,E),disabled:c,children:[l.jsx(Pg,{className:"h-3 w-3 mr-1"}),N?"Edit":"Add"]})]})})},E)}),l.jsx("td",{className:"p-3 text-center font-medium bg-muted/30",children:ue(b)})]},x.id)})}),l.jsx("tfoot",{children:l.jsxs("tr",{className:"border-t-2 font-medium",children:[l.jsx("td",{className:"p-3 sticky left-0 bg-background z-10",children:"Monthly Totals"}),d.map(x=>{const b=x.number,S=e.reduce((E,N)=>{const _=h(N.id,b);return E+((_==null?void 0:_.total_amount)||N.base_salary)},0);return l.jsx("td",{className:"p-3 text-center bg-muted/30",children:ue(S)},b)}),l.jsx("td",{className:"p-3 text-center bg-muted/50 font-bold",children:ue(e.reduce((x,b)=>{const S=d.reduce((E,N)=>{const _=h(b.id,N.number);return E+((_==null?void 0:_.total_amount)||b.base_salary)},0);return x+S},0))})]})})]}),l.jsxs("div",{className:"mt-4 flex items-center gap-4 text-xs text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Er,{className:"h-3 w-3 text-green-600"}),l.jsx("span",{children:"Paid"})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Lt,{className:"h-3 w-3 text-blue-600"}),l.jsx("span",{children:"Scheduled (shows in cash flow)"})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Pg,{className:"h-3 w-3"}),l.jsx("span",{children:"Hover and click to edit"})]}),l.jsxs("div",{className:"flex items-center gap-1 ml-4 text-blue-600",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Showing: 2 past months + current + future months"})]})]}),l.jsx(Vlt,{isOpen:a.isOpen,onClose:m,employee:a.employee,payment:a.payment,year:a.year,month:a.month,onSave:g,onDelete:v})]})}function qlt({isDarkMode:e}){const{employees:t,loading:n,error:r,addEmployee:i,updateEmployee:s,deleteEmployee:a,getActiveEmployees:o}=$lt(),{payments:c,loading:u,error:d,generateYearlyPayments:f,addSalaryPayment:h,updateSalaryPayment:p,deleteSalaryPayment:m}=Ult(),[g,v]=w.useState(""),[y,x]=w.useState(!1),[b,S]=w.useState(null),[E,N]=w.useState(new Date().getFullYear()),_=n||u,k=r||d,T=w.useMemo(()=>t.filter(L=>{var B,R;return L.is_active?L.name.toLowerCase().includes(g.toLowerCase())||((B=L.position)==null?void 0:B.toLowerCase().includes(g.toLowerCase()))||((R=L.email)==null?void 0:R.toLowerCase().includes(g.toLowerCase())):!1}),[t,g]),A=w.useMemo(()=>{const L=o(),P=L.reduce((K,fe)=>K+fe.base_salary,0),B=new Date,R=B.getMonth()+1,F=B.getFullYear();let O,Q,Y;if(E===F){const K=Math.min(2,R-1),fe=12-R+1;O=K+fe,Q=fe-1,Y=K}else E>F?(O=12,Q=12,Y=0):(O=12,Q=0,Y=12);const $=P*O,ye=c.filter(K=>K.year===E),Te=ye.filter(K=>K.status==="paid").reduce((K,fe)=>K+fe.total_amount,0),U=ye.filter(K=>K.status==="scheduled").reduce((K,fe)=>K+fe.total_amount,0);return{totalEmployees:L.length,totalMonthlySalaries:P,totalBudgetInView:$,actualPaid:Te,scheduledPayments:U,remainingBudget:$-Te-U,totalMonthsInView:O,futureMonthsCount:Q,pastMonthsCount:Y}},[o,c,E]),j=async L=>{try{b?(await s({...L,id:b.id}),S(null)):await i(L),x(!1)}catch(P){console.error("Error saving employee:",P)}},D=L=>{S(L),x(!0)},I=async L=>{confirm("Are you sure you want to delete this employee? This will deactivate them if they have salary payments.")&&await a(L)},M=async()=>{if(confirm(`Generate salary payments for all active employees for ${E}?`))try{await f(E)}catch(L){console.error("Error generating yearly payments:",L)}};return _?l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading salary data..."})]})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Salary Management"}),l.jsx("p",{className:"text-muted-foreground",children:"Manage employee salaries and monthly payments"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(H,{onClick:M,variant:"outline",className:"flex items-center gap-2",children:[l.jsx(cV,{className:"h-4 w-4"}),"Generate ",E," Payments"]}),l.jsxs(H,{onClick:()=>x(!0),className:"flex items-center gap-2",children:[l.jsx(Xe,{className:"h-4 w-4"}),"Add Employee"]})]})]}),k&&l.jsx(Z,{className:"border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-900/20",children:l.jsx(ee,{className:"pt-6",children:l.jsx("p",{className:"text-red-600 dark:text-red-400",children:k})})}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsx(Z,{children:l.jsx(ee,{className:"pt-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Employees"}),l.jsx("p",{className:"text-2xl font-bold",children:A.totalEmployees})]}),l.jsx(Tr,{className:"h-8 w-8 text-muted-foreground"})]})})}),l.jsx(Z,{children:l.jsx(ee,{className:"pt-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Monthly Total"}),l.jsx("p",{className:"text-2xl font-bold",children:ue(A.totalMonthlySalaries)})]}),l.jsx(wn,{className:"h-8 w-8 text-muted-foreground"})]})})}),l.jsx(Z,{children:l.jsx(ee,{className:"pt-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:E===new Date().getFullYear()?"Period Budget":"Yearly Budget"}),l.jsx("p",{className:"text-2xl font-bold",children:ue(A.totalBudgetInView)}),A.totalMonthsInView>0&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:[A.totalMonthsInView," months in view",E===new Date().getFullYear()&&` (${A.pastMonthsCount} past, current, ${A.futureMonthsCount} future)`]})]}),l.jsx(Lt,{className:"h-8 w-8 text-muted-foreground"})]})})}),l.jsx(Z,{children:l.jsx(ee,{className:"pt-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm font-medium text-muted-foreground",children:["Paid ",E]}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:ue(A.actualPaid)})]}),l.jsx(Er,{className:"h-8 w-8 text-green-600"})]})})})]}),l.jsxs(Z,{children:[l.jsx(de,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(he,{children:"Monthly Salary Overview"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Year:"}),l.jsx("select",{value:E,onChange:L=>N(parseInt(L.target.value)),className:"px-3 py-1 border rounded-md","aria-label":"Select year for salary overview",children:Array.from({length:5},(L,P)=>{const B=new Date().getFullYear()-2+P;return l.jsx("option",{value:B,children:B},B)})})]})]})}),l.jsx(ee,{children:l.jsx(Wlt,{employees:T,payments:c,year:E,onUpdatePayment:p,onAddPayment:h,onDeletePayment:m})})]}),l.jsxs(Z,{children:[l.jsx(de,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(he,{children:"Employees"}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("div",{className:"relative",children:[l.jsx(Jh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(re,{placeholder:"Search employees...",value:g,onChange:L=>v(L.target.value),className:"pl-9 w-64"})]})})]})}),l.jsx(ee,{children:T.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(Tr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"No employees found"}),l.jsx(H,{onClick:()=>x(!0),className:"mt-2",variant:"outline",children:"Add First Employee"})]}):l.jsx("div",{className:"space-y-4",children:T.map(L=>l.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h3",{className:"font-medium",children:L.name}),L.position&&l.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 rounded-full",children:L.position})]}),l.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-muted-foreground",children:[l.jsxs("span",{children:["Base Salary: ",ue(L.base_salary)]}),l.jsxs("span",{children:["Start Date: ",new Date(L.employment_start_date).toLocaleDateString("sv-SE")]}),L.email&&l.jsxs("span",{children:["Email: ",L.email]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(H,{size:"sm",variant:"outline",onClick:()=>D(L),children:l.jsx(uo,{className:"h-3 w-3"})}),l.jsx(H,{size:"sm",variant:"outline",onClick:()=>I(L.id),className:"text-red-600 hover:text-red-700",children:l.jsx(lr,{className:"h-3 w-3"})})]})]},L.id))})})]}),y&&l.jsx(zlt,{employee:b,onSubmit:j,onCancel:()=>{x(!1),S(null)}})]})}const df=["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"];function Klt(){const{user:e}=jr(),{toast:t}=xo(),[n,r]=w.useState(()=>{const g=new Date;return{year:g.getFullYear(),month:g.getMonth()+1}}),[i,s]=w.useState({billing_percentage:94,absence_percentage:15}),[a,o]=w.useState(!1),[c,u]=w.useState(!1);w.useEffect(()=>{(async()=>{if(e)try{u(!0);const{data:v,error:y}=await ie.from("monthly_settings").select("billing_percentage, absence_percentage").eq("user_id",e.id).eq("year",n.year).eq("month",n.month).single();if(v&&!y)console.log(`Loading settings for ${n.month}/${n.year}:`,v),s({billing_percentage:v.billing_percentage,absence_percentage:v.absence_percentage});else{console.log(`No specific settings for ${n.month}/${n.year}, using defaults`);const{data:x,error:b}=await ie.from("user_profiles").select("debit_rate_monthly, absence_percentage").eq("id",e.id).single();s(x&&!b?{billing_percentage:x.debit_rate_monthly||94,absence_percentage:x.absence_percentage||15}:{billing_percentage:94,absence_percentage:15})}}catch(v){console.error("Error loading monthly settings:",v),s({billing_percentage:94,absence_percentage:15})}finally{u(!1)}})()},[e,n.year,n.month]);const d=g=>{r(v=>{let y=v.month+(g==="next"?1:-1),x=v.year;return y>12?(y=1,x++):y<1&&(y=12,x--),{year:x,month:y}})},f=async()=>{if(e)try{o(!0),console.log(` Saving settings for ${df[n.month-1]} ${n.year}:`,{month:n.month,year:n.year,settings:i});const{error:g}=await ie.from("monthly_settings").upsert({user_id:e.id,year:n.year,month:n.month,billing_percentage:i.billing_percentage,absence_percentage:i.absence_percentage,updated_at:new Date().toISOString()},{onConflict:"user_id,year,month"});if(g)throw g;console.log(` Successfully saved settings for ${df[n.month-1]} ${n.year}`),t({title:"Sparade mnadsspecifika instllningar",description:`Instllningar fr ${df[n.month-1]} ${n.year} har sparats`})}catch(g){console.error("Error saving monthly settings:",g),t({title:"Fel vid sparande",description:g instanceof Error?`Databasfel: ${g.message}. Kontrollera att monthly_settings tabellen existerar.`:"Kunde inte spara mnadsspecifika instllningar.",variant:"destructive"})}finally{o(!1)}},h=8*5*4.33,p=Math.round(h*(1-i.absence_percentage/100)),m=Math.round(p*(i.billing_percentage/100));return l.jsxs(Z,{children:[l.jsxs(de,{children:[l.jsxs(he,{className:"flex items-center gap-2",children:[l.jsx(Lt,{className:"w-5 h-5"}),"Mnadsspecifika instllningar"]}),l.jsx(br,{children:"Konfigurera debiteringsgrad och frnvaro per mnad fr noggrannare prognoser. Varje mnad kan ha unika instllningar."})]}),l.jsxs(ee,{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between bg-muted/50 p-3 rounded-lg",children:[l.jsx(H,{variant:"ghost",size:"icon",onClick:()=>d("prev"),className:"h-8 w-8",children:l.jsx(uO,{className:"h-4 w-4"})}),l.jsxs("div",{className:"text-center",children:[l.jsxs("h3",{className:"font-semibold text-lg",children:[df[n.month-1]," ",n.year]}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Mnadsspecifika instllningar"})]}),l.jsx(H,{variant:"ghost",size:"icon",onClick:()=>d("next"),className:"h-8 w-8",children:l.jsx(dO,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"billing_percentage",children:"Debiteringsgrad (%)"}),l.jsx(re,{id:"billing_percentage",type:"number",min:"0",max:"100",step:"1",value:i.billing_percentage,onChange:g=>s(v=>({...v,billing_percentage:parseFloat(g.target.value)>=0?parseFloat(g.target.value):0}))}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Procent av arbetstimmar som faktiskt debiteras denna mnad"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{htmlFor:"absence_percentage",children:"Frnvaroprocent (%)"}),l.jsx(re,{id:"absence_percentage",type:"number",min:"0",max:"100",step:"1",value:i.absence_percentage,onChange:g=>s(v=>({...v,absence_percentage:parseFloat(g.target.value)>=0?parseFloat(g.target.value):0}))}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Frvntad frnvaro fr denna mnad (semester, sjukdom, etc.)"})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h4",{className:"font-medium",children:["Berkning fr ",df[n.month-1]]}),l.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg space-y-2 text-sm",children:[l.jsxs("p",{children:[" Arbetstimmar: ",Math.round(h)," timmar"]}),l.jsxs("p",{children:[" Efter frnvaro (",i.absence_percentage,"%): ",p," timmar"]}),l.jsxs("p",{children:[" Debiterbara timmar (",i.billing_percentage,"%): ",m," timmar"]})]})]})]}),l.jsx("div",{className:"flex justify-end",children:l.jsxs(H,{onClick:f,disabled:a||c,className:"flex items-center gap-2",children:[l.jsx(Qh,{className:"w-4 h-4"}),a?"Sparar...":`Spara fr ${df[n.month-1]}`]})})]})]})}function Glt(){const{user:e}=jr(),{toast:t}=xo(),{processYearlyVat:n,refetch:r}=AS((e==null?void 0:e.id)||null),[i,s]=w.useState(!0),[a,o]=w.useState(!1),[c,u]=w.useState(!1),[d,f]=w.useState({id:"",company_name:"",company_motto:"",hourly_rate:99,currency:"SEK",timezone:"Europe/Stockholm",debit_rate_monthly:99,absence_percentage:5,work_hours_per_day:8,work_days_per_week:5,auto_generate_employer_tax:!1,employer_tax_payment_date:12,auto_generate_yearly_vat:!1,vat_rate_income:25,vat_rate_expenses:25}),h=w.useCallback(async()=>{if(e!=null&&e.id)try{console.log(" Fetching settings for user:",e.id);const{data:b,error:S}=await ie.from("user_profiles").select("*").eq("id",e.id).single();if(S&&S.code!=="PGRST116")throw console.error(" Error fetching settings:",S),S;if(b)console.log(" Settings loaded:",{auto_generate_employer_tax:b.auto_generate_employer_tax,auto_generate_yearly_vat:b.auto_generate_yearly_vat,vat_rate_income:b.vat_rate_income}),f({id:b.id,company_name:b.company_name||"",company_motto:b.company_motto||"",hourly_rate:b.hourly_rate||500,currency:b.currency||"SEK",timezone:b.timezone||"Europe/Stockholm",debit_rate_monthly:b.debit_rate_monthly||1e4,absence_percentage:b.absence_percentage||5,work_hours_per_day:b.work_hours_per_day||8,work_days_per_week:b.work_days_per_week||5,auto_generate_employer_tax:b.auto_generate_employer_tax||!1,employer_tax_payment_date:b.employer_tax_payment_date||12,auto_generate_yearly_vat:b.auto_generate_yearly_vat||!1,vat_rate_income:b.vat_rate_income||25,vat_rate_expenses:b.vat_rate_expenses||25});else{const{data:E,error:N}=await ie.from("user_profiles").insert({id:e.id,company_name:"",company_motto:"",hourly_rate:500,currency:"SEK",timezone:"Europe/Stockholm",debit_rate_monthly:1e4,absence_percentage:5,work_hours_per_day:8,work_days_per_week:5,auto_generate_employer_tax:!1,employer_tax_payment_date:12,auto_generate_yearly_vat:!1,vat_rate_income:25,vat_rate_expenses:25}).select().single();if(N)throw N;E&&f({id:E.id,company_name:E.company_name||"",company_motto:E.company_motto||"",hourly_rate:E.hourly_rate||500,currency:E.currency||"SEK",timezone:E.timezone||"Europe/Stockholm",debit_rate_monthly:E.debit_rate_monthly||1e4,absence_percentage:E.absence_percentage||5,work_hours_per_day:E.work_hours_per_day||8,work_days_per_week:E.work_days_per_week||5,auto_generate_employer_tax:E.auto_generate_employer_tax||!1,employer_tax_payment_date:E.employer_tax_payment_date||12,auto_generate_yearly_vat:E.auto_generate_yearly_vat||!1,vat_rate_income:E.vat_rate_income||25,vat_rate_expenses:E.vat_rate_expenses||25})}}catch(b){console.error("Error fetching settings:",b)}finally{s(!1)}},[e==null?void 0:e.id]);w.useEffect(()=>{h()},[h]);const p=async()=>{if(!(e!=null&&e.id)){console.error(" No user ID available for employer tax processing");return}try{console.log(" Processing employer tax for existing salary cash flow entries...");const{data:b,error:S}=await ie.from("cash_flow_entries").select("*").eq("user_id",e.id).eq("type","expense").eq("category","Salary").gt("amount",0).order("date",{ascending:!0});if(S)throw S;console.log(` Found ${(b==null?void 0:b.length)||0} salary entries to process`);let E=0;const N=d.employer_tax_payment_date||25;for(const _ of b||[]){const k=Math.round(_.amount*.3142),T=new Date(_.date),A=T.getFullYear();let j=T.getMonth()+1;j>11&&(j=0,T.setFullYear(A+1));const I=new Date(A+(j>11?1:0),j,Math.min(N,28)).toISOString().split("T")[0],{data:M}=await ie.from("cash_flow_entries").select("id").eq("user_id",e.id).eq("category","Employer Tax").eq("date",I).like("description",`%${_.description}%`).single();if(M){console.log(` Employer tax already exists for ${_.description} on ${I}`);continue}const{error:L}=await ie.from("cash_flow_entries").insert([{user_id:e.id,type:"expense",amount:k,description:`Employer Tax - ${_.description.replace("Salary - ","")}`,category:"Employer Tax",date:I,is_recurring:!1,is_budget_entry:!1,is_recurring_instance:!1,vat_amount:0,amount_excluding_vat:k,vat_rate:0}]);L?console.error(" Error creating employer tax entry:",L):(console.log(` Created employer tax entry: ${k} SEK for ${_.description} (due ${I})`),E++)}t({title:"Employer Tax Processing Complete",description:`Created ${E} employer tax entries for existing salary payments`}),console.log(` Successfully processed employer tax: ${E} entries created`)}catch(b){console.error(" Error processing employer tax for existing salaries:",b),t({title:"Employer Tax Processing Error",description:"Failed to process employer tax for existing salaries. Please try again.",variant:"destructive"})}},m=async()=>{if(!(e!=null&&e.id)){console.error(" No user ID available for VAT processing");return}try{console.log(" Auto-processing VAT for multiple years..."),console.log(" processYearlyVat function available:",typeof n),console.log(" Refreshing VAT settings before processing..."),r&&(await r(),console.log(" VAT settings refreshed")),await new Promise(E=>setTimeout(E,500)),console.log(" Processing VAT for 2024...");const b=await n(2024);console.log("2024 result:",b),console.log(" Processing VAT for 2025...");const S=await n(2025);console.log("2025 result:",S),t(b||S?{title:"VAT Processing Complete",description:`Yearly VAT calculations have been created for ${b?"2024":""}${b&&S?" and ":""}${S?"2025":""}`}:{title:"VAT Processing Info",description:"No VAT entries were created. Check if you have income or expenses for the selected years."}),console.log(" Successfully processed VAT for multiple years")}catch(b){console.error(" Error auto-processing VAT:",b),t({title:"VAT Processing Error",description:"Failed to process VAT calculations. Please try again.",variant:"destructive"})}},g=async()=>{if(e!=null&&e.id)try{console.log(" Cleaning up existing VAT entries...");const{error:b}=await ie.from("cash_flow_entries").delete().eq("user_id",e.id).eq("category","MOMS Tax");if(b)throw b;t({title:"VAT Disabled",description:"All VAT payment entries have been removed from cash flow"}),console.log(" Successfully removed all VAT entries")}catch(b){console.error("Error cleaning up VAT entries:",b),t({title:"Error",description:"Failed to remove VAT entries. Please try again.",variant:"destructive"})}},v=async()=>{if(e!=null&&e.id)try{console.log(" Cleaning up existing employer tax entries...");const{error:b}=await ie.from("cash_flow_entries").delete().eq("user_id",e.id).eq("category","Employer Tax");if(b)throw b;t({title:"Employer Tax Disabled",description:"All employer tax entries have been removed from cash flow"}),console.log(" Successfully removed all employer tax entries")}catch(b){console.error("Error cleaning up employer tax entries:",b),t({title:"Error",description:"Failed to remove employer tax entries. Please try again.",variant:"destructive"})}},y=async(b,S)=>{if(console.log(" Settings change:",{field:b,value:S,userId:e==null?void 0:e.id}),f(E=>({...E,[b]:S})),e!=null&&e.id)try{const E={id:e.id,[b]:S};console.log(" Saving setting to database:",E);const{error:N}=await ie.from("user_profiles").upsert(E,{onConflict:"id"});if(N)throw console.error(" Database save error:",N),N;console.log(" Setting saved successfully:",b,S)}catch(E){console.error(" Error saving setting:",E),t({title:"Error",description:"Failed to save setting. Please try again.",variant:"destructive"});return}b==="auto_generate_yearly_vat"&&S===!0&&(console.log(" Triggering VAT calculation..."),m()),b==="auto_generate_yearly_vat"&&S===!1&&(console.log(" Triggering VAT cleanup..."),g()),b==="auto_generate_employer_tax"&&S===!0&&(console.log(" Triggering employer tax generation for existing salaries..."),p()),b==="auto_generate_employer_tax"&&S===!1&&(console.log(" Triggering employer tax cleanup..."),v())},x=async()=>{if(e!=null&&e.id){o(!0);try{const b={id:e.id,company_name:d.company_name,company_motto:d.company_motto,hourly_rate:d.hourly_rate,currency:d.currency,timezone:d.timezone,debit_rate_monthly:d.debit_rate_monthly,absence_percentage:d.absence_percentage,work_hours_per_day:d.work_hours_per_day,work_days_per_week:d.work_days_per_week,auto_generate_employer_tax:d.auto_generate_employer_tax,employer_tax_payment_date:d.employer_tax_payment_date,auto_generate_yearly_vat:d.auto_generate_yearly_vat,vat_rate_income:d.vat_rate_income,vat_rate_expenses:d.vat_rate_expenses};console.log(" Full updateData being sent to database:",b),console.log(" Numeric values specifically:",{hourly_rate:b.hourly_rate,debit_rate_monthly:b.debit_rate_monthly,absence_percentage:b.absence_percentage,work_hours_per_day:b.work_hours_per_day,work_days_per_week:b.work_days_per_week,employer_tax_payment_date:b.employer_tax_payment_date,vat_rate_income:b.vat_rate_income,vat_rate_expenses:b.vat_rate_expenses});const{error:S}=await ie.from("user_profiles").upsert(b,{onConflict:"id"});if(S)throw S;t({title:"Sparade instllningar",description:"Dina instllningar har sparats framgngsrikt"})}catch(b){console.error("Error saving settings:",b),t({title:"Fel",description:"Kunde inte spara instllningar",variant:"destructive"})}finally{o(!1)}}};return i?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx(qo,{className:"h-8 w-8 animate-spin"})}):l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Instllningar"}),l.jsx("p",{className:"text-muted-foreground",children:"Hantera dina fretagsinstllningar, timpris och systempreferenser"})]}),l.jsxs(Qo,{defaultValue:"profile",className:"w-full",children:[l.jsxs(co,{className:"grid w-full grid-cols-5",children:[l.jsxs(St,{value:"profile",className:"flex items-center gap-2",children:[l.jsx(Ei,{className:"h-4 w-4"}),"Profil"]}),l.jsxs(St,{value:"tracking",className:"flex items-center gap-2",children:[l.jsx(gt,{className:"h-4 w-4"}),"Tidrapportering"]}),l.jsxs(St,{value:"invoicing",className:"flex items-center gap-2",children:[l.jsx(Js,{className:"h-4 w-4"}),"Fakturering"]}),l.jsxs(St,{value:"tax",className:"flex items-center gap-2",children:[l.jsx(_4,{className:"h-4 w-4"}),"Skatt"]}),l.jsxs(St,{value:"preferences",className:"flex items-center gap-2",children:[l.jsx(A4,{className:"h-4 w-4"}),"Preferenser"]})]}),l.jsx(wt,{value:"profile",className:"space-y-4",children:l.jsxs(Z,{children:[l.jsxs(de,{children:[l.jsxs(he,{className:"flex items-center gap-2",children:[l.jsx(Ei,{className:"h-5 w-5"}),"Fretagsprofil"]}),l.jsx(br,{children:"Grundlggande information om ditt fretag"})]}),l.jsxs(ee,{className:"space-y-4",children:[l.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[l.jsx(X,{htmlFor:"company_name",children:"Fretagsnamn"}),l.jsx(re,{type:"text",id:"company_name",value:d.company_name,onChange:b=>y("company_name",b.target.value)})]}),l.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[l.jsx(X,{htmlFor:"company_motto",children:"Fretagsmotto"}),l.jsx(re,{type:"text",id:"company_motto",value:d.company_motto,onChange:b=>y("company_motto",b.target.value)})]}),l.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[l.jsx(X,{htmlFor:"hourly_rate",children:"Timpris (SEK)"}),l.jsx(re,{type:"number",id:"hourly_rate",value:d.hourly_rate,onChange:b=>y("hourly_rate",Number(b.target.value))})]})]})]})}),l.jsxs(wt,{value:"tracking",className:"space-y-4",children:[l.jsxs(Z,{children:[l.jsxs(de,{children:[l.jsxs(he,{className:"flex items-center gap-2",children:[l.jsx(gt,{className:"h-5 w-5"}),"Tidrapportering"]}),l.jsx(br,{children:"Instllningar fr tidrapportering och frnvaro"})]}),l.jsxs(ee,{className:"space-y-4",children:[l.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[l.jsx(X,{htmlFor:"work_hours_per_day",children:"Arbetstimmar per dag"}),l.jsx(re,{type:"number",id:"work_hours_per_day",value:d.work_hours_per_day,onChange:b=>y("work_hours_per_day",Number(b.target.value))})]}),l.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[l.jsx(X,{htmlFor:"work_days_per_week",children:"Arbetsdagar per vecka"}),l.jsx(re,{type:"number",id:"work_days_per_week",value:d.work_days_per_week,onChange:b=>y("work_days_per_week",Number(b.target.value))})]}),l.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[l.jsx(X,{htmlFor:"absence_percentage",children:"Frnvaroprocent (%)"}),l.jsx(re,{type:"number",id:"absence_percentage",value:d.absence_percentage,onChange:b=>y("absence_percentage",Number(b.target.value))})]})]})]}),l.jsx(Klt,{})]}),l.jsx(wt,{value:"invoicing",className:"space-y-4",children:l.jsxs(Z,{children:[l.jsxs(de,{children:[l.jsxs(he,{className:"flex items-center gap-2",children:[l.jsx(Js,{className:"h-5 w-5"}),"Fakturering"]}),l.jsx(br,{children:"Instllningar fr fakturering och integrationer"})]}),l.jsxs(ee,{className:"space-y-4",children:[l.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[l.jsx(X,{htmlFor:"debit_rate_monthly",children:"Mnatlig debiteringsgrad (SEK)"}),l.jsx(re,{type:"number",id:"debit_rate_monthly",value:d.debit_rate_monthly,onChange:b=>y("debit_rate_monthly",Number(b.target.value))})]}),l.jsx(Cw,{}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{children:"Fortnox Integration"}),l.jsxs(H,{variant:"outline",onClick:()=>u(!0),className:"w-full justify-start",children:[l.jsx(cO,{className:"h-4 w-4 mr-2"}),"Konfigurera Fortnox"]})]})]})]})}),l.jsx(wt,{value:"tax",className:"space-y-4",children:l.jsxs(Z,{children:[l.jsxs(de,{children:[l.jsxs(he,{className:"flex items-center gap-2",children:[l.jsx(_4,{className:"h-5 w-5"}),"Skattehantering"]}),l.jsx(br,{children:"Automatisk hantering av arbetsgivaravgifter och MOMS"})]}),l.jsxs(ee,{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Arbetsgivaravgifter"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(na,{id:"auto_generate_employer_tax",checked:d.auto_generate_employer_tax||!1,onCheckedChange:b=>y("auto_generate_employer_tax",b)}),l.jsx(X,{htmlFor:"auto_generate_employer_tax",children:"Generera arbetsgivaravgifter automatiskt (31.42%)"})]}),d.auto_generate_employer_tax&&l.jsxs("div",{className:"ml-6 grid w-full items-center gap-1.5",children:[l.jsx(X,{htmlFor:"employer_tax_payment_date",children:"Betalningsdag fr arbetsgivaravgifter"}),l.jsx(re,{type:"number",id:"employer_tax_payment_date",value:d.employer_tax_payment_date||12,onChange:b=>y("employer_tax_payment_date",Number(b.target.value)),min:"1",max:"28"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Dag i mnaden efter lneutbetalning (1-28)"})]})]}),l.jsx(Cw,{}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"MOMS (VAT)"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(na,{id:"auto_generate_yearly_vat",checked:d.auto_generate_yearly_vat||!1,onCheckedChange:b=>y("auto_generate_yearly_vat",b)}),l.jsx(X,{htmlFor:"auto_generate_yearly_vat",children:"Generera rlig MOMS-betalning automatiskt"})]}),d.auto_generate_yearly_vat&&l.jsxs("div",{className:"ml-6 space-y-4",children:[l.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[l.jsx(X,{htmlFor:"vat_rate_income",children:"MOMS-sats fr intkter (%)"}),l.jsx(re,{type:"number",id:"vat_rate_income",value:d.vat_rate_income||25,onChange:b=>y("vat_rate_income",Number(b.target.value)),min:"0",max:"100"})]}),l.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[l.jsx(X,{htmlFor:"vat_rate_expenses",children:"MOMS-sats fr utgifter (%)"}),l.jsx(re,{type:"number",id:"vat_rate_expenses",value:d.vat_rate_expenses||25,onChange:b=>y("vat_rate_expenses",Number(b.target.value)),min:"0",max:"100"})]}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"MOMS berknas automatiskt fr alla fakturor och utgifter, och en rlig betalning skapas i januari"})]})]})]})]})}),l.jsx(wt,{value:"preferences",className:"space-y-4",children:l.jsxs(Z,{children:[l.jsxs(de,{children:[l.jsxs(he,{className:"flex items-center gap-2",children:[l.jsx(A4,{className:"h-5 w-5"}),"Systempreferenser"]}),l.jsx(br,{children:"Allmnna systeminstllningar"})]}),l.jsxs(ee,{className:"space-y-4",children:[l.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[l.jsx(X,{htmlFor:"currency",children:"Valuta"}),l.jsx(re,{type:"text",id:"currency",value:d.currency,onChange:b=>y("currency",b.target.value)})]}),l.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[l.jsx(X,{htmlFor:"timezone",children:"Tidszon"}),l.jsx(re,{type:"text",id:"timezone",value:d.timezone,onChange:b=>y("timezone",b.target.value)})]})]})]})})]}),l.jsx("div",{className:"flex justify-end pt-6",children:l.jsx(H,{onClick:x,disabled:a,children:a?l.jsxs(l.Fragment,{children:[l.jsx(qo,{className:"h-4 w-4 mr-2 animate-spin"}),"Sparar..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Qh,{className:"h-4 w-4 mr-2"}),"Spara instllningar"]})})}),l.jsx(zae,{open:c,onOpenChange:u})]})}function Ylt(){const{user:e}=jr(),[t,n]=w.useState({hasColumns:!1,userSettings:null,salaryPayments:[],cashFlowEntries:[]}),[r,i]=w.useState(!0),s=w.useCallback(async()=>{if(e)try{i(!0);const{data:c,error:u}=await ie.from("user_profiles").select("auto_generate_employer_tax, employer_tax_payment_date, company_name").eq("id",e.id).single();u&&u.code!=="PGRST116"&&console.error("Profile error:",u);const{data:d,error:f}=await ie.from("salary_payments").select(`
          *,
          employee:salary_employees(name)
        `).eq("user_id",e.id).order("year",{ascending:!1}).order("month",{ascending:!1}).limit(10);f&&console.error("Salary error:",f);const{data:h,error:p}=await ie.from("cash_flow_entries").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(20);p&&console.error("Cash flow error:",p),n({hasColumns:!!c,userSettings:c,salaryPayments:d||[],cashFlowEntries:h||[]})}catch(c){console.error("Debug info error:",c)}finally{i(!1)}},[e]);w.useEffect(()=>{s()},[s]);const a=async()=>{if(e)try{const c=t.salaryPayments.find(d=>d.status==="scheduled");if(!c){alert('No scheduled salary payments found. Please set a salary payment to "scheduled" status first.');return}const{error:u}=await ie.from("salary_payments").update({updated_at:new Date().toISOString()}).eq("id",c.id);if(u)throw u;alert("Triggered employer tax update. Check the cash flow entries below after a few seconds."),setTimeout(s,2e3)}catch(c){console.error("Test trigger error:",c);const u=c instanceof Error?c.message:"Unknown error";alert("Error triggering test: "+u)}};if(!e)return l.jsx("div",{className:"p-4",children:"Please log in to access debug information."});if(r)return l.jsx("div",{className:"p-4",children:"Loading debug information..."});const o=t.cashFlowEntries.filter(c=>{var u,d,f;return((u=c.category)==null?void 0:u.toLowerCase().includes("tax"))||((d=c.description)==null?void 0:d.toLowerCase().includes("tax"))||((f=c.description)==null?void 0:f.toLowerCase().includes("employer"))});return l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Employer Tax Debug Page"}),l.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[l.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Database Columns"}),l.jsx("p",{className:`text-sm ${t.hasColumns?"text-green-600":"text-red-600"}`,children:t.hasColumns?" Employer tax columns exist":" Employer tax columns missing - run the SQL script"})]}),l.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[l.jsx("h2",{className:"text-lg font-semibold mb-2",children:"User Settings"}),t.userSettings?l.jsxs("div",{className:"space-y-1 text-sm",children:[l.jsxs("p",{children:["Auto-generate employer tax: ",l.jsx("span",{className:t.userSettings.auto_generate_employer_tax?"text-green-600 font-semibold":"text-red-600",children:t.userSettings.auto_generate_employer_tax?"ENABLED":"DISABLED"})]}),l.jsxs("p",{children:["Payment date: ",t.userSettings.employer_tax_payment_date||"Not set"]})]}):l.jsx("p",{className:"text-red-600",children:"No user profile found"})]}),l.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[l.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Recent Salary Payments"}),t.salaryPayments.length>0?l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b",children:[l.jsx("th",{className:"text-left p-2",children:"Employee"}),l.jsx("th",{className:"text-left p-2",children:"Month"}),l.jsx("th",{className:"text-left p-2",children:"Amount"}),l.jsx("th",{className:"text-left p-2",children:"Status"}),l.jsx("th",{className:"text-left p-2",children:"Cash Flow ID"}),l.jsx("th",{className:"text-left p-2",children:"Employer Tax ID"})]})}),l.jsx("tbody",{children:t.salaryPayments.map(c=>{var u,d;return l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"p-2",children:((u=c.employee)==null?void 0:u.name)||"Unknown"}),l.jsxs("td",{className:"p-2",children:[c.year,"-",c.month.toString().padStart(2,"0")]}),l.jsxs("td",{className:"p-2",children:[(d=c.total_amount)==null?void 0:d.toLocaleString("sv-SE")," kr"]}),l.jsx("td",{className:"p-2",children:l.jsx("span",{className:`px-2 py-1 rounded text-xs ${c.status==="scheduled"?"bg-blue-100 text-blue-800":c.status==="paid"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:c.status})}),l.jsx("td",{className:"p-2",children:c.cash_flow_entry_id?"":""}),l.jsx("td",{className:"p-2",children:c.employer_tax_entry_id?"":""})]},c.id)})})]})}):l.jsx("p",{className:"text-gray-600",children:"No salary payments found"})]}),l.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[l.jsxs("h2",{className:"text-lg font-semibold mb-2",children:["Employer Tax Cash Flow Entries (",o.length,")"]}),o.length>0?l.jsx("div",{className:"space-y-2",children:o.map(c=>{var u;return l.jsxs("div",{className:"border rounded p-2 text-sm",children:[l.jsx("div",{className:"font-medium",children:c.description}),l.jsxs("div",{className:"text-gray-600",children:[(u=c.amount)==null?void 0:u.toLocaleString("sv-SE")," kr  ",c.category,"  ",c.date]})]},c.id)})}):l.jsx("p",{className:"text-red-600",children:" No employer tax entries found"})]}),l.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[l.jsxs("h2",{className:"text-lg font-semibold mb-2",children:["All Cash Flow Entries (",t.cashFlowEntries.length,")"]}),t.cashFlowEntries.length>0?l.jsx("div",{className:"max-h-60 overflow-y-auto space-y-1",children:t.cashFlowEntries.map(c=>{var u;return l.jsxs("div",{className:"text-xs border-b pb-1",children:[l.jsxs("span",{className:`font-medium ${c.type==="income"?"text-green-600":"text-red-600"}`,children:[c.type==="income"?"+":"-",(u=c.amount)==null?void 0:u.toLocaleString("sv-SE")," kr"]}),"  ",l.jsx("span",{children:c.description}),"  ",l.jsxs("span",{className:"text-gray-500",children:[c.category,"  ",c.date]})]},c.id)})}):l.jsx("p",{className:"text-gray-600",children:"No cash flow entries found"})]}),l.jsxs("div",{className:"bg-blue-50 rounded-lg border border-blue-200 p-4",children:[l.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Test Employer Tax Generation"}),l.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"This will trigger a salary payment update to force employer tax creation."}),l.jsx("button",{onClick:a,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Trigger Test"})]})]})}function Xlt(){const{user:e,loading:t,signOut:n}=jr(),[r,i]=w.useState(!1);w.useEffect(()=>{const o=localStorage.getItem("darkMode");o&&i(JSON.parse(o))},[]),w.useEffect(()=>{localStorage.setItem("darkMode",JSON.stringify(r)),r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[r]);const s=async()=>{await n()},a=()=>{i(!r)};return t?l.jsx("div",{className:`min-h-screen flex items-center justify-center ${r?"bg-slate-900":"bg-slate-50"}`,children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),l.jsx("p",{className:r?"text-white":"text-slate-900",children:"Loading..."})]})}):e?l.jsx(phe,{children:l.jsx(Wue,{children:l.jsx(Jpe,{isDarkMode:r,onToggleDarkMode:a,onSignOut:s,user:e,children:l.jsxs(Lue,{children:[l.jsx(Gi,{path:"/",element:l.jsx(A9e,{isDarkMode:r})}),l.jsx(Gi,{path:"/time-tracking",element:l.jsx(M9e,{isDarkMode:r})}),l.jsx(Gi,{path:"/budget",element:l.jsx(V9e,{isDarkMode:r})}),l.jsx(Gi,{path:"/cash-flow",element:l.jsx(q9e,{isDarkMode:r})}),l.jsx(Gi,{path:"/projects",element:l.jsx(K9e,{})}),l.jsx(Gi,{path:"/clients",element:l.jsx(hot,{})}),l.jsx(Gi,{path:"/analytics",element:l.jsx(yot,{})}),l.jsx(Gi,{path:"/salary",element:l.jsx(qlt,{isDarkMode:r})}),l.jsx(Gi,{path:"/cv-manager",element:l.jsx(Blt,{})}),l.jsx(Gi,{path:"/invoicing",element:l.jsx(Iot,{})}),l.jsx(Gi,{path:"/settings",element:l.jsx(Glt,{})}),l.jsx(Gi,{path:"/debug-employer-tax",element:l.jsx(Ylt,{})})]})})})}):l.jsx(spe,{isDarkMode:r})}yH(document.getElementById("root")).render(l.jsx(Xlt,{}));
